"use strict";(self.webpackChunkiot_master_ui=self.webpackChunkiot_master_ui||[]).push([[552],{8989:(J,A,a)=>{a.d(A,{A:()=>O});var n=a(4650);let O=(()=>{class t{}return t.\u0275fac=function(b){return new(b||t)},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-card"]],inputs:{id:"id",name:"name",title:"title",img:"img"},decls:8,vars:5,consts:[[1,"card"],[1,"card-img"],[2,"width","100%","height","100%",3,"src"],[1,"card-inf"],[2,"margin-bottom","5px"]],template:function(b,d){1&b&&(n.TgZ(0,"div",0)(1,"div",1),n._UZ(2,"img",2),n.qZA(),n.TgZ(3,"div",3)(4,"div",4),n._uU(5),n.qZA(),n.TgZ(6,"div"),n._uU(7),n.qZA()()()),2&b&&(n.xp6(2),n.Q6J("src","assets/"+d.img,n.LSH),n.xp6(3),n.AsE("",d.title,"id: ",d.id,""),n.xp6(2),n.AsE("",d.title,"\u540d\u79f0: ",d.name,""))},styles:[".card[_ngcontent-%COMP%]{overflow:hidden;border-radius:5px;box-shadow:0 0 20px #00000080;width:200px;height:264px;background-color:#fff}.card[_ngcontent-%COMP%]   .card-img[_ngcontent-%COMP%]{box-sizing:border-box;padding:10px;border-radius:5px;box-shadow:0 0 20px #00000080}.card[_ngcontent-%COMP%]   .card-inf[_ngcontent-%COMP%]{box-sizing:border-box;padding:5px 10px;color:gray}"]}),t})()},7327:(J,A,a)=>{a.d(A,{J:()=>M});var n=a(4650),O=a(9651),t=a(6895),e=a(6960),b=a(6497),d=a(6616),Z=a(7044),I=a(1664);function E(z,y){if(1&z&&n._uU(0),2&z){const _=n.oxw();n.hij("",_.title,"\u8be6\u60c5")}}function F(z,y){if(1&z&&(n.TgZ(0,"div")(1,"p"),n._uU(2),n.qZA(),n.TgZ(3,"p"),n._uU(4),n.qZA(),n.TgZ(5,"p"),n._uU(6),n.qZA(),n.TgZ(7,"p"),n._uU(8),n.qZA(),n.TgZ(9,"p"),n._uU(10),n.qZA(),n.TgZ(11,"p"),n._uU(12),n.qZA(),n.TgZ(13,"p"),n._uU(14),n.qZA(),n.TgZ(15,"p"),n._uU(16),n.qZA(),n.TgZ(17,"p"),n._uU(18),n.qZA()()),2&z){const _=n.oxw(2);n.xp6(2),n.hij("\u63d2\u4ef6id\uff1a",_.chooseData.id,""),n.xp6(2),n.hij("\u540d\u79f0\uff1a",_.chooseData.name,""),n.xp6(2),n.hij("\u7528\u6237\u540d\uff1a",_.chooseData.username,""),n.xp6(2),n.hij("\u5bc6\u7801\uff1a",_.chooseData.password,""),n.xp6(2),n.hij("\u5916\u7f6e\uff1a",_.chooseData.external,""),n.xp6(2),n.hij("\u7248\u672c\uff1a",_.chooseData.version,""),n.xp6(2),n.hij("\u547d\u4ee4\uff1a",_.chooseData.command,""),n.xp6(2),n.hij("\u72b6\u6001\uff1a",_.chooseData.running,""),n.xp6(2),n.hij("\u65e5\u671f\uff1a",_.chooseData.created,"")}}function f(z,y){if(1&z&&(n.TgZ(0,"div")(1,"p"),n._uU(2),n.qZA(),n.TgZ(3,"p"),n._uU(4),n.qZA(),n.TgZ(5,"p"),n._uU(6),n.qZA(),n.TgZ(7,"p"),n._uU(8),n.qZA()()),2&z){const _=n.oxw(2);n.xp6(2),n.hij("\u4ea7\u54c1id\uff1a",_.chooseData.id,""),n.xp6(2),n.hij("\u540d\u79f0\uff1a",_.chooseData.name,""),n.xp6(2),n.hij("\u8bf4\u660e\uff1a",_.chooseData.desc,""),n.xp6(2),n.hij("\u65e5\u671f\uff1a",_.chooseData.created,"")}}function v(z,y){if(1&z&&(n.TgZ(0,"div")(1,"p"),n._uU(2),n.qZA(),n.TgZ(3,"p"),n._uU(4),n.qZA(),n.TgZ(5,"p"),n._uU(6),n.qZA(),n.TgZ(7,"p"),n._uU(8),n.qZA(),n.TgZ(9,"p"),n._uU(10),n.qZA()()),2&z){const _=n.oxw(2);n.xp6(2),n.hij("\u603b\u7ebfid\uff1a",_.chooseData.id,""),n.xp6(2),n.hij("\u540d\u79f0\uff1a",_.chooseData.name,""),n.xp6(2),n.hij("\u8bf4\u660e\uff1a",_.chooseData.desc,""),n.xp6(2),n.hij("\u7aef\u53e3\uff1a",_.chooseData.port,""),n.xp6(2),n.hij("\u65e5\u671f\uff1a",_.chooseData.created,"")}}function S(z,y){if(1&z&&(n.YNc(0,F,19,9,"div",4),n.YNc(1,f,9,4,"div",4),n.YNc(2,v,11,5,"div",4)),2&z){const _=n.oxw();n.Q6J("ngIf","\u63d2\u4ef6"===_.title),n.xp6(1),n.Q6J("ngIf","\u4ea7\u54c1"===_.title),n.xp6(1),n.Q6J("ngIf","\u603b\u7ebf"===_.title)}}function P(z,y){if(1&z){const _=n.EpF();n.TgZ(0,"button",5),n.NdJ("click",function(){n.CHM(_);const T=n.oxw();return n.KtG(T.handleEdit(T.chooseData.id))}),n._uU(1," \u7f16\u8f91 "),n.qZA(),n.TgZ(2,"button",6),n.NdJ("nzOnConfirm",function(){n.CHM(_);const T=n.oxw();return n.KtG(T.handleDelete(T.chooseData.id))})("nzOnCancel",function(){n.CHM(_);const T=n.oxw();return n.KtG(T.cancel())}),n._uU(3," \u5220\u9664 "),n.qZA(),n.TgZ(4,"button",5),n.NdJ("click",function(){n.CHM(_);const T=n.oxw();return n.KtG(T.handleClose())}),n._uU(5,"\u5173\u95ed"),n.qZA()}}let M=(()=>{class z{constructor(_){this.msg=_,this.edit=new n.vpe,this.delete=new n.vpe,this.close=new n.vpe}handleEdit(_){this.edit.emit(_)}handleDelete(_){this.delete.emit(_)}handleClose(){this.close.emit()}cancel(){this.msg.info("\u53d6\u6d88\u5220\u9664")}}return z.\u0275fac=function(_){return new(_||z)(n.Y36(O.dD))},z.\u0275cmp=n.Xpm({type:z,selectors:[["app-detail"]],inputs:{chooseData:"chooseData",title:"title",isVisible:"isVisible"},outputs:{edit:"edit",delete:"delete",close:"close"},decls:7,vars:4,consts:[[3,"nzVisible","nzTitle","nzContent","nzFooter","nzVisibleChange","nzOnCancel"],["modalTitle",""],["modalContent",""],["modalFooter",""],[4,"ngIf"],["nz-button","","nzType","primary",3,"click"],["nz-button","","nzType","primary","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664?","nzPopconfirmPlacement","top",3,"nzOnConfirm","nzOnCancel"]],template:function(_,N){if(1&_&&(n.TgZ(0,"nz-modal",0),n.NdJ("nzVisibleChange",function(w){return N.isVisible=w})("nzOnCancel",function(){return N.handleClose()}),n.YNc(1,E,1,1,"ng-template",null,1,n.W1O),n.YNc(3,S,3,3,"ng-template",null,2,n.W1O),n.YNc(5,P,6,0,"ng-template",null,3,n.W1O),n.qZA()),2&_){const T=n.MAs(2),w=n.MAs(4),B=n.MAs(6);n.Q6J("nzVisible",N.isVisible)("nzTitle",T)("nzContent",w)("nzFooter",B)}},dependencies:[t.O5,e.du,b.JW,d.ix,Z.w,I.dQ]}),z})()},2451:(J,A,a)=>{a.d(A,{k:()=>I});var n=a(4650),O=a(9651),t=a(6616),e=a(7044),b=a(1664),d=a(7423),Z=a(3224);let I=(()=>{class E{constructor(f){this.msg=f,this.onLoad=new n.vpe,this.uploading=!1}load(){this.onLoad.emit()}handleChange(f){if("error"!==f.type){if(f.file&&f.file.response){const v=f.file.response;v.error?this.msg.error(`${v.error}`):(this.msg.success(`\u6210\u529f\u5bfc\u5165${v.data}\u6761\u6570\u636e!`),this.load())}}else this.msg.error("\u4e0a\u4f20\u5931\u8d25")}}return E.\u0275fac=function(f){return new(f||E)(n.Y36(O.dD))},E.\u0275cmp=n.Xpm({type:E,selectors:[["app-import"]],inputs:{url:"url"},outputs:{onLoad:"onLoad"},decls:4,vars:2,consts:[[3,"nzAction","nzShowUploadList","nzChange"],["nz-button","","nzType","primary"],["nz-icon","","nzType","cloud-upload"]],template:function(f,v){1&f&&(n.TgZ(0,"nz-upload",0),n.NdJ("nzChange",function(P){return v.handleChange(P)}),n.TgZ(1,"button",1),n._UZ(2,"span",2),n._uU(3," \u5bfc\u5165 "),n.qZA()()),2&f&&n.Q6J("nzAction","/api/"+v.url)("nzShowUploadList",!1)},dependencies:[t.ix,e.w,b.dQ,d.Ls,Z.FY],styles:[".fileButton[_ngcontent-%COMP%]{height:32px;line-height:32px;border-radius:3px;background-color:#1890ff;border-color:#1890ff;color:#fff;font-weight:400;display:inline-block;padding:0 15px;cursor:pointer}"]}),E})()},423:(J,A,a)=>{a.d(A,{h:()=>s});var n=a(433),O=a(235),t=a(4650),e=a(4575),b=a(1445),d=a(9651),Z=a(7423),I=a(3679),E=a(6704),F=a(5635),f=a(6616),v=a(7044),S=a(1664),P=a(1206),M=a(6895),z=a(8e3),y=a(269),_=a(6903),N=a(7096),T=a(1243);function w(l,c){if(1&l&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&l){const i=c.$implicit;t.xp6(1),t.Oqu(i.label)}}function B(l,c){if(1&l){const i=t.EpF();t.TgZ(0,"nz-input-number",16),t.NdJ("nzBlur",function(){t.CHM(i);const C=t.oxw(3);return t.KtG(C.change())}),t.qZA()}if(2&l){const i=t.oxw().$implicit;t.Q6J("formControlName",i.name)("nzPlaceHolder",i.placeholder)}}function Q(l,c){if(1&l){const i=t.EpF();t.TgZ(0,"nz-select",17),t.NdJ("ngModelChange",function(){t.CHM(i);const C=t.oxw(3);return t.KtG(C.change())}),t.qZA()}if(2&l){const i=t.oxw().$implicit;t.Q6J("formControlName",i.name)("nzPlaceHolder",i.placeholder)("nzOptions",i.options)}}function L(l,c){if(1&l&&t._UZ(0,"nz-switch",18),2&l){const i=t.oxw().$implicit;t.Q6J("formControlName",i.name)}}function K(l,c){if(1&l&&t._UZ(0,"nz-switch",18),2&l){const i=t.oxw().$implicit;t.Q6J("formControlName",i.name)}}function k(l,c){if(1&l){const i=t.EpF();t.TgZ(0,"input",19),t.NdJ("blur",function(){t.CHM(i);const C=t.oxw(3);return t.KtG(C.change())}),t.qZA()}if(2&l){const i=t.oxw().$implicit;t.Q6J("placeholder",i.placeholder||"")("formControlName",i.name)}}function $(l,c){if(1&l&&(t.TgZ(0,"td"),t.ynx(1,11),t.YNc(2,B,1,2,"nz-input-number",12),t.YNc(3,Q,1,3,"nz-select",13),t.YNc(4,L,1,1,"nz-switch",14),t.YNc(5,K,1,1,"nz-switch",14),t.YNc(6,k,1,2,"input",15),t.BQk(),t.qZA()),2&l){const i=c.$implicit;t.xp6(1),t.Q6J("ngSwitch",i.type),t.xp6(1),t.Q6J("ngSwitchCase","number"),t.xp6(1),t.Q6J("ngSwitchCase","select"),t.xp6(1),t.Q6J("ngSwitchCase","switch"),t.xp6(1),t.Q6J("ngSwitchCase","bool")}}function R(l,c){1&l&&t._UZ(0,"span",20)}function W(l,c){if(1&l){const i=t.EpF();t.TgZ(0,"span",21),t.NdJ("click",function(){t.CHM(i);const C=t.oxw().index,D=t.oxw();return t.KtG(D.handleCopyProperTy(C))}),t.qZA()}}function Y(l,c){if(1&l){const i=t.EpF();t.TgZ(0,"span",22),t.NdJ("click",function(){t.CHM(i);const C=t.oxw().index,D=t.oxw();return t.KtG(D.propertyDel(C))}),t.qZA()}}function H(l,c){if(1&l&&(t.TgZ(0,"tr",6),t.YNc(1,$,7,5,"td",3),t.TgZ(2,"td",7)(3,"nz-space"),t.YNc(4,R,1,0,"span",8),t.YNc(5,W,1,0,"span",9),t.YNc(6,Y,1,0,"span",10),t.qZA()()()),2&l){const i=c.index,m=t.oxw();t.Q6J("formGroupName",i),t.xp6(1),t.Q6J("ngForOf",m._items)}}let V=(()=>{class l{set items(i){const m={};i.forEach(C=>{m[C.name]=C.default}),this.row=m,this._items=i}constructor(i,m){this.msg=i,this.fb=m,this.row={},this._items=[],this.onChanged=()=>{},this.onTouched=()=>{},this.data={}}ngOnInit(){this.formArray=this.fb.array([]),this.group=this.fb.group({array:this.formArray})}writeValue(i){const m=JSON.parse(JSON.stringify(this.row));i&&i.length&&i.forEach(C=>{const D=this.fb.group(Object.assign(m,C));this.formArray.push(D)})}registerOnChange(i){this.onChanged=i}registerOnTouched(i){this.onTouched=i}change(){const i=this.formArray.controls.map(m=>m.value);this.onChanged(i)}handleCopyProperTy(i){this.formArray.insert(i,this.fb.group(this.formArray.controls[i].value)),this.msg.success("\u590d\u5236\u6210\u529f"),this.change()}propertyDel(i){this.formArray.removeAt(i),this.change()}drop(i){(0,P.bA)(this.formArray.controls,i.previousIndex,i.currentIndex),this.change()}propertyAdd(){this.formArray.insert(0,this.fb.group(this.row))}}return l.\u0275fac=function(i){return new(i||l)(t.Y36(d.dD),t.Y36(n.qu))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-edit-table"]],inputs:{data:"data",items:"items"},features:[t._Bn([{provide:n.JU,useExisting:(0,t.Gpc)(()=>l),multi:!0}])],decls:11,vars:3,consts:[["type","button","nz-button","","nzType","primary",3,"click"],["type","button","nz-icon","","nzType","plus"],["nzTemplateMode","",3,"formGroup"],[4,"ngFor","ngForOf"],["cdkDropList","","formArrayName","array",3,"cdkDropListDropped"],["cdkDrag","",3,"formGroupName",4,"ngFor","ngForOf"],["cdkDrag","",3,"formGroupName"],[1,"td-oper"],["nz-icon","","nzType","drag","nzTheme","outline","title","\u79fb\u52a8\u5f53\u524d\u884c","style","cursor:move;","cdkDragHandle","",4,"nzSpaceItem"],["nz-icon","","nzType","copy","nzTheme","outline","title","\u590d\u5236\u5f53\u524d\u884c","style","cursor:pointer;",3,"click",4,"nzSpaceItem"],["nz-icon","","nzType","delete","nzTheme","outline","title","\u5220\u9664","style","cursor:pointer;",3,"click",4,"nzSpaceItem"],[3,"ngSwitch"],[3,"formControlName","nzPlaceHolder","nzBlur",4,"ngSwitchCase"],[3,"formControlName","nzPlaceHolder","nzOptions","ngModelChange",4,"ngSwitchCase"],[3,"formControlName",4,"ngSwitchCase"],["nz-input","",3,"placeholder","formControlName","blur",4,"ngSwitchDefault"],[3,"formControlName","nzPlaceHolder","nzBlur"],[3,"formControlName","nzPlaceHolder","nzOptions","ngModelChange"],[3,"formControlName"],["nz-input","",3,"placeholder","formControlName","blur"],["nz-icon","","nzType","drag","nzTheme","outline","title","\u79fb\u52a8\u5f53\u524d\u884c","cdkDragHandle","",2,"cursor","move"],["nz-icon","","nzType","copy","nzTheme","outline","title","\u590d\u5236\u5f53\u524d\u884c",2,"cursor","pointer",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline","title","\u5220\u9664",2,"cursor","pointer",3,"click"]],template:function(i,m){1&i&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return m.propertyAdd()}),t._UZ(1,"i",1),t._uU(2," \u6dfb\u52a0\n"),t.qZA(),t.TgZ(3,"nz-table",2)(4,"thead")(5,"tr"),t.YNc(6,w,2,1,"th",3),t.TgZ(7,"th"),t._uU(8,"\u64cd\u4f5c"),t.qZA()()(),t.TgZ(9,"tbody",4),t.NdJ("cdkDropListDropped",function(D){return m.drop(D)}),t.YNc(10,H,7,2,"tr",5),t.qZA()()),2&i&&(t.xp6(3),t.Q6J("formGroup",m.group),t.xp6(3),t.Q6J("ngForOf",m._items),t.xp6(4),t.Q6J("ngForOf",m.formArray.controls))},dependencies:[M.sg,M.RF,M.n9,M.ED,F.Zp,f.ix,v.w,S.dQ,n.Fj,n.JJ,n.JL,n.sg,n.u,n.x0,n.CE,P.Wj,P.Zt,P.Bh,z.Vq,y.N8,y.Uo,y._C,y.Om,y.p0,y.$Z,Z.Ls,_.NU,_.$1,N._V,T.i]}),l})();var j=a(9054),G=a(3224);function X(l,c){1&l&&(t.TgZ(0,"button",26),t._UZ(1,"i",27),t._uU(2," \u6dfb\u52a0 "),t.qZA())}function g(l,c){1&l&&(t.TgZ(0,"button",26),t._UZ(1,"i",27),t._uU(2," \u6dfb\u52a0 "),t.qZA())}const x=function(){return{authorization:"authorization-text"}};let s=(()=>{class l{constructor(i,m,C,D){this.fb=i,this.router=m,this.rs=C,this.msg=D,this.allData={properties:[]},this.listData=[{label:"\u540d\u79f0(ID)",name:"name"},{label:"\u663e\u793a",name:"label"},{label:"\u7c7b\u578b",name:"type",type:"select",default:"int",options:[{label:"\u6574\u6570",value:"int"},{label:"\u6d6e\u70b9\u6570",value:"float"},{label:"\u5e03\u5c14\u578b",value:"bool"},{label:"\u6587\u672c",value:"text"},{label:"\u679a\u4e3e",value:"enum"},{label:"\u6570\u7ec4",value:"array"},{label:"\u5bf9\u8c61",value:"object"}]},{label:"\u5355\u4f4d",name:"unit"},{label:"\u6a21\u5f0f",name:"mode",type:"select",default:"rw",options:[{label:"\u53ea\u8bfb",value:"r"},{label:"\u8bfb\u5199",value:"rw"}]}],this.parameterslistData=[{label:"\u540d\u79f0(ID)",name:"name"},{label:"\u663e\u793a",name:"label"},{label:"\u6700\u5927\u503c",name:"max",type:"number",default:0},{label:"\u6700\u5c0f\u503c",name:"min",type:"number",default:0},{label:"\u9ed8\u8ba4\u503c",name:"default",type:"number",default:0}],this.constraintslistData=[{label:"\u7b49\u7ea7",name:"level"},{label:"\u6807\u9898",name:"label"},{label:"\u6a21\u677f",name:"template"},{label:"\u8868\u8fbe\u5f0f",name:"expression"},{label:"\u62a5\u8b66\u5ef6\u8fdfs",name:"delay",type:"number"},{label:"\u518d\u6b21\u63d0\u9192",name:"repeat",type:"bool"},{label:"\u518d\u6b21\u63d0\u9192\u5ef6\u8fdfs",name:"repeat_delay",type:"number"},{label:"\u603b\u63d0\u9192\u6b21\u6570",name:"repeat_total",type:"number"}],this.validatorsListData=[{label:"\u6807\u9898",name:"title"},{label:"\u7b49\u7ea7",name:"level",type:"number",default:0},{label:"\u6a21\u677f",name:"template"},{label:"\u8868\u8fbe\u5f0f",name:"expression"},{label:"\u62a5\u8b66\u5ef6\u8fdfs",name:"delay",type:"number",default:5},{label:"\u518d\u6b21\u63d0\u9192",name:"repeat",type:"bool",default:!0},{label:"\u518d\u6b21\u63d0\u9192\u5ef6\u8fdfs",name:"repeat_delay",type:"number",default:300},{label:"\u603b\u63d0\u9192\u6b21\u6570",name:"repeat_total",type:"number",default:10}],this.aggregatorsListData=[{label:"\u5b9a\u65f6\u8ba1\u5212",name:"crontab"},{label:"\u8868\u8fbe\u5f0f",name:"expression"},{label:"\u7c7b\u578b",name:"type",type:"select",default:"inc",options:[{label:"\u589e\u52a0",value:"inc"},{label:"\u51cf\u5c11",value:"dec"},{label:"\u5e73\u5747",value:"avg"},{label:"\u8ba1\u6570",value:"count"},{label:"\u6700\u5c0f",value:"min"},{label:"\u6700\u5927",value:"max"},{label:"\u6c42\u5408",value:"sum"},{label:"\u6700\u540e",value:"last"},{label:"\u6700\u524d",value:"first"}]},{label:"\u8d4b\u503c",name:"assign"}]}ngOnInit(){this.id&&this.rs.get(`product/${this.id}`).subscribe(i=>{this.allData=i.data||{},this.build(i.data)}),this.build()}build(i){this.group=this.fb.group({id:[(i=i||{}).id||"",[]],name:[i.name||"",[n.kI.required]],desc:[i.desc||"",[]],version:[i.version||"",[]],properties:[i.properties||[],[]],parameters:[i.parameters||[],[]],constraints:[i.constraints||[],[]],validators:[i.validators||[],[]],aggregators:[i.aggregators||[],[]]})}submit(){return new Promise(i=>{this.group.valid&&this.rs.post(this.id?`product/${this.id}`:"product/create",this.group.value).subscribe(C=>{this.msg.success("\u4fdd\u5b58\u6210\u529f"),i(!0)})})}handleChange(i){"done"===i.file.status?this.msg.success(`${i.file.name} \u6587\u4ef6\u4e0a\u4f20\u6210\u529f`):"error"===i.file.status&&this.msg.error(`${i.file.name} \u6587\u4ef6\u4e0a\u4f20\u5931\u8d25.`)}handleCancel(){const i=`${(0,O.kh)()}/product/list`;this.router.navigateByUrl(i)}}return l.\u0275fac=function(i){return new(i||l)(t.Y36(n.qu),t.Y36(e.F0),t.Y36(b.s),t.Y36(d.dD))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-product-edit-component"]],inputs:{id:"id"},decls:46,vars:29,consts:[["nz-form","",3,"formGroup"],["nzFor","id",3,"nzSm","nzXs"],["nzErrorTip","",3,"nzSm","nzXs"],["nz-input","","formControlName","id","placeholder","\u9ed8\u8ba4\u4e3a\u968f\u673a\u751f\u6210"],["nzRequired","","nzFor","name",3,"nzSm","nzXs"],["nz-input","","formControlName","name"],["nzFor","version",3,"nzSm","nzXs"],["nz-input","","formControlName","version"],["nzFor","desc",3,"nzSm","nzXs"],["nz-input","","formControlName","desc"],[3,"nzSm","nzXs"],["nzAction","/",3,"nzHeaders","nzChange"],["nz-button",""],["nz-icon","","nzType","upload"],["nzHeader","\u5c5e\u6027","nzActive",""],["formControlName","properties",3,"items"],["functionEx",""],["nzDisabled","","nzHeader","\u529f\u80fd",3,"nzExtra"],["eventEx",""],["nzDisabled","","nzHeader","\u4e8b\u4ef6",3,"nzExtra"],["nzHeader","\u53d8\u91cf"],["formControlName","parameters",3,"items"],["nzHeader","\u6570\u636e\u68c0\u67e5"],["formControlName","validators",3,"items"],["nzHeader","\u6570\u636e\u805a\u5408"],["formControlName","aggregators",3,"items"],["type","button","nz-button","","nzType","primary"],["nz-icon","","nzType","plus"]],template:function(i,m){if(1&i&&(t.TgZ(0,"form",0)(1,"nz-form-item")(2,"nz-form-label",1),t._uU(3,"ID"),t.qZA(),t.TgZ(4,"nz-form-control",2),t._UZ(5,"input",3),t.qZA()(),t.TgZ(6,"nz-form-item")(7,"nz-form-label",4),t._uU(8,"\u540d\u79f0"),t.qZA(),t.TgZ(9,"nz-form-control",2),t._UZ(10,"input",5),t.qZA()(),t.TgZ(11,"nz-form-item")(12,"nz-form-label",6),t._uU(13,"\u7248\u672c"),t.qZA(),t.TgZ(14,"nz-form-control",2),t._UZ(15,"input",7),t.qZA()(),t.TgZ(16,"nz-form-item")(17,"nz-form-label",8),t._uU(18,"\u8bf4\u660e"),t.qZA(),t.TgZ(19,"nz-form-control",2),t._UZ(20,"textarea",9),t.qZA()(),t.TgZ(21,"nz-form-item")(22,"nz-form-label",10),t._uU(23,"\u56fe\u7247\u4e0a\u4f20"),t.qZA(),t.TgZ(24,"nz-form-control",10)(25,"nz-upload",11),t.NdJ("nzChange",function(D){return m.handleChange(D)}),t.TgZ(26,"button",12),t._UZ(27,"span",13),t._uU(28," \u70b9\u51fb\u4e0a\u4f20 "),t.qZA()()()(),t.TgZ(29,"nz-collapse")(30,"nz-collapse-panel",14),t._UZ(31,"app-edit-table",15),t.qZA(),t.YNc(32,X,3,0,"ng-template",null,16,t.W1O),t.TgZ(34,"nz-collapse-panel",17),t._uU(35," \u6682\u4e0d\u652f\u6301 "),t.qZA(),t.YNc(36,g,3,0,"ng-template",null,18,t.W1O),t.TgZ(38,"nz-collapse-panel",19),t._uU(39," \u6682\u4e0d\u652f\u6301 "),t.qZA(),t.TgZ(40,"nz-collapse-panel",20),t._UZ(41,"app-edit-table",21),t.qZA(),t.TgZ(42,"nz-collapse-panel",22),t._UZ(43,"app-edit-table",23),t.qZA(),t.TgZ(44,"nz-collapse-panel",24),t._UZ(45,"app-edit-table",25),t.qZA()()()),2&i){const C=t.MAs(33),D=t.MAs(37);t.Q6J("formGroup",m.group),t.xp6(2),t.Q6J("nzSm",6)("nzXs",24),t.xp6(2),t.Q6J("nzSm",14)("nzXs",24),t.xp6(3),t.Q6J("nzSm",6)("nzXs",24),t.xp6(2),t.Q6J("nzSm",14)("nzXs",24),t.xp6(3),t.Q6J("nzSm",6)("nzXs",24),t.xp6(2),t.Q6J("nzSm",14)("nzXs",24),t.xp6(3),t.Q6J("nzSm",6)("nzXs",24),t.xp6(2),t.Q6J("nzSm",14)("nzXs",24),t.xp6(3),t.Q6J("nzSm",6)("nzXs",24),t.xp6(2),t.Q6J("nzSm",14)("nzXs",24),t.xp6(1),t.Q6J("nzHeaders",t.DdM(28,x)),t.xp6(6),t.Q6J("items",m.listData),t.xp6(3),t.Q6J("nzExtra",C),t.xp6(4),t.Q6J("nzExtra",D),t.xp6(3),t.Q6J("items",m.parameterslistData),t.xp6(2),t.Q6J("items",m.validatorsListData),t.xp6(2),t.Q6J("items",m.aggregatorsListData)}},dependencies:[Z.Ls,I.t3,I.SK,E.Lr,E.Nx,E.iK,E.Fd,F.Zp,f.ix,v.w,S.dQ,V,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,j.Zv,j.yH,G.FY],styles:[".cdk-drag-preview{display:table}  .cdk-drag-placeholder{opacity:0}"]}),l})()},4552:(J,A,a)=>{a.r(A),a.d(A,{ProductModule:()=>ft});var n=a(6895),O=a(1206),t=a(4575),e=a(8348),b=a(235),d=a(4650),Z=a(7423),I=a(6616),E=a(7044),F=a(1664),f=a(1971),v=a(423);const S=["componentChild"];function P(r,p){if(1&r){const o=d.EpF();d.TgZ(0,"button",4),d.NdJ("click",function(){d.CHM(o);const h=d.oxw();return d.KtG(h.handleCancel())}),d._uU(1," \u53d6\u6d88 "),d.qZA(),d.TgZ(2,"button",5),d.NdJ("click",function(){d.CHM(o);const h=d.oxw();return d.KtG(h.submit())}),d._UZ(3,"i",6),d._uU(4," \u4fdd\u5b58 "),d.qZA()}}let M=(()=>{class r{constructor(o,u){this.router=o,this.route=u,this.id=""}ngOnInit(){}submit(){this.componentChild.submit()}handleCancel(){const o=`${(0,b.kh)()}/product/list`;this.router.navigateByUrl(o)}}return r.\u0275fac=function(o){return new(o||r)(d.Y36(t.F0),d.Y36(t.gz))},r.\u0275cmp=d.Xpm({type:r,selectors:[["app-products-edit"]],viewQuery:function(o,u){if(1&o&&d.Gf(S,5),2&o){let h;d.iGM(h=d.CRH())&&(u.componentChild=h.first)}},inputs:{id:"id"},decls:5,vars:3,consts:[["extra",""],[3,"nzTitle","nzExtra"],[3,"id"],["componentChild",""],["nz-button","",2,"margin-right","10px",3,"click"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","save","nzTheme","outline"]],template:function(o,u){if(1&o&&(d.YNc(0,P,5,0,"ng-template",null,0,d.W1O),d.TgZ(2,"nz-card",1),d._UZ(3,"app-product-edit-component",2,3),d.qZA()),2&o){const h=d.MAs(1);d.xp6(2),d.Q6J("nzTitle",u.id?"\u7f16\u8f91\u4ea7\u54c1":"\u521b\u5efa\u4ea7\u54c1")("nzExtra",h),d.xp6(1),d.Q6J("id",u.id)}},dependencies:[Z.Ls,I.ix,E.w,F.dQ,f.bd,v.h],styles:[".cdk-drag-preview{display:table}  .cdk-drag-placeholder{opacity:0}"]}),r})();var z=a(1346);const _=[{path:"",pathMatch:"full",redirectTo:"list"},{path:"list",component:e.P},{path:"detail/:id",component:(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=d.Xpm({type:r,selectors:[["app-product-detail"]],decls:2,vars:0,template:function(o,u){1&o&&(d.TgZ(0,"p"),d._uU(1,"product-detail works!"),d.qZA())}}),r})()},{path:"edit/:id",component:M},{path:"create",component:M},{path:"**",component:z.r}];let N=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=d.oAB({type:r}),r.\u0275inj=d.cJS({imports:[t.Bz.forChild(_),t.Bz]}),r})();var T=a(8284),w=a(3325),B=a(6704),Q=a(269),L=a(2577),K=a(433),k=a(7096),$=a(9166),R=a(5635),W=a(6903),Y=a(9054),H=a(8e3),V=a(445);let x=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=d.oAB({type:r}),r.\u0275inj=d.cJS({}),r})();var s=a(3353),l=a(6287);let i=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=d.oAB({type:r}),r.\u0275inj=d.cJS({imports:[n.ez]}),r})();var m=a(1811),C=a(7570);let mt=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=d.oAB({type:r}),r.\u0275inj=d.cJS({imports:[V.vT,n.ez,Z.PV,C.cg,R.o7,m.YI,i,x,l.T,s.ud]}),r})();var ht=a(6497),gt=a(3224),zt=a(6960),Ct=a(1634);let ft=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=d.oAB({type:r}),r.\u0275inj=d.cJS({imports:[n.ez,N,T.wm,w.ip,Ct.uK,zt.Qp,Z.PV,B.U5,R.o7,I.sL,ht._p,Q.HQ,L.S,$.Y,K.UX,k.Zf,f.vh,W.zf,Y.cD,H.LV,mt,O._t,gt.cS]}),r})()},8348:(J,A,a)=>{a.d(A,{P:()=>X});var n=a(5380),O=a(423),t=a(235),e=a(4650),b=a(6960),d=a(4575),Z=a(1445),I=a(9651),E=a(6895),F=a(1634),f=a(7423),v=a(3679),S=a(6616),P=a(7044),M=a(1664),z=a(269),y=a(5227),_=a(297),N=a(2451),T=a(8989),w=a(7327),B=a(6903),Q=a(5545);function L(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",4),e.NdJ("click",function(){e.CHM(s);const c=e.oxw();return e.KtG(c.reload())}),e._UZ(1,"i",5),e._uU(2," \u5237\u65b0 "),e.qZA()}if(2&g){const s=e.oxw();e.xp6(1),e.Q6J("nzSpin",s.loading)}}function K(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"app-search-box",6),e.NdJ("onSearch",function(c){e.CHM(s);const i=e.oxw();return e.KtG(i.search(c))}),e.qZA()}}function k(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",4),e.NdJ("click",function(){e.CHM(s);const c=e.oxw(2);return e.KtG(c.handleEdit())}),e._UZ(1,"i",9),e._uU(2," \u521b\u5efa\u4ea7\u54c1 "),e.qZA()}}function $(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",10),e._UZ(1,"span",11),e.TgZ(2,"a",12),e.NdJ("click",function(){e.CHM(s);const c=e.oxw(2);return e.KtG(c.handleExport())}),e._uU(3,"\u5bfc\u51fa"),e.qZA()()}if(2&g){const s=e.oxw(2);e.xp6(2),e.Q6J("href",s.href,e.LSH)}}function R(g,x){1&g&&e._UZ(0,"app-import",13),2&g&&e.Q6J("url","product/import")}function W(g,x){1&g&&(e.YNc(0,k,3,0,"button",0),e.YNc(1,$,4,1,"button",7),e.YNc(2,R,1,1,"app-import",8))}function Y(g,x){1&g&&e._uU(0),2&g&&e.hij("\u603b\u5171 ",x.$implicit," \u6761")}function H(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",23),e.NdJ("dblclick",function(){const i=e.CHM(s).$implicit,m=e.oxw(2);return e.KtG(m.select(i))}),e.TgZ(1,"td",24),e.NdJ("nzCheckedChange",function(c){const m=e.CHM(s).$implicit,C=e.oxw(2);return e.KtG(C.handleItemChecked(m.id,c))}),e.qZA(),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.ALo(10,"date"),e.qZA(),e.TgZ(11,"td")(12,"a",25),e.NdJ("click",function(){const i=e.CHM(s).$implicit,m=e.oxw(2);return e.KtG(m.select(i))}),e._uU(13," \u9009\u62e9 "),e.qZA()()()}if(2&g){const s=x.$implicit,l=e.oxw(2);e.xp6(1),e.Q6J("nzChecked",l.setOfCheckedId.has(s.id)),e.xp6(2),e.Oqu(s.id),e.xp6(2),e.Oqu(s.name),e.xp6(2),e.Oqu(s.desc),e.xp6(2),e.Oqu(e.lcZ(10,5,s.created))}}function V(g,x){if(1&g){const s=e.EpF();e.ynx(0),e.YNc(1,Y,1,1,"ng-template",null,14,e.W1O),e.TgZ(3,"nz-table",15,16),e.NdJ("nzPageSizeChange",function(c){e.CHM(s);const i=e.oxw();return e.KtG(i.pageSizeChange(c))})("nzPageIndexChange",function(c){e.CHM(s);const i=e.oxw();return e.KtG(i.pageIndexChange(c))})("nzQueryParams",function(c){e.CHM(s);const i=e.oxw();return e.KtG(i.onQuery(c))}),e.TgZ(5,"thead")(6,"tr")(7,"th",17),e.NdJ("nzCheckedChange",function(c){e.CHM(s);const i=e.oxw();return e.KtG(i.handleAllChecked(c))}),e.qZA(),e.TgZ(8,"th",18),e._uU(9,"ID"),e.qZA(),e.TgZ(10,"th",19),e._uU(11,"\u540d\u79f0"),e.qZA(),e.TgZ(12,"th",20),e._uU(13,"\u8bf4\u660e"),e.qZA(),e.TgZ(14,"th",21),e._uU(15,"\u65e5\u671f"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,H,14,7,"tr",22),e.qZA()(),e.BQk()}if(2&g){const s=e.MAs(2),l=e.MAs(4),c=e.oxw();e.xp6(3),e.Q6J("nzData",c.datum)("nzFrontPagination",!1)("nzLoading",c.loading)("nzScroll",c.getTableHeight())("nzShowTotal",s)("nzTotal",c.total)("nzPageSize",c.pageSize)("nzPageIndex",c.pageIndex),e.xp6(4),e.Q6J("nzChecked",c.checked)("nzIndeterminate",c.indeterminate),e.xp6(1),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(4),e.Q6J("nzSortFn",!0),e.xp6(5),e.Q6J("ngForOf",l.data)}}function j(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"div",30),e.NdJ("click",function(){const i=e.CHM(s).$implicit,m=e.oxw(2);return e.KtG(m.informate(i))}),e._UZ(1,"app-card",31),e.qZA()}if(2&g){const s=x.$implicit;e.xp6(1),e.Q6J("img","product.png")("id",s.id)("name",s.name)("title","\u4ea7\u54c1")}}function G(g,x){if(1&g){const s=e.EpF();e.ynx(0),e.TgZ(1,"div",26),e.YNc(2,j,2,4,"div",27),e.qZA(),e.TgZ(3,"app-detail",28),e.NdJ("edit",function(c){e.CHM(s);const i=e.oxw();return e.KtG(i.handleEdit(c))})("delete",function(c){e.CHM(s);const i=e.oxw();return e.KtG(i.delete(c))})("close",function(){e.CHM(s);const c=e.oxw();return e.KtG(c.close())}),e.qZA(),e.TgZ(4,"nz-pagination",29),e.NdJ("nzPageSizeChange",function(c){e.CHM(s);const i=e.oxw();return e.KtG(i.pageSizeChange(c))})("nzPageIndexChange",function(c){e.CHM(s);const i=e.oxw();return e.KtG(i.pageIndexChange(c))}),e.qZA(),e.BQk()}if(2&g){const s=e.oxw();e.xp6(1),e.Q6J("nzGutter",16),e.xp6(1),e.Q6J("ngForOf",s.datum),e.xp6(1),e.Q6J("isVisible",s.isVisible)("title","\u4ea7\u54c1")("chooseData",s.chooseData),e.xp6(1),e.Q6J("nzPageIndex",s.pageIndex)("nzTotal",s.total)("nzPageSize",s.pageSize)}}let X=(()=>{class g{constructor(s,l,c,i,m){this.modal=s,this.ref=l,this.router=c,this.rs=i,this.msg=m,this.isVisible=!1,this.chooseData={},this.loading=!1,this.datum=[],this.total=1,this.pageSize=20,this.pageIndex=1,this.query={},this.showAddBtn=!0,this.columnKeyNameArr=["name","desc"],this.uploading=!1,this.checked=!1,this.indeterminate=!1,this.setOfCheckedId=new Set,this.delResData=[],this.pageSizeChange(this.pageSize)}reload(){this.datum=[],this.load()}informate(s){this.isVisible=!0,this.rs.get(`product/${s.id}`,this.query).subscribe(l=>{this.chooseData=l.data}).add(()=>{this.loading=!1})}load(){this.loading=!0,this.rs.post("product/search",this.query).subscribe(s=>{this.datum=s.data||[],this.total=s.total}).add(()=>{this.loading=!1})}create(){let s="/product/create";location.pathname.startsWith("/admin")&&(s="/admin"+s),this.router.navigateByUrl(s)}delete(s,l){this.rs.get(`product/${s}/delete`).subscribe(c=>{l?l&&(this.delResData.push(c),l===this.delResData.length&&(this.msg.success("\u5220\u9664\u6210\u529f"),this.load())):(this.msg.success("\u5220\u9664\u6210\u529f"),this.datum=this.datum.filter(i=>i.id!==s))})}close(){this.isVisible=!1}onQuery(s){(0,n.r)(s,this.query),this.load()}pageIndexChange(s){this.query.skip=s-1,this.load()}pageSizeChange(s){this.query.limit=s,this.load()}search(s){this.query.keyword={name:s},this.query.skip=0,this.load()}edit(s){const l=`${(0,t.kh)()}/product/edit/${s}`;this.router.navigateByUrl(l)}handleNew(){const s=`${(0,t.kh)()}/product/create`;this.router.navigateByUrl(s)}handleEdit(s){this.isVisible=!1;const c=this.modal.create({nzTitle:s?"\u7f16\u8f91\u4ea7\u54c1":"\u521b\u5efa\u4ea7\u54c1",nzStyle:{top:"20px"},nzWidth:"80%",nzContent:O.h,nzComponentParams:{id:s},nzFooter:[{label:"\u53d6\u6d88",onClick:()=>{c.destroy()}},{label:"\u4fdd\u5b58",type:"primary",onClick:i=>{i.submit().then(()=>{c.destroy(),this.load()},()=>{})}}]})}select(s){this.ref&&this.ref.close(s)}cancel(){this.msg.info("\u53d6\u6d88\u64cd\u4f5c")}handleExport(){this.href="/api/product/export"}getTableHeight(){return(0,t.NC)(this)}handleBatchDel(){(0,t.mK)(this)}handleAllChecked(s){(0,t.Yk)(s,this)}handleItemChecked(s,l){(0,t.mp)(s,l,this)}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(b.Sf),e.Y36(b.Lf,8),e.Y36(d.F0),e.Y36(Z.s),e.Y36(I.dD))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-products"]],decls:7,vars:3,consts:[["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],[3,"onSearch",4,"nzSpaceItem"],[3,"ngIf"],[4,"ngIf"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","reload",3,"nzSpin"],[3,"onSearch"],["nz-button","","nzType","primary","class","btn",4,"nzSpaceItem"],[3,"url",4,"nzSpaceItem"],["nz-icon","","nzType","plus"],["nz-button","","nzType","primary",1,"btn"],["nz-icon","","nzType","cloud-download","nzTheme","outline"],["download","filename",3,"href","click"],[3,"url"],["totalTemplate",""],["nzShowPagination","","nzShowSizeChanger","",3,"nzData","nzFrontPagination","nzLoading","nzScroll","nzShowTotal","nzTotal","nzPageSize","nzPageIndex","nzPageSizeChange","nzPageIndexChange","nzQueryParams"],["basicTable",""],[3,"nzChecked","nzIndeterminate","nzCheckedChange"],["nzColumnKey","id",3,"nzSortFn"],["nzColumnKey","name",3,"nzSortFn"],["nzColumnKey","desc"],["nzColumnKey","created",3,"nzSortFn"],[3,"dblclick",4,"ngFor","ngForOf"],[3,"dblclick"],[3,"nzChecked","nzCheckedChange"],[3,"click"],["nz-row","",1,"card",3,"nzGutter"],["nz-col","","class","card-item",3,"click",4,"ngFor","ngForOf"],[3,"isVisible","title","chooseData","edit","delete","close"],["nzShowSizeChanger","",2,"position","fixed","bottom","0","right","10px",3,"nzPageIndex","nzTotal","nzPageSize","nzPageSizeChange","nzPageIndexChange"],["nz-col","",1,"card-item",3,"click"],[3,"img","id","name","title"]],template:function(s,l){1&s&&(e.TgZ(0,"app-toolbar")(1,"nz-space"),e.YNc(2,L,3,1,"button",0),e.YNc(3,K,1,0,"app-search-box",1),e.YNc(4,W,3,0,"ng-template",2),e.qZA()(),e.YNc(5,V,20,14,"ng-container",3),e.YNc(6,G,5,8,"ng-container",3)),2&s&&(e.xp6(4),e.Q6J("ngIf",l.showAddBtn),e.xp6(1),e.Q6J("ngIf",l.ref),e.xp6(1),e.Q6J("ngIf",!l.ref))},dependencies:[E.sg,E.O5,F.dE,f.Ls,v.t3,v.SK,S.ix,P.w,M.dQ,z.N8,z.qD,z.Uo,z._C,z.h7,z.Om,z.p0,z.$Z,z.g6,y.n,_.B,N.k,T.A,w.J,B.NU,B.$1,Q.u],styles:[".btn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:82px;height:32px;border-radius:3px}.btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;margin-left:5px;font-size:14px}.card[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;padding:10px 20px}.card[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]{box-sizing:border-box;padding:5px}.card[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),g})()}}]);