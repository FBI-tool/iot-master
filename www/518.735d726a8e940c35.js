"use strict";(self.webpackChunkiot_master_ui=self.webpackChunkiot_master_ui||[]).push([[518],{8989:(O,A,o)=>{o.d(A,{A:()=>f});var t=o(4650);let f=(()=>{class m{}return m.\u0275fac=function(n){return new(n||m)},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-card"]],inputs:{id:"id",name:"name",title:"title",img:"img"},decls:8,vars:5,consts:[[1,"card"],[1,"card-img"],[2,"width","100%","height","100%",3,"src"],[1,"card-inf"],[2,"margin-bottom","5px"]],template:function(n,x){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"div",3)(4,"div",4),t._uU(5),t.qZA(),t.TgZ(6,"div"),t._uU(7),t.qZA()()()),2&n&&(t.xp6(2),t.Q6J("src","assets/"+x.img,t.LSH),t.xp6(3),t.AsE("",x.title,"id: ",x.id,""),t.xp6(2),t.AsE("",x.title,"\u540d\u79f0: ",x.name,""))},styles:[".card[_ngcontent-%COMP%]{overflow:hidden;border-radius:5px;box-shadow:0 0 20px #00000080;width:200px;height:264px;background-color:#fff}.card[_ngcontent-%COMP%]   .card-img[_ngcontent-%COMP%]{box-sizing:border-box;padding:10px;border-radius:5px;box-shadow:0 0 20px #00000080}.card[_ngcontent-%COMP%]   .card-inf[_ngcontent-%COMP%]{box-sizing:border-box;padding:5px 10px;color:gray}"]}),m})()},7327:(O,A,o)=>{o.d(A,{J:()=>P});var t=o(4650),f=o(9651),m=o(6895),_=o(6960),n=o(6497),x=o(6616),Z=o(7044),D=o(1664);function T(d,g){if(1&d&&t._uU(0),2&d){const r=t.oxw();t.hij("",r.title,"\u8be6\u60c5")}}function s(d,g){if(1&d&&(t.TgZ(0,"div")(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.qZA(),t.TgZ(11,"p"),t._uU(12),t.qZA(),t.TgZ(13,"p"),t._uU(14),t.qZA(),t.TgZ(15,"p"),t._uU(16),t.qZA(),t.TgZ(17,"p"),t._uU(18),t.qZA()()),2&d){const r=t.oxw(2);t.xp6(2),t.hij("\u63d2\u4ef6id\uff1a",r.chooseData.id,""),t.xp6(2),t.hij("\u540d\u79f0\uff1a",r.chooseData.name,""),t.xp6(2),t.hij("\u7528\u6237\u540d\uff1a",r.chooseData.username,""),t.xp6(2),t.hij("\u5bc6\u7801\uff1a",r.chooseData.password,""),t.xp6(2),t.hij("\u5916\u7f6e\uff1a",r.chooseData.external,""),t.xp6(2),t.hij("\u7248\u672c\uff1a",r.chooseData.version,""),t.xp6(2),t.hij("\u547d\u4ee4\uff1a",r.chooseData.command,""),t.xp6(2),t.hij("\u72b6\u6001\uff1a",r.chooseData.running,""),t.xp6(2),t.hij("\u65e5\u671f\uff1a",r.chooseData.created,"")}}function a(d,g){if(1&d&&(t.TgZ(0,"div")(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.qZA()()),2&d){const r=t.oxw(2);t.xp6(2),t.hij("\u4ea7\u54c1id\uff1a",r.chooseData.id,""),t.xp6(2),t.hij("\u540d\u79f0\uff1a",r.chooseData.name,""),t.xp6(2),t.hij("\u8bf4\u660e\uff1a",r.chooseData.desc,""),t.xp6(2),t.hij("\u65e5\u671f\uff1a",r.chooseData.created,"")}}function u(d,g){if(1&d&&(t.TgZ(0,"div")(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.qZA()()),2&d){const r=t.oxw(2);t.xp6(2),t.hij("\u603b\u7ebfid\uff1a",r.chooseData.id,""),t.xp6(2),t.hij("\u540d\u79f0\uff1a",r.chooseData.name,""),t.xp6(2),t.hij("\u8bf4\u660e\uff1a",r.chooseData.desc,""),t.xp6(2),t.hij("\u7aef\u53e3\uff1a",r.chooseData.port,""),t.xp6(2),t.hij("\u65e5\u671f\uff1a",r.chooseData.created,"")}}function z(d,g){if(1&d&&(t.YNc(0,s,19,9,"div",4),t.YNc(1,a,9,4,"div",4),t.YNc(2,u,11,5,"div",4)),2&d){const r=t.oxw();t.Q6J("ngIf","\u63d2\u4ef6"===r.title),t.xp6(1),t.Q6J("ngIf","\u4ea7\u54c1"===r.title),t.xp6(1),t.Q6J("ngIf","\u603b\u7ebf"===r.title)}}function C(d,g){if(1&d){const r=t.EpF();t.TgZ(0,"button",5),t.NdJ("click",function(){t.CHM(r);const E=t.oxw();return t.KtG(E.handleEdit(E.chooseData.id))}),t._uU(1," \u7f16\u8f91 "),t.qZA(),t.TgZ(2,"button",6),t.NdJ("nzOnConfirm",function(){t.CHM(r);const E=t.oxw();return t.KtG(E.handleDelete(E.chooseData.id))})("nzOnCancel",function(){t.CHM(r);const E=t.oxw();return t.KtG(E.cancel())}),t._uU(3," \u5220\u9664 "),t.qZA(),t.TgZ(4,"button",5),t.NdJ("click",function(){t.CHM(r);const E=t.oxw();return t.KtG(E.handleClose())}),t._uU(5,"\u5173\u95ed"),t.qZA()}}let P=(()=>{class d{constructor(r){this.msg=r,this.edit=new t.vpe,this.delete=new t.vpe,this.close=new t.vpe}handleEdit(r){this.edit.emit(r)}handleDelete(r){this.delete.emit(r)}handleClose(){this.close.emit()}cancel(){this.msg.info("\u53d6\u6d88\u5220\u9664")}}return d.\u0275fac=function(r){return new(r||d)(t.Y36(f.dD))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-detail"]],inputs:{chooseData:"chooseData",title:"title",isVisible:"isVisible"},outputs:{edit:"edit",delete:"delete",close:"close"},decls:7,vars:4,consts:[[3,"nzVisible","nzTitle","nzContent","nzFooter","nzVisibleChange","nzOnCancel"],["modalTitle",""],["modalContent",""],["modalFooter",""],[4,"ngIf"],["nz-button","","nzType","primary",3,"click"],["nz-button","","nzType","primary","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664?","nzPopconfirmPlacement","top",3,"nzOnConfirm","nzOnCancel"]],template:function(r,v){if(1&r&&(t.TgZ(0,"nz-modal",0),t.NdJ("nzVisibleChange",function(F){return v.isVisible=F})("nzOnCancel",function(){return v.handleClose()}),t.YNc(1,T,1,1,"ng-template",null,1,t.W1O),t.YNc(3,z,3,3,"ng-template",null,2,t.W1O),t.YNc(5,C,6,0,"ng-template",null,3,t.W1O),t.qZA()),2&r){const E=t.MAs(2),F=t.MAs(4),M=t.MAs(6);t.Q6J("nzVisible",v.isVisible)("nzTitle",E)("nzContent",F)("nzFooter",M)}},dependencies:[m.O5,_.du,n.JW,x.ix,Z.w,D.dQ]}),d})()},2451:(O,A,o)=>{o.d(A,{k:()=>D});var t=o(4650),f=o(9651),m=o(6616),_=o(7044),n=o(1664),x=o(7423),Z=o(3224);let D=(()=>{class T{constructor(a){this.msg=a,this.onLoad=new t.vpe,this.uploading=!1}load(){this.onLoad.emit()}handleChange(a){if("error"!==a.type){if(a.file&&a.file.response){const u=a.file.response;u.error?this.msg.error(`${u.error}`):(this.msg.success(`\u6210\u529f\u5bfc\u5165${u.data}\u6761\u6570\u636e!`),this.load())}}else this.msg.error("\u4e0a\u4f20\u5931\u8d25")}}return T.\u0275fac=function(a){return new(a||T)(t.Y36(f.dD))},T.\u0275cmp=t.Xpm({type:T,selectors:[["app-import"]],inputs:{url:"url"},outputs:{onLoad:"onLoad"},decls:4,vars:2,consts:[[3,"nzAction","nzShowUploadList","nzChange"],["nz-button","","nzType","primary"],["nz-icon","","nzType","cloud-upload"]],template:function(a,u){1&a&&(t.TgZ(0,"nz-upload",0),t.NdJ("nzChange",function(C){return u.handleChange(C)}),t.TgZ(1,"button",1),t._UZ(2,"span",2),t._uU(3," \u5bfc\u5165 "),t.qZA()()),2&a&&t.Q6J("nzAction","/api/"+u.url)("nzShowUploadList",!1)},dependencies:[m.ix,_.w,n.dQ,x.Ls,Z.FY],styles:[".fileButton[_ngcontent-%COMP%]{height:32px;line-height:32px;border-radius:3px;background-color:#1890ff;border-color:#1890ff;color:#fff;font-weight:400;display:inline-block;padding:0 15px;cursor:pointer}"]}),T})()},297:(O,A,o)=>{o.d(A,{B:()=>T});var t=o(4650),f=o(5635),m=o(6616),_=o(7044),n=o(1664),x=o(433);function Z(s,a){if(1&s){const u=t.EpF();t.TgZ(0,"button",3),t.NdJ("click",function(){t.CHM(u);const C=t.oxw();return t.KtG(C.onSearch.emit(C.text))}),t._uU(1),t.qZA()}if(2&s){const u=t.oxw();t.xp6(1),t.Oqu(u.searchText)}}const D=function(){return{standalone:!0}};let T=(()=>{class s{constructor(){this.searchText="\u641c\u7d22",this.placeholder="\u5173\u952e\u5b57",this.text="",this.onSearch=new t.vpe}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-search-box"]],inputs:{searchText:"searchText",placeholder:"placeholder",text:"text"},outputs:{onSearch:"onSearch"},decls:4,vars:5,consts:[["nzSearch","",3,"nzAddOnAfter"],["type","text","nz-input","",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],["suffixButton",""],["nz-button","","nzType","primary","nzSearch","",3,"click"]],template:function(u,z){if(1&u&&(t.TgZ(0,"nz-input-group",0)(1,"input",1),t.NdJ("ngModelChange",function(P){return z.text=P}),t.qZA()(),t.YNc(2,Z,2,1,"ng-template",null,2,t.W1O)),2&u){const C=t.MAs(3);t.Q6J("nzAddOnAfter",C),t.xp6(1),t.Q6J("placeholder",z.placeholder)("ngModel",z.text)("ngModelOptions",t.DdM(4,D))}},dependencies:[f.Zp,f.gB,m.ix,_.w,n.dQ,x.Fj,x.JJ,x.On]}),s})()},5380:(O,A,o)=>{function t(f,m){typeof m.filter>"u"&&(m.filter={}),f.filter.forEach(n=>{n.value.length>1?m.filter[n.key]=n.value:1===n.value.length&&(m.filter[n.key]=n.value[0])}),m.skip=(f.pageIndex-1)*f.pageSize,m.limit=f.pageSize;const _=f.sort.filter(n=>n.value);_.length?(m.sort={},_.forEach(n=>{m.sort[n.key]="ascend"===n.value?1:-1})):delete m.sort}o.d(A,{r:()=>t})},7518:(O,A,o)=>{o.r(A),o.d(A,{PluginModule:()=>pn});var t=o(6895),f=o(4575),m=o(5380),_=o(433),n=o(4650),x=o(1445),Z=o(9651),D=o(3679),T=o(6704),s=o(5635),a=o(1243),u=o(8213);function z(i,p){1&i&&(n.ynx(0),n._uU(1,"\u8bf7\u8f93\u5165ID!"),n.BQk())}function C(i,p){1&i&&n.YNc(0,z,2,0,"ng-container",23),2&i&&n.Q6J("ngIf",p.$implicit.hasError("required"))}function P(i,p){1&i&&(n.ynx(0),n._uU(1,"\u8bf7\u8f93\u5165\u540d\u79f0!"),n.BQk())}function d(i,p){1&i&&n.YNc(0,P,2,0,"ng-container",23),2&i&&n.Q6J("ngIf",p.$implicit.hasError("required"))}function g(i,p){1&i&&(n.ynx(0),n._uU(1,"\u8bf7\u8f93\u5165\u7248\u672c!"),n.BQk())}function r(i,p){1&i&&n.YNc(0,g,2,0,"ng-container",23),2&i&&n.Q6J("ngIf",p.$implicit.hasError("required"))}function v(i,p){1&i&&(n.ynx(0),n._uU(1,"\u8bf7\u8f93\u5165\u547d\u4ee4!"),n.BQk())}function E(i,p){1&i&&n.YNc(0,v,2,0,"ng-container",23),2&i&&n.Q6J("ngIf",p.$implicit.hasError("required"))}let F=(()=>{class i{constructor(e,l,c){this.fb=e,this.rs=l,this.msg=c,this.id=""}ngOnInit(){this.id&&this.rs.get(`plugin/${this.id}`).subscribe(e=>{this.build(e.data)}),this.build()}build(e){this.group=this.fb.group({id:[(e=e||{}).id||"",[]],name:[e.name||"",[_.kI.required]],version:[e.version||"",[]],username:[e.username||"",[]],password:[e.password||"",[]],external:[e.external||!1,[]],command:[e.command||"",[]],dependencies:[e.dependencies||{},[]],disabled:[e.disabled||!1,[]]})}submit(){return new Promise((e,l)=>{this.group.valid?this.rs.post(this.id?`plugin/${this.id}`:"plugin/create",this.group.value).subscribe(h=>{this.msg.success("\u4fdd\u5b58\u6210\u529f"),e(!0)}):Object.values(this.group.controls).forEach(c=>{c.invalid&&(c.markAsDirty(),c.updateValueAndValidity({onlySelf:!0}),l())})})}}return i.\u0275fac=function(e){return new(e||i)(n.Y36(_.qu),n.Y36(x.s),n.Y36(Z.dD))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-plugin-edit"]],inputs:{id:"id"},decls:50,vars:37,consts:[["nz-form","",3,"formGroup","ngSubmit"],["nzFor","id",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","formControlName","id"],["IDErrorTpl",""],["nzFor","name","nzRequired","",3,"nzSm","nzXs"],["nz-input","","formControlName","name"],["nameErrorTpl",""],["nzFor","username",3,"nzSm","nzXs"],[3,"nzSm","nzXs"],["nz-input","","formControlName","username"],["nzFor","password",3,"nzSm","nzXs"],["nz-input","","type","password","formControlName","password"],["nzFor","external",3,"nzSm","nzXs"],["nz-checkbox","","formControlName","external"],["nzFor","version",3,"nzSm","nzXs"],["nz-input","","formControlName","version"],["verErrorTpl",""],["nzFor","command",3,"nzSm","nzXs"],["nz-input","","formControlName","command"],["comErrorTpl",""],["nzFor","disabled",3,"nzSm","nzXs"],["nzCheckedChildren","\u662f","nzUnCheckedChildren","\u5426","name","disabled","formControlName","disabled"],[4,"ngIf"]],template:function(e,l){if(1&e&&(n.TgZ(0,"form",0),n.NdJ("ngSubmit",function(){return l.submit()}),n.TgZ(1,"nz-form-item")(2,"nz-form-label",1),n._uU(3,"ID"),n.qZA(),n.TgZ(4,"nz-form-control",2),n._UZ(5,"input",3),n.YNc(6,C,1,1,"ng-template",null,4,n.W1O),n.qZA()(),n.TgZ(8,"nz-form-item")(9,"nz-form-label",5),n._uU(10,"\u540d\u79f0"),n.qZA(),n.TgZ(11,"nz-form-control",2),n._UZ(12,"input",6),n.YNc(13,d,1,1,"ng-template",null,7,n.W1O),n.qZA()(),n.TgZ(15,"nz-form-item")(16,"nz-form-label",8),n._uU(17,"\u7528\u6237\u540d"),n.qZA(),n.TgZ(18,"nz-form-control",9),n._UZ(19,"input",10),n.qZA()(),n.TgZ(20,"nz-form-item")(21,"nz-form-label",11),n._uU(22,"\u5bc6\u7801"),n.qZA(),n.TgZ(23,"nz-form-control",9),n._UZ(24,"input",12),n.qZA()(),n.TgZ(25,"nz-form-item")(26,"nz-form-label",13),n._uU(27,"\u5916\u90e8"),n.qZA(),n.TgZ(28,"nz-form-control",9)(29,"label",14),n._uU(30,"\u5916\u90e8"),n.qZA()()(),n.TgZ(31,"nz-form-item")(32,"nz-form-label",15),n._uU(33,"\u7248\u672c"),n.qZA(),n.TgZ(34,"nz-form-control",2),n._UZ(35,"input",16),n.YNc(36,r,1,1,"ng-template",null,17,n.W1O),n.qZA()(),n.TgZ(38,"nz-form-item")(39,"nz-form-label",18),n._uU(40,"\u547d\u4ee4"),n.qZA(),n.TgZ(41,"nz-form-control",2),n._UZ(42,"input",19),n.YNc(43,E,1,1,"ng-template",null,20,n.W1O),n.qZA()(),n.TgZ(45,"nz-form-item")(46,"nz-form-label",21),n._uU(47,"\u662f\u5426\u7981\u7528"),n.qZA(),n.TgZ(48,"nz-form-control",9),n._UZ(49,"nz-switch",22),n.qZA()()()),2&e){const c=n.MAs(7),h=n.MAs(14),U=n.MAs(37),dn=n.MAs(44);n.Q6J("formGroup",l.group),n.xp6(2),n.Q6J("nzSm",6)("nzXs",24),n.xp6(2),n.Q6J("nzSm",14)("nzXs",24)("nzErrorTip",c),n.xp6(5),n.Q6J("nzSm",6)("nzXs",24),n.xp6(2),n.Q6J("nzSm",14)("nzXs",24)("nzErrorTip",h),n.xp6(5),n.Q6J("nzSm",6)("nzXs",24),n.xp6(2),n.Q6J("nzSm",14)("nzXs",24),n.xp6(3),n.Q6J("nzSm",6)("nzXs",24),n.xp6(2),n.Q6J("nzSm",14)("nzXs",24),n.xp6(3),n.Q6J("nzSm",6)("nzXs",24),n.xp6(2),n.Q6J("nzSm",14)("nzXs",24),n.xp6(4),n.Q6J("nzSm",6)("nzXs",24),n.xp6(2),n.Q6J("nzSm",14)("nzXs",24)("nzErrorTip",U),n.xp6(5),n.Q6J("nzSm",6)("nzXs",24),n.xp6(2),n.Q6J("nzSm",14)("nzXs",24)("nzErrorTip",dn),n.xp6(5),n.Q6J("nzSm",6)("nzXs",24),n.xp6(2),n.Q6J("nzSm",14)("nzXs",24)}},dependencies:[t.O5,D.t3,D.SK,T.Lr,T.Nx,T.iK,T.Fd,_._Y,_.Fj,_.JJ,_.JL,_.sg,_.u,s.Zp,a.i,u.Ie]}),i})();var M=o(235),S=o(6960),y=o(7423),I=o(1634),B=o(6616),J=o(7044),N=o(1664),Q=o(5227),K=o(297),L=o(2451),X=o(8989),Y=o(7327),b=o(6903);function W(i,p){if(1&i){const e=n.EpF();n.TgZ(0,"button",8),n.NdJ("click",function(){n.CHM(e);const c=n.oxw();return n.KtG(c.reload())}),n._UZ(1,"i",9),n._uU(2," \u5237\u65b0 "),n.qZA()}if(2&i){const e=n.oxw();n.xp6(1),n.Q6J("nzSpin",e.loading)}}function R(i,p){if(1&i){const e=n.EpF();n.TgZ(0,"app-search-box",10),n.NdJ("onSearch",function(c){n.CHM(e);const h=n.oxw();return n.KtG(h.search(c))}),n.qZA()}}function k(i,p){if(1&i){const e=n.EpF();n.TgZ(0,"button",8),n.NdJ("click",function(){n.CHM(e);const c=n.oxw();return n.KtG(c.handleEdit())}),n._UZ(1,"i",11),n._uU(2," \u521b\u5efa\u63d2\u4ef6 "),n.qZA()}}function $(i,p){if(1&i){const e=n.EpF();n.TgZ(0,"button",12),n._UZ(1,"span",13),n.TgZ(2,"a",14),n.NdJ("click",function(){n.CHM(e);const c=n.oxw();return n.KtG(c.handleExport())}),n._uU(3,"\u5bfc\u51fa"),n.qZA()()}if(2&i){const e=n.oxw();n.xp6(2),n.Q6J("href",e.href,n.LSH)}}function w(i,p){1&i&&n._UZ(0,"app-import",15),2&i&&n.Q6J("url","plugin/import")}function V(i,p){if(1&i){const e=n.EpF();n.TgZ(0,"div",16),n.NdJ("click",function(){const h=n.CHM(e).$implicit,U=n.oxw();return n.KtG(U.informate(h))}),n._UZ(1,"app-card",17),n.qZA()}if(2&i){const e=p.$implicit;n.xp6(1),n.Q6J("img","plugin.png")("id",e.id)("name",e.name)("title","\u63d2\u4ef6")}}let H=(()=>{class i{constructor(e,l,c,h){this.modal=e,this.router=l,this.rs=c,this.msg=h,this.isVisible=!1,this.loading=!0,this.chooseData={},this.datum=[],this.total=1,this.pageSize=20,this.pageIndex=1,this.query={},this.checked=!1,this.indeterminate=!1,this.setOfCheckedId=new Set,this.delResData=[],this.pageSizeChange(this.pageSize)}reload(){this.datum=[],this.load()}close(){this.isVisible=!1}informate(e){this.isVisible=!0,this.rs.get(`plugin/${e.id}`,this.query).subscribe(l=>{this.chooseData=l.data}).add(()=>{this.loading=!1})}load(){this.loading=!0,this.rs.post("plugin/search",this.query).subscribe(e=>{this.datum=e.data||[],this.total=e.total}).add(()=>{this.loading=!1})}enable(e){this.rs.get(`plugin/${e}/enable`).subscribe(l=>{this.reload()})}disable(e){this.rs.get(`plugin/${e}/disable`).subscribe(l=>{this.reload()})}plugin(e,l){switch(e){case 0:this.rs.get(`plugin/${l}/start`).subscribe(c=>{this.load()});break;case 1:this.rs.get(`plugin/${l}/stop`).subscribe(c=>{this.load()});break;case 2:this.rs.get(`plugin/${l}/restart`).subscribe(c=>{this.load()})}}create(){let e="/plugin/create";location.pathname.startsWith("/admin")&&(e="/admin"+e),this.router.navigateByUrl(e)}handleExport(){this.href="/api/plugin/export"}delete(e,l){this.rs.get(`plugin/${e}/delete`).subscribe(c=>{l?l&&(this.delResData.push(c),l===this.delResData.length&&(this.msg.success("\u5220\u9664\u6210\u529f"),this.load())):(this.msg.success("\u5220\u9664\u6210\u529f"),this.datum=this.datum.filter(h=>h.id!==e))})}onQuery(e){(0,m.r)(e,this.query),this.load()}pageIndexChange(e){this.query.skip=e-1,this.load()}pageSizeChange(e){this.query.limit=e,this.load()}search(e){this.query.keyword={name:e},this.query.skip=0,this.load()}cancel(){this.msg.info("\u53d6\u6d88\u64cd\u4f5c")}handleEdit(e){this.isVisible=!1;const c=this.modal.create({nzTitle:e?"\u7f16\u8f91\u63d2\u4ef6":"\u521b\u5efa\u63d2\u4ef6",nzStyle:{top:"20px"},nzContent:F,nzComponentParams:{id:e},nzFooter:[{label:"\u53d6\u6d88",onClick:()=>{c.destroy()}},{label:"\u4fdd\u5b58",type:"primary",onClick:h=>{h.submit().then(()=>{c.destroy(),this.load()},()=>{})}}]})}handleBatchDel(){(0,M.mK)(this)}handleAllChecked(e){(0,M.Yk)(e,this)}handleItemChecked(e,l){(0,M.mp)(e,l,this)}}return i.\u0275fac=function(e){return new(e||i)(n.Y36(S.Sf),n.Y36(f.F0),n.Y36(x.s),n.Y36(Z.dD))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-plugins"]],decls:11,vars:8,consts:[["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],[3,"onSearch",4,"nzSpaceItem"],["nz-button","","nzType","primary","class","btn",4,"nzSpaceItem"],[3,"url",4,"nzSpaceItem"],["nz-row","",1,"card",3,"nzGutter"],["nz-col","","class","card-item",3,"click",4,"ngFor","ngForOf"],[3,"isVisible","title","chooseData","edit","delete","close"],["nzShowSizeChanger","",2,"position","fixed","bottom","0","right","10px",3,"nzPageIndex","nzTotal","nzPageSize","nzPageSizeChange","nzPageIndexChange"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","reload",3,"nzSpin"],[3,"onSearch"],["nz-icon","","nzType","plus"],["nz-button","","nzType","primary",1,"btn"],["nz-icon","","nzType","cloud-download","nzTheme","outline"],["download","filename",3,"href","click"],[3,"url"],["nz-col","",1,"card-item",3,"click"],[3,"img","id","name","title"]],template:function(e,l){1&e&&(n.TgZ(0,"app-toolbar")(1,"nz-space"),n.YNc(2,W,3,1,"button",0),n.YNc(3,R,1,0,"app-search-box",1),n.YNc(4,k,3,0,"button",0),n.YNc(5,$,4,1,"button",2),n.YNc(6,w,1,1,"app-import",3),n.qZA()(),n.TgZ(7,"div",4),n.YNc(8,V,2,4,"div",5),n.qZA(),n.TgZ(9,"app-detail",6),n.NdJ("edit",function(h){return l.handleEdit(h)})("delete",function(h){return l.delete(h)})("close",function(){return l.close()}),n.qZA(),n.TgZ(10,"nz-pagination",7),n.NdJ("nzPageSizeChange",function(h){return l.pageSizeChange(h)})("nzPageIndexChange",function(h){return l.pageIndexChange(h)}),n.qZA()),2&e&&(n.xp6(7),n.Q6J("nzGutter",16),n.xp6(1),n.Q6J("ngForOf",l.datum),n.xp6(1),n.Q6J("isVisible",l.isVisible)("title","\u63d2\u4ef6")("chooseData",l.chooseData),n.xp6(1),n.Q6J("nzPageIndex",l.pageIndex)("nzTotal",l.total)("nzPageSize",l.pageSize))},dependencies:[t.sg,y.Ls,I.dE,D.t3,D.SK,B.ix,J.w,N.dQ,Q.n,K.B,L.k,X.A,Y.J,b.NU,b.$1],styles:[".btn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:82px;height:32px;border-radius:3px}.btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;margin-left:5px;font-size:14px}.card[_ngcontent-%COMP%]{box-sizing:border-box;padding:10px 20px;width:100%}.card[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]{box-sizing:border-box;padding:5px}.card[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),i})();var j=o(1346);const G=[{path:"",pathMatch:"full",redirectTo:"list"},{path:"list",component:H},{path:"detail/:id",component:(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-plugin-detail"]],decls:2,vars:0,template:function(e,l){1&e&&(n.TgZ(0,"p"),n._uU(1,"plugin-detail works!"),n.qZA())}}),i})()},{path:"edit/:id",component:F},{path:"create",component:F},{path:"**",component:j.r}];let q=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[f.Bz.forChild(G),f.Bz]}),i})();var nn=o(8284),tn=o(3325),en=o(1971),on=o(7096),an=o(9166),rn=o(269),sn=o(2577),ln=o(6497),un=o(6672),cn=o(8521);let pn=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[t.ez,q,nn.wm,tn.ip,y.PV,en.vh,I.uK,S.Qp,T.U5,ln._p,un.X,_.UX,s.o7,on.Zf,B.sL,an.Y,b.zf,rn.HQ,sn.S,a.m,cn.aF,u.Wr]}),i})()},235:(O,A,o)=>{function t(){return location.pathname.startsWith("/admin")?"/admin":""}function _(s){const a=document.querySelector(".ant-table")?.getBoundingClientRect().top||0;return{y:(document.querySelector(".ant-layout")?.clientHeight||0)-a-120+"px"}}function n(s,a){a.datum&&(a.datum.forEach(u=>Z(u.id,s,a)),D(a))}function x(s,a,u){Z(s,a,u),D(u)}function Z(s,a,u){a?u.setOfCheckedId.add(s):u.setOfCheckedId.delete(s)}function D(s){s.datum&&(s.checked=s.datum.every(a=>s.setOfCheckedId.has(a.id)),s.indeterminate=s.datum.some(a=>s.setOfCheckedId.has(a.id))&&!s.checked)}function T(s){s.delResData=[];const a=s.setOfCheckedId.size;if(!a)return void s.msg.warning("\u8bf7\u5148\u52fe\u9009\u5220\u9664\u9879");const u=Array.from(s.setOfCheckedId);s.modal.confirm({nzTitle:`\u786e\u5b9a\u5220\u9664\u52fe\u9009\u7684${a}\u9879\uff1f`,nzOnOk:()=>{u.forEach(z=>{s.delete(z,a)})}})}o.d(A,{NC:()=>_,Yk:()=>n,kh:()=>t,mK:()=>T,mp:()=>x,oR:()=>D})}}]);