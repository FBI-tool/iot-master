(self.webpackChunkiot_master_ui=self.webpackChunkiot_master_ui||[]).push([[5],{5545:(W,P,l)=>{"use strict";l.d(P,{u:()=>t});var m=l(1764),S=l(4650);let t=(()=>{class x{transform(J,C){return m(J).format(C||"YYYY-MM-DD HH:mm:ss")}}return x.\u0275fac=function(J){return new(J||x)},x.\u0275pipe=S.Yjl({name:"date",type:x,pure:!0}),x})()},2451:(W,P,l)=>{"use strict";l.d(P,{k:()=>C});var m=l(4650),v=l(9651),S=l(6616),t=l(7044),x=l(1664),M=l(7423),J=l(3224);let C=(()=>{class T{constructor(p){this.msg=p,this.onLoad=new m.vpe,this.uploading=!1}load(){this.onLoad.emit()}handleChange(p){if("error"!==p.type){if(p.file&&p.file.response){const z=p.file.response;z.error?this.msg.error(`${z.error}`):(this.msg.success(`\u6210\u529f\u5bfc\u5165${z.data}\u6761\u6570\u636e!`),this.load())}}else this.msg.error("\u4e0a\u4f20\u5931\u8d25")}}return T.\u0275fac=function(p){return new(p||T)(m.Y36(v.dD))},T.\u0275cmp=m.Xpm({type:T,selectors:[["app-import"]],inputs:{url:"url"},outputs:{onLoad:"onLoad"},decls:4,vars:2,consts:[[3,"nzAction","nzShowUploadList","nzChange"],["nz-button","","nzType","primary"],["nz-icon","","nzType","cloud-upload"]],template:function(p,z){1&p&&(m.TgZ(0,"nz-upload",0),m.NdJ("nzChange",function(b){return z.handleChange(b)}),m.TgZ(1,"button",1),m._UZ(2,"span",2),m._uU(3," \u5bfc\u5165 "),m.qZA()()),2&p&&m.Q6J("nzAction","/api/"+z.url)("nzShowUploadList",!1)},dependencies:[S.ix,t.w,x.dQ,M.Ls,J.FY],styles:[".fileButton[_ngcontent-%COMP%]{height:32px;line-height:32px;border-radius:3px;background-color:#1890ff;border-color:#1890ff;color:#fff;font-weight:400;display:inline-block;padding:0 15px;cursor:pointer}"]}),T})()},297:(W,P,l)=>{"use strict";l.d(P,{B:()=>T});var m=l(4650),v=l(5635),S=l(6616),t=l(7044),x=l(1664),M=l(433);function J(d,p){if(1&d){const z=m.EpF();m.TgZ(0,"button",3),m.NdJ("click",function(){m.CHM(z);const b=m.oxw();return m.KtG(b.onSearch.emit(b.text))}),m._uU(1),m.qZA()}if(2&d){const z=m.oxw();m.xp6(1),m.Oqu(z.searchText)}}const C=function(){return{standalone:!0}};let T=(()=>{class d{constructor(){this.searchText="\u641c\u7d22",this.placeholder="\u5173\u952e\u5b57",this.text="",this.onSearch=new m.vpe}}return d.\u0275fac=function(z){return new(z||d)},d.\u0275cmp=m.Xpm({type:d,selectors:[["app-search-box"]],inputs:{searchText:"searchText",placeholder:"placeholder",text:"text"},outputs:{onSearch:"onSearch"},decls:4,vars:5,consts:[["nzSearch","",3,"nzAddOnAfter"],["type","text","nz-input","",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],["suffixButton",""],["nz-button","","nzType","primary","nzSearch","",3,"click"]],template:function(z,E){if(1&z&&(m.TgZ(0,"nz-input-group",0)(1,"input",1),m.NdJ("ngModelChange",function($){return E.text=$}),m.qZA()(),m.YNc(2,J,2,1,"ng-template",null,2,m.W1O)),2&z){const b=m.MAs(3);m.Q6J("nzAddOnAfter",b),m.xp6(1),m.Q6J("placeholder",E.placeholder)("ngModel",E.text)("ngModelOptions",m.DdM(4,C))}},dependencies:[v.Zp,v.gB,S.ix,t.w,x.dQ,M.Fj,M.JJ,M.On]}),d})()},5380:(W,P,l)=>{"use strict";function m(v,S){typeof S.filter>"u"&&(S.filter={}),v.filter.forEach(x=>{x.value.length>1?S.filter[x.key]=x.value:1===x.value.length&&(S.filter[x.key]=x.value[0])}),S.skip=(v.pageIndex-1)*v.pageSize,S.limit=v.pageSize;const t=v.sort.filter(x=>x.value);t.length?(S.sort={},t.forEach(x=>{S.sort[x.key]="ascend"===x.value?1:-1})):delete S.sort}l.d(P,{r:()=>m})},3005:(W,P,l)=>{"use strict";l.r(P),l.d(P,{UserModule:()=>It});var m=l(6895),v=l(4575),S=l(1346),t=l(4650);let x=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-me"]],decls:2,vars:0,template:function(n,o){1&n&&(t.TgZ(0,"p"),t._uU(1,"me works!"),t.qZA())}}),e})();var M=l(624),J=l(5380),C=l(235),T=l(433),d=l(1445),p=l(9651),z=l(1243),E=l(8e3),b=l(3679),$=l(6704),Q=l(5635);function B(e,s){1&e&&(t.ynx(0),t._uU(1,"\u8bf7\u8f93\u5165\u540d\u79f0!"),t.BQk())}function Y(e,s){1&e&&t.YNc(0,B,2,0,"ng-container",19),2&e&&t.Q6J("ngIf",s.$implicit.hasError("required"))}function q(e,s){1&e&&(t.ynx(0),t._uU(1,"\u8bf7\u8f93\u5165\u59d3\u540d!"),t.BQk())}function X(e,s){1&e&&t.YNc(0,q,2,0,"ng-container",19),2&e&&t.Q6J("ngIf",s.$implicit.hasError("required"))}function G(e,s){1&e&&(t.ynx(0),t._uU(1,"\u8bf7\u8f93\u5165\u624b\u673a!"),t.BQk())}function D(e,s){1&e&&t.YNc(0,G,2,0,"ng-container",19),2&e&&t.Q6J("ngIf",s.$implicit.hasError("required"))}function Z(e,s){1&e&&(t.ynx(0),t._uU(1,"\u8bf7\u8f93\u5165\u90ae\u7bb1!"),t.BQk())}function j(e,s){1&e&&t.YNc(0,Z,2,0,"ng-container",19),2&e&&t.Q6J("ngIf",s.$implicit.hasError("required"))}function nt(e,s){1&e&&(t.ynx(0),t._uU(1,"\u8bf7\u786e\u5b9a\u89d2\u8272\u6743\u9650!"),t.BQk())}function f(e,s){1&e&&t.YNc(0,nt,2,0,"ng-container",19),2&e&&t.Q6J("ngIf",s.$implicit.hasError("required"))}let u=(()=>{class e{constructor(n,o,r){this.fb=n,this.rs=o,this.msg=r,this.listOfOption=[],this.id=""}ngOnInit(){this.id&&this.rs.get(`user/${this.id}`).subscribe(n=>{this.build(n.data)}),this.build(),this.getRoleList()}build(n){this.group=this.fb.group({username:[(n=n||{}).username||"",[T.kI.required]],name:[n.name||"",[]],cellphone:[n.cellphone||"",[]],email:[n.email||"",[]],roles:[n.roles||[],[]],disabled:[n.disabled||!1,[]]})}submit(){return new Promise((n,o)=>{this.group.valid?this.rs.post(this.id?`user/${this.id}`:"user/create",this.group.value).subscribe(c=>{this.msg.success("\u4fdd\u5b58\u6210\u529f"),n(!0)}):Object.values(this.group.controls).forEach(r=>{r.invalid&&(r.markAsDirty(),r.updateValueAndValidity({onlySelf:!0}),o())})})}getRoleList(){this.rs.get("role/list").subscribe(n=>{const o=[];n.data.filter(r=>{o.push({value:r.name,label:r.name}),this.listOfOption=o})})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(T.qu),t.Y36(d.s),t.Y36(p.dD))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-users-edit"]],inputs:{id:"id"},decls:41,vars:31,consts:[["nz-form","",3,"formGroup","ngSubmit"],["nzRequired","","nzFor","username",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","formControlName","username"],["nameErrorTpl",""],["nzFor","name",3,"nzSm","nzXs"],["nz-input","","formControlName","name"],["idErrorTpl",""],["nzFor","cellphone",3,"nzSm","nzXs"],["nz-input","","formControlName","cellphone"],["emailErrorTpl",""],["nzFor","email",3,"nzSm","nzXs"],["nz-input","","formControlName","email"],[3,"nzSm","nzXs"],["nzMode","multiple","name","roles","formControlName","roles","nzShowSearch","","nzAllowClear","",3,"nzOptions"],["rolesErrorTpl",""],["nzFor","disabled",3,"nzSm","nzXs"],["nzHasFeedback","",3,"nzSm","nzXs"],["nzCheckedChildren","\u662f","nzUnCheckedChildren","\u5426","name","disabled","formControlName","disabled"],[4,"ngIf"]],template:function(n,o){if(1&n&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"nz-form-item")(2,"nz-form-label",1),t._uU(3,"\u7528\u6237\u540d"),t.qZA(),t.TgZ(4,"nz-form-control",2),t._UZ(5,"input",3),t.YNc(6,Y,1,1,"ng-template",null,4,t.W1O),t.qZA()(),t.TgZ(8,"nz-form-item")(9,"nz-form-label",5),t._uU(10,"\u59d3\u540d"),t.qZA(),t.TgZ(11,"nz-form-control",2),t._UZ(12,"input",6),t.YNc(13,X,1,1,"ng-template",null,7,t.W1O),t.qZA()(),t.TgZ(15,"nz-form-item")(16,"nz-form-label",8),t._uU(17,"\u624b\u673a"),t.qZA(),t.TgZ(18,"nz-form-control",2),t._UZ(19,"input",9),t.YNc(20,D,1,1,"ng-template",null,10,t.W1O),t.qZA()(),t.TgZ(22,"nz-form-item")(23,"nz-form-label",11),t._uU(24,"\u90ae\u7bb1"),t.qZA(),t.TgZ(25,"nz-form-control",2),t._UZ(26,"input",12),t.YNc(27,j,1,1,"ng-template",null,10,t.W1O),t.qZA()(),t.TgZ(29,"nz-form-item")(30,"nz-form-label",13),t._uU(31,"\u89d2\u8272"),t.qZA(),t.TgZ(32,"nz-form-control",2),t._UZ(33,"nz-select",14),t.YNc(34,f,1,1,"ng-template",null,15,t.W1O),t.qZA()(),t.TgZ(36,"nz-form-item")(37,"nz-form-label",16),t._uU(38,"\u662f\u5426\u7981\u7528"),t.qZA(),t.TgZ(39,"nz-form-control",17),t._UZ(40,"nz-switch",18),t.qZA()()()),2&n){const r=t.MAs(7),c=t.MAs(14),F=t.MAs(21),K=t.MAs(35);t.Q6J("formGroup",o.group),t.xp6(2),t.Q6J("nzSm",6)("nzXs",24),t.xp6(2),t.Q6J("nzSm",14)("nzXs",24)("nzErrorTip",r),t.xp6(5),t.Q6J("nzSm",6)("nzXs",24),t.xp6(2),t.Q6J("nzSm",14)("nzXs",24)("nzErrorTip",c),t.xp6(5),t.Q6J("nzSm",6)("nzXs",24),t.xp6(2),t.Q6J("nzSm",14)("nzXs",24)("nzErrorTip",F),t.xp6(5),t.Q6J("nzSm",6)("nzXs",24),t.xp6(2),t.Q6J("nzSm",14)("nzXs",24)("nzErrorTip",F),t.xp6(5),t.Q6J("nzSm",6)("nzXs",24),t.xp6(2),t.Q6J("nzSm",14)("nzXs",24)("nzErrorTip",K),t.xp6(1),t.Q6J("nzOptions",o.listOfOption),t.xp6(4),t.Q6J("nzSm",6)("nzXs",24),t.xp6(2),t.Q6J("nzSm",14)("nzXs",24)}},dependencies:[m.O5,z.i,E.Vq,T._Y,T.Fj,T.JJ,T.JL,T.sg,T.u,b.t3,b.SK,$.Lr,$.Nx,$.iK,$.Fd,Q.Zp]}),e})();var i=l(6960),_=l(7423),a=l(6672),g=l(6497),h=l(6616),y=l(7044),A=l(1664),U=l(5227),I=l(297),R=l(2451),N=l(6903),O=l(269),L=l(2577),H=l(5545);function k(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.reload())}),t._UZ(1,"i",19),t._uU(2," \u5237\u65b0 "),t.qZA()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("nzSpin",n.loading)}}function w(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"app-search-box",20),t.NdJ("onSearch",function(r){t.CHM(n);const c=t.oxw();return t.KtG(c.search(r))}),t.qZA()}}function tt(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.handleEdit())}),t._UZ(1,"i",21),t._uU(2," \u65b0\u589e "),t.qZA()}}function V(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",22),t._UZ(1,"span",23),t.TgZ(2,"a",24),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.handleExport())}),t._uU(3,"\u5bfc\u51fa"),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(2),t.Q6J("href",n.href,t.LSH)}}function ot(e,s){1&e&&t._UZ(0,"app-import",25),2&e&&t.Q6J("url","user/import")}function rt(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.handleBatchDel())}),t._uU(1," \u6279\u91cf\u5220\u9664 "),t.qZA()}}function it(e,s){1&e&&t._uU(0),2&e&&t.hij("\u603b\u5171 ",s.$implicit," \u6761")}function st(e,s){1&e&&(t.TgZ(0,"nz-tag",35),t._uU(1," \u7981\u7528 "),t.qZA())}function at(e,s){1&e&&(t.TgZ(0,"nz-tag",36),t._uU(1," \u542f\u7528 "),t.qZA())}function lt(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"tr")(1,"td",27),t.NdJ("nzCheckedChange",function(r){const F=t.CHM(n).$implicit,K=t.oxw();return t.KtG(K.handleItemChecked(F.id,r))}),t.qZA(),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t.YNc(15,st,2,0,"nz-tag",28),t.YNc(16,at,2,0,"nz-tag",29),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.ALo(19,"date"),t.qZA(),t.TgZ(20,"td")(21,"a",30),t.NdJ("click",function(){const c=t.CHM(n).$implicit,F=t.oxw();return t.KtG(F.handleEdit(c.id))}),t._UZ(22,"i",31),t.qZA(),t._UZ(23,"nz-divider",32),t.TgZ(24,"a",33),t.NdJ("nzOnConfirm",function(){const c=t.CHM(n).$implicit,F=t.oxw();return t.KtG(F.delete(c.id))})("nzOnCancel",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.cancel())}),t._UZ(25,"i",34),t.qZA()()()}if(2&e){const n=s.$implicit,o=t.oxw();t.xp6(1),t.Q6J("nzChecked",o.setOfCheckedId.has(n.id)),t.xp6(2),t.Oqu(n.id),t.xp6(2),t.Oqu(n.username),t.xp6(2),t.Oqu(n.name),t.xp6(2),t.Oqu(n.cellphone),t.xp6(2),t.Oqu(n.email),t.xp6(2),t.Oqu(n.roles),t.xp6(2),t.Q6J("ngIf",n.disabled),t.xp6(1),t.Q6J("ngIf",!n.disabled),t.xp6(2),t.Oqu(t.lcZ(19,10,n.created))}}let ut=(()=>{class e{constructor(n,o,r,c){this.modal=n,this.router=o,this.rs=r,this.msg=c,this.loading=!0,this.uploading=!1,this.datum=[],this.total=1,this.pageSize=20,this.pageIndex=1,this.query={},this.checked=!1,this.indeterminate=!1,this.setOfCheckedId=new Set,this.delResData=[]}reload(){this.datum=[],this.load()}load(){this.loading=!0,this.rs.post("user/search",this.query).subscribe(n=>{this.datum=n.data||[],this.total=n.total,this.setOfCheckedId.clear(),(0,C.oR)(this)}).add(()=>{this.loading=!1})}create(){let n="/user/create";location.pathname.startsWith("/admin")&&(n="/admin"+n),this.router.navigateByUrl(n)}delete(n,o){this.rs.get(`user/${n}/delete`).subscribe(r=>{o?o&&(this.delResData.push(r),o===this.delResData.length&&(this.msg.success("\u5220\u9664\u6210\u529f"),this.load())):(this.msg.success("\u5220\u9664\u6210\u529f"),this.datum=this.datum.filter(c=>c.id!==n))})}handleExport(){this.href="/api/user/export"}onQuery(n){(0,J.r)(n,this.query),this.load()}pageIndexChange(n){this.query.skip=n-1}pageSizeChange(n){this.query.limit=n}search(n){this.query.keyword={name:n},this.query.skip=0,this.load()}handleEdit(n){const r=this.modal.create({nzTitle:n?"\u7f16\u8f91\u7528\u6237":"\u65b0\u589e\u7528\u6237",nzStyle:{top:"20px"},nzContent:u,nzComponentParams:{id:n},nzFooter:[{label:"\u53d6\u6d88",onClick:()=>{r.destroy()}},{label:"\u4fdd\u5b58",type:"primary",onClick:c=>{c.submit().then(()=>{r.destroy(),this.load()},()=>{})}}]})}cancel(){this.msg.info("\u53d6\u6d88\u64cd\u4f5c")}getTableHeight(){return(0,C.NC)(this)}handleBatchDel(){(0,C.mK)(this)}handleAllChecked(n){(0,C.Yk)(n,this)}handleItemChecked(n,o){(0,C.mp)(n,o,this)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(i.Sf),t.Y36(v.F0),t.Y36(d.s),t.Y36(p.dD))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-users"]],decls:35,vars:13,consts:[["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],[3,"onSearch",4,"nzSpaceItem"],["nz-button","","nzType","primary","class","btn",4,"nzSpaceItem"],[3,"url",4,"nzSpaceItem"],["nz-button","","nzType","primary","nzDanger","",3,"click",4,"nzSpaceItem"],["totalTemplate",""],["nzShowPagination","","nzShowSizeChanger","",3,"nzData","nzLoading","nzFrontPagination","nzTotal","nzShowTotal","nzPageSize","nzPageIndex","nzPageSizeChange","nzPageIndexChange","nzQueryParams"],["basicTable",""],[3,"nzChecked","nzIndeterminate","nzCheckedChange"],["nzColumnKey","id",3,"nzSortFn"],["nzColumnKey","username",3,"nzSortFn"],["nzColumnKey","name"],["nzColumnKey","cellphone"],["nzColumnKey","email"],["nzColumnKey","roles"],["nzColumnKey","disabled"],["nzColumnKey","created",3,"nzSortFn"],[4,"ngFor","ngForOf"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","reload",3,"nzSpin"],[3,"onSearch"],["nz-icon","","nzType","plus"],["nz-button","","nzType","primary",1,"btn"],["nz-icon","","nzType","cloud-download","nzTheme","outline"],["download","filename",3,"href","click"],[3,"url"],["nz-button","","nzType","primary","nzDanger","",3,"click"],[3,"nzChecked","nzCheckedChange"],["nzColor","error",4,"ngIf"],["nzColor","success",4,"ngIf"],[3,"click"],["nz-icon","","nzType","edit"],["nzType","vertical"],["nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664?","nzPopconfirmPlacement","topLeft",3,"nzOnConfirm","nzOnCancel"],["nz-icon","","nzType","delete"],["nzColor","error"],["nzColor","success"]],template:function(n,o){if(1&n&&(t.TgZ(0,"app-toolbar")(1,"nz-space"),t.YNc(2,k,3,1,"button",0),t.YNc(3,w,1,0,"app-search-box",1),t.YNc(4,tt,3,0,"button",0),t.YNc(5,V,4,1,"button",2),t.YNc(6,ot,1,1,"app-import",3),t.YNc(7,rt,2,0,"button",4),t.qZA()(),t.YNc(8,it,1,1,"ng-template",null,5,t.W1O),t.TgZ(10,"nz-table",6,7),t.NdJ("nzPageSizeChange",function(c){return o.pageSizeChange(c)})("nzPageIndexChange",function(c){return o.pageIndexChange(c)})("nzQueryParams",function(c){return o.onQuery(c)}),t.TgZ(12,"thead")(13,"tr")(14,"th",8),t.NdJ("nzCheckedChange",function(c){return o.handleAllChecked(c)}),t.qZA(),t.TgZ(15,"th",9),t._uU(16,"ID"),t.qZA(),t.TgZ(17,"th",10),t._uU(18,"\u7528\u6237\u540d"),t.qZA(),t.TgZ(19,"th",11),t._uU(20,"\u540d\u79f0"),t.qZA(),t.TgZ(21,"th",12),t._uU(22,"\u624b\u673a"),t.qZA(),t.TgZ(23,"th",13),t._uU(24,"\u90ae\u7bb1"),t.qZA(),t.TgZ(25,"th",14),t._uU(26,"\u89d2\u8272"),t.qZA(),t.TgZ(27,"th",15),t._uU(28,"\u72b6\u6001"),t.qZA(),t.TgZ(29,"th",16),t._uU(30,"\u65e5\u671f"),t.qZA(),t.TgZ(31,"th"),t._uU(32,"\u64cd\u4f5c"),t.qZA()()(),t.TgZ(33,"tbody"),t.YNc(34,lt,26,12,"tr",17),t.qZA()()),2&n){const r=t.MAs(9),c=t.MAs(11);t.xp6(10),t.Q6J("nzData",o.datum)("nzLoading",o.loading)("nzFrontPagination",!1)("nzTotal",o.total)("nzShowTotal",r)("nzPageSize",o.pageSize)("nzPageIndex",o.pageIndex),t.xp6(4),t.Q6J("nzChecked",o.checked)("nzIndeterminate",o.indeterminate),t.xp6(1),t.Q6J("nzSortFn",!0),t.xp6(2),t.Q6J("nzSortFn",!0),t.xp6(12),t.Q6J("nzSortFn",!0),t.xp6(5),t.Q6J("ngForOf",c.data)}},dependencies:[m.sg,m.O5,_.Ls,a.j,g.JW,h.ix,y.w,A.dQ,U.n,I.B,R.k,N.NU,N.$1,O.N8,O.qD,O.Uo,O._C,O.h7,O.Om,O.p0,O.$Z,O.g6,L.g,H.u],styles:[".btn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:82px;height:32px;border-radius:3px}.btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;margin-left:5px;font-size:14px}"]}),e})(),ct=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-user-detail"]],decls:2,vars:0,template:function(n,o){1&n&&(t.TgZ(0,"p"),t._uU(1,"user-detail works!"),t.qZA())}}),e})();function pt(e,s){1&e&&(t.ynx(0),t._uU(1,"\u8bf7\u8f93\u5165id!"),t.BQk())}function dt(e,s){1&e&&t.YNc(0,pt,2,0,"ng-container",1),2&e&&t.Q6J("ngIf",s.$implicit.hasError("required"))}function mt(e,s){if(1&e&&(t.TgZ(0,"nz-form-item")(1,"nz-form-label",9),t._uU(2,"ID"),t.qZA(),t.TgZ(3,"nz-form-control",3),t._UZ(4,"input",10),t.YNc(5,dt,1,1,"ng-template",null,11,t.W1O),t.qZA()()),2&e){const n=t.MAs(6);t.xp6(1),t.Q6J("nzSm",6)("nzXs",24),t.xp6(2),t.Q6J("nzSm",14)("nzXs",24)("nzErrorTip",n)}}function _t(e,s){1&e&&(t.ynx(0),t._uU(1,"\u8bf7\u8f93\u5165\u540d\u79f0!"),t.BQk())}function ht(e,s){1&e&&t.YNc(0,_t,2,0,"ng-container",1),2&e&&t.Q6J("ngIf",s.$implicit.hasError("required"))}function ft(e,s){1&e&&(t.ynx(0),t._uU(1,"\u8bf7\u786e\u5b9a\u89d2\u8272\u6743\u9650!"),t.BQk())}function gt(e,s){1&e&&t.YNc(0,ft,2,0,"ng-container",1),2&e&&t.Q6J("ngIf",s.$implicit.hasError("required"))}let et=(()=>{class e{constructor(n,o,r,c,F,K){this.fb=n,this.router=o,this.route=r,this.rs=c,this.msg=F,this.datePipe=K,this.id="",this.listOfOption=[],this.listOfSelectedValue=[]}ngOnInit(){this.build(),this.id&&this.rs.get(`role/${this.id}`).subscribe(n=>{this.build(n.data)}),this.getRoleList()}build(n){n=n||{};const{name:o,id:r,privileges:c}=n||{};this.group=this.fb.group({name:[o||"",[T.kI.required]],id:[r||"",[T.kI.required]],privileges:[c||[],[T.kI.required]]})}getRoleList(){this.rs.get("privileges").subscribe(n=>{const{data:o}=n,r=[];for(const c in o)r.push({label:o[c],value:c});this.listOfOption=r})}submit(){return new Promise((n,o)=>{this.group.valid?this.rs.post(this.id?`role/${this.id}`:"role/create",this.group.value).subscribe(c=>{this.msg.success("\u4fdd\u5b58\u6210\u529f"),n(!0)}):Object.values(this.group.controls).forEach(r=>{r.invalid&&(r.markAsDirty(),r.updateValueAndValidity({onlySelf:!0}),o())})})}handleCancel(){const n=`${(0,C.kh)()}/user/role`;this.router.navigateByUrl(n)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(T.qu),t.Y36(v.F0),t.Y36(v.gz),t.Y36(d.s),t.Y36(p.dD),t.Y36(m.uU))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-role-edit"]],inputs:{id:"id"},features:[t._Bn([m.uU])],decls:16,vars:13,consts:[["nz-form","",3,"formGroup","ngSubmit"],[4,"ngIf"],["nzRequired","","nzFor","name",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","formControlName","name"],["nameErrorTpl",""],["nzRequired","",3,"nzSm","nzXs"],["nzMode","multiple","name","privileges","formControlName","privileges","nzShowSearch","","nzAllowClear","",3,"nzOptions"],["privilegesErrorTpl",""],["nzFor","id","nzRequired","",3,"nzSm","nzXs"],["nz-input","","formControlName","id"],["idErrorTpl",""]],template:function(n,o){if(1&n&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.YNc(1,mt,7,5,"nz-form-item",1),t.TgZ(2,"nz-form-item")(3,"nz-form-label",2),t._uU(4,"\u540d\u79f0"),t.qZA(),t.TgZ(5,"nz-form-control",3),t._UZ(6,"input",4),t.YNc(7,ht,1,1,"ng-template",null,5,t.W1O),t.qZA()(),t.TgZ(9,"nz-form-item")(10,"nz-form-label",6),t._uU(11,"\u6743\u9650"),t.qZA(),t.TgZ(12,"nz-form-control",3),t._UZ(13,"nz-select",7),t.YNc(14,gt,1,1,"ng-template",null,8,t.W1O),t.qZA()()()),2&n){const r=t.MAs(8),c=t.MAs(15);t.Q6J("formGroup",o.group),t.xp6(1),t.Q6J("ngIf",!o.id),t.xp6(2),t.Q6J("nzSm",6)("nzXs",24),t.xp6(2),t.Q6J("nzSm",14)("nzXs",24)("nzErrorTip",r),t.xp6(5),t.Q6J("nzSm",6)("nzXs",24),t.xp6(2),t.Q6J("nzSm",14)("nzXs",24)("nzErrorTip",c),t.xp6(1),t.Q6J("nzOptions",o.listOfOption)}},dependencies:[m.O5,E.Vq,T._Y,T.Fj,T.JJ,T.JL,T.sg,T.u,b.t3,b.SK,$.Lr,$.Nx,$.iK,$.Fd,Q.Zp]}),e})(),zt=(()=>{class e{constructor(n){this.rs=n,this.range=4e4,(!localStorage.getItem("roleObj")||!this.judgelocalStorage("roleObj"))&&this.rs.get("privileges").subscribe(r=>{this.setlocalStorage("roleObj",r.data||[])})}transform(n,...o){const r=[];if(localStorage.getItem("roleObj")){const c=localStorage.getItem("roleObj")||"",F=JSON.parse(c);n.forEach(K=>{F[K]&&r.push(F[K])})}return r.join(",")}setlocalStorage(n,o){const r=(new Date).getTime();o.date=r,localStorage.setItem(n,JSON.stringify(o))}judgelocalStorage(n){const o=(new Date).getTime(),r=JSON.parse(localStorage.getItem(n)||"");return o-r.time>this.range?(r.removeItem(n),null):r.key}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(d.s,16))},e.\u0275pipe=t.Yjl({name:"handlePrivileges",type:e,pure:!0}),e})();function Ct(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.reload())}),t._UZ(1,"i",15),t._uU(2," \u5237\u65b0 "),t.qZA()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("nzSpin",n.loading)}}function Tt(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"app-search-box",16),t.NdJ("onSearch",function(r){t.CHM(n);const c=t.oxw();return t.KtG(c.search(r))}),t.qZA()}}function xt(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.handleEdit())}),t._UZ(1,"i",17),t._uU(2," \u65b0\u589e "),t.qZA()}}function yt(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",18),t._UZ(1,"span",19),t.TgZ(2,"a",20),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.handleExport())}),t._uU(3,"\u5bfc\u51fa"),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(2),t.Q6J("href",n.href,t.LSH)}}function Zt(e,s){1&e&&t._UZ(0,"app-import",21),2&e&&t.Q6J("url","role/import")}function St(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.handleBatchDel())}),t._uU(1," \u6279\u91cf\u5220\u9664 "),t.qZA()}}function Ut(e,s){1&e&&t._uU(0),2&e&&t.hij("\u603b\u5171 ",s.$implicit," \u6761")}function Ot(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"tr")(1,"td",23),t.NdJ("nzCheckedChange",function(r){const F=t.CHM(n).$implicit,K=t.oxw();return t.KtG(K.handleItemChecked(F.id,r))}),t.qZA(),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"handlePrivileges"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"td")(13,"a",24),t.NdJ("click",function(){const c=t.CHM(n).$implicit,F=t.oxw();return t.KtG(F.handleEdit(c.id))}),t._UZ(14,"i",25),t.qZA(),t._UZ(15,"nz-divider",26),t.TgZ(16,"a",27),t.NdJ("nzOnConfirm",function(){const c=t.CHM(n).$implicit,F=t.oxw();return t.KtG(F.delete(c.id))})("nzOnCancel",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.cancel())}),t._UZ(17,"i",28),t.qZA()()()}if(2&e){const n=s.$implicit,o=t.oxw();t.xp6(1),t.Q6J("nzChecked",o.setOfCheckedId.has(n.id)),t.xp6(2),t.Oqu(n.id),t.xp6(2),t.Oqu(n.name),t.xp6(2),t.Oqu(t.lcZ(8,5,n.privileges)),t.xp6(3),t.Oqu(t.lcZ(11,7,n.created))}}const vt=[{path:"",pathMatch:"full",redirectTo:"list"},{path:"list",component:ut},{path:"detail/:id",component:ct},{path:"edit/:id",component:u},{path:"create",component:u},{path:"role/create",component:et},{path:"role",component:(()=>{class e{constructor(n,o,r,c){this.router=n,this.rs=o,this.modal=r,this.msg=c,this.loading=!0,this.uploading=!1,this.datum=[],this.total=1,this.pageSize=20,this.pageIndex=1,this.query={},this.isVisible=!1,this.roleObj={},this.checked=!1,this.indeterminate=!1,this.setOfCheckedId=new Set,this.delResData=[],this.load()}reload(){this.datum=[],this.load()}load(){this.loading=!0,this.rs.post("role/search",this.query).subscribe(n=>{this.datum=n.data||[],this.total=n.total,this.setOfCheckedId.clear(),(0,C.oR)(this)}).add(()=>{this.loading=!1})}delete(n,o){this.rs.get(`role/${n}/delete`).subscribe(r=>{o?o&&(this.delResData.push(r),o===this.delResData.length&&(this.msg.success("\u5220\u9664\u6210\u529f"),this.load())):(this.msg.success("\u5220\u9664\u6210\u529f"),this.datum=this.datum.filter(c=>c.id!==n))})}handleExport(){this.href="/api/role/export"}onQuery(n){(0,J.r)(n,this.query),this.load()}pageIndexChange(n){this.query.skip=n-1}pageSizeChange(n){this.query.limit=n}search(n){this.query.keyword={name:n},this.query.skip=0,this.load()}handleEdit(n){const r=this.modal.create({nzTitle:n?"\u7f16\u8f91\u89d2\u8272":"\u65b0\u589e\u89d2\u8272",nzStyle:{top:"20px"},nzContent:et,nzComponentParams:{id:n},nzFooter:[{label:"\u53d6\u6d88",onClick:()=>{r.destroy()}},{label:"\u4fdd\u5b58",type:"primary",onClick:c=>{c.submit().then(()=>{r.destroy(),this.load()},()=>{})}}]})}cancel(){this.msg.info("\u70b9\u51fb\u53d6\u6d88")}getTableHeight(){return(0,C.NC)(this)}handleBatchDel(){(0,C.mK)(this)}handleAllChecked(n){(0,C.Yk)(n,this)}handleItemChecked(n,o){(0,C.mp)(n,o,this)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(v.F0),t.Y36(d.s),t.Y36(i.Sf),t.Y36(p.dD))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-role"]],decls:27,vars:12,consts:[["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],[3,"onSearch",4,"nzSpaceItem"],["nz-button","","nzType","primary","class","btn",4,"nzSpaceItem"],[3,"url",4,"nzSpaceItem"],["nz-button","","nzType","primary","nzDanger","",3,"click",4,"nzSpaceItem"],["totalTemplate",""],["nzShowPagination","","nzShowSizeChanger","",3,"nzData","nzLoading","nzFrontPagination","nzTotal","nzShowTotal","nzPageSize","nzPageIndex","nzPageSizeChange","nzPageIndexChange","nzQueryParams"],["basicTable",""],[3,"nzChecked","nzIndeterminate","nzCheckedChange"],["nzColumnKey","id",3,"nzSortFn"],["nzColumnKey","name"],["nzColumnKey","privileges"],["nzColumnKey","created",3,"nzSortFn"],[4,"ngFor","ngForOf"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","reload",3,"nzSpin"],[3,"onSearch"],["nz-icon","","nzType","plus"],["nz-button","","nzType","primary",1,"btn"],["nz-icon","","nzType","cloud-download","nzTheme","outline"],["download","filename",3,"href","click"],[3,"url"],["nz-button","","nzType","primary","nzDanger","",3,"click"],[3,"nzChecked","nzCheckedChange"],[3,"click"],["nz-icon","","nzType","edit"],["nzType","vertical"],["nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664?","nzPopconfirmPlacement","topLeft",3,"nzOnConfirm","nzOnCancel"],["nz-icon","","nzType","delete"]],template:function(n,o){if(1&n&&(t.TgZ(0,"app-toolbar")(1,"nz-space"),t.YNc(2,Ct,3,1,"button",0),t.YNc(3,Tt,1,0,"app-search-box",1),t.YNc(4,xt,3,0,"button",0),t.YNc(5,yt,4,1,"button",2),t.YNc(6,Zt,1,1,"app-import",3),t.YNc(7,St,2,0,"button",4),t.qZA()(),t.YNc(8,Ut,1,1,"ng-template",null,5,t.W1O),t.TgZ(10,"nz-table",6,7),t.NdJ("nzPageSizeChange",function(c){return o.pageSizeChange(c)})("nzPageIndexChange",function(c){return o.pageIndexChange(c)})("nzQueryParams",function(c){return o.onQuery(c)}),t.TgZ(12,"thead")(13,"tr")(14,"th",8),t.NdJ("nzCheckedChange",function(c){return o.handleAllChecked(c)}),t.qZA(),t.TgZ(15,"th",9),t._uU(16,"id"),t.qZA(),t.TgZ(17,"th",10),t._uU(18,"\u540d\u79f0"),t.qZA(),t.TgZ(19,"th",11),t._uU(20,"\u6743\u9650"),t.qZA(),t.TgZ(21,"th",12),t._uU(22,"\u521b\u5efa\u65f6\u95f4"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"\u64cd\u4f5c"),t.qZA()()(),t.TgZ(25,"tbody"),t.YNc(26,Ot,18,9,"tr",13),t.qZA()()),2&n){const r=t.MAs(9),c=t.MAs(11);t.xp6(10),t.Q6J("nzData",o.datum)("nzLoading",o.loading)("nzFrontPagination",!1)("nzTotal",o.total)("nzShowTotal",r)("nzPageSize",o.pageSize)("nzPageIndex",o.pageIndex),t.xp6(4),t.Q6J("nzChecked",o.checked)("nzIndeterminate",o.indeterminate),t.xp6(1),t.Q6J("nzSortFn",!0),t.xp6(6),t.Q6J("nzSortFn",!0),t.xp6(5),t.Q6J("ngForOf",c.data)}},dependencies:[m.sg,_.Ls,g.JW,h.ix,y.w,A.dQ,U.n,I.B,R.k,N.NU,N.$1,O.N8,O.qD,O.Uo,O._C,O.h7,O.Om,O.p0,O.$Z,O.g6,L.g,H.u,zt],styles:[".btn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:82px;height:32px;border-radius:3px}.btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;margin-left:5px;font-size:14px}"]}),e})()},{path:"privillege/:id",component:et},{path:"me",component:x},{path:"password",component:M.I},{path:"**",component:S.r}];let At=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[v.Bz.forChild(vt),v.Bz]}),e})();var bt=l(8284),Et=l(3325),Mt=l(1971),Dt=l(7096),$t=l(9166);let It=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.ez,At,bt.wm,Et.ip,_.PV,a.X,g._p,z.m,h.sL,Mt.vh,i.Qp,E.LV,T.u5,T.UX,$.U5,Q.o7,Dt.Zf,$t.Y,N.zf,O.HQ,L.S]}),e})()},235:(W,P,l)=>{"use strict";function m(){return location.pathname.startsWith("/admin")?"/admin":""}function t(d){const p=document.querySelector(".ant-table")?.getBoundingClientRect().top||0;return{y:(document.querySelector(".ant-layout")?.clientHeight||0)-p-120+"px"}}function x(d,p){p.datum&&(p.datum.forEach(z=>J(z.id,d,p)),C(p))}function M(d,p,z){J(d,p,z),C(z)}function J(d,p,z){p?z.setOfCheckedId.add(d):z.setOfCheckedId.delete(d)}function C(d){d.datum&&(d.checked=d.datum.every(p=>d.setOfCheckedId.has(p.id)),d.indeterminate=d.datum.some(p=>d.setOfCheckedId.has(p.id))&&!d.checked)}function T(d){d.delResData=[];const p=d.setOfCheckedId.size;if(!p)return void d.msg.warning("\u8bf7\u5148\u52fe\u9009\u5220\u9664\u9879");const z=Array.from(d.setOfCheckedId);d.modal.confirm({nzTitle:`\u786e\u5b9a\u5220\u9664\u52fe\u9009\u7684${p}\u9879\uff1f`,nzOnOk:()=>{z.forEach(E=>{d.delete(E,p)})}})}l.d(P,{NC:()=>t,Yk:()=>x,kh:()=>m,mK:()=>T,mp:()=>M,oR:()=>C})},1764:function(W){W.exports=function(){"use strict";var l=6e4,m=36e5,v="millisecond",S="second",t="minute",x="hour",M="day",J="week",C="month",T="quarter",d="year",p="date",z="Invalid Date",E=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,$={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(f){var u=["th","st","nd","rd"],i=f%100;return"["+f+(u[(i-20)%10]||u[i]||u[0])+"]"}},Q=function(f,u,i){var _=String(f);return!_||_.length>=u?f:""+Array(u+1-_.length).join(i)+f},B={s:Q,z:function(f){var u=-f.utcOffset(),i=Math.abs(u),_=Math.floor(i/60),a=i%60;return(u<=0?"+":"-")+Q(_,2,"0")+":"+Q(a,2,"0")},m:function f(u,i){if(u.date()<i.date())return-f(i,u);var _=12*(i.year()-u.year())+(i.month()-u.month()),a=u.clone().add(_,C),g=i-a<0,h=u.clone().add(_+(g?-1:1),C);return+(-(_+(i-a)/(g?a-h:h-a))||0)},a:function(f){return f<0?Math.ceil(f)||0:Math.floor(f)},p:function(f){return{M:C,y:d,w:J,d:M,D:p,h:x,m:t,s:S,ms:v,Q:T}[f]||String(f||"").toLowerCase().replace(/s$/,"")},u:function(f){return void 0===f}},Y="en",q={};q[Y]=$;var X=function(f){return f instanceof j},G=function f(u,i,_){var a;if(!u)return Y;if("string"==typeof u){var g=u.toLowerCase();q[g]&&(a=g),i&&(q[g]=i,a=g);var h=u.split("-");if(!a&&h.length>1)return f(h[0])}else{var y=u.name;q[y]=u,a=y}return!_&&a&&(Y=a),a||!_&&Y},D=function(f,u){if(X(f))return f.clone();var i="object"==typeof u?u:{};return i.date=f,i.args=arguments,new j(i)},Z=B;Z.l=G,Z.i=X,Z.w=function(f,u){return D(f,{locale:u.$L,utc:u.$u,x:u.$x,$offset:u.$offset})};var j=function(){function f(i){this.$L=G(i.locale,null,!0),this.parse(i)}var u=f.prototype;return u.parse=function(i){this.$d=function(_){var a=_.date,g=_.utc;if(null===a)return new Date(NaN);if(Z.u(a))return new Date;if(a instanceof Date)return new Date(a);if("string"==typeof a&&!/Z$/i.test(a)){var h=a.match(E);if(h){var y=h[2]-1||0,A=(h[7]||"0").substring(0,3);return g?new Date(Date.UTC(h[1],y,h[3]||1,h[4]||0,h[5]||0,h[6]||0,A)):new Date(h[1],y,h[3]||1,h[4]||0,h[5]||0,h[6]||0,A)}}return new Date(a)}(i),this.$x=i.x||{},this.init()},u.init=function(){var i=this.$d;this.$y=i.getFullYear(),this.$M=i.getMonth(),this.$D=i.getDate(),this.$W=i.getDay(),this.$H=i.getHours(),this.$m=i.getMinutes(),this.$s=i.getSeconds(),this.$ms=i.getMilliseconds()},u.$utils=function(){return Z},u.isValid=function(){return this.$d.toString()!==z},u.isSame=function(i,_){var a=D(i);return this.startOf(_)<=a&&a<=this.endOf(_)},u.isAfter=function(i,_){return D(i)<this.startOf(_)},u.isBefore=function(i,_){return this.endOf(_)<D(i)},u.$g=function(i,_,a){return Z.u(i)?this[_]:this.set(a,i)},u.unix=function(){return Math.floor(this.valueOf()/1e3)},u.valueOf=function(){return this.$d.getTime()},u.startOf=function(i,_){var a=this,g=!!Z.u(_)||_,h=Z.p(i),y=function(H,k){var w=Z.w(a.$u?Date.UTC(a.$y,k,H):new Date(a.$y,k,H),a);return g?w:w.endOf(M)},A=function(H,k){return Z.w(a.toDate()[H].apply(a.toDate("s"),(g?[0,0,0,0]:[23,59,59,999]).slice(k)),a)},U=this.$W,I=this.$M,R=this.$D,N="set"+(this.$u?"UTC":"");switch(h){case d:return g?y(1,0):y(31,11);case C:return g?y(1,I):y(0,I+1);case J:var O=this.$locale().weekStart||0,L=(U<O?U+7:U)-O;return y(g?R-L:R+(6-L),I);case M:case p:return A(N+"Hours",0);case x:return A(N+"Minutes",1);case t:return A(N+"Seconds",2);case S:return A(N+"Milliseconds",3);default:return this.clone()}},u.endOf=function(i){return this.startOf(i,!1)},u.$set=function(i,_){var a,g=Z.p(i),h="set"+(this.$u?"UTC":""),y=(a={},a[M]=h+"Date",a[p]=h+"Date",a[C]=h+"Month",a[d]=h+"FullYear",a[x]=h+"Hours",a[t]=h+"Minutes",a[S]=h+"Seconds",a[v]=h+"Milliseconds",a)[g],A=g===M?this.$D+(_-this.$W):_;if(g===C||g===d){var U=this.clone().set(p,1);U.$d[y](A),U.init(),this.$d=U.set(p,Math.min(this.$D,U.daysInMonth())).$d}else y&&this.$d[y](A);return this.init(),this},u.set=function(i,_){return this.clone().$set(i,_)},u.get=function(i){return this[Z.p(i)]()},u.add=function(i,_){var a,g=this;i=Number(i);var h=Z.p(_),y=function(I){var R=D(g);return Z.w(R.date(R.date()+Math.round(I*i)),g)};if(h===C)return this.set(C,this.$M+i);if(h===d)return this.set(d,this.$y+i);if(h===M)return y(1);if(h===J)return y(7);var A=(a={},a[t]=l,a[x]=m,a[S]=1e3,a)[h]||1,U=this.$d.getTime()+i*A;return Z.w(U,this)},u.subtract=function(i,_){return this.add(-1*i,_)},u.format=function(i){var _=this,a=this.$locale();if(!this.isValid())return a.invalidDate||z;var g=i||"YYYY-MM-DDTHH:mm:ssZ",h=Z.z(this),y=this.$H,A=this.$m,U=this.$M,I=a.weekdays,R=a.months,N=function(k,w,tt,V){return k&&(k[w]||k(_,g))||tt[w].slice(0,V)},O=function(k){return Z.s(y%12||12,k,"0")},L=a.meridiem||function(k,w,tt){var V=k<12?"AM":"PM";return tt?V.toLowerCase():V},H={YY:String(this.$y).slice(-2),YYYY:this.$y,M:U+1,MM:Z.s(U+1,2,"0"),MMM:N(a.monthsShort,U,R,3),MMMM:N(R,U),D:this.$D,DD:Z.s(this.$D,2,"0"),d:String(this.$W),dd:N(a.weekdaysMin,this.$W,I,2),ddd:N(a.weekdaysShort,this.$W,I,3),dddd:I[this.$W],H:String(y),HH:Z.s(y,2,"0"),h:O(1),hh:O(2),a:L(y,A,!0),A:L(y,A,!1),m:String(A),mm:Z.s(A,2,"0"),s:String(this.$s),ss:Z.s(this.$s,2,"0"),SSS:Z.s(this.$ms,3,"0"),Z:h};return g.replace(b,function(k,w){return w||H[k]||h.replace(":","")})},u.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},u.diff=function(i,_,a){var g,h=Z.p(_),y=D(i),A=(y.utcOffset()-this.utcOffset())*l,U=this-y,I=Z.m(this,y);return I=(g={},g[d]=I/12,g[C]=I,g[T]=I/3,g[J]=(U-A)/6048e5,g[M]=(U-A)/864e5,g[x]=U/m,g[t]=U/l,g[S]=U/1e3,g)[h]||U,a?I:Z.a(I)},u.daysInMonth=function(){return this.endOf(C).$D},u.$locale=function(){return q[this.$L]},u.locale=function(i,_){if(!i)return this.$L;var a=this.clone(),g=G(i,_,!0);return g&&(a.$L=g),a},u.clone=function(){return Z.w(this.$d,this)},u.toDate=function(){return new Date(this.valueOf())},u.toJSON=function(){return this.isValid()?this.toISOString():null},u.toISOString=function(){return this.$d.toISOString()},u.toString=function(){return this.$d.toUTCString()},f}(),nt=j.prototype;return D.prototype=nt,[["$ms",v],["$s",S],["$m",t],["$H",x],["$W",M],["$M",C],["$y",d],["$D",p]].forEach(function(f){nt[f[1]]=function(u){return this.$g(u,f[0],f[1])}}),D.extend=function(f,u){return f.$i||(f(u,j,D),f.$i=!0),D},D.locale=G,D.isDayjs=X,D.unix=function(f){return D(1e3*f)},D.en=q[Y],D.Ls=q,D.p={},D}()}}]);