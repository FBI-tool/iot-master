import{c as ne,e as ie,f as oe,g as re,h as ae,i as pe,j as ce}from"./chunk-EXT7S62Z.js";import{Ba as L,Fb as Q,Gb as H,Hb as K,Ib as W,Pb as X,Rb as Y,Sb as Z,Tb as ee,Ub as te,c as V,e as O,g as B,lb as R,nb as $,o as A,pb as q,tb as G,vb as U,xb as J}from"./chunk-FZUU2ZSO.js";import{Ca as c,Da as _,Kb as D,La as s,Lb as b,Sa as f,Sb as M,Ta as o,Tb as w,Ua as i,Va as h,Za as g,a as P,b as S,ba as I,bb as u,db as l,ga as d,gb as N,ha as z,hb as m,hc as F,ib as x,ic as k,lb as T,qb as j,rb as y,yb as E}from"./chunk-Q2QJEMPV.js";function me(n,a){if(n&1){let r=g();o(0,"button",9),u("click",function(){d(r);let t=l();return z(t.refresh())}),h(1,"span",10),m(2," \u5237\u65B0 "),i()}}function le(n,a){if(n&1){let r=g();o(0,"button",15),u("click",function(){d(r);let t=l(2);return z(t.search())}),m(1," \u641C\u7D22 "),i()}}function se(n,a){if(n&1){let r=g();o(0,"div",11)(1,"nz-input-group",12)(2,"input",13),u("ngModelChange",function(t){d(r);let p=l();return z(p.value=t)}),i()(),f(3,le,2,0,"ng-template",null,14,E),i()}if(n&2){let r=N(4),e=l();c(1),s("nzAddOnAfter",r),c(1),s("ngModel",e.value)}}function ue(n,a){n&1&&(o(0,"div")(1,"button",16),h(2,"span",17),m(3," \u65B0\u5EFA "),i()())}function de(n,a){if(n&1&&(o(0,"a",23),h(1,"i",24),i()),n&2){let r=l(2).$implicit;s("routerLink",r.id+"/edit")}}function ze(n,a){if(n&1){let r=g();o(0,"a",25),u("nzOnConfirm",function(){d(r);let t=l(2).$implicit,p=l();return z(p.delete(t.id))}),h(1,"i",26),i()}}function _e(n,a){n&1&&(o(0,"nz-space"),f(1,de,2,1,"a",21)(2,ze,2,0,"a",22),i())}function fe(n,a){if(n&1){let r=g();o(0,"a",27),u("click",function(){d(r);let t=l().$implicit,p=l();return z(p.select(t))}),m(1,"\u9009\u62E9 "),i()}}function ge(n,a){if(n&1&&(o(0,"tr")(1,"td")(2,"a",18),m(3),i()(),o(4,"td"),m(5),i(),o(6,"td"),m(7),j(8,"date"),i(),o(9,"td"),f(10,_e,3,0,"nz-space",19)(11,fe,2,0,"a",20),i()()),n&2){let r=a.$implicit,e=l();c(2),s("routerLink",r.id),c(1),x(r.id),c(2),x(r.name),c(2),x(y(8,6,r.created)),c(3),s("ngIf",!e.ref),c(1),s("ngIf",e.ref)}}var $e=(()=>{let a=class a{constructor(e,t,p,v,C){this.route=e,this.rs=t,this.msg=p,this.ms=v,this.ref=C,this.total=0,this.nzPageIndex=1,this.nzPageSize=10,this.value="",this.projects=[]}ngOnInit(){this.load()}refresh(){this.nzPageIndex=1,this.load()}open(e){this.route.navigateByUrl("admin/project/"+e.id)}select(e){this.ref&&this.ref.close(e)}edit(e){this.route.navigateByUrl("admin/project/"+e.id+"/edit")}search(){console.log(this.value),this.load()}delete(e){this.rs.get(`project/${e}/delete`,{}).subscribe(t=>{this.msg.success("\u5220\u9664\u6210\u529F"),this.load()},t=>{console.log("err:",t)}),this.load()}nzPageSizeChange(e){this.nzPageSize=e,this.load()}nzPageIndexChange(e){this.nzPageIndex=e,this.load()}create(){this.rs.post("project/create",{}).subscribe(e=>{this.load(),this.msg.success("\u4FDD\u5B58\u6210\u529F")})}load(){let e;e={limit:this.nzPageSize,skip:(this.nzPageIndex-1)*this.nzPageSize},this.value&&(e=S(P({},e),{filter:{id:this.value}})),this.rs.post("project/search",e).subscribe(t=>{let p=t.data;this.projects=t.data,this.total=t.total},t=>{console.log("err:",t)})}};a.\u0275fac=function(t){return new(t||a)(_(F),_(J),_(U),_(K),_(H,8))},a.\u0275cmp=I({type:a,selectors:[["app-project"]],standalone:!0,features:[T],decls:20,vars:6,consts:[[1,"toolbar"],["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["class","search",4,"nzSpaceItem"],[4,"nzSpaceItem"],[3,"nzData","nzFrontPagination"],["table",""],[4,"ngFor","ngForOf"],[1,"pages"],["nzShowSizeChanger","","nzShowQuickJumper","",3,"nzPageIndex","nzPageSize","nzTotal","nzPageIndexChange","nzPageSizeChange"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","reload"],[1,"search"],["nzSearch","",3,"nzAddOnAfter"],["nz-input","","placeholder","\u8BF7\u8F93\u5165\u5173\u952E\u5B57",3,"ngModel","ngModelChange"],["suffixButton",""],["nz-button","","nzType","primary","nzSearch","",3,"click"],["nz-button","","nzType","primary","nzShape","round","routerLink","create"],["nz-icon","","nzType","plus"],[3,"routerLink"],[4,"ngIf"],["title","\u9009\u62E9",3,"click",4,"ngIf"],["title","\u7F16\u8F91",3,"routerLink",4,"nzSpaceItem"],["title","\u5220\u9664","nz-popconfirm","","nzPopconfirmTitle","\u786E\u8BA4\u5220\u9664",3,"nzOnConfirm",4,"nzSpaceItem"],["title","\u7F16\u8F91",3,"routerLink"],["nz-icon","","nzType","edit"],["title","\u5220\u9664","nz-popconfirm","","nzPopconfirmTitle","\u786E\u8BA4\u5220\u9664",3,"nzOnConfirm"],["nz-icon","","nzType","delete"],["title","\u9009\u62E9",3,"click"]],template:function(t,p){t&1&&(o(0,"nz-space",0),f(1,me,3,0,"button",1)(2,se,5,2,"div",2)(3,ue,4,0,"div",3),i(),o(4,"nz-table",4,5)(6,"thead")(7,"tr")(8,"th"),m(9,"ID"),i(),o(10,"th"),m(11,"\u540D\u79F0"),i(),o(12,"th"),m(13,"\u521B\u5EFA\u65F6\u95F4"),i(),o(14,"th"),m(15,"\u64CD\u4F5C"),i()()(),o(16,"tbody"),f(17,ge,12,8,"tr",6),i()(),o(18,"div",7)(19,"nz-pagination",8),u("nzPageIndexChange",function(C){return p.nzPageIndexChange(C)})("nzPageSizeChange",function(C){return p.nzPageSizeChange(C)}),i()()),t&2&&(c(4),s("nzData",p.projects)("nzFrontPagination",!1),c(13),s("ngForOf",p.projects),c(2),s("nzPageIndex",p.nzPageIndex)("nzPageSize",p.nzPageSize)("nzTotal",p.total))},dependencies:[w,D,b,M,ce,oe,ne,ie,pe,re,ae,W,A,V,O,B,q,R,$,Z,Y,L,Q,X,te,G,ee,k],styles:[".toolbar[_ngcontent-%COMP%]{padding:10px 0}.pages[_ngcontent-%COMP%]{padding:10px 0;display:flex;justify-content:center}"]});let n=a;return n})();export{$e as a};
