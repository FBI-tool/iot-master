import{b as jt,c as $t}from"./chunk-CXFVPRBG.js";import{a as Ht,b as Ut}from"./chunk-YBS2C3O3.js";import{a as Wt,b as Zt}from"./chunk-QBVGC53F.js";import{b as Vt,c as Pt,d as Rt,e as Lt,f as Bt,g as Ot,h as Xt,i as Gt,j as qt}from"./chunk-EXT7S62Z.js";import{a as ee,b as te,d as ne,e as ie,g as Le,h as Be}from"./chunk-IT2U3YUS.js";import{A as Ct,Ba as fe,Ca as Ve,Hb as Tt,Ib as Re,Mb as re,Nb as ae,Q as Me,R as Ye,Rb as kt,Sa as yt,Sb as Mt,T as U,Tb as J,U as W,Ua as xt,Ub as k,Va as Et,Vb as At,Xa as Pe,Ya as wt,Z as bt,ab as Z,bb as Q,c as x,cb as K,d as ye,db as Y,e as E,f as X,g as ue,h as G,i as de,j as q,lb as N,m as j,n as $,nb as Nt,o as w,p as H,pb as ze,qb as Ft,rb as Dt,tb as I,ub as It,vb as F,w as Ke,xb as T,ya as Ae,za as xe}from"./chunk-FZUU2ZSO.js";import{$ as ve,$a as st,B as je,Ca as s,Da as f,Eb as zt,Fa as He,G as Ne,Ga as pe,Ha as rt,Ka as at,Kb as Te,La as m,Lb as D,Ma as De,Mb as ht,Na as be,Nb as gt,Ob as _t,Ra as mt,S as P,Sa as h,Sb as St,Ta as r,Tb as ke,Ua as a,Va as d,Wa as R,Xa as L,Y as nt,Z as le,Za as S,a as oe,ba as b,bb as z,ca as ce,cb as lt,da as it,db as u,dc as vt,eb as ct,fa as ot,fb as pt,ga as g,gb as A,h as ge,ha as _,hb as c,hc as O,ib as me,jb as Ie,kb as ut,kc as Qe,lb as y,n as _e,pa as Fe,qb as dt,rb as ft,ub as Ue,va as Ce,vb as We,x as Se,xb as Ze,ya as $e,yb as B}from"./chunk-Q2QJEMPV.js";function gn(t,i){if(t&1){let l=S();r(0,"button",11),z("click",function(){g(l);let n=u();return _(n.onSubmit())}),c(1,"\u4FDD\u5B58"),a()}}function _n(t,i){if(t&1){let l=S();r(0,"nz-form-item")(1,"nz-form-label",12),c(2,"\u8BC1\u4E66cert"),a(),r(3,"nz-form-control",3),d(4,"input",13),r(5,"nz-upload",14),z("nzChange",function(n){g(l);let o=u();return _(o.onCertChange(n))}),r(6,"button",15),d(7,"span",16),c(8," \u4E0A\u4F20 "),a()()()()}t&2&&(s(1),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))}function Sn(t,i){if(t&1){let l=S();r(0,"nz-form-item")(1,"nz-form-label",17),c(2,"\u8BC1\u4E66key"),a(),r(3,"nz-form-control",3),d(4,"input",18),r(5,"nz-upload",14),z("nzChange",function(n){g(l);let o=u();return _(o.onKeyChange(n))}),r(6,"button",15),d(7,"span",16),c(8," \u4E0A\u4F20 "),a()()()()}t&2&&(s(1),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))}function vn(t,i){t&1&&(r(0,"nz-form-item")(1,"nz-form-label",19),c(2,"Email"),a(),r(3,"nz-form-control",3),d(4,"input",20),a()()),t&2&&(s(1),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))}var Qt=(()=>{let i=class i{constructor(e,n,o,p){this.fb=e,this.route=n,this.rs=o,this.msg=p,this.data={},this.buildFromGroup()}ngOnInit(){this.rs.get("setting/web",{}).subscribe(e=>{},e=>{console.log("err:",e)})}buildFromGroup(){this.formGroup=this.fb.group({port:[this.data.port||8080,[]],https:[this.data.https||"",[]],cert:[this.data.cert||"",[]],key:[this.data.key||"",[]],email:[this.data.email||"",[]]})}onSubmit(){this.rs.post("setting/web",this.formGroup.value).subscribe(e=>{},e=>{console.log("err:",e)})}onCertChange(e){}onKeyChange(e){}};i.\u0275fac=function(n){return new(n||i)(f($),f(O),f(T),f(F))},i.\u0275cmp=b({type:i,selectors:[["app-setting-web"]],standalone:!0,features:[y],decls:25,vars:12,consts:[["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nz-form","",3,"formGroup","ngSubmit"],["nzRequired","","nzFor","port",3,"nzSm","nzXs"],["nzErrorTip","",3,"nzSm","nzXs"],["nz-input","","type","number","formControlName","port"],["nzFor","https",3,"nzSm","nzXs"],["nzPlaceHolder","\u65B9\u5F0F","formControlName","https"],["nzLabel","\u7981\u7528","nzValue",""],["nzLabel","TLS","nzValue","TLS"],["nzLabel","LetsEncrypt","nzValue","LetsEncrypt"],[4,"ngIf"],["nz-button","","nzType","primary",3,"click"],["nzFor","cert",3,"nzSm","nzXs"],["type","hidden","formControlName","cert"],["nzAction","https://www.mocky.io/v2/5cc8019d300000980a055e76",3,"nzChange"],["nz-button",""],["nz-icon","","nzType","upload"],["nzFor","key",3,"nzSm","nzXs"],["type","hidden","formControlName","key"],["nzFor","port",3,"nzSm","nzXs"],["nz-input","","type","email","formControlName","email"]],template:function(n,o){n&1&&(r(0,"nz-page-header")(1,"nz-page-header-title"),c(2,"\u8BBE\u7F6E"),a(),r(3,"nz-page-header-subtitle"),c(4,"Web\u670D\u52A1"),a(),r(5,"nz-page-header-extra")(6,"nz-space"),h(7,gn,2,0,"button",0),a()()(),r(8,"form",1),z("ngSubmit",function(){return o.onSubmit()}),r(9,"nz-form-item")(10,"nz-form-label",2),c(11,"HTTP\u7AEF\u53E3\u53F7"),a(),r(12,"nz-form-control",3),d(13,"input",4),a()(),r(14,"nz-form-item")(15,"nz-form-label",5),c(16,"HTTPS"),a(),r(17,"nz-form-control",3)(18,"nz-select",6),d(19,"nz-option",7)(20,"nz-option",8)(21,"nz-option",9),a()()(),h(22,_n,9,4,"nz-form-item",10)(23,Sn,9,4,"nz-form-item",10)(24,vn,5,4,"nz-form-item",10),a()),n&2&&(s(8),m("formGroup",o.formGroup),s(2),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(3),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(5),m("ngIf",o.formGroup.controls.https.value==="TLS"),s(1),m("ngIf",o.formGroup.controls.https.value==="TLS"),s(1),m("ngIf",o.formGroup.controls.https.value==="LetsEncrypt"))},dependencies:[w,G,x,de,E,X,I,W,K,Q,Z,Y,N,ie,ne,te,ee,U,ae,k,H,q,j,J,re,Le,fe,D]});let t=i;return t})();function Cn(t,i){if(t&1){let l=S();r(0,"button",13),z("click",function(){g(l);let n=u();return _(n.onSubmit())}),c(1,"\u4FDD\u5B58"),a()}}var Kt=(()=>{let i=class i{constructor(e,n,o,p){this.fb=e,this.route=n,this.rs=o,this.msg=p,this.data={},this.urls={sqlite:"master.db",mysql:"root:123456@tcp(127.0.0.1)/master?charset=utf8",postgres:"postgres://root:123456@127.0.0.1/master?sslmode=verify-full",sqlserver:"sqlserver://sa:123456@127.0.0.1?database=master&connection+timeout=30",godror:'user="root" password="123456" connectString="127.0.0.1:1521/master"'},this.buildFromGroup()}ngOnInit(){this.rs.get("setting/database",{}).subscribe(e=>{},e=>{console.log("err:",e)})}buildFromGroup(){this.formGroup=this.fb.group({type:[this.data.type||"sqlite",[]],url:[this.data.url||"master.db",[]],debug:[this.data.debug||!1,[]]})}onSubmit(){this.rs.post("setting/database",this.formGroup.value).subscribe(e=>{},e=>{console.log("err:",e)})}writeExample(){this.formGroup.patchValue({url:this.urls[this.formGroup.controls.type.value]})}};i.\u0275fac=function(n){return new(n||i)(f($),f(O),f(T),f(F))},i.\u0275cmp=b({type:i,selectors:[["app-setting-database"]],standalone:!0,features:[y],decls:27,vars:10,consts:[["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nz-form","",3,"formGroup","ngSubmit"],["nzFor","type",3,"nzSm","nzXs"],["nzErrorTip","",3,"nzSm","nzXs"],["formControlName","type"],["nzLabel","SQLite\uFF08\u5185\u7F6E\uFF09","nzValue","sqlite"],["nzLabel","MySQL","nzValue","mysql"],["nzLabel","Postgres","nzValue","postgres"],["nzLabel","Microsoft SQL Server","nzValue","sqlserver"],["nzLabel","Oracle","nzValue","godror"],["nzRequired","","nzFor","url",3,"nzSm","nzXs"],["nz-input","","formControlName","url"],[3,"click"],["nz-button","","nzType","primary",3,"click"]],template:function(n,o){n&1&&(r(0,"nz-page-header")(1,"nz-page-header-title"),c(2,"\u8BBE\u7F6E"),a(),r(3,"nz-page-header-subtitle"),c(4,"\u6570\u636E\u5E93"),a(),r(5,"nz-page-header-extra")(6,"nz-space"),h(7,Cn,2,0,"button",0),a()()(),r(8,"form",1),z("ngSubmit",function(){return o.onSubmit()}),r(9,"nz-form-item")(10,"nz-form-label",2),c(11,"\u6570\u636E\u5E93\u7C7B\u578B"),a(),r(12,"nz-form-control",3)(13,"nz-select",4),d(14,"nz-option",5)(15,"nz-option",6)(16,"nz-option",7)(17,"nz-option",8)(18,"nz-option",9),a()()(),r(19,"nz-form-item")(20,"nz-form-label",10),c(21,"\u8FDE\u63A5\u5B57\u7B26\u4E32"),a(),r(22,"nz-form-control",3),d(23,"input",11),c(24),r(25,"a",12),z("click",function(){return o.writeExample()}),c(26,"\u5199\u5165"),a()()()()),n&2&&(s(8),m("formGroup",o.formGroup),s(2),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(8),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(2),Ie(" \u793A\u4F8B\uFF1A",o.urls[o.formGroup.controls.type.value]," "))},dependencies:[w,G,x,E,X,I,W,K,Q,Z,Y,N,re,ie,ne,te,ee,U,ae,k,H,q,j,J]});let t=i;return t})();function bn(t,i){if(t&1){let l=S();r(0,"button",8),z("click",function(){g(l);let n=u();return _(n.onSubmit())}),c(1,"\u4FDD\u5B58"),a()}}function yn(t,i){t&1&&(r(0,"nz-form-item")(1,"nz-form-label",9),c(2,"\u5730\u5740"),a(),r(3,"nz-form-control",3),d(4,"input",10),a()()),t&2&&(s(1),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))}function xn(t,i){t&1&&(r(0,"nz-form-item")(1,"nz-form-label",11),c(2,"\u7AEF\u53E3"),a(),r(3,"nz-form-control",3),d(4,"input",12),a()()),t&2&&(s(1),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))}function En(t,i){t&1&&(r(0,"nz-form-item")(1,"nz-form-label",13),c(2,"\u7528\u6237\u540D"),a(),r(3,"nz-form-control",3),d(4,"input",14),a()()),t&2&&(s(1),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))}function wn(t,i){t&1&&(r(0,"nz-form-item")(1,"nz-form-label",15),c(2,"\u5BC6\u7801"),a(),r(3,"nz-form-control",3),d(4,"input",16),a()()),t&2&&(s(1),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))}function Nn(t,i){t&1&&(r(0,"nz-form-item")(1,"nz-form-label",17),c(2,"\u5BA2\u6237\u7AEFID"),a(),r(3,"nz-form-control",3),d(4,"input",18),a()()),t&2&&(s(1),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))}var Yt=(()=>{let i=class i{constructor(e,n,o,p){this.fb=e,this.route=n,this.rs=o,this.msg=p,this.data={},this.buildFromGroup()}ngOnInit(){this.rs.get("setting/broker",{}).subscribe(e=>{},e=>{console.log("err:",e)})}buildFromGroup(){this.formGroup=this.fb.group({type:[this.data.type||"internal",[]],address:[this.data.address||"localhost",[]],port:[this.data.port||1883,[]],username:[this.data.username||"",[]],password:[this.data.password||"",[]],client_id:[this.data.client_id||"master",[]]})}onSubmit(){this.rs.post("setting/broker",this.formGroup.value).subscribe(e=>{},e=>{console.log("err:",e)})}};i.\u0275fac=function(n){return new(n||i)(f($),f(O),f(T),f(F))},i.\u0275cmp=b({type:i,selectors:[["app-setting-broker"]],standalone:!0,features:[y],decls:21,vars:10,consts:[["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nz-form","",3,"formGroup","ngSubmit"],["nzFor","type",3,"nzSm","nzXs"],["nzErrorTip","",3,"nzSm","nzXs"],["formControlName","type"],["nzLabel","\u5185\u7F6E","nzValue","internal"],["nzLabel","\u5916\u7F6E","nzValue","external"],[4,"ngIf"],["nz-button","","nzType","primary",3,"click"],["nzRequired","","nzFor","address",3,"nzSm","nzXs"],["nz-input","","formControlName","address"],["nzRequired","","nzFor","port",3,"nzSm","nzXs"],["nz-input","","type","number","formControlName","port"],["nzFor","username",3,"nzSm","nzXs"],["nz-input","","formControlName","username"],["nzFor","password",3,"nzSm","nzXs"],["nz-input","","formControlName","password"],["nzFor","client_id",3,"nzSm","nzXs"],["nz-input","","formControlName","client_id"]],template:function(n,o){n&1&&(r(0,"nz-page-header")(1,"nz-page-header-title"),c(2,"\u8BBE\u7F6E"),a(),r(3,"nz-page-header-subtitle"),c(4,"MQTT\u603B\u7EBF"),a(),r(5,"nz-page-header-extra")(6,"nz-space"),h(7,bn,2,0,"button",0),a()()(),r(8,"form",1),z("ngSubmit",function(){return o.onSubmit()}),r(9,"nz-form-item")(10,"nz-form-label",2),c(11,"\u7C7B\u578B"),a(),r(12,"nz-form-control",3)(13,"nz-select",4),d(14,"nz-option",5)(15,"nz-option",6),a()()(),h(16,yn,5,4,"nz-form-item",7)(17,xn,5,4,"nz-form-item",7)(18,En,5,4,"nz-form-item",7)(19,wn,5,4,"nz-form-item",7)(20,Nn,5,4,"nz-form-item",7),a()),n&2&&(s(8),m("formGroup",o.formGroup),s(2),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(4),m("ngIf",o.formGroup.controls.type.value==="external"),s(1),m("ngIf",o.formGroup.controls.type.value==="external"),s(1),m("ngIf",o.formGroup.controls.type.value==="external"),s(1),m("ngIf",o.formGroup.controls.type.value==="external"),s(1),m("ngIf",o.formGroup.controls.type.value==="external"))},dependencies:[w,G,x,de,E,X,I,W,K,Q,Z,Y,N,re,ie,ne,te,ee,U,ae,k,H,q,j,J,D]});let t=i;return t})();function Fn(t,i){if(t&1){let l=S();r(0,"button",15),z("click",function(){g(l);let n=u();return _(n.submit())}),c(1,"\u4FDD\u5B58"),a()}}function Dn(t,i){t&1&&(R(0),c(1,"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"),L())}function In(t,i){if(t&1&&h(0,Dn,2,0,"ng-container",16),t&2){let l=i.$implicit;m("ngIf",l.hasError("required"))}}function Tn(t,i){t&1&&(R(0),c(1,"\u8BF7\u8F93\u5165\u5BC6\u7801!"),L())}function kn(t,i){if(t&1&&h(0,Tn,2,0,"ng-container",16),t&2){let l=i.$implicit;m("ngIf",l.hasError("required"))}}function Mn(t,i){t&1&&(R(0),c(1,"\u8BF7\u8F93\u5165\u5730\u5740!"),L())}function An(t,i){if(t&1&&h(0,Mn,2,0,"ng-container",16),t&2){let l=i.$implicit;m("ngIf",l.hasError("required"))}}function Vn(t,i){t&1&&(R(0),c(1,"\u8BF7\u8F93\u5165Id!"),L())}function Pn(t,i){if(t&1&&h(0,Vn,2,0,"ng-container",16),t&2){let l=i.$implicit;m("ngIf",l.hasError("required"))}}var Jt=(()=>{let i=class i{constructor(e,n,o,p){this.fb=e,this.route=n,this.rs=o,this.msg=p,this.data={},this.buildFromGroup()}buildFromGroup(){this.formGroup=this.fb.group({ClientId:["",[ye.required]],Username:["",[ye.required]],Url:["",[ye.required]],Password:["",[ye.required]]})}ngOnInit(){this.rs.get("setting/mqtt",{}).subscribe(e=>{},e=>{console.log("err:",e)})}submit(){if(this.formGroup.valid){this.rs.post("setting/mqtt",this.formGroup.value).subscribe(e=>{},e=>{console.log("err:",e)});return}else Object.values(this.formGroup.controls).forEach(e=>{e.invalid&&(e.markAsDirty(),e.updateValueAndValidity({onlySelf:!0}))})}};i.\u0275fac=function(n){return new(n||i)(f($),f(O),f(T),f(F))},i.\u0275cmp=b({type:i,selectors:[["app-setting-mqtt"]],standalone:!0,features:[y],decls:37,vars:21,consts:[["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nz-form","",3,"formGroup","ngSubmit"],["nzFor","Username",3,"nzSm","nzXs"],["nzHasFeedback","",3,"nzSm","nzXs","nzErrorTip"],["nz-input","","name","Username","formControlName","Username"],["nameErrorTpl",""],["nzFor","Password",3,"nzSm","nzXs"],["nz-input","","name","Password","formControlName","Password"],["PasswordErrorTpl",""],["nzRequired","","nzFor","Url",3,"nzSm","nzXs"],["nz-input","","name","Url","formControlName","Url"],["UrlErrorTpl",""],["nzRequired","","nzFor","ClientId",3,"nzSm","nzXs"],["nz-input","","name","ClientId","formControlName","ClientId"],["ClientIdErrorTpl",""],["nz-button","","nzType","primary",3,"click"],[4,"ngIf"]],template:function(n,o){if(n&1&&(r(0,"nz-page-header")(1,"nz-page-header-title"),c(2,"\u8BBE\u7F6E"),a(),r(3,"nz-page-header-subtitle"),c(4,"MQTT\u8FDE\u63A5"),a(),r(5,"nz-page-header-extra")(6,"nz-space"),h(7,Fn,2,0,"button",0),a()()(),r(8,"form",1),z("ngSubmit",function(){return o.submit()}),r(9,"nz-form-item")(10,"nz-form-label",2),c(11,"\u7528\u6237\u540D"),a(),r(12,"nz-form-control",3),d(13,"input",4),h(14,In,1,1,"ng-template",null,5,B),a()(),r(16,"nz-form-item")(17,"nz-form-label",6),c(18,"\u5BC6\u7801"),a(),r(19,"nz-form-control",3),d(20,"input",7),h(21,kn,1,1,"ng-template",null,8,B),a()(),r(23,"nz-form-item")(24,"nz-form-label",9),c(25,"\u5730\u5740"),a(),r(26,"nz-form-control",3),d(27,"input",10),h(28,An,1,1,"ng-template",null,11,B),a()(),r(30,"nz-form-item")(31,"nz-form-label",12),c(32,"Id"),a(),r(33,"nz-form-control",3),d(34,"input",13),h(35,Pn,1,1,"ng-template",null,14,B),a()()()),n&2){let p=A(15),v=A(22),C=A(29),M=A(36);s(8),m("formGroup",o.formGroup),s(2),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24)("nzErrorTip",p),s(5),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24)("nzErrorTip",v),s(5),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24)("nzErrorTip",C),s(5),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24)("nzErrorTip",M)}},dependencies:[w,G,x,E,X,I,W,K,Q,Z,Y,N,ie,ne,te,ee,U,k,H,q,j,J,D]});let t=i;return t})();function Rn(t,i){if(t&1){let l=S();r(0,"button",20),z("click",function(){g(l);let n=u();return _(n.onSubmit())}),c(1,"\u4FDD\u5B58"),a()}}function Ln(t,i){t&1&&(r(0,"nz-form-item")(1,"nz-form-label",21),c(2,"\u65E5\u5FD7\u6587\u4EF6"),a(),r(3,"nz-form-control",3),d(4,"input",22),a()()),t&2&&(s(1),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))}function Bn(t,i){t&1&&(r(0,"nz-form-item")(1,"nz-form-label",23),c(2,"\u6700\u5927\u5C3A\u5BF8 MB"),a(),r(3,"nz-form-control",3),d(4,"input",24),a()()),t&2&&(s(1),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))}function On(t,i){t&1&&(r(0,"nz-form-item")(1,"nz-form-label",25),c(2,"\u6700\u5927\u4FDD\u7559\u5929\u6570"),a(),r(3,"nz-form-control",3),d(4,"input",26),a()()),t&2&&(s(1),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))}function Xn(t,i){t&1&&(r(0,"nz-form-item")(1,"nz-form-label",27),c(2,"\u4FDD\u7559\u6570\u91CF\uFF08\u6EDA\u52A8\u5220\u9664\uFF09"),a(),r(3,"nz-form-control",3),d(4,"input",28),a()()),t&2&&(s(1),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))}function Gn(t,i){t&1&&(r(0,"nz-form-item")(1,"nz-form-label",29),c(2,"\u6587\u4EF6\u538B\u7F29"),a(),r(3,"nz-form-control",3),d(4,"nz-switch",30),a()()),t&2&&(s(1),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))}var en=(()=>{let i=class i{constructor(e,n,o,p){this.fb=e,this.route=n,this.rs=o,this.msg=p,this.data={},this.buildFromGroup()}ngOnInit(){this.rs.get("setting/log",{}).subscribe(e=>{},e=>{console.log("err:",e)})}buildFromGroup(){this.formGroup=this.fb.group({level:[this.data.level||"info",[]],caller:[this.data.caller||!0,[]],text:[this.data.text||!0,[]],output:[this.data.output||"stdout",[]],filename:[this.data.filename||"log.txt",[]],max_size:[this.data.max_size||10,[]],max_backups:[this.data.max_backups||3,[]],max_age:[this.data.max_age||30,[]],compress:[this.data.compress||!0,[]]})}onSubmit(){this.rs.post("setting/log",this.formGroup.value).subscribe(e=>{},e=>{console.log("err:",e)})}};i.\u0275fac=function(n){return new(n||i)(f($),f(O),f(T),f(F))},i.\u0275cmp=b({type:i,selectors:[["app-setting-log"]],standalone:!0,features:[y],decls:43,vars:22,consts:[["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nz-form","",3,"formGroup","ngSubmit"],["nzFor","type",3,"nzSm","nzXs"],["nzErrorTip","",3,"nzSm","nzXs"],["formControlName","level"],["nzLabel","\u8DDF\u8E2A trace","nzValue","trace"],["nzLabel","\u8C03\u8BD5 debug","nzValue","debug"],["nzLabel","\u4FE1\u606F info","nzValue","info"],["nzLabel","\u8B66\u544A warn","nzValue","warn"],["nzLabel","\u9519\u8BEF error","nzValue","error"],["nzLabel","\u4E25\u91CD fatal","nzValue","fatal"],["nzFor","caller",3,"nzSm","nzXs"],["formControlName","caller"],["nzFor","text",3,"nzSm","nzXs"],["formControlName","text"],["formControlName","output"],["nzLabel","\u6587\u4EF6","nzValue","file"],["nzLabel","\u6807\u51C6\u8F93\u51FA","nzValue","stdout"],["nzLabel","\u6EDA\u52A8\u6587\u4EF6","nzValue","fileRotate"],[4,"ngIf"],["nz-button","","nzType","primary",3,"click"],["nzRequired","","nzFor","filename",3,"nzSm","nzXs"],["nz-input","","formControlName","filename"],["nzRequired","","nzFor","max_size",3,"nzSm","nzXs"],["nz-input","","type","number","formControlName","max_size"],["nzRequired","","nzFor","max_backups",3,"nzSm","nzXs"],["nz-input","","type","number","formControlName","max_backups"],["nzRequired","","nzFor","max_age",3,"nzSm","nzXs"],["nz-input","","type","number","formControlName","max_age"],["nzRequired","","nzFor","compress",3,"nzSm","nzXs"],["formControlName","compress"]],template:function(n,o){n&1&&(r(0,"nz-page-header")(1,"nz-page-header-title"),c(2,"\u8BBE\u7F6E"),a(),r(3,"nz-page-header-subtitle"),c(4,"\u7CFB\u7EDF\u65E5\u5FD7"),a(),r(5,"nz-page-header-extra")(6,"nz-space"),h(7,Rn,2,0,"button",0),a()()(),r(8,"form",1),z("ngSubmit",function(){return o.onSubmit()}),r(9,"nz-form-item")(10,"nz-form-label",2),c(11,"\u7B49\u7EA7"),a(),r(12,"nz-form-control",3)(13,"nz-select",4),d(14,"nz-option",5)(15,"nz-option",6)(16,"nz-option",7)(17,"nz-option",8)(18,"nz-option",9)(19,"nz-option",10),a()()(),r(20,"nz-form-item")(21,"nz-form-label",11),c(22,"\u663E\u793A\u51FD\u6570\u8C03\u7528"),a(),r(23,"nz-form-control",3),d(24,"nz-switch",12),a()(),r(25,"nz-form-item")(26,"nz-form-label",13),c(27,"\u4F7F\u7528\u6587\u672C\u683C\u5F0F"),a(),r(28,"nz-form-control",3),d(29,"nz-switch",14),a()(),r(30,"nz-form-item")(31,"nz-form-label",2),c(32,"\u8F93\u51FA\u65B9\u5F0F"),a(),r(33,"nz-form-control",3)(34,"nz-select",15),d(35,"nz-option",16)(36,"nz-option",17)(37,"nz-option",18),a()()(),h(38,Ln,5,4,"nz-form-item",19)(39,Bn,5,4,"nz-form-item",19)(40,On,5,4,"nz-form-item",19)(41,Xn,5,4,"nz-form-item",19)(42,Gn,5,4,"nz-form-item",19),a()),n&2&&(s(8),m("formGroup",o.formGroup),s(2),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(9),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(3),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(3),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(5),m("ngIf",o.formGroup.controls.output.value!=="stdout"),s(1),m("ngIf",o.formGroup.controls.output.value==="fileRotate"),s(1),m("ngIf",o.formGroup.controls.output.value==="fileRotate"),s(1),m("ngIf",o.formGroup.controls.output.value==="fileRotate"),s(1),m("ngIf",o.formGroup.controls.output.value==="fileRotate"))},dependencies:[w,G,x,de,E,X,D,I,W,K,Q,Z,Y,N,re,ie,ne,te,ee,U,ae,k,H,q,j,Ht]});let t=i;return t})();var tn=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=b({type:i,selectors:[["app-setting-backup"]],standalone:!0,features:[y],decls:0,vars:0,template:function(n,o){}});let t=i;return t})();var on=(()=>{let i=class i{constructor(){this.currentName="",this.name=""}};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=b({type:i,selectors:[["app-rename"]],inputs:{currentName:"currentName"},standalone:!0,features:[y],decls:11,vars:2,consts:[["type","text","nz-input","",3,"ngModel","ngModelChange"]],template:function(n,o){n&1&&(r(0,"table")(1,"tr")(2,"td"),c(3,"\u5F53\u524D\u540D\u79F0\uFF1A"),a(),r(4,"td"),c(5),a()(),r(6,"tr")(7,"td"),c(8,"\u91CD\u547D\u540D\uFF1A"),a(),r(9,"td")(10,"input",0),z("ngModelChange",function(v){return o.name=v}),a()()()()),n&2&&(s(5),me(o.currentName),s(5),m("ngModel",o.name))},dependencies:[ze,N,w,x,E,ue]});let t=i;return t})();var rn=(()=>{let i=class i{set inputValue(e){this.name=e||""}constructor(e){this.msg=e,this.isSuccess=!1,this.load=new pe,this.isSuccess=!1}handleUpload(e){if(e.type==="error"){this.msg.error("\u4E0A\u4F20\u5931\u8D25");return}if(e.file&&e.file.response){let n=e.file.response;n.error?this.msg.error(`${n.error}`):this.msg.success("\u4E0A\u4F20\u6210\u529F!")}}};i.\u0275fac=function(n){return new(n||i)(f(F))},i.\u0275cmp=b({type:i,selectors:[["app-upload"]],inputs:{inputValue:"inputValue"},outputs:{load:"load"},standalone:!0,features:[y],decls:14,vars:2,consts:[["type","text","nz-input","",3,"ngModel","ngModelChange"],["nzAction","api/attach/upload/",3,"nzShowUploadList","nzChange"],["nz-button",""],["nz-icon","","nzType","upload"]],template:function(n,o){n&1&&(r(0,"table")(1,"tr")(2,"td"),c(3,"\u4E0A\u4F20\u8DEF\u5F84\uFF1A"),a(),r(4,"td")(5,"input",0),z("ngModelChange",function(v){return o.name=v}),a()()(),r(6,"tr")(7,"td"),c(8,"\u4E0A\u4F20\u6587\u4EF6\uFF1A"),a(),r(9,"td")(10,"nz-upload",1),z("nzChange",function(v){return o.handleUpload(v)}),r(11,"button",2),d(12,"i",3),c(13," \u4E0A\u4F20 "),a()()()()()),n&2&&(s(5),m("ngModel",o.name),s(5),m("nzShowUploadList",!1))},dependencies:[w,x,E,ue,Be,Le,ze,N],styles:["table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 0}"]});let t=i;return t})();var jn=["imgRef"],$n=["imagePreviewWrapper"];function Hn(t,i){if(t&1){let l=S();r(0,"li",10),z("click",function(){let o=g(l).$implicit;return _(o.onClick())}),d(1,"span",11),a()}if(t&2){let l=i.$implicit,e=u();be("ant-image-preview-operations-operation-disabled",e.zoomOutDisabled&&l.type==="zoomOut"),s(1),m("nzType",l.icon)}}function Un(t,i){if(t&1&&d(0,"img",13,14),t&2){let l=u().$implicit,e=u();De("width",l.width)("height",l.height)("transform",e.previewImageTransform),at("src",e.sanitizerResourceUrl(l.src),Ce)("srcset",l.srcset)("alt",l.alt)}}function Wn(t,i){if(t&1&&(R(0),h(1,Un,2,9,"img",12),L()),t&2){let l=i.index,e=u();s(1),m("ngIf",e.index===l)}}function Zn(t,i){if(t&1){let l=S();R(0),r(1,"div",15),z("click",function(n){g(l);let o=u();return _(o.onSwitchLeft(n))}),d(2,"span",16),a(),r(3,"div",17),z("click",function(n){g(l);let o=u();return _(o.onSwitchRight(n))}),d(4,"span",18),a(),L()}if(t&2){let l=u();s(1),be("ant-image-preview-switch-left-disabled",l.index<=0),s(2),be("ant-image-preview-switch-right-disabled",l.index>=l.images.length-1)}}var Qn=["*"],Xe={enter:"ant-fade-enter",enterActive:"ant-fade-enter-active",leave:"ant-fade-leave",leaveActive:"ant-fade-leave-active"},Kn="ant-image-preview-mask",cn="image";function Yn(t){let i={};return t.width<=t.clientWidth&&t.height<=t.clientHeight&&(i={x:0,y:0}),(t.width>t.clientWidth||t.height>t.clientHeight)&&(i={x:ln(t.left,t.width,t.clientWidth),y:ln(t.top,t.height,t.clientHeight)}),i}function Jn(t){let i=t.getBoundingClientRect(),l=document.documentElement;return{left:i.left+(window.pageXOffset||l.scrollLeft)-(l.clientLeft||document.body.clientLeft||0),top:i.top+(window.pageYOffset||l.scrollTop)-(l.clientTop||document.body.clientTop||0)}}function ei(){let t=document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight;return{width:t,height:i}}function ln(t,i,l){let e=t+i,n=(i-l)/2,o=null;return i>l?(t>0&&(o=n),t<0&&e<l&&(o=-n)):(t<0||e>l)&&(o=t<0?n:-n),o}var we=class{constructor(){this.nzKeyboard=!0,this.nzNoAnimation=!1,this.nzMaskClosable=!0,this.nzCloseOnNavigation=!0}},Ge={x:0,y:0},Je=.5,ti=1,ni=0,pn=(()=>{let i=class i{get animationDisabled(){return this.config.nzNoAnimation??!1}get maskClosable(){let e=this.nzConfigService.getConfigForComponent(cn)||{};return this.config.nzMaskClosable??e.nzMaskClosable??!0}constructor(e,n,o,p,v,C,M,tt){this.ngZone=e,this.host=n,this.cdr=o,this.nzConfigService=p,this.config=v,this.overlayRef=C,this.destroy$=M,this.sanitizer=tt,this._defaultNzZoom=ti,this._defaultNzScaleStep=Je,this._defaultNzRotate=ni,this.images=[],this.index=0,this.isDragging=!1,this.visible=!0,this.animationState="enter",this.animationStateChanged=new pe,this.scaleStepMap=new Map,this.previewImageTransform="",this.previewImageWrapperTransform="",this.operations=[{icon:"close",onClick:()=>{this.onClose()},type:"close"},{icon:"zoom-in",onClick:()=>{this.onZoomIn()},type:"zoomIn"},{icon:"zoom-out",onClick:()=>{this.onZoomOut()},type:"zoomOut"},{icon:"rotate-right",onClick:()=>{this.onRotateRight()},type:"rotateRight"},{icon:"rotate-left",onClick:()=>{this.onRotateLeft()},type:"rotateLeft"}],this.zoomOutDisabled=!1,this.position=oe({},Ge),this.containerClick=new pe,this.closeClick=new pe,this.zoom=this.config.nzZoom??this._defaultNzZoom,this.scaleStep=this.config.nzScaleStep??this._defaultNzScaleStep,this.rotate=this.config.nzRotate??this._defaultNzRotate,this.updateZoomOutDisabled(),this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform()}ngOnInit(){this.ngZone.runOutsideAngular(()=>{Se(this.host.nativeElement,"click").pipe(P(this.destroy$)).subscribe(e=>{e.target===e.currentTarget&&this.maskClosable&&this.containerClick.observers.length&&this.ngZone.run(()=>this.containerClick.emit())}),Se(this.imagePreviewWrapper.nativeElement,"mousedown").pipe(P(this.destroy$)).subscribe(()=>{this.isDragging=!0})})}setImages(e,n){n&&(this.scaleStepMap=n),this.images=e,this.cdr.markForCheck()}switchTo(e){this.index=e,this.cdr.markForCheck()}next(){this.index<this.images.length-1&&(this.reset(),this.index++,this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform(),this.updateZoomOutDisabled(),this.cdr.markForCheck())}prev(){this.index>0&&(this.reset(),this.index--,this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform(),this.updateZoomOutDisabled(),this.cdr.markForCheck())}markForCheck(){this.cdr.markForCheck()}onClose(){this.closeClick.emit()}onZoomIn(){let e=this.scaleStepMap.get(this.images[this.index].src??this.images[this.index].srcset)??this.scaleStep;this.zoom+=e,this.updatePreviewImageTransform(),this.updateZoomOutDisabled(),this.position=oe({},Ge)}onZoomOut(){if(this.zoom>1){let e=this.scaleStepMap.get(this.images[this.index].src??this.images[this.index].srcset)??this.scaleStep;this.zoom-=e,this.updatePreviewImageTransform(),this.updateZoomOutDisabled(),this.position=oe({},Ge)}}onRotateRight(){this.rotate+=90,this.updatePreviewImageTransform()}onRotateLeft(){this.rotate-=90,this.updatePreviewImageTransform()}onSwitchLeft(e){e.preventDefault(),e.stopPropagation(),this.prev()}onSwitchRight(e){e.preventDefault(),e.stopPropagation(),this.next()}onAnimationStart(e){e.toState==="enter"?this.setEnterAnimationClass():e.toState==="leave"&&this.setLeaveAnimationClass(),this.animationStateChanged.emit(e)}onAnimationDone(e){e.toState==="enter"?this.setEnterAnimationClass():e.toState==="leave"&&this.setLeaveAnimationClass(),this.animationStateChanged.emit(e)}startLeaveAnimation(){this.animationState="leave",this.cdr.markForCheck()}onDragReleased(){this.isDragging=!1;let e=this.imageRef.nativeElement.offsetWidth*this.zoom,n=this.imageRef.nativeElement.offsetHeight*this.zoom,{left:o,top:p}=Jn(this.imageRef.nativeElement),{width:v,height:C}=ei(),M=this.rotate%180!==0,qe=Yn({width:M?n:e,height:M?e:n,left:o,top:p,clientWidth:v,clientHeight:C});(Ke(qe.x)||Ke(qe.y))&&(this.position=oe(oe({},this.position),qe))}sanitizerResourceUrl(e){return this.sanitizer.bypassSecurityTrustResourceUrl(e)}updatePreviewImageTransform(){this.previewImageTransform=`scale3d(${this.zoom}, ${this.zoom}, 1) rotate(${this.rotate}deg)`}updatePreviewImageWrapperTransform(){this.previewImageWrapperTransform=`translate3d(${this.position.x}px, ${this.position.y}px, 0)`}updateZoomOutDisabled(){this.zoomOutDisabled=this.zoom<=1}setEnterAnimationClass(){if(this.animationDisabled)return;let e=this.overlayRef.backdropElement;e&&(e.classList.add(Xe.enter),e.classList.add(Xe.enterActive))}setLeaveAnimationClass(){if(this.animationDisabled)return;let e=this.overlayRef.backdropElement;e&&(e.classList.add(Xe.leave),e.classList.add(Xe.leaveActive))}reset(){this.zoom=this.config.nzZoom??this._defaultNzZoom,this.scaleStep=this.config.nzScaleStep??this._defaultNzScaleStep,this.rotate=this.config.nzRotate??this._defaultNzRotate,this.position=oe({},Ge)}};i.\u0275fac=function(n){return new(n||i)(f(rt),f($e),f(He),f(Ae),f(we),f(Pe),f(Me),f(vt))},i.\u0275cmp=b({type:i,selectors:[["nz-image-preview"]],viewQuery:function(n,o){if(n&1&&(We(jn,5),We($n,7)),n&2){let p;Ue(p=Ze())&&(o.imageRef=p.first),Ue(p=Ze())&&(o.imagePreviewWrapper=p.first)}},hostAttrs:["tabindex","-1","role","document",1,"ant-image-preview-wrap"],hostVars:6,hostBindings:function(n,o){n&1&&lt("@fadeMotion.start",function(v){return o.onAnimationStart(v)})("@fadeMotion.done",function(v){return o.onAnimationDone(v)}),n&2&&(st("@.disabled",o.config.nzNoAnimation)("@fadeMotion",o.animationState),De("z-index",o.config.nzZIndex),be("ant-image-preview-moving",o.isDragging))},exportAs:["nzImagePreview"],standalone:!0,features:[ut([Me]),y],decls:11,vars:6,consts:[[1,"ant-image-preview"],["tabindex","0","aria-hidden","true",2,"width","0","height","0","overflow","hidden","outline","none"],[1,"ant-image-preview-content"],[1,"ant-image-preview-body"],[1,"ant-image-preview-operations"],["class","ant-image-preview-operations-operation",3,"ant-image-preview-operations-operation-disabled","click",4,"ngFor","ngForOf"],["cdkDrag","",1,"ant-image-preview-img-wrapper",3,"cdkDragFreeDragPosition","cdkDragReleased"],["imagePreviewWrapper",""],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"ant-image-preview-operations-operation",3,"click"],["nz-icon","","nzTheme","outline",1,"ant-image-preview-operations-icon",3,"nzType"],["cdkDragHandle","","class","ant-image-preview-img",3,"width","height","transform",4,"ngIf"],["cdkDragHandle","",1,"ant-image-preview-img"],["imgRef",""],[1,"ant-image-preview-switch-left",3,"click"],["nz-icon","","nzType","left","nzTheme","outline"],[1,"ant-image-preview-switch-right",3,"click"],["nz-icon","","nzType","right","nzTheme","outline"]],template:function(n,o){n&1&&(r(0,"div",0),d(1,"div",1),r(2,"div",2)(3,"div",3)(4,"ul",4),h(5,Hn,2,3,"li",5),a(),r(6,"div",6,7),z("cdkDragReleased",function(){return o.onDragReleased()}),h(8,Wn,2,1,"ng-container",8),a(),h(9,Zn,5,4,"ng-container",9),a()(),d(10,"div",1),a()),n&2&&(s(5),m("ngForOf",o.operations),s(1),De("transform",o.previewImageWrapperTransform),m("cdkDragFreeDragPosition",o.position),s(2),m("ngForOf",o.images),s(1),m("ngIf",o.images.length>1))},dependencies:[Te,Ve,fe,jt,$t,D],encapsulation:2,data:{animation:[bt]},changeDetection:0});let t=i;return t})(),et=class{constructor(i,l,e){this.previewInstance=i,this.config=l,this.overlayRef=e,this.destroy$=new ge,e.keydownEvents().pipe(je(n=>this.config.nzKeyboard&&(n.keyCode===27||n.keyCode===37||n.keyCode===39)&&!xt(n))).subscribe(n=>{n.preventDefault(),n.keyCode===27&&this.close(),n.keyCode===37&&this.prev(),n.keyCode===39&&this.next()}),e.detachments().subscribe(()=>{this.overlayRef.dispose()}),i.containerClick.pipe(Ne(1),P(this.destroy$)).subscribe(()=>{this.close()}),i.closeClick.pipe(Ne(1),P(this.destroy$)).subscribe(()=>{this.close()}),i.animationStateChanged.pipe(je(n=>n.phaseName==="done"&&n.toState==="leave"),Ne(1)).subscribe(()=>{this.dispose()})}switchTo(i){this.previewInstance.switchTo(i)}next(){this.previewInstance.next()}prev(){this.previewInstance.prev()}close(){this.previewInstance.startLeaveAnimation()}dispose(){this.destroy$.next(),this.overlayRef.dispose()}},un=(()=>{let i=class i{constructor(e,n,o,p){this.overlay=e,this.injector=n,this.nzConfigService=o,this.directionality=p}preview(e,n,o){return this.display(e,n,o)}display(e,n,o){let p=oe(oe({},new we),n??{}),v=this.createOverlay(p),C=this.attachPreviewComponent(v,p);C.setImages(e,o);let M=new et(C,p,v);return C.previewRef=M,M}attachPreviewComponent(e,n){let o=Fe.create({parent:this.injector,providers:[{provide:Pe,useValue:e},{provide:we,useValue:n}]}),p=new yt(pn,null,o);return e.attach(p).instance}createOverlay(e){let n=this.nzConfigService.getConfigForComponent(cn)||{},o=new Et({hasBackdrop:!0,scrollStrategy:this.overlay.scrollStrategies.block(),positionStrategy:this.overlay.position().global(),disposeOnNavigation:e.nzCloseOnNavigation??n.nzCloseOnNavigation??!0,backdropClass:Kn,direction:e.nzDirection||n.nzDirection||this.directionality.value});return this.overlay.create(o)}};i.\u0275fac=function(n){return new(n||i)(ve(wt),ve(Fe),ve(Ae),ve(Ye,8))},i.\u0275prov=nt({token:i,factory:i.\u0275fac});let t=i;return t})(),ii=(()=>{let i=class i{constructor(){this.nzScaleStep=null,this.images=[]}addImage(e){this.images.push(e)}};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=b({type:i,selectors:[["nz-image-group"]],inputs:{nzScaleStep:"nzScaleStep"},exportAs:["nzImageGroup"],standalone:!0,features:[y],ngContentSelectors:Qn,decls:1,vars:0,template:function(n,o){n&1&&(ct(),pt(0))},encapsulation:2,changeDetection:0});let t=i;return t})(),oi="image",dn=(()=>{let i=class i{get previewable(){return!this.nzDisablePreview&&this.status!=="error"}constructor(e,n,o,p,v,C,M){this.document=e,this.nzConfigService=n,this.elementRef=o,this.nzImageService=p,this.cdr=v,this.parentGroup=C,this.directionality=M,this._nzModuleName=oi,this.nzSrc="",this.nzSrcset="",this.nzDisablePreview=!1,this.nzFallback=null,this.nzPlaceholder=null,this.nzScaleStep=null,this.status="normal",this.backLoadDestroy$=new ge,this.destroy$=new ge}ngOnInit(){this.backLoad(),this.parentGroup&&this.parentGroup.addImage(this),this.directionality&&(this.directionality.change?.pipe(P(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.dir=this.directionality.value)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreview(){if(this.previewable)if(this.parentGroup){let e=this.parentGroup.images.filter(C=>C.previewable),n=e.map(C=>({src:C.nzSrc,srcset:C.nzSrcset})),o=e.findIndex(C=>this===C),p=new Map;e.forEach(C=>{p.set(C.nzSrc??C.nzSrcset,C.nzScaleStep??this.parentGroup.nzScaleStep??this.nzScaleStep??Je)}),this.nzImageService.preview(n,{nzDirection:this.dir},p).switchTo(o)}else{let e=[{src:this.nzSrc,srcset:this.nzSrcset}];this.nzImageService.preview(e,{nzDirection:this.dir,nzScaleStep:this.nzScaleStep??Je})}}getElement(){return this.elementRef}ngOnChanges(e){let{nzSrc:n}=e;n&&(this.getElement().nativeElement.src=n.currentValue,this.backLoad())}backLoad(){this.backLoadImage=this.document.createElement("img"),this.backLoadImage.src=this.nzSrc,this.backLoadImage.srcset=this.nzSrcset,this.status="loading",this.backLoadDestroy$.next(),this.backLoadDestroy$.complete(),this.backLoadDestroy$=new ge,this.backLoadImage.complete?(this.status="normal",this.getElement().nativeElement.src=this.nzSrc,this.getElement().nativeElement.srcset=this.nzSrcset):(this.nzPlaceholder?(this.getElement().nativeElement.src=this.nzPlaceholder,this.getElement().nativeElement.srcset=""):(this.getElement().nativeElement.src=this.nzSrc,this.getElement().nativeElement.srcset=this.nzSrcset),Se(this.backLoadImage,"load").pipe(P(this.backLoadDestroy$),P(this.destroy$)).subscribe(()=>{this.status="normal",this.getElement().nativeElement.src=this.nzSrc,this.getElement().nativeElement.srcset=this.nzSrcset}),Se(this.backLoadImage,"error").pipe(P(this.backLoadDestroy$),P(this.destroy$)).subscribe(()=>{this.status="error",this.nzFallback&&(this.getElement().nativeElement.src=this.nzFallback,this.getElement().nativeElement.srcset="")}))}};i.\u0275fac=function(n){return new(n||i)(f(zt),f(Ae),f($e),f(un),f(He),f(ii,8),f(Ye,8))},i.\u0275dir=it({type:i,selectors:[["img","nz-image",""]],hostBindings:function(n,o){n&1&&z("click",function(){return o.onPreview()})},inputs:{nzSrc:"nzSrc",nzSrcset:"nzSrcset",nzDisablePreview:"nzDisablePreview",nzFallback:"nzFallback",nzPlaceholder:"nzPlaceholder",nzScaleStep:"nzScaleStep"},exportAs:["nzImage"],standalone:!0,features:[ot]});let t=i;return _e([Ct(),xe()],t.prototype,"nzDisablePreview",void 0),_e([xe()],t.prototype,"nzFallback",void 0),_e([xe()],t.prototype,"nzPlaceholder",void 0),_e([xe()],t.prototype,"nzScaleStep",void 0),t})(),fn=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=ce({type:i}),i.\u0275inj=le({providers:[un],imports:[pn]});let t=i;return t})();function ai(t,i){if(t&1){let l=S();r(0,"nz-input-group",12)(1,"input",13),z("ngModelChange",function(n){g(l);let o=u();return _(o.queryName=n)}),a()()}if(t&2){let l=u(),e=A(3);m("nzAddOnAfter",e),s(1),m("ngModel",l.queryName)}}function mi(t,i){if(t&1){let l=S();r(0,"button",14),z("click",function(){g(l);let n=u();return _(n.search())}),c(1,"\u8DF3\u8F6C"),a()}}function si(t,i){if(t&1){let l=S();r(0,"button",15),z("click",function(){g(l);let n=u();return _(n.handleUpload())}),d(1,"i",16),c(2,"\u4E0A\u4F20 "),a()}}function li(t,i){if(t&1){let l=S();r(0,"button",15),z("click",function(){g(l);let n=u();return _(n.load())}),d(1,"i",17),c(2," \u5237\u65B0 "),a()}if(t&2){let l=u();s(1),m("nzSpin",l.loading)}}function ci(t,i){if(t&1){let l=S();r(0,"button",19),z("click",function(){g(l);let n=u(2);return _(n.handlePre())}),d(1,"span",20),c(2," \u8FD4\u56DE\u4E0A\u4E00\u7EA7\u76EE\u5F55 "),a()}}function pi(t,i){t&1&&(R(0),h(1,ci,3,0,"button",18),L())}function ui(t,i){if(t&1&&c(0),t&2){let l=i.$implicit;Ie("\u603B\u5171 ",l," \u6761")}}function di(t,i){t&1&&d(0,"img",29)}function fi(t,i){if(t&1&&d(0,"img",34),t&2){let l=u(2).$implicit,e=u();m("nzSrc",e.handleSrc(l.name))}}function zi(t,i){if(t&1){let l=S();r(0,"video",35),z("click",function(){g(l);let n=u(2).$implicit,o=u();return _(o.handleOpenLink(n.name))}),a()}if(t&2){let l=u(2).$implicit,e=u();m("src",e.handleSrc(l.name),Ce)}}function hi(t,i){if(t&1){let l=S();r(0,"img",35),z("click",function(){g(l);let n=u(2).$implicit,o=u();return _(o.handleOpenLink(n.name))}),a()}if(t&2){let l=u(2).$implicit,e=u();m("src","/assets/attach_icon/"+e.getMatched(l.mime)+".svg",Ce)}}function gi(t,i){if(t&1&&(r(0,"div",30),h(1,fi,1,1,"img",31)(2,zi,1,1,"video",32)(3,hi,1,1,"img",33),a()),t&2){let l=u().$implicit,e=u();m("ngSwitch",e.getMatched(l.mime)),s(1),m("ngSwitchCase","image"),s(1),m("ngSwitchCase","video")}}function _i(t,i){if(t&1){let l=S();r(0,"span")(1,"a",36),z("click",function(){g(l);let n=u().$implicit,o=u();return _(o.handleRedictTo(n.name))}),c(2),a()()}if(t&2){let l=u().$implicit;s(2),me(l.name)}}function Si(t,i){if(t&1&&c(0),t&2){let l=u().$implicit;me(l.name)}}function vi(t,i){if(t&1){let l=S();d(0,"nz-divider",26),r(1,"a",27),z("click",function(){g(l);let n=u().$implicit,o=u();return _(o.handleCopy(n.name))}),c(2," \u590D\u5236\u94FE\u63A5 "),a(),d(3,"nz-divider",26),r(4,"a",27),z("click",function(){g(l);let n=u().$implicit,o=u();return _(o.handleDownLoad(n.name))}),c(5," \u4E0B\u8F7D "),a()}}function Ci(t,i){if(t&1){let l=S();d(0,"nz-divider",26),r(1,"a",27),z("click",function(){g(l);let n=u().$implicit,o=u();return _(o.handleSelect(n.name))}),c(2," \u9009\u62E9"),a()}}function bi(t,i){if(t&1){let l=S();r(0,"tr")(1,"td"),h(2,di,1,0,"img",21)(3,gi,4,3,"ng-template",null,22,B),a(),r(5,"td"),h(6,_i,3,1,"span",23)(7,Si,1,1,"ng-template",null,24,B),a(),r(9,"td"),c(10),a(),r(11,"td"),c(12),dt(13,"date"),a(),r(14,"td")(15,"a",25),z("nzOnConfirm",function(){let o=g(l).$implicit,p=u();return _(p.delete(o.name))})("nzOnCancel",function(){g(l);let n=u();return _(n.cancel())}),c(16," \u5220\u9664 "),a(),d(17,"nz-divider",26),r(18,"a",27),z("click",function(){let o=g(l).$implicit,p=u();return _(p.handleRename(o.name))}),c(19," \u91CD\u547D\u540D "),a(),h(20,vi,6,0,"ng-template",28)(21,Ci,3,0,"ng-template",28),a()()}if(t&2){let l=i.$implicit,e=A(4),n=A(8),o=u();s(2),m("ngIf",l.folder)("ngIfElse",e),s(4),m("ngIf",l.folder)("ngIfElse",n),s(4),me(l.mime||"\u6587\u4EF6\u5939"),s(2),me(ft(13,8,l.time)),s(8),m("ngIf",!l.folder),s(1),m("ngIf",!l.folder&&o.fromIframe)}}var zn=(()=>{let i=class i{constructor(e,n,o,p){this.rs=e,this.modal=n,this.msg=o,this.viewContainerRef=p,this.loading=!1,this.inputValue="",this.queryName="",this.datum=[],this.total=1,this.pageSize=20,this.pageIndex=1,this.query={},this.fromIframe=!0,this.load()}load(){this.loading=!0,this.rs.get("attach/list",{}).subscribe(e=>{let{data:n,total:o}=e;this.datum=n||[],this.total=o||0}).add(()=>{this.loading=!1})}delete(e,n){this.rs.get(`attach/remove/${this.queryName}/${e}`).subscribe(o=>{this.msg.success("\u5220\u9664\u6210\u529F"),this.load()})}cancel(){}search(){this.query.keyword={},this.query.skip=0,this.datum=[],this.inputValue=this.queryName,this.load()}handleRedictTo(e){this.queryName=this.queryName?`${this.queryName}/${e}`:e,this.search()}handleUpload(){this.modal.create({nzTitle:"\u4E0A\u4F20\u6587\u4EF6",nzContent:rn,nzViewContainerRef:this.viewContainerRef,nzData:{inputValue:this.queryName},nzFooter:null,nzOnCancel:({isSuccess:e})=>{e&&this.load()}})}handleRename(e){let n=this.modal.create({nzTitle:"\u91CD\u547D\u540D",nzContent:on,nzData:{currentName:e},nzViewContainerRef:this.viewContainerRef,nzFooter:[{label:"\u53D6\u6D88",onClick:()=>n.destroy()},{label:"\u4FDD\u5B58",type:"primary",onClick:()=>{let o=n.getContentComponent();this.rs.post(`attach/rename/${this.queryName?this.queryName+"/":""}${e}`,{name:o.name}).subscribe(p=>{this.msg.success("\u4FDD\u5B58\u6210\u529F"),n.destroy(),this.load()})}}]})}handleSrc(e){return`/attach/${this.inputValue?`${this.inputValue}/`:""}${e}`}handleOpenLink(e){window.open(this.handleSrc(e))}getMatched(e){let n=e.match(/image|video|word|powerpoint|excel|text|zip|pdf|html|flash|exe|xml|psd/g);return n?n[0]:"unknown"}handleCopy(e){let n=this.handleSrc(e);this.msg.success("\u590D\u5236\u6210\u529F");let o=document.createElement("input");o.value=n,o.setAttribute("readonly",""),document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o)}handlePre(){let e=this.queryName.split("/");e.pop(),this.queryName=e.join("/"),this.search()}handleDownLoad(e){let n=document.createElement("a"),o=new MouseEvent("click");n.download=e,n.href=this.handleSrc(e),n.dispatchEvent(o)}handleSelect(e){let n=this.handleSrc(e);console.log("\u{1F680} ~ file: attachment.component.ts:145 ~ AttachmentComponent ~ handleSelect ~ url:",n),window.top?.postMessage(n)}};i.\u0275fac=function(n){return new(n||i)(f(T),f(Tt),f(F),f(mt))},i.\u0275cmp=b({type:i,selectors:[["app-setting-attach"]],standalone:!0,features:[y],decls:25,vars:9,consts:[["nzSearch","",3,"nzAddOnAfter",4,"nzSpaceItem"],["suffixButton",""],["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],[4,"ngIf"],["totalTemplate",""],["nzShowPagination","","nzShowSizeChanger","",3,"nzData","nzLoading","nzTotal","nzShowTotal","nzPageSize","nzPageIndex"],["basicTable",""],["nzColumnKey","pre"],["nzColumnKey","name"],["nzColumnKey","mime"],["nzColumnKey","time",3,"nzSortFn"],[4,"ngFor","ngForOf"],["nzSearch","",3,"nzAddOnAfter"],["type","text","nz-input","","placeholder","\u5F53\u524D\u6240\u5904\u6587\u4EF6\u5939",3,"ngModel","ngModelChange"],["nz-button","","nzType","primary","nzSearch","",3,"click"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","plus"],["nz-icon","","nzType","reload",3,"nzSpin"],["nz-button","",3,"click",4,"nzSpaceItem"],["nz-button","",3,"click"],["nz-icon","","nzType","rollback","nzTheme","outline"],["width","40px","src","/assets/fold.svg","alt","logo",4,"ngIf","ngIfElse"],["tpw",""],[4,"ngIf","ngIfElse"],["tpl",""],["nz-popconfirm","","nzPopconfirmTitle","\u786E\u5B9A\u5220\u9664?","nzPopconfirmPlacement","topLeft",3,"nzOnConfirm","nzOnCancel"],["nzType","vertical"],[3,"click"],[3,"ngIf"],["width","40px","src","/assets/fold.svg","alt","logo"],[3,"ngSwitch"],["nz-image","","width","50px",3,"nzSrc",4,"ngSwitchCase"],["width","50px",3,"src","click",4,"ngSwitchCase"],["width","50px",3,"src","click",4,"ngSwitchDefault"],["nz-image","","width","50px",3,"nzSrc"],["width","50px",3,"src","click"],["href","javascript:;",3,"click"]],template:function(n,o){if(n&1&&(r(0,"nz-space"),h(1,ai,2,2,"nz-input-group",0)(2,mi,2,0,"ng-template",null,1,B)(4,si,3,0,"button",2)(5,li,3,1,"button",2)(6,pi,2,0,"ng-container",3),a(),h(7,ui,1,1,"ng-template",null,4,B),r(9,"nz-table",5,6)(11,"thead")(12,"tr")(13,"th",7),c(14,"\u9884\u89C8"),a(),r(15,"th",8),c(16,"\u540D\u79F0"),a(),r(17,"th",9),c(18,"\u7C7B\u578B"),a(),r(19,"th",10),c(20,"\u65E5\u671F"),a(),r(21,"th"),c(22,"\u64CD\u4F5C"),a()()(),r(23,"tbody"),h(24,bi,22,10,"tr",11),a()()),n&2){let p=A(8),v=A(10);s(6),m("ngIf",o.inputValue),s(3),m("nzData",o.datum)("nzLoading",o.loading)("nzTotal",o.total)("nzShowTotal",p)("nzPageSize",o.pageSize)("nzPageIndex",o.pageIndex),s(10),m("nzSortFn",!0),s(5),m("ngForOf",v.data)}},dependencies:[fn,dn,Mt,kt,Re,It,I,Ft,Dt,ke,Te,D,ht,gt,_t,St,Ve,fe,Vt,qt,Bt,Rt,Pt,Lt,Gt,Ot,Xt,Be,Zt,Wt,w,x,E,ue,Ut,ze,N,Nt,At,k,J]});let t=i;return t})();var yi=[{path:"web",component:Qt},{path:"database",component:Kt},{path:"broker",component:Yt},{path:"mqtt",component:Jt},{path:"log",component:en},{path:"backup",component:tn},{path:"attach",component:zn}],hn=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=ce({type:i}),i.\u0275inj=le({imports:[Qe.forChild(yi),Qe]});let t=i;return t})();var Kr=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=ce({type:i}),i.\u0275inj=le({imports:[ke,hn,Re]});let t=i;return t})();export{Kr as SettingModule};
