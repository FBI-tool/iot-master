import{a as zi}from"./chunk-I5A6NSIN.js";import{a as ui,b as hi,c as fi,d as bi}from"./chunk-CXFVPRBG.js";import{a as gi}from"./chunk-YBS2C3O3.js";import{a as ai}from"./chunk-I24Z7XYZ.js";import{a as si}from"./chunk-OZXWHQAE.js";import"./chunk-2RC4YZJA.js";import"./chunk-B4M7IYJ2.js";import{c as ti,e as ei,f as ii,g as ni,h as oi,i as ri,j as Lt}from"./chunk-EXT7S62Z.js";import"./chunk-Y6Y75R7J.js";import{a as di,b as mi,c as pi}from"./chunk-BE4ZTW6G.js";import{a as dt,b as mt,c as li,d as pt,e as ut,f as ci}from"./chunk-IT2U3YUS.js";import{A as M,Ab as Ge,Ba as st,Ca as Rt,Cb as Qe,Db as Ye,E as Ee,Eb as qe,G as Ut,Ha as Tt,Ia as yt,Ib as Ze,Nb as Bt,Oa as Me,R as Kt,Rb as Ue,T as ke,Tb as H,U as Fe,Ua as Re,Ub as V,Vb as Ke,Wb as Je,a as Ie,ab as Pe,bb as Pt,c as At,cb as Oe,db as Be,e as et,eb as Le,f as it,fb as We,h as Mt,j as nt,jb as He,k as Ne,kb as Ve,l as we,lb as Ot,m as ot,n as L,o as rt,ob as $e,p as at,q as Zt,t as De,tb as W,vb as lt,wb as je,xb as ct,ya as Ae,yb as Xe,za as Ct}from"./chunk-FZUU2ZSO.js";import{A as xt,B as de,C as me,Ca as d,Da as p,Fa as It,Ga as x,Ha as gt,I as pe,Ka as vt,Kb as q,L as ue,La as l,Lb as _t,Ma as Nt,Mb as _e,Na as A,Nb as Ce,Ob as Te,Pb as ye,Q as $t,Qb as Yt,S as G,Sa as f,Sb as Se,Ta as s,Tb as Ft,Ua as c,Va as _,W as he,Wa as R,Xa as P,Z as bt,Za as S,_ as fe,ba as C,bb as b,ca as zt,da as Q,db as u,e as ht,eb as Xt,ec as xe,fa as jt,fb as wt,fc as J,ga as g,gb as ze,h as St,ha as v,hb as h,hc as B,ib as I,ic as tt,jb as Dt,k as le,kb as Et,kc as qt,l as ce,lb as T,mb as U,n as w,p as Vt,qb as ge,ra as be,rb as ve,sb as Gt,tb as kt,ub as D,vb as O,wb as K,x as ft,xb as E,ya as Y,yb as Qt}from"./chunk-Q2QJEMPV.js";var vi=(()=>{let n=class n{};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=C({type:n,selectors:[["app-product-edit-event"]],standalone:!0,features:[T],decls:2,vars:0,template:function(e,i){e&1&&(s(0,"p"),h(1,"product-edit-event works!"),c())}});let o=n;return o})();var _i=(()=>{let n=class n{};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=C({type:n,selectors:[["app-product-edit-action"]],standalone:!0,features:[T],decls:2,vars:0,template:function(e,i){e&1&&(s(0,"p"),h(1,"product-edit-action works!"),c())}});let o=n;return o})();function ji(o,n){if(o&1&&(R(0),_(1,"span",1),P()),o&2){let a=n.$implicit;d(1),l("nzType",a)}}function Xi(o,n){if(o&1&&(R(0),h(1),P()),o&2){let a=u().$implicit;d(1),Dt(" ",a.tab.label," ")}}var Gi=()=>({visible:!1});function Qi(o,n){if(o&1){let a=S();s(0,"li",8),b("click",function(){let i=g(a).$implicit,r=u(2);return v(r.onSelect(i))})("contextmenu",function(e){let r=g(a).$implicit,m=u(2);return v(m.onContextmenu(r,e))}),f(1,Xi,2,1,"ng-container",9),c()}if(o&2){let a=n.$implicit;A("ant-tabs-dropdown-menu-item-disabled",a.disabled),l("nzSelected",a.active)("nzDisabled",a.disabled),d(1),l("nzStringTemplateOutlet",a.tab.label)("nzStringTemplateOutletContext",U(6,Gi))}}function Yi(o,n){if(o&1&&(s(0,"ul",6),f(1,Qi,2,7,"li",7),c()),o&2){let a=u();d(1),l("ngForOf",a.items)}}function qi(o,n){if(o&1){let a=S();s(0,"button",10),b("click",function(){g(a);let e=u();return v(e.addClicked.emit())}),c()}if(o&2){let a=u();l("addIcon",a.addIcon)}}var Zi=()=>({minWidth:"46px"}),Ui=["navWarp"],Ki=["navList"];function Ji(o,n){if(o&1){let a=S();s(0,"button",8),b("click",function(){g(a);let e=u();return v(e.addClicked.emit())}),c()}if(o&2){let a=u();l("addIcon",a.addIcon),vt("tabindex",-1)}}function tn(o,n){}function en(o,n){if(o&1&&(s(0,"div",9),f(1,tn,0,0,"ng-template",10),c()),o&2){let a=u();d(1),l("ngTemplateOutlet",a.extraTemplate)}}var nn=["*"],on=["nz-tab-body",""];function rn(o,n){}function an(o,n){if(o&1&&(R(0),f(1,rn,0,0,"ng-template",1),P()),o&2){let a=u();d(1),l("ngTemplateOutlet",a.content)}}function sn(o,n){if(o&1&&(R(0),_(1,"span",1),P()),o&2){let a=n.$implicit;d(1),l("nzType",a)}}var ln=["contentTemplate"];function cn(o,n){o&1&&wt(0)}function dn(o,n){o&1&&wt(0,1)}var mn=[[["","nz-tab-link",""]],"*"],pn=["[nz-tab-link]","*"];function un(o,n){if(o&1&&(R(0),h(1),P()),o&2){let a=u().$implicit;d(1),I(a.label)}}function hn(o,n){if(o&1){let a=S();s(0,"button",10),b("click",function(e){g(a);let i=u().index,r=u(2);return v(r.onClose(i,e))}),c()}if(o&2){let a=u().$implicit;l("closeIcon",a.nzCloseIcon)}}var fn=()=>({visible:!0});function bn(o,n){if(o&1){let a=S();s(0,"div",6),b("click",function(e){let i=g(a),r=i.$implicit,m=i.index,z=u(2);return v(z.clickNavItem(r,m,e))})("contextmenu",function(e){let r=g(a).$implicit,m=u(2);return v(m.contextmenuNavItem(r,e))}),s(1,"button",7),f(2,un,2,1,"ng-container",8)(3,hn,1,1,"button",9),c()()}if(o&2){let a=n.$implicit,t=n.index,e=u(2);Nt("margin-right",e.position==="horizontal"?e.nzTabBarGutter:null,"px")("margin-bottom",e.position==="vertical"?e.nzTabBarGutter:null,"px"),A("ant-tabs-tab-active",e.nzSelectedIndex===t)("ant-tabs-tab-disabled",a.nzDisabled),d(1),l("id",e.getTabContentId(t))("disabled",a.nzDisabled)("tab",a)("active",e.nzSelectedIndex===t),vt("tabIndex",e.getTabIndex(a,t))("aria-disabled",a.nzDisabled)("aria-selected",e.nzSelectedIndex===t&&!e.nzHideAll)("aria-controls",e.getTabContentId(t)),d(1),l("nzStringTemplateOutlet",a.label)("nzStringTemplateOutletContext",U(19,fn)),d(1),l("ngIf",a.nzClosable&&e.closable&&!a.nzDisabled)}}function zn(o,n){if(o&1){let a=S();s(0,"nz-tabs-nav",4),b("tabScroll",function(e){g(a);let i=u();return v(i.nzTabListScroll.emit(e))})("selectFocusedIndex",function(e){g(a);let i=u();return v(i.setSelectedIndex(e))})("addClicked",function(){g(a);let e=u();return v(e.onAdd())}),f(1,bn,4,20,"div",5),c()}if(o&2){let a=u();l("ngStyle",a.nzTabBarStyle)("selectedIndex",a.nzSelectedIndex||0)("inkBarAnimated",a.inkBarAnimated)("addable",a.addable)("addIcon",a.nzAddIcon)("hideBar",a.nzHideAll)("position",a.position)("extraTemplate",a.nzTabBarExtraContent),d(1),l("ngForOf",a.tabs)}}function gn(o,n){if(o&1&&_(0,"div",11),o&2){let a=n.$implicit,t=n.index,e=u();l("id",e.getTabContentId(t))("active",e.nzSelectedIndex===t&&!e.nzHideAll)("content",a.content)("forceRender",a.nzForceRender)("tabPaneAnimated",e.tabPaneAnimated),vt("aria-labelledby",e.getTabContentId(t))}}var Jt=(()=>{let n=class n{constructor(t){this.elementRef=t,this.addIcon="plus",this.element=this.elementRef.nativeElement}getElementWidth(){return this.element?.offsetWidth||0}getElementHeight(){return this.element?.offsetHeight||0}};n.\u0275fac=function(e){return new(e||n)(p(Y))},n.\u0275cmp=C({type:n,selectors:[["nz-tab-add-button"],["button","nz-tab-add-button",""]],hostAttrs:["aria-label","Add tab","type","button",1,"ant-tabs-nav-add"],inputs:{addIcon:"addIcon"},standalone:!0,features:[T],decls:1,vars:1,consts:[[4,"nzStringTemplateOutlet"],["nz-icon","","nzTheme","outline",3,"nzType"]],template:function(e,i){e&1&&f(0,ji,2,1,"ng-container",0),e&2&&l("nzStringTemplateOutlet",i.addIcon)},dependencies:[yt,Tt,Rt,st],encapsulation:2});let o=n;return o})(),Ci=(()=>{let n=class n{get _animated(){return this.animationMode!=="NoopAnimations"&&this.animated}constructor(t,e,i){this.elementRef=t,this.ngZone=e,this.animationMode=i,this.position="horizontal",this.animated=!0}alignToElement(t){this.ngZone.runOutsideAngular(()=>{Ut(()=>this.setStyles(t))})}setStyles(t){let e=this.elementRef.nativeElement;this.position==="horizontal"?(e.style.top="",e.style.height="",e.style.left=this.getLeftPosition(t),e.style.width=this.getElementWidth(t)):(e.style.left="",e.style.width="",e.style.top=this.getTopPosition(t),e.style.height=this.getElementHeight(t))}getLeftPosition(t){return t?`${t.offsetLeft||0}px`:"0"}getElementWidth(t){return t?`${t.offsetWidth||0}px`:"0"}getTopPosition(t){return t?`${t.offsetTop||0}px`:"0"}getElementHeight(t){return t?`${t.offsetHeight||0}px`:"0"}};n.\u0275fac=function(e){return new(e||n)(p(Y),p(gt),p(be,8))},n.\u0275dir=Q({type:n,selectors:[["nz-tabs-ink-bar"],["","nz-tabs-ink-bar",""]],hostAttrs:[1,"ant-tabs-ink-bar"],hostVars:2,hostBindings:function(e,i){e&2&&A("ant-tabs-ink-bar-animated",i._animated)},inputs:{position:"position",animated:"animated"},standalone:!0});let o=n;return o})(),Ni=(()=>{let n=class n{constructor(t){this.elementRef=t,this.disabled=!1,this.active=!1,this.el=t.nativeElement,this.parentElement=this.el.parentElement}focus(){this.el.focus()}get width(){return this.parentElement.offsetWidth}get height(){return this.parentElement.offsetHeight}get left(){return this.parentElement.offsetLeft}get top(){return this.parentElement.offsetTop}};n.\u0275fac=function(e){return new(e||n)(p(Y))},n.\u0275dir=Q({type:n,selectors:[["","nzTabNavItem",""]],inputs:{disabled:"disabled",tab:"tab",active:"active"},standalone:!0});let o=n;return o})(),Ti=(()=>{let n=class n{constructor(t,e){this.cdr=t,this.elementRef=e,this.items=[],this.addable=!1,this.addIcon="plus",this.addClicked=new x,this.selected=new x,this.closeAnimationWaitTimeoutId=-1,this.menuOpened=!1,this.element=this.elementRef.nativeElement}onSelect(t){t.disabled||(t.tab.nzClick.emit(),this.selected.emit(t))}onContextmenu(t,e){t.disabled||t.tab.nzContextmenu.emit(e)}showItems(){clearTimeout(this.closeAnimationWaitTimeoutId),this.menuOpened=!0,this.cdr.markForCheck()}menuVisChange(t){t||(this.closeAnimationWaitTimeoutId=setTimeout(()=>{this.menuOpened=!1,this.cdr.markForCheck()},150))}getElementWidth(){return this.element?.offsetWidth||0}getElementHeight(){return this.element?.offsetHeight||0}ngOnDestroy(){clearTimeout(this.closeAnimationWaitTimeoutId)}};n.\u0275fac=function(e){return new(e||n)(p(It),p(Y))},n.\u0275cmp=C({type:n,selectors:[["nz-tab-nav-operation"]],hostAttrs:[1,"ant-tabs-nav-operations"],hostVars:2,hostBindings:function(e,i){e&2&&A("ant-tabs-nav-operations-hidden",i.items.length===0)},inputs:{items:"items",addable:"addable",addIcon:"addIcon"},outputs:{addClicked:"addClicked",selected:"selected"},exportAs:["nzTabNavOperation"],standalone:!0,features:[T],decls:7,vars:6,consts:[["nz-dropdown","","type","button","tabindex","-1","aria-hidden","true","nzOverlayClassName","nz-tabs-dropdown",1,"ant-tabs-nav-more",3,"nzDropdownMenu","nzOverlayStyle","nzMatchWidthElement","nzVisibleChange","mouseenter"],["dropdownTrigger","nzDropdown"],["nz-icon","","nzType","ellipsis"],["menu","nzDropdownMenu"],["nz-menu","",4,"ngIf"],["nz-tab-add-button","",3,"addIcon","click",4,"ngIf"],["nz-menu",""],["nz-menu-item","","class","ant-tabs-dropdown-menu-item",3,"ant-tabs-dropdown-menu-item-disabled","nzSelected","nzDisabled","click","contextmenu",4,"ngFor","ngForOf"],["nz-menu-item","",1,"ant-tabs-dropdown-menu-item",3,"nzSelected","nzDisabled","click","contextmenu"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],["nz-tab-add-button","",3,"addIcon","click"]],template:function(e,i){if(e&1&&(s(0,"button",0,1),b("nzVisibleChange",function(m){return i.menuVisChange(m)})("mouseenter",function(){return i.showItems()}),_(2,"span",2),c(),s(3,"nz-dropdown-menu",null,3),f(5,Yi,2,1,"ul",4),c(),f(6,qi,1,1,"button",5)),e&2){let r=ze(4);l("nzDropdownMenu",r)("nzOverlayStyle",U(5,Zi))("nzMatchWidthElement",null),d(5),l("ngIf",i.menuOpened),d(1),l("ngIf",i.addable)}},dependencies:[Rt,st,_t,q,yt,Tt,Jt,qe,Qe,Ge,Xe,Ye],encapsulation:2,changeDetection:0});let o=n;return o})(),vn=.1,yi=.01,Wt=20,Si=.995**Wt,_n=(()=>{let n=class n{constructor(t,e){this.ngZone=t,this.elementRef=e,this.lastWheelDirection=null,this.lastWheelTimestamp=0,this.lastTimestamp=0,this.lastTimeDiff=0,this.lastMixedWheel=0,this.lastWheelPrevent=!1,this.touchPosition=null,this.lastOffset=null,this.motion=-1,this.unsubscribe=()=>{},this.offsetChange=new x,this.tabScroll=new x,this.onTouchEnd=i=>{if(!this.touchPosition)return;let r=this.lastOffset,m=this.lastTimeDiff;if(this.lastOffset=this.touchPosition=null,r){let z=r.x/m,y=r.y/m,k=Math.abs(z),j=Math.abs(y);if(Math.max(k,j)<vn)return;let F=z,X=y;this.motion=window.setInterval(()=>{if(Math.abs(F)<yi&&Math.abs(X)<yi){window.clearInterval(this.motion);return}F*=Si,X*=Si,this.onOffset(F*Wt,X*Wt,i)},Wt)}},this.onTouchMove=i=>{if(!this.touchPosition)return;i.preventDefault();let{screenX:r,screenY:m}=i.touches[0],z=r-this.touchPosition.x,y=m-this.touchPosition.y;this.onOffset(z,y,i);let k=Date.now();this.lastTimeDiff=k-this.lastTimestamp,this.lastTimestamp=k,this.lastOffset={x:z,y},this.touchPosition={x:r,y:m}},this.onTouchStart=i=>{let{screenX:r,screenY:m}=i.touches[0];this.touchPosition={x:r,y:m},window.clearInterval(this.motion)},this.onWheel=i=>{let{deltaX:r,deltaY:m}=i,z,y=Math.abs(r),k=Math.abs(m);y===k?z=this.lastWheelDirection==="x"?r:m:y>k?(z=r,this.lastWheelDirection="x"):(z=m,this.lastWheelDirection="y");let j=Date.now(),F=Math.abs(z);(j-this.lastWheelTimestamp>100||F-this.lastMixedWheel>10)&&(this.lastWheelPrevent=!1),this.onOffset(-z,-z,i),(i.defaultPrevented||this.lastWheelPrevent)&&(this.lastWheelPrevent=!0),this.lastWheelTimestamp=j,this.lastMixedWheel=F}}ngOnInit(){this.unsubscribe=this.ngZone.runOutsideAngular(()=>{let t=this.elementRef.nativeElement,e=ft(t,"wheel"),i=ft(t,"touchstart"),r=ft(t,"touchmove"),m=ft(t,"touchend"),z=new ht;return z.add(this.subscribeWrap("wheel",e,this.onWheel)),z.add(this.subscribeWrap("touchstart",i,this.onTouchStart)),z.add(this.subscribeWrap("touchmove",r,this.onTouchMove)),z.add(this.subscribeWrap("touchend",m,this.onTouchEnd)),()=>{z.unsubscribe()}})}subscribeWrap(t,e,i){return e.subscribe(r=>{this.tabScroll.emit({type:t,event:r}),r.defaultPrevented||i(r)})}onOffset(t,e,i){this.ngZone.run(()=>{this.offsetChange.emit({x:t,y:e,event:i})})}ngOnDestroy(){this.unsubscribe()}};n.\u0275fac=function(e){return new(e||n)(p(gt),p(Y))},n.\u0275dir=Q({type:n,selectors:[["","nzTabScrollList",""]],outputs:{offsetChange:"offsetChange",tabScroll:"tabScroll"},standalone:!0});let o=n;return o})(),Cn=typeof requestAnimationFrame<"u"?ce:le,xi=150,Ii=(()=>{let n=class n{get selectedIndex(){return this._selectedIndex}set selectedIndex(t){let e=Zt(t);this._selectedIndex!==e&&(this._selectedIndex=t,this.selectedIndexChanged=!0,this.keyManager&&this.keyManager.updateActiveItem(t))}get focusIndex(){return this.keyManager?this.keyManager.activeItemIndex:0}set focusIndex(t){!this.isValidIndex(t)||this.focusIndex===t||!this.keyManager||this.keyManager.setActiveItem(t)}get showAddButton(){return this.hiddenItems.length===0&&this.addable}constructor(t,e,i,r,m){this.cdr=t,this.ngZone=e,this.viewportRuler=i,this.nzResizeObserver=r,this.dir=m,this.indexFocused=new x,this.selectFocusedIndex=new x,this.addClicked=new x,this.tabScroll=new x,this.position="horizontal",this.addable=!1,this.hideBar=!1,this.addIcon="plus",this.inkBarAnimated=!0,this.translate=null,this.transformX=0,this.transformY=0,this.pingLeft=!1,this.pingRight=!1,this.pingTop=!1,this.pingBottom=!1,this.hiddenItems=[],this.destroy$=new St,this._selectedIndex=0,this.wrapperWidth=0,this.wrapperHeight=0,this.scrollListWidth=0,this.scrollListHeight=0,this.operationWidth=0,this.operationHeight=0,this.addButtonWidth=0,this.addButtonHeight=0,this.selectedIndexChanged=!1,this.lockAnimationTimeoutId=-1,this.cssTransformTimeWaitingId=-1}ngAfterViewInit(){let t=this.dir?this.dir.change.asObservable():Vt(null),e=this.viewportRuler.change(150),i=()=>{this.updateScrollListPosition(),this.alignInkBarToSelectedTab()};this.keyManager=new We(this.items).withHorizontalOrientation(this.getLayoutDirection()).withWrap(),this.keyManager.updateActiveItem(this.selectedIndex),Ut(i),xt(this.nzResizeObserver.observe(this.navWarpRef),this.nzResizeObserver.observe(this.navListRef)).pipe(G(this.destroy$),me(16,Cn)).subscribe(()=>{i()}),xt(t,e,this.items.changes).pipe(G(this.destroy$)).subscribe(()=>{Promise.resolve().then(i),this.keyManager.withHorizontalOrientation(this.getLayoutDirection())}),this.keyManager.change.pipe(G(this.destroy$)).subscribe(r=>{this.indexFocused.emit(r),this.setTabFocus(r),this.scrollToTab(this.keyManager.activeItem)})}ngAfterContentChecked(){this.selectedIndexChanged&&(this.updateScrollListPosition(),this.alignInkBarToSelectedTab(),this.selectedIndexChanged=!1,this.cdr.markForCheck())}ngOnDestroy(){clearTimeout(this.lockAnimationTimeoutId),clearTimeout(this.cssTransformTimeWaitingId),this.destroy$.next(),this.destroy$.complete()}onSelectedFromMenu(t){let e=this.items.toArray().findIndex(i=>i===t);e!==-1&&(this.keyManager.updateActiveItem(e),this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this.scrollToTab(t)))}onOffsetChange(t){if(this.position==="horizontal"){if(this.lockAnimationTimeoutId===-1&&(this.transformX>=0&&t.x>0||this.transformX<=this.wrapperWidth-this.scrollListWidth&&t.x<0))return;t.event.preventDefault(),this.transformX=this.clampTransformX(this.transformX+t.x),this.setTransform(this.transformX,0)}else{if(this.lockAnimationTimeoutId===-1&&(this.transformY>=0&&t.y>0||this.transformY<=this.wrapperHeight-this.scrollListHeight&&t.y<0))return;t.event.preventDefault(),this.transformY=this.clampTransformY(this.transformY+t.y),this.setTransform(0,this.transformY)}this.lockAnimation(),this.setVisibleRange(),this.setPingStatus()}handleKeydown(t){let e=this.navWarpRef.nativeElement.contains(t.target);if(!(Re(t)||!e))switch(t.keyCode){case 37:case 38:case 39:case 40:this.lockAnimation(),this.keyManager.onKeydown(t);break;case 13:case 32:this.focusIndex!==this.selectedIndex&&this.selectFocusedIndex.emit(this.focusIndex);break;default:this.keyManager.onKeydown(t)}}isValidIndex(t){if(!this.items)return!0;let e=this.items?this.items.toArray()[t]:null;return!!e&&!e.disabled}scrollToTab(t){if(!this.items.find(i=>i===t))return;let e=this.items.toArray();if(this.position==="horizontal"){let i=this.transformX;if(this.getLayoutDirection()==="rtl"){let r=e[0].left+e[0].width-t.left-t.width;r<this.transformX?i=r:r+t.width>this.transformX+this.wrapperWidth&&(i=r+t.width-this.wrapperWidth)}else t.left<-this.transformX?i=-t.left:t.left+t.width>-this.transformX+this.wrapperWidth&&(i=-(t.left+t.width-this.wrapperWidth));this.transformX=i,this.transformY=0,this.setTransform(i,0)}else{let i=this.transformY;t.top<-this.transformY?i=-t.top:t.top+t.height>-this.transformY+this.wrapperHeight&&(i=-(t.top+t.height-this.wrapperHeight)),this.transformY=i,this.transformX=0,this.setTransform(0,i)}clearTimeout(this.cssTransformTimeWaitingId),this.cssTransformTimeWaitingId=setTimeout(()=>{this.setVisibleRange()},xi)}lockAnimation(){this.lockAnimationTimeoutId===-1&&this.ngZone.runOutsideAngular(()=>{this.navListRef.nativeElement.style.transition="none",this.lockAnimationTimeoutId=setTimeout(()=>{this.navListRef.nativeElement.style.transition="",this.lockAnimationTimeoutId=-1},xi)})}setTransform(t,e){this.navListRef.nativeElement.style.transform=`translate(${t}px, ${e}px)`}clampTransformX(t){let e=this.wrapperWidth-this.scrollListWidth;return this.getLayoutDirection()==="rtl"?Math.max(Math.min(e,t),0):Math.min(Math.max(e,t),0)}clampTransformY(t){return Math.min(Math.max(this.wrapperHeight-this.scrollListHeight,t),0)}updateScrollListPosition(){this.resetSizes(),this.transformX=this.clampTransformX(this.transformX),this.transformY=this.clampTransformY(this.transformY),this.setVisibleRange(),this.setPingStatus(),this.keyManager&&(this.keyManager.updateActiveItem(this.keyManager.activeItemIndex),this.keyManager.activeItem&&this.scrollToTab(this.keyManager.activeItem))}resetSizes(){this.addButtonWidth=this.addBtnRef?this.addBtnRef.getElementWidth():0,this.addButtonHeight=this.addBtnRef?this.addBtnRef.getElementHeight():0,this.operationWidth=this.operationRef.getElementWidth(),this.operationHeight=this.operationRef.getElementHeight(),this.wrapperWidth=this.navWarpRef.nativeElement.offsetWidth||0,this.wrapperHeight=this.navWarpRef.nativeElement.offsetHeight||0,this.scrollListHeight=this.navListRef.nativeElement.offsetHeight||0,this.scrollListWidth=this.navListRef.nativeElement.offsetWidth||0}alignInkBarToSelectedTab(){let t=this.items&&this.items.length?this.items.toArray()[this.selectedIndex]:null,e=t?t.elementRef.nativeElement:null;e&&this.inkBar.alignToElement(e.parentElement)}setPingStatus(){let t={top:!1,right:!1,bottom:!1,left:!1},e=this.navWarpRef.nativeElement;this.position==="horizontal"?this.getLayoutDirection()==="rtl"?(t.right=this.transformX>0,t.left=this.transformX+this.wrapperWidth<this.scrollListWidth):(t.left=this.transformX<0,t.right=-this.transformX+this.wrapperWidth<this.scrollListWidth):(t.top=this.transformY<0,t.bottom=-this.transformY+this.wrapperHeight<this.scrollListHeight),Object.keys(t).forEach(i=>{let r=`ant-tabs-nav-wrap-ping-${i}`;t[i]?e.classList.add(r):e.classList.remove(r)})}setVisibleRange(){let t,e,i,r,m,z,y=this.items.toArray(),k={width:0,height:0,left:0,top:0,right:0},j=N=>{let Z,Ht=y[N]||k;return e==="right"?Z=y[0].left+y[0].width-y[N].left-y[N].width:Z=Ht[e],Z};this.position==="horizontal"?(t="width",r=this.wrapperWidth,m=this.scrollListWidth-(this.hiddenItems.length?this.operationWidth:0),z=this.addButtonWidth,i=Math.abs(this.transformX),this.getLayoutDirection()==="rtl"?(e="right",this.pingRight=this.transformX>0,this.pingLeft=this.transformX+this.wrapperWidth<this.scrollListWidth):(this.pingLeft=this.transformX<0,this.pingRight=-this.transformX+this.wrapperWidth<this.scrollListWidth,e="left")):(t="height",r=this.wrapperHeight,m=this.scrollListHeight-(this.hiddenItems.length?this.operationHeight:0),z=this.addButtonHeight,e="top",i=-this.transformY,this.pingTop=this.transformY<0,this.pingBottom=-this.transformY+this.wrapperHeight<this.scrollListHeight);let F=r;if(m+z>r&&(F=r-z),!y.length){this.hiddenItems=[],this.cdr.markForCheck();return}let X=y.length,ae=X;for(let N=0;N<X;N+=1){let Z=j(N),Ht=y[N]||k;if(Z+Ht[t]>i+F){ae=N-1;break}}let se=0;for(let N=X-1;N>=0;N-=1)if(j(N)<i){se=N+1;break}let Pi=y.slice(0,se),Oi=y.slice(ae+1);this.hiddenItems=[...Pi,...Oi],this.cdr.markForCheck()}getLayoutDirection(){return this.dir&&this.dir.value==="rtl"?"rtl":"ltr"}setTabFocus(t){}ngOnChanges(t){let{position:e}=t;e&&!e.isFirstChange()&&(this.alignInkBarToSelectedTab(),this.lockAnimation(),this.updateScrollListPosition())}};n.\u0275fac=function(e){return new(e||n)(p(It),p(gt),p(Me),p(Je),p(Kt,8))},n.\u0275cmp=C({type:n,selectors:[["nz-tabs-nav"]],contentQueries:function(e,i,r){if(e&1&&K(r,Ni,5),e&2){let m;D(m=E())&&(i.items=m)}},viewQuery:function(e,i){if(e&1&&(O(Ui,7),O(Ki,7),O(Ti,7),O(Jt,5),O(Ci,7)),e&2){let r;D(r=E())&&(i.navWarpRef=r.first),D(r=E())&&(i.navListRef=r.first),D(r=E())&&(i.operationRef=r.first),D(r=E())&&(i.addBtnRef=r.first),D(r=E())&&(i.inkBar=r.first)}},hostAttrs:[1,"ant-tabs-nav"],hostBindings:function(e,i){e&1&&b("keydown",function(m){return i.handleKeydown(m)})},inputs:{position:"position",addable:"addable",hideBar:"hideBar",addIcon:"addIcon",inkBarAnimated:"inkBarAnimated",extraTemplate:"extraTemplate",selectedIndex:"selectedIndex"},outputs:{indexFocused:"indexFocused",selectFocusedIndex:"selectFocusedIndex",addClicked:"addClicked",tabScroll:"tabScroll"},exportAs:["nzTabsNav"],standalone:!0,features:[jt,T],ngContentSelectors:nn,decls:9,vars:16,consts:[[1,"ant-tabs-nav-wrap"],["navWarp",""],["nzTabScrollList","","role","tablist",1,"ant-tabs-nav-list",3,"offsetChange","tabScroll"],["navList",""],["role","tab","nz-tab-add-button","",3,"addIcon","click",4,"ngIf"],["nz-tabs-ink-bar","",3,"hidden","position","animated"],[3,"addIcon","addable","items","addClicked","selected"],["class","ant-tabs-extra-content",4,"ngIf"],["role","tab","nz-tab-add-button","",3,"addIcon","click"],[1,"ant-tabs-extra-content"],[3,"ngTemplateOutlet"]],template:function(e,i){e&1&&(Xt(),s(0,"div",0,1)(2,"div",2,3),b("offsetChange",function(m){return i.onOffsetChange(m)})("tabScroll",function(m){return i.tabScroll.emit(m)}),wt(4),f(5,Ji,1,2,"button",4),_(6,"div",5),c()(),s(7,"nz-tab-nav-operation",6),b("addClicked",function(){return i.addClicked.emit()})("selected",function(m){return i.onSelectedFromMenu(m)}),c(),f(8,en,2,1,"div",7)),e&2&&(A("ant-tabs-nav-wrap-ping-left",i.pingLeft)("ant-tabs-nav-wrap-ping-right",i.pingRight)("ant-tabs-nav-wrap-ping-top",i.pingTop)("ant-tabs-nav-wrap-ping-bottom",i.pingBottom),d(5),l("ngIf",i.showAddButton),d(1),l("hidden",i.hideBar)("position",i.position)("animated",i.inkBarAnimated),d(1),l("addIcon",i.addIcon)("addable",i.addable)("items",i.hiddenItems),d(1),l("ngIf",i.extraTemplate))},dependencies:[_n,_t,Jt,Ci,Ti,Yt],encapsulation:2,changeDetection:0});let o=n;return o})(),Tn=(()=>{let n=class n{constructor(){this.content=null,this.active=!1,this.tabPaneAnimated=!0,this.forceRender=!1}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=C({type:n,selectors:[["","nz-tab-body",""]],hostAttrs:[1,"ant-tabs-tabpane"],hostVars:12,hostBindings:function(e,i){e&2&&(vt("tabindex",i.active?0:-1)("aria-hidden",!i.active),Nt("visibility",i.tabPaneAnimated?i.active?null:"hidden":null)("height",i.tabPaneAnimated?i.active?null:0:null)("overflow-y",i.tabPaneAnimated?i.active?null:"none":null)("display",i.tabPaneAnimated||i.active?null:"none"),A("ant-tabs-tabpane-active",i.active))},inputs:{content:"content",active:"active",tabPaneAnimated:"tabPaneAnimated",forceRender:"forceRender"},exportAs:["nzTabBody"],standalone:!0,features:[T],attrs:on,decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngTemplateOutlet"]],template:function(e,i){e&1&&f(0,an,2,1,"ng-container",0),e&2&&l("ngIf",i.active||i.forceRender)},dependencies:[_t,Yt],encapsulation:2,changeDetection:0});let o=n;return o})(),yn=(()=>{let n=class n{constructor(){this.closeIcon="close"}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=C({type:n,selectors:[["nz-tab-close-button"],["button","nz-tab-close-button",""]],hostAttrs:["aria-label","Close tab","type","button",1,"ant-tabs-tab-remove"],inputs:{closeIcon:"closeIcon"},standalone:!0,features:[T],decls:1,vars:1,consts:[[4,"nzStringTemplateOutlet"],["nz-icon","","nzTheme","outline",3,"nzType"]],template:function(e,i){e&1&&f(0,sn,2,1,"ng-container",0),e&2&&l("nzStringTemplateOutlet",i.closeIcon)},dependencies:[yt,Tt,Rt,st],encapsulation:2});let o=n;return o})(),Sn=(()=>{let n=class n{constructor(t){this.templateRef=t}};n.\u0275fac=function(e){return new(e||n)(p(kt,1))},n.\u0275dir=Q({type:n,selectors:[["ng-template","nzTabLink",""]],exportAs:["nzTabLinkTemplate"],standalone:!0});let o=n;return o})(),xn=(()=>{let n=class n{constructor(t,e){this.elementRef=t,this.routerLink=e}};n.\u0275fac=function(e){return new(e||n)(p(Y),p(tt,10))},n.\u0275dir=Q({type:n,selectors:[["a","nz-tab-link",""]],exportAs:["nzTabLink"],standalone:!0});let o=n;return o})(),ie=(()=>{let n=class n{};n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Q({type:n,selectors:[["","nz-tab",""]],exportAs:["nzTab"],standalone:!0});let o=n;return o})(),wi=new fe("NZ_TAB_SET"),ne=(()=>{let n=class n{get content(){return this.template||this.contentTemplate}get label(){return this.nzTitle||this.nzTabLinkTemplateDirective?.templateRef}constructor(t){this.closestTabSet=t,this.nzTitle="",this.nzClosable=!1,this.nzCloseIcon="close",this.nzDisabled=!1,this.nzForceRender=!1,this.nzSelect=new x,this.nzDeselect=new x,this.nzClick=new x,this.nzContextmenu=new x,this.template=null,this.isActive=!1,this.position=null,this.origin=null,this.stateChanges=new St}ngOnChanges(t){let{nzTitle:e,nzDisabled:i,nzForceRender:r}=t;(e||i||r)&&this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete()}};n.\u0275fac=function(e){return new(e||n)(p(wi))},n.\u0275cmp=C({type:n,selectors:[["nz-tab"]],contentQueries:function(e,i,r){if(e&1&&(K(r,Sn,5),K(r,ie,5,kt),K(r,xn,5)),e&2){let m;D(m=E())&&(i.nzTabLinkTemplateDirective=m.first),D(m=E())&&(i.template=m.first),D(m=E())&&(i.linkDirective=m.first)}},viewQuery:function(e,i){if(e&1&&O(ln,7),e&2){let r;D(r=E())&&(i.contentTemplate=r.first)}},inputs:{nzTitle:"nzTitle",nzClosable:"nzClosable",nzCloseIcon:"nzCloseIcon",nzDisabled:"nzDisabled",nzForceRender:"nzForceRender"},outputs:{nzSelect:"nzSelect",nzDeselect:"nzDeselect",nzClick:"nzClick",nzContextmenu:"nzContextmenu"},exportAs:["nzTab"],standalone:!0,features:[jt,T],ngContentSelectors:pn,decls:4,vars:0,consts:[["tabLinkTemplate",""],["contentTemplate",""]],template:function(e,i){e&1&&(Xt(mn),f(0,cn,1,0,"ng-template",null,0,Qt)(2,dn,1,0,"ng-template",null,1,Qt))},encapsulation:2,changeDetection:0});let o=n;return w([M()],o.prototype,"nzClosable",void 0),w([M()],o.prototype,"nzDisabled",void 0),w([M()],o.prototype,"nzForceRender",void 0),o})(),te=class{},In="tabs",Nn=0,Di=(()=>{let n=class n{get nzSelectedIndex(){return this.selectedIndex}set nzSelectedIndex(t){this.indexToSelect=Zt(t,null)}get position(){return["top","bottom"].indexOf(this.nzTabPosition)===-1?"vertical":"horizontal"}get addable(){return this.nzType==="editable-card"&&!this.nzHideAdd}get closable(){return this.nzType==="editable-card"}get line(){return this.nzType==="line"}get inkBarAnimated(){return this.line&&(typeof this.nzAnimated=="boolean"?this.nzAnimated:this.nzAnimated.inkBar)}get tabPaneAnimated(){return this.position==="horizontal"&&this.line&&(typeof this.nzAnimated=="boolean"?this.nzAnimated:this.nzAnimated.tabPane)}constructor(t,e,i,r,m){this.nzConfigService=t,this.ngZone=e,this.cdr=i,this.directionality=r,this.router=m,this._nzModuleName=In,this.nzTabPosition="top",this.nzCanDeactivate=null,this.nzAddIcon="plus",this.nzTabBarStyle=null,this.nzType="line",this.nzSize="default",this.nzAnimated=!0,this.nzTabBarGutter=void 0,this.nzHideAdd=!1,this.nzCentered=!1,this.nzHideAll=!1,this.nzLinkRouter=!1,this.nzLinkExact=!0,this.nzSelectChange=new x(!0),this.nzSelectedIndexChange=new x,this.nzTabListScroll=new x,this.nzClose=new x,this.nzAdd=new x,this.allTabs=new Gt,this.tabs=new Gt,this.dir="ltr",this.destroy$=new St,this.indexToSelect=0,this.selectedIndex=null,this.tabLabelSubscription=ht.EMPTY,this.tabsSubscription=ht.EMPTY,this.canDeactivateSubscription=ht.EMPTY,this.tabSetId=Nn++}ngOnInit(){this.dir=this.directionality.value,this.directionality.change?.pipe(G(this.destroy$)).subscribe(t=>{this.dir=t,this.cdr.detectChanges()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.tabs.destroy(),this.tabLabelSubscription.unsubscribe(),this.tabsSubscription.unsubscribe(),this.canDeactivateSubscription.unsubscribe()}ngAfterContentInit(){this.ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>this.setUpRouter())}),this.subscribeToTabLabels(),this.subscribeToAllTabChanges(),this.tabsSubscription=this.tabs.changes.subscribe(()=>{if(this.clampTabIndex(this.indexToSelect)===this.selectedIndex){let e=this.tabs.toArray();for(let i=0;i<e.length;i++)if(e[i].isActive){this.indexToSelect=this.selectedIndex=i;break}}this.subscribeToTabLabels(),this.cdr.markForCheck()})}ngAfterContentChecked(){let t=this.indexToSelect=this.clampTabIndex(this.indexToSelect);if(this.selectedIndex!==t){let e=this.selectedIndex==null;e||this.nzSelectChange.emit(this.createChangeEvent(t)),Promise.resolve().then(()=>{this.tabs.forEach((i,r)=>i.isActive=r===t),e||this.nzSelectedIndexChange.emit(t)})}this.tabs.forEach((e,i)=>{e.position=i-t,this.selectedIndex!=null&&e.position===0&&!e.origin&&(e.origin=t-this.selectedIndex)}),this.selectedIndex!==t&&(this.selectedIndex=t,this.cdr.markForCheck())}onClose(t,e){e.preventDefault(),e.stopPropagation(),this.nzClose.emit({index:t})}onAdd(){this.nzAdd.emit()}clampTabIndex(t){return Math.min(this.tabs.length-1,Math.max(t||0,0))}createChangeEvent(t){let e=new te;return e.index=t,this.tabs&&this.tabs.length&&(e.tab=this.tabs.toArray()[t],this.tabs.forEach((i,r)=>{r!==t&&i.nzDeselect.emit()}),e.tab.nzSelect.emit()),e}subscribeToTabLabels(){this.tabLabelSubscription&&this.tabLabelSubscription.unsubscribe(),this.tabLabelSubscription=xt(...this.tabs.map(t=>t.stateChanges)).subscribe(()=>this.cdr.markForCheck())}subscribeToAllTabChanges(){this.allTabs.changes.pipe($t(this.allTabs)).subscribe(t=>{this.tabs.reset(t.filter(e=>e.closestTabSet===this)),this.tabs.notifyOnChanges()})}canDeactivateFun(t,e){return typeof this.nzCanDeactivate=="function"?Ee(this.nzCanDeactivate(t,e)).pipe(ue(),G(this.destroy$)):Vt(!0)}clickNavItem(t,e,i){t.nzDisabled||(t.nzClick.emit(),this.isRouterLinkClickEvent(e,i)||this.setSelectedIndex(e))}isRouterLinkClickEvent(t,e){let i=e.target;return this.nzLinkRouter?!!this.tabs.toArray()[t]?.linkDirective?.elementRef.nativeElement.contains(i):!1}contextmenuNavItem(t,e){t.nzDisabled||t.nzContextmenu.emit(e)}setSelectedIndex(t){this.canDeactivateSubscription.unsubscribe(),this.canDeactivateSubscription=this.canDeactivateFun(this.selectedIndex,t).subscribe(e=>{e&&(this.nzSelectedIndex=t,this.tabNavBarRef.focusIndex=t,this.cdr.markForCheck())})}getTabIndex(t,e){return t.nzDisabled?null:this.selectedIndex===e?0:-1}getTabContentId(t){return`nz-tabs-${this.tabSetId}-tab-${t}`}setUpRouter(){if(this.nzLinkRouter){if(!this.router)throw new Error(`${De} you should import 'RouterModule' if you want to use 'nzLinkRouter'!`);this.router.events.pipe(G(this.destroy$),de(t=>t instanceof xe),$t(!0),pe(0)).subscribe(()=>{this.updateRouterActive(),this.cdr.markForCheck()})}}updateRouterActive(){if(this.router.navigated){let t=this.findShouldActiveTabIndex();t!==this.selectedIndex&&this.setSelectedIndex(t),this.nzHideAll=t===-1}}findShouldActiveTabIndex(){let t=this.tabs.toArray(),e=this.isLinkActive(this.router);return t.findIndex(i=>{let r=i.linkDirective;return r?e(r.routerLink):!1})}isLinkActive(t){return e=>e?t.isActive(e.urlTree||"",{paths:this.nzLinkExact?"exact":"subset",queryParams:this.nzLinkExact?"exact":"subset",fragment:"ignored",matrixParams:"ignored"}):!1}getTabContentMarginValue(){return-(this.nzSelectedIndex||0)*100}getTabContentMarginLeft(){return this.tabPaneAnimated&&this.dir!=="rtl"?`${this.getTabContentMarginValue()}%`:""}getTabContentMarginRight(){return this.tabPaneAnimated&&this.dir==="rtl"?`${this.getTabContentMarginValue()}%`:""}};n.\u0275fac=function(e){return new(e||n)(p(Ae),p(gt),p(It),p(Kt,8),p(B,8))},n.\u0275cmp=C({type:n,selectors:[["nz-tabset"]],contentQueries:function(e,i,r){if(e&1&&K(r,ne,5),e&2){let m;D(m=E())&&(i.allTabs=m)}},viewQuery:function(e,i){if(e&1&&O(Ii,5),e&2){let r;D(r=E())&&(i.tabNavBarRef=r.first)}},hostAttrs:[1,"ant-tabs"],hostVars:24,hostBindings:function(e,i){e&2&&A("ant-tabs-card",i.nzType==="card"||i.nzType==="editable-card")("ant-tabs-editable",i.nzType==="editable-card")("ant-tabs-editable-card",i.nzType==="editable-card")("ant-tabs-centered",i.nzCentered)("ant-tabs-rtl",i.dir==="rtl")("ant-tabs-top",i.nzTabPosition==="top")("ant-tabs-bottom",i.nzTabPosition==="bottom")("ant-tabs-left",i.nzTabPosition==="left")("ant-tabs-right",i.nzTabPosition==="right")("ant-tabs-default",i.nzSize==="default")("ant-tabs-small",i.nzSize==="small")("ant-tabs-large",i.nzSize==="large")},inputs:{nzSelectedIndex:"nzSelectedIndex",nzTabPosition:"nzTabPosition",nzTabBarExtraContent:"nzTabBarExtraContent",nzCanDeactivate:"nzCanDeactivate",nzAddIcon:"nzAddIcon",nzTabBarStyle:"nzTabBarStyle",nzType:"nzType",nzSize:"nzSize",nzAnimated:"nzAnimated",nzTabBarGutter:"nzTabBarGutter",nzHideAdd:"nzHideAdd",nzCentered:"nzCentered",nzHideAll:"nzHideAll",nzLinkRouter:"nzLinkRouter",nzLinkExact:"nzLinkExact"},outputs:{nzSelectChange:"nzSelectChange",nzSelectedIndexChange:"nzSelectedIndexChange",nzTabListScroll:"nzTabListScroll",nzClose:"nzClose",nzAdd:"nzAdd"},exportAs:["nzTabset"],standalone:!0,features:[Et([{provide:wi,useExisting:n}]),T],decls:4,vars:16,consts:[[3,"ngStyle","selectedIndex","inkBarAnimated","addable","addIcon","hideBar","position","extraTemplate","tabScroll","selectFocusedIndex","addClicked",4,"ngIf"],[1,"ant-tabs-content-holder"],[1,"ant-tabs-content"],["role","tabpanel","nz-tab-body","",3,"id","active","content","forceRender","tabPaneAnimated",4,"ngFor","ngForOf"],[3,"ngStyle","selectedIndex","inkBarAnimated","addable","addIcon","hideBar","position","extraTemplate","tabScroll","selectFocusedIndex","addClicked"],["class","ant-tabs-tab",3,"margin-right","margin-bottom","ant-tabs-tab-active","ant-tabs-tab-disabled","click","contextmenu",4,"ngFor","ngForOf"],[1,"ant-tabs-tab",3,"click","contextmenu"],["role","tab","nzTabNavItem","","cdkMonitorElementFocus","",1,"ant-tabs-tab-btn",3,"id","disabled","tab","active"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],["nz-tab-close-button","",3,"closeIcon","click",4,"ngIf"],["nz-tab-close-button","",3,"closeIcon","click"],["role","tabpanel","nz-tab-body","",3,"id","active","content","forceRender","tabPaneAnimated"]],template:function(e,i){e&1&&(f(0,zn,2,9,"nz-tabs-nav",0),s(1,"div",1)(2,"div",2),f(3,gn,1,6,"div",3),c()()),e&2&&(l("ngIf",i.tabs.length||i.addable),d(2),Nt("margin-left",i.getTabContentMarginLeft())("margin-right",i.getTabContentMarginRight()),A("ant-tabs-content-top",i.nzTabPosition==="top")("ant-tabs-content-bottom",i.nzTabPosition==="bottom")("ant-tabs-content-left",i.nzTabPosition==="left")("ant-tabs-content-right",i.nzTabPosition==="right")("ant-tabs-content-animated",i.tabPaneAnimated),d(1),l("ngForOf",i.tabs))},dependencies:[Ii,_t,ye,q,Ni,Ve,He,yt,Tt,yn,Tn],encapsulation:2});let o=n;return w([Ct()],o.prototype,"nzType",void 0),w([Ct()],o.prototype,"nzSize",void 0),w([Ct()],o.prototype,"nzAnimated",void 0),w([Ct()],o.prototype,"nzTabBarGutter",void 0),w([M()],o.prototype,"nzHideAdd",void 0),w([M()],o.prototype,"nzCentered",void 0),w([M()],o.prototype,"nzHideAll",void 0),w([M()],o.prototype,"nzLinkRouter",void 0),w([M()],o.prototype,"nzLinkExact",void 0),o})();function wn(o,n){o&1&&(s(0,"button",9),h(1,"\u7F16\u8F91"),c())}function Dn(o,n){if(o&1){let a=S();s(0,"button",10),b("nzOnConfirm",function(){g(a);let e=u();return v(e.delete())}),h(1,"\u5220\u9664"),c()}}function En(o,n){if(o&1&&_(0,"app-web-view",13),o&2){let a=u().$implicit,t=u();l("url",a.url+"?product="+t.id)}}function kn(o,n){if(o&1&&(s(0,"nz-tab",11),f(1,En,1,1,"ng-template",12),c()),o&2){let a=n.$implicit;l("nzTitle",a.name)}}var Fi=(()=>{let n=class n{constructor(t,e,i,r,m){this.fb=t,this.router=e,this.msg=i,this.rs=r,this.route=m,this.data={id:1,name:"\u6E29\u5EA6\u8BA1",description:"\u6807\u51C6485\u6E29\u5EA6\u8BA1",version:"3",keywords:["modbus"],icon:"",url:"https://www.baidu.com",created:new Date,properties:[{name:"temp",label:"\u6E29\u5EA6",unit:"\u2103"},{name:"hum",label:"\u6E7F\u5EA6",unit:"%"}]},this.plugins=[]}ngOnInit(){this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load(),this.loadPlugins())}load(){this.rs.get(`product/${this.id}`,{}).subscribe(t=>{this.data=t.data})}loadPlugins(){this.rs.get("plugin/pages/product").subscribe(t=>{this.plugins=t.data})}delete(){this.rs.get(`product/${this.id}/delete`,{}).subscribe(t=>{this.msg.success("\u5220\u9664\u6210\u529F"),this.router.navigateByUrl("admin/product")},t=>{console.log("err:",t)}),this.load()}};n.\u0275fac=function(e){return new(e||n)(p(L),p(B),p(lt),p(ct),p(J))},n.\u0275cmp=C({type:n,selectors:[["app-product-detail"]],standalone:!0,features:[T],decls:24,vars:15,consts:[["nz-button","","routerLink","edit",4,"nzSpaceItem"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786E\u8BA4\u5220\u9664",3,"nzOnConfirm",4,"nzSpaceItem"],["nzSize","small",3,"nzColumn"],["nzTitle","ID",3,"nzSpan"],["nzTitle","\u540D\u79F0",3,"nzSpan"],["nzTitle","\u7248\u672C",3,"nzSpan"],["nzTitle","\u521B\u5EFA\u65F6\u95F4",3,"nzSpan"],["nzTitle","\u8BF4\u660E",3,"nzSpan"],[3,"nzTitle",4,"ngFor","ngForOf"],["nz-button","","routerLink","edit"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786E\u8BA4\u5220\u9664",3,"nzOnConfirm"],[3,"nzTitle"],["nz-tab",""],[3,"url"]],template:function(e,i){e&1&&(s(0,"nz-page-header")(1,"nz-page-header-title"),h(2,"\u4EA7\u54C1\u8BE6\u60C5"),c(),s(3,"nz-page-header-subtitle"),h(4),c(),s(5,"nz-page-header-extra")(6,"nz-space"),f(7,wn,2,0,"button",0)(8,Dn,2,0,"button",1),c()(),s(9,"nz-page-header-content")(10,"nz-descriptions",2)(11,"nz-descriptions-item",3),h(12),c(),s(13,"nz-descriptions-item",4),h(14),c(),s(15,"nz-descriptions-item",5),h(16),c(),s(17,"nz-descriptions-item",6),h(18),ge(19,"date"),c(),s(20,"nz-descriptions-item",7),h(21),c()()()(),s(22,"nz-tabset"),f(23,kn,2,1,"nz-tab",8),c()),e&2&&(d(4),I(i.data.name),d(6),l("nzColumn",3),d(1),l("nzSpan",1),d(1),I(i.data.id),d(1),l("nzSpan",1),d(1),I(i.data.name),d(1),l("nzSpan",1),d(1),I(i.data.version),d(1),l("nzSpan",1),d(1),I(ve(19,13,i.data.created)),d(2),l("nzSpan",2),d(1),I(i.data.description),d(2),l("ngForOf",i.plugins))},dependencies:[ci,ut,dt,mt,li,pt,pi,mi,di,Ke,V,H,W,q,tt,Ue,Se,Di,ne,ie,ai]});let o=n;return o})();function Fn(o,n){o&1&&(s(0,"a",18),h(1,"\u7F16\u8F91\u5C5E\u6027"),c())}function An(o,n){o&1&&(s(0,"a",19),h(1,"\u7F16\u8F91\u4E8B\u4EF6"),c())}function Mn(o,n){o&1&&(s(0,"a",20),h(1,"\u7F16\u8F91\u52A8\u4F5C"),c())}function Rn(o,n){if(o&1){let a=S();s(0,"button",21),b("click",function(){g(a);let e=u();return v(e.onSubmit())}),h(1,"\u4FDD\u5B58"),c()}}var Pn=()=>[",","\uFF0C"],re=(()=>{let n=class n{constructor(t,e,i,r,m){this.fb=t,this.router=e,this.msg=i,this.rs=r,this.route=m,this.data={name:"\u65B0\u4EA7\u54C1"},this.id="",this.buildFromGroup()}buildFromGroup(t){t=t||{},this.formGroup=this.fb.group({id:[this.id||"",[]],name:[t.name||"",[]],description:[t.description||"",[]],icon:[t.icon||"",[]],version:[t.version||"",[]],url:[t.url||"",[]],keywords:[t.keywords||[],[]]})}ngOnInit(){this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.buildFromGroup(),this.load())}load(){this.rs.get(`product/${this.id}`).subscribe(t=>{this.buildFromGroup(t.data)},t=>{console.log("err:",t)})}onSubmit(){if(this.formGroup.valid){let t=`product/${this.id||"create"}`;this.rs.post(t,this.formGroup.value).subscribe(e=>{this.router.navigateByUrl("admin/product"),this.msg.success("\u4FDD\u5B58\u6210\u529F")});return}else Object.values(this.formGroup.controls).forEach(t=>{t.invalid&&(t.markAsDirty(),t.updateValueAndValidity({onlySelf:!0}))})}onIconChange(t){}};n.\u0275fac=function(e){return new(e||n)(p(L),p(B),p(lt),p(ct),p(J))},n.\u0275cmp=C({type:n,selectors:[["app-product-edit"]],standalone:!0,features:[T],decls:43,vars:30,consts:[["nz-button","","routerLink","property",4,"nzSpaceItem"],["nz-button","","routerLink","event","disabled","",4,"nzSpaceItem"],["nz-button","","routerLink","action","disabled","",4,"nzSpaceItem"],["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nz-form","",3,"formGroup","ngSubmit"],["nzFor","id",3,"nzSm","nzXs"],["nzErrorTip","",3,"nzSm","nzXs"],["nz-input","","formControlName","id","placeholder","\u9009\u586B\uFF0C\u9ED8\u8BA4\u968F\u673A"],["nzRequired","","nzFor","name",3,"nzSm","nzXs"],["nz-input","","formControlName","name"],["nzFor","name",3,"nzSm","nzXs"],["nzMode","tags","nzPlaceHolder","\u5173\u952E\u5B57\uFF0C\u9017\u53F7\u5206\u9694","formControlName","keywords",3,"nzTokenSeparators"],["nzFor","version",3,"nzSm","nzXs"],["nz-input","","formControlName","version"],["nzFor","description",3,"nzSm","nzXs"],[3,"nzMaxCharacterCount"],["rows","4","nz-input","","formControlName","description"],["nz-input","","formControlName","url"],["nz-button","","routerLink","property"],["nz-button","","routerLink","event","disabled",""],["nz-button","","routerLink","action","disabled",""],["nz-button","","nzType","primary",3,"click"]],template:function(e,i){e&1&&(s(0,"nz-page-header")(1,"nz-page-header-title"),h(2),c(),s(3,"nz-page-header-subtitle"),h(4),c(),s(5,"nz-page-header-extra")(6,"nz-space"),f(7,Fn,2,0,"a",0)(8,An,2,0,"a",1)(9,Mn,2,0,"a",2)(10,Rn,2,0,"button",3),c()()(),s(11,"form",4),b("ngSubmit",function(){return i.onSubmit()}),s(12,"nz-form-item")(13,"nz-form-label",5),h(14,"ID"),c(),s(15,"nz-form-control",6),_(16,"input",7),c()(),s(17,"nz-form-item")(18,"nz-form-label",8),h(19,"\u540D\u79F0"),c(),s(20,"nz-form-control",6),_(21,"input",9),c()(),s(22,"nz-form-item")(23,"nz-form-label",10),h(24,"\u5173\u952E\u5B57"),c(),s(25,"nz-form-control",6),_(26,"nz-select",11),c()(),s(27,"nz-form-item")(28,"nz-form-label",12),h(29,"\u7248\u672C"),c(),s(30,"nz-form-control",6),_(31,"input",13),c()(),s(32,"nz-form-item")(33,"nz-form-label",14),h(34,"\u8BF4\u660E"),c(),s(35,"nz-form-control",6)(36,"nz-textarea-count",15),_(37,"textarea",16),c()()(),s(38,"nz-form-item")(39,"nz-form-label",12),h(40,"URL"),c(),s(41,"nz-form-control",6),_(42,"input",17),c()()()),e&2&&(d(2),Dt("\u4EA7\u54C1",i.id?"\u7F16\u8F91":"\u521B\u5EFA",""),d(2),I(i.data.name),d(7),l("formGroup",i.formGroup),d(2),l("nzSm",6)("nzXs",24),d(2),l("nzSm",14)("nzXs",24),d(3),l("nzSm",6)("nzXs",24),d(2),l("nzSm",14)("nzXs",24),d(3),l("nzSm",6)("nzXs",24),d(2),l("nzSm",14)("nzXs",24),d(1),l("nzTokenSeparators",U(29,Pn)),d(2),l("nzSm",6)("nzXs",24),d(2),l("nzSm",14)("nzXs",24),d(3),l("nzSm",6)("nzXs",24),d(2),l("nzSm",14)("nzXs",24),d(1),l("nzMaxCharacterCount",200),d(3),l("nzSm",6)("nzXs",24),d(2),l("nzSm",14)("nzXs",24))},dependencies:[Ft,W,ut,pt,mt,dt,V,tt,H,rt,Mt,At,et,it,at,nt,ot,Le,Fe,ke,Pt,Pe,Be,Oe,Ot,$e,Bt]});let o=n;return o})();function On(o,n){if(o&1&&(s(0,"th"),h(1),c()),o&2){let a=n.$implicit;d(1),I(a.label)}}function Bn(o,n){if(o&1){let a=S();s(0,"nz-input-number",16),b("nzBlur",function(){g(a);let e=u(3);return v(e.change())}),c()}if(o&2){let a=u().$implicit;l("formControlName",a.name)("nzPlaceHolder",a.placeholder)}}function Ln(o,n){if(o&1){let a=S();s(0,"nz-select",17),b("ngModelChange",function(){g(a);let e=u(3);return v(e.change())}),c()}if(o&2){let a=u().$implicit;l("formControlName",a.name)("nzPlaceHolder",a.placeholder)("nzOptions",a.options)}}function Wn(o,n){if(o&1&&_(0,"nz-switch",18),o&2){let a=u().$implicit;l("formControlName",a.name)}}function Hn(o,n){if(o&1){let a=S();s(0,"input",19),b("blur",function(){g(a);let e=u(3);return v(e.change())}),c()}if(o&2){let a=u().$implicit;l("placeholder",a.placeholder||"")("formControlName",a.name)}}function Vn(o,n){if(o&1&&(s(0,"td"),R(1,11),f(2,Bn,1,2,"nz-input-number",12)(3,Ln,1,3,"nz-select",13)(4,Wn,1,1,"nz-switch",14)(5,Hn,1,2,"input",15),P(),c()),o&2){let a=n.$implicit;d(1),l("ngSwitch",a.type),d(1),l("ngSwitchCase","number"),d(1),l("ngSwitchCase","select"),d(1),l("ngSwitchCase","switch")}}function $n(o,n){o&1&&_(0,"span",20)}function jn(o,n){if(o&1){let a=S();s(0,"span",21),b("click",function(){g(a);let e=u().index,i=u();return v(i.handleCopyProperTy(e))}),c()}}function Xn(o,n){if(o&1){let a=S();s(0,"span",22),b("click",function(){g(a);let e=u().index,i=u();return v(i.propertyDel(e))}),c()}}function Gn(o,n){if(o&1&&(s(0,"tr",6),f(1,Vn,6,4,"td",3),s(2,"td",7)(3,"nz-space"),f(4,$n,1,0,"span",8)(5,jn,1,0,"span",9)(6,Xn,1,0,"span",10),c()()()),o&2){let a=n.index,t=u();l("formGroupName",a),d(1),l("ngForOf",t._items)}}var Ai=(()=>{let n=class n{set items(t){let e={};t.forEach(i=>{e[i.name]=i.default}),this.row=e,this._items=t}constructor(t,e){this.msg=t,this.fb=e,this.row={},this._items=[],this.onChanged=()=>{},this.onTouched=()=>{}}ngOnInit(){this.formArray=this.fb.array([]),this.group=this.fb.group({array:this.formArray})}writeValue(t){let e=JSON.parse(JSON.stringify(this.row));t&&t.length&&t.forEach(i=>{let r=this.fb.group(Object.assign(e,i));this.formArray.push(r)})}registerOnChange(t){this.onChanged=t}registerOnTouched(t){this.onTouched=t}change(){let t=this.formArray.controls.map(e=>e.value);this.onChanged(t)}handleCopyProperTy(t){let e=this.formArray.controls[t].value;this.formArray.insert(t,this.fb.group(e)),this.msg.success("\u590D\u5236\u6210\u529F"),this.change()}propertyDel(t){this.formArray.removeAt(t),this.change()}drop(t){ui(this.formArray.controls,t.previousIndex,t.currentIndex),this.change()}propertyAdd(){this.formArray.insert(0,this.fb.group(this.row))}};n.\u0275fac=function(e){return new(e||n)(p(lt),p(L))},n.\u0275cmp=C({type:n,selectors:[["app-edit-table"]],inputs:{items:"items"},standalone:!0,features:[Et([{provide:Ie,useExisting:he(()=>n),multi:!0}]),T],decls:11,vars:3,consts:[["type","button","nz-button","","nzType","primary",3,"click"],["type","button","nz-icon","","nzType","plus"],["nzTemplateMode","",3,"formGroup"],[4,"ngFor","ngForOf"],["cdkDropList","","formArrayName","array",3,"cdkDropListDropped"],["cdkDrag","",3,"formGroupName",4,"ngFor","ngForOf"],["cdkDrag","",3,"formGroupName"],[1,"td-oper"],["nz-icon","","nzType","drag","nzTheme","outline","title","\u79FB\u52A8\u5F53\u524D\u884C","style","cursor:move;","cdkDragHandle","",4,"nzSpaceItem"],["nz-icon","","nzType","copy","nzTheme","outline","title","\u590D\u5236\u5F53\u524D\u884C","style","cursor:pointer;",3,"click",4,"nzSpaceItem"],["nz-icon","","nzType","delete","nzTheme","outline","title","\u5220\u9664","style","cursor:pointer;",3,"click",4,"nzSpaceItem"],[3,"ngSwitch"],[3,"formControlName","nzPlaceHolder","nzBlur",4,"ngSwitchCase"],[3,"formControlName","nzPlaceHolder","nzOptions","ngModelChange",4,"ngSwitchCase"],[3,"formControlName",4,"ngSwitchCase"],["nz-input","",3,"placeholder","formControlName","blur",4,"ngSwitchDefault"],[3,"formControlName","nzPlaceHolder","nzBlur"],[3,"formControlName","nzPlaceHolder","nzOptions","ngModelChange"],[3,"formControlName"],["nz-input","",3,"placeholder","formControlName","blur"],["nz-icon","","nzType","drag","nzTheme","outline","title","\u79FB\u52A8\u5F53\u524D\u884C","cdkDragHandle","",2,"cursor","move"],["nz-icon","","nzType","copy","nzTheme","outline","title","\u590D\u5236\u5F53\u524D\u884C",2,"cursor","pointer",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline","title","\u5220\u9664",2,"cursor","pointer",3,"click"]],template:function(e,i){e&1&&(s(0,"button",0),b("click",function(){return i.propertyAdd()}),_(1,"i",1),h(2,` \u6DFB\u52A0
`),c(),s(3,"nz-table",2)(4,"thead")(5,"tr"),f(6,On,2,1,"th",3),s(7,"th"),h(8,"\u64CD\u4F5C"),c()()(),s(9,"tbody",4),b("cdkDropListDropped",function(m){return i.drop(m)}),f(10,Gn,7,2,"tr",5),c()()),e&2&&(d(3),l("formGroup",i.group),d(3),l("ngForOf",i._items),d(4),l("ngForOf",i.formArray.controls))},dependencies:[W,st,Lt,ii,ti,ei,ri,ni,oi,q,_e,bi,rt,At,et,it,at,nt,ot,Ne,we,Bt,zi,Te,Ce,V,H,hi,fi,gi,Ot]});let o=n;return o})();function Qn(o,n){if(o&1){let a=S();s(0,"button",3),b("click",function(){g(a);let e=u();return v(e.onSubmit())}),h(1,"\u4FDD\u5B58"),c()}}var Mi=(()=>{let n=class n{constructor(t,e,i,r,m){this.fb=t,this.rs=e,this.ms=i,this.router=r,this.route=m,this.data={name:"\u65B0\u4EA7\u54C1"},this.items=[{label:"\u53D8\u91CF",name:"name"},{label:"\u663E\u793A\u540D\u79F0",name:"label"},{label:"\u7C7B\u578B",name:"type",type:"select",default:"int",options:[{label:"\u6574\u6570",value:"int"},{label:"\u6D6E\u70B9\u6570",value:"float"},{label:"\u5E03\u5C14\u578B",value:"bool"},{label:"\u6587\u672C",value:"text"}]},{label:"\u5355\u4F4D",name:"unit"},{label:"\u6A21\u5F0F",name:"mode",type:"select",default:"r",options:[{label:"\u53EA\u8BFB",value:"r"},{label:"\u8BFB\u5199",value:"rw"}]}],this.id="",this.properties=[],this.buildFromGroup()}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.rs.get(`product/${this.id}/attach/read/property.json`).subscribe(t=>{this.properties=t,this.buildFromGroup()})}buildFromGroup(){this.formGroup=this.fb.group({properties:[this.properties||[],[]]})}onSubmit(){let t=this.formGroup.value;this.rs.post(`product/${this.id}/attach/write/property.json`,t.properties).subscribe(e=>{this.ms.success("\u63D0\u793A","\u4FDD\u5B58\u6210\u529F"),this.router.navigateByUrl("/admin/product/"+this.id+"/edit")})}};n.\u0275fac=function(e){return new(e||n)(p(L),p(ct),p(je),p(B),p(J))},n.\u0275cmp=C({type:n,selectors:[["app-product-edit-property"]],standalone:!0,features:[T],decls:10,vars:3,consts:[["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nz-form","",3,"formGroup","ngSubmit"],["formControlName","properties",3,"items"],["nz-button","","nzType","primary",3,"click"]],template:function(e,i){e&1&&(s(0,"nz-page-header")(1,"nz-page-header-title"),h(2,"\u4EA7\u54C1\u5C5E\u6027\u7F16\u8F91"),c(),s(3,"nz-page-header-subtitle"),h(4),c(),s(5,"nz-page-header-extra")(6,"nz-space"),f(7,Qn,2,0,"button",0),c()()(),s(8,"form",1),b("ngSubmit",function(){return i.onSubmit()}),_(9,"app-edit-table",2),c()),e&2&&(d(4),I(i.data.name),d(4),l("formGroup",i.formGroup),d(1),l("items",i.items))},dependencies:[rt,Mt,et,it,W,Pt,Lt,ut,pt,mt,dt,V,at,nt,ot,H,Ai]});let o=n;return o})();var Yn=[{path:"",component:si},{path:"create",component:re},{path:":id",component:Fi},{path:":id/edit",component:re},{path:":id/edit/property",component:Mi},{path:":id/edit/event",component:vi},{path:":id/edit/action",component:_i}],Ri=(()=>{let n=class n{};n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=zt({type:n}),n.\u0275inj=bt({imports:[qt.forChild(Yn),qt]});let o=n;return o})();var Jr=(()=>{let n=class n{};n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=zt({type:n}),n.\u0275inj=bt({imports:[Ft,Ri,Ze]});let o=n;return o})();export{Jr as ProductModule};
