var tK=Object.defineProperty,nK=Object.defineProperties,rK=Object.getOwnPropertyDescriptors,GL=Object.getOwnPropertySymbols,iK=Object.prototype.hasOwnProperty,aK=Object.prototype.propertyIsEnumerable,JL=(Gt,ht,J)=>ht in Gt?tK(Gt,ht,{enumerable:!0,configurable:!0,writable:!0,value:J}):Gt[ht]=J,Xd=(Gt,ht)=>{for(var J in ht||(ht={}))iK.call(ht,J)&&JL(Gt,J,ht[J]);if(GL)for(var J of GL(ht))aK.call(ht,J)&&JL(Gt,J,ht[J]);return Gt},Iy=(Gt,ht)=>nK(Gt,rK(ht));(self.webpackChunkiot_master=self.webpackChunkiot_master||[]).push([[182],{8182:(Gt,ht,J)=>{"use strict";J.r(ht),J.d(ht,{AdminModule:()=>pd});var e=J(5e3),O=J(7579),ee=J(2722),j=J(655),S=J(4090),fe=J(1721),he=J(4219),se=J(925),k=J(9808),K=J(647),ne=J(226),ie=J(5113);const re=["*"],R=["nz-sider-trigger",""];function V(g,x){}function A(g,x){if(1&g&&(e.ynx(0),e.YNc(1,V,0,0,"ng-template",3),e.BQk()),2&g){const s=e.oxw(),d=e.MAs(5);e.xp6(1),e.Q6J("ngTemplateOutlet",s.nzZeroTrigger||d)}}function P(g,x){}function I(g,x){if(1&g&&(e.ynx(0),e.YNc(1,P,0,0,"ng-template",3),e.BQk()),2&g){const s=e.oxw(),d=e.MAs(3);e.xp6(1),e.Q6J("ngTemplateOutlet",s.nzTrigger||d)}}function H(g,x){if(1&g&&e._UZ(0,"i",5),2&g){const s=e.oxw(2);e.Q6J("nzType",s.nzCollapsed?"right":"left")}}function Z(g,x){if(1&g&&e._UZ(0,"i",5),2&g){const s=e.oxw(2);e.Q6J("nzType",s.nzCollapsed?"left":"right")}}function U(g,x){if(1&g&&(e.YNc(0,H,1,1,"i",4),e.YNc(1,Z,1,1,"i",4)),2&g){const s=e.oxw();e.Q6J("ngIf",!s.nzReverseArrow),e.xp6(1),e.Q6J("ngIf",s.nzReverseArrow)}}function Y(g,x){1&g&&e._UZ(0,"i",6)}function B(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"div",2),e.NdJ("click",function(){e.CHM(s);const _=e.oxw();return _.setCollapsed(!_.nzCollapsed)}),e.qZA()}if(2&g){const s=e.oxw();e.Q6J("matchBreakPoint",s.matchBreakPoint)("nzCollapsedWidth",s.nzCollapsedWidth)("nzCollapsed",s.nzCollapsed)("nzBreakpoint",s.nzBreakpoint)("nzReverseArrow",s.nzReverseArrow)("nzTrigger",s.nzTrigger)("nzZeroTrigger",s.nzZeroTrigger)("siderWidth",s.widthSetting)}}let q=(()=>{class g{constructor(s,d){this.elementRef=s,this.renderer=d,this.renderer.addClass(this.elementRef.nativeElement,"ant-layout-content")}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(e.SBq),e.Y36(e.Qsj))},g.\u0275cmp=e.Xpm({type:g,selectors:[["nz-content"]],exportAs:["nzContent"],ngContentSelectors:re,decls:1,vars:0,template:function(s,d){1&s&&(e.F$t(),e.Hsn(0))},encapsulation:2,changeDetection:0}),g})(),W=(()=>{class g{constructor(s,d){this.elementRef=s,this.renderer=d,this.renderer.addClass(this.elementRef.nativeElement,"ant-layout-footer")}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(e.SBq),e.Y36(e.Qsj))},g.\u0275cmp=e.Xpm({type:g,selectors:[["nz-footer"]],exportAs:["nzFooter"],ngContentSelectors:re,decls:1,vars:0,template:function(s,d){1&s&&(e.F$t(),e.Hsn(0))},encapsulation:2,changeDetection:0}),g})(),L=(()=>{class g{constructor(s,d){this.elementRef=s,this.renderer=d,this.renderer.addClass(this.elementRef.nativeElement,"ant-layout-header")}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(e.SBq),e.Y36(e.Qsj))},g.\u0275cmp=e.Xpm({type:g,selectors:[["nz-header"]],exportAs:["nzHeader"],ngContentSelectors:re,decls:1,vars:0,template:function(s,d){1&s&&(e.F$t(),e.Hsn(0))},encapsulation:2,changeDetection:0}),g})(),D=(()=>{class g{constructor(){this.nzCollapsed=!1,this.nzReverseArrow=!1,this.nzZeroTrigger=null,this.nzTrigger=void 0,this.matchBreakPoint=!1,this.nzCollapsedWidth=null,this.siderWidth=null,this.nzBreakpoint=null,this.isZeroTrigger=!1,this.isNormalTrigger=!1}updateTriggerType(){this.isZeroTrigger=0===this.nzCollapsedWidth&&(this.nzBreakpoint&&this.matchBreakPoint||!this.nzBreakpoint),this.isNormalTrigger=0!==this.nzCollapsedWidth}ngOnInit(){this.updateTriggerType()}ngOnChanges(){this.updateTriggerType()}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275cmp=e.Xpm({type:g,selectors:[["","nz-sider-trigger",""]],hostVars:10,hostBindings:function(s,d){2&s&&(e.Udp("width",d.isNormalTrigger?d.siderWidth:null),e.ekj("ant-layout-sider-trigger",d.isNormalTrigger)("ant-layout-sider-zero-width-trigger",d.isZeroTrigger)("ant-layout-sider-zero-width-trigger-right",d.isZeroTrigger&&d.nzReverseArrow)("ant-layout-sider-zero-width-trigger-left",d.isZeroTrigger&&!d.nzReverseArrow))},inputs:{nzCollapsed:"nzCollapsed",nzReverseArrow:"nzReverseArrow",nzZeroTrigger:"nzZeroTrigger",nzTrigger:"nzTrigger",matchBreakPoint:"matchBreakPoint",nzCollapsedWidth:"nzCollapsedWidth",siderWidth:"siderWidth",nzBreakpoint:"nzBreakpoint"},exportAs:["nzSiderTrigger"],features:[e.TTD],attrs:R,decls:6,vars:2,consts:[[4,"ngIf"],["defaultTrigger",""],["defaultZeroTrigger",""],[3,"ngTemplateOutlet"],["nz-icon","",3,"nzType",4,"ngIf"],["nz-icon","",3,"nzType"],["nz-icon","","nzType","bars"]],template:function(s,d){1&s&&(e.YNc(0,A,2,1,"ng-container",0),e.YNc(1,I,2,1,"ng-container",0),e.YNc(2,U,2,2,"ng-template",null,1,e.W1O),e.YNc(4,Y,1,0,"ng-template",null,2,e.W1O)),2&s&&(e.Q6J("ngIf",d.isZeroTrigger),e.xp6(1),e.Q6J("ngIf",d.isNormalTrigger))},directives:[k.O5,k.tP,K.Ls],encapsulation:2,changeDetection:0}),g})(),F=(()=>{class g{constructor(s,d,_){this.platform=s,this.cdr=d,this.breakpointService=_,this.destroy$=new O.x,this.nzMenuDirective=null,this.nzCollapsedChange=new e.vpe,this.nzWidth=200,this.nzTheme="dark",this.nzCollapsedWidth=80,this.nzBreakpoint=null,this.nzZeroTrigger=null,this.nzTrigger=void 0,this.nzReverseArrow=!1,this.nzCollapsible=!1,this.nzCollapsed=!1,this.matchBreakPoint=!1,this.flexSetting=null,this.widthSetting=null}updateStyleMap(){this.widthSetting=this.nzCollapsed?`${this.nzCollapsedWidth}px`:(0,fe.WX)(this.nzWidth),this.flexSetting=`0 0 ${this.widthSetting}`,this.cdr.markForCheck()}updateMenuInlineCollapsed(){this.nzMenuDirective&&"inline"===this.nzMenuDirective.nzMode&&0!==this.nzCollapsedWidth&&this.nzMenuDirective.setInlineCollapsed(this.nzCollapsed)}setCollapsed(s){s!==this.nzCollapsed&&(this.nzCollapsed=s,this.nzCollapsedChange.emit(s),this.updateMenuInlineCollapsed(),this.updateStyleMap(),this.cdr.markForCheck())}ngOnInit(){this.updateStyleMap(),this.platform.isBrowser&&this.breakpointService.subscribe(S.ow,!0).pipe((0,ee.R)(this.destroy$)).subscribe(s=>{const d=this.nzBreakpoint;d&&(0,fe.ov)().subscribe(()=>{this.matchBreakPoint=!s[d],this.setCollapsed(this.matchBreakPoint),this.cdr.markForCheck()})})}ngOnChanges(s){const{nzCollapsed:d,nzCollapsedWidth:_,nzWidth:w}=s;(d||_||w)&&this.updateStyleMap(),d&&this.updateMenuInlineCollapsed()}ngAfterContentInit(){this.updateMenuInlineCollapsed()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(se.t4),e.Y36(e.sBO),e.Y36(S.r3))},g.\u0275cmp=e.Xpm({type:g,selectors:[["nz-sider"]],contentQueries:function(s,d,_){if(1&s&&e.Suo(_,he.wO,5),2&s){let w;e.iGM(w=e.CRH())&&(d.nzMenuDirective=w.first)}},hostAttrs:[1,"ant-layout-sider"],hostVars:18,hostBindings:function(s,d){2&s&&(e.Udp("flex",d.flexSetting)("max-width",d.widthSetting)("min-width",d.widthSetting)("width",d.widthSetting),e.ekj("ant-layout-sider-zero-width",d.nzCollapsed&&0===d.nzCollapsedWidth)("ant-layout-sider-light","light"===d.nzTheme)("ant-layout-sider-dark","dark"===d.nzTheme)("ant-layout-sider-collapsed",d.nzCollapsed)("ant-layout-sider-has-trigger",d.nzCollapsible&&null!==d.nzTrigger))},inputs:{nzWidth:"nzWidth",nzTheme:"nzTheme",nzCollapsedWidth:"nzCollapsedWidth",nzBreakpoint:"nzBreakpoint",nzZeroTrigger:"nzZeroTrigger",nzTrigger:"nzTrigger",nzReverseArrow:"nzReverseArrow",nzCollapsible:"nzCollapsible",nzCollapsed:"nzCollapsed"},outputs:{nzCollapsedChange:"nzCollapsedChange"},exportAs:["nzSider"],features:[e.TTD],ngContentSelectors:re,decls:3,vars:1,consts:[[1,"ant-layout-sider-children"],["nz-sider-trigger","",3,"matchBreakPoint","nzCollapsedWidth","nzCollapsed","nzBreakpoint","nzReverseArrow","nzTrigger","nzZeroTrigger","siderWidth","click",4,"ngIf"],["nz-sider-trigger","",3,"matchBreakPoint","nzCollapsedWidth","nzCollapsed","nzBreakpoint","nzReverseArrow","nzTrigger","nzZeroTrigger","siderWidth","click"]],template:function(s,d){1&s&&(e.F$t(),e.TgZ(0,"div",0),e.Hsn(1),e.qZA(),e.YNc(2,B,1,8,"div",1)),2&s&&(e.xp6(2),e.Q6J("ngIf",d.nzCollapsible&&null!==d.nzTrigger))},directives:[D,k.O5],encapsulation:2,changeDetection:0}),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzReverseArrow",void 0),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzCollapsible",void 0),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzCollapsed",void 0),g})(),$=(()=>{class g{constructor(s){this.directionality=s,this.dir="ltr",this.destroy$=new O.x}ngOnInit(){var s;this.dir=this.directionality.value,null===(s=this.directionality.change)||void 0===s||s.pipe((0,ee.R)(this.destroy$)).subscribe(d=>{this.dir=d})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(ne.Is,8))},g.\u0275cmp=e.Xpm({type:g,selectors:[["nz-layout"]],contentQueries:function(s,d,_){if(1&s&&e.Suo(_,F,4),2&s){let w;e.iGM(w=e.CRH())&&(d.listOfNzSiderComponent=w)}},hostAttrs:[1,"ant-layout"],hostVars:4,hostBindings:function(s,d){2&s&&e.ekj("ant-layout-rtl","rtl"===d.dir)("ant-layout-has-sider",d.listOfNzSiderComponent.length>0)},exportAs:["nzLayout"],ngContentSelectors:re,decls:1,vars:0,template:function(s,d){1&s&&(e.F$t(),e.Hsn(0))},encapsulation:2,changeDetection:0}),g})(),oe=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[[ne.vT,k.ez,K.PV,ie.xu,se.ud]]}),g})();var M=J(2382),be=J(520),Me=J(7152);let Ze=[{title:"\u9996\u9875",icon:"home",router:"dash"},{title:"\u8fde\u63a5\u7ba1\u7406",icon:"block",children:[{title:"\u901a\u9053",router:"tunnel"},{title:"\u670d\u52a1\u5668",router:"server"},{title:"\u8fdc\u7a0b\u8c03\u8bd5",router:"transfer"}]},{title:"\u8bbe\u5907\u7ba1\u7406",icon:"appstore",children:[{title:"\u8bbe\u5907",router:"device"},{title:"\u4ea7\u54c1\u5e93",router:"product"}]},{title:"\u9879\u76ee\u7ba1\u7406",icon:"cluster",children:[{title:"\u9879\u76ee",router:"project"},{title:"\u6a21\u677f\u5e93",router:"template"}]},{title:"\u7ec4\u6001\u7ba1\u7406",icon:"build",children:[{title:"\u7ec4\u6001",router:"hmi"},{title:"\u7ec4\u4ef6\u5e93",router:"component",disabled:!0}]},{title:"\u6269\u5c55\u7ba1\u7406",icon:"appstore-add",open:!1,children:[{title:"\u534f\u8bae",router:"extension/protocol"},{title:"\u6444\u50cf\u5934",router:"camera"}]},{title:"\u7cfb\u7edf\u8bbe\u7f6e",icon:"setting",open:!1,children:[{title:"\u7528\u6237\u7ba1\u7406",router:"setting/user"},{title:"\u4fee\u6539\u5bc6\u7801",router:"setting/password"}]},{title:"\u9000\u51fa",icon:"logout",router:"logout"}];var Fe=J(1445),je=J(2785),Ce=J(2683),Se=J(6695),rt=J(3677),ct=J(969),Lt=J(9300),pt=J(8675),gt=J(6947),st=J(9776),zt=J(6950);function Pt(g,x){}function Wt(g,x){1&g&&e._UZ(0,"i",6)}function sn(g,x){if(1&g&&(e.ynx(0),e.TgZ(1,"span",3),e.YNc(2,Pt,0,0,"ng-template",4),e.YNc(3,Wt,1,0,"i",5),e.qZA(),e.BQk()),2&g){const s=e.oxw(),d=e.MAs(2);e.xp6(1),e.Q6J("nzDropdownMenu",s.nzOverlay),e.xp6(1),e.Q6J("ngTemplateOutlet",d),e.xp6(1),e.Q6J("ngIf",!!s.nzOverlay)}}function Vn(g,x){1&g&&(e.TgZ(0,"span",7),e.Hsn(1),e.qZA())}function wn(g,x){if(1&g&&(e.ynx(0),e._uU(1),e.BQk()),2&g){const s=e.oxw(2);e.xp6(1),e.hij(" ",s.nzBreadCrumbComponent.nzSeparator," ")}}function qn(g,x){if(1&g&&(e.TgZ(0,"span",8),e.YNc(1,wn,2,1,"ng-container",9),e.qZA()),2&g){const s=e.oxw();e.xp6(1),e.Q6J("nzStringTemplateOutlet",s.nzBreadCrumbComponent.nzSeparator)}}const fn=["*"];function $n(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"nz-breadcrumb-item")(1,"a",2),e.NdJ("click",function(_){const me=e.CHM(s).$implicit;return e.oxw(2).navigate(me.url,_)}),e._uU(2),e.qZA()()}if(2&g){const s=x.$implicit;e.xp6(1),e.uIk("href",s.url,e.LSH),e.xp6(1),e.Oqu(s.label)}}function ur(g,x){if(1&g&&(e.ynx(0),e.YNc(1,$n,3,2,"nz-breadcrumb-item",1),e.BQk()),2&g){const s=e.oxw();e.xp6(1),e.Q6J("ngForOf",s.breadcrumbs)}}class Pn{}let Yn=(()=>{class g{constructor(s){this.nzBreadCrumbComponent=s}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Pn))},g.\u0275cmp=e.Xpm({type:g,selectors:[["nz-breadcrumb-item"]],inputs:{nzOverlay:"nzOverlay"},exportAs:["nzBreadcrumbItem"],ngContentSelectors:fn,decls:4,vars:3,consts:[[4,"ngIf","ngIfElse"],["noMenuTpl",""],["class","ant-breadcrumb-separator",4,"ngIf"],["nz-dropdown","",1,"ant-breadcrumb-overlay-link",3,"nzDropdownMenu"],[3,"ngTemplateOutlet"],["nz-icon","","nzType","down",4,"ngIf"],["nz-icon","","nzType","down"],[1,"ant-breadcrumb-link"],[1,"ant-breadcrumb-separator"],[4,"nzStringTemplateOutlet"]],template:function(s,d){if(1&s&&(e.F$t(),e.YNc(0,sn,4,3,"ng-container",0),e.YNc(1,Vn,2,0,"ng-template",null,1,e.W1O),e.YNc(3,qn,2,1,"span",2)),2&s){const _=e.MAs(2);e.Q6J("ngIf",!!d.nzOverlay)("ngIfElse",_),e.xp6(3),e.Q6J("ngIf",d.nzBreadCrumbComponent.nzSeparator)}},directives:[k.O5,rt.cm,k.tP,K.Ls,ct.f],encapsulation:2,changeDetection:0}),g})(),hr=(()=>{class g{constructor(s,d,_,w,me){this.injector=s,this.cdr=d,this.elementRef=_,this.renderer=w,this.directionality=me,this.nzAutoGenerate=!1,this.nzSeparator="/",this.nzRouteLabel="breadcrumb",this.nzRouteLabelFn=Re=>Re,this.breadcrumbs=[],this.dir="ltr",this.destroy$=new O.x,w.addClass(_.nativeElement,"ant-breadcrumb")}ngOnInit(){var s;this.nzAutoGenerate&&this.registerRouterChange(),null===(s=this.directionality.change)||void 0===s||s.pipe((0,ee.R)(this.destroy$)).subscribe(d=>{this.dir=d,this.prepareComponentForRtl(),this.cdr.detectChanges()}),this.dir=this.directionality.value,this.prepareComponentForRtl()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}navigate(s,d){d.preventDefault(),this.injector.get(Me.F0).navigateByUrl(s)}registerRouterChange(){try{const s=this.injector.get(Me.F0),d=this.injector.get(Me.gz);s.events.pipe((0,Lt.h)(_=>_ instanceof Me.m2),(0,ee.R)(this.destroy$),(0,pt.O)(!0)).subscribe(()=>{this.breadcrumbs=this.getBreadcrumbs(d.root),this.cdr.markForCheck()})}catch(s){throw new Error(`${gt.Bq} You should import RouterModule if you want to use 'NzAutoGenerate'.`)}}getBreadcrumbs(s,d="",_=[]){const w=s.children;if(0===w.length)return _;for(const me of w)if(me.outlet===Me.eC){const Re=me.snapshot.url.map(xt=>xt.path).filter(xt=>xt).join("/"),at=Re?`${d}/${Re}`:d,ft=this.nzRouteLabelFn(me.snapshot.data[this.nzRouteLabel]);return Re&&ft&&_.push({label:ft,params:me.snapshot.params,url:at}),this.getBreadcrumbs(me,at,_)}return _}prepareComponentForRtl(){"rtl"===this.dir?this.renderer.addClass(this.elementRef.nativeElement,"ant-breadcrumb-rtl"):this.renderer.removeClass(this.elementRef.nativeElement,"ant-breadcrumb-rtl")}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(e.zs3),e.Y36(e.sBO),e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(ne.Is,8))},g.\u0275cmp=e.Xpm({type:g,selectors:[["nz-breadcrumb"]],inputs:{nzAutoGenerate:"nzAutoGenerate",nzSeparator:"nzSeparator",nzRouteLabel:"nzRouteLabel",nzRouteLabelFn:"nzRouteLabelFn"},exportAs:["nzBreadcrumb"],features:[e._Bn([{provide:Pn,useExisting:g}])],ngContentSelectors:fn,decls:2,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(s,d){1&s&&(e.F$t(),e.Hsn(0),e.YNc(1,ur,2,1,"ng-container",0)),2&s&&(e.xp6(1),e.Q6J("ngIf",d.nzAutoGenerate&&d.breadcrumbs.length))},directives:[Yn,k.O5,k.sg],encapsulation:2,changeDetection:0}),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzAutoGenerate",void 0),g})(),ir=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[[k.ez,ct.T,st.U8,zt.e4,rt.b1,K.PV],ne.vT]}),g})();var tn=J(5737),Sr=J(8076),un=J(9439),Sn=J(4832);function mn(g,x){if(1&g&&(e.ynx(0),e._uU(1),e.BQk()),2&g){const s=e.oxw(3);e.xp6(1),e.Oqu(s.nzTitle)}}function yr(g,x){if(1&g&&(e.TgZ(0,"div",10),e.YNc(1,mn,2,1,"ng-container",9),e.qZA()),2&g){const s=e.oxw(2);e.xp6(1),e.Q6J("nzStringTemplateOutlet",s.nzTitle)}}function Er(g,x){if(1&g&&(e.ynx(0),e._uU(1),e.BQk()),2&g){const s=e.oxw(2);e.xp6(1),e.Oqu(s.nzContent)}}function Dn(g,x){if(1&g&&(e.TgZ(0,"div",2)(1,"div",3)(2,"div",4),e._UZ(3,"span",5),e.qZA(),e.TgZ(4,"div",6)(5,"div"),e.YNc(6,yr,2,1,"div",7),e.TgZ(7,"div",8),e.YNc(8,Er,2,1,"ng-container",9),e.qZA()()()()()),2&g){const s=e.oxw();e.ekj("ant-popover-rtl","rtl"===s.dir),e.Q6J("ngClass",s._classMap)("ngStyle",s.nzOverlayStyle)("@.disabled",null==s.noAnimation?null:s.noAnimation.nzNoAnimation)("nzNoAnimation",null==s.noAnimation?null:s.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),e.xp6(6),e.Q6J("ngIf",s.nzTitle),e.xp6(2),e.Q6J("nzStringTemplateOutlet",s.nzContent)}}let Zt=(()=>{class g extends Se.Mg{constructor(s,d,_,w,me,Re){super(s,d,_,w,me,Re),this._nzModuleName="popover",this.trigger="hover",this.placement="top",this.nzPopoverBackdrop=!1,this.visibleChange=new e.vpe,this.componentRef=this.hostView.createComponent(dr)}getProxyPropertyMap(){return Object.assign({nzPopoverBackdrop:["nzBackdrop",()=>this.nzPopoverBackdrop]},super.getProxyPropertyMap())}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(e.SBq),e.Y36(e.s_b),e.Y36(e._Vd),e.Y36(e.Qsj),e.Y36(Sn.P,9),e.Y36(un.jY))},g.\u0275dir=e.lG2({type:g,selectors:[["","nz-popover",""]],hostVars:2,hostBindings:function(s,d){2&s&&e.ekj("ant-popover-open",d.visible)},inputs:{arrowPointAtCenter:["nzPopoverArrowPointAtCenter","arrowPointAtCenter"],title:["nzPopoverTitle","title"],content:["nzPopoverContent","content"],directiveTitle:["nz-popover","directiveTitle"],trigger:["nzPopoverTrigger","trigger"],placement:["nzPopoverPlacement","placement"],origin:["nzPopoverOrigin","origin"],visible:["nzPopoverVisible","visible"],mouseEnterDelay:["nzPopoverMouseEnterDelay","mouseEnterDelay"],mouseLeaveDelay:["nzPopoverMouseLeaveDelay","mouseLeaveDelay"],overlayClassName:["nzPopoverOverlayClassName","overlayClassName"],overlayStyle:["nzPopoverOverlayStyle","overlayStyle"],nzPopoverBackdrop:"nzPopoverBackdrop"},outputs:{visibleChange:"nzPopoverVisibleChange"},exportAs:["nzPopover"],features:[e.qOj]}),(0,j.gn)([(0,fe.yF)()],g.prototype,"arrowPointAtCenter",void 0),(0,j.gn)([(0,un.oS)()],g.prototype,"nzPopoverBackdrop",void 0),g})(),dr=(()=>{class g extends Se.XK{constructor(s,d,_){super(s,d,_),this._prefix="ant-popover"}get hasBackdrop(){return"click"===this.nzTrigger&&this.nzBackdrop}isEmpty(){return(0,Se.pu)(this.nzTitle)&&(0,Se.pu)(this.nzContent)}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(e.sBO),e.Y36(ne.Is,8),e.Y36(Sn.P,9))},g.\u0275cmp=e.Xpm({type:g,selectors:[["nz-popover"]],exportAs:["nzPopoverComponent"],features:[e.qOj],decls:2,vars:6,consts:[["cdkConnectedOverlay","","nzConnectedOverlay","",3,"cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayOpen","cdkConnectedOverlayPush","nzArrowPointAtCenter","overlayOutsideClick","detach","positionChange"],["overlay","cdkConnectedOverlay"],[1,"ant-popover",3,"ngClass","ngStyle","nzNoAnimation"],[1,"ant-popover-content"],[1,"ant-popover-arrow"],[1,"ant-popover-arrow-content"],["role","tooltip",1,"ant-popover-inner"],["class","ant-popover-title",4,"ngIf"],[1,"ant-popover-inner-content"],[4,"nzStringTemplateOutlet"],[1,"ant-popover-title"]],template:function(s,d){1&s&&(e.YNc(0,Dn,9,9,"ng-template",0,1,e.W1O),e.NdJ("overlayOutsideClick",function(w){return d.onClickOutside(w)})("detach",function(){return d.hide()})("positionChange",function(w){return d.onPositionChange(w)})),2&s&&e.Q6J("cdkConnectedOverlayHasBackdrop",d.hasBackdrop)("cdkConnectedOverlayOrigin",d.origin)("cdkConnectedOverlayPositions",d._positions)("cdkConnectedOverlayOpen",d._visible)("cdkConnectedOverlayPush",!0)("nzArrowPointAtCenter",d.nzArrowPointAtCenter)},directives:[st.pI,zt.hQ,k.mk,k.PC,Sn.P,k.O5,ct.f],encapsulation:2,data:{animation:[Sr.$C]},changeDetection:0}),g})(),Ge=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[[ne.vT,k.ez,st.U8,ct.T,zt.e4,Sn.g,Se.cg]]}),g})();function Dt(g,x){if(1&g&&e._UZ(0,"i",27),2&g){const s=e.oxw(2).$implicit;e.Q6J("nzType",s.icon)}}function it(g,x){if(1&g&&(e.TgZ(0,"li",25),e.YNc(1,Dt,1,1,"i",26),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&g){const s=e.oxw().$implicit,d=e.oxw();e.Q6J("routerLink",s.router)("nzDisabled",s.disabled)("nzTooltipTitle",d.isCollapsed?s.title:"")("nzMatchRouter",s.router),e.xp6(1),e.Q6J("ngIf",s.icon),e.xp6(2),e.Oqu(s.title)}}function Ye(g,x){if(1&g&&e._UZ(0,"i",27),2&g){const s=e.oxw().$implicit;e.Q6J("nzType",s.icon)}}function Ut(g,x){if(1&g&&(e.TgZ(0,"li",30),e.YNc(1,Ye,1,1,"i",26),e._uU(2),e.qZA()),2&g){const s=x.$implicit,d=e.oxw(2).$implicit;e.Q6J("routerLink",s.router)("nzDisabled",s.disabled)("nzMatchRouter",d.router),e.xp6(1),e.Q6J("ngIf",s.icon),e.xp6(1),e.hij(" ",s.title," ")}}function Qt(g,x){if(1&g&&(e.TgZ(0,"li",28)(1,"ul"),e.YNc(2,Ut,3,5,"li",29),e.qZA()()),2&g){const s=e.oxw().$implicit;e.Q6J("nzTitle",s.title)("nzIcon",s.icon)("nzOpen",s.open)("nzDisabled",s.disabled),e.xp6(2),e.Q6J("ngForOf",s.children)}}function zn(g,x){if(1&g&&(e.ynx(0),e.YNc(1,it,4,6,"li",23),e.YNc(2,Qt,3,5,"li",24),e.BQk()),2&g){const s=x.$implicit;e.xp6(1),e.Q6J("ngIf",!s.children),e.xp6(1),e.Q6J("ngIf",s.children)}}function De(g,x){1&g&&e._UZ(0,"img",31)}let _t=(()=>{class g{constructor(s,d,_){this.rs=s,this.us=d,this.route=_,this.isCollapsed=!1,this.menus=[],this.tabs=[{url:"welcome"}],this.version={version:"1.0.0"},this.initMenu()}ngOnInit(){this.rs.get("system/version").subscribe(s=>{this.version=s.data})}noop(){}initMenu(){this.menus=Ze}closeTab(s){this.tabs.splice(s.index,1)}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Fe.s),e.Y36(je.K),e.Y36(Me.F0))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-main"]],decls:39,vars:13,consts:[[1,"app-layout"],["nzCollapsible","","nzBreakpoint","md",1,"menu-sidebar",3,"nzCollapsed","nzTrigger","nzCollapsedChange"],[1,"sidebar-logo"],["href","https://iot-master.com","target","_blank"],["src","assets/iot.svg","alt","logo"],["nz-menu","","nzTheme","dark","nzMode","inline",3,"nzInlineCollapsed"],[4,"ngFor","ngForOf"],[1,"app-header"],[1,"header-trigger",3,"click"],["nz-icon","",1,"trigger",3,"nzType"],[2,"display","inline-block",3,"nzAutoGenerate"],[1,"header-right"],["href","https://github.com/zgwit/iot-master","target","_blank"],["nz-icon","","nzType","github","nzTheme","outline"],["nzType","vertical"],["href","https://docs.iot-master.com","target","_blank"],["nz-icon","","nzType","book","nzTheme","outline"],["nz-popover","","nzPopoverPlacement","bottomRight",3,"nzPopoverContent"],["nz-icon","","nzType","customer-service","nzTheme","outline"],["support",""],["nz-icon","","nzType","user","nzTheme","outline"],[1,"app-footer"],["href","https://zgwit.com","target","_blank"],["nz-menu-item","","nz-tooltip","","nzTooltipPlacement","right","nzMatchRouterExact","",3,"routerLink","nzDisabled","nzTooltipTitle","nzMatchRouter",4,"ngIf"],["nz-submenu","",3,"nzTitle","nzIcon","nzOpen","nzDisabled",4,"ngIf"],["nz-menu-item","","nz-tooltip","","nzTooltipPlacement","right","nzMatchRouterExact","",3,"routerLink","nzDisabled","nzTooltipTitle","nzMatchRouter"],["nz-icon","","nzTheme","outline",3,"nzType",4,"ngIf"],["nz-icon","","nzTheme","outline",3,"nzType"],["nz-submenu","",3,"nzTitle","nzIcon","nzOpen","nzDisabled"],["nz-menu-item","","nzMatchRouterExact","",3,"routerLink","nzDisabled","nzMatchRouter",4,"ngFor","ngForOf"],["nz-menu-item","","nzMatchRouterExact","",3,"routerLink","nzDisabled","nzMatchRouter"],["src","/assets/wx.png"]],template:function(s,d){if(1&s&&(e.TgZ(0,"nz-layout",0)(1,"nz-sider",1),e.NdJ("nzCollapsedChange",function(w){return d.isCollapsed=w}),e.TgZ(2,"div",2)(3,"a",3),e._UZ(4,"img",4),e.TgZ(5,"h1"),e._uU(6,"\u7269\u8054\u5927\u5e08"),e.qZA()()(),e.TgZ(7,"ul",5),e.YNc(8,zn,3,2,"ng-container",6),e.qZA()(),e.TgZ(9,"nz-layout")(10,"nz-header")(11,"div",7)(12,"span",8),e.NdJ("click",function(){return d.isCollapsed=!d.isCollapsed}),e._UZ(13,"i",9),e.qZA(),e._UZ(14,"nz-breadcrumb",10),e.TgZ(15,"span",11)(16,"a",12),e._UZ(17,"i",13),e._uU(18," \u5f00\u6e90\u5730\u5740 "),e.qZA(),e._UZ(19,"nz-divider",14),e.TgZ(20,"a",15),e._UZ(21,"i",16),e._uU(22," \u5e2e\u52a9\u6587\u6863 "),e.qZA(),e._UZ(23,"nz-divider",14),e.TgZ(24,"a",17),e._UZ(25,"i",18),e._uU(26," \u8054\u7cfb\u5ba2\u670d "),e.qZA(),e.YNc(27,De,1,0,"ng-template",null,19,e.W1O),e._UZ(29,"nz-divider",14),e.TgZ(30,"span"),e._UZ(31,"i",20),e._uU(32),e.qZA()()()(),e.TgZ(33,"nz-content"),e._UZ(34,"router-outlet"),e.qZA(),e.TgZ(35,"nz-footer",21),e._uU(36),e.TgZ(37,"a",22),e._uU(38,"\u65e0\u9521\u771f\u683c\u667a\u80fd\u79d1\u6280\u6709\u9650\u516c\u53f8"),e.qZA()()()()),2&s){const _=e.MAs(28);e.xp6(1),e.Q6J("nzCollapsed",d.isCollapsed)("nzTrigger",null),e.xp6(6),e.Q6J("nzInlineCollapsed",d.isCollapsed),e.xp6(1),e.Q6J("ngForOf",d.menus),e.xp6(5),e.Q6J("nzType",d.isCollapsed?"menu-unfold":"menu-fold"),e.xp6(1),e.Q6J("nzAutoGenerate",!0),e.xp6(10),e.Q6J("nzPopoverContent",_),e.xp6(8),e.hij(" ",(null==d.us.user?null:d.us.user.nickname)||(null==d.us.user?null:d.us.user.username)," "),e.xp6(4),e.xDo(" \u7269\u8054\u5927\u5e08 ",d.version.version," ",d.version.runtime," ",d.version.build," ",d.version.git," gin@",d.version.gin," \xa9 2016~2022 ")}},directives:[$,F,he.wO,k.sg,k.O5,he.r9,Ce.w,Se.SY,Me.rH,K.Ls,he.rY,L,hr,tn.g,Zt,q,Me.lC,W],styles:["[_nghost-%COMP%]{display:flex;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.app-layout[_ngcontent-%COMP%]{height:100vh}.menu-sidebar[_ngcontent-%COMP%]{position:relative;z-index:10;min-height:100vh;overflow-y:auto;box-shadow:2px 0 6px #00152959}.menu-sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit}.header-trigger[_ngcontent-%COMP%]{height:64px;padding:20px 24px;font-size:20px;cursor:pointer;transition:all .3s,padding 0s}.trigger[_ngcontent-%COMP%]:hover{color:#1890ff}.header-right[_ngcontent-%COMP%]{float:right;font-size:16px;padding:5px 10px}.sidebar-logo[_ngcontent-%COMP%]{position:relative;height:64px;padding-left:24px;overflow:hidden;line-height:64px;transition:all .3s}.sidebar-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:inline-block;height:32px;width:32px;vertical-align:middle}.sidebar-logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:inline-block;margin:0 0 0 20px;color:#fff;font-weight:600;font-size:14px;font-family:Avenir,Helvetica Neue,Arial,Helvetica,sans-serif;vertical-align:middle}nz-header[_ngcontent-%COMP%]{padding:0;width:100%;z-index:2}.app-header[_ngcontent-%COMP%]{position:relative;height:64px;padding:0;box-shadow:0 1px 4px #00152914;overflow:hidden}nz-content[_ngcontent-%COMP%]{padding:10px;overflow:auto;flex:1}.inner-content[_ngcontent-%COMP%]{padding:10px;height:100%}.app-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit}"]}),g})(),cr=(()=>{class g{constructor(s,d){this.router=s,this.rs=d}ngOnInit(){}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.F0),e.Y36(Fe.s))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-unknown"]],decls:2,vars:0,template:function(s,d){1&s&&(e.TgZ(0,"p"),e._uU(1,"\u8def\u7531\u9519\u8bef\uff0c\u9875\u9762\u627e\u4e0d\u5230"),e.qZA())},styles:[""]}),g})(),_n=(()=>{class g{constructor(s){this.router=s}canActivate(s,d){return localStorage.removeItem("token"),this.router.parseUrl("/login")}}return g.\u0275fac=function(s){return new(s||g)(e.LFG(Me.F0))},g.\u0275prov=e.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();var yn=J(1894),gn=J(7484),Pr=J(9646),qe=J(515),yt=J(4986),we=J(8306),Pe=J(4482),Qe=J(5403),Ie=J(8421);const Ve={leading:!0,trailing:!1};var Mt=J(5963);var Ft=J(3900);class jn{constructor(x){this.changes=x}static of(x){return new jn(x)}notEmpty(x){if(this.changes[x]){const s=this.changes[x].currentValue;if(null!=s)return(0,Pr.of)(s)}return qe.E}has(x){return this.changes[x]?(0,Pr.of)(this.changes[x].currentValue):qe.E}notFirst(x){return this.changes[x]&&!this.changes[x].isFirstChange()?(0,Pr.of)(this.changes[x].currentValue):qe.E}notFirstAndEmpty(x){if(this.changes[x]&&!this.changes[x].isFirstChange()){const s=this.changes[x].currentValue;if(null!=s)return(0,Pr.of)(s)}return qe.E}}const Nr=new e.OlP("NGX_ECHARTS_CONFIG");let ti=(()=>{class g{constructor(s,d,_){this.el=d,this.ngZone=_,this.autoResize=!0,this.loadingType="default",this.chartInit=new e.vpe,this.optionsError=new e.vpe,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartPieSelectChanged=this.createLazyEvent("pieselectchanged"),this.chartPieSelected=this.createLazyEvent("pieselected"),this.chartPieUnselected=this.createLazyEvent("pieunselected"),this.chartMapSelectChanged=this.createLazyEvent("mapselectchanged"),this.chartMapSelected=this.createLazyEvent("mapselected"),this.chartMapUnselected=this.createLazyEvent("mapunselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartFocusNodeAdjacency=this.createLazyEvent("focusnodeadjacency"),this.chartUnfocusNodeAdjacency=this.createLazyEvent("unfocusnodeadjacency"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.resize$=new O.x,this.echarts=s.echarts}ngOnChanges(s){const d=jn.of(s);d.notFirstAndEmpty("options").subscribe(_=>this.onOptionsChange(_)),d.notFirstAndEmpty("merge").subscribe(_=>this.setOption(_)),d.has("loading").subscribe(_=>this.toggleLoading(!!_)),d.notFirst("theme").subscribe(()=>this.refreshChart())}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe(function ln(g,x=yt.z,s=Ve){const d=(0,Mt.H)(g,x);return function tt(g,{leading:x,trailing:s}=Ve){return(0,Pe.e)((d,_)=>{let w=!1,me=null,Re=null,at=!1;const ft=()=>{null==Re||Re.unsubscribe(),Re=null,s&&(Ot(),at&&_.complete())},xt=()=>{Re=null,at&&_.complete()},Bt=Cn=>Re=(0,Ie.Xf)(g(Cn)).subscribe(new Qe.Q(_,ft,xt)),Ot=()=>{if(w){w=!1;const Cn=me;me=null,_.next(Cn),!at&&Bt(Cn)}};d.subscribe(new Qe.Q(_,Cn=>{w=!0,me=Cn,(!Re||Re.closed)&&(x?Ot():Bt(Cn))},()=>{at=!0,(!(s&&w&&Re)||Re.closed)&&_.complete()}))})}(()=>d,s)}(100,yt.z,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(()=>{this.animationFrameID=window.requestAnimationFrame(()=>this.resize$.next())})),this.resizeOb.observe(this.el.nativeElement))}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(s){this.chart&&(s?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading())}setOption(s,d){if(this.chart)try{this.chart.setOption(s,d)}catch(_){console.error(_),this.optionsError.emit(_)}}refreshChart(){return(0,j.mG)(this,void 0,void 0,function*(){this.dispose(),yield this.initChart()})}createChart(){const s=this.el.nativeElement;if(window&&window.getComputedStyle){const d=window.getComputedStyle(s,null).getPropertyValue("height");(!d||"0px"===d)&&(!s.style.height||"0px"===s.style.height)&&(s.style.height="400px")}return this.ngZone.runOutsideAngular(()=>("function"==typeof this.echarts?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:_})=>_(s,this.theme,this.initOpts)))}initChart(){return(0,j.mG)(this,void 0,void 0,function*(){yield this.onOptionsChange(this.options),this.merge&&this.chart&&this.setOption(this.merge)})}onOptionsChange(s){return(0,j.mG)(this,void 0,void 0,function*(){!s||(this.chart||(this.chart=yield this.createChart(),this.chartInit.emit(this.chart)),this.setOption(this.options,!0))})}createLazyEvent(s){return this.chartInit.pipe((0,Ft.w)(d=>new we.y(_=>(d.on(s,w=>this.ngZone.run(()=>_.next(w))),()=>{this.chart&&(this.chart.isDisposed()||d.off(s))}))))}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Nr),e.Y36(e.SBq),e.Y36(e.R0b))},g.\u0275dir=e.lG2({type:g,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",loading:"loading",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartPieSelectChanged:"chartPieSelectChanged",chartPieSelected:"chartPieSelected",chartPieUnselected:"chartPieUnselected",chartMapSelectChanged:"chartMapSelectChanged",chartMapSelected:"chartMapSelected",chartMapUnselected:"chartMapUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartFocusNodeAdjacency:"chartFocusNodeAdjacency",chartUnfocusNodeAdjacency:"chartUnfocusNodeAdjacency",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],features:[e.TTD]}),g})(),ni=(()=>{class g{static forRoot(s){return{ngModule:g,providers:[{provide:Nr,useValue:s}]}}static forChild(){return{ngModule:g}}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[[]]}),g})(),Cr=(()=>{class g{constructor(s){this.rs=s,this.interval=5e3,this.options={},this.last={busy:0,total:0},this.info={},this.stats={usage:0},this.load(),this.loadInfo()}ngOnInit(){this.handle=setInterval(()=>{this.load()},this.interval)}ngOnDestroy(){clearInterval(this.handle)}loadInfo(){this.rs.get("system/cpu-info").subscribe(s=>{console.log(s.data),this.info=s.data})}load(){this.rs.get("system/cpu").subscribe(s=>{let d=s.data.user+s.data.system,_=d+s.data.idle,w=(d-this.last.busy)/(_-this.last.total)*100;this.last.busy=d,this.last.total=_,this.stats.usage=w,this.options={title:{text:"CPU",left:"center"},tooltip:{formatter:"{c}%"},series:[{name:"CPU",type:"gauge",data:[{value:Math.round(w),name:"CPU"}]}]}})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Fe.s))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-dash-cpu"]],inputs:{interval:"interval"},decls:3,vars:3,consts:[["echarts","",3,"options"]],template:function(s,d){1&s&&(e._UZ(0,"div",0),e.TgZ(1,"div"),e._uU(2),e.qZA()),2&s&&(e.Q6J("options",d.options),e.xp6(2),e.AsE(" ",d.info.cores," x ",d.info.modelName,"\n"))},directives:[ti],styles:[""]}),g})();var $t=J(855);let ri=(()=>{class g{static transformOne(s,d){return $t(s,d)}transform(s,d){return Array.isArray(s)?s.map(_=>g.transformOne(_,d)):g.transformOne(s,d)}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275pipe=e.Yjl({name:"filesize",type:g,pure:!0}),g})(),Ra=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({}),g})(),Na=(()=>{class g{constructor(s){this.rs=s,this.interval=3e4,this.info={used:0,total:0},this.options={},this.load()}ngOnInit(){this.handle=setInterval(()=>{this.load()},this.interval)}ngOnDestroy(){clearInterval(this.handle)}load(){this.rs.get("system/memory").subscribe(s=>{this.info=s.data,this.options={title:{text:"\u5185\u5b58",left:"center"},color:["#177DDC","rgba(255,255,255,0.08)","#E6EBF8"],tooltip:{valueFormatter:d=>$t(d)},series:[{type:"pie",radius:"65%",center:["50%","50%"],avoidLabelOverlap:!1,label:{show:!1},labelLine:{show:!1},data:[{value:this.info.used,name:"\u5df2\u7528"},{value:this.info.available,name:"\u53ef\u7528"}]}]}})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Fe.s))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-dash-mem"]],inputs:{interval:"interval"},decls:6,vars:11,consts:[["echarts","",3,"options"]],template:function(s,d){1&s&&(e._UZ(0,"div",0),e.TgZ(1,"div"),e._uU(2),e.ALo(3,"filesize"),e.ALo(4,"filesize"),e.ALo(5,"number"),e.qZA()),2&s&&(e.Q6J("options",d.options),e.xp6(2),e.lnq(" ",e.lcZ(3,4,d.info.used)," / ",e.lcZ(4,6,d.info.total)," ",e.xi3(5,8,d.info.usedPercent,"1.0-2"),"%\n"))},directives:[ti],pipes:[ri,k.JJ],styles:[""]}),g})();function ar(g,x){if(1&g&&(e.ynx(0),e._UZ(1,"i",8),e.BQk()),2&g){const s=e.oxw(3);e.xp6(1),e.Q6J("nzType",s.icon)}}function Ir(g,x){if(1&g&&(e.ynx(0),e._uU(1),e.BQk()),2&g){const s=x.$implicit,d=e.oxw(4);e.xp6(1),e.hij(" ",s(d.nzPercent)," ")}}const Fa=function(g){return{$implicit:g}};function Yi(g,x){if(1&g&&e.YNc(0,Ir,2,1,"ng-container",9),2&g){const s=e.oxw(3);e.Q6J("nzStringTemplateOutlet",s.formatter)("nzStringTemplateOutletContext",e.VKq(2,Fa,s.nzPercent))}}function Ba(g,x){if(1&g&&(e.TgZ(0,"span",5),e.YNc(1,ar,2,1,"ng-container",6),e.YNc(2,Yi,1,4,"ng-template",null,7,e.W1O),e.qZA()),2&g){const s=e.MAs(3),d=e.oxw(2);e.xp6(1),e.Q6J("ngIf",("exception"===d.status||"success"===d.status)&&!d.nzFormat)("ngIfElse",s)}}function Ds(g,x){if(1&g&&e.YNc(0,Ba,4,2,"span",4),2&g){const s=e.oxw();e.Q6J("ngIf",s.nzShowInfo)}}function Kt(g,x){if(1&g&&e._UZ(0,"div",17),2&g){const s=e.oxw(4);e.Udp("width",s.nzSuccessPercent,"%")("border-radius","round"===s.nzStrokeLinecap?"100px":"0")("height",s.strokeWidth,"px")}}function Za(g,x){if(1&g&&(e.TgZ(0,"div",13)(1,"div",14),e._UZ(2,"div",15),e.YNc(3,Kt,1,6,"div",16),e.qZA()()),2&g){const s=e.oxw(3);e.xp6(2),e.Udp("width",s.nzPercent,"%")("border-radius","round"===s.nzStrokeLinecap?"100px":"0")("background",s.isGradient?null:s.nzStrokeColor)("background-image",s.isGradient?s.lineGradient:null)("height",s.strokeWidth,"px"),e.xp6(1),e.Q6J("ngIf",s.nzSuccessPercent||0===s.nzSuccessPercent)}}function Ua(g,x){}function Va(g,x){if(1&g&&(e.ynx(0),e.YNc(1,Za,4,11,"div",11),e.YNc(2,Ua,0,0,"ng-template",12),e.BQk()),2&g){const s=e.oxw(2),d=e.MAs(1);e.xp6(1),e.Q6J("ngIf",!s.isSteps),e.xp6(1),e.Q6J("ngTemplateOutlet",d)}}function qt(g,x){1&g&&e._UZ(0,"div",20),2&g&&e.Q6J("ngStyle",x.$implicit)}function kr(g,x){}function Ei(g,x){if(1&g&&(e.TgZ(0,"div",18),e.YNc(1,qt,1,1,"div",19),e.YNc(2,kr,0,0,"ng-template",12),e.qZA()),2&g){const s=e.oxw(2),d=e.MAs(1);e.xp6(1),e.Q6J("ngForOf",s.steps),e.xp6(1),e.Q6J("ngTemplateOutlet",d)}}function es(g,x){if(1&g&&(e.TgZ(0,"div"),e.YNc(1,Va,3,2,"ng-container",2),e.YNc(2,Ei,3,2,"div",10),e.qZA()),2&g){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",!s.isSteps),e.xp6(1),e.Q6J("ngIf",s.isSteps)}}function or(g,x){if(1&g&&(e.O4$(),e._UZ(0,"stop")),2&g){const s=x.$implicit;e.uIk("offset",s.offset)("stop-color",s.color)}}function oo(g,x){if(1&g&&(e.O4$(),e.TgZ(0,"defs")(1,"linearGradient",24),e.YNc(2,or,1,2,"stop",25),e.qZA()()),2&g){const s=e.oxw(2);e.xp6(1),e.Q6J("id","gradient-"+s.gradientId),e.xp6(1),e.Q6J("ngForOf",s.circleGradient)}}function Ha(g,x){if(1&g&&(e.O4$(),e._UZ(0,"path",26)),2&g){const s=x.$implicit,d=e.oxw(2);e.Q6J("ngStyle",s.strokePathStyle),e.uIk("d",d.pathString)("stroke-linecap",d.nzStrokeLinecap)("stroke",s.stroke)("stroke-width",d.nzPercent?d.strokeWidth:0)}}function As(g,x){1&g&&e.O4$()}function uu(g,x){if(1&g&&(e.TgZ(0,"div",14),e.O4$(),e.TgZ(1,"svg",21),e.YNc(2,oo,3,2,"defs",2),e._UZ(3,"path",22),e.YNc(4,Ha,1,5,"path",23),e.qZA(),e.YNc(5,As,0,0,"ng-template",12),e.qZA()),2&g){const s=e.oxw(),d=e.MAs(1);e.Udp("width",s.nzWidth,"px")("height",s.nzWidth,"px")("font-size",.15*s.nzWidth+6,"px"),e.ekj("ant-progress-circle-gradient",s.isGradient),e.xp6(2),e.Q6J("ngIf",s.isGradient),e.xp6(1),e.Q6J("ngStyle",s.trailPathStyle),e.uIk("stroke-width",s.strokeWidth)("d",s.pathString),e.xp6(1),e.Q6J("ngForOf",s.progressCirclePath)("ngForTrackBy",s.trackByFn),e.xp6(1),e.Q6J("ngTemplateOutlet",d)}}const In=g=>{let x=[];return Object.keys(g).forEach(s=>{const d=g[s],_=function ua(g){return+g.replace("%","")}(s);isNaN(_)||x.push({key:_,value:d})}),x=x.sort((s,d)=>s.key-d.key),x};let ns=0;const Qi="progress",Ri=new Map([["success","check"],["exception","close"]]),so=new Map([["normal","#108ee9"],["exception","#ff5500"],["success","#87d068"]]),Es=g=>`${g}%`;let Ms=(()=>{class g{constructor(s,d,_){this.cdr=s,this.nzConfigService=d,this.directionality=_,this._nzModuleName=Qi,this.nzShowInfo=!0,this.nzWidth=132,this.nzStrokeColor=void 0,this.nzSize="default",this.nzPercent=0,this.nzStrokeWidth=void 0,this.nzGapDegree=void 0,this.nzType="line",this.nzGapPosition="top",this.nzStrokeLinecap="round",this.nzSteps=0,this.steps=[],this.lineGradient=null,this.isGradient=!1,this.isSteps=!1,this.gradientId=ns++,this.progressCirclePath=[],this.trailPathStyle=null,this.dir="ltr",this.trackByFn=w=>`${w}`,this.cachedStatus="normal",this.inferredStatus="normal",this.destroy$=new O.x}get formatter(){return this.nzFormat||Es}get status(){return this.nzStatus||this.inferredStatus}get strokeWidth(){return this.nzStrokeWidth||("line"===this.nzType&&"small"!==this.nzSize?8:6)}get isCircleStyle(){return"circle"===this.nzType||"dashboard"===this.nzType}ngOnChanges(s){const{nzSteps:d,nzGapPosition:_,nzStrokeLinecap:w,nzStrokeColor:me,nzGapDegree:Re,nzType:at,nzStatus:ft,nzPercent:xt,nzSuccessPercent:Bt,nzStrokeWidth:Ot}=s;ft&&(this.cachedStatus=this.nzStatus||this.cachedStatus),(xt||Bt)&&(parseInt(this.nzPercent.toString(),10)>=100?((0,fe.DX)(this.nzSuccessPercent)&&this.nzSuccessPercent>=100||void 0===this.nzSuccessPercent)&&(this.inferredStatus="success"):this.inferredStatus=this.cachedStatus),(ft||xt||Bt||me)&&this.updateIcon(),me&&this.setStrokeColor(),(_||w||Re||at||xt||me||me)&&this.getCirclePaths(),(xt||d||Ot)&&(this.isSteps=this.nzSteps>0,this.isSteps&&this.getSteps())}ngOnInit(){var s;this.nzConfigService.getConfigChangeEventForComponent(Qi).pipe((0,ee.R)(this.destroy$)).subscribe(()=>{this.updateIcon(),this.setStrokeColor(),this.getCirclePaths()}),null===(s=this.directionality.change)||void 0===s||s.pipe((0,ee.R)(this.destroy$)).subscribe(d=>{this.dir=d,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}updateIcon(){const s=Ri.get(this.status);this.icon=s?s+(this.isCircleStyle?"-o":"-circle-fill"):""}getSteps(){const s=Math.floor(this.nzSteps*(this.nzPercent/100)),d="small"===this.nzSize?2:14,_=[];for(let w=0;w<this.nzSteps;w++){let me;w<=s-1&&(me=this.nzStrokeColor),_.push({backgroundColor:`${me}`,width:`${d}px`,height:`${this.strokeWidth}px`})}this.steps=_}getCirclePaths(){if(!this.isCircleStyle)return;const s=(0,fe.DX)(this.nzSuccessPercent)?[this.nzSuccessPercent,this.nzPercent]:[this.nzPercent],d=50-this.strokeWidth/2,w=2*Math.PI*d,me=this.nzGapDegree||("circle"===this.nzType?0:75);let Re=0,at=-d,ft=0,xt=-2*d;switch(this.nzGapPosition||("circle"===this.nzType?"top":"bottom")){case"left":Re=-d,at=0,ft=2*d,xt=0;break;case"right":Re=d,at=0,ft=-2*d,xt=0;break;case"bottom":at=d,xt=2*d}this.pathString=`M 50,50 m ${Re},${at}\n       a ${d},${d} 0 1 1 ${ft},${-xt}\n       a ${d},${d} 0 1 1 ${-ft},${xt}`,this.trailPathStyle={strokeDasharray:`${w-me}px ${w}px`,strokeDashoffset:`-${me/2}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s"},this.progressCirclePath=s.map((Bt,Ot)=>{const Cn=2===s.length&&0===Ot;return{stroke:this.isGradient&&!Cn?`url(#gradient-${this.gradientId})`:null,strokePathStyle:{stroke:this.isGradient?null:Cn?so.get("success"):this.nzStrokeColor,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s",strokeDasharray:`${(Bt||0)/100*(w-me)}px ${w}px`,strokeDashoffset:`-${me/2}px`}}}).reverse()}setStrokeColor(){const s=this.nzStrokeColor,d=this.isGradient=!!s&&"string"!=typeof s;d&&!this.isCircleStyle?this.lineGradient=(g=>{const{from:x="#1890ff",to:s="#1890ff",direction:d="to right"}=g,_=(0,j._T)(g,["from","to","direction"]);return 0!==Object.keys(_).length?`linear-gradient(${d}, ${In(_).map(({key:me,value:Re})=>`${Re} ${me}%`).join(", ")})`:`linear-gradient(${d}, ${x}, ${s})`})(s):d&&this.isCircleStyle?this.circleGradient=(g=>In(this.nzStrokeColor).map(({key:x,value:s})=>({offset:`${x}%`,color:s})))():(this.lineGradient=null,this.circleGradient=[])}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(e.sBO),e.Y36(un.jY),e.Y36(ne.Is,8))},g.\u0275cmp=e.Xpm({type:g,selectors:[["nz-progress"]],inputs:{nzShowInfo:"nzShowInfo",nzWidth:"nzWidth",nzStrokeColor:"nzStrokeColor",nzSize:"nzSize",nzFormat:"nzFormat",nzSuccessPercent:"nzSuccessPercent",nzPercent:"nzPercent",nzStrokeWidth:"nzStrokeWidth",nzGapDegree:"nzGapDegree",nzStatus:"nzStatus",nzType:"nzType",nzGapPosition:"nzGapPosition",nzStrokeLinecap:"nzStrokeLinecap",nzSteps:"nzSteps"},exportAs:["nzProgress"],features:[e.TTD],decls:5,vars:15,consts:[["progressInfoTemplate",""],[3,"ngClass"],[4,"ngIf"],["class","ant-progress-inner",3,"width","height","fontSize","ant-progress-circle-gradient",4,"ngIf"],["class","ant-progress-text",4,"ngIf"],[1,"ant-progress-text"],[4,"ngIf","ngIfElse"],["formatTemplate",""],["nz-icon","",3,"nzType"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],["class","ant-progress-steps-outer",4,"ngIf"],["class","ant-progress-outer",4,"ngIf"],[3,"ngTemplateOutlet"],[1,"ant-progress-outer"],[1,"ant-progress-inner"],[1,"ant-progress-bg"],["class","ant-progress-success-bg",3,"width","border-radius","height",4,"ngIf"],[1,"ant-progress-success-bg"],[1,"ant-progress-steps-outer"],["class","ant-progress-steps-item",3,"ngStyle",4,"ngFor","ngForOf"],[1,"ant-progress-steps-item",3,"ngStyle"],["viewBox","0 0 100 100",1,"ant-progress-circle"],["stroke","#f3f3f3","fill-opacity","0",1,"ant-progress-circle-trail",3,"ngStyle"],["class","ant-progress-circle-path","fill-opacity","0",3,"ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],["x1","100%","y1","0%","x2","0%","y2","0%",3,"id"],[4,"ngFor","ngForOf"],["fill-opacity","0",1,"ant-progress-circle-path",3,"ngStyle"]],template:function(s,d){1&s&&(e.YNc(0,Ds,1,1,"ng-template",null,0,e.W1O),e.TgZ(2,"div",1),e.YNc(3,es,3,2,"div",2),e.YNc(4,uu,6,15,"div",3),e.qZA()),2&s&&(e.xp6(2),e.ekj("ant-progress-line","line"===d.nzType)("ant-progress-small","small"===d.nzSize)("ant-progress-show-info",d.nzShowInfo)("ant-progress-circle",d.isCircleStyle)("ant-progress-steps",d.isSteps)("ant-progress-rtl","rtl"===d.dir),e.Q6J("ngClass","ant-progress ant-progress-status-"+d.status),e.xp6(1),e.Q6J("ngIf","line"===d.nzType),e.xp6(1),e.Q6J("ngIf",d.isCircleStyle))},directives:[k.O5,K.Ls,ct.f,k.mk,k.tP,k.sg,k.PC],encapsulation:2,changeDetection:0}),(0,j.gn)([(0,un.oS)()],g.prototype,"nzShowInfo",void 0),(0,j.gn)([(0,un.oS)()],g.prototype,"nzStrokeColor",void 0),(0,j.gn)([(0,un.oS)()],g.prototype,"nzSize",void 0),(0,j.gn)([(0,fe.Rn)()],g.prototype,"nzSuccessPercent",void 0),(0,j.gn)([(0,fe.Rn)()],g.prototype,"nzPercent",void 0),(0,j.gn)([(0,un.oS)(),(0,fe.Rn)()],g.prototype,"nzStrokeWidth",void 0),(0,j.gn)([(0,un.oS)(),(0,fe.Rn)()],g.prototype,"nzGapDegree",void 0),(0,j.gn)([(0,un.oS)()],g.prototype,"nzGapPosition",void 0),(0,j.gn)([(0,un.oS)()],g.prototype,"nzStrokeLinecap",void 0),(0,j.gn)([(0,fe.Rn)()],g.prototype,"nzSteps",void 0),g})(),Ca=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[[ne.vT,k.ez,K.PV,ct.T]]}),g})();function gl(g,x){1&g&&e._UZ(0,"nz-divider")}function vl(g,x){if(1&g&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"div"),e._uU(4),e.ALo(5,"filesize"),e.ALo(6,"filesize"),e.qZA(),e._UZ(7,"nz-progress",1),e.ALo(8,"number"),e.YNc(9,gl,1,0,"nz-divider",2),e.qZA()),2&g){const s=x.$implicit,d=x.last;e.xp6(2),e.hij(" ",s.path," "),e.xp6(2),e.AsE(" ",e.lcZ(5,5,s.used)," / ",e.lcZ(6,7,s.total)," "),e.xp6(3),e.Q6J("nzPercent",e.xi3(8,9,s.usedPercent,"1.0-2")),e.xp6(2),e.Q6J("ngIf",!d)}}let Os=(()=>{class g{constructor(s){this.rs=s,this.info=[],this.load()}ngOnInit(){}ngOnDestroy(){}load(){this.rs.get("system/disk").subscribe(s=>{console.log("disk info",s),this.info=s.data})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Fe.s))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-dash-disk"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"nzPercent"],[4,"ngIf"]],template:function(s,d){1&s&&e.YNc(0,vl,10,12,"div",0),2&s&&e.Q6J("ngForOf",d.info)},directives:[k.sg,Ms,k.O5,tn.g],pipes:[ri,k.JJ],styles:[""]}),g})(),fi=(()=>{class g{constructor(){}ngOnInit(){}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-dash"]],decls:10,vars:22,consts:[[3,"nzGutter"],[3,"nzSpan","nzXs","nzSm","nzMd","nzLg","nzXl","nzXXl"]],template:function(s,d){1&s&&(e.TgZ(0,"nz-row",0)(1,"nz-col",1)(2,"nz-card"),e._UZ(3,"app-dash-cpu"),e.qZA()(),e.TgZ(4,"nz-col",1)(5,"nz-card"),e._UZ(6,"app-dash-mem"),e.qZA()(),e.TgZ(7,"nz-col",1)(8,"nz-card"),e._UZ(9,"app-dash-disk"),e.qZA()()()),2&s&&(e.Q6J("nzGutter",16),e.xp6(1),e.Q6J("nzSpan",12)("nzXs",24)("nzSm",24)("nzMd",12)("nzLg",8)("nzXl",8)("nzXXl",6),e.xp6(3),e.Q6J("nzSpan",12)("nzXs",24)("nzSm",24)("nzMd",12)("nzLg",8)("nzXl",8)("nzXXl",6),e.xp6(3),e.Q6J("nzSpan",12)("nzXs",24)("nzSm",24)("nzMd",12)("nzLg",8)("nzXl",8)("nzXXl",6))},directives:[yn.SK,yn.t3,gn.bd,Cr,Na,Os],styles:[""]}),g})(),Ps=(()=>{class g{constructor(){}ngOnInit(){}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-home"]],decls:4,vars:0,template:function(s,d){1&s&&(e.TgZ(0,"p"),e._uU(1,"TODO:"),e.qZA(),e.TgZ(2,"p"),e._uU(3,"\u6700\u8fd1\u8bbf\u95ee\u8bb0\u5f55\uff1a\u8bbe\u5907\uff0c\u9879\u76ee\u7b49\u7b49"),e.qZA())},styles:[""]}),g})();var sr=J(8090),Ln=J(7957),Gr=J(9279),et=J(592),xn=J(6042),Fr=J(5664),Rn=J(2643),Br=J(7904);const xa=["okBtn"],Wa=["cancelBtn"];function Mi(g,x){1&g&&(e.TgZ(0,"div",15),e._UZ(1,"span",16),e.qZA())}function Ta(g,x){if(1&g&&(e.ynx(0),e._UZ(1,"i",18),e.BQk()),2&g){const s=x.$implicit;e.xp6(1),e.Q6J("nzType",s||"exclamation-circle")}}function rs(g,x){if(1&g&&(e.ynx(0),e.YNc(1,Ta,2,1,"ng-container",8),e.TgZ(2,"div",17),e._uU(3),e.qZA(),e.BQk()),2&g){const s=e.oxw(2);e.xp6(1),e.Q6J("nzStringTemplateOutlet",s.nzIcon),e.xp6(2),e.Oqu(s.nzTitle)}}function lo(g,x){if(1&g&&(e.ynx(0),e._uU(1),e.BQk()),2&g){const s=e.oxw(2);e.xp6(1),e.Oqu(s.nzCancelText)}}function Is(g,x){1&g&&(e.ynx(0),e._uU(1),e.ALo(2,"nzI18n"),e.BQk()),2&g&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Modal.cancelText")))}function Ga(g,x){if(1&g&&(e.ynx(0),e._uU(1),e.BQk()),2&g){const s=e.oxw(2);e.xp6(1),e.Oqu(s.nzOkText)}}function Ja(g,x){1&g&&(e.ynx(0),e._uU(1),e.ALo(2,"nzI18n"),e.BQk()),2&g&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Modal.okText")))}function uo(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"div",2)(1,"div",3),e.YNc(2,Mi,2,0,"div",4),e.TgZ(3,"div",5)(4,"div")(5,"div",6)(6,"div",7),e.YNc(7,rs,4,2,"ng-container",8),e.qZA(),e.TgZ(8,"div",9)(9,"button",10,11),e.NdJ("click",function(){return e.CHM(s),e.oxw().onCancel()}),e.YNc(11,lo,2,1,"ng-container",12),e.YNc(12,Is,3,3,"ng-container",12),e.qZA(),e.TgZ(13,"button",13,14),e.NdJ("click",function(){return e.CHM(s),e.oxw().onConfirm()}),e.YNc(15,Ga,2,1,"ng-container",12),e.YNc(16,Ja,3,3,"ng-container",12),e.qZA()()()()()()()}if(2&g){const s=e.oxw();e.ekj("ant-popover-rtl","rtl"===s.dir),e.Q6J("cdkTrapFocusAutoCapture",null!==s.nzAutoFocus)("ngClass",s._classMap)("ngStyle",s.nzOverlayStyle)("@.disabled",null==s.noAnimation?null:s.noAnimation.nzNoAnimation)("nzNoAnimation",null==s.noAnimation?null:s.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),e.xp6(2),e.Q6J("ngIf",s.nzPopconfirmShowArrow),e.xp6(5),e.Q6J("nzStringTemplateOutlet",s.nzTitle),e.xp6(2),e.Q6J("nzSize","small"),e.uIk("cdkFocusInitial","cancel"===s.nzAutoFocus||null),e.xp6(2),e.Q6J("ngIf",s.nzCancelText),e.xp6(1),e.Q6J("ngIf",!s.nzCancelText),e.xp6(1),e.Q6J("nzSize","small")("nzType","danger"!==s.nzOkType?s.nzOkType:"primary")("nzDanger",s.nzOkDanger||"danger"===s.nzOkType),e.uIk("cdkFocusInitial","ok"===s.nzAutoFocus||null),e.xp6(2),e.Q6J("ngIf",s.nzOkText),e.xp6(1),e.Q6J("ngIf",!s.nzOkText)}}let er=(()=>{class g extends Se.Mg{constructor(s,d,_,w,me,Re){super(s,d,_,w,me,Re),this._nzModuleName="popconfirm",this.trigger="click",this.placement="top",this.nzCondition=!1,this.nzPopconfirmShowArrow=!0,this.nzPopconfirmBackdrop=!1,this.nzAutofocus=null,this.visibleChange=new e.vpe,this.nzOnCancel=new e.vpe,this.nzOnConfirm=new e.vpe,this.componentRef=this.hostView.createComponent(co)}getProxyPropertyMap(){return Object.assign({nzOkText:["nzOkText",()=>this.nzOkText],nzOkType:["nzOkType",()=>this.nzOkType],nzOkDanger:["nzOkDanger",()=>this.nzOkDanger],nzCancelText:["nzCancelText",()=>this.nzCancelText],nzCondition:["nzCondition",()=>this.nzCondition],nzIcon:["nzIcon",()=>this.nzIcon],nzPopconfirmShowArrow:["nzPopconfirmShowArrow",()=>this.nzPopconfirmShowArrow],nzPopconfirmBackdrop:["nzBackdrop",()=>this.nzPopconfirmBackdrop],nzAutoFocus:["nzAutoFocus",()=>this.nzAutofocus]},super.getProxyPropertyMap())}createComponent(){super.createComponent(),this.component.nzOnCancel.pipe((0,ee.R)(this.destroy$)).subscribe(()=>{this.nzOnCancel.emit()}),this.component.nzOnConfirm.pipe((0,ee.R)(this.destroy$)).subscribe(()=>{this.nzOnConfirm.emit()})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(e.SBq),e.Y36(e.s_b),e.Y36(e._Vd),e.Y36(e.Qsj),e.Y36(Sn.P,9),e.Y36(un.jY))},g.\u0275dir=e.lG2({type:g,selectors:[["","nz-popconfirm",""]],hostVars:2,hostBindings:function(s,d){2&s&&e.ekj("ant-popover-open",d.visible)},inputs:{arrowPointAtCenter:["nzPopconfirmArrowPointAtCenter","arrowPointAtCenter"],title:["nzPopconfirmTitle","title"],directiveTitle:["nz-popconfirm","directiveTitle"],trigger:["nzPopconfirmTrigger","trigger"],placement:["nzPopconfirmPlacement","placement"],origin:["nzPopconfirmOrigin","origin"],mouseEnterDelay:["nzPopconfirmMouseEnterDelay","mouseEnterDelay"],mouseLeaveDelay:["nzPopconfirmMouseLeaveDelay","mouseLeaveDelay"],overlayClassName:["nzPopconfirmOverlayClassName","overlayClassName"],overlayStyle:["nzPopconfirmOverlayStyle","overlayStyle"],visible:["nzPopconfirmVisible","visible"],nzOkText:"nzOkText",nzOkType:"nzOkType",nzOkDanger:"nzOkDanger",nzCancelText:"nzCancelText",nzIcon:"nzIcon",nzCondition:"nzCondition",nzPopconfirmShowArrow:"nzPopconfirmShowArrow",nzPopconfirmBackdrop:"nzPopconfirmBackdrop",nzAutofocus:"nzAutofocus"},outputs:{visibleChange:"nzPopconfirmVisibleChange",nzOnCancel:"nzOnCancel",nzOnConfirm:"nzOnConfirm"},exportAs:["nzPopconfirm"],features:[e.qOj]}),(0,j.gn)([(0,fe.yF)()],g.prototype,"arrowPointAtCenter",void 0),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzCondition",void 0),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzPopconfirmShowArrow",void 0),(0,j.gn)([(0,un.oS)()],g.prototype,"nzPopconfirmBackdrop",void 0),(0,j.gn)([(0,un.oS)()],g.prototype,"nzAutofocus",void 0),g})(),co=(()=>{class g extends Se.XK{constructor(s,d,_,w,me){super(s,_,me),this.elementRef=d,this.nzCondition=!1,this.nzPopconfirmShowArrow=!0,this.nzOkType="primary",this.nzOkDanger=!1,this.nzAutoFocus=null,this.nzOnCancel=new O.x,this.nzOnConfirm=new O.x,this._trigger="click",this.elementFocusedBeforeModalWasOpened=null,this._prefix="ant-popover",this.document=w}ngOnDestroy(){super.ngOnDestroy(),this.nzOnCancel.complete(),this.nzOnConfirm.complete()}show(){this.nzCondition?this.onConfirm():(this.capturePreviouslyFocusedElement(),super.show())}hide(){super.hide(),this.restoreFocus()}onCancel(){this.nzOnCancel.next(),super.hide()}onConfirm(){this.nzOnConfirm.next(),super.hide()}capturePreviouslyFocusedElement(){this.document&&(this.elementFocusedBeforeModalWasOpened=this.document.activeElement)}restoreFocus(){const s=this.elementFocusedBeforeModalWasOpened;if(s&&"function"==typeof s.focus){const d=this.document.activeElement,_=this.elementRef.nativeElement;(!d||d===this.document.body||d===_||_.contains(d))&&s.focus()}}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(e.sBO),e.Y36(e.SBq),e.Y36(ne.Is,8),e.Y36(k.K0,8),e.Y36(Sn.P,9))},g.\u0275cmp=e.Xpm({type:g,selectors:[["nz-popconfirm"]],viewQuery:function(s,d){if(1&s&&(e.Gf(xa,5,e.SBq),e.Gf(Wa,5,e.SBq)),2&s){let _;e.iGM(_=e.CRH())&&(d.okBtn=_),e.iGM(_=e.CRH())&&(d.cancelBtn=_)}},exportAs:["nzPopconfirmComponent"],features:[e.qOj],decls:2,vars:6,consts:[["cdkConnectedOverlay","","nzConnectedOverlay","",3,"cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayOpen","cdkConnectedOverlayPush","nzArrowPointAtCenter","overlayOutsideClick","detach","positionChange"],["overlay","cdkConnectedOverlay"],["cdkTrapFocus","",1,"ant-popover",3,"cdkTrapFocusAutoCapture","ngClass","ngStyle","nzNoAnimation"],[1,"ant-popover-content"],["class","ant-popover-arrow",4,"ngIf"],[1,"ant-popover-inner"],[1,"ant-popover-inner-content"],[1,"ant-popover-message"],[4,"nzStringTemplateOutlet"],[1,"ant-popover-buttons"],["nz-button","",3,"nzSize","click"],["cancelBtn",""],[4,"ngIf"],["nz-button","",3,"nzSize","nzType","nzDanger","click"],["okBtn",""],[1,"ant-popover-arrow"],[1,"ant-popover-arrow-content"],[1,"ant-popover-message-title"],["nz-icon","","nzTheme","fill",3,"nzType"]],template:function(s,d){1&s&&(e.YNc(0,uo,17,20,"ng-template",0,1,e.W1O),e.NdJ("overlayOutsideClick",function(w){return d.onClickOutside(w)})("detach",function(){return d.hide()})("positionChange",function(w){return d.onPositionChange(w)})),2&s&&e.Q6J("cdkConnectedOverlayHasBackdrop",d.nzBackdrop)("cdkConnectedOverlayOrigin",d.origin)("cdkConnectedOverlayPositions",d._positions)("cdkConnectedOverlayOpen",d._visible)("cdkConnectedOverlayPush",!0)("nzArrowPointAtCenter",d.nzArrowPointAtCenter)},directives:[xn.ix,st.pI,zt.hQ,Fr.mK,k.mk,k.PC,Sn.P,k.O5,ct.f,Ce.w,K.Ls,Rn.dQ],pipes:[Br.o9],encapsulation:2,data:{animation:[Sr.$C]},changeDetection:0}),g})(),xi=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[[ne.vT,k.ez,xn.sL,st.U8,Br.YI,K.PV,ct.T,zt.e4,Sn.g,Se.cg,Fr.rt]]}),g})();var fr=J(7448),xr=J(1485);function Ya(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",9),e.NdJ("dblclick",function(){const w=e.CHM(s).$implicit;return e.oxw().open(w)}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td",10),e.ALo(10,"dateString"),e._uU(11),e.ALo(12,"fromNow"),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td")(16,"a",11),e._uU(17,"\u8be6\u60c5"),e.qZA(),e._UZ(18,"nz-divider",12),e.TgZ(19,"a",11),e._uU(20,"\u7f16\u8f91"),e.qZA(),e._UZ(21,"nz-divider",12),e.TgZ(22,"a",13),e._uU(23," \u66f4\u591a "),e._UZ(24,"i",14),e.qZA(),e.TgZ(25,"nz-dropdown-menu",null,15)(27,"ul",16)(28,"li",17),e.NdJ("click",function(){const w=e.CHM(s).$implicit;return e.oxw().enable(w)}),e._uU(29,"\u542f\u7528"),e.qZA(),e.TgZ(30,"li",18),e.NdJ("nzOnConfirm",function(){const w=e.CHM(s).$implicit;return e.oxw().disable(w)}),e._uU(31,"\u7981\u7528 "),e.qZA(),e.TgZ(32,"li",19),e.NdJ("nzOnConfirm",function(){const _=e.CHM(s),w=_.$implicit,me=_.index;return e.oxw().remove(w,me)}),e._uU(33,"\u5220\u9664"),e.qZA()()()()()}if(2&g){const s=x.$implicit,d=e.MAs(26);e.xp6(2),e.Oqu(s.id),e.xp6(2),e.AsE("",s.disabled?"\u274c":"","",s.name,""),e.xp6(2),e.Oqu(s.type),e.xp6(2),e.Oqu(s.addr),e.xp6(1),e.Q6J("title",e.lcZ(10,13,s.created)),e.xp6(2),e.Oqu(e.lcZ(12,15,s.created)),e.xp6(3),e.Oqu(s.running?"\u5728\u7ebf":"\u79bb\u7ebf"),e.xp6(2),e.Q6J("routerLink","/admin/server/detail/"+s.id),e.xp6(3),e.Q6J("routerLink","/admin/server/edit/"+s.id),e.xp6(3),e.Q6J("nzDropdownMenu",d),e.xp6(6),e.Q6J("nzDisabled",!s.disabled),e.xp6(2),e.Q6J("nzDisabled",s.disabled)}}let Ni=(()=>{class g{constructor(s,d,_){this.router=s,this.rs=d,this.ms=_,this.datum=[],this.loading=!1,this.total=1,this.pageSize=20,this.pageIndex=1,this.filterType=[{text:"TCP\u670d\u52a1\u5668",value:"tcp-server"},{text:"TCP\u5ba2\u6237\u7aef",value:"tcp-client"},{text:"UDP\u670d\u52a1\u5668",value:"udp-server"},{text:"UDP\u5ba2\u6237\u7aef",value:"udp-client"},{text:"\u4e32\u53e3",value:"serial"}],this.params={filter:{}}}ngOnInit(){}search(s){this.pageIndex=1,this.params.skip=0,s?this.params.keyword={name:s,type:s,address:s}:delete this.params.keyword,this.load()}onQuery(s){(0,sr.F)(s,this.params),this.load()}load(){this.loading=!0,this.rs.post("server/list",this.params).subscribe(s=>{console.log("res",s),this.datum=s.data,this.total=s.total}).add(()=>{this.loading=!1})}create(){this.router.navigate(["admin/server/create"])}open(s){this.router.navigate(["/admin/server/detail/"+s.id])}remove(s,d){this.rs.get(`server/${s.id}/delete`).subscribe(_=>{this.datum.splice(d,1)})}enable(s){this.rs.get(`server/${s.id}/enable`).subscribe(d=>{s.disabled=!1})}disable(s){this.rs.get(`server/${s.id}/disable`).subscribe(d=>{s.disabled=!0})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.F0),e.Y36(Fe.s),e.Y36(Ln.Sf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-server"]],decls:20,vars:14,consts:[[3,"loading","create","refresh","search"],["nzSize","small",3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzQueryParams"],["nzColumnKey","id",3,"nzSortFn"],["nzColumnKey","name",3,"nzSortFn"],["nzColumnKey","type",3,"nzFilters","nzFilterFn"],["nzColumnKey","addr",3,"nzSortFn"],["nzColumnKey","created",3,"nzSortFn"],["nzWidth","100"],[3,"dblclick",4,"ngFor","ngForOf"],[3,"dblclick"],[3,"title"],[3,"routerLink"],["nzType","vertical"],["nz-dropdown","","nzTrigger","click",3,"nzDropdownMenu"],["nz-icon","","nzType","down"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"nzDisabled","click"],["nz-menu-item","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u7981\u7528\uff1f",3,"nzDisabled","nzOnConfirm"],["nz-menu-item","","nzDanger","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664\uff1f",3,"nzOnConfirm"]],template:function(s,d){1&s&&(e.TgZ(0,"app-page-list",0),e.NdJ("create",function(){return d.create()})("refresh",function(){return d.load()})("search",function(w){return d.search(w)}),e.TgZ(1,"nz-table",1),e.NdJ("nzQueryParams",function(w){return d.onQuery(w)}),e.TgZ(2,"thead")(3,"tr")(4,"th",2),e._uU(5,"ID"),e.qZA(),e.TgZ(6,"th",3),e._uU(7,"\u540d\u79f0"),e.qZA(),e.TgZ(8,"th",4),e._uU(9,"\u7c7b\u578b"),e.qZA(),e.TgZ(10,"th",5),e._uU(11,"\u5730\u5740"),e.qZA(),e.TgZ(12,"th",6),e._uU(13,"\u521b\u5efa\u65f6\u95f4"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"\u72b6\u6001"),e.qZA(),e.TgZ(16,"th",7),e._uU(17,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,Ya,34,17,"tr",8),e.qZA()()()),2&s&&(e.Q6J("loading",d.loading),e.xp6(1),e.Q6J("nzData",d.datum)("nzFrontPagination",!1)("nzLoading",d.loading)("nzTotal",d.total)("nzPageSize",d.pageSize)("nzPageIndex",d.pageIndex),e.xp6(3),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzFilters",d.filterType)("nzFilterFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(7),e.Q6J("ngForOf",d.datum))},directives:[Gr._,et.N8,et.Om,et.$Z,et.Uo,et._C,et.qD,et.p0,k.sg,Me.yS,tn.g,rt.Ws,rt.cm,K.Ls,Ce.w,rt.RR,he.wO,he.r9,er],pipes:[fr.i,xr.d],styles:[""]}),g})();function Hr(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",11),e.NdJ("dblclick",function(){const w=e.CHM(s).$implicit;return e.oxw().open(w)}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"a",12),e._uU(5),e.qZA()(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td",13),e.ALo(13,"dateString"),e._uU(14),e.ALo(15,"fromNow"),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.ALo(18,"fromNow"),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td")(22,"a",12),e._uU(23,"\u8be6\u60c5"),e.qZA(),e._UZ(24,"nz-divider",14),e.TgZ(25,"a",12),e._uU(26,"\u7f16\u8f91"),e.qZA(),e._UZ(27,"nz-divider",14),e.TgZ(28,"a",15),e._uU(29," \u66f4\u591a "),e._UZ(30,"i",16),e.qZA(),e.TgZ(31,"nz-dropdown-menu",null,17)(33,"ul",18)(34,"li",19)(35,"a",12),e._uU(36,"\u76d1\u63a7"),e.qZA()(),e.TgZ(37,"li",20),e.NdJ("click",function(){const w=e.CHM(s).$implicit;return e.oxw().enable(w)}),e._uU(38,"\u542f\u7528"),e.qZA(),e.TgZ(39,"li",21),e.NdJ("nzOnConfirm",function(){const w=e.CHM(s).$implicit;return e.oxw().disable(w)}),e._uU(40,"\u7981\u7528 "),e.qZA(),e.TgZ(41,"li",22),e.NdJ("nzOnConfirm",function(){const _=e.CHM(s),w=_.$implicit,me=_.index;return e.oxw().remove(w,me)}),e._uU(42,"\u5220\u9664"),e.qZA()()()()()}if(2&g){const s=x.$implicit,d=e.MAs(32);e.xp6(2),e.Oqu(s.id),e.xp6(2),e.Q6J("routerLink","/admin/server/detail/"+s.server_id),e.xp6(1),e.Oqu(s.server),e.xp6(2),e.AsE("",s.disabled?"\u274c":"","",s.name,""),e.xp6(2),e.Oqu(s.type),e.xp6(2),e.Oqu(s.addr),e.xp6(1),e.Q6J("title",e.lcZ(13,17,s.created)),e.xp6(2),e.Oqu(e.lcZ(15,19,s.created)),e.xp6(3),e.Oqu(e.lcZ(18,21,s.last)),e.xp6(3),e.Oqu(s.running?"\u5728\u7ebf":"\u79bb\u7ebf"),e.xp6(2),e.Q6J("routerLink","/admin/tunnel/detail/"+s.id),e.xp6(3),e.Q6J("routerLink","/admin/tunnel/edit/"+s.id),e.xp6(3),e.Q6J("nzDropdownMenu",d),e.xp6(7),e.Q6J("routerLink","/admin/tunnel/monitor/"+s.id),e.xp6(2),e.Q6J("nzDisabled",!s.disabled),e.xp6(2),e.Q6J("nzDisabled",s.disabled)}}let vi=(()=>{class g{constructor(s,d,_){this.router=s,this.rs=d,this.ms=_,this.datum=[],this.loading=!1,this.total=1,this.pageSize=20,this.pageIndex=1,this.params={filter:{}}}ngOnInit(){}search(s){this.pageIndex=1,this.params.skip=0,s?this.params.keyword={name:s,addr:s}:delete this.params.keyword,this.load()}onQuery(s){(0,sr.F)(s,this.params),this.load()}load(){this.loading=!0,this.rs.post("tunnel/list",this.params).subscribe(s=>{console.log("res",s),this.datum=s.data,this.total=s.total}).add(()=>{this.loading=!1})}create(){this.router.navigate(["admin/tunnel/create"])}open(s){this.router.navigate(["/admin/tunnel/detail/"+s.id])}remove(s,d){this.rs.get(`tunnel/${s.id}/delete`).subscribe(_=>{this.datum.splice(d,1)})}enable(s){this.rs.get(`tunnel/${s.id}/enable`).subscribe(d=>{s.disabled=!1})}disable(s){this.rs.get(`tunnel/${s.id}/disable`).subscribe(d=>{s.disabled=!0})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.F0),e.Y36(Fe.s),e.Y36(Ln.Sf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-tunnel"]],decls:24,vars:15,consts:[[3,"loading","create","refresh","search"],["nzSize","small",3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzQueryParams"],["nzColumnKey","id",3,"nzSortFn"],["nzColumnKey","server_id",3,"nzSortFn"],["nzColumnKey","name",3,"nzSortFn"],["nzColumnKey","type",3,"nzSortFn"],["nzColumnKey","addr",3,"nzSortFn"],["nzColumnKey","created",3,"nzSortFn"],["nzColumnKey","last",3,"nzSortFn"],["nzWidth","100"],[3,"dblclick",4,"ngFor","ngForOf"],[3,"dblclick"],[3,"routerLink"],[3,"title"],["nzType","vertical"],["nz-dropdown","","nzTrigger","click",3,"nzDropdownMenu"],["nz-icon","","nzType","down"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item",""],["nz-menu-item","",3,"nzDisabled","click"],["nz-menu-item","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u7981\u7528\uff1f",3,"nzDisabled","nzOnConfirm"],["nz-menu-item","","nzDanger","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664\uff1f",3,"nzOnConfirm"]],template:function(s,d){1&s&&(e.TgZ(0,"app-page-list",0),e.NdJ("create",function(){return d.create()})("refresh",function(){return d.load()})("search",function(w){return d.search(w)}),e.TgZ(1,"nz-table",1),e.NdJ("nzQueryParams",function(w){return d.onQuery(w)}),e.TgZ(2,"thead")(3,"tr")(4,"th",2),e._uU(5,"ID"),e.qZA(),e.TgZ(6,"th",3),e._uU(7,"\u670d\u52a1\u5668"),e.qZA(),e.TgZ(8,"th",4),e._uU(9,"\u540d\u79f0"),e.qZA(),e.TgZ(10,"th",5),e._uU(11,"\u7c7b\u578b"),e.qZA(),e.TgZ(12,"th",6),e._uU(13,"\u5730\u5740"),e.qZA(),e.TgZ(14,"th",7),e._uU(15,"\u521b\u5efa\u65f6\u95f4"),e.qZA(),e.TgZ(16,"th",8),e._uU(17,"\u6700\u8fd1\u4e0a\u7ebf"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"\u72b6\u6001"),e.qZA(),e.TgZ(20,"th",9),e._uU(21,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(22,"tbody"),e.YNc(23,Hr,43,23,"tr",10),e.qZA()()()),2&s&&(e.Q6J("loading",d.loading),e.xp6(1),e.Q6J("nzData",d.datum)("nzFrontPagination",!1)("nzLoading",d.loading)("nzTotal",d.total)("nzPageSize",d.pageSize)("nzPageIndex",d.pageIndex),e.xp6(3),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(7),e.Q6J("ngForOf",d.datum))},directives:[Gr._,et.N8,et.Om,et.$Z,et.Uo,et._C,et.qD,et.p0,k.sg,Me.yS,tn.g,rt.Ws,rt.cm,K.Ls,Ce.w,rt.RR,he.wO,he.r9,er],pipes:[fr.i,xr.d],styles:[""]}),g})();function ta(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",9),e.NdJ("dblclick",function(){const w=e.CHM(s).$implicit;return e.oxw().open(w)}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"a",10),e._uU(7),e.qZA()(),e.TgZ(8,"td")(9,"a",10),e._uU(10),e.qZA()(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td",11),e.ALo(14,"dateString"),e._uU(15),e.ALo(16,"fromNow"),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td")(20,"a",10),e._uU(21,"\u8be6\u60c5"),e.qZA(),e._UZ(22,"nz-divider",12),e.TgZ(23,"a",10),e._uU(24,"\u7f16\u8f91"),e.qZA(),e._UZ(25,"nz-divider",12),e.TgZ(26,"a",13),e._uU(27," \u66f4\u591a "),e._UZ(28,"i",14),e.qZA(),e.TgZ(29,"nz-dropdown-menu",null,15)(31,"ul",16)(32,"li",17),e.NdJ("click",function(){const w=e.CHM(s).$implicit;return e.oxw().enable(w)}),e._uU(33,"\u542f\u7528"),e.qZA(),e.TgZ(34,"li",18),e.NdJ("nzOnConfirm",function(){const w=e.CHM(s).$implicit;return e.oxw().disable(w)}),e._uU(35,"\u7981\u7528 "),e.qZA(),e.TgZ(36,"li",19),e.NdJ("nzOnConfirm",function(){const _=e.CHM(s),w=_.$implicit,me=_.index;return e.oxw().remove(w,me)}),e._uU(37,"\u5220\u9664"),e.qZA()()()()()}if(2&g){const s=x.$implicit,d=e.MAs(30);e.xp6(2),e.Oqu(s.id),e.xp6(2),e.AsE("",s.disabled?"\u274c":"","",s.name,""),e.xp6(2),e.Q6J("routerLink","/admin/product/detail/"+s.product_id),e.xp6(1),e.Oqu(s.product),e.xp6(2),e.Q6J("routerLink","/admin/tunnel/detail/"+s.tunnel_id),e.xp6(1),e.Oqu(s.tunnel||s.tunnel_id),e.xp6(2),e.Oqu(s.station),e.xp6(1),e.Q6J("title",e.lcZ(14,16,s.created)),e.xp6(2),e.Oqu(e.lcZ(16,18,s.created)),e.xp6(3),e.Oqu(s.running?"\u542f\u52a8":"\u5173\u95ed"),e.xp6(2),e.Q6J("routerLink","/admin/device/detail/"+s.id),e.xp6(3),e.Q6J("routerLink","/admin/device/edit/"+s.id),e.xp6(3),e.Q6J("nzDropdownMenu",d),e.xp6(6),e.Q6J("nzDisabled",!s.disabled),e.xp6(2),e.Q6J("nzDisabled",s.disabled)}}let ca=(()=>{class g{constructor(s,d,_){this.router=s,this.rs=d,this.ms=_,this.datum=[],this.loading=!1,this.total=1,this.pageSize=20,this.pageIndex=1,this.params={filter:{}}}ngOnInit(){}search(s){this.pageIndex=1,this.params.skip=0,s?this.params.keyword={name:s}:delete this.params.keyword,this.load()}onQuery(s){(0,sr.F)(s,this.params),this.load()}load(){this.loading=!0,this.rs.post("device/list",this.params).subscribe(s=>{console.log("res",s),this.datum=s.data,this.total=s.total}).add(()=>{this.loading=!1})}create(){this.router.navigate(["admin/device/create"])}open(s){this.router.navigate(["/admin/device/detail/"+s.id])}remove(s,d){this.rs.get(`device/${s.id}/delete`).subscribe(_=>{this.datum.splice(d,1)})}enable(s){this.rs.get(`device/${s.id}/enable`).subscribe(d=>{s.disabled=!1})}disable(s){this.rs.get(`device/${s.id}/disable`).subscribe(d=>{s.disabled=!0})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.F0),e.Y36(Fe.s),e.Y36(Ln.Sf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-device"]],decls:22,vars:14,consts:[[3,"loading","refresh","search","create"],["nzSize","small",3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzQueryParams"],["nzColumnKey","id",3,"nzSortFn"],["nzColumnKey","name",3,"nzSortFn"],["nzColumnKey","product_id",3,"nzSortFn"],["nzColumnKey","tunnel_id",3,"nzSortFn"],["nzColumnKey","station",3,"nzSortFn"],["nzWidth","100"],[3,"dblclick",4,"ngFor","ngForOf"],[3,"dblclick"],[3,"routerLink"],[3,"title"],["nzType","vertical"],["nz-dropdown","","nzTrigger","click",3,"nzDropdownMenu"],["nz-icon","","nzType","down"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"nzDisabled","click"],["nz-menu-item","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u7981\u7528\uff1f",3,"nzDisabled","nzOnConfirm"],["nz-menu-item","","nzDanger","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664\uff1f",3,"nzOnConfirm"]],template:function(s,d){1&s&&(e.TgZ(0,"app-page-list",0),e.NdJ("refresh",function(){return d.load()})("search",function(w){return d.search(w)})("create",function(){return d.create()}),e.TgZ(1,"nz-table",1),e.NdJ("nzQueryParams",function(w){return d.onQuery(w)}),e.TgZ(2,"thead")(3,"tr")(4,"th",2),e._uU(5,"ID"),e.qZA(),e.TgZ(6,"th",3),e._uU(7,"\u540d\u79f0"),e.qZA(),e.TgZ(8,"th",4),e._uU(9,"\u4ea7\u54c1"),e.qZA(),e.TgZ(10,"th",5),e._uU(11,"\u901a\u9053"),e.qZA(),e.TgZ(12,"th",6),e._uU(13,"\u4ece\u7ad9\u53f7"),e.qZA(),e.TgZ(14,"th",2),e._uU(15,"\u521b\u5efa\u65f6\u95f4"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"\u72b6\u6001"),e.qZA(),e.TgZ(18,"th",7),e._uU(19,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(20,"tbody"),e.YNc(21,ta,38,20,"tr",8),e.qZA()()()),2&s&&(e.Q6J("loading",d.loading),e.xp6(1),e.Q6J("nzData",d.datum)("nzFrontPagination",!1)("nzLoading",d.loading)("nzTotal",d.total)("nzPageSize",d.pageSize)("nzPageIndex",d.pageIndex),e.xp6(3),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(7),e.Q6J("ngForOf",d.datum))},directives:[Gr._,et.N8,et.Om,et.$Z,et.Uo,et._C,et.qD,et.p0,k.sg,Me.yS,tn.g,rt.Ws,rt.cm,K.Ls,Ce.w,rt.RR,he.wO,he.r9,er],pipes:[fr.i,xr.d],styles:[""]}),g})();function is(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",10),e.NdJ("dblclick",function(){const w=e.CHM(s).$implicit;return e.oxw().open(w)}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td",11),e.ALo(14,"dateString"),e._uU(15),e.ALo(16,"fromNow"),e.qZA(),e.TgZ(17,"td")(18,"a",12),e._uU(19,"\u8be6\u60c5"),e.qZA(),e._UZ(20,"nz-divider",13),e.TgZ(21,"a",12),e._uU(22,"\u7f16\u8f91"),e.qZA(),e._UZ(23,"nz-divider",13),e.TgZ(24,"a",14),e._uU(25," \u66f4\u591a "),e._UZ(26,"i",15),e.qZA(),e.TgZ(27,"nz-dropdown-menu",null,16)(29,"ul",17)(30,"li",18),e.NdJ("nzOnConfirm",function(){const _=e.CHM(s),w=_.$implicit,me=_.index;return e.oxw().remove(w,me)}),e._uU(31,"\u5220\u9664"),e.qZA()()()()()}if(2&g){const s=x.$implicit,d=e.MAs(28);e.xp6(2),e.Oqu(s.id),e.xp6(2),e.Oqu(s.name),e.xp6(2),e.Oqu(s.type),e.xp6(2),e.Oqu(null==s.tags?null:s.tags.join(",")),e.xp6(2),e.Oqu(s.manufacturer),e.xp6(2),e.Oqu(s.version),e.xp6(1),e.Q6J("title",e.lcZ(14,11,s.created)),e.xp6(2),e.Oqu(e.lcZ(16,13,s.created)),e.xp6(3),e.Q6J("routerLink","/admin/product/detail/"+s.id),e.xp6(3),e.Q6J("routerLink","/admin/product/edit/"+s.id),e.xp6(3),e.Q6J("nzDropdownMenu",d)}}let ho=(()=>{class g{constructor(s,d){this.router=s,this.rs=d,this.datum=[],this.loading=!1,this.total=1,this.pageSize=20,this.pageIndex=1,this.params={filter:{}}}ngOnInit(){}search(s){this.pageIndex=1,this.params.skip=0,s?this.params.keyword={name:s}:delete this.params.keyword,this.load()}onQuery(s){(0,sr.F)(s,this.params),this.load()}load(){this.loading=!0,this.rs.post("product/list",this.params).subscribe(s=>{console.log("res",s),this.datum=s.data,this.total=s.total}).add(()=>{this.loading=!1})}create(){this.router.navigate(["admin/product/create"])}open(s){this.router.navigate(["/admin/product/detail/"+s.id])}remove(s,d){this.rs.get(`product/${s.id}/delete`).subscribe(_=>{this.datum.splice(d,1)})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.F0),e.Y36(Fe.s))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-product"]],decls:22,vars:14,consts:[[3,"loading","create","refresh","search"],["nzSize","small",3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzQueryParams"],["nzColumnKey","id",3,"nzSortFn"],["nzColumnKey","name",3,"nzSortFn"],["nzColumnKey","type",3,"nzSortFn"],["nzColumnKey","tags"],["nzColumnKey","manufacturer",3,"nzSortFn"],["nzColumnKey","version",3,"nzSortFn"],["nzWidth","100"],[3,"dblclick",4,"ngFor","ngForOf"],[3,"dblclick"],[3,"title"],[3,"routerLink"],["nzType","vertical"],["nz-dropdown","","nzTrigger","click",3,"nzDropdownMenu"],["nz-icon","","nzType","down"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","","nzDanger","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664\uff1f",3,"nzOnConfirm"]],template:function(s,d){1&s&&(e.TgZ(0,"app-page-list",0),e.NdJ("create",function(){return d.create()})("refresh",function(){return d.load()})("search",function(w){return d.search(w)}),e.TgZ(1,"nz-table",1),e.NdJ("nzQueryParams",function(w){return d.onQuery(w)}),e.TgZ(2,"thead")(3,"tr")(4,"th",2),e._uU(5,"ID"),e.qZA(),e.TgZ(6,"th",3),e._uU(7,"\u540d\u79f0"),e.qZA(),e.TgZ(8,"th",4),e._uU(9,"\u7c7b\u578b"),e.qZA(),e.TgZ(10,"th",5),e._uU(11,"\u6807\u7b7e"),e.qZA(),e.TgZ(12,"th",6),e._uU(13,"\u5382\u5546"),e.qZA(),e.TgZ(14,"th",7),e._uU(15,"\u578b\u53f7"),e.qZA(),e.TgZ(16,"th",2),e._uU(17,"\u521b\u5efa\u65f6\u95f4"),e.qZA(),e.TgZ(18,"th",8),e._uU(19,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(20,"tbody"),e.YNc(21,is,32,15,"tr",9),e.qZA()()()),2&s&&(e.Q6J("loading",d.loading),e.xp6(1),e.Q6J("nzData",d.datum)("nzFrontPagination",!1)("nzLoading",d.loading)("nzTotal",d.total)("nzPageSize",d.pageSize)("nzPageIndex",d.pageIndex),e.xp6(3),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(4),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(5),e.Q6J("ngForOf",d.datum))},directives:[Gr._,et.N8,et.Om,et.$Z,et.Uo,et._C,et.qD,et.p0,k.sg,Me.yS,tn.g,rt.Ws,rt.cm,K.Ls,Ce.w,rt.RR,he.wO,he.r9,er],pipes:[fr.i,xr.d],styles:[""]}),g})();function as(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",7),e.NdJ("dblclick",function(){const w=e.CHM(s).$implicit;return e.oxw().open(w)}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"a",8),e._uU(5),e.qZA()(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td",9),e.ALo(9,"dateString"),e._uU(10),e.ALo(11,"fromNow"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td")(15,"a",8),e._uU(16,"\u8be6\u60c5"),e.qZA(),e._UZ(17,"nz-divider",10),e.TgZ(18,"a",8),e._uU(19,"\u7f16\u8f91"),e.qZA(),e._UZ(20,"nz-divider",10),e.TgZ(21,"a",11),e._uU(22," \u66f4\u591a "),e._UZ(23,"i",12),e.qZA(),e.TgZ(24,"nz-dropdown-menu",null,13)(26,"ul",14)(27,"li",15),e.NdJ("click",function(){const w=e.CHM(s).$implicit;return e.oxw().enable(w)}),e._uU(28,"\u542f\u7528"),e.qZA(),e.TgZ(29,"li",16),e.NdJ("nzOnConfirm",function(){const w=e.CHM(s).$implicit;return e.oxw().disable(w)}),e._uU(30,"\u7981\u7528 "),e.qZA(),e.TgZ(31,"li",17),e.NdJ("nzOnConfirm",function(){const _=e.CHM(s),w=_.$implicit,me=_.index;return e.oxw().remove(w,me)}),e._uU(32,"\u5220\u9664"),e.qZA()()()()()}if(2&g){const s=x.$implicit,d=e.MAs(25);e.xp6(2),e.Oqu(s.id),e.xp6(2),e.Q6J("routerLink","/admin/template/detail/"+s.template_id),e.xp6(1),e.Oqu(null==s.template?null:s.template.name),e.xp6(2),e.AsE("",s.disabled?"\u274c":"","",s.name,""),e.xp6(1),e.Q6J("title",e.lcZ(9,13,s.created)),e.xp6(2),e.Oqu(e.lcZ(11,15,s.created)),e.xp6(3),e.Oqu(s.running?"\u5728\u7ebf":"\u79bb\u7ebf"),e.xp6(2),e.Q6J("routerLink","/admin/project/detail/"+s.id),e.xp6(3),e.Q6J("routerLink","/admin/project/edit/"+s.id),e.xp6(3),e.Q6J("nzDropdownMenu",d),e.xp6(6),e.Q6J("nzDisabled",!s.disabled),e.xp6(2),e.Q6J("nzDisabled",s.disabled)}}let Oi=(()=>{class g{constructor(s,d,_){this.router=s,this.rs=d,this.ms=_,this.datum=[],this.loading=!1,this.total=1,this.pageSize=20,this.pageIndex=1,this.params={filter:{}}}ngOnInit(){}search(s){this.pageIndex=1,this.params.skip=0,s?this.params.keyword={name:s}:delete this.params.keyword,this.load()}onQuery(s){(0,sr.F)(s,this.params),this.load()}load(){this.loading=!0,this.rs.post("project/list",this.params).subscribe(s=>{console.log("res",s),this.datum=s.data,this.total=s.total}).add(()=>{this.loading=!1})}create(){this.router.navigate(["admin/project/create"])}open(s){this.router.navigate(["/admin/project/detail/"+s.id])}remove(s,d){this.rs.get(`project/${s.id}/delete`).subscribe(_=>{this.datum.splice(d,1)})}enable(s){this.rs.get(`project/${s.id}/enable`).subscribe(d=>{s.disabled=!1})}disable(s){this.rs.get(`project/${s.id}/disable`).subscribe(d=>{s.disabled=!0})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.F0),e.Y36(Fe.s),e.Y36(Ln.Sf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-project"]],decls:18,vars:12,consts:[[3,"loading","create","refresh","search"],["nzSize","small",3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzQueryParams"],["nzColumnKey","id",3,"nzSortFn"],["nzColumnKey","template_id",3,"nzSortFn"],["nzColumnKey","name",3,"nzSortFn"],["nzWidth","100"],[3,"dblclick",4,"ngFor","ngForOf"],[3,"dblclick"],[3,"routerLink"],[3,"title"],["nzType","vertical"],["nz-dropdown","","nzTrigger","click",3,"nzDropdownMenu"],["nz-icon","","nzType","down"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"nzDisabled","click"],["nz-menu-item","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u7981\u7528\uff1f",3,"nzDisabled","nzOnConfirm"],["nz-menu-item","","nzDanger","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664\uff1f",3,"nzOnConfirm"]],template:function(s,d){1&s&&(e.TgZ(0,"app-page-list",0),e.NdJ("create",function(){return d.create()})("refresh",function(){return d.load()})("search",function(w){return d.search(w)}),e.TgZ(1,"nz-table",1),e.NdJ("nzQueryParams",function(w){return d.onQuery(w)}),e.TgZ(2,"thead")(3,"tr")(4,"th",2),e._uU(5,"ID"),e.qZA(),e.TgZ(6,"th",3),e._uU(7,"\u6a21\u677f"),e.qZA(),e.TgZ(8,"th",4),e._uU(9,"\u540d\u79f0"),e.qZA(),e.TgZ(10,"th",2),e._uU(11,"\u521b\u5efa\u65f6\u95f4"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"\u72b6\u6001"),e.qZA(),e.TgZ(14,"th",5),e._uU(15,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,as,33,17,"tr",6),e.qZA()()()),2&s&&(e.Q6J("loading",d.loading),e.xp6(1),e.Q6J("nzData",d.datum)("nzFrontPagination",!1)("nzLoading",d.loading)("nzTotal",d.total)("nzPageSize",d.pageSize)("nzPageIndex",d.pageIndex),e.xp6(3),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(7),e.Q6J("ngForOf",d.datum))},directives:[Gr._,et.N8,et.Om,et.$Z,et.Uo,et._C,et.qD,et.p0,k.sg,Me.yS,tn.g,rt.Ws,rt.cm,K.Ls,Ce.w,rt.RR,he.wO,he.r9,er],pipes:[fr.i,xr.d],styles:[""]}),g})();function ba(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",6),e.NdJ("dblclick",function(){const w=e.CHM(s).$implicit;return e.oxw().open(w)}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",7),e.ALo(6,"dateString"),e._uU(7),e.ALo(8,"fromNow"),e.qZA(),e.TgZ(9,"td")(10,"a",8),e._uU(11,"\u8be6\u60c5"),e.qZA(),e._UZ(12,"nz-divider",9),e.TgZ(13,"a",8),e._uU(14,"\u7f16\u8f91"),e.qZA(),e._UZ(15,"nz-divider",9),e.TgZ(16,"a",10),e._uU(17," \u66f4\u591a "),e._UZ(18,"i",11),e.qZA(),e.TgZ(19,"nz-dropdown-menu",null,12)(21,"ul",13)(22,"li",14),e.NdJ("nzOnConfirm",function(){const _=e.CHM(s),w=_.$implicit,me=_.index;return e.oxw().remove(w,me)}),e._uU(23,"\u5220\u9664"),e.qZA()()()()()}if(2&g){const s=x.$implicit,d=e.MAs(20);e.xp6(2),e.Oqu(s.id),e.xp6(2),e.Oqu(s.name),e.xp6(1),e.Q6J("title",e.lcZ(6,7,s.created)),e.xp6(2),e.Oqu(e.lcZ(8,9,s.created)),e.xp6(3),e.Q6J("routerLink","/admin/template/detail/"+s.id),e.xp6(3),e.Q6J("routerLink","/admin/template/edit/"+s.id),e.xp6(3),e.Q6J("nzDropdownMenu",d)}}let Qa=(()=>{class g{constructor(s,d){this.router=s,this.rs=d,this.datum=[],this.loading=!1,this.total=1,this.pageSize=20,this.pageIndex=1,this.params={filter:{}}}ngOnInit(){}search(s){this.pageIndex=1,this.params.skip=0,s?this.params.keyword={name:s}:delete this.params.keyword,this.load()}onQuery(s){(0,sr.F)(s,this.params),this.load()}load(){this.loading=!0,this.rs.post("template/list",this.params).subscribe(s=>{console.log("res",s),this.datum=s.data,this.total=s.total}).add(()=>{this.loading=!1})}create(){this.router.navigate(["admin/template/create"])}open(s){this.router.navigate(["/admin/template/detail/"+s.id])}remove(s,d){this.rs.get(`template/${s.id}/delete`).subscribe(_=>{this.datum.splice(d,1)})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.F0),e.Y36(Fe.s))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-template"]],decls:14,vars:11,consts:[[3,"loading","create","refresh","search"],["nzSize","small",3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzQueryParams"],["nzColumnKey","id",3,"nzSortFn"],["nzColumnKey","name",3,"nzSortFn"],["nzWidth","100"],[3,"dblclick",4,"ngFor","ngForOf"],[3,"dblclick"],[3,"title"],[3,"routerLink"],["nzType","vertical"],["nz-dropdown","","nzTrigger","click",3,"nzDropdownMenu"],["nz-icon","","nzType","down"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","","nzDanger","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664\uff1f",3,"nzOnConfirm"]],template:function(s,d){1&s&&(e.TgZ(0,"app-page-list",0),e.NdJ("create",function(){return d.create()})("refresh",function(){return d.load()})("search",function(w){return d.search(w)}),e.TgZ(1,"nz-table",1),e.NdJ("nzQueryParams",function(w){return d.onQuery(w)}),e.TgZ(2,"thead")(3,"tr")(4,"th",2),e._uU(5,"ID"),e.qZA(),e.TgZ(6,"th",3),e._uU(7,"\u540d\u79f0"),e.qZA(),e.TgZ(8,"th",2),e._uU(9,"\u521b\u5efa\u65f6\u95f4"),e.qZA(),e.TgZ(10,"th",4),e._uU(11,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(12,"tbody"),e.YNc(13,ba,24,11,"tr",5),e.qZA()()()),2&s&&(e.Q6J("loading",d.loading),e.xp6(1),e.Q6J("nzData",d.datum)("nzFrontPagination",!1)("nzLoading",d.loading)("nzTotal",d.total)("nzPageSize",d.pageSize)("nzPageIndex",d.pageIndex),e.xp6(3),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(5),e.Q6J("ngForOf",d.datum))},directives:[Gr._,et.N8,et.Om,et.$Z,et.Uo,et._C,et.qD,et.p0,k.sg,Me.yS,tn.g,rt.Ws,rt.cm,K.Ls,Ce.w,rt.RR,he.wO,he.r9,er],pipes:[fr.i,xr.d],styles:[""]}),g})(),fo=(()=>{class g{constructor(){}ngOnInit(){}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-plugin"]],decls:2,vars:0,template:function(s,d){1&s&&(e.TgZ(0,"p"),e._uU(1,"plugin works!"),e.qZA())},styles:[""]}),g})();function po(g,x){if(1&g&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&g){const s=x.$implicit;e.xp6(2),e.Oqu(s.name),e.xp6(2),e.Oqu(s.label),e.xp6(2),e.Oqu(s.version)}}let go=(()=>{class g{constructor(s,d){this.router=s,this.rs=d,this.datum=[],this.loading=!1}ngOnInit(){this.load()}load(){this.loading=!0,this.rs.get("system/protocols").subscribe(s=>{console.log("res",s),this.datum=s.data}).add(()=>{this.loading=!1})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.F0),e.Y36(Fe.s))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-protocol"]],decls:12,vars:5,consts:[["nzSize","small",3,"nzData","nzLoading"],["pluginTable",""],["nzColumnKey","name",3,"nzSortFn"],["nzColumnKey","label",3,"nzSortFn"],["nzColumnKey","version"],[4,"ngFor","ngForOf"]],template:function(s,d){if(1&s&&(e.TgZ(0,"nz-table",0,1)(2,"thead")(3,"tr")(4,"th",2),e._uU(5,"\u540d\u79f0"),e.qZA(),e.TgZ(6,"th",3),e._uU(7,"\u663e\u793a\u540d\u79f0"),e.qZA(),e.TgZ(8,"th",4),e._uU(9,"\u7248\u672c"),e.qZA()()(),e.TgZ(10,"tbody"),e.YNc(11,po,7,3,"tr",5),e.qZA()()),2&s){const _=e.MAs(1);e.Q6J("nzData",d.datum)("nzLoading",d.loading),e.xp6(4),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(5),e.Q6J("ngForOf",_.data)}},directives:[et.N8,et.Om,et.$Z,et.Uo,et._C,et.qD,et.p0,k.sg],styles:[""]}),g})(),os=(()=>{class g{constructor(){}ngOnInit(){}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-setting"]],decls:2,vars:0,template:function(s,d){1&s&&(e.TgZ(0,"p"),e._uU(1,"setting works!"),e.qZA())},styles:[""]}),g})();function ks(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",9),e.NdJ("dblclick",function(){const w=e.CHM(s).$implicit;return e.oxw().open(w)}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td",10),e.ALo(12,"dateString"),e._uU(13),e.ALo(14,"fromNow"),e.qZA(),e.TgZ(15,"td")(16,"a",11),e._uU(17,"\u8be6\u60c5"),e.qZA(),e._UZ(18,"nz-divider",12),e.TgZ(19,"a",11),e._uU(20,"\u7f16\u8f91"),e.qZA(),e._UZ(21,"nz-divider",12),e.TgZ(22,"a",13),e._uU(23," \u66f4\u591a "),e._UZ(24,"i",14),e.qZA(),e.TgZ(25,"nz-dropdown-menu",null,15)(27,"ul",16)(28,"li",17),e.NdJ("click",function(){const w=e.CHM(s).$implicit;return e.oxw().enable(w)}),e._uU(29,"\u542f\u7528"),e.qZA(),e.TgZ(30,"li",18),e.NdJ("nzOnConfirm",function(){const w=e.CHM(s).$implicit;return e.oxw().disable(w)}),e._uU(31,"\u7981\u7528 "),e.qZA(),e.TgZ(32,"li",19),e.NdJ("nzOnConfirm",function(){const _=e.CHM(s),w=_.$implicit,me=_.index;return e.oxw().remove(w,me)}),e._uU(33,"\u5220\u9664"),e.qZA()()()()()}if(2&g){const s=x.$implicit,d=e.MAs(26);e.xp6(2),e.Oqu(s.id),e.xp6(2),e.AsE("",s.disabled?"\u274c":"","",s.username,""),e.xp6(2),e.Oqu(s.name),e.xp6(2),e.Oqu(s.cellphone),e.xp6(2),e.Oqu(s.email),e.xp6(1),e.Q6J("title",e.lcZ(12,13,s.created)),e.xp6(2),e.Oqu(e.lcZ(14,15,s.created)),e.xp6(3),e.Q6J("routerLink","/admin/user/detail/"+s.id),e.xp6(3),e.Q6J("routerLink","/admin/user/edit/"+s.id),e.xp6(3),e.Q6J("nzDropdownMenu",d),e.xp6(6),e.Q6J("nzDisabled",!s.disabled),e.xp6(2),e.Q6J("nzDisabled",s.disabled)}}let Fi=(()=>{class g{constructor(s,d,_){this.router=s,this.rs=d,this.ms=_,this.datum=[],this.loading=!1,this.total=1,this.pageSize=20,this.pageIndex=1,this.params={filter:{}}}ngOnInit(){}search(s){this.pageIndex=1,this.params.skip=0,s?this.params.keyword={name:s,username:s,email:s}:delete this.params.keyword,this.load()}onQuery(s){(0,sr.F)(s,this.params),this.load()}load(){this.loading=!0,this.rs.post("user/list",this.params).subscribe(s=>{console.log("res",s),this.datum=s.data,this.total=s.total}).add(()=>{this.loading=!1})}create(){this.router.navigate(["admin/user/create"])}open(s){this.router.navigate(["/admin/user/detail/"+s.id])}remove(s,d){this.rs.get(`user/${s.id}/delete`).subscribe(_=>{this.datum.splice(d,1)})}enable(s){this.rs.get(`user/${s.id}/enable`).subscribe(d=>{s.disabled=!1})}disable(s){this.rs.get(`user/${s.id}/disable`).subscribe(d=>{s.disabled=!0})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.F0),e.Y36(Fe.s),e.Y36(Ln.Sf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-user"]],decls:20,vars:12,consts:[[3,"loading","create","refresh","search"],["nzSize","small",3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzQueryParams"],["nzColumnKey","id",3,"nzSortFn"],["nzColumnKey","username",3,"nzSortFn"],["nzColumnKey","name",3,"nzSortFn"],["nzColumnKey","cellphone"],["nzColumnKey","email"],["nzWidth","100"],[3,"dblclick",4,"ngFor","ngForOf"],[3,"dblclick"],[3,"title"],[3,"routerLink"],["nzType","vertical"],["nz-dropdown","","nzTrigger","click",3,"nzDropdownMenu"],["nz-icon","","nzType","down"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"nzDisabled","click"],["nz-menu-item","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u7981\u7528\uff1f",3,"nzDisabled","nzOnConfirm"],["nz-menu-item","","nzDanger","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664\uff1f",3,"nzOnConfirm"]],template:function(s,d){1&s&&(e.TgZ(0,"app-page-list",0),e.NdJ("create",function(){return d.create()})("refresh",function(){return d.load()})("search",function(w){return d.search(w)}),e.TgZ(1,"nz-table",1),e.NdJ("nzQueryParams",function(w){return d.onQuery(w)}),e.TgZ(2,"thead")(3,"tr")(4,"th",2),e._uU(5,"ID"),e.qZA(),e.TgZ(6,"th",3),e._uU(7,"\u7528\u6237\u540d"),e.qZA(),e.TgZ(8,"th",4),e._uU(9,"\u59d3\u540d"),e.qZA(),e.TgZ(10,"th",5),e._uU(11,"\u624b\u673a\u53f7"),e.qZA(),e.TgZ(12,"th",6),e._uU(13,"\u90ae\u7bb1"),e.qZA(),e.TgZ(14,"th",2),e._uU(15,"\u521b\u5efa\u65f6\u95f4"),e.qZA(),e.TgZ(16,"th",7),e._uU(17,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,ks,34,17,"tr",8),e.qZA()()()),2&s&&(e.Q6J("loading",d.loading),e.xp6(1),e.Q6J("nzData",d.datum)("nzFrontPagination",!1)("nzLoading",d.loading)("nzTotal",d.total)("nzPageSize",d.pageSize)("nzPageIndex",d.pageIndex),e.xp6(3),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(6),e.Q6J("nzSortFn",!0),e.xp6(5),e.Q6J("ngForOf",d.datum))},directives:[Gr._,et.N8,et.Om,et.$Z,et.Uo,et._C,et.qD,et.p0,k.sg,Me.yS,tn.g,rt.Ws,rt.cm,K.Ls,Ce.w,rt.RR,he.wO,he.r9,er],pipes:[fr.i,xr.d],styles:[""]}),g})();var Ne=J(3561),ot=J(9727),le=J(4546),Ae=J(1047);function ut(g,x){1&g&&(e.ynx(0),e._uU(1,"\u8bf7\u8f93\u5165\u539f\u59cb\u5bc6\u7801!"),e.BQk())}function Tt(g,x){1&g&&e.YNc(0,ut,2,0,"ng-container",10),2&g&&e.Q6J("ngIf",x.$implicit.hasError("required"))}function Jt(g,x){1&g&&(e.ynx(0),e._uU(1,"\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801!"),e.BQk())}function on(g,x){if(1&g&&(e.ynx(0),e._uU(1),e.BQk()),2&g){const s=e.oxw().$implicit;e.xp6(1),e.hij("\u957f\u5ea6\u4e0d\u80fd\u5c11\u4e8e",s.getError("minlength").requiredLength,"")}}function nn(g,x){if(1&g&&(e.ynx(0),e._uU(1),e.BQk()),2&g){const s=e.oxw().$implicit;e.xp6(1),e.hij("\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e",s.getError("maxlength").requiredLength,"")}}function tr(g,x){if(1&g&&(e.YNc(0,Jt,2,0,"ng-container",10),e.YNc(1,on,2,1,"ng-container",10),e.YNc(2,nn,2,1,"ng-container",10)),2&g){const s=x.$implicit;e.Q6J("ngIf",s.hasError("required")),e.xp6(1),e.Q6J("ngIf",s.hasError("minlength")),e.xp6(1),e.Q6J("ngIf",s.hasError("maxlength"))}}function pr(g,x){1&g&&(e.ynx(0),e._uU(1,"\u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801!"),e.BQk())}function Tn(g,x){1&g&&(e.ynx(0),e._uU(1,"\u786e\u8ba4\u5bc6\u7801\u4e0d\u4e00\u81f4!"),e.BQk())}function Zr(g,x){if(1&g&&(e.YNc(0,pr,2,0,"ng-container",10),e.YNc(1,Tn,2,0,"ng-container",10)),2&g){const s=x.$implicit;e.Q6J("ngIf",s.hasError("required")),e.xp6(1),e.Q6J("ngIf",s.hasError("diff"))}}let na=(()=>{class g{constructor(s,d,_,w){this.fb=s,this.router=d,this.rs=_,this.ms=w,this.basicForm=new M.cw({old:new M.NI("",[M.kI.required]),new:new M.NI("",[M.kI.required,M.kI.minLength(6),M.kI.maxLength(20)]),new2:new M.NI("",[M.kI.required,me=>this.basicForm&&this.basicForm.value.new!==me.value?{diff:{value:me.value}}:null])})}ngOnInit(){}submit(){!this.basicForm.valid||this.rs.post("my/password",{old:Ne.V.hashStr(this.basicForm.value.old),new:Ne.V.hashStr(this.basicForm.value.new)}).subscribe(s=>{this.ms.success("\u4fee\u6539\u6210\u529f")})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu),e.Y36(Me.gz),e.Y36(Fe.s),e.Y36(ot.dD))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-password"]],decls:24,vars:10,consts:[[3,"formGroup","ngSubmit"],[3,"nzSpan"],[3,"nzSpan","nzErrorTip"],["nz-input","","formControlName","old","required",""],["oldErrorTpl",""],["nz-input","","formControlName","new","required",""],["newErrorTpl",""],["nz-input","","formControlName","new2","required",""],["new2ErrorTpl",""],["nz-button","","nzType","primary"],[4,"ngIf"]],template:function(s,d){if(1&s&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return d.submit()}),e.TgZ(1,"nz-form-item")(2,"nz-form-label",1),e._uU(3,"\u539f\u59cb\u5bc6\u7801"),e.qZA(),e.TgZ(4,"nz-form-control",2),e._UZ(5,"input",3),e.YNc(6,Tt,1,1,"ng-template",null,4,e.W1O),e.qZA()(),e.TgZ(8,"nz-form-item")(9,"nz-form-label",1),e._uU(10,"\u65b0\u5bc6\u7801"),e.qZA(),e.TgZ(11,"nz-form-control",2),e._UZ(12,"input",5),e.YNc(13,tr,3,3,"ng-template",null,6,e.W1O),e.qZA()(),e.TgZ(15,"nz-form-item")(16,"nz-form-label",1),e._uU(17,"\u786e\u8ba4\u5bc6\u7801"),e.qZA(),e.TgZ(18,"nz-form-control",2),e._UZ(19,"input",7),e.YNc(20,Zr,2,2,"ng-template",null,8,e.W1O),e.qZA()(),e.TgZ(22,"button",9),e._uU(23,"\u63d0\u4ea4"),e.qZA()()),2&s){const _=e.MAs(7),w=e.MAs(14),me=e.MAs(21);e.Q6J("formGroup",d.basicForm),e.xp6(2),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12)("nzErrorTip",_),e.xp6(5),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12)("nzErrorTip",w),e.xp6(5),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12)("nzErrorTip",me)}},directives:[M._Y,M.JL,M.sg,yn.SK,le.Nx,yn.t3,le.iK,le.Fd,Ae.Zp,M.Fj,M.JJ,M.u,M.Q7,k.O5,xn.ix,Rn.dQ,Ce.w],styles:[""]}),g})();var Wn=J(868),Jr=J(8186),ge=J(6462);function ue(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",10),e.NdJ("dblclick",function(){const w=e.CHM(s).$implicit;return e.oxw().open(w)}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td",11),e.ALo(10,"dateString"),e._uU(11),e.ALo(12,"fromNow"),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"fromNow"),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td")(19,"a",12),e._uU(20,"\u8be6\u60c5"),e.qZA(),e._UZ(21,"nz-divider",13),e.TgZ(22,"a",12),e._uU(23,"\u7f16\u8f91"),e.qZA(),e._UZ(24,"nz-divider",13),e.TgZ(25,"a",14),e._uU(26," \u66f4\u591a "),e._UZ(27,"i",15),e.qZA(),e.TgZ(28,"nz-dropdown-menu",null,16)(30,"ul",17)(31,"li",18),e.NdJ("click",function(){const w=e.CHM(s).$implicit;return e.oxw().enable(w)}),e._uU(32,"\u542f\u7528"),e.qZA(),e.TgZ(33,"li",19),e.NdJ("nzOnConfirm",function(){const w=e.CHM(s).$implicit;return e.oxw().disable(w)}),e._uU(34,"\u7981\u7528 "),e.qZA(),e.TgZ(35,"li",20),e.NdJ("nzOnConfirm",function(){const _=e.CHM(s),w=_.$implicit,me=_.index;return e.oxw().remove(w,me)}),e._uU(36,"\u5220\u9664"),e.qZA()()()()()}if(2&g){const s=x.$implicit,d=e.MAs(29);e.xp6(2),e.Oqu(s.id),e.xp6(2),e.AsE("",s.disabled?"\u274c":"","",s.name,""),e.xp6(2),e.Oqu(s.type),e.xp6(2),e.Oqu(s.addr),e.xp6(1),e.Q6J("title",e.lcZ(10,14,s.created)),e.xp6(2),e.Oqu(e.lcZ(12,16,s.created)),e.xp6(3),e.Oqu(e.lcZ(15,18,s.last)),e.xp6(3),e.Oqu(s.running?"\u5728\u7ebf":"\u79bb\u7ebf"),e.xp6(2),e.Q6J("routerLink","/admin/tunnel/detail/"+s.id),e.xp6(3),e.Q6J("routerLink","/admin/tunnel/edit/"+s.id),e.xp6(3),e.Q6J("nzDropdownMenu",d),e.xp6(6),e.Q6J("nzDisabled",!s.disabled),e.xp6(2),e.Q6J("nzDisabled",s.disabled)}}let te=(()=>{class g{constructor(s,d,_){this.router=s,this.rs=d,this.ms=_,this.id=0,this.datum=[],this.loading=!1,this.total=1,this.pageSize=20,this.pageIndex=1,this.params={filter:{}}}ngOnInit(){}search(s){this.pageIndex=1,this.params.skip=0,s?this.params.keyword={name:s,addr:s}:delete this.params.keyword,this.load()}onQuery(s){(0,sr.F)(s,this.params),this.load()}load(){this.loading=!0,this.params.filter.server_id=this.id,this.rs.post("tunnel/list",this.params).subscribe(s=>{console.log("res",s),this.datum=s.data,this.total=s.total}).add(()=>{this.loading=!1})}open(s){this.router.navigate(["/admin/tunnel/detail/"+s.id])}remove(s,d){this.rs.get(`tunnel/${s.id}/delete`).subscribe(_=>{this.datum.splice(d,1)})}enable(s){this.rs.get(`tunnel/${s.id}/enable`).subscribe(d=>{s.disabled=!1})}disable(s){this.rs.get(`tunnel/${s.id}/disable`).subscribe(d=>{s.disabled=!0})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.F0),e.Y36(Fe.s),e.Y36(Ln.Sf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-server-tunnel"]],inputs:{id:"id"},decls:22,vars:14,consts:[["noCreate","",3,"loading","refresh","search"],["nzSize","small",3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzQueryParams"],["nzColumnKey","id",3,"nzSortFn"],["nzColumnKey","name",3,"nzSortFn"],["nzColumnKey","type",3,"nzSortFn"],["nzColumnKey","addr",3,"nzSortFn"],["nzColumnKey","created",3,"nzSortFn"],["nzColumnKey","last",3,"nzSortFn"],["nzWidth","100"],[3,"dblclick",4,"ngFor","ngForOf"],[3,"dblclick"],[3,"title"],[3,"routerLink"],["nzType","vertical"],["nz-dropdown","","nzTrigger","click",3,"nzDropdownMenu"],["nz-icon","","nzType","down"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"nzDisabled","click"],["nz-menu-item","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u7981\u7528\uff1f",3,"nzDisabled","nzOnConfirm"],["nz-menu-item","","nzDanger","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664\uff1f",3,"nzOnConfirm"]],template:function(s,d){1&s&&(e.TgZ(0,"app-page-list",0),e.NdJ("refresh",function(){return d.load()})("search",function(w){return d.search(w)}),e.TgZ(1,"nz-table",1),e.NdJ("nzQueryParams",function(w){return d.onQuery(w)}),e.TgZ(2,"thead")(3,"tr")(4,"th",2),e._uU(5,"ID"),e.qZA(),e.TgZ(6,"th",3),e._uU(7,"\u540d\u79f0"),e.qZA(),e.TgZ(8,"th",4),e._uU(9,"\u7c7b\u578b"),e.qZA(),e.TgZ(10,"th",5),e._uU(11,"\u5730\u5740"),e.qZA(),e.TgZ(12,"th",6),e._uU(13,"\u521b\u5efa\u65f6\u95f4"),e.qZA(),e.TgZ(14,"th",7),e._uU(15,"\u6700\u8fd1\u4e0a\u7ebf"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"\u72b6\u6001"),e.qZA(),e.TgZ(18,"th",8),e._uU(19,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(20,"tbody"),e.YNc(21,ue,37,20,"tr",9),e.qZA()()()),2&s&&(e.Q6J("loading",d.loading),e.xp6(1),e.Q6J("nzData",d.datum)("nzFrontPagination",!1)("nzLoading",d.loading)("nzTotal",d.total)("nzPageSize",d.pageSize)("nzPageIndex",d.pageIndex),e.xp6(3),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(7),e.Q6J("ngForOf",d.datum))},directives:[Gr._,et.N8,et.Om,et.$Z,et.Uo,et._C,et.qD,et.p0,k.sg,Me.yS,tn.g,rt.Ws,rt.cm,K.Ls,Ce.w,rt.RR,he.wO,he.r9,er],pipes:[fr.i,xr.d],styles:[""]}),g})();var pe=J(5860),ae=J(2728);function de(g,x){if(1&g&&e._UZ(0,"app-server-tunnel",8),2&g){const s=e.oxw();e.Q6J("id",s.id)}}function xe(g,x){if(1&g&&e._UZ(0,"app-event",9),2&g){const s=e.oxw();e.Q6J("id",s.id)}}function Te(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"a",10),e.NdJ("click",function(){return e.CHM(s),e.oxw().load()}),e._UZ(1,"i",11),e.qZA(),e._UZ(2,"nz-divider",12),e.TgZ(3,"a",13),e._UZ(4,"i",14),e.qZA(),e._UZ(5,"nz-divider",12),e.TgZ(6,"a",15),e._UZ(7,"i",16),e.qZA()}if(2&g){const s=e.oxw();e.xp6(1),e.Q6J("nzSpin",s.loading),e.xp6(2),e.Q6J("config",s.data),e.xp6(3),e.Q6J("routerLink","/admin/server/edit/"+s.id)}}let Be=(()=>{class g{constructor(s,d,_){this.router=s,this.rs=d,this.ms=_,this.id=0,this.data={},this.loading=!1,this.id=parseInt(s.snapshot.params.id),this.load()}ngOnInit(){}load(){this.loading=!0,this.rs.get(`server/${this.id}`).subscribe(s=>{this.data=s.data,this.loading=!1})}onEnableChange(s){s?this.ms.confirm({nzTitle:"\u63d0\u793a",nzContent:"\u786e\u8ba4\u7981\u7528\u5417?",nzOnOk:()=>{this.rs.get(`server/${this.id}/disable`).subscribe(d=>{})},nzOnCancel:()=>{this.data.disabled=!1}}):this.rs.get(`server/${this.id}/enable`).subscribe(d=>{})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.gz),e.Y36(Fe.s),e.Y36(Ln.Sf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-server-detail"]],decls:34,vars:9,consts:[[3,"nzTabBarExtraContent"],["nzTitle","\u670d\u52a1\u5668\u8be6\u60c5"],["nzBordered",""],[3,"ngModel","ngModelChange"],["nzTitle","\u76f8\u5173\u901a\u9053"],["nz-tab",""],["nzTitle","\u65e5\u5fd7"],["extraTemplate",""],[3,"id"],["type","server",3,"id"],["title","\u5237\u65b0",3,"click"],["nz-icon","","nzType","reload",3,"nzSpin"],["nzType","vertical"],["title","\u539f\u59cb\u6570\u636e","appViewConfig","",3,"config"],["nz-icon","","nzType","profile"],["title","\u7f16\u8f91",3,"routerLink"],["nz-icon","","nzType","form"]],template:function(s,d){if(1&s&&(e.TgZ(0,"nz-tabset",0)(1,"nz-tab",1)(2,"nz-list",2)(3,"nz-list-item")(4,"span"),e._uU(5,"\u540d\u79f0"),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"nz-list-item")(8,"span"),e._uU(9,"\u7c7b\u578b"),e.qZA(),e._uU(10),e.qZA(),e.TgZ(11,"nz-list-item")(12,"span"),e._uU(13,"\u5730\u5740"),e.qZA(),e._uU(14),e.qZA(),e.TgZ(15,"nz-list-item")(16,"span"),e._uU(17,"\u72b6\u6001"),e.qZA(),e._uU(18),e.qZA(),e.TgZ(19,"nz-list-item")(20,"span"),e._uU(21,"\u7981\u7528"),e.qZA(),e.TgZ(22,"nz-switch",3),e.NdJ("ngModelChange",function(w){return d.onEnableChange(w)}),e.qZA()(),e.TgZ(23,"nz-list-item")(24,"span"),e._uU(25,"\u521b\u5efa\u65f6\u95f4"),e.qZA(),e._uU(26),e.ALo(27,"dateString"),e.qZA()()(),e.TgZ(28,"nz-tab",4),e.YNc(29,de,1,1,"ng-template",5),e.qZA(),e.TgZ(30,"nz-tab",6),e.YNc(31,xe,1,1,"ng-template",5),e.qZA()(),e.YNc(32,Te,8,3,"ng-template",null,7,e.W1O)),2&s){const _=e.MAs(33);e.Q6J("nzTabBarExtraContent",_),e.xp6(6),e.Oqu(d.data.name),e.xp6(4),e.Oqu(d.data.type),e.xp6(4),e.Oqu(d.data.addr),e.xp6(4),e.Oqu(d.data.running?"\u542f\u52a8":"\u505c\u6b62"),e.xp6(4),e.Q6J("ngModel",d.data.disabled),e.xp6(4),e.Oqu(e.lcZ(27,7,d.data.created))}},directives:[Wn.xH,Wn.xw,Jr.n_,Jr.AA,ge.i,M.JJ,M.On,Wn.cj,te,pe.B,K.Ls,Ce.w,tn.g,ae.Z,Me.yS],pipes:[fr.i],styles:[""]}),g})();function We(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",8),e.NdJ("dblclick",function(){const w=e.CHM(s).$implicit;return e.oxw().open(w)}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"a",9),e._uU(7),e.qZA()(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td",10),e._uU(11),e.ALo(12,"fromNow"),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td")(16,"a",9),e._uU(17,"\u8be6\u60c5"),e.qZA(),e._UZ(18,"nz-divider",11),e.TgZ(19,"a",9),e._uU(20,"\u7f16\u8f91"),e.qZA(),e._UZ(21,"nz-divider",11),e.TgZ(22,"a",12),e._uU(23," \u66f4\u591a "),e._UZ(24,"i",13),e.qZA(),e.TgZ(25,"nz-dropdown-menu",null,14)(27,"ul",15)(28,"li",16),e.NdJ("click",function(){const w=e.CHM(s).$implicit;return e.oxw().enable(w)}),e._uU(29,"\u542f\u7528"),e.qZA(),e.TgZ(30,"li",17),e.NdJ("nzOnConfirm",function(){const w=e.CHM(s).$implicit;return e.oxw().disable(w)}),e._uU(31,"\u7981\u7528 "),e.qZA(),e.TgZ(32,"li",18),e.NdJ("nzOnConfirm",function(){const _=e.CHM(s),w=_.$implicit,me=_.index;return e.oxw().remove(w,me)}),e._uU(33,"\u5220\u9664"),e.qZA()()()()()}if(2&g){const s=x.$implicit,d=e.MAs(26);e.xp6(2),e.Oqu(s.id),e.xp6(2),e.AsE("",s.disabled?"\u274c":"","",s.name,""),e.xp6(2),e.Q6J("routerLink","/admin/product/detail/"+s.product_id),e.xp6(1),e.Oqu(null==s.product?null:s.product.name),e.xp6(2),e.Oqu(s.station),e.xp6(2),e.Oqu(e.lcZ(12,13,s.created)),e.xp6(3),e.Oqu(s.running?"\u542f\u52a8":"\u5173\u95ed"),e.xp6(2),e.Q6J("routerLink","/admin/device/detail/"+s.id),e.xp6(3),e.Q6J("routerLink","/admin/device/edit/"+s.id),e.xp6(3),e.Q6J("nzDropdownMenu",d),e.xp6(6),e.Q6J("nzDisabled",!s.disabled),e.xp6(2),e.Q6J("nzDisabled",s.disabled)}}let Je=(()=>{class g{constructor(s,d,_){this.router=s,this.rs=d,this.ms=_,this.id=0,this.datum=[],this.loading=!1,this.total=1,this.pageSize=20,this.pageIndex=1,this.params={filter:{}}}ngOnInit(){}search(s){this.pageIndex=1,this.params.skip=0,s?this.params.keyword={name:s}:delete this.params.keyword,this.load()}onQuery(s){(0,sr.F)(s,this.params),this.load()}load(){this.loading=!0,this.params.filter.tunnel_id=this.id,this.rs.post("device/list",this.params).subscribe(s=>{console.log("res",s),this.datum=s.data,this.total=s.total}).add(()=>{this.loading=!1})}create(){this.router.navigate(["admin/device/create"],{state:{tunnel_id:this.id}})}open(s){this.router.navigate(["/admin/device/detail/"+s.id])}remove(s,d){this.rs.get(`device/${s.id}/delete`).subscribe(_=>{this.datum.splice(d,1)})}enable(s){this.rs.get(`device/${s.id}/enable`).subscribe(d=>{s.disabled=!1})}disable(s){this.rs.get(`device/${s.id}/disable`).subscribe(d=>{s.disabled=!0})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.F0),e.Y36(Fe.s),e.Y36(Ln.Sf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-tunnel-device"]],inputs:{id:"id"},decls:20,vars:11,consts:[[3,"loading","create","refresh","search"],["nzSize","small",3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzQueryParams"],["nzColumnKey","id",3,"nzSortFn"],["nzColumnKey","name",3,"nzSortFn"],["nzColumnKey","product_id"],["nzColumnKey","station"],["nzWidth","100"],[3,"dblclick",4,"ngFor","ngForOf"],[3,"dblclick"],[3,"routerLink"],["title","data.created"],["nzType","vertical"],["nz-dropdown","","nzTrigger","click",3,"nzDropdownMenu"],["nz-icon","","nzType","down"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"nzDisabled","click"],["nz-menu-item","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u7981\u7528\uff1f",3,"nzDisabled","nzOnConfirm"],["nz-menu-item","","nzDanger","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664\uff1f",3,"nzOnConfirm"]],template:function(s,d){1&s&&(e.TgZ(0,"app-page-list",0),e.NdJ("create",function(){return d.create()})("refresh",function(){return d.load()})("search",function(w){return d.search(w)}),e.TgZ(1,"nz-table",1),e.NdJ("nzQueryParams",function(w){return d.onQuery(w)}),e.TgZ(2,"thead")(3,"tr")(4,"th",2),e._uU(5,"ID"),e.qZA(),e.TgZ(6,"th",3),e._uU(7,"\u540d\u79f0"),e.qZA(),e.TgZ(8,"th",4),e._uU(9,"\u4ea7\u54c1"),e.qZA(),e.TgZ(10,"th",5),e._uU(11,"\u4ece\u7ad9\u53f7"),e.qZA(),e.TgZ(12,"th",2),e._uU(13,"\u521b\u5efa\u65f6\u95f4"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"\u72b6\u6001"),e.qZA(),e.TgZ(16,"th",6),e._uU(17,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,We,34,15,"tr",7),e.qZA()()()),2&s&&(e.Q6J("loading",d.loading),e.xp6(1),e.Q6J("nzData",d.datum)("nzFrontPagination",!1)("nzLoading",d.loading)("nzTotal",d.total)("nzPageSize",d.pageSize)("nzPageIndex",d.pageIndex),e.xp6(3),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(6),e.Q6J("nzSortFn",!0),e.xp6(7),e.Q6J("ngForOf",d.datum))},directives:[Gr._,et.N8,et.Om,et.$Z,et.Uo,et._C,et.qD,et.p0,k.sg,Me.yS,tn.g,rt.Ws,rt.cm,K.Ls,Ce.w,rt.RR,he.wO,he.r9,er],pipes:[xr.d],styles:[""]}),g})();function $e(g,x){if(1&g&&e._UZ(0,"app-tunnel-device",9),2&g){const s=e.oxw();e.Q6J("id",s.id)}}function dt(g,x){if(1&g&&e._UZ(0,"app-event",10),2&g){const s=e.oxw();e.Q6J("id",s.id)}}function At(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"a",11),e.NdJ("click",function(){return e.CHM(s),e.oxw().load()}),e._UZ(1,"i",12),e.qZA(),e._UZ(2,"nz-divider",13),e.TgZ(3,"a",14),e._UZ(4,"i",15),e.qZA(),e._UZ(5,"nz-divider",13),e.TgZ(6,"a",16),e._UZ(7,"i",17),e.qZA()}if(2&g){const s=e.oxw();e.xp6(1),e.Q6J("nzSpin",s.loading),e.xp6(2),e.Q6J("config",s.data),e.xp6(3),e.Q6J("routerLink","/admin/tunnel/edit/"+s.id)}}let It=(()=>{class g{constructor(s,d,_){this.router=s,this.rs=d,this.ms=_,this.id=0,this.data={},this.loading=!1,this.id=parseInt(s.snapshot.params.id),this.load()}ngOnInit(){}load(){this.loading=!0,this.rs.get(`tunnel/${this.id}`).subscribe(s=>{this.data=s.data,this.loading=!1})}onEnableChange(s){s?this.ms.confirm({nzTitle:"\u63d0\u793a",nzContent:"\u786e\u8ba4\u7981\u7528\u5417?",nzOnOk:()=>{this.rs.get(`tunnel/${this.id}/disable`).subscribe(d=>{})},nzOnCancel:()=>{this.data.disabled=!1}}):this.rs.get(`tunnel/${this.id}/enable`).subscribe(d=>{})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.gz),e.Y36(Fe.s),e.Y36(Ln.Sf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-tunnel-detail"]],decls:46,vars:15,consts:[[3,"nzTabBarExtraContent"],["nzTitle","\u901a\u9053\u8be6\u60c5"],["nzBordered",""],[3,"routerLink"],[3,"ngModel","ngModelChange"],["nzTitle","\u76f8\u5173\u8bbe\u5907"],["nz-tab",""],["nzTitle","\u65e5\u5fd7"],["extraTemplate",""],[3,"id"],["type","tunnel",3,"id"],["title","\u5237\u65b0",3,"click"],["nz-icon","","nzType","reload",3,"nzSpin"],["nzType","vertical"],["title","\u539f\u59cb\u6570\u636e","appViewConfig","",3,"config"],["nz-icon","","nzType","profile"],["title","\u7f16\u8f91",3,"routerLink"],["nz-icon","","nzType","form"]],template:function(s,d){if(1&s&&(e.TgZ(0,"nz-tabset",0)(1,"nz-tab",1)(2,"nz-list",2)(3,"nz-list-item")(4,"span"),e._uU(5,"\u540d\u79f0"),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"nz-list-item")(8,"span"),e._uU(9,"\u7c7b\u578b"),e.qZA(),e._uU(10),e.qZA(),e.TgZ(11,"nz-list-item")(12,"span"),e._uU(13,"\u5730\u5740"),e.qZA(),e._uU(14),e.qZA(),e.TgZ(15,"nz-list-item")(16,"span"),e._uU(17,"\u670d\u52a1\u5668"),e.qZA(),e.TgZ(18,"a",3),e._uU(19),e.qZA()(),e.TgZ(20,"nz-list-item")(21,"span"),e._uU(22,"\u72b6\u6001"),e.qZA(),e._uU(23),e.qZA(),e.TgZ(24,"nz-list-item")(25,"span"),e._uU(26,"\u7981\u7528"),e.qZA(),e.TgZ(27,"nz-switch",4),e.NdJ("ngModelChange",function(w){return d.onEnableChange(w)}),e.qZA()(),e.TgZ(28,"nz-list-item")(29,"span"),e._uU(30,"\u4e0a\u7ebf\u65f6\u95f4"),e.qZA(),e._uU(31),e.ALo(32,"dateString"),e.qZA(),e.TgZ(33,"nz-list-item")(34,"span"),e._uU(35,"\u521b\u5efa\u65f6\u95f4"),e.qZA(),e._uU(36),e.ALo(37,"dateString"),e.qZA()(),e.TgZ(38,"a",3),e._uU(39,"\u76d1\u63a7"),e.qZA()(),e.TgZ(40,"nz-tab",5),e.YNc(41,$e,1,1,"ng-template",6),e.qZA(),e.TgZ(42,"nz-tab",7),e.YNc(43,dt,1,1,"ng-template",6),e.qZA()(),e.YNc(44,At,8,3,"ng-template",null,8,e.W1O)),2&s){const _=e.MAs(45);e.Q6J("nzTabBarExtraContent",_),e.xp6(6),e.Oqu(d.data.name),e.xp6(4),e.Oqu(d.data.type),e.xp6(4),e.Oqu(d.data.addr),e.xp6(4),e.Q6J("routerLink","/admin/server/detail/"+d.data.server_id),e.xp6(1),e.Oqu(d.data.server),e.xp6(4),e.Oqu(d.data.running?"\u542f\u52a8":"\u505c\u6b62"),e.xp6(4),e.Q6J("ngModel",d.data.disabled),e.xp6(4),e.Oqu(e.lcZ(32,11,d.data.last)),e.xp6(5),e.Oqu(e.lcZ(37,13,d.data.created)),e.xp6(2),e.Q6J("routerLink","/admin/tunnel/monitor/"+d.data.id)}},directives:[Wn.xH,Wn.xw,Jr.n_,Jr.AA,Me.yS,ge.i,M.JJ,M.On,Wn.cj,Je,pe.B,K.Ls,Ce.w,tn.g,ae.Z],pipes:[fr.i],styles:[""]}),g})();var Vt=J(3968),en=J(5863),Rt=J(8144);function cn(g,x){1&g&&e.Hsn(0)}function En(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"app-config-editor",5),e.NdJ("ngModelChange",function(_){return e.CHM(s),e.oxw().val=_}),e.qZA()}if(2&g){const s=e.oxw();e.Q6J("ngModel",s.val)}}function Lr(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){return e.CHM(s),e.oxw(2).cancel()}),e._uU(1,"\u53d6\u6d88"),e.qZA()}}function zr(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(_){return e.CHM(s),e.oxw(2).submit.emit(_)}),e._uU(1," \u63d0\u4ea4 "),e.qZA()}if(2&g){const s=e.oxw(2);e.Q6J("nzLoading",s.submitting)}}function An(g,x){1&g&&(e.TgZ(0,"nz-space"),e.YNc(1,Lr,2,0,"button",6),e.YNc(2,zr,2,1,"button",7),e.qZA())}const gr=["*"];let Mr=(()=>{class g{constructor(){this.submitting=!1,this.submit=new e.vpe,this.tabIndex=0,this.onChanged=()=>{},this.onTouched=()=>{},this._val=""}get val(){return this._val}set val(s){this._val=s,this.onChanged(s),this.onTouched()}ngOnInit(){}registerOnChange(s){this.onChanged=s}registerOnTouched(s){this.onTouched=s}writeValue(s){this._val=s}cancel(){}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-editor"]],inputs:{submitting:"submitting"},outputs:{submit:"submit"},features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0}])],ngContentSelectors:gr,decls:7,vars:3,consts:[[1,"tabs",3,"nzTabBarExtraContent","nzSelectedIndex","nzAnimated","nzSelectedIndexChange"],["nzTitle","\u6807\u51c6\u89c6\u56fe"],["nz-tab",""],["nzTitle","\u4e13\u5bb6\u6a21\u5f0f"],["extraTemplate",""],[3,"ngModel","ngModelChange"],["nz-button","","nzShape","round",3,"click",4,"nzSpaceItem"],["nz-button","","nzType","primary","nzShape","round",3,"nzLoading","click",4,"nzSpaceItem"],["nz-button","","nzShape","round",3,"click"],["nz-button","","nzType","primary","nzShape","round",3,"nzLoading","click"]],template:function(s,d){if(1&s&&(e.F$t(),e.TgZ(0,"nz-tabset",0),e.NdJ("nzSelectedIndexChange",function(w){return d.tabIndex=w}),e.TgZ(1,"nz-tab",1),e.YNc(2,cn,1,0,"ng-template",2),e.qZA(),e.TgZ(3,"nz-tab",3),e.YNc(4,En,1,1,"ng-template",2),e.qZA()(),e.YNc(5,An,3,0,"ng-template",null,4,e.W1O)),2&s){const _=e.MAs(6);e.Q6J("nzTabBarExtraContent",_)("nzSelectedIndex",d.tabIndex)("nzAnimated",!1)}},directives:[Wn.xH,Wn.xw,Wn.cj,en.G,M.JJ,M.On,Rt.NU,Rt.$1,xn.ix,Rn.dQ,Ce.w],styles:[""]}),g})();var Zn=J(5482);function Ti(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",12),e.NdJ("click",function(){const w=e.CHM(s).$implicit;return e.oxw().onItemClick(w)}),e.TgZ(1,"td",13),e.NdJ("nzCheckedChange",function(_){const me=e.CHM(s).$implicit;return e.oxw().onItemChecked(me.id,_)}),e.qZA(),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td",14),e.ALo(15,"dateString"),e._uU(16),e.ALo(17,"fromNow"),e.qZA()()}if(2&g){const s=x.$implicit,d=e.oxw();e.xp6(1),e.Q6J("nzChecked",d.setCheckedOfId.has(s.id))("nzDisabled",s.disabled),e.xp6(2),e.Oqu(s.id),e.xp6(2),e.Oqu(s.username),e.xp6(2),e.Oqu(s.name),e.xp6(2),e.Oqu(s.cellphone),e.xp6(2),e.Oqu(s.email),e.xp6(2),e.Oqu(s.disabled?"\xd7":""),e.xp6(1),e.Q6J("title",e.lcZ(15,10,s.created)),e.xp6(2),e.Oqu(e.lcZ(17,12,s.created))}}function qi(g,x){if(1&g&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&g){const s=e.oxw();e.xp6(1),e.hij(" \u5df2\u7ecf\u9009\u62e9\u4e86 ",s.setCheckedOfId.size," \u9879 ")}}function ss(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"div")(1,"button",15),e.NdJ("click",function(){return e.CHM(s),e.oxw().cancel()}),e._uU(2,"\u53d6\u6d88"),e.qZA(),e.TgZ(3,"button",16),e.NdJ("click",function(){return e.CHM(s),e.oxw().ok()}),e._uU(4,"\u786e\u5b9a"),e.qZA()()}}let cu=(()=>{class g{constructor(s,d){this.rs=s,this.mr=d,this.datum=[],this.loading=!1,this.total=1,this.pageSize=10,this.pageIndex=1,this.params={filter:{}},this.multiple=!1,this.checked=!1,this.indeterminate=!1,this.setCheckedOfId=new Set,this.tableData=[],this.ids=[]}onCurrentPageDataChange(s){this.tableData=s.filter(({disabled:d})=>d),this.refreshCheckedStatus()}updateCheckedSet(s,d){d?(this.multiple||this.setCheckedOfId.clear(),this.setCheckedOfId.add(s)):this.setCheckedOfId.delete(s)}refreshCheckedStatus(){this.checked=this.tableData.every(({id:s})=>this.setCheckedOfId.has(s)),this.indeterminate=this.tableData.some(({id:s})=>this.setCheckedOfId.has(s))&&!this.checked,this.ids=Array.from(this.setCheckedOfId)}onItemChecked(s,d){this.updateCheckedSet(s,d),this.refreshCheckedStatus()}onAllChecked(s){this.tableData.forEach(({id:d})=>this.updateCheckedSet(d,s)),this.refreshCheckedStatus()}onItemClick(s){s.disabled&&this.onItemChecked(s.id,!this.setCheckedOfId.has(s.id))}ngOnInit(){}search(s){this.pageIndex=1,this.params.skip=0,s?this.params.keyword={name:s,username:s,email:s}:delete this.params.keyword,this.load()}onQuery(s){(0,sr.F)(s,this.params),this.load()}load(){this.loading=!0,this.rs.post("user/list",this.params).subscribe(s=>{console.log("res",s),this.datum=s.data,this.total=s.total}).add(()=>{this.loading=!1})}cancel(){this.mr.close()}ok(){this.mr.close(this.multiple?this.ids:this.ids.length&&this.ids[0])}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Fe.s),e.Y36(Ln.Lf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-user-browser"]],inputs:{multiple:"multiple"},decls:23,vars:17,consts:[["noCreate","",3,"loading","refresh","search"],["nzSize","small",3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzQueryParams","nzCurrentPageDataChange"],[3,"nzShowCheckbox","nzChecked","nzIndeterminate","nzCheckedChange"],["nzColumnKey","id",3,"nzSortFn"],["nzColumnKey","username",3,"nzSortFn"],["nzColumnKey","name",3,"nzSortFn"],["nzColumnKey","cellphone"],["nzColumnKey","email"],["nzColumnKey","disabled",3,"nzSortFn"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[4,"nzModalFooter"],[3,"click"],[3,"nzChecked","nzDisabled","nzCheckedChange"],[3,"title"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"]],template:function(s,d){1&s&&(e.TgZ(0,"app-page-list",0),e.NdJ("refresh",function(){return d.load()})("search",function(w){return d.search(w)}),e.TgZ(1,"nz-table",1),e.NdJ("nzQueryParams",function(w){return d.onQuery(w)})("nzCurrentPageDataChange",function(w){return d.onCurrentPageDataChange(w)}),e.TgZ(2,"thead")(3,"tr")(4,"th",2),e.NdJ("nzCheckedChange",function(w){return d.onAllChecked(w)}),e.qZA(),e.TgZ(5,"th",3),e._uU(6,"ID"),e.qZA(),e.TgZ(7,"th",4),e._uU(8,"\u7528\u6237\u540d"),e.qZA(),e.TgZ(9,"th",5),e._uU(10,"\u59d3\u540d"),e.qZA(),e.TgZ(11,"th",6),e._uU(12,"\u624b\u673a\u53f7"),e.qZA(),e.TgZ(13,"th",7),e._uU(14,"\u90ae\u7bb1"),e.qZA(),e.TgZ(15,"th",8),e._uU(16,"\u7981\u7528"),e.qZA(),e.TgZ(17,"th",3),e._uU(18,"\u521b\u5efa\u65f6\u95f4"),e.qZA()()(),e.TgZ(19,"tbody"),e.YNc(20,Ti,18,14,"tr",9),e.qZA()(),e.YNc(21,qi,2,1,"div",10),e.qZA(),e.YNc(22,ss,5,0,"div",11)),2&s&&(e.Q6J("loading",d.loading),e.xp6(1),e.Q6J("nzData",d.datum)("nzFrontPagination",!1)("nzLoading",d.loading)("nzTotal",d.total)("nzPageSize",d.pageSize)("nzPageIndex",d.pageIndex),e.xp6(3),e.Q6J("nzShowCheckbox",d.multiple)("nzChecked",d.checked)("nzIndeterminate",d.indeterminate),e.xp6(1),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(6),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(3),e.Q6J("ngForOf",d.datum),e.xp6(1),e.Q6J("ngIf",d.multiple&&d.setCheckedOfId.size))},directives:[Gr._,et.N8,et.Om,et.$Z,et.Uo,et._C,et.g6,et.qD,et.p0,k.sg,et.h7,k.O5,Ln.Uh,xn.ix,Rn.dQ,Ce.w],pipes:[fr.i,xr.d],styles:[""]}),g})();function Ls(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",9),e.NdJ("click",function(){const w=e.CHM(s).$implicit;return e.oxw().onItemClick(w)}),e.TgZ(1,"td",10),e.NdJ("nzCheckedChange",function(_){const me=e.CHM(s).$implicit;return e.oxw().onItemChecked(me.id,_)}),e.qZA(),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td",11),e.ALo(7,"dateString"),e._uU(8),e.ALo(9,"fromNow"),e.qZA()()}if(2&g){const s=x.$implicit,d=e.oxw();e.xp6(1),e.Q6J("nzChecked",d.setCheckedOfId.has(s.id)),e.xp6(2),e.Oqu(s.id),e.xp6(2),e.Oqu(s.name),e.xp6(1),e.Q6J("title",e.lcZ(7,5,s.created)),e.xp6(2),e.Oqu(e.lcZ(9,7,s.created))}}function ml(g,x){if(1&g&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&g){const s=e.oxw();e.xp6(1),e.hij(" \u5df2\u7ecf\u9009\u62e9\u4e86 ",s.setCheckedOfId.size," \u9879 ")}}function Rs(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"div")(1,"button",12),e.NdJ("click",function(){return e.CHM(s),e.oxw().cancel()}),e._uU(2,"\u53d6\u6d88"),e.qZA(),e.TgZ(3,"button",13),e.NdJ("click",function(){return e.CHM(s),e.oxw().ok()}),e._uU(4,"\u786e\u5b9a"),e.qZA()()}}let Ai=(()=>{class g{constructor(s,d){this.rs=s,this.mr=d,this.datum=[],this.loading=!1,this.total=1,this.pageSize=10,this.pageIndex=1,this.params={filter:{}},this.multiple=!1,this.checked=!1,this.indeterminate=!1,this.setCheckedOfId=new Set,this.tableData=[],this.ids=[]}onCurrentPageDataChange(s){this.tableData=s,this.refreshCheckedStatus()}updateCheckedSet(s,d){d?(this.multiple||this.setCheckedOfId.clear(),this.setCheckedOfId.add(s)):this.setCheckedOfId.delete(s)}refreshCheckedStatus(){this.checked=this.tableData.every(({id:s})=>this.setCheckedOfId.has(s)),this.indeterminate=this.tableData.some(({id:s})=>this.setCheckedOfId.has(s))&&!this.checked,this.ids=Array.from(this.setCheckedOfId)}onItemChecked(s,d){this.updateCheckedSet(s,d),this.refreshCheckedStatus()}onAllChecked(s){this.tableData.forEach(({id:d})=>this.updateCheckedSet(d,s)),this.refreshCheckedStatus()}onItemClick(s){this.onItemChecked(s.id,!this.setCheckedOfId.has(s.id))}ngOnInit(){}search(s){this.pageIndex=1,this.params.skip=0,s?this.params.keyword={name:s}:delete this.params.keyword,this.load()}onQuery(s){(0,sr.F)(s,this.params),this.load()}load(){this.loading=!0,this.rs.post("template/list",this.params).subscribe(s=>{console.log("res",s),this.datum=s.data,this.total=s.total}).add(()=>{this.loading=!1})}cancel(){this.mr.close()}ok(){this.mr.close(this.multiple?this.ids:this.ids.length&&this.ids[0])}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Fe.s),e.Y36(Ln.Lf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-template-browser"]],inputs:{multiple:"multiple"},decls:15,vars:15,consts:[["noCreate","",3,"loading","refresh","search"],["nzSize","small",3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzQueryParams","nzCurrentPageDataChange"],[3,"nzShowCheckbox","nzChecked","nzIndeterminate","nzCheckedChange"],["nzColumnKey","id",3,"nzSortFn"],["nzColumnKey","name",3,"nzSortFn"],["nzColumnKey","created",3,"nzSortFn"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[4,"nzModalFooter"],[3,"click"],[3,"nzChecked","nzCheckedChange"],[3,"title"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"]],template:function(s,d){1&s&&(e.TgZ(0,"app-page-list",0),e.NdJ("refresh",function(){return d.load()})("search",function(w){return d.search(w)}),e.TgZ(1,"nz-table",1),e.NdJ("nzQueryParams",function(w){return d.onQuery(w)})("nzCurrentPageDataChange",function(w){return d.onCurrentPageDataChange(w)}),e.TgZ(2,"thead")(3,"tr")(4,"th",2),e.NdJ("nzCheckedChange",function(w){return d.onAllChecked(w)}),e.qZA(),e.TgZ(5,"th",3),e._uU(6,"ID"),e.qZA(),e.TgZ(7,"th",4),e._uU(8,"\u540d\u79f0"),e.qZA(),e.TgZ(9,"th",5),e._uU(10,"\u521b\u5efa\u65f6\u95f4"),e.qZA()()(),e.TgZ(11,"tbody"),e.YNc(12,Ls,10,9,"tr",6),e.qZA()(),e.YNc(13,ml,2,1,"div",7),e.qZA(),e.YNc(14,Rs,5,0,"div",8)),2&s&&(e.Q6J("loading",d.loading),e.xp6(1),e.Q6J("nzData",d.datum)("nzFrontPagination",!1)("nzLoading",d.loading)("nzTotal",d.total)("nzPageSize",d.pageSize)("nzPageIndex",d.pageIndex),e.xp6(3),e.Q6J("nzShowCheckbox",d.multiple)("nzChecked",d.checked)("nzIndeterminate",d.indeterminate),e.xp6(1),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(3),e.Q6J("ngForOf",d.datum),e.xp6(1),e.Q6J("ngIf",d.multiple&&d.setCheckedOfId.size))},directives:[Gr._,et.N8,et.Om,et.$Z,et.Uo,et._C,et.g6,et.qD,et.p0,k.sg,et.h7,k.O5,Ln.Uh,xn.ix,Rn.dQ,Ce.w],pipes:[fr.i,xr.d],styles:[""]}),g})();function hi(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",12),e.NdJ("click",function(){const w=e.CHM(s).$implicit;return e.oxw().onItemClick(w)}),e.TgZ(1,"td",13),e.NdJ("nzCheckedChange",function(_){const me=e.CHM(s).$implicit;return e.oxw().onItemChecked(me.id,_)}),e.qZA(),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td",14),e.ALo(13,"dateString"),e._uU(14),e.ALo(15,"fromNow"),e.qZA()()}if(2&g){const s=x.$implicit,d=e.oxw();e.xp6(1),e.Q6J("nzChecked",d.setCheckedOfId.has(s.id)),e.xp6(2),e.Oqu(s.id),e.xp6(2),e.Oqu(s.name),e.xp6(2),e.Oqu(null==s.tags?null:s.tags.join(",")),e.xp6(2),e.Oqu(s.manufacturer),e.xp6(2),e.Oqu(s.version),e.xp6(1),e.Q6J("title",e.lcZ(13,8,s.created)),e.xp6(2),e.Oqu(e.lcZ(15,10,s.created))}}function ls(g,x){if(1&g&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&g){const s=e.oxw();e.xp6(1),e.hij(" \u5df2\u7ecf\u9009\u62e9\u4e86 ",s.setCheckedOfId.size," \u9879 ")}}function ii(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"div")(1,"button",15),e.NdJ("click",function(){return e.CHM(s),e.oxw().cancel()}),e._uU(2,"\u53d6\u6d88"),e.qZA(),e.TgZ(3,"button",16),e.NdJ("click",function(){return e.CHM(s),e.oxw().ok()}),e._uU(4,"\u786e\u5b9a"),e.qZA()()}}let ra=(()=>{class g{constructor(s,d){this.rs=s,this.mr=d,this.datum=[],this.loading=!1,this.total=1,this.pageSize=10,this.pageIndex=1,this.params={filter:{}},this.multiple=!1,this.checked=!1,this.indeterminate=!1,this.setCheckedOfId=new Set,this.tableData=[],this.ids=[]}onCurrentPageDataChange(s){this.tableData=s,this.refreshCheckedStatus()}updateCheckedSet(s,d){d?(this.multiple||this.setCheckedOfId.clear(),this.setCheckedOfId.add(s)):this.setCheckedOfId.delete(s)}refreshCheckedStatus(){this.checked=this.tableData.every(({id:s})=>this.setCheckedOfId.has(s)),this.indeterminate=this.tableData.some(({id:s})=>this.setCheckedOfId.has(s))&&!this.checked,this.ids=Array.from(this.setCheckedOfId)}onItemChecked(s,d){this.updateCheckedSet(s,d),this.refreshCheckedStatus()}onAllChecked(s){this.tableData.forEach(({id:d})=>this.updateCheckedSet(d,s)),this.refreshCheckedStatus()}onItemClick(s){this.onItemChecked(s.id,!this.setCheckedOfId.has(s.id))}ngOnInit(){}search(s){this.pageIndex=1,this.params.skip=0,s?this.params.keyword={name:s}:delete this.params.keyword,this.load()}onQuery(s){(0,sr.F)(s,this.params),this.load()}load(){this.loading=!0,this.rs.post("product/list",this.params).subscribe(s=>{console.log("res",s),this.datum=s.data,this.total=s.total}).add(()=>{this.loading=!1})}cancel(){this.mr.close()}ok(){this.mr.close(this.multiple?this.ids:this.ids.length&&this.ids[0])}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Fe.s),e.Y36(Ln.Lf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-product-browser"]],inputs:{multiple:"multiple"},decls:21,vars:17,consts:[["noCreate","",3,"loading","refresh","search"],["nzSize","small",3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzQueryParams","nzCurrentPageDataChange"],[3,"nzShowCheckbox","nzChecked","nzIndeterminate","nzCheckedChange"],["nzColumnKey","id",3,"nzSortFn"],["nzColumnKey","name",3,"nzSortFn"],["nzColumnKey","tags"],["nzColumnKey","manufacturer",3,"nzSortFn"],["nzColumnKey","version",3,"nzSortFn"],["nzColumnKey","created",3,"nzSortFn"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[4,"nzModalFooter"],[3,"click"],[3,"nzChecked","nzCheckedChange"],[3,"title"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"]],template:function(s,d){1&s&&(e.TgZ(0,"app-page-list",0),e.NdJ("refresh",function(){return d.load()})("search",function(w){return d.search(w)}),e.TgZ(1,"nz-table",1),e.NdJ("nzQueryParams",function(w){return d.onQuery(w)})("nzCurrentPageDataChange",function(w){return d.onCurrentPageDataChange(w)}),e.TgZ(2,"thead")(3,"tr")(4,"th",2),e.NdJ("nzCheckedChange",function(w){return d.onAllChecked(w)}),e.qZA(),e.TgZ(5,"th",3),e._uU(6,"ID"),e.qZA(),e.TgZ(7,"th",4),e._uU(8,"\u540d\u79f0"),e.qZA(),e.TgZ(9,"th",5),e._uU(10,"\u6807\u7b7e"),e.qZA(),e.TgZ(11,"th",6),e._uU(12,"\u5382\u5546"),e.qZA(),e.TgZ(13,"th",7),e._uU(14,"\u578b\u53f7"),e.qZA(),e.TgZ(15,"th",8),e._uU(16,"\u521b\u5efa\u65f6\u95f4"),e.qZA()()(),e.TgZ(17,"tbody"),e.YNc(18,hi,16,12,"tr",9),e.qZA()(),e.YNc(19,ls,2,1,"div",10),e.qZA(),e.YNc(20,ii,5,0,"div",11)),2&s&&(e.Q6J("loading",d.loading),e.xp6(1),e.Q6J("nzData",d.datum)("nzFrontPagination",!1)("nzLoading",d.loading)("nzTotal",d.total)("nzPageSize",d.pageSize)("nzPageIndex",d.pageIndex),e.xp6(3),e.Q6J("nzShowCheckbox",d.multiple)("nzChecked",d.checked)("nzIndeterminate",d.indeterminate),e.xp6(1),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(4),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(3),e.Q6J("ngForOf",d.datum),e.xp6(1),e.Q6J("ngIf",d.multiple&&d.setCheckedOfId.size))},directives:[Gr._,et.N8,et.Om,et.$Z,et.Uo,et._C,et.g6,et.qD,et.p0,k.sg,et.h7,k.O5,Ln.Uh,xn.ix,Rn.dQ,Ce.w],pipes:[fr.i,xr.d],styles:[""]}),g})();function Ns(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",11),e.NdJ("click",function(){const w=e.CHM(s).$implicit;return e.oxw().onItemClick(w)}),e.TgZ(1,"td",12),e.NdJ("nzCheckedChange",function(_){const me=e.CHM(s).$implicit;return e.oxw().onItemChecked(me.id,_)}),e.qZA(),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td",13),e.ALo(15,"dateString"),e._uU(16),e.ALo(17,"fromNow"),e.qZA()()}if(2&g){const s=x.$implicit,d=e.oxw();e.xp6(1),e.Q6J("nzChecked",d.setCheckedOfId.has(s.id))("nzDisabled",s.disabled),e.xp6(2),e.Oqu(s.id),e.xp6(2),e.AsE("",s.disabled?"\u274c":"","",s.name,""),e.xp6(2),e.Oqu(s.product),e.xp6(2),e.Oqu(s.tunnel||s.tunnel_id),e.xp6(2),e.Oqu(s.station),e.xp6(2),e.Oqu(s.running?"\u542f\u52a8":"\u5173\u95ed"),e.xp6(1),e.Q6J("title",e.lcZ(15,11,s.created)),e.xp6(2),e.Oqu(e.lcZ(17,13,s.created))}}function hu(g,x){if(1&g&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&g){const s=e.oxw();e.xp6(1),e.hij(" \u5df2\u7ecf\u9009\u62e9\u4e86 ",s.setCheckedOfId.size," \u9879 ")}}function _l(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"div")(1,"button",14),e.NdJ("click",function(){return e.CHM(s),e.oxw().cancel()}),e._uU(2,"\u53d6\u6d88"),e.qZA(),e.TgZ(3,"button",15),e.NdJ("click",function(){return e.CHM(s),e.oxw().ok()}),e._uU(4,"\u786e\u5b9a"),e.qZA()()}}let qa=(()=>{class g{constructor(s,d){this.rs=s,this.mr=d,this.datum=[],this.loading=!1,this.total=1,this.pageSize=10,this.pageIndex=1,this.params={filter:{}},this.multiple=!1,this.checked=!1,this.indeterminate=!1,this.setCheckedOfId=new Set,this.tableData=[],this.ids=[]}onCurrentPageDataChange(s){this.tableData=s.filter(({disabled:d})=>d),this.refreshCheckedStatus()}updateCheckedSet(s,d){d?(this.multiple||this.setCheckedOfId.clear(),this.setCheckedOfId.add(s)):this.setCheckedOfId.delete(s)}refreshCheckedStatus(){this.checked=this.tableData.every(({id:s})=>this.setCheckedOfId.has(s)),this.indeterminate=this.tableData.some(({id:s})=>this.setCheckedOfId.has(s))&&!this.checked,this.ids=Array.from(this.setCheckedOfId)}onItemChecked(s,d){this.updateCheckedSet(s,d),this.refreshCheckedStatus()}onAllChecked(s){this.tableData.forEach(({id:d})=>this.updateCheckedSet(d,s)),this.refreshCheckedStatus()}onItemClick(s){s.disabled&&this.onItemChecked(s.id,!this.setCheckedOfId.has(s.id))}ngOnInit(){}search(s){this.pageIndex=1,this.params.skip=0,s?this.params.keyword={name:s}:delete this.params.keyword,this.load()}onQuery(s){(0,sr.F)(s,this.params),this.load()}load(){this.loading=!0,this.rs.post("device/list",this.params).subscribe(s=>{console.log("res",s),this.datum=s.data,this.total=s.total}).add(()=>{this.loading=!1})}cancel(){this.mr.close()}ok(){this.mr.close(this.multiple?this.ids:this.ids.length&&this.ids[0])}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Fe.s),e.Y36(Ln.Lf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-device-browser"]],inputs:{multiple:"multiple"},decls:23,vars:15,consts:[["noCreate","",3,"loading","refresh","search"],["nzSize","small",3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzQueryParams","nzCurrentPageDataChange"],[3,"nzShowCheckbox","nzChecked","nzIndeterminate","nzCheckedChange"],["nzColumnKey","id",3,"nzSortFn"],["nzColumnKey","name",3,"nzSortFn"],["nzColumnKey","product_id"],["nzColumnKey","tunnel_id"],["nzColumnKey","station"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[4,"nzModalFooter"],[3,"click"],[3,"nzChecked","nzDisabled","nzCheckedChange"],[3,"title"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"]],template:function(s,d){1&s&&(e.TgZ(0,"app-page-list",0),e.NdJ("refresh",function(){return d.load()})("search",function(w){return d.search(w)}),e.TgZ(1,"nz-table",1),e.NdJ("nzQueryParams",function(w){return d.onQuery(w)})("nzCurrentPageDataChange",function(w){return d.onCurrentPageDataChange(w)}),e.TgZ(2,"thead")(3,"tr")(4,"th",2),e.NdJ("nzCheckedChange",function(w){return d.onAllChecked(w)}),e.qZA(),e.TgZ(5,"th",3),e._uU(6,"ID"),e.qZA(),e.TgZ(7,"th",4),e._uU(8,"\u540d\u79f0"),e.qZA(),e.TgZ(9,"th",5),e._uU(10,"\u4ea7\u54c1"),e.qZA(),e.TgZ(11,"th",6),e._uU(12,"\u901a\u9053"),e.qZA(),e.TgZ(13,"th",7),e._uU(14,"\u4ece\u7ad9\u53f7"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"\u72b6\u6001"),e.qZA(),e.TgZ(17,"th",3),e._uU(18,"\u521b\u5efa\u65f6\u95f4"),e.qZA()()(),e.TgZ(19,"tbody"),e.YNc(20,Ns,18,15,"tr",8),e.qZA()(),e.YNc(21,hu,2,1,"div",9),e.qZA(),e.YNc(22,_l,5,0,"div",10)),2&s&&(e.Q6J("loading",d.loading),e.xp6(1),e.Q6J("nzData",d.datum)("nzFrontPagination",!1)("nzLoading",d.loading)("nzTotal",d.total)("nzPageSize",d.pageSize)("nzPageIndex",d.pageIndex),e.xp6(3),e.Q6J("nzShowCheckbox",d.multiple)("nzChecked",d.checked)("nzIndeterminate",d.indeterminate),e.xp6(1),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(10),e.Q6J("nzSortFn",!0),e.xp6(3),e.Q6J("ngForOf",d.datum),e.xp6(1),e.Q6J("ngIf",d.multiple&&d.setCheckedOfId.size))},directives:[Gr._,et.N8,et.Om,et.$Z,et.Uo,et._C,et.g6,et.qD,et.p0,k.sg,et.h7,k.O5,Ln.Uh,xn.ix,Rn.dQ,Ce.w],pipes:[fr.i,xr.d],styles:[""]}),g})();function ha(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",13),e.NdJ("click",function(){const w=e.CHM(s).$implicit;return e.oxw().onItemClick(w)}),e.TgZ(1,"td",14),e.NdJ("nzCheckedChange",function(_){const me=e.CHM(s).$implicit;return e.oxw().onItemChecked(me.id,_)}),e.qZA(),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td",15),e.ALo(13,"dateString"),e._uU(14),e.ALo(15,"fromNow"),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.ALo(18,"fromNow"),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA()()}if(2&g){const s=x.$implicit,d=e.oxw();e.xp6(1),e.Q6J("nzChecked",d.setCheckedOfId.has(s.id))("nzDisabled",!s.disabled),e.xp6(2),e.Oqu(s.id),e.xp6(2),e.Oqu(s.server),e.xp6(2),e.AsE("",s.disabled?"\u274c":"","",s.name,""),e.xp6(2),e.Oqu(s.type),e.xp6(2),e.Oqu(s.addr),e.xp6(1),e.Q6J("title",e.lcZ(13,12,s.created)),e.xp6(2),e.Oqu(e.lcZ(15,14,s.created)),e.xp6(3),e.Oqu(e.lcZ(18,16,s.last)),e.xp6(3),e.Oqu(s.running?"\u5728\u7ebf":"\u79bb\u7ebf")}}function Fs(g,x){if(1&g&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&g){const s=e.oxw();e.xp6(1),e.hij(" \u5df2\u7ecf\u9009\u62e9\u4e86 ",s.setCheckedOfId.size," \u9879 ")}}function Ao(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"div")(1,"button",16),e.NdJ("click",function(){return e.CHM(s),e.oxw().cancel()}),e._uU(2,"\u53d6\u6d88"),e.qZA(),e.TgZ(3,"button",17),e.NdJ("click",function(){return e.CHM(s),e.oxw().ok()}),e._uU(4,"\u786e\u5b9a"),e.qZA()()}}let Sh=(()=>{class g{constructor(s,d){this.rs=s,this.mr=d,this.datum=[],this.loading=!1,this.total=1,this.pageSize=10,this.pageIndex=1,this.params={filter:{}},this.multiple=!1,this.checked=!1,this.indeterminate=!1,this.setCheckedOfId=new Set,this.tableData=[],this.ids=[]}onCurrentPageDataChange(s){this.tableData=s,this.refreshCheckedStatus()}updateCheckedSet(s,d){d?(this.multiple||this.setCheckedOfId.clear(),this.setCheckedOfId.add(s)):this.setCheckedOfId.delete(s)}refreshCheckedStatus(){this.checked=this.tableData.every(({id:s})=>this.setCheckedOfId.has(s)),this.indeterminate=this.tableData.some(({id:s})=>this.setCheckedOfId.has(s))&&!this.checked,this.ids=Array.from(this.setCheckedOfId)}onItemChecked(s,d){this.updateCheckedSet(s,d),this.refreshCheckedStatus()}onAllChecked(s){this.tableData.forEach(({id:d})=>this.updateCheckedSet(d,s)),this.refreshCheckedStatus()}onItemClick(s){this.onItemChecked(s.id,!this.setCheckedOfId.has(s.id))}ngOnInit(){}search(s){this.pageIndex=1,this.params.skip=0,s?this.params.keyword={name:s,addr:s}:delete this.params.keyword,this.load()}onQuery(s){(0,sr.F)(s,this.params),this.load()}load(){this.loading=!0,this.rs.post("tunnel/list",this.params).subscribe(s=>{console.log("res",s),this.datum=s.data,this.total=s.total}).add(()=>{this.loading=!1})}cancel(){this.mr.close()}ok(){this.mr.close(this.multiple?this.ids:this.ids.length&&this.ids[0])}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Fe.s),e.Y36(Ln.Lf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-tunnel-browser"]],inputs:{multiple:"multiple"},decls:25,vars:19,consts:[["noCreate","",3,"loading","refresh","search"],["nzSize","small",3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzQueryParams","nzCurrentPageDataChange"],[3,"nzShowCheckbox","nzChecked","nzIndeterminate","nzCheckedChange"],["nzColumnKey","id",3,"nzSortFn"],["nzColumnKey","server_id",3,"nzSortFn"],["nzColumnKey","name",3,"nzSortFn"],["nzColumnKey","type",3,"nzSortFn"],["nzColumnKey","addr",3,"nzSortFn"],["nzColumnKey","created",3,"nzSortFn"],["nzColumnKey","last",3,"nzSortFn"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[4,"nzModalFooter"],[3,"click"],[3,"nzChecked","nzDisabled","nzCheckedChange"],[3,"title"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"]],template:function(s,d){1&s&&(e.TgZ(0,"app-page-list",0),e.NdJ("refresh",function(){return d.load()})("search",function(w){return d.search(w)}),e.TgZ(1,"nz-table",1),e.NdJ("nzQueryParams",function(w){return d.onQuery(w)})("nzCurrentPageDataChange",function(w){return d.onCurrentPageDataChange(w)}),e.TgZ(2,"thead")(3,"tr")(4,"th",2),e.NdJ("nzCheckedChange",function(w){return d.onAllChecked(w)}),e.qZA(),e.TgZ(5,"th",3),e._uU(6,"ID"),e.qZA(),e.TgZ(7,"th",4),e._uU(8,"\u670d\u52a1\u5668"),e.qZA(),e.TgZ(9,"th",5),e._uU(10,"\u540d\u79f0"),e.qZA(),e.TgZ(11,"th",6),e._uU(12,"\u540d\u79f0"),e.qZA(),e.TgZ(13,"th",7),e._uU(14,"\u5730\u5740"),e.qZA(),e.TgZ(15,"th",8),e._uU(16,"\u521b\u5efa\u65f6\u95f4"),e.qZA(),e.TgZ(17,"th",9),e._uU(18,"\u6700\u8fd1\u4e0a\u7ebf"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"\u72b6\u6001"),e.qZA()()(),e.TgZ(21,"tbody"),e.YNc(22,ha,21,18,"tr",10),e.qZA()(),e.YNc(23,Fs,2,1,"div",11),e.qZA(),e.YNc(24,Ao,5,0,"div",12)),2&s&&(e.Q6J("loading",d.loading),e.xp6(1),e.Q6J("nzData",d.datum)("nzFrontPagination",!1)("nzLoading",d.loading)("nzTotal",d.total)("nzPageSize",d.pageSize)("nzPageIndex",d.pageIndex),e.xp6(3),e.Q6J("nzShowCheckbox",d.multiple)("nzChecked",d.checked)("nzIndeterminate",d.indeterminate),e.xp6(1),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(5),e.Q6J("ngForOf",d.datum),e.xp6(1),e.Q6J("ngIf",d.multiple&&d.setCheckedOfId.size))},directives:[Gr._,et.N8,et.Om,et.$Z,et.Uo,et._C,et.g6,et.qD,et.p0,k.sg,et.h7,k.O5,Ln.Uh,xn.ix,Rn.dQ,Ce.w],pipes:[fr.i,xr.d],styles:[""]}),g})();function mi(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"div")(1,"button",2),e.NdJ("click",function(){return e.CHM(s),e.oxw().cancel()}),e._uU(2,"\u53d6\u6d88"),e.qZA(),e.TgZ(3,"button",3),e.NdJ("click",function(){return e.CHM(s),e.oxw().ok()}),e._uU(4,"\u786e\u5b9a"),e.qZA()()}}let zh=(()=>{class g{constructor(s){this.mr=s,this.message="\u8bf7\u8f93\u5165",this.placeholder="",this.default=""}ngOnInit(){}cancel(){this.mr.close()}ok(){this.mr.close(this.default)}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Ln.Lf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-prompt"]],inputs:{message:"message",placeholder:"placeholder",default:"default"},decls:4,vars:3,consts:[["nz-input","",3,"placeholder","ngModel","ngModelChange"],[4,"nzModalFooter"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"]],template:function(s,d){1&s&&(e.TgZ(0,"p"),e._uU(1),e.qZA(),e.TgZ(2,"input",0),e.NdJ("ngModelChange",function(w){return d.default=w}),e.qZA(),e.YNc(3,mi,5,0,"div",1)),2&s&&(e.xp6(1),e.Oqu(d.message),e.xp6(1),e.Q6J("placeholder",d.placeholder)("ngModel",d.default))},directives:[Ae.Zp,M.Fj,M.JJ,M.On,Ln.Uh,xn.ix,Rn.dQ,Ce.w],styles:[""]}),g})();function du(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",9),e.NdJ("click",function(){const w=e.CHM(s).$implicit;return e.oxw().onItemClick(w)}),e.TgZ(1,"td",10),e.NdJ("nzCheckedChange",function(_){const me=e.CHM(s).$implicit;return e.oxw().onItemChecked(me.id,_)}),e.qZA(),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td",11),e.ALo(9,"dateString"),e._uU(10),e.ALo(11,"fromNow"),e.qZA()()}if(2&g){const s=x.$implicit,d=e.oxw();e.xp6(1),e.Q6J("nzChecked",d.setCheckedOfId.has(s.id)),e.xp6(2),e.Oqu(s.id),e.xp6(2),e.Oqu(s.name),e.xp6(2),e.AsE("",s.width," x ",s.height,""),e.xp6(1),e.Q6J("title",e.lcZ(9,7,s.created)),e.xp6(2),e.Oqu(e.lcZ(11,9,s.created))}}function wh(g,x){if(1&g&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&g){const s=e.oxw();e.xp6(1),e.hij(" \u5df2\u7ecf\u9009\u62e9\u4e86 ",s.setCheckedOfId.size," \u9879 ")}}function vo(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"div")(1,"button",12),e.NdJ("click",function(){return e.CHM(s),e.oxw().cancel()}),e._uU(2,"\u53d6\u6d88"),e.qZA(),e.TgZ(3,"button",13),e.NdJ("click",function(){return e.CHM(s),e.oxw().ok()}),e._uU(4,"\u786e\u5b9a"),e.qZA()()}}let yl=(()=>{class g{constructor(s,d){this.rs=s,this.mr=d,this.datum=[],this.loading=!1,this.total=1,this.pageSize=10,this.pageIndex=1,this.params={filter:{}},this.multiple=!1,this.checked=!1,this.indeterminate=!1,this.setCheckedOfId=new Set,this.tableData=[],this.ids=[]}onCurrentPageDataChange(s){this.tableData=s,this.refreshCheckedStatus()}updateCheckedSet(s,d){d?(this.multiple||this.setCheckedOfId.clear(),this.setCheckedOfId.add(s)):this.setCheckedOfId.delete(s)}refreshCheckedStatus(){this.checked=this.tableData.every(({id:s})=>this.setCheckedOfId.has(s)),this.indeterminate=this.tableData.some(({id:s})=>this.setCheckedOfId.has(s))&&!this.checked,this.ids=Array.from(this.setCheckedOfId)}onItemChecked(s,d){this.updateCheckedSet(s,d),this.refreshCheckedStatus()}onAllChecked(s){this.tableData.forEach(({id:d})=>this.updateCheckedSet(d,s)),this.refreshCheckedStatus()}onItemClick(s){this.onItemChecked(s.id,!this.setCheckedOfId.has(s.id))}ngOnInit(){}search(s){this.pageIndex=1,this.params.skip=0,s?this.params.keyword={name:s}:delete this.params.keyword,this.load()}onQuery(s){(0,sr.F)(s,this.params),this.load()}load(){this.loading=!0,this.rs.post("hmi/list",this.params).subscribe(s=>{console.log("res",s),this.datum=s.data,this.total=s.total}).add(()=>{this.loading=!1})}cancel(){this.mr.close()}ok(){this.mr.close(this.multiple?this.ids:this.ids.length&&this.ids[0])}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Fe.s),e.Y36(Ln.Lf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-hmi-browser"]],inputs:{multiple:"multiple"},decls:17,vars:15,consts:[["noCreate","",3,"loading","refresh","search"],["nzSize","small",3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzQueryParams","nzCurrentPageDataChange"],[3,"nzShowCheckbox","nzChecked","nzIndeterminate","nzCheckedChange"],["nzColumnKey","id",3,"nzSortFn"],["nzColumnKey","name",3,"nzSortFn"],["nzColumnKey","created",3,"nzSortFn"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[4,"nzModalFooter"],[3,"click"],[3,"nzChecked","nzCheckedChange"],[3,"title"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"]],template:function(s,d){1&s&&(e.TgZ(0,"app-page-list",0),e.NdJ("refresh",function(){return d.load()})("search",function(w){return d.search(w)}),e.TgZ(1,"nz-table",1),e.NdJ("nzQueryParams",function(w){return d.onQuery(w)})("nzCurrentPageDataChange",function(w){return d.onCurrentPageDataChange(w)}),e.TgZ(2,"thead")(3,"tr")(4,"th",2),e.NdJ("nzCheckedChange",function(w){return d.onAllChecked(w)}),e.qZA(),e.TgZ(5,"th",3),e._uU(6,"ID"),e.qZA(),e.TgZ(7,"th",4),e._uU(8,"\u540d\u79f0"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"\u5c3a\u5bf8"),e.qZA(),e.TgZ(11,"th",5),e._uU(12,"\u521b\u5efa\u65f6\u95f4"),e.qZA()()(),e.TgZ(13,"tbody"),e.YNc(14,du,12,11,"tr",6),e.qZA()(),e.YNc(15,wh,2,1,"div",7),e.qZA(),e.YNc(16,vo,5,0,"div",8)),2&s&&(e.Q6J("loading",d.loading),e.xp6(1),e.Q6J("nzData",d.datum)("nzFrontPagination",!1)("nzLoading",d.loading)("nzTotal",d.total)("nzPageSize",d.pageSize)("nzPageIndex",d.pageIndex),e.xp6(3),e.Q6J("nzShowCheckbox",d.multiple)("nzChecked",d.checked)("nzIndeterminate",d.indeterminate),e.xp6(1),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(4),e.Q6J("nzSortFn",!0),e.xp6(3),e.Q6J("ngForOf",d.datum),e.xp6(1),e.Q6J("ngIf",d.multiple&&d.setCheckedOfId.size))},directives:[Gr._,et.N8,et.Om,et.$Z,et.Uo,et._C,et.g6,et.qD,et.p0,k.sg,et.h7,k.O5,Ln.Uh,xn.ix,Rn.dQ,Ce.w],pipes:[fr.i,xr.d],styles:[""]}),g})(),Sa=(()=>{class g{constructor(s){this.ms=s}chooseUser(s){return this.ms.create({nzTitle:"\u9009\u62e9\u7528\u6237",nzContent:cu,nzWidth:"80%",nzComponentParams:s}).afterClose}chooseDevice(s){return this.ms.create({nzTitle:"\u9009\u62e9\u8bbe\u5907",nzContent:qa,nzWidth:"80%",nzComponentParams:s}).afterClose}chooseTunnel(s){return this.ms.create({nzTitle:"\u9009\u62e9\u94fe\u63a5",nzContent:Sh,nzWidth:"80%",nzComponentParams:s}).afterClose}chooseProduct(s){return this.ms.create({nzTitle:"\u9009\u62e9\u4ea7\u54c1",nzContent:ra,nzWidth:"80%",nzComponentParams:s}).afterClose}chooseTemplate(){return this.ms.create({nzTitle:"\u9009\u62e9\u6a21\u677f",nzContent:Ai,nzWidth:"80%"}).afterClose}chooseHMI(){return this.ms.create({nzTitle:"\u9009\u62e9\u7ec4\u6001",nzContent:yl,nzWidth:"80%"}).afterClose}prompt(s){return this.ms.create({nzTitle:"\u8bf7\u8f93\u5165",nzContent:zh,nzWidth:"80%",nzComponentParams:s}).afterClose}}return g.\u0275fac=function(s){return new(s||g)(e.LFG(Ln.Sf))},g.\u0275prov=e.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();function pi(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",0),e.NdJ("click",function(){return e.CHM(s),e.oxw().clear()}),e._uU(1,"\u6e05\u7a7a"),e.qZA()}}let Bs=(()=>{class g{constructor(s,d){this.cs=s,this.rs=d,this.onChanged=()=>{},this.onTouched=()=>{},this.id="",this.name="",this.showClear=!1,this.product=new e.vpe}ngOnInit(){}registerOnChange(s){this.onChanged=s}registerOnTouched(s){this.onTouched=s}writeValue(s){this.id=s,this.load()}load(){!this.id||(this.name="\u52a0\u8f7d\u4e2d...",this.rs.get(`product/${this.id}`).subscribe(s=>{this.name=s.data.name,this.product.emit(s.data)}))}choose(){this.cs.chooseProduct().subscribe(s=>{s&&(this.id=s,this.load(),this.onChanged(s),this.onTouched())})}clear(){this.id="",this.name="",this.onChanged(""),this.onTouched()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Sa),e.Y36(Fe.s))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-choose-product"]],hostVars:1,hostBindings:function(s,d){2&s&&e.uIk("title",d.id)},inputs:{showClear:"showClear"},outputs:{product:"product"},features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0}])],decls:4,vars:2,consts:[["nz-button","","nzSize","small",3,"click"],["nz-button","","nzSize","small",3,"click",4,"ngIf"]],template:function(s,d){1&s&&(e._uU(0),e.TgZ(1,"button",0),e.NdJ("click",function(){return d.choose()}),e._uU(2,"\u9009\u62e9"),e.qZA(),e.YNc(3,pi,2,0,"button",1)),2&s&&(e.hij("",d.name||d.id||"\u672a\u9009\u62e9","\n"),e.xp6(3),e.Q6J("ngIf",d.showClear))},directives:[xn.ix,Rn.dQ,Ce.w,k.O5],styles:[""]}),g})();function ef(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",0),e.NdJ("click",function(){return e.CHM(s),e.oxw().clear()}),e._uU(1,"\u6e05\u7a7a"),e.qZA()}}let Cl=(()=>{class g{constructor(s,d){this.cs=s,this.rs=d,this.onChanged=()=>{},this.onTouched=()=>{},this.id="",this.name="",this.showClear=!1,this.tunnel=new e.vpe}ngOnInit(){}registerOnChange(s){this.onChanged=s}registerOnTouched(s){this.onTouched=s}writeValue(s){this.id=s,this.load()}load(){!this.id||(this.name="\u52a0\u8f7d\u4e2d...",this.rs.get(`tunnel/${this.id}`).subscribe(s=>{this.name=s.data.name||s.data.addr||s.data.remote,this.tunnel.emit(s.data)}))}choose(){this.cs.chooseTunnel().subscribe(s=>{s&&(this.id=s,this.load(),this.onChanged(s),this.onTouched())})}clear(){this.id="",this.name="",this.onChanged(""),this.onTouched()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Sa),e.Y36(Fe.s))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-choose-tunnel"]],hostVars:1,hostBindings:function(s,d){2&s&&e.uIk("title",d.id)},inputs:{showClear:"showClear"},outputs:{tunnel:"tunnel"},features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0}])],decls:4,vars:2,consts:[["nz-button","","nzSize","small",3,"click"],["nz-button","","nzSize","small",3,"click",4,"ngIf"]],template:function(s,d){1&s&&(e._uU(0),e.TgZ(1,"button",0),e.NdJ("click",function(){return d.choose()}),e._uU(2,"\u9009\u62e9"),e.qZA(),e.YNc(3,ef,2,0,"button",1)),2&s&&(e.hij("",d.name||d.id||"\u672a\u9009\u62e9","\n"),e.xp6(3),e.Q6J("ngIf",d.showClear))},directives:[xn.ix,Rn.dQ,Ce.w,k.O5],styles:[""]}),g})();function us(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",0),e.NdJ("click",function(){return e.CHM(s),e.oxw().clear()}),e._uU(1,"\u6e05\u7a7a"),e.qZA()}}let Zs=(()=>{class g{constructor(s,d){this.cs=s,this.rs=d,this.onChanged=()=>{},this.onTouched=()=>{},this.id="",this.name="",this.showClear=!1}ngOnInit(){}registerOnChange(s){this.onChanged=s}registerOnTouched(s){this.onTouched=s}writeValue(s){this.id=s,this.load()}load(){!this.id||(this.name="\u52a0\u8f7d\u4e2d...",this.rs.get(`hmi/${this.id}`).subscribe(s=>{this.name=s.data.name}))}choose(){this.cs.chooseHMI().subscribe(s=>{s&&(this.id=s,this.load(),this.onChanged(s),this.onTouched())})}clear(){this.id="",this.name="",this.onChanged(""),this.onTouched()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Sa),e.Y36(Fe.s))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-choose-hmi"]],hostVars:1,hostBindings:function(s,d){2&s&&e.uIk("title",d.id)},inputs:{showClear:"showClear"},features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0}])],decls:4,vars:2,consts:[["nz-button","","nzSize","small",3,"click"],["nz-button","","nzSize","small",3,"click",4,"ngIf"]],template:function(s,d){1&s&&(e._uU(0),e.TgZ(1,"button",0),e.NdJ("click",function(){return d.choose()}),e._uU(2,"\u9009\u62e9"),e.qZA(),e.YNc(3,us,2,0,"button",1)),2&s&&(e.hij("",d.name||d.id||"\u672a\u9009\u62e9","\n"),e.xp6(3),e.Q6J("ngIf",d.showClear))},directives:[xn.ix,Rn.dQ,Ce.w,k.O5],styles:[""]}),g})();var Yr=J(8054),Q=J(1159),b=J(4968),G=J(6451);const ye=["upHandler"],Oe=["downHandler"],Xe=["inputElement"];let vt=(()=>{class g{constructor(s,d,_,w,me,Re){this.ngZone=s,this.elementRef=d,this.cdr=_,this.focusMonitor=w,this.directionality=me,this.destroy$=Re,this.isFocused=!1,this.disabledUp=!1,this.disabledDown=!1,this.dir="ltr",this.onChange=()=>{},this.onTouched=()=>{},this.nzBlur=new e.vpe,this.nzFocus=new e.vpe,this.nzSize="default",this.nzMin=-1/0,this.nzMax=1/0,this.nzParser=at=>at.trim().replace(/\u3002/g,".").replace(/[^\w\.-]+/g,""),this.nzPrecisionMode="toFixed",this.nzPlaceHolder="",this.nzStep=1,this.nzInputMode="decimal",this.nzId=null,this.nzDisabled=!1,this.nzReadOnly=!1,this.nzAutoFocus=!1,this.nzFormatter=at=>at}onModelChange(s){this.parsedValue=this.nzParser(s),this.inputElement.nativeElement.value=`${this.parsedValue}`;const d=this.getCurrentValidValue(this.parsedValue);this.setValue(d)}getCurrentValidValue(s){let d=s;return d=""===d?"":this.isNotCompleteNumber(d)?this.value:`${this.getValidValue(d)}`,this.toNumber(d)}isNotCompleteNumber(s){return isNaN(s)||""===s||null===s||!(!s||s.toString().indexOf(".")!==s.toString().length-1)}getValidValue(s){let d=parseFloat(s);return isNaN(d)?s:(d<this.nzMin&&(d=this.nzMin),d>this.nzMax&&(d=this.nzMax),d)}toNumber(s){if(this.isNotCompleteNumber(s))return s;const d=String(s);if(d.indexOf(".")>=0&&(0,fe.DX)(this.nzPrecision)){if("function"==typeof this.nzPrecisionMode)return this.nzPrecisionMode(s,this.nzPrecision);if("cut"===this.nzPrecisionMode){const _=d.split(".");return _[1]=_[1].slice(0,this.nzPrecision),Number(_.join("."))}return Number(Number(s).toFixed(this.nzPrecision))}return Number(s)}getRatio(s){let d=1;return s.metaKey||s.ctrlKey?d=.1:s.shiftKey&&(d=10),d}down(s,d){this.isFocused||this.focus(),this.step("down",s,d)}up(s,d){this.isFocused||this.focus(),this.step("up",s,d)}getPrecision(s){const d=s.toString();if(d.indexOf("e-")>=0)return parseInt(d.slice(d.indexOf("e-")+2),10);let _=0;return d.indexOf(".")>=0&&(_=d.length-d.indexOf(".")-1),_}getMaxPrecision(s,d){if((0,fe.DX)(this.nzPrecision))return this.nzPrecision;const _=this.getPrecision(d),w=this.getPrecision(this.nzStep),me=this.getPrecision(s);return s?Math.max(me,_+w):_+w}getPrecisionFactor(s,d){const _=this.getMaxPrecision(s,d);return Math.pow(10,_)}upStep(s,d){const _=this.getPrecisionFactor(s,d),w=Math.abs(this.getMaxPrecision(s,d));let me;return me="number"==typeof s?((_*s+_*this.nzStep*d)/_).toFixed(w):this.nzMin===-1/0?this.nzStep:this.nzMin,this.toNumber(me)}downStep(s,d){const _=this.getPrecisionFactor(s,d),w=Math.abs(this.getMaxPrecision(s,d));let me;return me="number"==typeof s?((_*s-_*this.nzStep*d)/_).toFixed(w):this.nzMin===-1/0?-this.nzStep:this.nzMin,this.toNumber(me)}step(s,d,_=1){if(this.stop(),d.preventDefault(),this.nzDisabled)return;const w=this.getCurrentValidValue(this.parsedValue)||0;let me=0;"up"===s?me=this.upStep(w,_):"down"===s&&(me=this.downStep(w,_));const Re=me>this.nzMax||me<this.nzMin;me>this.nzMax?me=this.nzMax:me<this.nzMin&&(me=this.nzMin),this.setValue(me),this.updateDisplayValue(me),this.isFocused=!0,!Re&&(this.autoStepTimer=setTimeout(()=>{this[s](d,_)},300))}stop(){this.autoStepTimer&&clearTimeout(this.autoStepTimer)}setValue(s){if(`${this.value}`!=`${s}`&&this.onChange(s),this.value=s,this.parsedValue=s,this.disabledUp=this.disabledDown=!1,s||0===s){const d=Number(s);d>=this.nzMax&&(this.disabledUp=!0),d<=this.nzMin&&(this.disabledDown=!0)}}updateDisplayValue(s){const d=(0,fe.DX)(this.nzFormatter(s))?this.nzFormatter(s):"";this.displayValue=d,this.inputElement.nativeElement.value=`${d}`}writeValue(s){this.value=s,this.setValue(s),this.updateDisplayValue(s),this.cdr.markForCheck()}registerOnChange(s){this.onChange=s}registerOnTouched(s){this.onTouched=s}setDisabledState(s){this.nzDisabled=s,this.cdr.markForCheck()}focus(){this.focusMonitor.focusVia(this.inputElement,"keyboard")}blur(){this.inputElement.nativeElement.blur()}ngOnInit(){this.focusMonitor.monitor(this.elementRef,!0).subscribe(s=>{s?(this.isFocused=!0,this.nzFocus.emit()):(this.isFocused=!1,this.updateDisplayValue(this.value),this.nzBlur.emit(),Promise.resolve().then(()=>this.onTouched()))}),this.dir=this.directionality.value,this.directionality.change.pipe((0,ee.R)(this.destroy$)).subscribe(s=>{this.dir=s}),this.setupHandlersListeners(),this.ngZone.runOutsideAngular(()=>{(0,b.R)(this.inputElement.nativeElement,"keyup").pipe((0,ee.R)(this.destroy$)).subscribe(()=>this.stop()),(0,b.R)(this.inputElement.nativeElement,"keydown").pipe((0,ee.R)(this.destroy$)).subscribe(s=>{const{keyCode:d}=s;d!==Q.LH&&d!==Q.JH&&d!==Q.K5||this.ngZone.run(()=>{if(d===Q.LH){const _=this.getRatio(s);this.up(s,_),this.stop()}else if(d===Q.JH){const _=this.getRatio(s);this.down(s,_),this.stop()}else this.updateDisplayValue(this.value);this.cdr.markForCheck()})})})}ngOnChanges(s){if(s.nzFormatter&&!s.nzFormatter.isFirstChange()){const d=this.getCurrentValidValue(this.parsedValue);this.setValue(d),this.updateDisplayValue(d)}}ngAfterViewInit(){this.nzAutoFocus&&this.focus()}ngOnDestroy(){this.focusMonitor.stopMonitoring(this.elementRef)}setupHandlersListeners(){this.ngZone.runOutsideAngular(()=>{(0,G.T)((0,b.R)(this.upHandler.nativeElement,"mouseup"),(0,b.R)(this.upHandler.nativeElement,"mouseleave"),(0,b.R)(this.downHandler.nativeElement,"mouseup"),(0,b.R)(this.downHandler.nativeElement,"mouseleave")).pipe((0,ee.R)(this.destroy$)).subscribe(()=>this.stop())})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(Fr.tE),e.Y36(ne.Is,8),e.Y36(S.kn))},g.\u0275cmp=e.Xpm({type:g,selectors:[["nz-input-number"]],viewQuery:function(s,d){if(1&s&&(e.Gf(ye,7),e.Gf(Oe,7),e.Gf(Xe,7)),2&s){let _;e.iGM(_=e.CRH())&&(d.upHandler=_.first),e.iGM(_=e.CRH())&&(d.downHandler=_.first),e.iGM(_=e.CRH())&&(d.inputElement=_.first)}},hostAttrs:[1,"ant-input-number"],hostVars:12,hostBindings:function(s,d){2&s&&e.ekj("ant-input-number-focused",d.isFocused)("ant-input-number-lg","large"===d.nzSize)("ant-input-number-sm","small"===d.nzSize)("ant-input-number-disabled",d.nzDisabled)("ant-input-number-readonly",d.nzReadOnly)("ant-input-number-rtl","rtl"===d.dir)},inputs:{nzSize:"nzSize",nzMin:"nzMin",nzMax:"nzMax",nzParser:"nzParser",nzPrecision:"nzPrecision",nzPrecisionMode:"nzPrecisionMode",nzPlaceHolder:"nzPlaceHolder",nzStep:"nzStep",nzInputMode:"nzInputMode",nzId:"nzId",nzDisabled:"nzDisabled",nzReadOnly:"nzReadOnly",nzAutoFocus:"nzAutoFocus",nzFormatter:"nzFormatter"},outputs:{nzBlur:"nzBlur",nzFocus:"nzFocus"},exportAs:["nzInputNumber"],features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0},S.kn]),e.TTD],decls:10,vars:14,consts:[[1,"ant-input-number-handler-wrap"],["unselectable","unselectable",1,"ant-input-number-handler","ant-input-number-handler-up",3,"mousedown"],["upHandler",""],["nz-icon","","nzType","up",1,"ant-input-number-handler-up-inner"],["unselectable","unselectable",1,"ant-input-number-handler","ant-input-number-handler-down",3,"mousedown"],["downHandler",""],["nz-icon","","nzType","down",1,"ant-input-number-handler-down-inner"],[1,"ant-input-number-input-wrap"],["autocomplete","off",1,"ant-input-number-input",3,"disabled","placeholder","readOnly","ngModel","ngModelChange"],["inputElement",""]],template:function(s,d){1&s&&(e.TgZ(0,"div",0)(1,"span",1,2),e.NdJ("mousedown",function(w){return d.up(w)}),e._UZ(3,"i",3),e.qZA(),e.TgZ(4,"span",4,5),e.NdJ("mousedown",function(w){return d.down(w)}),e._UZ(6,"i",6),e.qZA()(),e.TgZ(7,"div",7)(8,"input",8,9),e.NdJ("ngModelChange",function(w){return d.onModelChange(w)}),e.qZA()()),2&s&&(e.xp6(1),e.ekj("ant-input-number-handler-up-disabled",d.disabledUp),e.xp6(3),e.ekj("ant-input-number-handler-down-disabled",d.disabledDown),e.xp6(4),e.Q6J("disabled",d.nzDisabled)("placeholder",d.nzPlaceHolder)("readOnly",d.nzReadOnly)("ngModel",d.displayValue),e.uIk("id",d.nzId)("autofocus",d.nzAutoFocus?"autofocus":null)("min",d.nzMin)("max",d.nzMax)("step",d.nzStep)("inputmode",d.nzInputMode))},directives:[K.Ls,M.Fj,M.JJ,M.On],encapsulation:2,changeDetection:0}),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzDisabled",void 0),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzReadOnly",void 0),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzAutoFocus",void 0),g})(),Ct=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[[ne.vT,k.ez,M.u5,K.PV]]}),g})();var bt=J(9987),Et=J(3191),jt=J(727),Rr=J(6406),lr=J(4004),Wr=J(5698),wr=J(8505),nr=J(3088);function Qr(g,x,s){for(let d in x)if(x.hasOwnProperty(d)){const _=x[d];_?g.setProperty(d,_,(null==s?void 0:s.has(d))?"important":""):g.removeProperty(d)}return g}function bi(g,x){const s=x?"":"none";Qr(g.style,{"touch-action":x?"":"none","-webkit-user-drag":x?"":"none","-webkit-tap-highlight-color":x?"":"transparent","user-select":s,"-ms-user-select":s,"-webkit-user-select":s,"-moz-user-select":s})}function Pi(g,x,s){Qr(g.style,{position:x?"":"fixed",top:x?"":"0",opacity:x?"":"0",left:x?"":"-999em"},s)}function Ii(g,x){return x&&"none"!=x?g+" "+x:g}function ai(g){const x=g.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(g)*x}function Us(g,x){return g.getPropertyValue(x).split(",").map(d=>d.trim())}function _o(g){const x=g.getBoundingClientRect();return{top:x.top,right:x.right,bottom:x.bottom,left:x.left,width:x.width,height:x.height,x:x.x,y:x.y}}function cc(g,x,s){const{top:d,bottom:_,left:w,right:me}=g;return s>=d&&s<=_&&x>=w&&x<=me}function cs(g,x,s){g.top+=x,g.bottom=g.top+g.height,g.left+=s,g.right=g.left+g.width}function qg(g,x,s,d){const{top:_,right:w,bottom:me,left:Re,width:at,height:ft}=g,xt=at*x,Bt=ft*x;return d>_-Bt&&d<me+Bt&&s>Re-xt&&s<w+xt}class Dh{constructor(x){this._document=x,this.positions=new Map}clear(){this.positions.clear()}cache(x){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),x.forEach(s=>{this.positions.set(s,{scrollPosition:{top:s.scrollTop,left:s.scrollLeft},clientRect:_o(s)})})}handleScroll(x){const s=(0,se.sA)(x),d=this.positions.get(s);if(!d)return null;const _=d.scrollPosition;let w,me;if(s===this._document){const ft=this.getViewportScrollPosition();w=ft.top,me=ft.left}else w=s.scrollTop,me=s.scrollLeft;const Re=_.top-w,at=_.left-me;return this.positions.forEach((ft,xt)=>{ft.clientRect&&s!==xt&&s.contains(xt)&&cs(ft.clientRect,Re,at)}),_.top=w,_.left=me,{top:Re,left:at}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function Kg(g){const x=g.cloneNode(!0),s=x.querySelectorAll("[id]"),d=g.nodeName.toLowerCase();x.removeAttribute("id");for(let _=0;_<s.length;_++)s[_].removeAttribute("id");return"canvas"===d?fu(g,x):("input"===d||"select"===d||"textarea"===d)&&Ka(g,x),xl("canvas",g,x,fu),xl("input, textarea, select",g,x,Ka),x}function xl(g,x,s,d){const _=x.querySelectorAll(g);if(_.length){const w=s.querySelectorAll(g);for(let me=0;me<_.length;me++)d(_[me],w[me])}}let hc=0;function Ka(g,x){"file"!==x.type&&(x.value=g.value),"radio"===x.type&&x.name&&(x.name=`mat-clone-${x.name}-${hc++}`)}function fu(g,x){const s=x.getContext("2d");if(s)try{s.drawImage(g,0,0)}catch(d){}}const $g=(0,se.i$)({passive:!0}),Vs=(0,se.i$)({passive:!1}),Ah=new Set(["position"]);class Hs{constructor(x,s,d,_,w,me){this._config=s,this._document=d,this._ngZone=_,this._viewportRuler=w,this._dragDropRegistry=me,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new O.x,this._pointerMoveSubscription=jt.w0.EMPTY,this._pointerUpSubscription=jt.w0.EMPTY,this._scrollSubscription=jt.w0.EMPTY,this._resizeSubscription=jt.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new O.x,this.started=new O.x,this.released=new O.x,this.ended=new O.x,this.entered=new O.x,this.exited=new O.x,this.dropped=new O.x,this.moved=this._moveEvents,this._pointerDown=Re=>{if(this.beforeStarted.next(),this._handles.length){const at=this._getTargetHandle(Re);at&&!this._disabledHandles.has(at)&&!this.disabled&&this._initializeDragSequence(at,Re)}else this.disabled||this._initializeDragSequence(this._rootElement,Re)},this._pointerMove=Re=>{const at=this._getPointerPositionOnPage(Re);if(!this._hasStartedDragging){if(Math.abs(at.x-this._pickupPositionOnPage.x)+Math.abs(at.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const Cn=Date.now()>=this._dragStartTime+this._getDragStartDelay(Re),_r=this._dropContainer;if(!Cn)return void this._endDragSequence(Re);(!_r||!_r.isDragging()&&!_r.isReceiving())&&(Re.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(Re)))}return}Re.preventDefault();const ft=this._getConstrainedPointerPosition(at);if(this._hasMoved=!0,this._lastKnownPointerPosition=at,this._updatePointerDirectionDelta(ft),this._dropContainer)this._updateActiveDropContainer(ft,at);else{const xt=this._activeTransform;xt.x=ft.x-this._pickupPositionOnPage.x+this._passiveTransform.x,xt.y=ft.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(xt.x,xt.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:ft,event:Re,distance:this._getDragDistance(ft),delta:this._pointerDirectionDelta})})},this._pointerUp=Re=>{this._endDragSequence(Re)},this._nativeDragStart=Re=>{if(this._handles.length){const at=this._getTargetHandle(Re);at&&!this._disabledHandles.has(at)&&!this.disabled&&Re.preventDefault()}else this.disabled||Re.preventDefault()},this.withRootElement(x).withParent(s.parentDragRef||null),this._parentPositions=new Dh(d),me.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(x){const s=(0,Et.Ig)(x);s!==this._disabled&&(this._disabled=s,this._toggleNativeDragInteractions(),this._handles.forEach(d=>bi(d,s)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(x){this._handles=x.map(d=>(0,Et.fI)(d)),this._handles.forEach(d=>bi(d,this.disabled)),this._toggleNativeDragInteractions();const s=new Set;return this._disabledHandles.forEach(d=>{this._handles.indexOf(d)>-1&&s.add(d)}),this._disabledHandles=s,this}withPreviewTemplate(x){return this._previewTemplate=x,this}withPlaceholderTemplate(x){return this._placeholderTemplate=x,this}withRootElement(x){const s=(0,Et.fI)(x);return s!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{s.addEventListener("mousedown",this._pointerDown,Vs),s.addEventListener("touchstart",this._pointerDown,$g),s.addEventListener("dragstart",this._nativeDragStart,Vs)}),this._initialTransform=void 0,this._rootElement=s),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(x){return this._boundaryElement=x?(0,Et.fI)(x):null,this._resizeSubscription.unsubscribe(),x&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(x){return this._parentDragRef=x,this}dispose(){var x,s;this._removeRootElementListeners(this._rootElement),this.isDragging()&&(null===(x=this._rootElement)||void 0===x||x.remove()),null===(s=this._anchor)||void 0===s||s.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(x){!this._disabledHandles.has(x)&&this._handles.indexOf(x)>-1&&(this._disabledHandles.add(x),bi(x,!0))}enableHandle(x){this._disabledHandles.has(x)&&(this._disabledHandles.delete(x),bi(x,this.disabled))}withDirection(x){return this._direction=x,this}_withDropContainer(x){this._dropContainer=x}getFreeDragPosition(){const x=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:x.x,y:x.y}}setFreeDragPosition(x){return this._activeTransform={x:0,y:0},this._passiveTransform.x=x.x,this._passiveTransform.y=x.y,this._dropContainer||this._applyRootElementTransform(x.x,x.y),this}withPreviewContainer(x){return this._previewContainer=x,this}_sortFromLastPointerPosition(){const x=this._lastKnownPointerPosition;x&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(x),x)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){var x,s;null===(x=this._preview)||void 0===x||x.remove(),null===(s=this._previewRef)||void 0===s||s.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){var x,s;null===(x=this._placeholder)||void 0===x||x.remove(),null===(s=this._placeholderRef)||void 0===s||s.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(x){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(x),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const s=this._getPointerPositionOnPage(x);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(s),dropPoint:s})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(x){Mh(x)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const s=this._dropContainer;if(s){const d=this._rootElement,_=d.parentNode,w=this._placeholder=this._createPlaceholderElement(),me=this._anchor=this._anchor||this._document.createComment(""),Re=this._getShadowRoot();_.insertBefore(me,d),this._initialTransform=d.style.transform||"",this._preview=this._createPreviewElement(),Pi(d,!1,Ah),this._document.body.appendChild(_.replaceChild(w,d)),this._getPreviewInsertionPoint(_,Re).appendChild(this._preview),this.started.next({source:this}),s.start(),this._initialContainer=s,this._initialIndex=s.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(s?s.getScrollableParents():[])}_initializeDragSequence(x,s){this._parentDragRef&&s.stopPropagation();const d=this.isDragging(),_=Mh(s),w=!_&&0!==s.button,me=this._rootElement,Re=(0,se.sA)(s),at=!_&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),ft=_?(0,Fr.yG)(s):(0,Fr.X6)(s);if(Re&&Re.draggable&&"mousedown"===s.type&&s.preventDefault(),d||w||at||ft)return;if(this._handles.length){const Ot=me.style;this._rootElementTapHighlight=Ot.webkitTapHighlightColor||"",Ot.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(Ot=>this._updateOnScroll(Ot)),this._boundaryElement&&(this._boundaryRect=_o(this._boundaryElement));const xt=this._previewTemplate;this._pickupPositionInElement=xt&&xt.template&&!xt.matchSize?{x:0,y:0}:this._getPointerPositionInElement(x,s);const Bt=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(s);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:Bt.x,y:Bt.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,s)}_cleanupDragArtifacts(x){Pi(this._rootElement,!0,Ah),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const s=this._dropContainer,d=s.getItemIndex(this),_=this._getPointerPositionOnPage(x),w=this._getDragDistance(_),me=s._isOverContainer(_.x,_.y);this.ended.next({source:this,distance:w,dropPoint:_}),this.dropped.next({item:this,currentIndex:d,previousIndex:this._initialIndex,container:s,previousContainer:this._initialContainer,isPointerOverContainer:me,distance:w,dropPoint:_}),s.drop(this,d,this._initialIndex,this._initialContainer,me,w,_),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x,y:s},{x:d,y:_}){let w=this._initialContainer._getSiblingContainerFromPosition(this,x,s);!w&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(x,s)&&(w=this._initialContainer),w&&w!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=w,this._dropContainer.enter(this,x,s,w===this._initialContainer&&w.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:w,currentIndex:w.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(d,_),this._dropContainer._sortItem(this,x,s,this._pointerDirectionDelta),this._applyPreviewTransform(x-this._pickupPositionInElement.x,s-this._pickupPositionInElement.y))}_createPreviewElement(){const x=this._previewTemplate,s=this.previewClass,d=x?x.template:null;let _;if(d&&x){const w=x.matchSize?this._rootElement.getBoundingClientRect():null,me=x.viewContainer.createEmbeddedView(d,x.context);me.detectChanges(),_=jg(me,this._document),this._previewRef=me,x.matchSize?Xg(_,w):_.style.transform=Tl(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const w=this._rootElement;_=Kg(w),Xg(_,w.getBoundingClientRect()),this._initialTransform&&(_.style.transform=this._initialTransform)}return Qr(_.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},Ah),bi(_,!1),_.classList.add("cdk-drag-preview"),_.setAttribute("dir",this._direction),s&&(Array.isArray(s)?s.forEach(w=>_.classList.add(w)):_.classList.add(s)),_}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const x=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(x.left,x.top);const s=function mo(g){const x=getComputedStyle(g),s=Us(x,"transition-property"),d=s.find(Re=>"transform"===Re||"all"===Re);if(!d)return 0;const _=s.indexOf(d),w=Us(x,"transition-duration"),me=Us(x,"transition-delay");return ai(w[_])+ai(me[_])}(this._preview);return 0===s?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(d=>{const _=me=>{var Re;(!me||(0,se.sA)(me)===this._preview&&"transform"===me.propertyName)&&(null===(Re=this._preview)||void 0===Re||Re.removeEventListener("transitionend",_),d(),clearTimeout(w))},w=setTimeout(_,1.5*s);this._preview.addEventListener("transitionend",_)}))}_createPlaceholderElement(){const x=this._placeholderTemplate,s=x?x.template:null;let d;return s?(this._placeholderRef=x.viewContainer.createEmbeddedView(s,x.context),this._placeholderRef.detectChanges(),d=jg(this._placeholderRef,this._document)):d=Kg(this._rootElement),d.style.pointerEvents="none",d.classList.add("cdk-drag-placeholder"),d}_getPointerPositionInElement(x,s){const d=this._rootElement.getBoundingClientRect(),_=x===this._rootElement?null:x,w=_?_.getBoundingClientRect():d,me=Mh(s)?s.targetTouches[0]:s,Re=this._getViewportScrollPosition();return{x:w.left-d.left+(me.pageX-w.left-Re.left),y:w.top-d.top+(me.pageY-w.top-Re.top)}}_getPointerPositionOnPage(x){const s=this._getViewportScrollPosition(),d=Mh(x)?x.touches[0]||x.changedTouches[0]||{pageX:0,pageY:0}:x,_=d.pageX-s.left,w=d.pageY-s.top;if(this._ownerSVGElement){const me=this._ownerSVGElement.getScreenCTM();if(me){const Re=this._ownerSVGElement.createSVGPoint();return Re.x=_,Re.y=w,Re.matrixTransform(me.inverse())}}return{x:_,y:w}}_getConstrainedPointerPosition(x){const s=this._dropContainer?this._dropContainer.lockAxis:null;let{x:d,y:_}=this.constrainPosition?this.constrainPosition(x,this):x;if("x"===this.lockAxis||"x"===s?_=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===s)&&(d=this._pickupPositionOnPage.x),this._boundaryRect){const{x:w,y:me}=this._pickupPositionInElement,Re=this._boundaryRect,{width:at,height:ft}=this._getPreviewRect(),xt=Re.top+me,Bt=Re.bottom-(ft-me);d=Eh(d,Re.left+w,Re.right-(at-w)),_=Eh(_,xt,Bt)}return{x:d,y:_}}_updatePointerDirectionDelta(x){const{x:s,y:d}=x,_=this._pointerDirectionDelta,w=this._pointerPositionAtLastDirectionChange,me=Math.abs(s-w.x),Re=Math.abs(d-w.y);return me>this._config.pointerDirectionChangeThreshold&&(_.x=s>w.x?1:-1,w.x=s),Re>this._config.pointerDirectionChangeThreshold&&(_.y=d>w.y?1:-1,w.y=d),_}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const x=this._handles.length>0||!this.isDragging();x!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=x,bi(this._rootElement,x))}_removeRootElementListeners(x){x.removeEventListener("mousedown",this._pointerDown,Vs),x.removeEventListener("touchstart",this._pointerDown,$g),x.removeEventListener("dragstart",this._nativeDragStart,Vs)}_applyRootElementTransform(x,s){const d=Tl(x,s),_=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=_.transform&&"none"!=_.transform?_.transform:""),_.transform=Ii(d,this._initialTransform)}_applyPreviewTransform(x,s){var d;const _=(null===(d=this._previewTemplate)||void 0===d?void 0:d.template)?void 0:this._initialTransform,w=Tl(x,s);this._preview.style.transform=Ii(w,_)}_getDragDistance(x){const s=this._pickupPositionOnPage;return s?{x:x.x-s.x,y:x.y-s.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x,y:s}=this._passiveTransform;if(0===x&&0===s||this.isDragging()||!this._boundaryElement)return;const d=this._boundaryElement.getBoundingClientRect(),_=this._rootElement.getBoundingClientRect();if(0===d.width&&0===d.height||0===_.width&&0===_.height)return;const w=d.left-_.left,me=_.right-d.right,Re=d.top-_.top,at=_.bottom-d.bottom;d.width>_.width?(w>0&&(x+=w),me>0&&(x-=me)):x=0,d.height>_.height?(Re>0&&(s+=Re),at>0&&(s-=at)):s=0,(x!==this._passiveTransform.x||s!==this._passiveTransform.y)&&this.setFreeDragPosition({y:s,x})}_getDragStartDelay(x){const s=this.dragStartDelay;return"number"==typeof s?s:Mh(x)?s.touch:s?s.mouse:0}_updateOnScroll(x){const s=this._parentPositions.handleScroll(x);if(s){const d=(0,se.sA)(x);this._boundaryRect&&d!==this._boundaryElement&&d.contains(this._boundaryElement)&&cs(this._boundaryRect,s.top,s.left),this._pickupPositionOnPage.x+=s.left,this._pickupPositionOnPage.y+=s.top,this._dropContainer||(this._activeTransform.x-=s.left,this._activeTransform.y-=s.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){var x;return(null===(x=this._parentPositions.positions.get(this._document))||void 0===x?void 0:x.scrollPosition)||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,se.kV)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(x,s){const d=this._previewContainer||"global";if("parent"===d)return x;if("global"===d){const _=this._document;return s||_.fullscreenElement||_.webkitFullscreenElement||_.mozFullScreenElement||_.msFullscreenElement||_.body}return(0,Et.fI)(d)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),this._previewRect}_getTargetHandle(x){return this._handles.find(s=>x.target&&(x.target===s||s.contains(x.target)))}}function Tl(g,x){return`translate3d(${Math.round(g)}px, ${Math.round(x)}px, 0)`}function Eh(g,x,s){return Math.max(x,Math.min(s,g))}function Mh(g){return"t"===g.type[0]}function jg(g,x){const s=g.rootNodes;if(1===s.length&&s[0].nodeType===x.ELEMENT_NODE)return s[0];const d=x.createElement("div");return s.forEach(_=>d.appendChild(_)),d}function Xg(g,x){g.style.width=`${x.width}px`,g.style.height=`${x.height}px`,g.style.transform=Tl(x.left,x.top)}function Oh(g,x){return Math.max(0,Math.min(x,g))}class Ly{constructor(x,s,d,_,w){this._dragDropRegistry=s,this._ngZone=_,this._viewportRuler=w,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new O.x,this.entered=new O.x,this.exited=new O.x,this.dropped=new O.x,this.sorted=new O.x,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=jt.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new O.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function an(g=0,x=yt.z){return g<0&&(g=0),(0,Mt.H)(g,g,x)}(0,Rr.Z).pipe((0,ee.R)(this._stopScrollTimers)).subscribe(()=>{const me=this._scrollNode,Re=this.autoScrollStep;1===this._verticalScrollDirection?me.scrollBy(0,-Re):2===this._verticalScrollDirection&&me.scrollBy(0,Re),1===this._horizontalScrollDirection?me.scrollBy(-Re,0):2===this._horizontalScrollDirection&&me.scrollBy(Re,0)})},this.element=(0,Et.fI)(x),this._document=d,this.withScrollableParents([this.element]),s.registerDropContainer(this),this._parentPositions=new Dh(d)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(x,s,d,_){let w;this._draggingStarted(),null==_?(w=this.sortingDisabled?this._draggables.indexOf(x):-1,-1===w&&(w=this._getItemIndexFromPointerPosition(x,s,d))):w=_;const me=this._activeDraggables,Re=me.indexOf(x),at=x.getPlaceholderElement();let ft=me[w];if(ft===x&&(ft=me[w+1]),!ft&&(null==w||-1===w||w<me.length-1)&&this._shouldEnterAsFirstChild(s,d)&&(ft=me[0]),Re>-1&&me.splice(Re,1),ft&&!this._dragDropRegistry.isDragging(ft)){const xt=ft.getRootElement();xt.parentElement.insertBefore(at,xt),me.splice(w,0,x)}else(0,Et.fI)(this.element).appendChild(at),me.push(x);at.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:x,container:this,currentIndex:this.getItemIndex(x)})}exit(x){this._reset(),this.exited.next({item:x,container:this})}drop(x,s,d,_,w,me,Re){this._reset(),this.dropped.next({item:x,currentIndex:s,previousIndex:d,container:this,previousContainer:_,isPointerOverContainer:w,distance:me,dropPoint:Re})}withItems(x){const s=this._draggables;return this._draggables=x,x.forEach(d=>d._withDropContainer(this)),this.isDragging()&&(s.filter(_=>_.isDragging()).every(_=>-1===x.indexOf(_))?this._reset():this._cacheItems()),this}withDirection(x){return this._direction=x,this}connectedTo(x){return this._siblings=x.slice(),this}withOrientation(x){return this._orientation=x,this}withScrollableParents(x){const s=(0,Et.fI)(this.element);return this._scrollableElements=-1===x.indexOf(s)?[s,...x]:x.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(x){return this._isDragging?("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(d=>d.drag===x):this._draggables.indexOf(x)}isReceiving(){return this._activeSiblings.size>0}_sortItem(x,s,d,_){if(this.sortingDisabled||!this._clientRect||!qg(this._clientRect,.05,s,d))return;const w=this._itemPositions,me=this._getItemIndexFromPointerPosition(x,s,d,_);if(-1===me&&w.length>0)return;const Re="horizontal"===this._orientation,at=w.findIndex(yi=>yi.drag===x),ft=w[me],Bt=ft.clientRect,Ot=at>me?1:-1,Cn=this._getItemOffsetPx(w[at].clientRect,Bt,Ot),_r=this._getSiblingOffsetPx(at,w,Ot),Hi=w.slice();(function ky(g,x,s){const d=Oh(x,g.length-1),_=Oh(s,g.length-1);if(d===_)return;const w=g[d],me=_<d?-1:1;for(let Re=d;Re!==_;Re+=me)g[Re]=g[Re+me];g[_]=w})(w,at,me),this.sorted.next({previousIndex:at,currentIndex:me,container:this,item:x}),w.forEach((yi,Zu)=>{if(Hi[Zu]===yi)return;const Yc=yi.drag===x,Uu=Yc?Cn:_r,gd=Yc?x.getPlaceholderElement():yi.drag.getRootElement();yi.offset+=Uu,Re?(gd.style.transform=Ii(`translate3d(${Math.round(yi.offset)}px, 0, 0)`,yi.initialTransform),cs(yi.clientRect,0,Uu)):(gd.style.transform=Ii(`translate3d(0, ${Math.round(yi.offset)}px, 0)`,yi.initialTransform),cs(yi.clientRect,Uu,0))}),this._previousSwap.overlaps=cc(Bt,s,d),this._previousSwap.drag=ft.drag,this._previousSwap.delta=Re?_.x:_.y}_startScrollingIfNecessary(x,s){if(this.autoScrollDisabled)return;let d,_=0,w=0;if(this._parentPositions.positions.forEach((me,Re)=>{Re===this._document||!me.clientRect||d||qg(me.clientRect,.05,x,s)&&([_,w]=function Ry(g,x,s,d){const _=nf(x,d),w=rf(x,s);let me=0,Re=0;if(_){const at=g.scrollTop;1===_?at>0&&(me=1):g.scrollHeight-at>g.clientHeight&&(me=2)}if(w){const at=g.scrollLeft;1===w?at>0&&(Re=1):g.scrollWidth-at>g.clientWidth&&(Re=2)}return[me,Re]}(Re,me.clientRect,x,s),(_||w)&&(d=Re))}),!_&&!w){const{width:me,height:Re}=this._viewportRuler.getViewportSize(),at={width:me,height:Re,top:0,right:me,bottom:Re,left:0};_=nf(at,s),w=rf(at,x),d=window}d&&(_!==this._verticalScrollDirection||w!==this._horizontalScrollDirection||d!==this._scrollNode)&&(this._verticalScrollDirection=_,this._horizontalScrollDirection=w,this._scrollNode=d,(_||w)&&d?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const x=(0,Et.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=x.msScrollSnapType||x.scrollSnapType||"",x.scrollSnapType=x.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const x=(0,Et.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(x).clientRect}_cacheItemPositions(){const x="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(s=>{const d=s.getVisibleElement();return{drag:s,offset:0,initialTransform:d.style.transform||"",clientRect:_o(d)}}).sort((s,d)=>x?s.clientRect.left-d.clientRect.left:s.clientRect.top-d.clientRect.top)}_reset(){this._isDragging=!1;const x=(0,Et.fI)(this.element).style;x.scrollSnapType=x.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(s=>{var d;const _=s.getRootElement();if(_){const w=null===(d=this._itemPositions.find(me=>me.drag===s))||void 0===d?void 0:d.initialTransform;_.style.transform=w||""}}),this._siblings.forEach(s=>s._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(x,s,d){const _="horizontal"===this._orientation,w=s[x].clientRect,me=s[x+-1*d];let Re=w[_?"width":"height"]*d;if(me){const at=_?"left":"top",ft=_?"right":"bottom";-1===d?Re-=me.clientRect[at]-w[ft]:Re+=w[at]-me.clientRect[ft]}return Re}_getItemOffsetPx(x,s,d){const _="horizontal"===this._orientation;let w=_?s.left-x.left:s.top-x.top;return-1===d&&(w+=_?s.width-x.width:s.height-x.height),w}_shouldEnterAsFirstChild(x,s){if(!this._activeDraggables.length)return!1;const d=this._itemPositions,_="horizontal"===this._orientation;if(d[0].drag!==this._activeDraggables[0]){const me=d[d.length-1].clientRect;return _?x>=me.right:s>=me.bottom}{const me=d[0].clientRect;return _?x<=me.left:s<=me.top}}_getItemIndexFromPointerPosition(x,s,d,_){const w="horizontal"===this._orientation,me=this._itemPositions.findIndex(({drag:Re,clientRect:at})=>{if(Re===x)return!1;if(_){const ft=w?_.x:_.y;if(Re===this._previousSwap.drag&&this._previousSwap.overlaps&&ft===this._previousSwap.delta)return!1}return w?s>=Math.floor(at.left)&&s<Math.floor(at.right):d>=Math.floor(at.top)&&d<Math.floor(at.bottom)});return-1!==me&&this.sortPredicate(me,x,this)?me:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(x,s){return null!=this._clientRect&&cc(this._clientRect,x,s)}_getSiblingContainerFromPosition(x,s,d){return this._siblings.find(_=>_._canReceive(x,s,d))}_canReceive(x,s,d){if(!this._clientRect||!cc(this._clientRect,s,d)||!this.enterPredicate(x,this))return!1;const _=this._getShadowRoot().elementFromPoint(s,d);if(!_)return!1;const w=(0,Et.fI)(this.element);return _===w||w.contains(_)}_startReceiving(x,s){const d=this._activeSiblings;!d.has(x)&&s.every(_=>this.enterPredicate(_,this)||this._draggables.indexOf(_)>-1)&&(d.add(x),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(x){this._activeSiblings.delete(x),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(x=>{if(this.isDragging()){const s=this._parentPositions.handleScroll(x);s&&(this._itemPositions.forEach(({clientRect:d})=>{cs(d,s.top,s.left)}),this._itemPositions.forEach(({drag:d})=>{this._dragDropRegistry.isDragging(d)&&d._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const x=(0,se.kV)((0,Et.fI)(this.element));this._cachedShadowRoot=x||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const x=this._activeDraggables.filter(s=>s.isDragging());this._siblings.forEach(s=>s._startReceiving(this,x))}}function nf(g,x){const{top:s,bottom:d,height:_}=g,w=.05*_;return x>=s-w&&x<=s+w?1:x>=d-w&&x<=d+w?2:0}function rf(g,x){const{left:s,right:d,width:_}=g,w=.05*_;return x>=s-w&&x<=s+w?1:x>=d-w&&x<=d+w?2:0}const bl=(0,se.i$)({passive:!1,capture:!0});let tv=(()=>{class g{constructor(s,d){this._ngZone=s,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=_=>_.isDragging(),this.pointerMove=new O.x,this.pointerUp=new O.x,this.scroll=new O.x,this._preventDefaultWhileDragging=_=>{this._activeDragInstances.length>0&&_.preventDefault()},this._persistentTouchmoveListener=_=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&_.preventDefault(),this.pointerMove.next(_))},this._document=d}registerDropContainer(s){this._dropInstances.has(s)||this._dropInstances.add(s)}registerDragItem(s){this._dragInstances.add(s),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,bl)})}removeDropContainer(s){this._dropInstances.delete(s)}removeDragItem(s){this._dragInstances.delete(s),this.stopDragging(s),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,bl)}startDragging(s,d){if(!(this._activeDragInstances.indexOf(s)>-1)&&(this._activeDragInstances.push(s),1===this._activeDragInstances.length)){const _=d.type.startsWith("touch");this._globalListeners.set(_?"touchend":"mouseup",{handler:w=>this.pointerUp.next(w),options:!0}).set("scroll",{handler:w=>this.scroll.next(w),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:bl}),_||this._globalListeners.set("mousemove",{handler:w=>this.pointerMove.next(w),options:bl}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((w,me)=>{this._document.addEventListener(me,w.handler,w.options)})})}}stopDragging(s){const d=this._activeDragInstances.indexOf(s);d>-1&&(this._activeDragInstances.splice(d,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(s){return this._activeDragInstances.indexOf(s)>-1}scrolled(s){const d=[this.scroll];return s&&s!==this._document&&d.push(new we.y(_=>this._ngZone.runOutsideAngular(()=>{const me=Re=>{this._activeDragInstances.length&&_.next(Re)};return s.addEventListener("scroll",me,!0),()=>{s.removeEventListener("scroll",me,!0)}}))),(0,G.T)(...d)}ngOnDestroy(){this._dragInstances.forEach(s=>this.removeDragItem(s)),this._dropInstances.forEach(s=>this.removeDropContainer(s)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((s,d)=>{this._document.removeEventListener(d,s.handler,s.options)}),this._globalListeners.clear()}}return g.\u0275fac=function(s){return new(s||g)(e.LFG(e.R0b),e.LFG(k.K0))},g.\u0275prov=e.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();const nv={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let af=(()=>{class g{constructor(s,d,_,w){this._document=s,this._ngZone=d,this._viewportRuler=_,this._dragDropRegistry=w}createDrag(s,d=nv){return new Hs(s,d,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(s){return new Ly(s,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return g.\u0275fac=function(s){return new(s||g)(e.LFG(k.K0),e.LFG(e.R0b),e.LFG(nr.rL),e.LFG(tv))},g.\u0275prov=e.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();const dc=new e.OlP("CDK_DRAG_PARENT"),Eo=new e.OlP("CdkDropListGroup"),iv=new e.OlP("CDK_DRAG_CONFIG");let av=0;const ov=new e.OlP("CdkDropList");let za=(()=>{class g{constructor(s,d,_,w,me,Re,at){this.element=s,this._changeDetectorRef=_,this._scrollDispatcher=w,this._dir=me,this._group=Re,this._destroyed=new O.x,this.connectedTo=[],this.id="cdk-drop-list-"+av++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new e.vpe,this.entered=new e.vpe,this.exited=new e.vpe,this.sorted=new e.vpe,this._unsortedItems=new Set,this._dropListRef=d.createDropList(s),this._dropListRef.data=this,at&&this._assignDefaults(at),this._dropListRef.enterPredicate=(ft,xt)=>this.enterPredicate(ft.data,xt.data),this._dropListRef.sortPredicate=(ft,xt,Bt)=>this.sortPredicate(ft,xt.data,Bt.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),g._dropLists.push(this),Re&&Re._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(s){this._dropListRef.disabled=this._disabled=(0,Et.Ig)(s)}addItem(s){this._unsortedItems.add(s),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(s){this._unsortedItems.delete(s),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((s,d)=>s._dragRef.getVisibleElement().compareDocumentPosition(d._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const s=g._dropLists.indexOf(this);s>-1&&g._dropLists.splice(s,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(s){this._dir&&this._dir.change.pipe((0,pt.O)(this._dir.value),(0,ee.R)(this._destroyed)).subscribe(d=>s.withDirection(d)),s.beforeStarted.subscribe(()=>{const d=(0,Et.Eq)(this.connectedTo).map(_=>"string"==typeof _?g._dropLists.find(me=>me.id===_):_);if(this._group&&this._group._items.forEach(_=>{-1===d.indexOf(_)&&d.push(_)}),!this._scrollableParentsResolved){const _=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(w=>w.getElementRef().nativeElement);this._dropListRef.withScrollableParents(_),this._scrollableParentsResolved=!0}s.disabled=this.disabled,s.lockAxis=this.lockAxis,s.sortingDisabled=(0,Et.Ig)(this.sortingDisabled),s.autoScrollDisabled=(0,Et.Ig)(this.autoScrollDisabled),s.autoScrollStep=(0,Et.su)(this.autoScrollStep,2),s.connectedTo(d.filter(_=>_&&_!==this).map(_=>_._dropListRef)).withOrientation(this.orientation)})}_handleEvents(s){s.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),s.entered.subscribe(d=>{this.entered.emit({container:this,item:d.item.data,currentIndex:d.currentIndex})}),s.exited.subscribe(d=>{this.exited.emit({container:this,item:d.item.data}),this._changeDetectorRef.markForCheck()}),s.sorted.subscribe(d=>{this.sorted.emit({previousIndex:d.previousIndex,currentIndex:d.currentIndex,container:this,item:d.item.data})}),s.dropped.subscribe(d=>{this.dropped.emit({previousIndex:d.previousIndex,currentIndex:d.currentIndex,previousContainer:d.previousContainer.data,container:d.container.data,item:d.item.data,isPointerOverContainer:d.isPointerOverContainer,distance:d.distance,dropPoint:d.dropPoint}),this._changeDetectorRef.markForCheck()})}_assignDefaults(s){const{lockAxis:d,draggingDisabled:_,sortingDisabled:w,listAutoScrollDisabled:me,listOrientation:Re}=s;this.disabled=null!=_&&_,this.sortingDisabled=null!=w&&w,this.autoScrollDisabled=null!=me&&me,this.orientation=Re||"vertical",d&&(this.lockAxis=d)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(s=>s._dragRef))}}return g._dropLists=[],g.\u0275fac=function(s){return new(s||g)(e.Y36(e.SBq),e.Y36(af),e.Y36(e.sBO),e.Y36(nr.mF),e.Y36(ne.Is,8),e.Y36(Eo,12),e.Y36(iv,8))},g.\u0275dir=e.lG2({type:g,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(s,d){2&s&&(e.uIk("id",d.id),e.ekj("cdk-drop-list-disabled",d.disabled)("cdk-drop-list-dragging",d._dropListRef.isDragging())("cdk-drop-list-receiving",d._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[e._Bn([{provide:Eo,useValue:void 0},{provide:ov,useExisting:g}])]}),g})();const Sl=new e.OlP("CdkDragHandle");let Ki=(()=>{class g{constructor(s,d){this.element=s,this._stateChanges=new O.x,this._disabled=!1,this._parentDrag=d}get disabled(){return this._disabled}set disabled(s){this._disabled=(0,Et.Ig)(s),this._stateChanges.next(this)}ngOnDestroy(){this._stateChanges.complete()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(e.SBq),e.Y36(dc,12))},g.\u0275dir=e.lG2({type:g,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]},features:[e._Bn([{provide:Sl,useExisting:g}])]}),g})();const Ny=new e.OlP("CdkDragPlaceholder"),Ph=new e.OlP("CdkDragPreview");let ia=(()=>{class g{constructor(s,d,_,w,me,Re,at,ft,xt,Bt,Ot){this.element=s,this.dropContainer=d,this._ngZone=w,this._viewContainerRef=me,this._dir=at,this._changeDetectorRef=xt,this._selfHandle=Bt,this._parentDrag=Ot,this._destroyed=new O.x,this.started=new e.vpe,this.released=new e.vpe,this.ended=new e.vpe,this.entered=new e.vpe,this.exited=new e.vpe,this.dropped=new e.vpe,this.moved=new we.y(Cn=>{const _r=this._dragRef.moved.pipe((0,lr.U)(Hi=>({source:this,pointerPosition:Hi.pointerPosition,event:Hi.event,delta:Hi.delta,distance:Hi.distance}))).subscribe(Cn);return()=>{_r.unsubscribe()}}),this._dragRef=ft.createDrag(s,{dragStartThreshold:Re&&null!=Re.dragStartThreshold?Re.dragStartThreshold:5,pointerDirectionChangeThreshold:Re&&null!=Re.pointerDirectionChangeThreshold?Re.pointerDirectionChangeThreshold:5,zIndex:null==Re?void 0:Re.zIndex}),this._dragRef.data=this,g._dragInstances.push(this),Re&&this._assignDefaults(Re),d&&(this._dragRef._withDropContainer(d._dropListRef),d.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(s){this._disabled=(0,Et.Ig)(s),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,Wr.q)(1),(0,ee.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(s){const d=s.rootElementSelector,_=s.freeDragPosition;d&&!d.firstChange&&this._updateRootElement(),_&&!_.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const s=g._dragInstances.indexOf(this);s>-1&&g._dragInstances.splice(s,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){var s;const d=this.element.nativeElement;let _=d;this.rootElementSelector&&(_=void 0!==d.closest?d.closest(this.rootElementSelector):null===(s=d.parentElement)||void 0===s?void 0:s.closest(this.rootElementSelector)),this._dragRef.withRootElement(_||d)}_getBoundaryElement(){const s=this.boundaryElement;return s?"string"==typeof s?this.element.nativeElement.closest(s):(0,Et.fI)(s):null}_syncInputs(s){s.beforeStarted.subscribe(()=>{if(!s.isDragging()){const d=this._dir,_=this.dragStartDelay,w=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,me=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;s.disabled=this.disabled,s.lockAxis=this.lockAxis,s.dragStartDelay="object"==typeof _&&_?_:(0,Et.su)(_),s.constrainPosition=this.constrainPosition,s.previewClass=this.previewClass,s.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(w).withPreviewTemplate(me).withPreviewContainer(this.previewContainer||"global"),d&&s.withDirection(d.value)}}),s.beforeStarted.pipe((0,Wr.q)(1)).subscribe(()=>{var d;if(this._parentDrag)return void s.withParent(this._parentDrag._dragRef);let _=this.element.nativeElement.parentElement;for(;_;){if(_.classList.contains("cdk-drag")){s.withParent((null===(d=g._dragInstances.find(w=>w.element.nativeElement===_))||void 0===d?void 0:d._dragRef)||null);break}_=_.parentElement}})}_handleEvents(s){s.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),s.released.subscribe(()=>{this.released.emit({source:this})}),s.ended.subscribe(d=>{this.ended.emit({source:this,distance:d.distance,dropPoint:d.dropPoint}),this._changeDetectorRef.markForCheck()}),s.entered.subscribe(d=>{this.entered.emit({container:d.container.data,item:this,currentIndex:d.currentIndex})}),s.exited.subscribe(d=>{this.exited.emit({container:d.container.data,item:this})}),s.dropped.subscribe(d=>{this.dropped.emit({previousIndex:d.previousIndex,currentIndex:d.currentIndex,previousContainer:d.previousContainer.data,container:d.container.data,isPointerOverContainer:d.isPointerOverContainer,item:this,distance:d.distance,dropPoint:d.dropPoint})})}_assignDefaults(s){const{lockAxis:d,dragStartDelay:_,constrainPosition:w,previewClass:me,boundaryElement:Re,draggingDisabled:at,rootElementSelector:ft,previewContainer:xt}=s;this.disabled=null!=at&&at,this.dragStartDelay=_||0,d&&(this.lockAxis=d),w&&(this.constrainPosition=w),me&&(this.previewClass=me),Re&&(this.boundaryElement=Re),ft&&(this.rootElementSelector=ft),xt&&(this.previewContainer=xt)}_setupHandlesListener(){this._handles.changes.pipe((0,pt.O)(this._handles),(0,wr.b)(s=>{const d=s.filter(_=>_._parentDrag===this).map(_=>_.element);this._selfHandle&&this.rootElementSelector&&d.push(this.element),this._dragRef.withHandles(d)}),(0,Ft.w)(s=>(0,G.T)(...s.map(d=>d._stateChanges.pipe((0,pt.O)(d))))),(0,ee.R)(this._destroyed)).subscribe(s=>{const d=this._dragRef,_=s.element.nativeElement;s.disabled?d.disableHandle(_):d.enableHandle(_)})}}return g._dragInstances=[],g.\u0275fac=function(s){return new(s||g)(e.Y36(e.SBq),e.Y36(ov,12),e.Y36(k.K0),e.Y36(e.R0b),e.Y36(e.s_b),e.Y36(iv,8),e.Y36(ne.Is,8),e.Y36(af),e.Y36(e.sBO),e.Y36(Sl,10),e.Y36(dc,12))},g.\u0275dir=e.lG2({type:g,selectors:[["","cdkDrag",""]],contentQueries:function(s,d,_){if(1&s&&(e.Suo(_,Ph,5),e.Suo(_,Ny,5),e.Suo(_,Sl,5)),2&s){let w;e.iGM(w=e.CRH())&&(d._previewTemplate=w.first),e.iGM(w=e.CRH())&&(d._placeholderTemplate=w.first),e.iGM(w=e.CRH())&&(d._handles=w)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(s,d){2&s&&e.ekj("cdk-drag-disabled",d.disabled)("cdk-drag-dragging",d._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[e._Bn([{provide:dc,useExisting:g}]),e.TTD]}),g})(),uf=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({providers:[af],imports:[nr.ZD]}),g})();var hs=J(6114);function sv(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){return e.CHM(s),e.oxw().clear()}),e._uU(1,"\u6e05\u7a7a"),e.qZA()}}function Ih(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){return e.CHM(s),e.oxw().add()}),e._uU(1,"\u6dfb\u52a0"),e.qZA()}}function pc(g,x){if(1&g&&e._UZ(0,"nz-option",40),2&g){const s=x.$implicit;e.Q6J("nzValue",s.name)("nzLabel",s.label)}}function By(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",7)(1,"td")(2,"input",8),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(3,"td")(4,"input",9),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(5,"td")(6,"input",10),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(7,"td")(8,"nz-select",11),e.NdJ("ngModelChange",function(){return e.CHM(s),e.oxw().change()})("change",function(){return e.CHM(s),e.oxw().change()}),e.YNc(9,pc,1,2,"nz-option",12),e.qZA()(),e.TgZ(10,"td")(11,"input",13),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(12,"td")(13,"nz-select",14),e.NdJ("ngModelChange",function(){return e.CHM(s),e.oxw().change()})("change",function(){return e.CHM(s),e.oxw().change()}),e._UZ(14,"nz-option",15)(15,"nz-option",16)(16,"nz-option",17)(17,"nz-option",18)(18,"nz-option",19)(19,"nz-option",20)(20,"nz-option",21)(21,"nz-option",22)(22,"nz-option",23)(23,"nz-option",24),e.qZA()(),e.TgZ(24,"td")(25,"label",25),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()})("ngModelChange",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(26,"td")(27,"nz-select",26),e.NdJ("ngModelChange",function(){return e.CHM(s),e.oxw().change()})("change",function(){return e.CHM(s),e.oxw().change()}),e._UZ(28,"nz-option",27)(29,"nz-option",28)(30,"nz-option",29)(31,"nz-option",30)(32,"nz-option",31),e.qZA()(),e.TgZ(33,"td")(34,"label",32),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()})("ngModelChange",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(35,"td")(36,"a",33),e._UZ(37,"i",34),e.qZA(),e._UZ(38,"nz-divider",35),e.TgZ(39,"a",36),e.NdJ("click",function(){const w=e.CHM(s).index;return e.oxw().copy(w)}),e._UZ(40,"i",37),e.qZA(),e._UZ(41,"nz-divider",35),e.TgZ(42,"a",38),e.NdJ("nzOnConfirm",function(){const w=e.CHM(s).index;return e.oxw().remove(w)}),e._UZ(43,"i",39),e.qZA()()()}if(2&g){const s=x.index,d=e.oxw();e.Q6J("formGroupName",s),e.xp6(9),e.Q6J("ngForOf",d.codes),e.xp6(19),e.Q6J("nzValue",0),e.xp6(1),e.Q6J("nzValue",1),e.xp6(1),e.Q6J("nzValue",2),e.xp6(1),e.Q6J("nzValue",3),e.xp6(1),e.Q6J("nzValue",4)}}let lv=(()=>{class g{constructor(s){this.fb=s,this.codes=[],this.onChanged=()=>{},this.onTouched=()=>{},this.items=[],this.formGroup=new M.cw({}),this.formArray=new M.Oe([])}ngOnInit(){this.buildForm()}buildForm(){this.formGroup=this.fb.group({items:this.formArray=this.fb.array(this.items.map(s=>this.fb.group({name:[s.name,[M.kI.required]],label:[s.label,[]],code:[s.code,[M.kI.required]],address:[s.address,[M.kI.required]],type:[s.type,[M.kI.required]],le:[s.le,[M.kI.required]],precision:[s.precision,[M.kI.required]],store:[s.store,[M.kI.required]],unit:[s.unit,[]]})))})}add(){this.formArray.push(this.fb.group({name:["",[M.kI.required]],label:["",[]],code:["",[M.kI.required]],address:["",[M.kI.required]],type:["",[M.kI.required]],le:[!1,[M.kI.required]],precision:[0,[M.kI.required]],store:[!0,[M.kI.required]],unit:["",[]]})),this.formArray.controls=[...this.formArray.controls],this.change()}copy(s){var d,_,w,me,Re,at,ft,xt,Bt;const Ot=this.formArray.controls[s];this.formArray.controls.splice(s,0,this.fb.group({name:[null===(d=Ot.get("name"))||void 0===d?void 0:d.value,[M.kI.required]],label:[null===(_=Ot.get("label"))||void 0===_?void 0:_.value,[]],code:[null===(w=Ot.get("code"))||void 0===w?void 0:w.value,[]],address:[null===(me=Ot.get("address"))||void 0===me?void 0:me.value,[M.kI.required]],type:[null===(Re=Ot.get("type"))||void 0===Re?void 0:Re.value,[M.kI.required]],le:[null===(at=Ot.get("le"))||void 0===at?void 0:at.value,[M.kI.required]],precision:[null===(ft=Ot.get("precision"))||void 0===ft?void 0:ft.value,[M.kI.required]],store:[null===(xt=Ot.get("store"))||void 0===xt?void 0:xt.value,[M.kI.required]],unit:[null===(Bt=Ot.get("unit"))||void 0===Bt?void 0:Bt.value,[M.kI.required]]}))}remove(s){this.formArray.removeAt(s),this.change()}clear(){this.formArray.clear(),this.change()}change(){this.formArray.markAsDirty(),this.formArray.updateValueAndValidity(),this.onChanged(this.formArray.value),this.onTouched()}registerOnChange(s){this.onChanged=s}registerOnTouched(s){this.onTouched=s}writeValue(s){this.items=s,this.buildForm()}drop(s){const d=this.formArray.controls.splice(s.previousIndex,1);this.formArray.controls.splice(s.currentIndex,0,...d),this.change()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-edit-points"]],inputs:{codes:"codes"},features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0}])],decls:29,vars:4,consts:[["nz-button","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nzSize","small",3,"nzData","nzFrontPagination","formGroup"],["formGroupName","items","cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","",3,"formGroupName",4,"ngFor","ngForOf"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"],["cdkDrag","",3,"formGroupName"],["nz-input","","formControlName","name","nzSize","small","required","",3,"change"],["nz-input","","formControlName","label","nzSize","small",3,"change"],["nz-input","","formControlName","unit","nzSize","small",3,"change"],["formControlName","code","nzSize","small","required","",3,"ngModelChange","change"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-input","","formControlName","address","nzSize","small",3,"change"],["formControlName","type","nzSize","small","required","",3,"ngModelChange","change"],["nzValue","bit","nzLabel","BIT"],["nzValue","byte","nzLabel","BYTE"],["nzValue","word","nzLabel","WORD"],["nzValue","dword","nzLabel","DWORD"],["nzValue","qword","nzLabel","QWORD"],["nzValue","short","nzLabel","SHORT"],["nzValue","int","nzLabel","INT"],["nzValue","long","nzLabel","LONG"],["nzValue","float","nzLabel","FLOAT"],["nzValue","double","nzLabel","DOUBLE"],["nz-checkbox","","formControlName","le",3,"change","ngModelChange"],["formControlName","precision","nzSize","small","required","",3,"ngModelChange","change"],["nzLabel","0",3,"nzValue"],["nzLabel","1",3,"nzValue"],["nzLabel","2",3,"nzValue"],["nzLabel","3",3,"nzValue"],["nzLabel","4",3,"nzValue"],["nz-checkbox","","formControlName","store",3,"change","ngModelChange"],["cdkDragHandle","","title","\u79fb\u52a8"],["nz-icon","","nzType","drag","nzTheme","outline"],["nzType","vertical"],["cdkDragHandle","","title","\u590d\u5236",3,"click"],["nz-icon","","nzType","copy","nzTheme","outline"],["nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664?","title","\u5220\u9664",3,"nzOnConfirm"],["nz-icon","","nzType","delete","nzTheme","outline"],[3,"nzValue","nzLabel"]],template:function(s,d){1&s&&(e.TgZ(0,"app-toolbar")(1,"nz-space"),e.YNc(2,sv,2,0,"button",0),e.YNc(3,Ih,2,0,"button",1),e.qZA()(),e.TgZ(4,"nz-table",2)(5,"thead")(6,"tr")(7,"th"),e._uU(8,"\u53d8\u91cf"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"\u540d\u79f0"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"\u5355\u4f4d"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"\u4ee3\u7801"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"\u5730\u5740"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"\u7c7b\u578b"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"\u5c0f\u7aef\u6a21\u5f0f"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"\u5c0f\u6570\u70b9\u4f4d"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"\u9ed8\u8ba4\u503c"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(27,"tbody",3),e.NdJ("cdkDropListDropped",function(w){return d.drop(w)}),e.YNc(28,By,44,7,"tr",4),e.qZA()()),2&s&&(e.xp6(4),e.Q6J("nzData",d.formArray.controls)("nzFrontPagination",!1)("formGroup",d.formGroup),e.xp6(24),e.Q6J("ngForOf",d.formArray.controls))},directives:[bt.n,Rt.NU,Rt.$1,xn.ix,Rn.dQ,Ce.w,et.N8,M.JL,M.sg,et.Om,et.$Z,et.Uo,et._C,et.p0,M.x0,za,k.sg,ia,Ae.Zp,M.Fj,M.JJ,M.u,M.Q7,Yr.Vq,Yr.Ip,hs.Ie,Ki,K.Ls,tn.g,er],styles:[""]}),g})();var gu=J(900),vu=J(6987);const Zy=["hourListElement"],Uy=["minuteListElement"],Vy=["secondListElement"],cf=["use12HoursListElement"];function hf(g,x){if(1&g&&(e.TgZ(0,"div",4)(1,"div",5),e._uU(2),e.qZA()()),2&g){const s=e.oxw();e.xp6(2),e.Oqu(s.dateHelper.format(null==s.time?null:s.time.value,s.format)||"\xa0")}}function uv(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"li",10),e.NdJ("click",function(){e.CHM(s);const _=e.oxw().$implicit;return e.oxw(2).selectHour(_)}),e.TgZ(1,"div",11),e._uU(2),e.ALo(3,"number"),e.qZA()()}if(2&g){const s=e.oxw().$implicit,d=e.oxw(2);e.ekj("ant-picker-time-panel-cell-selected",d.isSelectedHour(s))("ant-picker-time-panel-cell-disabled",s.disabled),e.xp6(2),e.Oqu(e.xi3(3,5,s.index,"2.0-0"))}}function cv(g,x){if(1&g&&(e.ynx(0),e.YNc(1,uv,4,8,"li",9),e.BQk()),2&g){const s=x.$implicit,d=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!(d.nzHideDisabledOptions&&s.disabled))}}function df(g,x){if(1&g&&(e.TgZ(0,"ul",6,7),e.YNc(2,cv,2,1,"ng-container",8),e.qZA()),2&g){const s=e.oxw();e.xp6(2),e.Q6J("ngForOf",s.hourRange)("ngForTrackBy",s.trackByFn)}}function Hy(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"li",10),e.NdJ("click",function(){e.CHM(s);const _=e.oxw().$implicit;return e.oxw(2).selectMinute(_)}),e.TgZ(1,"div",11),e._uU(2),e.ALo(3,"number"),e.qZA()()}if(2&g){const s=e.oxw().$implicit,d=e.oxw(2);e.ekj("ant-picker-time-panel-cell-selected",d.isSelectedMinute(s))("ant-picker-time-panel-cell-disabled",s.disabled),e.xp6(2),e.Oqu(e.xi3(3,5,s.index,"2.0-0"))}}function ff(g,x){if(1&g&&(e.ynx(0),e.YNc(1,Hy,4,8,"li",9),e.BQk()),2&g){const s=x.$implicit,d=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!(d.nzHideDisabledOptions&&s.disabled))}}function Wy(g,x){if(1&g&&(e.TgZ(0,"ul",6,12),e.YNc(2,ff,2,1,"ng-container",8),e.qZA()),2&g){const s=e.oxw();e.xp6(2),e.Q6J("ngForOf",s.minuteRange)("ngForTrackBy",s.trackByFn)}}function hv(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"li",10),e.NdJ("click",function(){e.CHM(s);const _=e.oxw().$implicit;return e.oxw(2).selectSecond(_)}),e.TgZ(1,"div",11),e._uU(2),e.ALo(3,"number"),e.qZA()()}if(2&g){const s=e.oxw().$implicit,d=e.oxw(2);e.ekj("ant-picker-time-panel-cell-selected",d.isSelectedSecond(s))("ant-picker-time-panel-cell-disabled",s.disabled),e.xp6(2),e.Oqu(e.xi3(3,5,s.index,"2.0-0"))}}function Gy(g,x){if(1&g&&(e.ynx(0),e.YNc(1,hv,4,8,"li",9),e.BQk()),2&g){const s=x.$implicit,d=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!(d.nzHideDisabledOptions&&s.disabled))}}function yo(g,x){if(1&g&&(e.TgZ(0,"ul",6,13),e.YNc(2,Gy,2,1,"ng-container",8),e.qZA()),2&g){const s=e.oxw();e.xp6(2),e.Q6J("ngForOf",s.secondRange)("ngForTrackBy",s.trackByFn)}}function pf(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"li",10),e.NdJ("click",function(){e.CHM(s);const _=e.oxw().$implicit;return e.oxw(2).select12Hours(_)}),e.TgZ(1,"div",11),e._uU(2),e.qZA()()}if(2&g){const s=e.oxw().$implicit,d=e.oxw(2);e.ekj("ant-picker-time-panel-cell-selected",d.isSelected12Hours(s)),e.xp6(2),e.Oqu(s.value)}}function Jy(g,x){if(1&g&&(e.ynx(0),e.YNc(1,pf,3,3,"li",16),e.BQk()),2&g){const s=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!s.nzHideDisabledOptions)}}function Yy(g,x){if(1&g&&(e.TgZ(0,"ul",6,14),e.YNc(2,Jy,2,1,"ng-container",15),e.qZA()),2&g){const s=e.oxw();e.xp6(2),e.Q6J("ngForOf",s.use12HoursRange)}}function kh(g,x){}function gf(g,x){if(1&g&&(e.TgZ(0,"div",24),e.YNc(1,kh,0,0,"ng-template",25),e.qZA()),2&g){const s=e.oxw(2);e.xp6(1),e.Q6J("ngTemplateOutlet",s.nzAddOn)}}function dv(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"div",17),e.YNc(1,gf,2,1,"div",18),e.TgZ(2,"ul",19)(3,"li",20)(4,"a",21),e.NdJ("click",function(){return e.CHM(s),e.oxw().onClickNow()}),e._uU(5),e.ALo(6,"nzI18n"),e.qZA()(),e.TgZ(7,"li",22)(8,"button",23),e.NdJ("click",function(){return e.CHM(s),e.oxw().onClickOk()}),e._uU(9),e.ALo(10,"nzI18n"),e.qZA()()()()}if(2&g){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.nzAddOn),e.xp6(4),e.hij(" ",s.nzNowText||e.lcZ(6,3,"Calendar.lang.now")," "),e.xp6(4),e.hij(" ",s.nzOkText||e.lcZ(10,5,"Calendar.lang.ok")," ")}}const Qy=["inputElement"];function qy(g,x){if(1&g&&(e.ynx(0),e._UZ(1,"i",7),e.BQk()),2&g){const s=x.$implicit;e.xp6(1),e.Q6J("nzType",s)}}function fv(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"span",8),e.NdJ("click",function(_){return e.CHM(s),e.oxw().onClickClearBtn(_)}),e._UZ(1,"i",9),e.qZA()}if(2&g){const s=e.oxw();e.xp6(1),e.uIk("aria-label",s.nzClearText)("title",s.nzClearText)}}function Xz(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"div",10)(1,"div",11)(2,"div",12)(3,"nz-time-picker-panel",13),e.NdJ("ngModelChange",function(_){return e.CHM(s),e.oxw().value=_})("ngModelChange",function(_){return e.CHM(s),e.oxw().onPanelValueChange(_)})("closePanel",function(){return e.CHM(s),e.oxw().setCurrentValueAndClose()}),e.ALo(4,"async"),e.qZA()()()()}if(2&g){const s=e.oxw();e.Q6J("@slideMotion","enter"),e.xp6(3),e.Q6J("ngClass",s.nzPopupClassName)("format",s.nzFormat)("nzHourStep",s.nzHourStep)("nzMinuteStep",s.nzMinuteStep)("nzSecondStep",s.nzSecondStep)("nzDisabledHours",s.nzDisabledHours)("nzDisabledMinutes",s.nzDisabledMinutes)("nzDisabledSeconds",s.nzDisabledSeconds)("nzPlaceHolder",s.nzPlaceHolder||e.lcZ(4,19,s.i18nPlaceHolder$))("nzHideDisabledOptions",s.nzHideDisabledOptions)("nzUse12Hours",s.nzUse12Hours)("nzDefaultOpenValue",s.nzDefaultOpenValue)("nzAddOn",s.nzAddOn)("nzClearText",s.nzClearText)("nzNowText",s.nzNowText)("nzOkText",s.nzOkText)("nzAllowEmpty",s.nzAllowEmpty)("ngModel",s.value)}}class Lh{constructor(){this.selected12Hours=void 0,this._use12Hours=!1,this._changes=new O.x}setMinutes(x,s){return s||(this.initValue(),this.value.setMinutes(x),this.update()),this}setHours(x,s){return s||(this.initValue(),this.value.setHours(this._use12Hours?"PM"===this.selected12Hours&&12!==x?x+12:"AM"===this.selected12Hours&&12===x?0:x:x),this.update()),this}setSeconds(x,s){return s||(this.initValue(),this.value.setSeconds(x),this.update()),this}setUse12Hours(x){return this._use12Hours=x,this}get changes(){return this._changes.asObservable()}setValue(x,s){return(0,fe.DX)(s)&&(this._use12Hours=s),x!==this.value&&(this._value=x,(0,fe.DX)(this.value)?this._use12Hours&&(0,fe.DX)(this.hours)&&(this.selected12Hours=this.hours>=12?"PM":"AM"):this._clear()),this}initValue(){(0,fe.kK)(this.value)&&this.setValue(new Date,this._use12Hours)}clear(){this._clear(),this.update()}get isEmpty(){return!((0,fe.DX)(this.hours)||(0,fe.DX)(this.minutes)||(0,fe.DX)(this.seconds))}_clear(){this._value=void 0,this.selected12Hours=void 0}update(){this.isEmpty?this._value=void 0:((0,fe.DX)(this.hours)&&this.value.setHours(this.hours),(0,fe.DX)(this.minutes)&&this.value.setMinutes(this.minutes),(0,fe.DX)(this.seconds)&&this.value.setSeconds(this.seconds),this._use12Hours&&("PM"===this.selected12Hours&&this.hours<12&&this.value.setHours(this.hours+12),"AM"===this.selected12Hours&&this.hours>=12&&this.value.setHours(this.hours-12))),this.changed()}changed(){this._changes.next(this.value)}get viewHours(){return this._use12Hours&&(0,fe.DX)(this.hours)?this.calculateViewHour(this.hours):this.hours}setSelected12Hours(x){x.toUpperCase()!==this.selected12Hours&&(this.selected12Hours=x.toUpperCase(),this.update())}get value(){return this._value||this._defaultOpenValue}get hours(){var x;return null===(x=this.value)||void 0===x?void 0:x.getHours()}get minutes(){var x;return null===(x=this.value)||void 0===x?void 0:x.getMinutes()}get seconds(){var x;return null===(x=this.value)||void 0===x?void 0:x.getSeconds()}setDefaultOpenValue(x){return this._defaultOpenValue=x,this}calculateViewHour(x){const s=this.selected12Hours;return"PM"===s&&x>12?x-12:"AM"===s&&0===x?12:x}}function gc(g,x=1,s=0){return new Array(Math.ceil(g/x)).fill(0).map((d,_)=>(_+s)*x)}let Rh=(()=>{class g{constructor(s,d,_,w){this.ngZone=s,this.cdr=d,this.dateHelper=_,this.elementRef=w,this._nzHourStep=1,this._nzMinuteStep=1,this._nzSecondStep=1,this.unsubscribe$=new O.x,this._format="HH:mm:ss",this._disabledHours=()=>[],this._disabledMinutes=()=>[],this._disabledSeconds=()=>[],this._allowEmpty=!0,this.time=new Lh,this.hourEnabled=!0,this.minuteEnabled=!0,this.secondEnabled=!0,this.firstScrolled=!1,this.enabledColumns=3,this.nzInDatePicker=!1,this.nzHideDisabledOptions=!1,this.nzUse12Hours=!1,this.closePanel=new e.vpe}set nzAllowEmpty(s){(0,fe.DX)(s)&&(this._allowEmpty=s)}get nzAllowEmpty(){return this._allowEmpty}set nzDisabledHours(s){this._disabledHours=s,this._disabledHours&&this.buildHours()}get nzDisabledHours(){return this._disabledHours}set nzDisabledMinutes(s){(0,fe.DX)(s)&&(this._disabledMinutes=s,this.buildMinutes())}get nzDisabledMinutes(){return this._disabledMinutes}set nzDisabledSeconds(s){(0,fe.DX)(s)&&(this._disabledSeconds=s,this.buildSeconds())}get nzDisabledSeconds(){return this._disabledSeconds}set format(s){if((0,fe.DX)(s)){this._format=s,this.enabledColumns=0;const d=new Set(s);this.hourEnabled=d.has("H")||d.has("h"),this.minuteEnabled=d.has("m"),this.secondEnabled=d.has("s"),this.hourEnabled&&this.enabledColumns++,this.minuteEnabled&&this.enabledColumns++,this.secondEnabled&&this.enabledColumns++,this.nzUse12Hours&&this.build12Hours()}}get format(){return this._format}set nzHourStep(s){(0,fe.DX)(s)&&(this._nzHourStep=s,this.buildHours())}get nzHourStep(){return this._nzHourStep}set nzMinuteStep(s){(0,fe.DX)(s)&&(this._nzMinuteStep=s,this.buildMinutes())}get nzMinuteStep(){return this._nzMinuteStep}set nzSecondStep(s){(0,fe.DX)(s)&&(this._nzSecondStep=s,this.buildSeconds())}get nzSecondStep(){return this._nzSecondStep}trackByFn(s){return s}buildHours(){var s;let d=24,_=null===(s=this.nzDisabledHours)||void 0===s?void 0:s.call(this),w=0;if(this.nzUse12Hours&&(d=12,_&&(_="PM"===this.time.selected12Hours?_.filter(me=>me>=12).map(me=>me>12?me-12:me):_.filter(me=>me<12||24===me).map(me=>24===me||0===me?12:me)),w=1),this.hourRange=gc(d,this.nzHourStep,w).map(me=>({index:me,disabled:!!_&&-1!==_.indexOf(me)})),this.nzUse12Hours&&12===this.hourRange[this.hourRange.length-1].index){const me=[...this.hourRange];me.unshift(me[me.length-1]),me.splice(me.length-1,1),this.hourRange=me}}buildMinutes(){this.minuteRange=gc(60,this.nzMinuteStep).map(s=>({index:s,disabled:!!this.nzDisabledMinutes&&-1!==this.nzDisabledMinutes(this.time.hours).indexOf(s)}))}buildSeconds(){this.secondRange=gc(60,this.nzSecondStep).map(s=>({index:s,disabled:!!this.nzDisabledSeconds&&-1!==this.nzDisabledSeconds(this.time.hours,this.time.minutes).indexOf(s)}))}build12Hours(){const s=this._format.includes("A");this.use12HoursRange=[{index:0,value:s?"AM":"am"},{index:1,value:s?"PM":"pm"}]}buildTimes(){this.buildHours(),this.buildMinutes(),this.buildSeconds(),this.build12Hours()}scrollToTime(s=0){this.hourEnabled&&this.hourListElement&&this.scrollToSelected(this.hourListElement.nativeElement,this.time.viewHours,s,"hour"),this.minuteEnabled&&this.minuteListElement&&this.scrollToSelected(this.minuteListElement.nativeElement,this.time.minutes,s,"minute"),this.secondEnabled&&this.secondListElement&&this.scrollToSelected(this.secondListElement.nativeElement,this.time.seconds,s,"second"),this.nzUse12Hours&&this.use12HoursListElement&&this.scrollToSelected(this.use12HoursListElement.nativeElement,"AM"===this.time.selected12Hours?0:1,s,"12-hour")}selectHour(s){this.time.setHours(s.index,s.disabled),this._disabledMinutes&&this.buildMinutes(),(this._disabledSeconds||this._disabledMinutes)&&this.buildSeconds()}selectMinute(s){this.time.setMinutes(s.index,s.disabled),this._disabledSeconds&&this.buildSeconds()}selectSecond(s){this.time.setSeconds(s.index,s.disabled)}select12Hours(s){this.time.setSelected12Hours(s.value),this._disabledHours&&this.buildHours(),this._disabledMinutes&&this.buildMinutes(),this._disabledSeconds&&this.buildSeconds()}scrollToSelected(s,d,_=0,w){if(!s)return;const me=this.translateIndex(d,w);this.scrollTo(s,(s.children[me]||s.children[0]).offsetTop,_)}translateIndex(s,d){var _,w,me;return"hour"===d?this.calcIndex(null===(_=this.nzDisabledHours)||void 0===_?void 0:_.call(this),this.hourRange.map(Re=>Re.index).indexOf(s)):"minute"===d?this.calcIndex(null===(w=this.nzDisabledMinutes)||void 0===w?void 0:w.call(this,this.time.hours),this.minuteRange.map(Re=>Re.index).indexOf(s)):"second"===d?this.calcIndex(null===(me=this.nzDisabledSeconds)||void 0===me?void 0:me.call(this,this.time.hours,this.time.minutes),this.secondRange.map(Re=>Re.index).indexOf(s)):this.calcIndex([],this.use12HoursRange.map(Re=>Re.index).indexOf(s))}scrollTo(s,d,_){if(_<=0)return void(s.scrollTop=d);const me=(d-s.scrollTop)/_*10;this.ngZone.runOutsideAngular(()=>{(0,vu.e)(()=>{s.scrollTop=s.scrollTop+me,s.scrollTop!==d&&this.scrollTo(s,d,_-10)})})}calcIndex(s,d){return(null==s?void 0:s.length)&&this.nzHideDisabledOptions?d-s.reduce((_,w)=>_+(w<d?1:0),0):d}changed(){this.onChange&&this.onChange(this.time.value)}touched(){this.onTouch&&this.onTouch()}timeDisabled(s){var d,_,w,me,Re,at;const ft=s.getHours(),xt=s.getMinutes(),Bt=s.getSeconds();return(null!==(_=null===(d=this.nzDisabledHours)||void 0===d?void 0:d.call(this).indexOf(ft))&&void 0!==_?_:-1)>-1||(null!==(me=null===(w=this.nzDisabledMinutes)||void 0===w?void 0:w.call(this,ft).indexOf(xt))&&void 0!==me?me:-1)>-1||(null!==(at=null===(Re=this.nzDisabledSeconds)||void 0===Re?void 0:Re.call(this,ft,xt).indexOf(Bt))&&void 0!==at?at:-1)>-1}onClickNow(){const s=new Date;this.timeDisabled(s)||(this.time.setValue(s),this.changed(),this.closePanel.emit())}onClickOk(){this.time.setValue(this.time.value,this.nzUse12Hours),this.changed(),this.closePanel.emit()}isSelectedHour(s){return s.index===this.time.viewHours}isSelectedMinute(s){return s.index===this.time.minutes}isSelectedSecond(s){return s.index===this.time.seconds}isSelected12Hours(s){return s.value.toUpperCase()===this.time.selected12Hours}ngOnInit(){this.time.changes.pipe((0,ee.R)(this.unsubscribe$)).subscribe(()=>{this.changed(),this.touched(),this.scrollToTime(120)}),this.buildTimes(),this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.scrollToTime(),this.firstScrolled=!0}),(0,b.R)(this.elementRef.nativeElement,"mousedown").pipe((0,ee.R)(this.unsubscribe$)).subscribe(s=>{s.preventDefault()})})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}ngOnChanges(s){const{nzUse12Hours:d,nzDefaultOpenValue:_}=s;!(null==d?void 0:d.previousValue)&&(null==d?void 0:d.currentValue)&&(this.build12Hours(),this.enabledColumns++),(null==_?void 0:_.currentValue)&&this.time.setDefaultOpenValue(this.nzDefaultOpenValue||new Date)}writeValue(s){this.time.setValue(s,this.nzUse12Hours),this.buildTimes(),s&&this.firstScrolled&&this.scrollToTime(120),this.cdr.markForCheck()}registerOnChange(s){this.onChange=s}registerOnTouched(s){this.onTouch=s}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(e.R0b),e.Y36(e.sBO),e.Y36(Br.mx),e.Y36(e.SBq))},g.\u0275cmp=e.Xpm({type:g,selectors:[["nz-time-picker-panel"]],viewQuery:function(s,d){if(1&s&&(e.Gf(Zy,5),e.Gf(Uy,5),e.Gf(Vy,5),e.Gf(cf,5)),2&s){let _;e.iGM(_=e.CRH())&&(d.hourListElement=_.first),e.iGM(_=e.CRH())&&(d.minuteListElement=_.first),e.iGM(_=e.CRH())&&(d.secondListElement=_.first),e.iGM(_=e.CRH())&&(d.use12HoursListElement=_.first)}},hostAttrs:[1,"ant-picker-time-panel"],hostVars:12,hostBindings:function(s,d){2&s&&e.ekj("ant-picker-time-panel-column-0",0===d.enabledColumns&&!d.nzInDatePicker)("ant-picker-time-panel-column-1",1===d.enabledColumns&&!d.nzInDatePicker)("ant-picker-time-panel-column-2",2===d.enabledColumns&&!d.nzInDatePicker)("ant-picker-time-panel-column-3",3===d.enabledColumns&&!d.nzInDatePicker)("ant-picker-time-panel-narrow",d.enabledColumns<3)("ant-picker-time-panel-placement-bottomLeft",!d.nzInDatePicker)},inputs:{nzInDatePicker:"nzInDatePicker",nzAddOn:"nzAddOn",nzHideDisabledOptions:"nzHideDisabledOptions",nzClearText:"nzClearText",nzNowText:"nzNowText",nzOkText:"nzOkText",nzPlaceHolder:"nzPlaceHolder",nzUse12Hours:"nzUse12Hours",nzDefaultOpenValue:"nzDefaultOpenValue",nzAllowEmpty:"nzAllowEmpty",nzDisabledHours:"nzDisabledHours",nzDisabledMinutes:"nzDisabledMinutes",nzDisabledSeconds:"nzDisabledSeconds",format:"format",nzHourStep:"nzHourStep",nzMinuteStep:"nzMinuteStep",nzSecondStep:"nzSecondStep"},outputs:{closePanel:"closePanel"},exportAs:["nzTimePickerPanel"],features:[e._Bn([{provide:M.JU,useExisting:g,multi:!0}]),e.TTD],decls:7,vars:6,consts:[["class","ant-picker-header",4,"ngIf"],[1,"ant-picker-content"],["class","ant-picker-time-panel-column","style","position: relative;",4,"ngIf"],["class","ant-picker-footer",4,"ngIf"],[1,"ant-picker-header"],[1,"ant-picker-header-view"],[1,"ant-picker-time-panel-column",2,"position","relative"],["hourListElement",""],[4,"ngFor","ngForOf","ngForTrackBy"],["class","ant-picker-time-panel-cell",3,"ant-picker-time-panel-cell-selected","ant-picker-time-panel-cell-disabled","click",4,"ngIf"],[1,"ant-picker-time-panel-cell",3,"click"],[1,"ant-picker-time-panel-cell-inner"],["minuteListElement",""],["secondListElement",""],["use12HoursListElement",""],[4,"ngFor","ngForOf"],["class","ant-picker-time-panel-cell",3,"ant-picker-time-panel-cell-selected","click",4,"ngIf"],[1,"ant-picker-footer"],["class","ant-picker-footer-extra",4,"ngIf"],[1,"ant-picker-ranges"],[1,"ant-picker-now"],[3,"click"],[1,"ant-picker-ok"],["nz-button","","type","button","nzSize","small","nzType","primary",3,"click"],[1,"ant-picker-footer-extra"],[3,"ngTemplateOutlet"]],template:function(s,d){1&s&&(e.YNc(0,hf,3,1,"div",0),e.TgZ(1,"div",1),e.YNc(2,df,3,2,"ul",2),e.YNc(3,Wy,3,2,"ul",2),e.YNc(4,yo,3,2,"ul",2),e.YNc(5,Yy,3,1,"ul",2),e.qZA(),e.YNc(6,dv,11,7,"div",3)),2&s&&(e.Q6J("ngIf",d.nzInDatePicker),e.xp6(2),e.Q6J("ngIf",d.hourEnabled),e.xp6(1),e.Q6J("ngIf",d.minuteEnabled),e.xp6(1),e.Q6J("ngIf",d.secondEnabled),e.xp6(1),e.Q6J("ngIf",d.nzUse12Hours),e.xp6(1),e.Q6J("ngIf",!d.nzInDatePicker))},directives:[xn.ix,k.O5,k.sg,k.tP,Rn.dQ,Ce.w],pipes:[k.JJ,Br.o9],encapsulation:2,changeDetection:0}),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzUse12Hours",void 0),g})(),Ky=(()=>{class g{constructor(s,d,_,w,me,Re,at,ft){this.nzConfigService=s,this.i18n=d,this.element=_,this.renderer=w,this.cdr=me,this.dateHelper=Re,this.platform=at,this.directionality=ft,this._nzModuleName="timePicker",this.destroy$=new O.x,this.isInit=!1,this.focused=!1,this.inputValue="",this.value=null,this.preValue=null,this.i18nPlaceHolder$=(0,Pr.of)(void 0),this.overlayPositions=[{offsetY:3,originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{offsetY:-3,originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{offsetY:3,originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{offsetY:-3,originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}],this.dir="ltr",this.nzId=null,this.nzSize=null,this.nzHourStep=1,this.nzMinuteStep=1,this.nzSecondStep=1,this.nzClearText="clear",this.nzNowText="",this.nzOkText="",this.nzPopupClassName="",this.nzPlaceHolder="",this.nzFormat="HH:mm:ss",this.nzOpen=!1,this.nzUse12Hours=!1,this.nzSuffixIcon="clock-circle",this.nzOpenChange=new e.vpe,this.nzHideDisabledOptions=!1,this.nzAllowEmpty=!0,this.nzDisabled=!1,this.nzAutoFocus=!1,this.nzBackdrop=!1}emitValue(s){this.setValue(s,!0),this._onChange&&this._onChange(this.value),this._onTouched&&this._onTouched()}setValue(s,d=!1){d&&(this.preValue=(0,gu.Z)(s)?new Date(s):null),this.value=(0,gu.Z)(s)?new Date(s):null,this.inputValue=this.dateHelper.format(s,this.nzFormat),this.cdr.markForCheck()}open(){this.nzDisabled||this.nzOpen||(this.focus(),this.nzOpen=!0,this.nzOpenChange.emit(this.nzOpen))}close(){this.nzOpen=!1,this.cdr.markForCheck(),this.nzOpenChange.emit(this.nzOpen)}updateAutoFocus(){this.isInit&&!this.nzDisabled&&(this.nzAutoFocus?this.renderer.setAttribute(this.inputRef.nativeElement,"autofocus","autofocus"):this.renderer.removeAttribute(this.inputRef.nativeElement,"autofocus"))}onClickClearBtn(s){s.stopPropagation(),this.emitValue(null)}onClickOutside(s){this.element.nativeElement.contains(s.target)||this.setCurrentValueAndClose()}onFocus(s){this.focused=s,s||(this.checkTimeValid(this.value)?this.setCurrentValueAndClose():(this.setValue(this.preValue),this.close()))}focus(){this.inputRef.nativeElement&&this.inputRef.nativeElement.focus()}blur(){this.inputRef.nativeElement&&this.inputRef.nativeElement.blur()}onKeyupEsc(){this.setValue(this.preValue)}onKeyupEnter(){this.nzOpen&&(0,gu.Z)(this.value)?this.setCurrentValueAndClose():this.nzOpen||this.open()}onInputChange(s){!this.platform.TRIDENT&&document.activeElement===this.inputRef.nativeElement&&(this.open(),this.parseTimeString(s))}onPanelValueChange(s){this.setValue(s),this.focus()}setCurrentValueAndClose(){this.emitValue(this.value),this.close()}ngOnInit(){var s;this.inputSize=Math.max(8,this.nzFormat.length)+2,this.origin=new st.xu(this.element),this.i18nPlaceHolder$=this.i18n.localeChange.pipe((0,lr.U)(d=>d.TimePicker.placeholder)),this.dir=this.directionality.value,null===(s=this.directionality.change)||void 0===s||s.pipe((0,ee.R)(this.destroy$)).subscribe(d=>{this.dir=d})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnChanges(s){const{nzUse12Hours:d,nzFormat:_,nzDisabled:w,nzAutoFocus:me}=s;if(d&&!d.previousValue&&d.currentValue&&!_&&(this.nzFormat="h:mm:ss a"),w){const at=this.inputRef.nativeElement;w.currentValue?this.renderer.setAttribute(at,"disabled",""):this.renderer.removeAttribute(at,"disabled")}me&&this.updateAutoFocus()}parseTimeString(s){const d=this.dateHelper.parseTime(s,this.nzFormat)||null;(0,gu.Z)(d)&&(this.value=d,this.cdr.markForCheck())}ngAfterViewInit(){this.isInit=!0,this.updateAutoFocus()}writeValue(s){let d;s instanceof Date?d=s:(0,fe.kK)(s)?d=null:((0,gt.ZK)('Non-Date type is not recommended for time-picker, use "Date" type.'),d=new Date(s)),this.setValue(d,!0)}registerOnChange(s){this._onChange=s}registerOnTouched(s){this._onTouched=s}setDisabledState(s){this.nzDisabled=s,this.cdr.markForCheck()}checkTimeValid(s){var d,_,w;if(!s)return!0;const me=null===(d=this.nzDisabledHours)||void 0===d?void 0:d.call(this),Re=null===(_=this.nzDisabledMinutes)||void 0===_?void 0:_.call(this,s.getHours()),at=null===(w=this.nzDisabledSeconds)||void 0===w?void 0:w.call(this,s.getHours(),s.getMinutes());return!((null==me?void 0:me.includes(s.getHours()))||(null==Re?void 0:Re.includes(s.getMinutes()))||(null==at?void 0:at.includes(s.getSeconds())))}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(un.jY),e.Y36(Br.wi),e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(e.sBO),e.Y36(Br.mx),e.Y36(se.t4),e.Y36(ne.Is,8))},g.\u0275cmp=e.Xpm({type:g,selectors:[["nz-time-picker"]],viewQuery:function(s,d){if(1&s&&e.Gf(Qy,7),2&s){let _;e.iGM(_=e.CRH())&&(d.inputRef=_.first)}},hostAttrs:[1,"ant-picker"],hostVars:10,hostBindings:function(s,d){1&s&&e.NdJ("click",function(){return d.open()}),2&s&&e.ekj("ant-picker-large","large"===d.nzSize)("ant-picker-small","small"===d.nzSize)("ant-picker-disabled",d.nzDisabled)("ant-picker-focused",d.focused)("ant-picker-rtl","rtl"===d.dir)},inputs:{nzId:"nzId",nzSize:"nzSize",nzHourStep:"nzHourStep",nzMinuteStep:"nzMinuteStep",nzSecondStep:"nzSecondStep",nzClearText:"nzClearText",nzNowText:"nzNowText",nzOkText:"nzOkText",nzPopupClassName:"nzPopupClassName",nzPlaceHolder:"nzPlaceHolder",nzAddOn:"nzAddOn",nzDefaultOpenValue:"nzDefaultOpenValue",nzDisabledHours:"nzDisabledHours",nzDisabledMinutes:"nzDisabledMinutes",nzDisabledSeconds:"nzDisabledSeconds",nzFormat:"nzFormat",nzOpen:"nzOpen",nzUse12Hours:"nzUse12Hours",nzSuffixIcon:"nzSuffixIcon",nzHideDisabledOptions:"nzHideDisabledOptions",nzAllowEmpty:"nzAllowEmpty",nzDisabled:"nzDisabled",nzAutoFocus:"nzAutoFocus",nzBackdrop:"nzBackdrop"},outputs:{nzOpenChange:"nzOpenChange"},exportAs:["nzTimePicker"],features:[e._Bn([{provide:M.JU,useExisting:g,multi:!0}]),e.TTD],decls:8,vars:14,consts:[[1,"ant-picker-input"],["type","text","autocomplete","off",3,"size","placeholder","ngModel","disabled","ngModelChange","focus","blur","keyup.enter","keyup.escape"],["inputElement",""],[1,"ant-picker-suffix"],[4,"nzStringTemplateOutlet"],["class","ant-picker-clear",3,"click",4,"ngIf"],["cdkConnectedOverlay","","nzConnectedOverlay","",3,"cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayPositions","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayTransformOriginOn","detach","overlayOutsideClick"],["nz-icon","",3,"nzType"],[1,"ant-picker-clear",3,"click"],["nz-icon","","nzType","close-circle","nzTheme","fill"],[1,"ant-picker-dropdown",2,"position","relative"],[1,"ant-picker-panel-container"],["tabindex","-1",1,"ant-picker-panel"],[3,"ngClass","format","nzHourStep","nzMinuteStep","nzSecondStep","nzDisabledHours","nzDisabledMinutes","nzDisabledSeconds","nzPlaceHolder","nzHideDisabledOptions","nzUse12Hours","nzDefaultOpenValue","nzAddOn","nzClearText","nzNowText","nzOkText","nzAllowEmpty","ngModel","ngModelChange","closePanel"]],template:function(s,d){1&s&&(e.TgZ(0,"div",0)(1,"input",1,2),e.NdJ("ngModelChange",function(w){return d.inputValue=w})("focus",function(){return d.onFocus(!0)})("blur",function(){return d.onFocus(!1)})("keyup.enter",function(){return d.onKeyupEnter()})("keyup.escape",function(){return d.onKeyupEsc()})("ngModelChange",function(w){return d.onInputChange(w)}),e.ALo(3,"async"),e.qZA(),e.TgZ(4,"span",3),e.YNc(5,qy,2,1,"ng-container",4),e.qZA(),e.YNc(6,fv,2,2,"span",5),e.qZA(),e.YNc(7,Xz,5,21,"ng-template",6),e.NdJ("detach",function(){return d.close()})("overlayOutsideClick",function(w){return d.onClickOutside(w)})),2&s&&(e.xp6(1),e.Q6J("size",d.inputSize)("placeholder",d.nzPlaceHolder||e.lcZ(3,12,d.i18nPlaceHolder$))("ngModel",d.inputValue)("disabled",d.nzDisabled),e.uIk("id",d.nzId),e.xp6(4),e.Q6J("nzStringTemplateOutlet",d.nzSuffixIcon),e.xp6(1),e.Q6J("ngIf",d.nzAllowEmpty&&!d.nzDisabled&&d.value),e.xp6(1),e.Q6J("cdkConnectedOverlayHasBackdrop",d.nzBackdrop)("cdkConnectedOverlayPositions",d.overlayPositions)("cdkConnectedOverlayOrigin",d.origin)("cdkConnectedOverlayOpen",d.nzOpen)("cdkConnectedOverlayTransformOriginOn",".ant-picker-dropdown"))},directives:[Rh,M.Fj,M.JJ,M.On,ct.f,K.Ls,Ce.w,k.O5,st.pI,zt.hQ,k.mk],pipes:[k.Ov],encapsulation:2,data:{animation:[Sr.mF]},changeDetection:0}),(0,j.gn)([(0,un.oS)()],g.prototype,"nzHourStep",void 0),(0,j.gn)([(0,un.oS)()],g.prototype,"nzMinuteStep",void 0),(0,j.gn)([(0,un.oS)()],g.prototype,"nzSecondStep",void 0),(0,j.gn)([(0,un.oS)()],g.prototype,"nzClearText",void 0),(0,j.gn)([(0,un.oS)()],g.prototype,"nzNowText",void 0),(0,j.gn)([(0,un.oS)()],g.prototype,"nzOkText",void 0),(0,j.gn)([(0,un.oS)()],g.prototype,"nzPopupClassName",void 0),(0,j.gn)([(0,un.oS)()],g.prototype,"nzFormat",void 0),(0,j.gn)([(0,un.oS)(),(0,fe.yF)()],g.prototype,"nzUse12Hours",void 0),(0,j.gn)([(0,un.oS)()],g.prototype,"nzSuffixIcon",void 0),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzHideDisabledOptions",void 0),(0,j.gn)([(0,un.oS)(),(0,fe.yF)()],g.prototype,"nzAllowEmpty",void 0),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzDisabled",void 0),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzAutoFocus",void 0),(0,j.gn)([(0,un.oS)()],g.prototype,"nzBackdrop",void 0),g})(),$i=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[[ne.vT,k.ez,M.u5,Br.YI,st.U8,K.PV,zt.e4,ct.T,xn.sL]]}),g})(),mu=(()=>{class g{constructor(){this.onChanged=()=>{},this.onTouched=()=>{},this._time=new Date}get time(){return this._time}set time(s){this._time=s;const d=60*s.getHours()+s.getMinutes();console.log(s,d),this.onChanged(d),this.onTouched()}ngOnInit(){}registerOnChange(s){this.onChanged=s}registerOnTouched(s){this.onTouched=s}writeValue(s){const d=new Date;s<0?s=0:s>1439&&(s=1439),d.setHours(Math.floor(s/60),s%60,0,0),this._time=d}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-minute-time-picker"]],features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0}])],decls:1,vars:2,consts:[["nzFormat","HH:mm",3,"ngModel","nzAllowEmpty","ngModelChange"]],template:function(s,d){1&s&&(e.TgZ(0,"nz-time-picker",0),e.NdJ("ngModelChange",function(w){return d.time=w}),e.qZA()),2&s&&e.Q6J("ngModel",d.time)("nzAllowEmpty",!1)},directives:[Ky,M.JJ,M.On],styles:[""]}),g})();function Nh(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){return e.CHM(s),e.oxw().clear()}),e._uU(1,"\u6e05\u7a7a"),e.qZA()}}function Mo(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){return e.CHM(s),e.oxw().add()}),e._uU(1,"\u6dfb\u52a0"),e.qZA()}}function Co(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"nz-input-number",27),e.NdJ("change",function(){return e.CHM(s),e.oxw(2).change()}),e.qZA()}2&g&&e.Q6J("nzStep",1)}function Ws(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"app-minute-time-picker",28),e.NdJ("change",function(){return e.CHM(s),e.oxw(2).change()}),e.qZA()}}function Fh(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"input",29),e.NdJ("change",function(){return e.CHM(s),e.oxw(2).change()}),e.qZA()}}function zl(g,x){if(1&g&&e._UZ(0,"nz-option",30),2&g){const s=x.$implicit;e.Q6J("nzValue",s.name)("nzLabel",s.label)}}function pv(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",7)(1,"td")(2,"nz-select",8),e.NdJ("ngModelChange",function(){return e.CHM(s),e.oxw().change()})("change",function(){return e.CHM(s),e.oxw().change()}),e._UZ(3,"nz-option",9)(4,"nz-option",10)(5,"nz-option",11),e.qZA()(),e.TgZ(6,"td"),e.YNc(7,Co,1,1,"nz-input-number",12),e.YNc(8,Ws,1,0,"app-minute-time-picker",13),e.YNc(9,Fh,1,0,"input",14),e.qZA(),e.TgZ(10,"td")(11,"nz-select",15),e.NdJ("ngModelChange",function(){return e.CHM(s),e.oxw().change()})("change",function(){return e.CHM(s),e.oxw().change()}),e.YNc(12,zl,1,2,"nz-option",16),e.qZA()(),e.TgZ(13,"td")(14,"input",17),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(15,"td")(16,"nz-input-number",18),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(17,"td")(18,"label",19),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()})("ngModelChange",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(19,"td")(20,"a",20),e._UZ(21,"i",21),e.qZA(),e._UZ(22,"nz-divider",22),e.TgZ(23,"a",23),e.NdJ("click",function(){const w=e.CHM(s).index;return e.oxw().copy(w)}),e._UZ(24,"i",24),e.qZA(),e._UZ(25,"nz-divider",22),e.TgZ(26,"a",25),e.NdJ("nzOnConfirm",function(){const w=e.CHM(s).index;return e.oxw().remove(w)}),e._UZ(27,"i",26),e.qZA()()()}if(2&g){const s=x.$implicit,d=x.index,_=e.oxw();e.Q6J("formGroupName",d),e.xp6(7),e.Q6J("ngIf","interval"==s.value.type),e.xp6(1),e.Q6J("ngIf","clock"==s.value.type),e.xp6(1),e.Q6J("ngIf","crontab"==s.value.type),e.xp6(3),e.Q6J("ngForOf",_.codes),e.xp6(4),e.Q6J("nzMin",1)("nzMax",65535)("nzStep",1)}}let mf=(()=>{class g{constructor(s){this.fb=s,this.codes=[],this.onChanged=()=>{},this.onTouched=()=>{},this.items=[],this.formGroup=new M.cw({}),this.formArray=new M.Oe([])}ngOnInit(){this.buildForm()}buildForm(){this.formGroup=this.fb.group({items:this.formArray=this.fb.array(this.items.map(s=>this.fb.group({type:[s.type,[M.kI.required]],interval:[s.interval,[M.kI.required]],clock:[s.clock,[M.kI.required]],crontab:[s.crontab,[M.kI.required]],code:[s.code,[M.kI.required]],address:[s.address,[M.kI.required]],length:[s.length,[M.kI.required]],disabled:[s.disabled,[M.kI.required]]})))})}add(){this.formArray.push(this.fb.group({type:["interval",[M.kI.required]],interval:[1e3,[M.kI.required]],clock:[60,[M.kI.required]],crontab:["",[M.kI.required]],code:["",[M.kI.required]],address:["0",[M.kI.required]],length:[1,[M.kI.required]],disabled:[!1,[M.kI.required]]})),this.formArray.controls=[...this.formArray.controls],this.change()}copy(s){var d,_,w,me,Re,at,ft,xt;const Bt=this.formArray.controls[s];this.formArray.controls.splice(s,0,this.fb.group({type:[null===(d=Bt.get("type"))||void 0===d?void 0:d.value,[M.kI.required]],interval:[null===(_=Bt.get("interval"))||void 0===_?void 0:_.value,[]],clock:[null===(w=Bt.get("clock"))||void 0===w?void 0:w.value,[]],crontab:[null===(me=Bt.get("crontab"))||void 0===me?void 0:me.value,[]],code:[null===(Re=Bt.get("code"))||void 0===Re?void 0:Re.value,[]],address:[null===(at=Bt.get("address"))||void 0===at?void 0:at.value,[M.kI.required]],length:[null===(ft=Bt.get("length"))||void 0===ft?void 0:ft.value,[M.kI.required]],disabled:[null===(xt=Bt.get("disabled"))||void 0===xt?void 0:xt.value,[M.kI.required]]}))}remove(s){this.formArray.removeAt(s),this.change()}clear(){this.formArray.clear(),this.change()}change(){this.formArray.markAsDirty(),this.formArray.updateValueAndValidity(),this.onChanged(this.formArray.value),this.onTouched()}registerOnChange(s){this.onChanged=s}registerOnTouched(s){this.onTouched=s}writeValue(s){this.items=s,this.buildForm()}drop(s){const d=this.formArray.controls.splice(s.previousIndex,1);this.formArray.controls.splice(s.currentIndex,0,...d),this.change()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-edit-pollers"]],inputs:{codes:"codes"},features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0}])],decls:23,vars:4,consts:[["nz-button","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nzSize","small",3,"nzData","nzFrontPagination","formGroup"],["formGroupName","items","cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","",3,"formGroupName",4,"ngFor","ngForOf"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"],["cdkDrag","",3,"formGroupName"],["formControlName","type","nzSize","small",3,"ngModelChange","change"],["nzValue","interval","nzLabel","\u95f4\u9694ms"],["nzValue","clock","nzLabel","\u5b9a\u65f6"],["nzValue","crontab","nzLabel","crontab"],["formControlName","interval","nzSize","small",3,"nzStep","change",4,"ngIf"],["formControlName","clock","nzSize","small",3,"change",4,"ngIf"],["nz-input","","formControlName","crontab","nzSize","small",3,"change",4,"ngIf"],["formControlName","code","nzSize","small","required","",3,"ngModelChange","change"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-input","","type","text","formControlName","address","nzSize","small",3,"change"],["formControlName","length","nzSize","small","required","",3,"nzMin","nzMax","nzStep","change"],["nz-checkbox","","formControlName","disabled",3,"change","ngModelChange"],["cdkDragHandle","","title","\u79fb\u52a8"],["nz-icon","","nzType","drag","nzTheme","outline"],["nzType","vertical"],["cdkDragHandle","","title","\u590d\u5236",3,"click"],["nz-icon","","nzType","copy","nzTheme","outline"],["nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664?","title","\u5220\u9664",3,"nzOnConfirm"],["nz-icon","","nzType","delete","nzTheme","outline"],["formControlName","interval","nzSize","small",3,"nzStep","change"],["formControlName","clock","nzSize","small",3,"change"],["nz-input","","formControlName","crontab","nzSize","small",3,"change"],[3,"nzValue","nzLabel"]],template:function(s,d){1&s&&(e.TgZ(0,"app-toolbar")(1,"nz-space"),e.YNc(2,Nh,2,0,"button",0),e.YNc(3,Mo,2,0,"button",1),e.qZA()(),e.TgZ(4,"nz-table",2)(5,"thead")(6,"tr")(7,"th"),e._uU(8,"\u7c7b\u578b"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"\u5b9a\u65f6"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"\u4ee3\u7801"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"\u5730\u5740"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"\u957f\u5ea6"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"\u7981\u7528"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(21,"tbody",3),e.NdJ("cdkDropListDropped",function(w){return d.drop(w)}),e.YNc(22,pv,28,8,"tr",4),e.qZA()()),2&s&&(e.xp6(4),e.Q6J("nzData",d.formArray.controls)("nzFrontPagination",!1)("formGroup",d.formGroup),e.xp6(18),e.Q6J("ngForOf",d.formArray.controls))},directives:[bt.n,Rt.NU,Rt.$1,xn.ix,Rn.dQ,Ce.w,et.N8,M.JL,M.sg,et.Om,et.$Z,et.Uo,et._C,et.p0,M.x0,za,k.sg,ia,Yr.Vq,M.JJ,M.u,Yr.Ip,k.O5,vt,mu,Ae.Zp,M.Fj,M.Q7,hs.Ie,Ki,K.Ls,tn.g,er],styles:[""]}),g})();function gv(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){return e.CHM(s),e.oxw().clear()}),e._uU(1,"\u6e05\u7a7a"),e.qZA()}}function wl(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){return e.CHM(s),e.oxw().add()}),e._uU(1,"\u6dfb\u52a0"),e.qZA()}}function Dl(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",7)(1,"td")(2,"input",8),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(3,"td")(4,"input",9),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(5,"td")(6,"a",10),e._UZ(7,"i",11),e.qZA(),e._UZ(8,"nz-divider",12),e.TgZ(9,"a",13),e.NdJ("click",function(){const w=e.CHM(s).index;return e.oxw().copy(w)}),e._UZ(10,"i",14),e.qZA(),e._UZ(11,"nz-divider",12),e.TgZ(12,"a",15),e.NdJ("nzOnConfirm",function(){const w=e.CHM(s).index;return e.oxw().remove(w)}),e._UZ(13,"i",16),e.qZA()()()}2&g&&e.Q6J("formGroupName",x.index)}let Al=(()=>{class g{constructor(s){this.fb=s,this.onChanged=()=>{},this.onTouched=()=>{},this.items=[],this.formGroup=new M.cw({}),this.formArray=new M.Oe([])}ngOnInit(){this.buildForm()}buildForm(){this.formGroup=this.fb.group({items:this.formArray=this.fb.array(this.items.map(s=>this.fb.group({as:[s.as,[M.kI.required]],expression:[s.expression,[M.kI.required]]})))})}add(){this.formArray.push(this.fb.group({as:["",[M.kI.required]],expression:["",[M.kI.required]]})),this.formArray.controls=[...this.formArray.controls],this.change()}copy(s){var d,_;const w=this.formArray.controls[s];this.formArray.controls.splice(s,0,this.fb.group({as:[null===(d=w.get("as"))||void 0===d?void 0:d.value,[M.kI.required]],expression:[null===(_=w.get("expression"))||void 0===_?void 0:_.value,[M.kI.required]]}))}remove(s){this.formArray.removeAt(s),this.change()}clear(){this.formArray.clear(),this.change()}change(){this.formArray.markAsDirty(),this.formArray.updateValueAndValidity(),this.onChanged(this.formArray.value),this.onTouched()}registerOnChange(s){this.onChanged=s}registerOnTouched(s){this.onTouched=s}writeValue(s){this.items=s,this.buildForm()}drop(s){const d=this.formArray.controls.splice(s.previousIndex,1);this.formArray.controls.splice(s.currentIndex,0,...d),this.change()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-edit-calculators"]],features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0}])],decls:15,vars:4,consts:[["nz-button","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nzSize","small",3,"nzData","nzFrontPagination","formGroup"],["formGroupName","items","cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","",3,"formGroupName",4,"ngFor","ngForOf"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"],["cdkDrag","",3,"formGroupName"],["nz-input","","formControlName","as","nzSize","small","required","",3,"change"],["nz-input","","formControlName","expression","nzSize","small","required","",3,"change"],["cdkDragHandle","","title","\u79fb\u52a8"],["nz-icon","","nzType","drag","nzTheme","outline"],["nzType","vertical"],["cdkDragHandle","","title","\u590d\u5236",3,"click"],["nz-icon","","nzType","copy","nzTheme","outline"],["nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664?","title","\u5220\u9664",3,"nzOnConfirm"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(s,d){1&s&&(e.TgZ(0,"app-toolbar")(1,"nz-space"),e.YNc(2,gv,2,0,"button",0),e.YNc(3,wl,2,0,"button",1),e.qZA()(),e.TgZ(4,"nz-table",2)(5,"thead")(6,"tr")(7,"th"),e._uU(8,"\u53d8\u91cf"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"\u8868\u8fbe\u5f0f"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(13,"tbody",3),e.NdJ("cdkDropListDropped",function(w){return d.drop(w)}),e.YNc(14,Dl,14,1,"tr",4),e.qZA()()),2&s&&(e.xp6(4),e.Q6J("nzData",d.formArray.controls)("nzFrontPagination",!1)("formGroup",d.formGroup),e.xp6(10),e.Q6J("ngForOf",d.formArray.controls))},directives:[bt.n,Rt.NU,Rt.$1,xn.ix,Rn.dQ,Ce.w,et.N8,M.JL,M.sg,et.Om,et.$Z,et.Uo,et._C,et.p0,M.x0,za,k.sg,ia,Ae.Zp,M.Fj,M.JJ,M.u,M.Q7,Ki,K.Ls,tn.g,er],styles:[""]}),g})();function _f(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){return e.CHM(s),e.oxw().clear()}),e._uU(1,"\u6e05\u7a7a"),e.qZA()}}function yf(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){return e.CHM(s),e.oxw().add()}),e._uU(1,"\u6dfb\u52a0"),e.qZA()}}function $y(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",7)(1,"td")(2,"input",8),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(3,"td")(4,"nz-input-number",9),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(5,"td")(6,"nz-input-number",10),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(7,"td")(8,"input",11),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(9,"td")(10,"a",12),e._UZ(11,"i",13),e.qZA(),e._UZ(12,"nz-divider",14),e.TgZ(13,"a",15),e.NdJ("click",function(){const w=e.CHM(s).index;return e.oxw().copy(w)}),e._UZ(14,"i",16),e.qZA(),e._UZ(15,"nz-divider",14),e.TgZ(16,"a",17),e.NdJ("nzOnConfirm",function(){const w=e.CHM(s).index;return e.oxw().remove(w)}),e._UZ(17,"i",18),e.qZA()()()}2&g&&(e.Q6J("formGroupName",x.index),e.xp6(6),e.Q6J("nzMin",0)("nzMax",10)("nzStep",1))}let Oo=(()=>{class g{constructor(s){this.fb=s,this.onChanged=()=>{},this.onTouched=()=>{},this.items=[],this.formGroup=new M.cw({}),this.formArray=new M.Oe([])}ngOnInit(){this.buildForm()}buildForm(){this.formGroup=this.fb.group({items:this.formArray=this.fb.array(this.items.map(s=>this.fb.group({point:[s.point,[M.kI.required]],value:[s.value,[M.kI.required]],delay:[s.delay,[M.kI.required]],expression:[s.expression,[M.kI.required]]})))})}add(){this.formArray.push(this.fb.group({point:["",[M.kI.required]],value:[0,[M.kI.required]],delay:[0,[M.kI.required]],expression:["",[M.kI.required]]})),this.formArray.controls=[...this.formArray.controls],this.change()}copy(s){var d,_,w,me;const Re=this.formArray.controls[s];this.formArray.controls.splice(s,0,this.fb.group({point:[null===(d=Re.get("point"))||void 0===d?void 0:d.value,[M.kI.required]],value:[null===(_=Re.get("value"))||void 0===_?void 0:_.value,[M.kI.required]],delay:[null===(w=Re.get("delay"))||void 0===w?void 0:w.value,[M.kI.required]],expression:[null===(me=Re.get("expression"))||void 0===me?void 0:me.value,[M.kI.required]]}))}remove(s){this.formArray.removeAt(s),this.change()}clear(){this.formArray.clear(),this.change()}change(){this.formArray.markAsDirty(),this.formArray.updateValueAndValidity(),this.onChanged(this.formArray.value),this.onTouched()}registerOnChange(s){this.onChanged=s}registerOnTouched(s){this.onTouched=s}writeValue(s){this.items=s,this.buildForm()}drop(s){const d=this.formArray.controls.splice(s.previousIndex,1);this.formArray.controls.splice(s.currentIndex,0,...d),this.change()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-edit-directives"]],features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0}])],decls:19,vars:4,consts:[["nz-button","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nzSize","small",3,"nzData","nzFrontPagination","formGroup"],["formGroupName","items","cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","",3,"formGroupName",4,"ngFor","ngForOf"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"],["cdkDrag","",3,"formGroupName"],["nz-input","","formControlName","point","nzSize","small","required","",3,"change"],["formControlName","value","required","",3,"change"],["formControlName","delay","nzSize","small","required","",3,"nzMin","nzMax","nzStep","change"],["nz-input","","formControlName","expression","nzSize","small","required","",3,"change"],["cdkDragHandle","","title","\u79fb\u52a8"],["nz-icon","","nzType","drag","nzTheme","outline"],["nzType","vertical"],["cdkDragHandle","","title","\u590d\u5236",3,"click"],["nz-icon","","nzType","copy","nzTheme","outline"],["nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664?","title","\u5220\u9664",3,"nzOnConfirm"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(s,d){1&s&&(e.TgZ(0,"app-toolbar")(1,"nz-space"),e.YNc(2,_f,2,0,"button",0),e.YNc(3,yf,2,0,"button",1),e.qZA()(),e.TgZ(4,"nz-table",2)(5,"thead")(6,"tr")(7,"th"),e._uU(8,"\u6570\u636e\u70b9"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"\u503c"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"\u5ef6\u8fdf"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"\u8868\u8fbe\u5f0f"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(17,"tbody",3),e.NdJ("cdkDropListDropped",function(w){return d.drop(w)}),e.YNc(18,$y,18,4,"tr",4),e.qZA()()),2&s&&(e.xp6(4),e.Q6J("nzData",d.formArray.controls)("nzFrontPagination",!1)("formGroup",d.formGroup),e.xp6(14),e.Q6J("ngForOf",d.formArray.controls))},directives:[bt.n,Rt.NU,Rt.$1,xn.ix,Rn.dQ,Ce.w,et.N8,M.JL,M.sg,et.Om,et.$Z,et.Uo,et._C,et.p0,M.x0,za,k.sg,ia,Ae.Zp,M.Fj,M.JJ,M.u,M.Q7,vt,Ki,K.Ls,tn.g,er],styles:[""]}),g})();function vv(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){return e.CHM(s),e.oxw().clear()}),e._uU(1,"\u6e05\u7a7a"),e.qZA()}}function ds(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){return e.CHM(s),e.oxw().add()}),e._uU(1,"\u6dfb\u52a0"),e.qZA()}}function jy(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",7)(1,"td")(2,"input",8),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(3,"td")(4,"app-edit-directives",9),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(5,"td")(6,"a",10),e._UZ(7,"i",11),e.qZA(),e._UZ(8,"nz-divider",12),e.TgZ(9,"a",13),e.NdJ("click",function(){const w=e.CHM(s).index;return e.oxw().copy(w)}),e._UZ(10,"i",14),e.qZA(),e._UZ(11,"nz-divider",12),e.TgZ(12,"a",15),e.NdJ("nzOnConfirm",function(){const w=e.CHM(s).index;return e.oxw().remove(w)}),e._UZ(13,"i",16),e.qZA()()()}2&g&&e.Q6J("formGroupName",x.index)}let bn=(()=>{class g{constructor(s){this.fb=s,this.onChanged=()=>{},this.onTouched=()=>{},this.items=[],this.formGroup=new M.cw({}),this.formArray=new M.Oe([])}ngOnInit(){this.buildForm()}buildForm(){this.formGroup=this.fb.group({items:this.formArray=this.fb.array(this.items.map(s=>this.fb.group({name:[s.name,[M.kI.required]],directives:[s.directives,[M.kI.required]]})))})}add(){this.formArray.push(this.fb.group({name:["",[M.kI.required]],directives:[[],[M.kI.required]]})),this.formArray.controls=[...this.formArray.controls],this.change()}copy(s){var d,_;const w=this.formArray.controls[s];this.formArray.controls.splice(s,0,this.fb.group({name:[null===(d=w.get("name"))||void 0===d?void 0:d.value,[M.kI.required]],directives:[[].concat(null===(_=w.get("directives"))||void 0===_?void 0:_.value),[M.kI.required]]}))}remove(s){this.formArray.removeAt(s),this.change()}clear(){this.formArray.clear(),this.change()}change(){this.formArray.markAsDirty(),this.formArray.updateValueAndValidity(),this.onChanged(this.formArray.value),this.onTouched()}registerOnChange(s){this.onChanged=s}registerOnTouched(s){this.onTouched=s}writeValue(s){this.items=s,this.buildForm()}drop(s){const d=this.formArray.controls.splice(s.previousIndex,1);this.formArray.controls.splice(s.currentIndex,0,...d),this.change()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-edit-commands"]],features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0}])],decls:15,vars:4,consts:[["nz-button","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nzSize","small",3,"nzData","nzFrontPagination","formGroup"],["formGroupName","items","cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","",3,"formGroupName",4,"ngFor","ngForOf"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"],["cdkDrag","",3,"formGroupName"],["nz-input","","formControlName","name","nzSize","small","required","",3,"change"],["formControlName","directives",3,"change"],["cdkDragHandle","","title","\u79fb\u52a8"],["nz-icon","","nzType","drag","nzTheme","outline"],["nzType","vertical"],["cdkDragHandle","","title","\u590d\u5236",3,"click"],["nz-icon","","nzType","copy","nzTheme","outline"],["nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664?","title","\u5220\u9664",3,"nzOnConfirm"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(s,d){1&s&&(e.TgZ(0,"app-toolbar")(1,"nz-space"),e.YNc(2,vv,2,0,"button",0),e.YNc(3,ds,2,0,"button",1),e.qZA()(),e.TgZ(4,"nz-table",2)(5,"thead")(6,"tr")(7,"th"),e._uU(8,"\u547d\u4ee4"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"\u6307\u4ee4"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(13,"tbody",3),e.NdJ("cdkDropListDropped",function(w){return d.drop(w)}),e.YNc(14,jy,14,1,"tr",4),e.qZA()()),2&s&&(e.xp6(4),e.Q6J("nzData",d.formArray.controls)("nzFrontPagination",!1)("formGroup",d.formGroup),e.xp6(10),e.Q6J("ngForOf",d.formArray.controls))},directives:[bt.n,Rt.NU,Rt.$1,xn.ix,Rn.dQ,Ce.w,et.N8,M.JL,M.sg,et.Om,et.$Z,et.Uo,et._C,et.p0,M.x0,za,k.sg,ia,Ae.Zp,M.Fj,M.JJ,M.u,M.Q7,Oo,Ki,K.Ls,tn.g,er],styles:[""]}),g})();function Bh(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){return e.CHM(s),e.oxw().clear()}),e._uU(1,"\u6e05\u7a7a"),e.qZA()}}function Zh(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){return e.CHM(s),e.oxw().add()}),e._uU(1,"\u6dfb\u52a0"),e.qZA()}}function El(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",7)(1,"td")(2,"input",8),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(3,"td")(4,"input",9),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(5,"td")(6,"nz-input-number",10),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(7,"td")(8,"nz-input-number",11),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(9,"td")(10,"nz-input-number",12),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(11,"td")(12,"input",13),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(13,"td")(14,"input",14),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(15,"td")(16,"nz-input-number",15),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(17,"td")(18,"label",16),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()})("ngModelChange",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(19,"td")(20,"a",17),e._UZ(21,"i",18),e.qZA(),e._UZ(22,"nz-divider",19),e.TgZ(23,"a",20),e.NdJ("click",function(){const w=e.CHM(s).index;return e.oxw().copy(w)}),e._UZ(24,"i",21),e.qZA(),e._UZ(25,"nz-divider",19),e.TgZ(26,"a",22),e.NdJ("nzOnConfirm",function(){const w=e.CHM(s).index;return e.oxw().remove(w)}),e._UZ(27,"i",23),e.qZA()()()}2&g&&e.Q6J("formGroupName",x.index)}let Po=(()=>{class g{constructor(s){this.fb=s,this.onChanged=()=>{},this.onTouched=()=>{},this.items=[],this.formGroup=new M.cw({}),this.formArray=new M.Oe([])}ngOnInit(){this.buildForm()}buildForm(){this.formGroup=this.fb.group({items:this.formArray=this.fb.array(this.items.map(s=>this.fb.group({name:[s.name,[M.kI.required]],condition:[s.condition,[M.kI.required]],delay:[s.delay,[M.kI.required]],reset_timeout:[s.reset_timeout,[]],reset_total:[s.reset_total,[]],code:[s.code,[M.kI.required]],message:[s.message,[M.kI.required]],level:[s.level,[M.kI.required]],disabled:[s.disabled,[M.kI.required]]})))})}add(){this.formArray.push(this.fb.group({name:["",[M.kI.required]],condition:["",[M.kI.required]],delay:[0,[M.kI.required]],reset_timeout:[0,[]],reset_total:[0,[]],code:["",[M.kI.required]],message:["",[M.kI.required]],level:[0,[M.kI.required]],disabled:[!1,[M.kI.required]]})),this.formArray.controls=[...this.formArray.controls],this.change()}copy(s){var d,_,w,me,Re,at,ft,xt,Bt;const Ot=this.formArray.controls[s];this.formArray.controls.splice(s,0,this.fb.group({name:[null===(d=Ot.get("name"))||void 0===d?void 0:d.value,[M.kI.required]],condition:[null===(_=Ot.get("condition"))||void 0===_?void 0:_.value,[M.kI.required]],delay:[null===(w=Ot.get("delay"))||void 0===w?void 0:w.value,[M.kI.required]],reset_timeout:[null===(me=Ot.get("reset_timeout"))||void 0===me?void 0:me.value,[]],reset_total:[null===(Re=Ot.get("reset_total"))||void 0===Re?void 0:Re.value,[]],code:[null===(at=Ot.get("code"))||void 0===at?void 0:at.value,[M.kI.required]],message:[null===(ft=Ot.get("message"))||void 0===ft?void 0:ft.value,[M.kI.required]],level:[null===(xt=Ot.get("level"))||void 0===xt?void 0:xt.value,[M.kI.required]],disabled:[null===(Bt=Ot.get("disabled"))||void 0===Bt?void 0:Bt.value,[M.kI.required]]}))}remove(s){this.formArray.removeAt(s),this.change()}clear(){this.formArray.clear(),this.change()}change(){this.formArray.markAsDirty(),this.formArray.updateValueAndValidity(),this.onChanged(this.formArray.value),this.onTouched()}registerOnChange(s){this.onChanged=s}registerOnTouched(s){this.onTouched=s}writeValue(s){this.items=s,this.buildForm()}drop(s){const d=this.formArray.controls.splice(s.previousIndex,1);this.formArray.controls.splice(s.currentIndex,0,...d),this.change()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-edit-alarms"]],features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0}])],decls:29,vars:4,consts:[["nz-button","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nzSize","small",3,"nzData","nzFrontPagination","formGroup"],["formGroupName","items","cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","",3,"formGroupName",4,"ngFor","ngForOf"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"],["cdkDrag","",3,"formGroupName"],["nz-input","","formControlName","name","nzSize","small","required","",3,"change"],["nz-input","","formControlName","condition","nzSize","small","required","",3,"change"],["formControlName","delay","nzSize","small",3,"change"],["formControlName","reset_timeout","nzSize","small",3,"change"],["formControlName","reset_total","nzSize","small",3,"change"],["nz-input","","formControlName","code","nzSize","small","required","",3,"change"],["nz-input","","formControlName","message","nzSize","small","required","",3,"change"],["formControlName","level","nzSize","small",3,"change"],["nz-checkbox","","formControlName","disabled",3,"change","ngModelChange"],["cdkDragHandle","","title","\u79fb\u52a8"],["nz-icon","","nzType","drag","nzTheme","outline"],["nzType","vertical"],["cdkDragHandle","","title","\u590d\u5236",3,"click"],["nz-icon","","nzType","copy","nzTheme","outline"],["nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664?","title","\u5220\u9664",3,"nzOnConfirm"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(s,d){1&s&&(e.TgZ(0,"app-toolbar")(1,"nz-space"),e.YNc(2,Bh,2,0,"button",0),e.YNc(3,Zh,2,0,"button",1),e.qZA()(),e.TgZ(4,"nz-table",2)(5,"thead")(6,"tr")(7,"th"),e._uU(8,"\u540d\u79f0"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"\u6761\u4ef6"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"\u5ef6\u8fdf"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"\u8d85\u65f6\u91cd\u7f6e"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"\u91cd\u7f6e\u6b21\u6570"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"\u4ee3\u7801"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"\u5185\u5bb9"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"\u7b49\u7ea7"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"\u7981\u7528"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(27,"tbody",3),e.NdJ("cdkDropListDropped",function(w){return d.drop(w)}),e.YNc(28,El,28,1,"tr",4),e.qZA()()),2&s&&(e.xp6(4),e.Q6J("nzData",d.formArray.controls)("nzFrontPagination",!1)("formGroup",d.formGroup),e.xp6(24),e.Q6J("ngForOf",d.formArray.controls))},directives:[bt.n,Rt.NU,Rt.$1,xn.ix,Rn.dQ,Ce.w,et.N8,M.JL,M.sg,et.Om,et.$Z,et.Uo,et._C,et.p0,M.x0,za,k.sg,ia,Ae.Zp,M.Fj,M.JJ,M.u,M.Q7,vt,hs.Ie,Ki,K.Ls,tn.g,er],styles:[""]}),g})();function Ml(g,x){1&g&&(e.TgZ(0,"nz-form-item")(1,"nz-form-label",3),e._uU(2,"\u7ec4\u6001"),e.qZA(),e.TgZ(3,"nz-form-control",4),e._UZ(4,"app-choose-hmi",11),e.qZA()()),2&g&&(e.xp6(1),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(1),e.Q6J("showClear",!0))}const Ol=function(){return[",","\uff0c",";"," "]};function vc(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"nz-form-item")(1,"nz-form-label",3),e._uU(2,"\u6807\u7b7e"),e.qZA(),e.TgZ(3,"nz-form-control",4)(4,"nz-select",12),e.NdJ("ngModelChange",function(){return e.CHM(s),e.oxw().change()}),e.qZA()()()}2&g&&(e.xp6(1),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(1),e.Q6J("nzTokenSeparators",e.DdM(3,Ol)))}function mc(g,x){if(1&g&&(e.ynx(0),e.TgZ(1,"nz-collapse-panel",13),e._UZ(2,"app-edit-points",14),e.qZA(),e.TgZ(3,"nz-collapse-panel",15),e._UZ(4,"app-edit-pollers",16),e.qZA(),e.TgZ(5,"nz-collapse-panel",17),e._UZ(6,"app-edit-calculators",18),e.qZA(),e.TgZ(7,"nz-collapse-panel",19),e._UZ(8,"app-edit-commands",20),e.qZA(),e.TgZ(9,"nz-collapse-panel",21),e._UZ(10,"app-edit-alarms",22),e.qZA(),e.BQk()),2&g){const s=e.oxw();e.xp6(2),e.Q6J("codes",s.codes),e.xp6(2),e.Q6J("codes",s.codes)}}let mv=(()=>{class g{constructor(s,d,_,w,me){var Re;this.fb=s,this.route=d,this.router=_,this.rs=w,this.message=me,this.submitting=!1,this.basicForm=new M.cw({}),this.codes=[],this.data={name:"\u65b0\u5efa\u8bbe\u5907",product_id:"",tunnel_id:0,hmi:"",tags:[],station:1,disabled:!1,points:[],commands:[],pollers:[],calculators:[],alarms:[]},this.id=d.snapshot.paramMap.get("id"),this.id&&this.load(),Object.assign(this.data,null===(Re=this.router.getCurrentNavigation())||void 0===Re?void 0:Re.extras.state),this.buildForm()}buildForm(){this.basicForm=this.fb.group({name:[this.data.name,[M.kI.required]],hmi:[this.data.hmi,[]],tags:[this.data.tags,[]],product_id:[this.data.product_id,[M.kI.required]],tunnel_id:[this.data.tunnel_id,[M.kI.required]],station:[this.data.station,[M.kI.required]],disabled:[this.data.disabled,[M.kI.required]],points:[this.data.points||[]],pollers:[this.data.pollers||[]],commands:[this.data.commands||[]],calculators:[this.data.calculators||[]],alarms:[this.data.alarms||[]]})}ngOnInit(){}load(){this.rs.get("device/"+this.id).subscribe(s=>{this.data=s.data,this.buildForm()})}submit(){this.submitting=!0,this.rs.post(this.id?"device/"+this.id:"device/create",this.basicForm.value).subscribe(d=>{this.message.success("\u63d0\u4ea4\u6210\u529f"),this.router.navigate(["/admin/device/detail/"+d.data.id])}).add(()=>{this.submitting=!1})}change(){this.data=this.basicForm.value}onTunnel(s){this.rs.get("system/protocol/"+s.protocol.name).subscribe(d=>{this.codes=d.data.codes})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu),e.Y36(Me.gz),e.Y36(Me.F0),e.Y36(Fe.s),e.Y36(ot.dD))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-device-edit"]],decls:31,vars:20,consts:[[3,"ngModel","submitting","ngModelChange","submit"],[3,"formGroup","change"],["nzHeader","\u57fa\u672c\u4fe1\u606f","nzActive",""],[3,"nzSpan"],["nzErrorTip","",3,"nzSpan"],["nz-input","","formControlName","name","required",""],["formControlName","product_id",3,"showClear"],["formControlName","tunnel_id",3,"tunnel"],[4,"ngIf"],["formControlName","station",3,"nzMin","nzMax","nzStep"],["formControlName","disabled"],["formControlName","hmi",3,"showClear"],["nzAllowClear","","nzMode","tags","formControlName","tags","nzSize","small",3,"nzTokenSeparators","ngModelChange"],["nzHeader","\u6570\u636e\u70b9","nzActive",""],["formControlName","points",3,"codes"],["nzHeader","\u5b9a\u65f6\u91c7\u96c6","nzActive",""],["formControlName","pollers",3,"codes"],["nzHeader","\u516c\u5f0f\u8ba1\u7b97","nzActive",""],["formControlName","calculators"],["nzHeader","\u63a7\u5236\u547d\u4ee4","nzActive",""],["formControlName","commands"],["nzHeader","\u6570\u636e\u68c0\u67e5","nzActive",""],["formControlName","alarms"]],template:function(s,d){1&s&&(e.TgZ(0,"app-editor",0),e.NdJ("ngModelChange",function(w){return d.data=w})("ngModelChange",function(w){return d.basicForm.patchValue(w)})("submit",function(){return d.submit()}),e.TgZ(1,"nz-collapse",1),e.NdJ("change",function(){return d.change()}),e.TgZ(2,"nz-collapse-panel",2)(3,"nz-form-item")(4,"nz-form-label",3),e._uU(5,"\u540d\u79f0"),e.qZA(),e.TgZ(6,"nz-form-control",4),e._UZ(7,"input",5),e.qZA()(),e.TgZ(8,"nz-form-item")(9,"nz-form-label",3),e._uU(10,"\u4ea7\u54c1"),e.qZA(),e.TgZ(11,"nz-form-control",4),e._UZ(12,"app-choose-product",6),e.qZA()(),e.TgZ(13,"nz-form-item")(14,"nz-form-label",3),e._uU(15,"\u901a\u9053"),e.qZA(),e.TgZ(16,"nz-form-control",4)(17,"app-choose-tunnel",7),e.NdJ("tunnel",function(w){return d.onTunnel(w)}),e.qZA()()(),e.YNc(18,Ml,5,3,"nz-form-item",8),e.YNc(19,vc,5,4,"nz-form-item",8),e.TgZ(20,"nz-form-item")(21,"nz-form-label",3),e._uU(22,"\u4ece\u7ad9\u53f7"),e.qZA(),e.TgZ(23,"nz-form-control",4),e._UZ(24,"nz-input-number",9),e.qZA()(),e.TgZ(25,"nz-form-item")(26,"nz-form-label",3),e._uU(27,"\u7981\u7528"),e.qZA(),e.TgZ(28,"nz-form-control",4),e._UZ(29,"nz-switch",10),e.qZA()()(),e.YNc(30,mc,11,2,"ng-container",8),e.qZA()()),2&s&&(e.Q6J("ngModel",d.data)("submitting",d.submitting),e.xp6(1),e.Q6J("formGroup",d.basicForm),e.xp6(3),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(3),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(1),e.Q6J("showClear",!0),e.xp6(2),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(2),e.Q6J("ngIf",!d.basicForm.value.product_id),e.xp6(1),e.Q6J("ngIf",!d.basicForm.value.product_id),e.xp6(2),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(1),e.Q6J("nzMin",1)("nzMax",65535)("nzStep",1),e.xp6(2),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(2),e.Q6J("ngIf",!d.basicForm.value.product_id))},directives:[Mr,M.JJ,M.On,Zn.yH,M.JL,M.sg,Zn.Zv,yn.SK,le.Nx,yn.t3,le.iK,le.Fd,Ae.Zp,M.Fj,M.u,M.Q7,Bs,Cl,k.O5,Zs,Yr.Vq,vt,ge.i,lv,mf,Al,bn,Po],styles:[""]}),g})();var Mn=J(5435),Cf=J(8550);const wa=function(){return{lineNumbers:!0,theme:"material",mode:"yaml"}};function _v(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"div")(1,"ngx-codemirror",3),e.NdJ("ngModelChange",function(_){return e.CHM(s),e.oxw().val=_}),e.qZA()()}if(2&g){const s=e.oxw();e.xp6(1),e.Q6J("ngModel",s.val)("options",e.DdM(2,wa))}}let _c=(()=>{class g{constructor(){this.onChanged=()=>{},this.onTouched=()=>{},this._val="",this.isVisible=!1,this.nzSize="default"}get val(){return this._val}set val(s){console.log("eval page-editor",s),this._val=s,this.onChanged(Mn.parse(s)),this.onTouched()}ngOnInit(){}registerOnChange(s){this.onChanged=s}registerOnTouched(s){this.onTouched=s}writeValue(s){this._val=Mn.stringify(s)}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-input-yaml"]],inputs:{nzSize:"nzSize"},features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0}])],decls:3,vars:4,consts:[["nz-input","",3,"ngModel","nzSize","ngModelChange","click"],["nzTitle","\u53c2\u6570",3,"nzVisible","nzFooter","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],[3,"ngModel","options","ngModelChange"]],template:function(s,d){1&s&&(e.TgZ(0,"textarea",0),e.NdJ("ngModelChange",function(w){return d.val=w})("click",function(){return d.isVisible=!0}),e.qZA(),e.TgZ(1,"nz-modal",1),e.NdJ("nzVisibleChange",function(w){return d.isVisible=w})("nzOnCancel",function(){return d.isVisible=!1})("nzOnOk",function(){return d.isVisible=!1}),e.YNc(2,_v,2,3,"div",2),e.qZA()),2&s&&(e.Q6J("ngModel",d.val)("nzSize",d.nzSize),e.xp6(1),e.Q6J("nzVisible",d.isVisible)("nzFooter",null))},directives:[Ae.Zp,M.Fj,M.JJ,M.On,Ln.du,Ln.Hf,Cf.C],styles:[""]}),g})();function yc(g,x){if(1&g&&e._UZ(0,"nz-option",6),2&g){const s=x.$implicit;e.Q6J("nzValue",s.name)("nzLabel",s.label||s.name)}}let Gs=(()=>{class g{constructor(s,d){this.fb=s,this.rs=d,this.onChanged=()=>{},this.onTouched=()=>{},this.data={},this.formGroup=new M.cw({}),this.protocols=[],this.codes=new e.vpe}findCodes(){this.protocols.forEach(s=>{s.name==this.formGroup.value.name&&this.codes.emit(s.codes)})}ngOnInit(){this.rs.get("system/protocols").subscribe(s=>{this.protocols=s.data,this.findCodes()}),this.buildForm()}buildForm(){this.formGroup=this.fb.group({name:[this.data.name,[M.kI.required]],options:[this.data.options,[]]})}change(){this.formGroup.markAsDirty(),this.formGroup.updateValueAndValidity(),this.onChanged(this.formGroup.value),this.onTouched(),this.findCodes()}registerOnChange(s){this.onChanged=s}registerOnTouched(s){this.onTouched=s}writeValue(s){this.data=s||{},this.buildForm(),this.findCodes()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu),e.Y36(Fe.s))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-edit-protocol"]],outputs:{codes:"codes"},features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0}])],decls:12,vars:6,consts:[[3,"formGroup","change"],[3,"nzSpan"],["nzErrorTip","",3,"nzSpan"],["nzAllowClear","","formControlName","name",3,"ngModelChange","change"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["formControlName","options",3,"ngModelChange"],[3,"nzValue","nzLabel"]],template:function(s,d){1&s&&(e.TgZ(0,"form",0),e.NdJ("change",function(){return d.change()}),e.TgZ(1,"nz-form-item")(2,"nz-form-label",1),e._uU(3,"\u534f\u8bae"),e.qZA(),e.TgZ(4,"nz-form-control",2)(5,"nz-select",3),e.NdJ("ngModelChange",function(){return d.change()})("change",function(){return d.change()}),e.YNc(6,yc,1,2,"nz-option",4),e.qZA()()(),e.TgZ(7,"nz-form-item")(8,"nz-form-label",1),e._uU(9,"\u534f\u8bae\u53c2\u6570"),e.qZA(),e.TgZ(10,"nz-form-control",1)(11,"app-input-yaml",5),e.NdJ("ngModelChange",function(){return d.change()}),e.qZA()()()()),2&s&&(e.Q6J("formGroup",d.formGroup),e.xp6(2),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(2),e.Q6J("ngForOf",d.protocols),e.xp6(2),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12))},directives:[M._Y,M.JL,M.sg,yn.SK,le.Nx,yn.t3,le.iK,le.Fd,Yr.Vq,M.JJ,M.u,k.sg,Yr.Ip,_c],styles:[""]}),g})();const Uh=function(){return[",","\uff0c",";"," "]};let Xy=(()=>{class g{constructor(s,d,_,w,me){this.fb=s,this.route=d,this.router=_,this.rs=w,this.message=me,this.submitting=!1,this.codes=[],this.basicForm=new M.cw({}),this.data={name:"\u65b0\u5efa\u4ea7\u54c1",hmi:"",tags:[],manufacturer:"",version:"",protocol:{name:"ModbusRTU",options:{}},points:[],commands:[],pollers:[],calculators:[],alarms:[]},this.id=d.snapshot.paramMap.get("id"),this.id&&this.load(),this.buildForm()}buildForm(){this.basicForm=this.fb.group({name:[this.data.name,[M.kI.required]],hmi:[this.data.hmi,[]],tags:[this.data.tags,[]],manufacturer:[this.data.manufacturer,[]],version:[this.data.version,[]],protocol:[this.data.protocol,[]],points:[this.data.points||[]],commands:[this.data.commands||[]],pollers:[this.data.pollers||[]],calculators:[this.data.calculators||[]],alarms:[this.data.alarms||[]]})}ngOnInit(){}load(){this.rs.get("product/"+this.id).subscribe(s=>{this.data=s.data,this.buildForm()})}submit(){this.submitting=!0,this.rs.post(this.id?"product/"+this.id:"product/create",this.basicForm.value).subscribe(d=>{this.message.success("\u63d0\u4ea4\u6210\u529f"),this.router.navigate(["/admin/product/detail/"+d.data.id])}).add(()=>{this.submitting=!1})}change(){this.data=this.basicForm.value}onCodes(s){console.log("onCodes",s),this.codes=s}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu),e.Y36(Me.gz),e.Y36(Me.F0),e.Y36(Fe.s),e.Y36(ot.dD))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-product-edit"]],decls:40,vars:18,consts:[[3,"ngModel","submitting","ngModelChange","submit"],[3,"formGroup"],["nzHeader","\u57fa\u672c\u4fe1\u606f","nzActive",""],[3,"nzSpan"],["nzErrorTip","",3,"nzSpan"],["nz-input","","formControlName","name","required",""],["formControlName","hmi",3,"showClear"],["nzAllowClear","","nzMode","tags","formControlName","tags","nzSize","small","nzPlaceHolder","\u4ee5\u9017\u53f7\u95f4\u9694",3,"nzTokenSeparators","ngModelChange"],["nz-input","","formControlName","manufacturer"],["nz-input","","formControlName","version"],["nzHeader","\u534f\u8bae\u9002\u914d","nzActive",""],["formControlName","protocol",3,"codes"],["nzHeader","\u6570\u636e\u70b9","nzActive",""],["formControlName","points",3,"codes"],["nzHeader","\u5b9a\u65f6\u91c7\u96c6","nzActive",""],["formControlName","pollers",3,"codes"],["nzHeader","\u516c\u5f0f\u8ba1\u7b97","nzActive",""],["formControlName","calculators"],["nzHeader","\u63a7\u5236\u547d\u4ee4","nzActive",""],["formControlName","commands"],["nzHeader","\u6570\u636e\u68c0\u67e5","nzActive",""],["formControlName","alarms"]],template:function(s,d){1&s&&(e.TgZ(0,"app-editor",0),e.NdJ("ngModelChange",function(w){return d.data=w})("ngModelChange",function(w){return d.basicForm.patchValue(w)})("submit",function(){return d.submit()}),e.TgZ(1,"nz-collapse",1)(2,"nz-collapse-panel",2)(3,"nz-form-item")(4,"nz-form-label",3),e._uU(5,"\u540d\u79f0"),e.qZA(),e.TgZ(6,"nz-form-control",4),e._UZ(7,"input",5),e.qZA()(),e.TgZ(8,"nz-form-item")(9,"nz-form-label",3),e._uU(10,"\u7ec4\u6001"),e.qZA(),e.TgZ(11,"nz-form-control",4),e._UZ(12,"app-choose-hmi",6),e.qZA()(),e.TgZ(13,"nz-form-item")(14,"nz-form-label",3),e._uU(15,"\u6807\u7b7e"),e.qZA(),e.TgZ(16,"nz-form-control",4)(17,"nz-select",7),e.NdJ("ngModelChange",function(){return d.change()}),e.qZA()()(),e.TgZ(18,"nz-form-item")(19,"nz-form-label",3),e._uU(20,"\u751f\u4ea7\u5382\u5bb6"),e.qZA(),e.TgZ(21,"nz-form-control",4),e._UZ(22,"input",8),e.qZA()(),e.TgZ(23,"nz-form-item")(24,"nz-form-label",3),e._uU(25,"\u578b\u53f7"),e.qZA(),e.TgZ(26,"nz-form-control",4),e._UZ(27,"input",9),e.qZA()()(),e.TgZ(28,"nz-collapse-panel",10)(29,"app-edit-protocol",11),e.NdJ("codes",function(w){return d.onCodes(w)}),e.qZA()(),e.TgZ(30,"nz-collapse-panel",12),e._UZ(31,"app-edit-points",13),e.qZA(),e.TgZ(32,"nz-collapse-panel",14),e._UZ(33,"app-edit-pollers",15),e.qZA(),e.TgZ(34,"nz-collapse-panel",16),e._UZ(35,"app-edit-calculators",17),e.qZA(),e.TgZ(36,"nz-collapse-panel",18),e._UZ(37,"app-edit-commands",19),e.qZA(),e.TgZ(38,"nz-collapse-panel",20),e._UZ(39,"app-edit-alarms",21),e.qZA()()()),2&s&&(e.Q6J("ngModel",d.data)("submitting",d.submitting),e.xp6(1),e.Q6J("formGroup",d.basicForm),e.xp6(3),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(3),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(1),e.Q6J("showClear",!0),e.xp6(2),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(1),e.Q6J("nzTokenSeparators",e.DdM(17,Uh)),e.xp6(2),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(3),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(5),e.Q6J("codes",d.codes),e.xp6(2),e.Q6J("codes",d.codes))},directives:[Mr,M.JJ,M.On,Zn.yH,M.JL,M.sg,Zn.Zv,yn.SK,le.Nx,yn.t3,le.iK,le.Fd,Ae.Zp,M.Fj,M.u,M.Q7,Zs,Yr.Vq,Gs,lv,mf,Al,bn,Po],styles:[""]}),g})();var xo=J(5045);function Vh(g,x){if(1&g&&(e.TgZ(0,"div",14)(1,"nz-card",4),e._uU(2),e.qZA()()),2&g){const s=x.$implicit;e.Q6J("nzSpan",4)("nzXs",12)("nzSm",8)("nzMd",6)("nzLg",4)("nzXl",3)("nzXXl",2),e.xp6(1),e.Q6J("routerLink","/admin/device/detail/"+s.id),e.xp6(1),e.hij(" ",s.name," ")}}function xf(g,x){}function Tf(g,x){if(1&g&&e._UZ(0,"app-alarm",15),2&g){const s=e.oxw();e.Q6J("id",s.id)}}function e1(g,x){if(1&g&&e._UZ(0,"app-event",15),2&g){const s=e.oxw();e.Q6J("id",s.id)}}function _u(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"a",16),e.NdJ("click",function(){return e.CHM(s),e.oxw().load()}),e._UZ(1,"i",17),e.qZA(),e._UZ(2,"nz-divider",18),e.TgZ(3,"a",19),e._UZ(4,"i",20),e.qZA(),e._UZ(5,"nz-divider",18),e.TgZ(6,"a",21),e._UZ(7,"i",22),e.qZA()}if(2&g){const s=e.oxw();e.xp6(1),e.Q6J("nzSpin",s.loading),e.xp6(2),e.Q6J("config",s.data),e.xp6(3),e.Q6J("routerLink","/admin/project/edit/"+s.id)}}let t1=(()=>{class g{constructor(s,d,_){this.router=s,this.rs=d,this.ms=_,this.id=0,this.data={},this.loading=!1,this.id=parseInt(s.snapshot.params.id),this.load()}ngOnInit(){}load(){this.loading=!0,this.rs.get(`project/${this.id}`).subscribe(s=>{this.data=s.data,this.loading=!1})}exec(s){this.rs.post(`project/${this.id}/execute`,{command:s.name}).subscribe(d=>{})}onEnableChange(s){s?this.ms.confirm({nzTitle:"\u63d0\u793a",nzContent:"\u786e\u8ba4\u7981\u7528\u5417?",nzOnOk:()=>{this.rs.get(`project/${this.id}/disable`).subscribe(d=>{})},nzOnCancel:()=>{this.data.disabled=!1}}):this.rs.get(`project/${this.id}/enable`).subscribe(d=>{})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.gz),e.Y36(Fe.s),e.Y36(Ln.Sf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-project-detail"]],decls:38,vars:12,consts:[[3,"nzTabBarExtraContent"],["nzTitle","\u9879\u76ee\u8be6\u60c5"],["nzHeader","\u57fa\u7840\u4fe1\u606f","nzActive",""],["nzBordered",""],[3,"routerLink"],[3,"ngModel","ngModelChange"],["nzHeader","\u76f8\u5173\u8bbe\u5907","nzActive",""],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan","nzXs","nzSm","nzMd","nzLg","nzXl","nzXXl",4,"ngFor","ngForOf"],["nzTitle","\u7ec4\u6001",3,"nzDisabled"],["nz-tab",""],["nzTitle","\u544a\u8b66\u8bb0\u5f55"],["nzTitle","\u65e5\u5fd7"],["extraTemplate",""],["nz-col","",3,"nzSpan","nzXs","nzSm","nzMd","nzLg","nzXl","nzXXl"],["type","project",3,"id"],["title","\u5237\u65b0",3,"click"],["nz-icon","","nzType","reload",3,"nzSpin"],["nzType","vertical"],["title","\u539f\u59cb\u6570\u636e","appViewConfig","",3,"config"],["nz-icon","","nzType","profile"],["title","\u7f16\u8f91",3,"routerLink"],["nz-icon","","nzType","form"]],template:function(s,d){if(1&s&&(e.TgZ(0,"nz-tabset",0)(1,"nz-tab",1)(2,"nz-collapse")(3,"nz-collapse-panel",2)(4,"nz-list",3)(5,"nz-list-item")(6,"span"),e._uU(7,"\u540d\u79f0"),e.qZA(),e._uU(8),e.qZA(),e.TgZ(9,"nz-list-item")(10,"span"),e._uU(11,"\u6a21\u677f"),e.qZA(),e.TgZ(12,"a",4),e._uU(13),e.qZA()(),e.TgZ(14,"nz-list-item")(15,"span"),e._uU(16,"\u72b6\u6001"),e.qZA(),e._uU(17),e.qZA(),e.TgZ(18,"nz-list-item")(19,"span"),e._uU(20,"\u7981\u7528"),e.qZA(),e.TgZ(21,"nz-switch",5),e.NdJ("ngModelChange",function(w){return d.onEnableChange(w)}),e.qZA()(),e.TgZ(22,"nz-list-item")(23,"span"),e._uU(24,"\u521b\u5efa\u65f6\u95f4"),e.qZA(),e._uU(25),e.ALo(26,"dateString"),e.qZA()()(),e.TgZ(27,"nz-collapse-panel",6)(28,"div",7),e.YNc(29,Vh,3,9,"div",8),e.qZA()()()(),e.TgZ(30,"nz-tab",9),e.YNc(31,xf,0,0,"ng-template",10),e.qZA(),e.TgZ(32,"nz-tab",11),e.YNc(33,Tf,1,1,"ng-template",10),e.qZA(),e.TgZ(34,"nz-tab",12),e.YNc(35,e1,1,1,"ng-template",10),e.qZA()(),e.YNc(36,_u,8,3,"ng-template",null,13,e.W1O)),2&s){const _=e.MAs(37);e.Q6J("nzTabBarExtraContent",_),e.xp6(8),e.Oqu(d.data.name),e.xp6(4),e.Q6J("routerLink","/admin/template/detail/"+d.data.template_id),e.xp6(1),e.Oqu(d.data.template),e.xp6(4),e.Oqu(d.data.running?"\u542f\u52a8":"\u79bb\u7ebf"),e.xp6(4),e.Q6J("ngModel",d.data.disabled),e.xp6(4),e.Oqu(e.lcZ(26,10,d.data.created)),e.xp6(3),e.Q6J("nzGutter",10),e.xp6(1),e.Q6J("ngForOf",d.data.devices),e.xp6(1),e.Q6J("nzDisabled",!d.data.hmi)}},directives:[Wn.xH,Wn.xw,Zn.yH,Zn.Zv,Jr.n_,Jr.AA,Me.yS,ge.i,M.JJ,M.On,yn.SK,k.sg,yn.t3,gn.bd,Me.rH,Wn.cj,xo.f,pe.B,K.Ls,Ce.w,tn.g,ae.Z],pipes:[fr.i],styles:[""]}),g})();function bf(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",0),e.NdJ("click",function(){return e.CHM(s),e.oxw().clear()}),e._uU(1,"\u6e05\u7a7a"),e.qZA()}}let Sf=(()=>{class g{constructor(s,d){this.cs=s,this.rs=d,this.onChanged=()=>{},this.onTouched=()=>{},this.id="",this.name="",this.showClear=!1,this.template=new e.vpe}ngOnInit(){}registerOnChange(s){this.onChanged=s}registerOnTouched(s){this.onTouched=s}writeValue(s){this.id=s,this.load()}load(){!this.id||(this.name="\u52a0\u8f7d\u4e2d...",this.rs.get(`template/${this.id}`).subscribe(s=>{this.name=s.data.name,this.template.emit(s.data)}))}choose(){this.cs.chooseTemplate().subscribe(s=>{s&&(this.id=s,this.load(),this.onChanged(s),this.onTouched())})}clear(){this.id="",this.name="",this.onChanged(""),this.onTouched()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Sa),e.Y36(Fe.s))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-choose-template"]],hostVars:1,hostBindings:function(s,d){2&s&&e.uIk("title",d.id)},inputs:{showClear:"showClear"},outputs:{template:"template"},features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0}])],decls:4,vars:2,consts:[["nz-button","","nzSize","small",3,"click"],["nz-button","","nzSize","small",3,"click",4,"ngIf"]],template:function(s,d){1&s&&(e._uU(0),e.TgZ(1,"button",0),e.NdJ("click",function(){return d.choose()}),e._uU(2,"\u9009\u62e9"),e.qZA(),e.YNc(3,bf,2,0,"button",1)),2&s&&(e.hij("",d.name||d.id||"\u672a\u9009\u62e9","\n"),e.xp6(3),e.Q6J("ngIf",d.showClear))},directives:[xn.ix,Rn.dQ,Ce.w,k.O5],styles:[""]}),g})();function zf(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",0),e.NdJ("click",function(){return e.CHM(s),e.oxw().clear()}),e._uU(1,"\u6e05\u7a7a"),e.qZA()}}let n1=(()=>{class g{constructor(s,d){this.cs=s,this.rs=d,this.onChanged=()=>{},this.onTouched=()=>{},this.id="",this.name="",this.showClear=!1,this.device=new e.vpe}ngOnInit(){}registerOnChange(s){this.onChanged=s}registerOnTouched(s){this.onTouched=s}writeValue(s){this.id=s,this.load()}load(){!this.id||(this.name="\u52a0\u8f7d\u4e2d...",this.rs.get(`device/${this.id}`).subscribe(s=>{this.name=s.data.name,this.device.emit(s.data),this.name||this.loadProduct(s.data.product_id)}))}loadProduct(s){this.rs.get(`product/${s}/detail`).subscribe(d=>{this.name=d.data.name})}choose(){this.cs.chooseDevice().subscribe(s=>{s&&(this.id=s,this.load(),this.onChanged(s),this.onTouched())})}clear(){this.id="",this.name="",this.onChanged(""),this.onTouched()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Sa),e.Y36(Fe.s))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-choose-device"]],hostVars:1,hostBindings:function(s,d){2&s&&e.uIk("title",d.id)},inputs:{showClear:"showClear"},outputs:{device:"device"},features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0}])],decls:4,vars:2,consts:[["nz-button","","nzSize","small",3,"click"],["nz-button","","nzSize","small",3,"click",4,"ngIf"]],template:function(s,d){1&s&&(e._uU(0),e.TgZ(1,"button",0),e.NdJ("click",function(){return d.choose()}),e._uU(2,"\u9009\u62e9"),e.qZA(),e.YNc(3,zf,2,0,"button",1)),2&s&&(e.hij("",d.name||d.id||"\u672a\u9009\u62e9","\n"),e.xp6(3),e.Q6J("ngIf",d.showClear))},directives:[xn.ix,Rn.dQ,Ce.w,k.O5],styles:[""]}),g})();function r1(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){return e.CHM(s),e.oxw().clear()}),e._uU(1,"\u6e05\u7a7a"),e.qZA()}}function a1(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){return e.CHM(s),e.oxw().addMore()}),e._uU(1,"\u6dfb\u52a0"),e.qZA()}}function o1(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",7)(1,"td")(2,"app-choose-device",8),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()})("ngModelChange",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(3,"td")(4,"input",9),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(5,"td")(6,"a",10),e._UZ(7,"i",11),e.qZA(),e._UZ(8,"nz-divider",12),e.TgZ(9,"a",13),e.NdJ("nzOnConfirm",function(){const w=e.CHM(s).index;return e.oxw().remove(w)}),e._UZ(10,"i",14),e.qZA()()()}2&g&&e.Q6J("formGroupName",x.index)}let yv=(()=>{class g{constructor(s,d){this.fb=s,this.cs=d,this.onChanged=()=>{},this.onTouched=()=>{},this.items=[],this.formGroup=new M.cw({}),this.formArray=new M.Oe([])}ngOnInit(){this.buildForm()}buildForm(){this.formGroup=this.fb.group({items:this.formArray=this.fb.array(this.items.map(s=>this.fb.group({id:[s.id,[M.kI.required]],name:[s.name,[M.kI.required]]})))})}add(){this.formArray.push(this.fb.group({id:["",[M.kI.required]],name:["",[M.kI.required]]})),this.formArray.controls=[...this.formArray.controls],this.change()}addMore(){this.cs.chooseDevice({multiple:!0}).subscribe(s=>{s.length&&(s.forEach(d=>{this.formArray.push(this.fb.group({id:[d,[M.kI.required]],name:["",[M.kI.required]]}))}),this.formArray.controls=[...this.formArray.controls],this.change())})}remove(s){this.formArray.removeAt(s),this.change()}clear(){this.formArray.clear(),this.change()}change(){this.formArray.markAsDirty(),this.formArray.updateValueAndValidity(),this.onChanged(this.formArray.value),this.onTouched()}registerOnChange(s){this.onChanged=s}registerOnTouched(s){this.onTouched=s}writeValue(s){this.items=s,this.buildForm()}drop(s){const d=this.formArray.controls.splice(s.previousIndex,1);this.formArray.controls.splice(s.currentIndex,0,...d),this.change()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu),e.Y36(Sa))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-edit-devices"]],features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0}])],decls:15,vars:4,consts:[["nz-button","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nzSize","small",3,"nzData","nzFrontPagination","formGroup"],["formGroupName","items","cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","",3,"formGroupName",4,"ngFor","ngForOf"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"],["cdkDrag","",3,"formGroupName"],["formControlName","id",3,"change","ngModelChange"],["nz-input","","formControlName","name","nzSize","small","required","",3,"change"],["cdkDragHandle","","title","\u79fb\u52a8"],["nz-icon","","nzType","drag","nzTheme","outline"],["nzType","vertical"],["nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664?","title","\u5220\u9664",3,"nzOnConfirm"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(s,d){1&s&&(e.TgZ(0,"app-toolbar")(1,"nz-space"),e.YNc(2,r1,2,0,"button",0),e.YNc(3,a1,2,0,"button",1),e.qZA()(),e.TgZ(4,"nz-table",2)(5,"thead")(6,"tr")(7,"th"),e._uU(8,"\u8bbe\u5907"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"\u522b\u540d"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(13,"tbody",3),e.NdJ("cdkDropListDropped",function(w){return d.drop(w)}),e.YNc(14,o1,11,1,"tr",4),e.qZA()()),2&s&&(e.xp6(4),e.Q6J("nzData",d.formArray.controls)("nzFrontPagination",!1)("formGroup",d.formGroup),e.xp6(10),e.Q6J("ngForOf",d.formArray.controls))},directives:[bt.n,Rt.NU,Rt.$1,xn.ix,Rn.dQ,Ce.w,et.N8,M.JL,M.sg,et.Om,et.$Z,et.Uo,et._C,et.p0,M.x0,za,k.sg,ia,n1,M.JJ,M.u,Ae.Zp,M.Fj,M.Q7,Ki,K.Ls,tn.g,er],styles:[""]}),g})();function Cv(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){return e.CHM(s),e.oxw().clear()}),e._uU(1,"\u6e05\u7a7a"),e.qZA()}}function xv(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){return e.CHM(s),e.oxw().add()}),e._uU(1,"\u6dfb\u52a0"),e.qZA()}}const hn=function(){return[",","\uff0c",";"," "]},Hh=function(){return[","]};function Pl(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",7)(1,"td")(2,"nz-select",8),e.NdJ("ngModelChange",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(3,"td")(4,"input",9),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(5,"td")(6,"nz-select",10),e.NdJ("ngModelChange",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(7,"td")(8,"a",11),e._UZ(9,"i",12),e.qZA(),e._UZ(10,"nz-divider",13),e.TgZ(11,"a",14),e.NdJ("click",function(){const w=e.CHM(s).index;return e.oxw().copy(w)}),e._UZ(12,"i",15),e.qZA(),e._UZ(13,"nz-divider",13),e.TgZ(14,"a",16),e.NdJ("nzOnConfirm",function(){const w=e.CHM(s).index;return e.oxw().remove(w)}),e._UZ(15,"i",17),e.qZA()()()}2&g&&(e.Q6J("formGroupName",x.index),e.xp6(2),e.Q6J("nzTokenSeparators",e.DdM(3,hn)),e.xp6(4),e.Q6J("nzTokenSeparators",e.DdM(4,Hh)))}let Tv=(()=>{class g{constructor(s){this.fb=s,this.onChanged=()=>{},this.onTouched=()=>{},this.items=[],this.formGroup=new M.cw({}),this.formArray=new M.Oe([])}ngOnInit(){this.buildForm()}buildForm(){this.formGroup=this.fb.group({items:this.formArray=this.fb.array(this.items.map(s=>this.fb.group({targets:[s.targets,[M.kI.required]],command:[s.command,[M.kI.required]],arguments:[s.arguments,[M.kI.required]]})))})}add(){this.formArray.push(this.fb.group({targets:[[],[M.kI.required]],command:["",[M.kI.required]],arguments:[[],[M.kI.required]]})),this.formArray.controls=[...this.formArray.controls],this.change()}copy(s){var d,_,w;const me=this.formArray.controls[s];this.formArray.controls.splice(s,0,this.fb.group({targets:[[].concat(null===(d=me.get("targets"))||void 0===d?void 0:d.value),[M.kI.required]],command:[[].concat(null===(_=me.get("command"))||void 0===_?void 0:_.value),[M.kI.required]],arguments:[[].concat(null===(w=me.get("arguments"))||void 0===w?void 0:w.value),[M.kI.required]]}))}remove(s){this.formArray.removeAt(s),this.change()}clear(){this.formArray.clear(),this.change()}change(){this.formArray.markAsDirty(),this.formArray.updateValueAndValidity(),this.onChanged(this.formArray.value),this.onTouched()}registerOnChange(s){this.onChanged=s}registerOnTouched(s){this.onTouched=s}writeValue(s){this.items=s,this.buildForm()}drop(s){const d=this.formArray.controls.splice(s.previousIndex,1);this.formArray.controls.splice(s.currentIndex,0,...d),this.change()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-edit-invokes"]],features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0}])],decls:17,vars:4,consts:[["nz-button","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nzSize","small",3,"nzData","nzFrontPagination","formGroup"],["formGroupName","items","cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","",3,"formGroupName",4,"ngFor","ngForOf"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"],["cdkDrag","",3,"formGroupName"],["nzAllowClear","","nzMode","tags","formControlName","targets","nzSize","small",3,"nzTokenSeparators","ngModelChange"],["nz-input","","formControlName","command","nzSize","small","required","",3,"change"],["nzAllowClear","","nzMode","tags","formControlName","arguments","nzSize","small",3,"nzTokenSeparators","ngModelChange"],["cdkDragHandle","","title","\u79fb\u52a8"],["nz-icon","","nzType","drag","nzTheme","outline"],["nzType","vertical"],["cdkDragHandle","","title","\u590d\u5236",3,"click"],["nz-icon","","nzType","copy","nzTheme","outline"],["nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664?","title","\u5220\u9664",3,"nzOnConfirm"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(s,d){1&s&&(e.TgZ(0,"app-toolbar")(1,"nz-space"),e.YNc(2,Cv,2,0,"button",0),e.YNc(3,xv,2,0,"button",1),e.qZA()(),e.TgZ(4,"nz-table",2)(5,"thead")(6,"tr")(7,"th"),e._uU(8,"\u76ee\u6807"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"\u547d\u4ee4"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"\u53c2\u6570"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(15,"tbody",3),e.NdJ("cdkDropListDropped",function(w){return d.drop(w)}),e.YNc(16,Pl,16,5,"tr",4),e.qZA()()),2&s&&(e.xp6(4),e.Q6J("nzData",d.formArray.controls)("nzFrontPagination",!1)("formGroup",d.formGroup),e.xp6(12),e.Q6J("ngForOf",d.formArray.controls))},directives:[bt.n,Rt.NU,Rt.$1,xn.ix,Rn.dQ,Ce.w,et.N8,M.JL,M.sg,et.Om,et.$Z,et.Uo,et._C,et.p0,M.x0,za,k.sg,ia,Yr.Vq,M.JJ,M.u,Ae.Zp,M.Fj,M.Q7,Ki,K.Ls,tn.g,er],styles:[""]}),g})();function s1(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){return e.CHM(s),e.oxw().clear()}),e._uU(1,"\u6e05\u7a7a"),e.qZA()}}function l1(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){return e.CHM(s),e.oxw().add()}),e._uU(1,"\u6dfb\u52a0"),e.qZA()}}function wf(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"app-minute-time-picker",22),e.NdJ("change",function(){return e.CHM(s),e.oxw(2).change()}),e.qZA()}}function u1(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"input",23),e.NdJ("change",function(){return e.CHM(s),e.oxw(2).change()}),e.qZA()}}function c1(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",7)(1,"td")(2,"nz-select",8),e.NdJ("ngModelChange",function(){return e.CHM(s),e.oxw().change()})("change",function(){return e.CHM(s),e.oxw().change()}),e._UZ(3,"nz-option",9)(4,"nz-option",10),e.qZA()(),e.TgZ(5,"td"),e.YNc(6,wf,1,0,"app-minute-time-picker",11),e.YNc(7,u1,1,0,"input",12),e.qZA(),e.TgZ(8,"td")(9,"app-edit-invokes",13),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(10,"td")(11,"label",14),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()})("ngModelChange",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(12,"td")(13,"a",15),e._UZ(14,"i",16),e.qZA(),e._UZ(15,"nz-divider",17),e.TgZ(16,"a",18),e.NdJ("click",function(){const w=e.CHM(s).index;return e.oxw().copy(w)}),e._UZ(17,"i",19),e.qZA(),e._UZ(18,"nz-divider",17),e.TgZ(19,"a",20),e.NdJ("nzOnConfirm",function(){const w=e.CHM(s).index;return e.oxw().remove(w)}),e._UZ(20,"i",21),e.qZA()()()}if(2&g){const s=x.$implicit;e.Q6J("formGroupName",x.index),e.xp6(6),e.Q6J("ngIf","clock"==s.value.type),e.xp6(1),e.Q6J("ngIf","crontab"==s.value.type)}}let bv=(()=>{class g{constructor(s){this.fb=s,this.onChanged=()=>{},this.onTouched=()=>{},this.items=[],this.formGroup=new M.cw({}),this.formArray=new M.Oe([])}ngOnInit(){this.buildForm()}buildForm(){this.formGroup=this.fb.group({items:this.formArray=this.fb.array(this.items.map(s=>this.fb.group({type:[s.type,[M.kI.required]],clock:[s.clock,[M.kI.required]],crontab:[s.crontab,[M.kI.required]],invokes:[s.invokes||[],[M.kI.required]],disabled:[s.disabled,[M.kI.required]]})))})}add(){this.formArray.push(this.fb.group({type:["clock",[M.kI.required]],clock:[60,[M.kI.required]],crontab:["",[M.kI.required]],invokes:[[],[M.kI.required]],disabled:[!1,[M.kI.required]]})),this.formArray.controls=[...this.formArray.controls],this.change()}copy(s){var d,_,w,me,Re;const at=this.formArray.controls[s];this.formArray.controls.splice(s,0,this.fb.group({type:[null===(d=at.get("type"))||void 0===d?void 0:d.value,[M.kI.required]],clock:[null===(_=at.get("clock"))||void 0===_?void 0:_.value,[M.kI.required]],crontab:[null===(w=at.get("crontab"))||void 0===w?void 0:w.value,[M.kI.required]],invokes:[[].concat(null===(me=at.get("invokes"))||void 0===me?void 0:me.value),[M.kI.required]],disabled:[null===(Re=at.get("disabled"))||void 0===Re?void 0:Re.value,[M.kI.required]]}))}remove(s){this.formArray.removeAt(s),this.change()}clear(){this.formArray.clear(),this.change()}change(){this.formArray.markAsDirty(),this.formArray.updateValueAndValidity(),this.onChanged(this.formArray.value),this.onTouched()}registerOnChange(s){this.onChanged=s}registerOnTouched(s){this.onTouched=s}writeValue(s){this.items=s,this.buildForm()}drop(s){const d=this.formArray.controls.splice(s.previousIndex,1);this.formArray.controls.splice(s.currentIndex,0,...d),this.change()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-edit-jobs"]],features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0}])],decls:19,vars:4,consts:[["nz-button","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nzSize","small",3,"nzData","nzFrontPagination","formGroup"],["formGroupName","items","cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","",3,"formGroupName",4,"ngFor","ngForOf"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"],["cdkDrag","",3,"formGroupName"],["formControlName","type","nzSize","small",3,"ngModelChange","change"],["nzValue","clock","nzLabel","\u5b9a\u65f6"],["nzValue","crontab","nzLabel","crontab"],["formControlName","clock","nzSize","small",3,"change",4,"ngIf"],["nz-input","","formControlName","crontab","nzSize","small",3,"change",4,"ngIf"],["formControlName","invokes",3,"change"],["nz-checkbox","","formControlName","disabled",3,"change","ngModelChange"],["cdkDragHandle","","title","\u79fb\u52a8"],["nz-icon","","nzType","drag","nzTheme","outline"],["nzType","vertical"],["cdkDragHandle","","title","\u590d\u5236",3,"click"],["nz-icon","","nzType","copy","nzTheme","outline"],["nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664?","title","\u5220\u9664",3,"nzOnConfirm"],["nz-icon","","nzType","delete","nzTheme","outline"],["formControlName","clock","nzSize","small",3,"change"],["nz-input","","formControlName","crontab","nzSize","small",3,"change"]],template:function(s,d){1&s&&(e.TgZ(0,"app-toolbar")(1,"nz-space"),e.YNc(2,s1,2,0,"button",0),e.YNc(3,l1,2,0,"button",1),e.qZA()(),e.TgZ(4,"nz-table",2)(5,"thead")(6,"tr")(7,"th"),e._uU(8,"\u7c7b\u578b"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"\u5b9a\u65f6"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"\u6267\u884c\u547d\u4ee4"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"\u7981\u7528"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(17,"tbody",3),e.NdJ("cdkDropListDropped",function(w){return d.drop(w)}),e.YNc(18,c1,21,3,"tr",4),e.qZA()()),2&s&&(e.xp6(4),e.Q6J("nzData",d.formArray.controls)("nzFrontPagination",!1)("formGroup",d.formGroup),e.xp6(14),e.Q6J("ngForOf",d.formArray.controls))},directives:[bt.n,Rt.NU,Rt.$1,xn.ix,Rn.dQ,Ce.w,et.N8,M.JL,M.sg,et.Om,et.$Z,et.Uo,et._C,et.p0,M.x0,za,k.sg,ia,Yr.Vq,M.JJ,M.u,Yr.Ip,k.O5,mu,Ae.Zp,M.Fj,Tv,hs.Ie,Ki,K.Ls,tn.g,er],styles:[""]}),g})();function Sv(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){return e.CHM(s),e.oxw().clear()}),e._uU(1,"\u6e05\u7a7a"),e.qZA()}}function h1(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){return e.CHM(s),e.oxw().add()}),e._uU(1,"\u6dfb\u52a0"),e.qZA()}}function zv(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",7)(1,"td")(2,"input",8),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(3,"td")(4,"input",9),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(5,"td")(6,"nz-input-number",10),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(7,"td")(8,"nz-input-number",11),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(9,"td")(10,"nz-input-number",12),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(11,"td")(12,"app-edit-invokes",13),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(13,"td")(14,"label",14),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()})("ngModelChange",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(15,"td")(16,"a",15),e._UZ(17,"i",16),e.qZA(),e._UZ(18,"nz-divider",17),e.TgZ(19,"a",18),e.NdJ("click",function(){const w=e.CHM(s).index;return e.oxw().copy(w)}),e._UZ(20,"i",19),e.qZA(),e._UZ(21,"nz-divider",17),e.TgZ(22,"a",20),e.NdJ("nzOnConfirm",function(){const w=e.CHM(s).index;return e.oxw().remove(w)}),e._UZ(23,"i",21),e.qZA()()()}2&g&&e.Q6J("formGroupName",x.index)}let Df=(()=>{class g{constructor(s){this.fb=s,this.onChanged=()=>{},this.onTouched=()=>{},this.items=[],this.formGroup=new M.cw({}),this.formArray=new M.Oe([])}ngOnInit(){this.buildForm()}buildForm(){this.formGroup=this.fb.group({items:this.formArray=this.fb.array(this.items.map(s=>this.fb.group({name:[s.name,[M.kI.required]],condition:[s.condition,[M.kI.required]],delay:[s.delay,[M.kI.required]],reset_timeout:[s.reset_timeout,[]],reset_total:[s.reset_total,[]],invokes:[s.invokes||[],[]],disabled:[s.disabled,[M.kI.required]]})))})}add(){this.formArray.push(this.fb.group({name:["",[M.kI.required]],condition:["",[M.kI.required]],delay:[0,[M.kI.required]],reset_timeout:[0,[]],reset_total:[0,[]],invokes:[[],[]],disabled:[!1,[M.kI.required]]})),this.formArray.controls=[...this.formArray.controls],this.change()}copy(s){var d,_,w,me,Re,at,ft;const xt=this.formArray.controls[s];this.formArray.controls.splice(s,0,this.fb.group({name:[null===(d=xt.get("name"))||void 0===d?void 0:d.value,[M.kI.required]],condition:[null===(_=xt.get("condition"))||void 0===_?void 0:_.value,[M.kI.required]],delay:[null===(w=xt.get("delay"))||void 0===w?void 0:w.value,[M.kI.required]],reset_timeout:[null===(me=xt.get("reset_timeout"))||void 0===me?void 0:me.value,[]],reset_total:[null===(Re=xt.get("reset_total"))||void 0===Re?void 0:Re.value,[]],invokes:[[].concat(null===(at=xt.get("invokes"))||void 0===at?void 0:at.value),[]],disabled:[null===(ft=xt.get("disabled"))||void 0===ft?void 0:ft.value,[M.kI.required]]}))}remove(s){this.formArray.removeAt(s),this.change()}clear(){this.formArray.clear(),this.change()}change(){this.formArray.markAsDirty(),this.formArray.updateValueAndValidity(),this.onChanged(this.formArray.value),this.onTouched()}registerOnChange(s){this.onChanged=s}registerOnTouched(s){this.onTouched=s}writeValue(s){this.items=s,this.buildForm()}drop(s){const d=this.formArray.controls.splice(s.previousIndex,1);this.formArray.controls.splice(s.currentIndex,0,...d),this.change()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-edit-strategies"]],features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0}])],decls:25,vars:4,consts:[["nz-button","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nzSize","small",3,"nzData","nzFrontPagination","formGroup"],["formGroupName","items","cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","",3,"formGroupName",4,"ngFor","ngForOf"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"],["cdkDrag","",3,"formGroupName"],["nz-input","","formControlName","name","nzSize","small","required","",3,"change"],["nz-input","","formControlName","condition","nzSize","small","required","",3,"change"],["formControlName","delay","nzSize","small",3,"change"],["formControlName","reset_timeout","nzSize","small",3,"change"],["formControlName","reset_total","nzSize","small",3,"change"],["formControlName","invokes",3,"change"],["nz-checkbox","","formControlName","disabled",3,"change","ngModelChange"],["cdkDragHandle","","title","\u79fb\u52a8"],["nz-icon","","nzType","drag","nzTheme","outline"],["nzType","vertical"],["cdkDragHandle","","title","\u590d\u5236",3,"click"],["nz-icon","","nzType","copy","nzTheme","outline"],["nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664?","title","\u5220\u9664",3,"nzOnConfirm"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(s,d){1&s&&(e.TgZ(0,"app-toolbar")(1,"nz-space"),e.YNc(2,Sv,2,0,"button",0),e.YNc(3,h1,2,0,"button",1),e.qZA()(),e.TgZ(4,"nz-table",2)(5,"thead")(6,"tr")(7,"th"),e._uU(8,"\u540d\u79f0"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"\u6761\u4ef6"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"\u5ef6\u8fdf"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"\u8d85\u65f6\u91cd\u7f6e"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"\u91cd\u7f6e\u6b21\u6570"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"\u6267\u884c\u547d\u4ee4"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"\u7981\u7528"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(23,"tbody",3),e.NdJ("cdkDropListDropped",function(w){return d.drop(w)}),e.YNc(24,zv,24,1,"tr",4),e.qZA()()),2&s&&(e.xp6(4),e.Q6J("nzData",d.formArray.controls)("nzFrontPagination",!1)("formGroup",d.formGroup),e.xp6(20),e.Q6J("ngForOf",d.formArray.controls))},directives:[bt.n,Rt.NU,Rt.$1,xn.ix,Rn.dQ,Ce.w,et.N8,M.JL,M.sg,et.Om,et.$Z,et.Uo,et._C,et.p0,M.x0,za,k.sg,ia,Ae.Zp,M.Fj,M.JJ,M.u,M.Q7,vt,Tv,hs.Ie,Ki,K.Ls,tn.g,er],styles:[""]}),g})();function d1(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){return e.CHM(s),e.oxw().clear()}),e._uU(1,"\u6e05\u7a7a"),e.qZA()}}function mr(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){return e.CHM(s),e.oxw().add()}),e._uU(1,"\u6dfb\u52a0"),e.qZA()}}const Ht=function(){return[",","\uff0c",";"," "]};function li(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",7)(1,"td")(2,"nz-select",8),e._UZ(3,"nz-option",9)(4,"nz-option",10)(5,"nz-option",11)(6,"nz-option",12)(7,"nz-option",13)(8,"nz-option",14)(9,"nz-option",15),e.qZA()(),e.TgZ(10,"td")(11,"nz-select",16),e.NdJ("ngModelChange",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(12,"td")(13,"input",17),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(14,"td")(15,"input",18),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(16,"td")(17,"a",19),e._UZ(18,"i",20),e.qZA(),e._UZ(19,"nz-divider",21),e.TgZ(20,"a",22),e.NdJ("click",function(){const w=e.CHM(s).index;return e.oxw().copy(w)}),e._UZ(21,"i",23),e.qZA(),e._UZ(22,"nz-divider",21),e.TgZ(23,"a",24),e.NdJ("nzOnConfirm",function(){const w=e.CHM(s).index;return e.oxw().remove(w)}),e._UZ(24,"i",25),e.qZA()()()}2&g&&(e.Q6J("formGroupName",x.index),e.xp6(11),e.Q6J("nzTokenSeparators",e.DdM(2,Ht)))}let da=(()=>{class g{constructor(s){this.fb=s,this.onChanged=()=>{},this.onTouched=()=>{},this.items=[],this.formGroup=new M.cw({}),this.formArray=new M.Oe([])}ngOnInit(){this.buildForm()}buildForm(){this.formGroup=this.fb.group({items:this.formArray=this.fb.array(this.items.map(s=>this.fb.group({targets:[s.targets,[M.kI.required]],type:[s.type,[M.kI.required]],as:[s.as,[M.kI.required]],expression:[s.expression,[M.kI.required]]})))})}add(){this.formArray.push(this.fb.group({targets:[[],[M.kI.required]],type:["SUM",[M.kI.required]],as:["",[M.kI.required]],expression:["",[M.kI.required]]})),this.formArray.controls=[...this.formArray.controls],this.change()}copy(s){var d,_;const w=this.formArray.controls[s];this.formArray.controls.splice(s,0,this.fb.group({as:[null===(d=w.get("as"))||void 0===d?void 0:d.value,[M.kI.required]],expression:[null===(_=w.get("expression"))||void 0===_?void 0:_.value,[M.kI.required]]}))}remove(s){this.formArray.removeAt(s),this.change()}clear(){this.formArray.clear(),this.change()}change(){this.formArray.markAsDirty(),this.formArray.updateValueAndValidity(),this.onChanged(this.formArray.value),this.onTouched()}registerOnChange(s){this.onChanged=s}registerOnTouched(s){this.onTouched=s}writeValue(s){this.items=s,this.buildForm()}drop(s){const d=this.formArray.controls.splice(s.previousIndex,1);this.formArray.controls.splice(s.currentIndex,0,...d),this.change()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-edit-aggregators"]],features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0}])],decls:19,vars:4,consts:[["nz-button","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nzSize","small",3,"nzData","nzFrontPagination","formGroup"],["formGroupName","items","cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","",3,"formGroupName",4,"ngFor","ngForOf"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"],["cdkDrag","",3,"formGroupName"],["formControlName","type"],["nzValue","SUM","nzLabel","\u6c42\u548c"],["nzValue","AVG","nzLabel","\u5747\u503c"],["nzValue","COUNT","nzLabel","\u8ba1\u6570"],["nzValue","MIN","nzLabel","\u6700\u5c0f"],["nzValue","MAX","nzLabel","\u6700\u5927"],["nzValue","FIRST","nzLabel","\u6700\u524d"],["nzValue","LAST","nzLabel","\u6700\u540e"],["nzAllowClear","","nzMode","tags","formControlName","targets","nzSize","small",3,"nzTokenSeparators","ngModelChange"],["nz-input","","formControlName","as","nzSize","small","required","",3,"change"],["nz-input","","formControlName","expression","nzSize","small","required","",3,"change"],["cdkDragHandle","","title","\u79fb\u52a8"],["nz-icon","","nzType","drag","nzTheme","outline"],["nzType","vertical"],["cdkDragHandle","","title","\u590d\u5236",3,"click"],["nz-icon","","nzType","copy","nzTheme","outline"],["nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664?","title","\u5220\u9664",3,"nzOnConfirm"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(s,d){1&s&&(e.TgZ(0,"app-toolbar")(1,"nz-space"),e.YNc(2,d1,2,0,"button",0),e.YNc(3,mr,2,0,"button",1),e.qZA()(),e.TgZ(4,"nz-table",2)(5,"thead")(6,"tr")(7,"th"),e._uU(8,"\u7c7b\u578b"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"\u76ee\u6807"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"\u53d8\u91cf"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"\u8868\u8fbe\u5f0f"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(17,"tbody",3),e.NdJ("cdkDropListDropped",function(w){return d.drop(w)}),e.YNc(18,li,25,3,"tr",4),e.qZA()()),2&s&&(e.xp6(4),e.Q6J("nzData",d.formArray.controls)("nzFrontPagination",!1)("formGroup",d.formGroup),e.xp6(14),e.Q6J("ngForOf",d.formArray.controls))},directives:[bt.n,Rt.NU,Rt.$1,xn.ix,Rn.dQ,Ce.w,et.N8,M.JL,M.sg,et.Om,et.$Z,et.Uo,et._C,et.p0,M.x0,za,k.sg,ia,Yr.Vq,M.JJ,M.u,Yr.Ip,Ae.Zp,M.Fj,M.Q7,Ki,K.Ls,tn.g,er],styles:[""]}),g})();function To(g,x){1&g&&(e.TgZ(0,"nz-form-item")(1,"nz-form-label",3),e._uU(2,"\u7ec4\u6001"),e.qZA(),e.TgZ(3,"nz-form-control",4),e._UZ(4,"app-choose-hmi",11),e.qZA()()),2&g&&(e.xp6(1),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(1),e.Q6J("showClear",!0))}function wv(g,x){1&g&&(e.ynx(0),e.TgZ(1,"nz-collapse-panel",12),e._UZ(2,"app-edit-alarms",13),e.qZA(),e.TgZ(3,"nz-collapse-panel",14),e._UZ(4,"app-edit-jobs",15),e.qZA(),e.TgZ(5,"nz-collapse-panel",16),e._UZ(6,"app-edit-strategies",17),e.qZA(),e.TgZ(7,"nz-collapse-panel",18),e._UZ(8,"app-edit-aggregators",19),e.qZA(),e.BQk())}let Wh=(()=>{class g{constructor(s,d,_,w,me){var Re;this.fb=s,this.route=d,this.router=_,this.rs=w,this.message=me,this.submitting=!1,this.basicForm=new M.cw({}),this.data={name:"\u65b0\u5efa\u9879\u76ee",disabled:!1,template_id:"",hmi:"",devices:[],alarms:[],strategies:[],jobs:[],aggregators:[]},this.id=d.snapshot.paramMap.get("id"),this.id?this.load():Object.assign(this.data,null===(Re=this.router.getCurrentNavigation())||void 0===Re?void 0:Re.extras.state),this.buildForm()}buildForm(){this.basicForm=this.fb.group({name:[this.data.name,[M.kI.required]],template_id:[this.data.template_id,[]],hmi:[this.data.hmi,[]],disabled:[this.data.disabled,[]],devices:[this.data.devices||[]],alarms:[this.data.alarms||[]],jobs:[this.data.jobs||[]],strategies:[this.data.strategies||[]],aggregators:[this.data.scripts||[]]})}ngOnInit(){}load(){this.rs.get("project/"+this.id).subscribe(s=>{this.data=s.data,this.buildForm()})}submit(){this.submitting=!0,this.rs.post(this.id?"project/"+this.id:"project/create",this.basicForm.value).subscribe(d=>{this.message.success("\u63d0\u4ea4\u6210\u529f"),this.router.navigate(["/admin/project/detail/"+d.data.id])}).add(()=>{this.submitting=!1})}change(){this.data=this.basicForm.value}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu),e.Y36(Me.gz),e.Y36(Me.F0),e.Y36(Fe.s),e.Y36(ot.dD))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-project-edit"]],decls:22,vars:12,consts:[[3,"ngModel","submitting","ngModelChange","submit"],[3,"formGroup","change"],["nzHeader","\u57fa\u672c\u4fe1\u606f","nzActive",""],[3,"nzSpan"],["nzErrorTip","",3,"nzSpan"],["nz-input","","formControlName","name","required",""],["formControlName","template_id",3,"showClear"],[4,"ngIf"],["formControlName","disabled"],["nzHeader","\u7ed1\u5b9a\u8bbe\u5907","nzActive",""],["formControlName","devices"],["formControlName","hmi",3,"showClear"],["nzHeader","\u6570\u636e\u68c0\u67e5","nzActive",""],["formControlName","alarms"],["nzHeader","\u5b9a\u65f6\u4efb\u52a1","nzActive",""],["formControlName","jobs"],["nzHeader","\u63a7\u5236\u7b56\u7565","nzActive",""],["formControlName","strategies"],["nzHeader","\u805a\u5408\u8ba1\u7b97","nzActive",""],["formControlName","aggregators"]],template:function(s,d){1&s&&(e.TgZ(0,"app-editor",0),e.NdJ("ngModelChange",function(w){return d.data=w})("ngModelChange",function(w){return d.basicForm.patchValue(w)})("submit",function(){return d.submit()}),e.TgZ(1,"nz-collapse",1),e.NdJ("change",function(){return d.change()}),e.TgZ(2,"nz-collapse-panel",2)(3,"nz-form-item")(4,"nz-form-label",3),e._uU(5,"\u540d\u79f0"),e.qZA(),e.TgZ(6,"nz-form-control",4),e._UZ(7,"input",5),e.qZA()(),e.TgZ(8,"nz-form-item")(9,"nz-form-label",3),e._uU(10,"\u6a21\u677f"),e.qZA(),e.TgZ(11,"nz-form-control",4),e._UZ(12,"app-choose-template",6),e.qZA()(),e.YNc(13,To,5,3,"nz-form-item",7),e.TgZ(14,"nz-form-item")(15,"nz-form-label",3),e._uU(16,"\u7981\u7528"),e.qZA(),e.TgZ(17,"nz-form-control",4),e._UZ(18,"nz-switch",8),e.qZA()()(),e.TgZ(19,"nz-collapse-panel",9),e._UZ(20,"app-edit-devices",10),e.qZA(),e.YNc(21,wv,9,0,"ng-container",7),e.qZA()()),2&s&&(e.Q6J("ngModel",d.data)("submitting",d.submitting),e.xp6(1),e.Q6J("formGroup",d.basicForm),e.xp6(3),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(3),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(1),e.Q6J("showClear",!0),e.xp6(1),e.Q6J("ngIf",!d.basicForm.value.template_id),e.xp6(2),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(4),e.Q6J("ngIf",!d.basicForm.value.template_id))},directives:[Mr,M.JJ,M.On,Zn.yH,M.JL,M.sg,Zn.Zv,yn.SK,le.Nx,yn.t3,le.iK,le.Fd,Ae.Zp,M.Fj,M.u,M.Q7,Sf,k.O5,Zs,ge.i,yv,Po,bv,Df,da],styles:[""]}),g})();function Dv(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){return e.CHM(s),e.oxw().clear()}),e._uU(1,"\u6e05\u7a7a"),e.qZA()}}function f1(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){return e.CHM(s),e.oxw().addMore()}),e._uU(1,"\u6dfb\u52a0"),e.qZA()}}function Af(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",7)(1,"td")(2,"app-choose-product",8),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(3,"td")(4,"input",9),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(5,"td")(6,"a",10),e._UZ(7,"i",11),e.qZA(),e._UZ(8,"nz-divider",12),e.TgZ(9,"a",13),e.NdJ("nzOnConfirm",function(){const w=e.CHM(s).index;return e.oxw().remove(w)}),e._UZ(10,"i",14),e.qZA()()()}2&g&&e.Q6J("formGroupName",x.index)}let Ef=(()=>{class g{constructor(s,d){this.fb=s,this.cs=d,this.onChanged=()=>{},this.onTouched=()=>{},this.items=[],this.formGroup=new M.cw({}),this.formArray=new M.Oe([])}ngOnInit(){this.buildForm()}buildForm(){this.formGroup=this.fb.group({items:this.formArray=this.fb.array(this.items.map(s=>this.fb.group({id:[s.device_id,[M.kI.required]],name:[s.name,[M.kI.required]]})))})}add(){this.formArray.push(this.fb.group({id:["",[M.kI.required]],name:["",[M.kI.required]]})),this.formArray.controls=[...this.formArray.controls],this.change()}addMore(){this.cs.chooseProduct({multiple:!0}).subscribe(s=>{s.length&&(s.forEach(d=>{this.formArray.push(this.fb.group({id:[d,[M.kI.required]],name:["",[M.kI.required]]}))}),this.formArray.controls=[...this.formArray.controls],this.change())})}remove(s){this.formArray.removeAt(s),this.change()}clear(){this.formArray.clear(),this.change()}change(){this.formArray.markAsDirty(),this.formArray.updateValueAndValidity(),this.onChanged(this.formArray.value),this.onTouched()}registerOnChange(s){this.onChanged=s}registerOnTouched(s){this.onTouched=s}writeValue(s){this.items=s,this.buildForm()}drop(s){const d=this.formArray.controls.splice(s.previousIndex,1);this.formArray.controls.splice(s.currentIndex,0,...d),this.change()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu),e.Y36(Sa))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-edit-products"]],features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0}])],decls:15,vars:4,consts:[["nz-button","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nzSize","small",3,"nzData","nzFrontPagination","formGroup"],["formGroupName","items","cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","",3,"formGroupName",4,"ngFor","ngForOf"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"],["cdkDrag","",3,"formGroupName"],["formControlName","id",3,"change"],["nz-input","","formControlName","name","nzSize","small","required","",3,"change"],["cdkDragHandle","","title","\u79fb\u52a8"],["nz-icon","","nzType","drag","nzTheme","outline"],["nzType","vertical"],["nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664?","title","\u5220\u9664",3,"nzOnConfirm"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(s,d){1&s&&(e.TgZ(0,"app-toolbar")(1,"nz-space"),e.YNc(2,Dv,2,0,"button",0),e.YNc(3,f1,2,0,"button",1),e.qZA()(),e.TgZ(4,"nz-table",2)(5,"thead")(6,"tr")(7,"th"),e._uU(8,"\u4ea7\u54c1"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"\u522b\u540d"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(13,"tbody",3),e.NdJ("cdkDropListDropped",function(w){return d.drop(w)}),e.YNc(14,Af,11,1,"tr",4),e.qZA()()),2&s&&(e.xp6(4),e.Q6J("nzData",d.formArray.controls)("nzFrontPagination",!1)("formGroup",d.formGroup),e.xp6(10),e.Q6J("ngForOf",d.formArray.controls))},directives:[bt.n,Rt.NU,Rt.$1,xn.ix,Rn.dQ,Ce.w,et.N8,M.JL,M.sg,et.Om,et.$Z,et.Uo,et._C,et.p0,M.x0,za,k.sg,ia,Bs,M.JJ,M.u,Ae.Zp,M.Fj,M.Q7,Ki,K.Ls,tn.g,er],styles:[""]}),g})(),yu=(()=>{class g{constructor(s,d,_,w,me){this.fb=s,this.route=d,this.router=_,this.rs=w,this.message=me,this.submitting=!1,this.basicForm=new M.cw({}),this.data={name:"\u65b0\u5efa\u6a21\u677f",hmi:"",products:[],alarms:[],strategies:[],jobs:[],aggregators:[]},this.id=d.snapshot.paramMap.get("id"),this.id&&this.load(),this.buildForm()}buildForm(){this.basicForm=this.fb.group({name:[this.data.name,[M.kI.required]],hmi:[this.data.hmi,[]],products:[this.data.products||[]],alarms:[this.data.alarms||[]],jobs:[this.data.jobs||[]],strategies:[this.data.strategies||[]],aggregators:[this.data.scripts||[]]})}ngOnInit(){}load(){this.rs.get("template/"+this.id).subscribe(s=>{this.data=s.data,this.buildForm()})}submit(){this.submitting=!0,this.rs.post(this.id?"template/"+this.id:"template/create",this.basicForm.value).subscribe(d=>{this.message.success("\u63d0\u4ea4\u6210\u529f"),this.router.navigate(["/admin/template/detail/"+d.data.id])}).add(()=>{this.submitting=!1})}change(){this.data=this.basicForm.value}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu),e.Y36(Me.gz),e.Y36(Me.F0),e.Y36(Fe.s),e.Y36(ot.dD))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-template-edit"]],decls:23,vars:8,consts:[[3,"ngModel","submitting","ngModelChange","submit"],[3,"formGroup","change"],["nzHeader","\u57fa\u672c\u4fe1\u606f","nzActive",""],[3,"nzSpan"],["nzErrorTip","",3,"nzSpan"],["nz-input","","formControlName","name","required",""],["formControlName","hmi",3,"showClear"],["nzHeader","\u521d\u59cb\u8bbe\u5907","nzActive",""],["formControlName","products"],["nzHeader","\u6570\u636e\u68c0\u67e5","nzActive",""],["formControlName","alarms"],["nzHeader","\u5b9a\u65f6\u4efb\u52a1","nzActive",""],["formControlName","jobs"],["nzHeader","\u63a7\u5236\u7b56\u7565","nzActive",""],["formControlName","strategies"],["nzHeader","\u805a\u5408\u8ba1\u7b97","nzActive",""],["formControlName","aggregators"]],template:function(s,d){1&s&&(e.TgZ(0,"app-editor",0),e.NdJ("ngModelChange",function(w){return d.data=w})("ngModelChange",function(w){return d.basicForm.patchValue(w)})("submit",function(){return d.submit()}),e.TgZ(1,"nz-collapse",1),e.NdJ("change",function(){return d.change()}),e.TgZ(2,"nz-collapse-panel",2)(3,"nz-form-item")(4,"nz-form-label",3),e._uU(5,"\u540d\u79f0"),e.qZA(),e.TgZ(6,"nz-form-control",4),e._UZ(7,"input",5),e.qZA()(),e.TgZ(8,"nz-form-item")(9,"nz-form-label",3),e._uU(10,"\u7ec4\u6001"),e.qZA(),e.TgZ(11,"nz-form-control",4),e._UZ(12,"app-choose-hmi",6),e.qZA()()(),e.TgZ(13,"nz-collapse-panel",7),e._UZ(14,"app-edit-products",8),e.qZA(),e.TgZ(15,"nz-collapse-panel",9),e._UZ(16,"app-edit-alarms",10),e.qZA(),e.TgZ(17,"nz-collapse-panel",11),e._UZ(18,"app-edit-jobs",12),e.qZA(),e.TgZ(19,"nz-collapse-panel",13),e._UZ(20,"app-edit-strategies",14),e.qZA(),e.TgZ(21,"nz-collapse-panel",15),e._UZ(22,"app-edit-aggregators",16),e.qZA()()()),2&s&&(e.Q6J("ngModel",d.data)("submitting",d.submitting),e.xp6(1),e.Q6J("formGroup",d.basicForm),e.xp6(3),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(3),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(1),e.Q6J("showClear",!0))},directives:[Mr,M.JJ,M.On,Zn.yH,M.JL,M.sg,Zn.Zv,yn.SK,le.Nx,yn.t3,le.iK,le.Fd,Ae.Zp,M.Fj,M.u,M.Q7,Zs,Ef,Po,bv,Df,da],styles:[""]}),g})(),Da=(()=>{class g{constructor(){}ngOnInit(){}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-container"]],decls:1,vars:0,template:function(s,d){1&s&&e._UZ(0,"router-outlet")},directives:[Me.lC],styles:[""]}),g})(),Aa=(()=>{class g{constructor(s){this.fb=s,this.onChanged=()=>{},this.onTouched=()=>{},this.data={},this.formGroup=new M.cw({})}ngOnInit(){this.buildForm()}buildForm(){this.formGroup=this.fb.group({enable:[this.data.enable,[M.kI.required]],regex:[this.data.regex,[]]})}change(){this.formGroup.markAsDirty(),this.formGroup.updateValueAndValidity(),this.onChanged(this.formGroup.value),this.onTouched()}registerOnChange(s){this.onChanged=s}registerOnTouched(s){this.onTouched=s}writeValue(s){this.data=s||{},this.buildForm()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-edit-register"]],features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0}])],decls:6,vars:3,consts:[[3,"formGroup","change"],[3,"nzSpan"],["nzErrorTip","",3,"nzSpan"],["nz-input","","formControlName","regex"]],template:function(s,d){1&s&&(e.TgZ(0,"form",0),e.NdJ("change",function(){return d.change()}),e.TgZ(1,"nz-form-item")(2,"nz-form-label",1),e._uU(3,"\u6b63\u5219\u8868\u8fbe\u5f0f"),e.qZA(),e.TgZ(4,"nz-form-control",2),e._UZ(5,"input",3),e.qZA()()()),2&s&&(e.Q6J("formGroup",d.formGroup),e.xp6(2),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12))},directives:[M._Y,M.JL,M.sg,yn.SK,le.Nx,yn.t3,le.iK,le.Fd,Ae.Zp,M.Fj,M.JJ,M.u],styles:[""]}),g})();function Av(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){return e.CHM(s),e.oxw().clear()}),e._uU(1,"\u6e05\u7a7a"),e.qZA()}}function Gh(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){return e.CHM(s),e.oxw().add()}),e._uU(1,"\u6dfb\u52a0"),e.qZA()}}function Mf(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",7)(1,"td")(2,"app-choose-product",8),e.NdJ("ngModelChange",function(){return e.CHM(s),e.oxw().change()})("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(3,"td")(4,"nz-input-number",9),e.NdJ("change",function(){return e.CHM(s),e.oxw().change()}),e.qZA()(),e.TgZ(5,"td")(6,"a",10),e._UZ(7,"i",11),e.qZA(),e._UZ(8,"nz-divider",12),e.TgZ(9,"a",13),e.NdJ("click",function(){const w=e.CHM(s).index;return e.oxw().copy(w)}),e._UZ(10,"i",14),e.qZA(),e._UZ(11,"nz-divider",12),e.TgZ(12,"a",15),e.NdJ("nzOnConfirm",function(){const w=e.CHM(s).index;return e.oxw().remove(w)}),e._UZ(13,"i",16),e.qZA()()()}2&g&&(e.Q6J("formGroupName",x.index),e.xp6(4),e.Q6J("nzMin",1)("nzMax",65535)("nzStep",1))}let Jh=(()=>{class g{constructor(s){this.fb=s,this.onChanged=()=>{},this.onTouched=()=>{},this.items=[],this.formGroup=new M.cw({}),this.formArray=new M.Oe([])}ngOnInit(){this.buildForm()}buildForm(){this.formGroup=this.fb.group({items:this.formArray=this.fb.array(this.items.map(s=>this.fb.group({station:[s.station,[M.kI.required]],product_id:[s.product_id,[M.kI.required]]})))})}add(){this.formArray.push(this.fb.group({station:[this.formArray.controls.length+1,[M.kI.required]],product_id:["",[M.kI.required]]})),this.formArray.controls=[...this.formArray.controls],this.change()}copy(s){var d,_;const w=this.formArray.controls[s];this.formArray.controls.splice(s,0,this.fb.group({station:[null===(d=w.get("station"))||void 0===d?void 0:d.value,[M.kI.required]],product_id:[null===(_=w.get("product_id"))||void 0===_?void 0:_.value,[M.kI.required]]}))}remove(s){this.formArray.removeAt(s),this.change()}clear(){this.formArray.clear(),this.change()}change(){this.formArray.markAsDirty(),this.formArray.updateValueAndValidity(),this.onChanged(this.formArray.value),this.onTouched()}registerOnChange(s){this.onChanged=s}registerOnTouched(s){this.onTouched=s}writeValue(s){this.items=s,this.buildForm()}drop(s){const d=this.formArray.controls.splice(s.previousIndex,1);this.formArray.controls.splice(s.currentIndex,0,...d),this.change()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-server-edit-devices"]],features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0}])],decls:15,vars:4,consts:[["nz-button","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nzSize","small",3,"nzData","nzFrontPagination","formGroup"],["formGroupName","items","cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","",3,"formGroupName",4,"ngFor","ngForOf"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"],["cdkDrag","",3,"formGroupName"],["formControlName","product_id","required","",3,"ngModelChange","change"],["formControlName","station","nzSize","small",3,"nzMin","nzMax","nzStep","change"],["cdkDragHandle","","title","\u79fb\u52a8"],["nz-icon","","nzType","drag","nzTheme","outline"],["nzType","vertical"],["cdkDragHandle","","title","\u590d\u5236",3,"click"],["nz-icon","","nzType","copy","nzTheme","outline"],["nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664?","title","\u5220\u9664",3,"nzOnConfirm"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(s,d){1&s&&(e.TgZ(0,"app-toolbar")(1,"nz-space"),e.YNc(2,Av,2,0,"button",0),e.YNc(3,Gh,2,0,"button",1),e.qZA()(),e.TgZ(4,"nz-table",2)(5,"thead")(6,"tr")(7,"th"),e._uU(8,"\u4ea7\u54c1"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"\u4ece\u7ad9\u53f7"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(13,"tbody",3),e.NdJ("cdkDropListDropped",function(w){return d.drop(w)}),e.YNc(14,Mf,14,4,"tr",4),e.qZA()()),2&s&&(e.xp6(4),e.Q6J("nzData",d.formArray.controls)("nzFrontPagination",!1)("formGroup",d.formGroup),e.xp6(10),e.Q6J("ngForOf",d.formArray.controls))},directives:[bt.n,Rt.NU,Rt.$1,xn.ix,Rn.dQ,Ce.w,et.N8,M.JL,M.sg,et.Om,et.$Z,et.Uo,et._C,et.p0,M.x0,za,k.sg,ia,Bs,M.JJ,M.u,M.Q7,vt,Ki,K.Ls,tn.g,er],styles:[""]}),g})(),Yh=(()=>{class g{constructor(s,d,_,w,me){this.fb=s,this.route=d,this.router=_,this.rs=w,this.message=me,this.submitting=!1,this.basicForm=new M.cw({}),this.data={name:"\u65b0\u5efa\u670d\u52a1\u5668",type:"tcp",addr:"",disabled:!1,register:{regex:"^\\w+$"},heartbeat:{enable:!1,timeout:30,text:"",hex:"",regex:"^\\w+$"},protocol:{name:"ModbusTCP",options:{}},devices:[]},this.id=d.snapshot.paramMap.get("id"),this.id&&this.load(),this.buildForm()}buildForm(){this.basicForm=this.fb.group({name:[this.data.name,[M.kI.required]],type:[this.data.type,[M.kI.required]],addr:[this.data.addr,[M.kI.required]],disabled:[this.data.disabled,[]],register:[this.data.register,[]],heartbeat:[this.data.heartbeat,[]],protocol:[this.data.protocol,[]],devices:[this.data.devices,[]]})}ngOnInit(){}load(){this.rs.get("server/"+this.id).subscribe(s=>{this.data=s.data,this.buildForm()})}submit(){this.submitting=!0,this.rs.post(this.id?"server/"+this.id:"server/create",this.basicForm.value).subscribe(d=>{this.message.success("\u63d0\u4ea4\u6210\u529f"),this.router.navigate(["/admin/server/detail/"+d.data.id])}).add(()=>{this.submitting=!1})}change(){this.data=this.basicForm.value}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu),e.Y36(Me.gz),e.Y36(Me.F0),e.Y36(Fe.s),e.Y36(ot.dD))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-server-edit"]],decls:31,vars:11,consts:[[3,"ngModel","submitting","ngModelChange","submit"],[3,"formGroup","change"],["nzHeader","\u57fa\u672c\u4fe1\u606f","nzActive",""],[3,"nzSpan"],["nzErrorTip","",3,"nzSpan"],["nz-input","","formControlName","name","required",""],["formControlName","type",3,"ngModelChange","change"],["nzValue","tcp","nzLabel","TCP\u670d\u52a1\u5668"],["nzValue","udp","nzLabel","UDP\u670d\u52a1\u5668"],["nz-input","","formControlName","addr","placeholder","\u7aef\u53e3\u53f7","required",""],["formControlName","disabled"],["nzHeader","\u6ce8\u518c\u5305","nzActive",""],["formControlName","register"],["nzHeader","\u534f\u8bae\u9002\u914d","nzActive",""],["formControlName","protocol"],["nzHeader","\u9ed8\u8ba4\u8bbe\u5907","nzActive",""],["formControlName","devices"]],template:function(s,d){1&s&&(e.TgZ(0,"app-editor",0),e.NdJ("ngModelChange",function(w){return d.data=w})("ngModelChange",function(w){return d.basicForm.patchValue(w)})("submit",function(){return d.submit()}),e.TgZ(1,"nz-collapse",1),e.NdJ("change",function(){return d.change()}),e.TgZ(2,"nz-collapse-panel",2)(3,"nz-form-item")(4,"nz-form-label",3),e._uU(5,"\u540d\u79f0"),e.qZA(),e.TgZ(6,"nz-form-control",4),e._UZ(7,"input",5),e.qZA()(),e.TgZ(8,"nz-form-item")(9,"nz-form-label",3),e._uU(10,"\u7c7b\u578b"),e.qZA(),e.TgZ(11,"nz-form-control",4)(12,"nz-select",6),e.NdJ("ngModelChange",function(){return d.change()})("change",function(){return d.change()}),e._UZ(13,"nz-option",7)(14,"nz-option",8),e.qZA()()(),e.TgZ(15,"nz-form-item")(16,"nz-form-label",3),e._uU(17,"\u5730\u5740"),e.qZA(),e.TgZ(18,"nz-form-control",4),e._UZ(19,"input",9),e.qZA()(),e.TgZ(20,"nz-form-item")(21,"nz-form-label",3),e._uU(22,"\u7981\u7528"),e.qZA(),e.TgZ(23,"nz-form-control",4),e._UZ(24,"nz-switch",10),e.qZA()()(),e.TgZ(25,"nz-collapse-panel",11),e._UZ(26,"app-edit-register",12),e.qZA(),e.TgZ(27,"nz-collapse-panel",13),e._UZ(28,"app-edit-protocol",14),e.qZA(),e.TgZ(29,"nz-collapse-panel",15),e._UZ(30,"app-server-edit-devices",16),e.qZA()()()),2&s&&(e.Q6J("ngModel",d.data)("submitting",d.submitting),e.xp6(1),e.Q6J("formGroup",d.basicForm),e.xp6(3),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(3),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(5),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(3),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12))},directives:[Mr,M.JJ,M.On,Zn.yH,M.JL,M.sg,Zn.Zv,yn.SK,le.Nx,yn.t3,le.iK,le.Fd,Ae.Zp,M.Fj,M.u,M.Q7,Yr.Vq,Yr.Ip,ge.i,Aa,Gs,Jh],styles:[""]}),g})();function Io(g,x){1&g&&(e.TgZ(0,"div")(1,"nz-form-item")(2,"nz-form-label",1),e._uU(3,"\u95f4\u9694"),e.qZA(),e.TgZ(4,"nz-form-control",2),e._UZ(5,"nz-input-number",5),e.qZA()(),e.TgZ(6,"nz-form-item")(7,"nz-form-label",1),e._uU(8,"\u6b63\u5219\u8868\u8fbe\u5f0f"),e.qZA(),e.TgZ(9,"nz-form-control",2),e._UZ(10,"input",6),e.qZA()(),e.TgZ(11,"nz-form-item")(12,"nz-form-label",1),e._uU(13,"\u5341\u516d\u8fdb\u5236"),e.qZA(),e.TgZ(14,"nz-form-control",2),e._UZ(15,"input",7),e.qZA()(),e.TgZ(16,"nz-form-item")(17,"nz-form-label",1),e._uU(18,"\u56fa\u5b9a\u5185\u5bb9"),e.qZA(),e.TgZ(19,"nz-form-control",2),e._UZ(20,"input",7),e.qZA()()()),2&g&&(e.xp6(2),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(1),e.Q6J("nzMin",5)("nzMax",600)("nzStep",1),e.xp6(2),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(3),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(3),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12))}let Of=(()=>{class g{constructor(s){this.fb=s,this.onChanged=()=>{},this.onTouched=()=>{},this.data={},this.formGroup=new M.cw({})}ngOnInit(){this.buildForm()}buildForm(){this.formGroup=this.fb.group({enable:[this.data.enable,[M.kI.required]],timeout:[this.data.timeout,[]],hex:[this.data.hex,[]],text:[this.data.text,[]],regex:[this.data.regex,[]]})}change(){this.formGroup.markAsDirty(),this.formGroup.updateValueAndValidity(),this.onChanged(this.formGroup.value),this.onTouched()}registerOnChange(s){this.onChanged=s}registerOnTouched(s){this.onTouched=s}writeValue(s){this.data=s||{},this.buildForm()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-edit-heartbeat"]],features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0}])],decls:7,vars:4,consts:[[3,"formGroup","change"],[3,"nzSpan"],["nzErrorTip","",3,"nzSpan"],["formControlName","enable",3,"ngModelChange"],[4,"ngIf"],["formControlName","timeout",3,"nzMin","nzMax","nzStep"],["nz-input","","formControlName","regex"],["nz-input","","formControlName","text"]],template:function(s,d){1&s&&(e.TgZ(0,"form",0),e.NdJ("change",function(){return d.change()}),e.TgZ(1,"nz-form-item")(2,"nz-form-label",1),e._uU(3,"\u542f\u7528"),e.qZA(),e.TgZ(4,"nz-form-control",2)(5,"nz-switch",3),e.NdJ("ngModelChange",function(){return d.change()}),e.qZA()()(),e.YNc(6,Io,21,11,"div",4),e.qZA()),2&s&&(e.Q6J("formGroup",d.formGroup),e.xp6(2),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(2),e.Q6J("ngIf",d.formGroup.value.enable))},directives:[M._Y,M.JL,M.sg,yn.SK,le.Nx,yn.t3,le.iK,le.Fd,ge.i,M.JJ,M.u,k.O5,vt,Ae.Zp,M.Fj],styles:[""]}),g})(),Ev=(()=>{class g{constructor(s){this.fb=s,this.onChanged=()=>{},this.onTouched=()=>{},this.data={},this.formGroup=new M.cw({})}ngOnInit(){this.buildForm()}buildForm(){this.formGroup=this.fb.group({baud_rate:[this.data.baud_rate,[]],data_bits:[this.data.data_bits,[]],stop_bits:[this.data.stop_bits,[]],parity_mode:[this.data.parity_mode,[]],rs485:[this.data.rs485,[]]})}change(){this.formGroup.markAsDirty(),this.formGroup.updateValueAndValidity(),this.onChanged(this.formGroup.value),this.onTouched()}registerOnChange(s){this.onChanged=s}registerOnTouched(s){this.onTouched=s}writeValue(s){this.data=s||{},this.buildForm()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-edit-serial"]],features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0}])],decls:53,vars:38,consts:[[3,"formGroup","change"],[3,"nzSpan"],["nzErrorTip","",3,"nzSpan"],["formControlName","baud_rate"],["nzLabel","150",3,"nzValue"],["nzLabel","200",3,"nzValue"],["nzLabel","300",3,"nzValue"],["nzLabel","600",3,"nzValue"],["nzLabel","1200",3,"nzValue"],["nzLabel","1800",3,"nzValue"],["nzLabel","2400",3,"nzValue"],["nzLabel","4800",3,"nzValue"],["nzLabel","7200",3,"nzValue"],["nzLabel","9600",3,"nzValue"],["nzLabel","14400",3,"nzValue"],["nzLabel","19200",3,"nzValue"],["nzLabel","28800",3,"nzValue"],["nzLabel","38400",3,"nzValue"],["nzLabel","57600",3,"nzValue"],["nzLabel","76800",3,"nzValue"],["nzLabel","115200",3,"nzValue"],["nzLabel","230400",3,"nzValue"],["formControlName","data_bits"],["nzLabel","5",3,"nzValue"],["nzLabel","6",3,"nzValue"],["nzLabel","7",3,"nzValue"],["nzLabel","8",3,"nzValue"],["formControlName","stop_bits"],["nzLabel","1",3,"nzValue"],["nzLabel","2",3,"nzValue"],["formControlName","parity_mode"],["nzLabel","\u65e0",3,"nzValue"],["nzLabel","\u5076",3,"nzValue"],["nzLabel","\u5947",3,"nzValue"],["formControlName","rs485"]],template:function(s,d){1&s&&(e.TgZ(0,"form",0),e.NdJ("change",function(){return d.change()}),e.TgZ(1,"nz-form-item")(2,"nz-form-label",1),e._uU(3,"\u6ce2\u7279\u7387"),e.qZA(),e.TgZ(4,"nz-form-control",2)(5,"nz-select",3),e._UZ(6,"nz-option",4)(7,"nz-option",5)(8,"nz-option",6)(9,"nz-option",7)(10,"nz-option",8)(11,"nz-option",9)(12,"nz-option",10)(13,"nz-option",11)(14,"nz-option",12)(15,"nz-option",13)(16,"nz-option",14)(17,"nz-option",15)(18,"nz-option",16)(19,"nz-option",17)(20,"nz-option",18)(21,"nz-option",19)(22,"nz-option",20)(23,"nz-option",21),e.qZA()()(),e.TgZ(24,"nz-form-item")(25,"nz-form-label",1),e._uU(26,"\u6570\u636e\u4f4d"),e.qZA(),e.TgZ(27,"nz-form-control",2)(28,"nz-select",22),e._UZ(29,"nz-option",23)(30,"nz-option",24)(31,"nz-option",25)(32,"nz-option",26),e.qZA()()(),e.TgZ(33,"nz-form-item")(34,"nz-form-label",1),e._uU(35,"\u505c\u6b62\u4f4d"),e.qZA(),e.TgZ(36,"nz-form-control",2)(37,"nz-select",27),e._UZ(38,"nz-option",28)(39,"nz-option",29),e.qZA()()(),e.TgZ(40,"nz-form-item")(41,"nz-form-label",1),e._uU(42,"\u68c0\u9a8c\u4f4d"),e.qZA(),e.TgZ(43,"nz-form-control",2)(44,"nz-select",30),e._UZ(45,"nz-option",31)(46,"nz-option",32)(47,"nz-option",33),e.qZA()()(),e.TgZ(48,"nz-form-item")(49,"nz-form-label",1),e._uU(50,"RS485"),e.qZA(),e.TgZ(51,"nz-form-control",2),e._UZ(52,"nz-switch",34),e.qZA()()()),2&s&&(e.Q6J("formGroup",d.formGroup),e.xp6(2),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(2),e.Q6J("nzValue",150),e.xp6(1),e.Q6J("nzValue",200),e.xp6(1),e.Q6J("nzValue",300),e.xp6(1),e.Q6J("nzValue",600),e.xp6(1),e.Q6J("nzValue",1200),e.xp6(1),e.Q6J("nzValue",1800),e.xp6(1),e.Q6J("nzValue",2400),e.xp6(1),e.Q6J("nzValue",4800),e.xp6(1),e.Q6J("nzValue",7200),e.xp6(1),e.Q6J("nzValue",9600),e.xp6(1),e.Q6J("nzValue",14400),e.xp6(1),e.Q6J("nzValue",19200),e.xp6(1),e.Q6J("nzValue",28800),e.xp6(1),e.Q6J("nzValue",38400),e.xp6(1),e.Q6J("nzValue",57600),e.xp6(1),e.Q6J("nzValue",76800),e.xp6(1),e.Q6J("nzValue",115200),e.xp6(1),e.Q6J("nzValue",230400),e.xp6(2),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(2),e.Q6J("nzValue",5),e.xp6(1),e.Q6J("nzValue",6),e.xp6(1),e.Q6J("nzValue",7),e.xp6(1),e.Q6J("nzValue",8),e.xp6(2),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(2),e.Q6J("nzValue",1),e.xp6(1),e.Q6J("nzValue",2),e.xp6(2),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(2),e.Q6J("nzValue",0),e.xp6(1),e.Q6J("nzValue",1),e.xp6(1),e.Q6J("nzValue",2),e.xp6(2),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12))},directives:[M._Y,M.JL,M.sg,yn.SK,le.Nx,yn.t3,le.iK,le.Fd,Yr.Vq,M.JJ,M.u,Yr.Ip,ge.i],styles:[""]}),g})();function Mv(g,x){1&g&&(e.TgZ(0,"div")(1,"nz-form-item")(2,"nz-form-label",1),e._uU(3,"\u95f4\u9694"),e.qZA(),e.TgZ(4,"nz-form-control",2),e._UZ(5,"nz-input-number",5),e.qZA()(),e.TgZ(6,"nz-form-item")(7,"nz-form-label",1),e._uU(8,"\u6700\u5927\u6b21\u6570"),e.qZA(),e.TgZ(9,"nz-form-control",2),e._UZ(10,"nz-input-number",6),e.qZA()()()),2&g&&(e.xp6(2),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(1),e.Q6J("nzMin",5)("nzStep",1),e.xp6(2),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(1),e.Q6J("nzStep",1))}let Ov=(()=>{class g{constructor(s){this.fb=s,this.onChanged=()=>{},this.onTouched=()=>{},this.data={},this.formGroup=new M.cw({})}ngOnInit(){this.buildForm()}buildForm(){this.formGroup=this.fb.group({enable:[this.data.enable,[M.kI.required]],timeout:[this.data.timeout,[]],maximum:[this.data.maximum,[]]})}change(){this.formGroup.markAsDirty(),this.formGroup.updateValueAndValidity(),this.onChanged(this.formGroup.value),this.onTouched()}registerOnChange(s){this.onChanged=s}registerOnTouched(s){this.onTouched=s}writeValue(s){this.data=s||{},this.buildForm()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-edit-retry"]],features:[e._Bn([{provide:M.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0}])],decls:7,vars:4,consts:[[3,"formGroup","change"],[3,"nzSpan"],["nzErrorTip","",3,"nzSpan"],["formControlName","enable",3,"ngModelChange"],[4,"ngIf"],["formControlName","timeout",3,"nzMin","nzStep"],["formControlName","maximum",3,"nzStep"]],template:function(s,d){1&s&&(e.TgZ(0,"form",0),e.NdJ("change",function(){return d.change()}),e.TgZ(1,"nz-form-item")(2,"nz-form-label",1),e._uU(3,"\u542f\u7528"),e.qZA(),e.TgZ(4,"nz-form-control",2)(5,"nz-switch",3),e.NdJ("ngModelChange",function(){return d.change()}),e.qZA()()(),e.YNc(6,Mv,11,7,"div",4),e.qZA()),2&s&&(e.Q6J("formGroup",d.formGroup),e.xp6(2),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(2),e.Q6J("ngIf",d.formGroup.value.enable))},directives:[M._Y,M.JL,M.sg,yn.SK,le.Nx,yn.t3,le.iK,le.Fd,ge.i,M.JJ,M.u,k.O5,vt],styles:[""]}),g})();function Pv(g,x){1&g&&(e.TgZ(0,"nz-collapse-panel",19),e._UZ(1,"app-edit-heartbeat",20),e.qZA())}function Iv(g,x){1&g&&(e.TgZ(0,"nz-collapse-panel",21),e._UZ(1,"app-edit-serial",22),e.qZA())}function kv(g,x){1&g&&(e.TgZ(0,"nz-collapse-panel",23),e._UZ(1,"app-edit-retry",24),e.qZA())}let Dr=(()=>{class g{constructor(s,d,_,w,me,Re){this.fb=s,this.route=d,this.router=_,this.rs=w,this.message=me,this.ms=Re,this.submitting=!1,this.basicForm=new M.cw({}),this.data={name:"\u65b0\u5efa\u901a\u9053",type:"serial",addr:"",disabled:!1,heartbeat:{enable:!1,timeout:30,text:"",hex:"",regex:"^\\w+$"},retry:{enable:!0,timeout:30,maximum:0},serial:{baud_rate:9600,data_bits:8,stop_bits:1,parity_mode:0,rs485:!1},protocol:{name:"ModbusRTU",options:{}}},this.id=d.snapshot.paramMap.get("id"),this.id&&this.load(),this.buildForm()}buildForm(){this.basicForm=this.fb.group({name:[this.data.name,[M.kI.required]],type:[this.data.type,[M.kI.required]],addr:[this.data.addr,[M.kI.required]],disabled:[this.data.disabled,[]],heartbeat:[this.data.heartbeat,[]],retry:[this.data.retry,[]],serial:[this.data.serial,[]],protocol:[this.data.protocol,[]]})}ngOnInit(){}load(){this.rs.get("tunnel/"+this.id).subscribe(s=>{this.data=s.data,this.buildForm()})}submit(){this.submitting=!0,this.rs.post(this.id?"tunnel/"+this.id:"tunnel/create",this.basicForm.value).subscribe(d=>{this.message.success("\u63d0\u4ea4\u6210\u529f"),this.router.navigate(["/admin/tunnel/detail/"+d.data.id]),this.id||this.ms.confirm({nzTitle:"\u63d0\u793a",nzContent:"\u662f\u5426\u8981\u5728\u6b64\u901a\u9053\u4e0a\u521b\u5efa\u8bbe\u5907?",nzOnOk:()=>{this.router.navigate(["admin/device/create"],{state:{tunnel_id:d.data.id}})}})}).add(()=>{this.submitting=!1})}change(){this.data=this.basicForm.value}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu),e.Y36(Me.gz),e.Y36(Me.F0),e.Y36(Fe.s),e.Y36(ot.dD),e.Y36(Ln.Sf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-tunnel-edit"]],decls:33,vars:14,consts:[[3,"ngModel","submitting","ngModelChange","submit"],[3,"formGroup","change"],["nzHeader","\u57fa\u672c\u4fe1\u606f","nzActive",""],[3,"nzSpan"],["nzErrorTip","",3,"nzSpan"],["nz-input","","formControlName","name","required",""],["formControlName","type",3,"ngModelChange","change"],["nzValue","serial","nzLabel","\u4e32\u53e3"],["nzValue","tcp-client","nzLabel","TCP\u5ba2\u6237\u7aef"],["nzValue","tcp-server","nzLabel","TCP\u670d\u52a1\u7aef"],["nzValue","udp-client","nzLabel","UDP\u5ba2\u6237\u7aef"],["nzValue","udp-server","nzLabel","UDP\u670d\u52a1\u7aef"],["nz-input","","formControlName","addr","placeholder","\u4e32\u53e3\u540d\u79f0\uff0c\u7aef\u53e3\u53f7\uff0cIP:\u7aef\u53e3","required",""],["formControlName","disabled"],["nzHeader","\u5fc3\u8df3\u5305","nzActive","",4,"ngIf"],["nzHeader","\u4e32\u53e3\u53c2\u6570","nzActive","",4,"ngIf"],["nzHeader","\u65ad\u7ebf\u91cd\u8fde","nzActive","",4,"ngIf"],["nzHeader","\u534f\u8bae\u9002\u914d","nzActive",""],["formControlName","protocol"],["nzHeader","\u5fc3\u8df3\u5305","nzActive",""],["formControlName","heartbeat"],["nzHeader","\u4e32\u53e3\u53c2\u6570","nzActive",""],["formControlName","serial"],["nzHeader","\u65ad\u7ebf\u91cd\u8fde","nzActive",""],["formControlName","retry"]],template:function(s,d){1&s&&(e.TgZ(0,"app-editor",0),e.NdJ("ngModelChange",function(w){return d.data=w})("ngModelChange",function(w){return d.basicForm.patchValue(w)})("submit",function(){return d.submit()}),e.TgZ(1,"nz-collapse",1),e.NdJ("change",function(){return d.change()}),e.TgZ(2,"nz-collapse-panel",2)(3,"nz-form-item")(4,"nz-form-label",3),e._uU(5,"\u540d\u79f0"),e.qZA(),e.TgZ(6,"nz-form-control",4),e._UZ(7,"input",5),e.qZA()(),e.TgZ(8,"nz-form-item")(9,"nz-form-label",3),e._uU(10,"\u7c7b\u578b"),e.qZA(),e.TgZ(11,"nz-form-control",4)(12,"nz-select",6),e.NdJ("ngModelChange",function(){return d.change()})("change",function(){return d.change()}),e._UZ(13,"nz-option",7)(14,"nz-option",8)(15,"nz-option",9)(16,"nz-option",10)(17,"nz-option",11),e.qZA()()(),e.TgZ(18,"nz-form-item")(19,"nz-form-label",3),e._uU(20,"\u5730\u5740"),e.qZA(),e.TgZ(21,"nz-form-control",4),e._UZ(22,"input",12),e.qZA()(),e.TgZ(23,"nz-form-item")(24,"nz-form-label",3),e._uU(25,"\u7981\u7528"),e.qZA(),e.TgZ(26,"nz-form-control",4),e._UZ(27,"nz-switch",13),e.qZA()()(),e.YNc(28,Pv,2,0,"nz-collapse-panel",14),e.YNc(29,Iv,2,0,"nz-collapse-panel",15),e.YNc(30,kv,2,0,"nz-collapse-panel",16),e.TgZ(31,"nz-collapse-panel",17),e._UZ(32,"app-edit-protocol",18),e.qZA()()()),2&s&&(e.Q6J("ngModel",d.data)("submitting",d.submitting),e.xp6(1),e.Q6J("formGroup",d.basicForm),e.xp6(3),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(3),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(8),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(3),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(2),e.Q6J("ngIf","serial"!=d.basicForm.value.type),e.xp6(1),e.Q6J("ngIf","serial"==d.basicForm.value.type),e.xp6(1),e.Q6J("ngIf","serial"==d.basicForm.value.type||"tcp-client"==d.basicForm.value.type||"udp-client"==d.basicForm.value.type))},directives:[Mr,M.JJ,M.On,Zn.yH,M.JL,M.sg,Zn.Zv,yn.SK,le.Nx,yn.t3,le.iK,le.Fd,Ae.Zp,M.Fj,M.u,M.Q7,Yr.Vq,Yr.Ip,ge.i,k.O5,Of,Ev,Ov,Gs],styles:[""]}),g})();function Il(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",6),e.NdJ("dblclick",function(){const w=e.CHM(s).$implicit;return e.oxw().open(w)}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",7),e.ALo(6,"dateString"),e._uU(7),e.ALo(8,"fromNow"),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td")(12,"a",8),e._uU(13,"\u8be6\u60c5"),e.qZA(),e._UZ(14,"nz-divider",9),e.TgZ(15,"a",8),e._uU(16,"\u7f16\u8f91"),e.qZA(),e._UZ(17,"nz-divider",9),e.TgZ(18,"a",10),e._uU(19," \u66f4\u591a "),e._UZ(20,"i",11),e.qZA(),e.TgZ(21,"nz-dropdown-menu",null,12)(23,"ul",13)(24,"li",14),e.NdJ("click",function(){const w=e.CHM(s).$implicit;return e.oxw().enable(w)}),e._uU(25,"\u542f\u7528"),e.qZA(),e.TgZ(26,"li",15),e.NdJ("nzOnConfirm",function(){const w=e.CHM(s).$implicit;return e.oxw().disable(w)}),e._uU(27,"\u7981\u7528 "),e.qZA(),e.TgZ(28,"li",16),e.NdJ("nzOnConfirm",function(){const _=e.CHM(s),w=_.$implicit,me=_.index;return e.oxw().remove(w,me)}),e._uU(29,"\u5220\u9664"),e.qZA()()()()()}if(2&g){const s=x.$implicit,d=e.MAs(22);e.xp6(2),e.Oqu(s.id),e.xp6(2),e.AsE("",s.disabled?"\u274c":"","",s.name,""),e.xp6(1),e.Q6J("title",e.lcZ(6,11,s.created)),e.xp6(2),e.Oqu(e.lcZ(8,13,s.created)),e.xp6(3),e.Oqu(s.running?"\u5728\u7ebf":"\u79bb\u7ebf"),e.xp6(2),e.Q6J("routerLink","/admin/project/detail/"+s.id),e.xp6(3),e.Q6J("routerLink","/admin/project/edit/"+s.id),e.xp6(3),e.Q6J("nzDropdownMenu",d),e.xp6(6),e.Q6J("nzDisabled",!s.disabled),e.xp6(2),e.Q6J("nzDisabled",s.disabled)}}let Lv=(()=>{class g{constructor(s,d,_){this.router=s,this.rs=d,this.ms=_,this.id="",this.datum=[],this.loading=!1,this.total=1,this.pageSize=20,this.pageIndex=1,this.params={filter:{}}}ngOnInit(){}search(s){this.pageIndex=1,this.params.skip=0,s?this.params.keyword={name:s}:delete this.params.keyword,this.load()}onQuery(s){(0,sr.F)(s,this.params),this.load()}load(){this.loading=!0,this.params.filter.template_id=this.id,this.rs.post("project/list",this.params).subscribe(s=>{console.log("res",s),this.datum=s.data,this.total=s.total}).add(()=>{this.loading=!1})}create(){this.router.navigate(["admin/project/create"],{state:{template_id:this.id}})}open(s){this.router.navigate(["/admin/project/detail/"+s.id])}remove(s,d){this.rs.get(`project/${s.id}/delete`).subscribe(_=>{this.datum.splice(d,1)})}enable(s){this.rs.get(`project/${s.id}/enable`).subscribe(d=>{s.disabled=!1})}disable(s){this.rs.get(`project/${s.id}/disable`).subscribe(d=>{s.disabled=!0})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.F0),e.Y36(Fe.s),e.Y36(Ln.Sf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-template-project"]],inputs:{id:"id"},decls:16,vars:11,consts:[[3,"loading","create","refresh","search"],["nzSize","small",3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzQueryParams"],["nzColumnKey","id",3,"nzSortFn"],["nzColumnKey","name",3,"nzSortFn"],["nzWidth","100"],[3,"dblclick",4,"ngFor","ngForOf"],[3,"dblclick"],[3,"title"],[3,"routerLink"],["nzType","vertical"],["nz-dropdown","","nzTrigger","click",3,"nzDropdownMenu"],["nz-icon","","nzType","down"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"nzDisabled","click"],["nz-menu-item","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u7981\u7528\uff1f",3,"nzDisabled","nzOnConfirm"],["nz-menu-item","","nzDanger","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664\uff1f",3,"nzOnConfirm"]],template:function(s,d){1&s&&(e.TgZ(0,"app-page-list",0),e.NdJ("create",function(){return d.create()})("refresh",function(){return d.load()})("search",function(w){return d.search(w)}),e.TgZ(1,"nz-table",1),e.NdJ("nzQueryParams",function(w){return d.onQuery(w)}),e.TgZ(2,"thead")(3,"tr")(4,"th",2),e._uU(5,"ID"),e.qZA(),e.TgZ(6,"th",3),e._uU(7,"\u540d\u79f0"),e.qZA(),e.TgZ(8,"th",2),e._uU(9,"\u521b\u5efa\u65f6\u95f4"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"\u72b6\u6001"),e.qZA(),e.TgZ(12,"th",4),e._uU(13,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(14,"tbody"),e.YNc(15,Il,30,15,"tr",5),e.qZA()()()),2&s&&(e.Q6J("loading",d.loading),e.xp6(1),e.Q6J("nzData",d.datum)("nzFrontPagination",!1)("nzLoading",d.loading)("nzTotal",d.total)("nzPageSize",d.pageSize)("nzPageIndex",d.pageIndex),e.xp6(3),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(7),e.Q6J("ngForOf",d.datum))},directives:[Gr._,et.N8,et.Om,et.$Z,et.Uo,et._C,et.qD,et.p0,k.sg,Me.yS,tn.g,rt.Ws,rt.cm,K.Ls,Ce.w,rt.RR,he.wO,he.r9,er],pipes:[fr.i,xr.d],styles:[""]}),g})();var Bi=J(1764);let Rv=(()=>{class g{transform(s){const d=new Date;return s<0?s=0:s>1439&&(s=1439),d.setHours(Math.floor(s/60),s%60,0,0),Bi(d).format("HH:mm")}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275pipe=e.Yjl({name:"minuteFormat",type:g,pure:!0}),g})();function Nv(g,x){if(1&g&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&g){const s=x.$implicit;e.xp6(2),e.Oqu(s.id),e.xp6(2),e.Oqu(s.name)}}function p1(g,x){if(1&g&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"minuteFormat"),e.qZA()),2&g){const s=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,s.clock))}}function g1(g,x){if(1&g&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&g){const s=e.oxw().$implicit;e.xp6(1),e.Oqu(s.crontab)}}function v1(g,x){if(1&g&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e.YNc(4,p1,3,3,"span",19),e.YNc(5,g1,2,1,"span",19),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA()()),2&g){const s=x.$implicit;e.xp6(2),e.Oqu(s.type),e.xp6(2),e.Q6J("ngIf","clock"==s.type),e.xp6(1),e.Q6J("ngIf","crontab"==s.type),e.xp6(2),e.Oqu(s.invokes),e.xp6(2),e.Oqu(s.disabled)}}function m1(g,x){if(1&g&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA()()),2&g){const s=x.$implicit;e.xp6(2),e.Oqu(s.name),e.xp6(2),e.Oqu(s.condition),e.xp6(2),e.Oqu(s.delay),e.xp6(2),e.Oqu(s.reset_timeout),e.xp6(2),e.Oqu(s.reset_total),e.xp6(2),e.Oqu(s.invokes),e.xp6(2),e.Oqu(s.disabled)}}function _1(g,x){if(1&g&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA()()),2&g){const s=x.$implicit;e.xp6(2),e.Oqu(s.name),e.xp6(2),e.Oqu(s.condition),e.xp6(2),e.Oqu(s.delay),e.xp6(2),e.Oqu(s.reset_timeout),e.xp6(2),e.Oqu(s.reset_total),e.xp6(2),e.Oqu(s.code),e.xp6(2),e.Oqu(s.message),e.xp6(2),e.Oqu(s.level),e.xp6(2),e.Oqu(s.disabled)}}function y1(g,x){if(1&g&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA()()),2&g){const s=x.$implicit;e.xp6(2),e.Oqu(s.type),e.xp6(2),e.Oqu(null==s.targets?null:s.targets.join(",")),e.xp6(2),e.Oqu(s.as),e.xp6(2),e.Oqu(s.expression)}}function Fv(g,x){if(1&g&&e._UZ(0,"app-template-project",20),2&g){const s=e.oxw();e.Q6J("id",s.id)}}function Cc(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"a",21),e.NdJ("click",function(){return e.CHM(s),e.oxw().load()}),e._UZ(1,"i",22),e.qZA(),e._UZ(2,"nz-divider",23),e.TgZ(3,"a",24),e._UZ(4,"i",25),e.qZA(),e._UZ(5,"nz-divider",23),e.TgZ(6,"a",26),e._UZ(7,"i",27),e.qZA()}if(2&g){const s=e.oxw();e.xp6(1),e.Q6J("nzSpin",s.loading),e.xp6(2),e.Q6J("config",s.data),e.xp6(3),e.Q6J("routerLink","/admin/template/edit/"+s.id)}}let Si=(()=>{class g{constructor(s,d){this.router=s,this.rs=d,this.id="",this.data={},this.loading=!1,this.id=s.snapshot.params.id,this.load()}ngOnInit(){}load(){this.loading=!0,this.rs.get(`template/${this.id}`).subscribe(s=>{this.data=s.data,this.loading=!1})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.gz),e.Y36(Fe.s))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-template-detail"]],decls:113,vars:22,consts:[[3,"nzTabBarExtraContent"],["nzTitle","\u6a21\u677f\u8be6\u60c5"],["nzHeader","\u57fa\u7840\u4fe1\u606f","nzActive",""],["nzBordered",""],["nzHeader","\u521d\u59cb\u8bbe\u5907","nzActive",""],["nzSize","small",3,"nzData","nzFrontPagination"],["productsTable",""],[4,"ngFor","ngForOf"],["nzHeader","\u5b9a\u65f6\u4efb\u52a1","nzActive",""],["jobsTable",""],["nzHeader","\u63a7\u5236\u7b56\u7565","nzActive",""],["strategiesTable",""],["nzHeader","\u6570\u636e\u68c0\u67e5","nzActive",""],["alarmsTable",""],["nzHeader","\u805a\u5408\u8ba1\u7b97","nzActive",""],["aggregatorsTable",""],["nzTitle","\u9879\u76ee\u5b9e\u4f8b"],["nz-tab",""],["extraTemplate",""],[4,"ngIf"],[3,"id"],["title","\u5237\u65b0",3,"click"],["nz-icon","","nzType","reload",3,"nzSpin"],["nzType","vertical"],["title","\u539f\u59cb\u6570\u636e","appViewConfig","",3,"config"],["nz-icon","","nzType","profile"],["title","\u7f16\u8f91",3,"routerLink"],["nz-icon","","nzType","form"]],template:function(s,d){if(1&s&&(e.TgZ(0,"nz-tabset",0)(1,"nz-tab",1)(2,"nz-collapse")(3,"nz-collapse-panel",2)(4,"nz-list",3)(5,"nz-list-item")(6,"span"),e._uU(7,"ID"),e.qZA(),e._uU(8),e.qZA(),e.TgZ(9,"nz-list-item")(10,"span"),e._uU(11,"\u540d\u79f0"),e.qZA(),e._uU(12),e.qZA(),e.TgZ(13,"nz-list-item")(14,"span"),e._uU(15,"\u7248\u672c"),e.qZA(),e._uU(16),e.qZA(),e.TgZ(17,"nz-list-item")(18,"span"),e._uU(19,"\u521b\u5efa\u65f6\u95f4"),e.qZA(),e._uU(20),e.ALo(21,"dateString"),e.qZA()()(),e.TgZ(22,"nz-collapse-panel",4)(23,"nz-table",5,6)(25,"thead")(26,"tr")(27,"th"),e._uU(28,"ID"),e.qZA(),e.TgZ(29,"th"),e._uU(30,"\u522b\u540d"),e.qZA()()(),e.TgZ(31,"tbody"),e.YNc(32,Nv,5,2,"tr",7),e.qZA()()(),e.TgZ(33,"nz-collapse-panel",8)(34,"nz-table",5,9)(36,"thead")(37,"tr")(38,"th"),e._uU(39,"\u7c7b\u578b"),e.qZA(),e.TgZ(40,"th"),e._uU(41,"\u5b9a\u65f6"),e.qZA(),e.TgZ(42,"th"),e._uU(43,"\u6267\u884c"),e.qZA(),e.TgZ(44,"th"),e._uU(45,"\u7981\u7528"),e.qZA()()(),e.TgZ(46,"tbody"),e.YNc(47,v1,10,5,"tr",7),e.qZA()()(),e.TgZ(48,"nz-collapse-panel",10)(49,"nz-table",5,11)(51,"thead")(52,"tr")(53,"th"),e._uU(54,"\u540d\u79f0"),e.qZA(),e.TgZ(55,"th"),e._uU(56,"\u6761\u4ef6"),e.qZA(),e.TgZ(57,"th"),e._uU(58,"\u5ef6\u8fdf"),e.qZA(),e.TgZ(59,"th"),e._uU(60,"\u8d85\u65f6\u91cd\u7f6e"),e.qZA(),e.TgZ(61,"th"),e._uU(62,"\u91cd\u7f6e\u6b21\u6570"),e.qZA(),e.TgZ(63,"th"),e._uU(64,"\u6267\u884c\u547d\u4ee4"),e.qZA(),e.TgZ(65,"th"),e._uU(66,"\u7981\u7528"),e.qZA()()(),e.TgZ(67,"tbody"),e.YNc(68,m1,15,7,"tr",7),e.qZA()()(),e.TgZ(69,"nz-collapse-panel",12)(70,"nz-table",5,13)(72,"thead")(73,"tr")(74,"th"),e._uU(75,"\u540d\u79f0"),e.qZA(),e.TgZ(76,"th"),e._uU(77,"\u6761\u4ef6"),e.qZA(),e.TgZ(78,"th"),e._uU(79,"\u5ef6\u8fdf"),e.qZA(),e.TgZ(80,"th"),e._uU(81,"\u8d85\u65f6\u91cd\u7f6e"),e.qZA(),e.TgZ(82,"th"),e._uU(83,"\u91cd\u7f6e\u6b21\u6570"),e.qZA(),e.TgZ(84,"th"),e._uU(85,"\u4ee3\u7801"),e.qZA(),e.TgZ(86,"th"),e._uU(87,"\u5185\u5bb9"),e.qZA(),e.TgZ(88,"th"),e._uU(89,"\u7b49\u7ea7"),e.qZA(),e.TgZ(90,"th"),e._uU(91,"\u7981\u7528"),e.qZA()()(),e.TgZ(92,"tbody"),e.YNc(93,_1,19,9,"tr",7),e.qZA()()(),e.TgZ(94,"nz-collapse-panel",14)(95,"nz-table",5,15)(97,"thead")(98,"tr")(99,"th"),e._uU(100,"\u7c7b\u578b"),e.qZA(),e.TgZ(101,"th"),e._uU(102,"\u76ee\u6807"),e.qZA(),e.TgZ(103,"th"),e._uU(104,"\u53d8\u91cf"),e.qZA(),e.TgZ(105,"th"),e._uU(106,"\u8868\u8fbe\u5f0f"),e.qZA()()(),e.TgZ(107,"tbody"),e.YNc(108,y1,9,4,"tr",7),e.qZA()()()()(),e.TgZ(109,"nz-tab",16),e.YNc(110,Fv,1,1,"ng-template",17),e.qZA()(),e.YNc(111,Cc,8,3,"ng-template",null,18,e.W1O)),2&s){const _=e.MAs(24),w=e.MAs(35),me=e.MAs(50),Re=e.MAs(71),at=e.MAs(96),ft=e.MAs(112);e.Q6J("nzTabBarExtraContent",ft),e.xp6(8),e.Oqu(d.data.id),e.xp6(4),e.Oqu(d.data.name),e.xp6(4),e.Oqu(d.data.version),e.xp6(4),e.Oqu(e.lcZ(21,20,d.data.created)),e.xp6(3),e.Q6J("nzData",d.data.products)("nzFrontPagination",!1),e.xp6(9),e.Q6J("ngForOf",_.data),e.xp6(2),e.Q6J("nzData",d.data.jobs)("nzFrontPagination",!1),e.xp6(13),e.Q6J("ngForOf",w.data),e.xp6(2),e.Q6J("nzData",d.data.strategies)("nzFrontPagination",!1),e.xp6(19),e.Q6J("ngForOf",me.data),e.xp6(2),e.Q6J("nzData",d.data.alarms)("nzFrontPagination",!1),e.xp6(23),e.Q6J("ngForOf",Re.data),e.xp6(2),e.Q6J("nzData",d.data.aggregators)("nzFrontPagination",!1),e.xp6(13),e.Q6J("ngForOf",at.data)}},directives:[Wn.xH,Wn.xw,Zn.yH,Zn.Zv,Jr.n_,Jr.AA,et.N8,et.Om,et.$Z,et.Uo,et._C,et.p0,k.sg,k.O5,Wn.cj,Lv,K.Ls,Ce.w,tn.g,ae.Z,Me.yS],pipes:[fr.i,Rv],styles:[""]}),g})();function ew(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",8),e.NdJ("dblclick",function(){const w=e.CHM(s).$implicit;return e.oxw().open(w)}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"a",9),e._uU(7),e.qZA()(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td",10),e.ALo(11,"dateString"),e._uU(12),e.ALo(13,"fromNow"),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td")(17,"a",9),e._uU(18,"\u8be6\u60c5"),e.qZA(),e._UZ(19,"nz-divider",11),e.TgZ(20,"a",9),e._uU(21,"\u7f16\u8f91"),e.qZA(),e._UZ(22,"nz-divider",11),e.TgZ(23,"a",12),e._uU(24," \u66f4\u591a "),e._UZ(25,"i",13),e.qZA(),e.TgZ(26,"nz-dropdown-menu",null,14)(28,"ul",15)(29,"li",16),e.NdJ("click",function(){const w=e.CHM(s).$implicit;return e.oxw().enable(w)}),e._uU(30,"\u542f\u7528"),e.qZA(),e.TgZ(31,"li",17),e.NdJ("nzOnConfirm",function(){const w=e.CHM(s).$implicit;return e.oxw().disable(w)}),e._uU(32,"\u7981\u7528 "),e.qZA(),e.TgZ(33,"li",18),e.NdJ("nzOnConfirm",function(){const _=e.CHM(s),w=_.$implicit,me=_.index;return e.oxw().remove(w,me)}),e._uU(34,"\u5220\u9664"),e.qZA()()()()()}if(2&g){const s=x.$implicit,d=e.MAs(27);e.xp6(2),e.Oqu(s.id),e.xp6(2),e.AsE("",s.disabled?"\u274c":"","",s.name,""),e.xp6(2),e.Q6J("routerLink","/admin/tunnel/detail/"+s.tunnel_id),e.xp6(1),e.Oqu(s.tunnel||s.tunnel_id),e.xp6(2),e.Oqu(s.station),e.xp6(1),e.Q6J("title",e.lcZ(11,14,s.created)),e.xp6(2),e.Oqu(e.lcZ(13,16,s.created)),e.xp6(3),e.Oqu(s.running?"\u542f\u52a8":"\u5173\u95ed"),e.xp6(2),e.Q6J("routerLink","/admin/device/detail/"+s.id),e.xp6(3),e.Q6J("routerLink","/admin/device/edit/"+s.id),e.xp6(3),e.Q6J("nzDropdownMenu",d),e.xp6(6),e.Q6J("nzDisabled",!s.disabled),e.xp6(2),e.Q6J("nzDisabled",s.disabled)}}let tw=(()=>{class g{constructor(s,d,_){this.router=s,this.rs=d,this.ms=_,this.id="",this.datum=[],this.loading=!1,this.total=1,this.pageSize=20,this.pageIndex=1,this.params={filter:{}}}ngOnInit(){}search(s){this.pageIndex=1,this.params.skip=0,s?this.params.keyword={name:s}:delete this.params.keyword,this.load()}onQuery(s){(0,sr.F)(s,this.params),this.load()}load(){this.loading=!0,this.params.filter.product_id=this.id,this.rs.post("device/list",this.params).subscribe(s=>{console.log("res",s),this.datum=s.data,this.total=s.total}).add(()=>{this.loading=!1})}create(){this.router.navigate(["admin/device/create"],{state:{product_id:this.id}})}open(s){this.router.navigate(["/admin/device/detail/"+s.id])}remove(s,d){this.rs.get(`device/${s.id}/delete`).subscribe(_=>{this.datum.splice(d,1)})}enable(s){this.rs.get(`device/${s.id}/enable`).subscribe(d=>{s.disabled=!1})}disable(s){this.rs.get(`device/${s.id}/disable`).subscribe(d=>{s.disabled=!0})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.F0),e.Y36(Fe.s),e.Y36(Ln.Sf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-product-device"]],inputs:{id:"id"},decls:20,vars:11,consts:[[3,"loading","create","refresh","search"],["nzSize","small",3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzQueryParams"],["nzColumnKey","id",3,"nzSortFn"],["nzColumnKey","name",3,"nzSortFn"],["nzColumnKey","tunnel_id"],["nzColumnKey","station"],["nzWidth","100"],[3,"dblclick",4,"ngFor","ngForOf"],[3,"dblclick"],[3,"routerLink"],[3,"title"],["nzType","vertical"],["nz-dropdown","","nzTrigger","click",3,"nzDropdownMenu"],["nz-icon","","nzType","down"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"nzDisabled","click"],["nz-menu-item","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u7981\u7528\uff1f",3,"nzDisabled","nzOnConfirm"],["nz-menu-item","","nzDanger","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664\uff1f",3,"nzOnConfirm"]],template:function(s,d){1&s&&(e.TgZ(0,"app-page-list",0),e.NdJ("create",function(){return d.create()})("refresh",function(){return d.load()})("search",function(w){return d.search(w)}),e.TgZ(1,"nz-table",1),e.NdJ("nzQueryParams",function(w){return d.onQuery(w)}),e.TgZ(2,"thead")(3,"tr")(4,"th",2),e._uU(5,"ID"),e.qZA(),e.TgZ(6,"th",3),e._uU(7,"\u540d\u79f0"),e.qZA(),e.TgZ(8,"th",4),e._uU(9,"\u901a\u9053"),e.qZA(),e.TgZ(10,"th",5),e._uU(11,"\u4ece\u7ad9\u53f7"),e.qZA(),e.TgZ(12,"th",2),e._uU(13,"\u521b\u5efa\u65f6\u95f4"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"\u72b6\u6001"),e.qZA(),e.TgZ(16,"th",6),e._uU(17,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,ew,35,18,"tr",7),e.qZA()()()),2&s&&(e.Q6J("loading",d.loading),e.xp6(1),e.Q6J("nzData",d.datum)("nzFrontPagination",!1)("nzLoading",d.loading)("nzTotal",d.total)("nzPageSize",d.pageSize)("nzPageIndex",d.pageIndex),e.xp6(3),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(6),e.Q6J("nzSortFn",!0),e.xp6(7),e.Q6J("ngForOf",d.datum))},directives:[Gr._,et.N8,et.Om,et.$Z,et.Uo,et._C,et.qD,et.p0,k.sg,Me.yS,tn.g,rt.Ws,rt.cm,K.Ls,Ce.w,rt.RR,he.wO,he.r9,er],pipes:[fr.i,xr.d],styles:[""]}),g})();function Pf(g,x){if(1&g&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA()()),2&g){const s=x.$implicit;e.xp6(2),e.Oqu(s.name),e.xp6(2),e.Oqu(s.label),e.xp6(2),e.Oqu(s.unit),e.xp6(2),e.Oqu(s.address),e.xp6(2),e.Oqu(s.type),e.xp6(2),e.Oqu(s.little_endian),e.xp6(2),e.Oqu(s.precision),e.xp6(2),e.Oqu(s.default)}}function xc(g,x){if(1&g&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&g){const s=e.oxw().$implicit;e.xp6(1),e.Oqu(s.interval)}}function C1(g,x){if(1&g&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"minuteFormat"),e.qZA()),2&g){const s=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,s.clock))}}function x1(g,x){if(1&g&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&g){const s=e.oxw().$implicit;e.xp6(1),e.Oqu(s.crontab)}}function T1(g,x){if(1&g&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e.YNc(4,xc,2,1,"span",19),e.YNc(5,C1,3,3,"span",19),e.YNc(6,x1,2,1,"span",19),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA()()),2&g){const s=x.$implicit;e.xp6(2),e.Oqu(s.type),e.xp6(2),e.Q6J("ngIf","interval"==s.type),e.xp6(1),e.Q6J("ngIf","clock"==s.type),e.xp6(1),e.Q6J("ngIf","crontab"==s.type),e.xp6(2),e.Oqu(s.address),e.xp6(2),e.Oqu(s.length),e.xp6(2),e.Oqu(s.disabled)}}function b1(g,x){if(1&g&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&g){const s=x.$implicit;e.xp6(2),e.Oqu(s.as),e.xp6(2),e.Oqu(s.expression)}}function kl(g,x){if(1&g&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&g){const s=x.$implicit;e.xp6(2),e.Oqu(s.name),e.xp6(2),e.Oqu(s.directives)}}function Xn(g,x){if(1&g&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA()()),2&g){const s=x.$implicit;e.xp6(2),e.Oqu(s.name),e.xp6(2),e.Oqu(s.condition),e.xp6(2),e.Oqu(s.delay),e.xp6(2),e.Oqu(s.reset_timeout),e.xp6(2),e.Oqu(s.reset_total),e.xp6(2),e.Oqu(s.code),e.xp6(2),e.Oqu(s.message),e.xp6(2),e.Oqu(s.level),e.xp6(2),e.Oqu(s.disabled)}}function S1(g,x){if(1&g&&e._UZ(0,"app-product-device",20),2&g){const s=e.oxw();e.Q6J("id",s.id)}}function Tc(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"a",21),e.NdJ("click",function(){return e.CHM(s),e.oxw().load()}),e._UZ(1,"i",22),e.qZA(),e._UZ(2,"nz-divider",23),e.TgZ(3,"a",24),e._UZ(4,"i",25),e.qZA(),e._UZ(5,"nz-divider",23),e.TgZ(6,"a",26),e._UZ(7,"i",27),e.qZA()}if(2&g){const s=e.oxw();e.xp6(1),e.Q6J("nzSpin",s.loading),e.xp6(2),e.Q6J("config",s.data),e.xp6(3),e.Q6J("routerLink","/admin/product/edit/"+s.id)}}let If=(()=>{class g{constructor(s,d){this.router=s,this.rs=d,this.id="",this.data={},this.loading=!1,this.id=s.snapshot.params.id,this.load()}ngOnInit(){}load(){this.loading=!0,this.rs.get(`product/${this.id}`).subscribe(s=>{this.data=s.data,this.loading=!1})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.gz),e.Y36(Fe.s))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-product-detail"]],decls:121,vars:24,consts:[[3,"nzTabBarExtraContent"],["nzTitle","\u4ea7\u54c1\u8be6\u60c5"],["nzHeader","\u57fa\u7840\u4fe1\u606f","nzActive",""],["nzBordered",""],["nzHeader","\u6570\u636e\u70b9","nzActive",""],["nzSize","small",3,"nzData","nzFrontPagination"],["dataPointsTable",""],[4,"ngFor","ngForOf"],["nzHeader","\u91c7\u96c6\u5668","nzActive",""],["collectorsTable",""],["nzHeader","\u516c\u5f0f\u8ba1\u7b97","nzActive",""],["calculatorsTable",""],["nzHeader","\u63a7\u5236\u547d\u4ee4","nzActive",""],["commandsTable",""],["nzHeader","\u6570\u636e\u68c0\u67e5","nzActive",""],["alarmsTable",""],["nzTitle","\u8bbe\u5907\u5b9e\u4f8b"],["nz-tab",""],["extraTemplate",""],[4,"ngIf"],[3,"id"],["title","\u5237\u65b0",3,"click"],["nz-icon","","nzType","reload",3,"nzSpin"],["nzType","vertical"],["title","\u539f\u59cb\u6570\u636e","appViewConfig","",3,"config"],["nz-icon","","nzType","profile"],["title","\u7f16\u8f91",3,"routerLink"],["nz-icon","","nzType","form"]],template:function(s,d){if(1&s&&(e.TgZ(0,"nz-tabset",0)(1,"nz-tab",1)(2,"nz-collapse")(3,"nz-collapse-panel",2)(4,"nz-list",3)(5,"nz-list-item")(6,"span"),e._uU(7,"ID"),e.qZA(),e._uU(8),e.qZA(),e.TgZ(9,"nz-list-item")(10,"span"),e._uU(11,"\u540d\u79f0"),e.qZA(),e._uU(12),e.qZA(),e.TgZ(13,"nz-list-item")(14,"span"),e._uU(15,"\u6807\u7b7e"),e.qZA(),e._uU(16),e.qZA(),e.TgZ(17,"nz-list-item")(18,"span"),e._uU(19,"\u5382\u5546"),e.qZA(),e._uU(20),e.qZA(),e.TgZ(21,"nz-list-item")(22,"span"),e._uU(23,"\u7248\u672c\u53f7"),e.qZA(),e._uU(24),e.qZA(),e.TgZ(25,"nz-list-item")(26,"span"),e._uU(27,"\u521b\u5efa\u65f6\u95f4"),e.qZA(),e._uU(28),e.ALo(29,"dateString"),e.qZA()()(),e.TgZ(30,"nz-collapse-panel",4)(31,"nz-table",5,6)(33,"thead")(34,"tr")(35,"th"),e._uU(36,"\u53d8\u91cf"),e.qZA(),e.TgZ(37,"th"),e._uU(38,"\u540d\u79f0"),e.qZA(),e.TgZ(39,"th"),e._uU(40,"\u5355\u4f4d"),e.qZA(),e.TgZ(41,"th"),e._uU(42,"\u5730\u5740"),e.qZA(),e.TgZ(43,"th"),e._uU(44,"\u7c7b\u578b"),e.qZA(),e.TgZ(45,"th"),e._uU(46,"\u5c0f\u7aef\u6a21\u5f0f"),e.qZA(),e.TgZ(47,"th"),e._uU(48,"\u5c0f\u6570\u70b9\u4f4d"),e.qZA(),e.TgZ(49,"th"),e._uU(50,"\u9ed8\u8ba4\u503c"),e.qZA()()(),e.TgZ(51,"tbody"),e.YNc(52,Pf,17,8,"tr",7),e.qZA()()(),e.TgZ(53,"nz-collapse-panel",8)(54,"nz-table",5,9)(56,"thead")(57,"tr")(58,"th"),e._uU(59,"\u7c7b\u578b"),e.qZA(),e.TgZ(60,"th"),e._uU(61,"\u5b9a\u65f6"),e.qZA(),e.TgZ(62,"th"),e._uU(63,"\u5730\u5740"),e.qZA(),e.TgZ(64,"th"),e._uU(65,"\u957f\u5ea6"),e.qZA(),e.TgZ(66,"th"),e._uU(67,"\u7981\u7528"),e.qZA()()(),e.TgZ(68,"tbody"),e.YNc(69,T1,13,7,"tr",7),e.qZA()()(),e.TgZ(70,"nz-collapse-panel",10)(71,"nz-table",5,11)(73,"thead")(74,"tr")(75,"th"),e._uU(76,"\u53d8\u91cf"),e.qZA(),e.TgZ(77,"th"),e._uU(78,"\u8868\u8fbe\u5f0f"),e.qZA()()(),e.TgZ(79,"tbody"),e.YNc(80,b1,5,2,"tr",7),e.qZA()()(),e.TgZ(81,"nz-collapse-panel",12)(82,"nz-table",5,13)(84,"thead")(85,"tr")(86,"th"),e._uU(87,"\u547d\u4ee4"),e.qZA(),e.TgZ(88,"th"),e._uU(89,"\u6307\u4ee4"),e.qZA()()(),e.TgZ(90,"tbody"),e.YNc(91,kl,5,2,"tr",7),e.qZA()()(),e.TgZ(92,"nz-collapse-panel",14)(93,"nz-table",5,15)(95,"thead")(96,"tr")(97,"th"),e._uU(98,"\u540d\u79f0"),e.qZA(),e.TgZ(99,"th"),e._uU(100,"\u6761\u4ef6"),e.qZA(),e.TgZ(101,"th"),e._uU(102,"\u5ef6\u8fdf"),e.qZA(),e.TgZ(103,"th"),e._uU(104,"\u8d85\u65f6\u91cd\u7f6e"),e.qZA(),e.TgZ(105,"th"),e._uU(106,"\u91cd\u7f6e\u6b21\u6570"),e.qZA(),e.TgZ(107,"th"),e._uU(108,"\u4ee3\u7801"),e.qZA(),e.TgZ(109,"th"),e._uU(110,"\u5185\u5bb9"),e.qZA(),e.TgZ(111,"th"),e._uU(112,"\u7b49\u7ea7"),e.qZA(),e.TgZ(113,"th"),e._uU(114,"\u7981\u7528"),e.qZA()()(),e.TgZ(115,"tbody"),e.YNc(116,Xn,19,9,"tr",7),e.qZA()()()()(),e.TgZ(117,"nz-tab",16),e.YNc(118,S1,1,1,"ng-template",17),e.qZA()(),e.YNc(119,Tc,8,3,"ng-template",null,18,e.W1O)),2&s){const _=e.MAs(32),w=e.MAs(55),me=e.MAs(72),Re=e.MAs(83),at=e.MAs(94),ft=e.MAs(120);e.Q6J("nzTabBarExtraContent",ft),e.xp6(8),e.Oqu(d.data.id),e.xp6(4),e.Oqu(d.data.name),e.xp6(4),e.Oqu(null==d.data.tags?null:d.data.tags.join(",")),e.xp6(4),e.Oqu(d.data.manufacturer),e.xp6(4),e.Oqu(d.data.version),e.xp6(4),e.Oqu(e.lcZ(29,22,d.data.created)),e.xp6(3),e.Q6J("nzData",d.data.points)("nzFrontPagination",!1),e.xp6(21),e.Q6J("ngForOf",_.data),e.xp6(2),e.Q6J("nzData",d.data.pollers)("nzFrontPagination",!1),e.xp6(15),e.Q6J("ngForOf",w.data),e.xp6(2),e.Q6J("nzData",d.data.calculators)("nzFrontPagination",!1),e.xp6(9),e.Q6J("ngForOf",me.data),e.xp6(2),e.Q6J("nzData",d.data.commands)("nzFrontPagination",!1),e.xp6(9),e.Q6J("ngForOf",Re.data),e.xp6(2),e.Q6J("nzData",d.data.alarms)("nzFrontPagination",!1),e.xp6(23),e.Q6J("ngForOf",at.data)}},directives:[Wn.xH,Wn.xw,Zn.yH,Zn.Zv,Jr.n_,Jr.AA,et.N8,et.Om,et.$Z,et.Uo,et._C,et.p0,k.sg,k.O5,Wn.cj,tw,K.Ls,Ce.w,tn.g,ae.Z,Me.yS],pipes:[fr.i,Rv],styles:[""]}),g})();var _i=J(2340),z1=J(2313);const bc=["read"];let Bv=(()=>{class g{constructor(s,d,_){this.router=s,this.rs=d,this.san=_,this.id=0,this.text="",this.isHex=!1,this.crlf=!1,this.id=parseInt(s.snapshot.params.id)}watch(){const d=_i.N.production?location.origin.replace(/^http/,"ws"):"ws://localhost:8080";this.ws=new WebSocket(`${d}/api/tunnel/${this.id}/watch`),this.ws.onmessage=_=>{console.log("websocket onmessage",_.data);const w=JSON.parse(_.data),me=document.createElement("div"),Re=new Date,at=document.createElement("span");at.append(Re.toTimeString().substr(0,8)),at.style.margin="5px 10px";const ft=document.createElement("span");if(ft.append(w.event),ft.style.margin="5px 10px",me.append(at,ft),w.data){const xt=document.createElement("span");xt.append("<",w.data,">"),xt.style.margin="5px 10px",me.append(xt)}if(this.read){const xt=this.read.nativeElement;xt.appendChild(me),xt.scrollTop=xt.scrollHeight}},this.ws.onerror=_=>{console.log("websocket onerror",_)},this.ws.onclose=_=>{console.log("websocket onclose",_)}}ngOnInit(){console.log("init"),this.watch()}ngOnDestroy(){var s;null===(s=this.ws)||void 0===s||s.close()}send(){var s;null===(s=this.ws)||void 0===s||s.send(JSON.stringify({type:"write",isHex:this.isHex,data:this.crlf?this.text+"\r\n":this.text}))}clear(){var s;null===(s=this.read)||void 0===s||(s.nativeElement.innerHTML="")}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.gz),e.Y36(Fe.s),e.Y36(z1.H7))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-tunnel-monitor"]],viewQuery:function(s,d){if(1&s&&e.Gf(bc,5),2&s){let _;e.iGM(_=e.CRH())&&(d.read=_.first)}},decls:13,vars:4,consts:[["nz-input","","placeholder","\u53d1\u9001\u6570\u636e",3,"ngModel","ngModelChange"],["nz-checkbox","",3,"ngModel","ngModelChange"],["type","button","nz-button","",3,"click"],[1,"data"],["read",""],[3,"href"]],template:function(s,d){1&s&&(e.TgZ(0,"textarea",0),e.NdJ("ngModelChange",function(w){return d.text=w}),e.qZA(),e.TgZ(1,"label",1),e.NdJ("ngModelChange",function(w){return d.isHex=w}),e._uU(2,"HEX"),e.qZA(),e.TgZ(3,"label",1),e.NdJ("ngModelChange",function(w){return d.crlf=w}),e._uU(4,"\u81ea\u52a8\u6dfb\u52a0\u6362\u884c\u56de\u8f66(\\r\\n)"),e.qZA(),e.TgZ(5,"button",2),e.NdJ("click",function(){return d.send()}),e._uU(6,"\u53d1\u9001"),e.qZA(),e._UZ(7,"div",3,4),e.TgZ(9,"button",2),e.NdJ("click",function(){return d.clear()}),e._uU(10,"\u6e05\u7a7a"),e.qZA(),e.TgZ(11,"a",5),e._uU(12,"\u865a\u62df\u4e32\u53e3\u900f\u4f20"),e.qZA()),2&s&&(e.Q6J("ngModel",d.text),e.xp6(1),e.Q6J("ngModel",d.isHex),e.xp6(2),e.Q6J("ngModel",d.crlf),e.xp6(8),e.Q6J("href",d.transfer,e.LSH))},directives:[Ae.Zp,M.Fj,M.JJ,M.On,hs.Ie,xn.ix,Rn.dQ,Ce.w],styles:[".data[_ngcontent-%COMP%]{background-color:green;min-height:100px;max-height:300px;overflow:auto}"]}),g})();function w1(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",9),e.NdJ("dblclick",function(){const w=e.CHM(s).$implicit;return e.oxw().open(w)}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"a",10),e._uU(5),e.qZA()(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td",11),e.ALo(11,"dateString"),e._uU(12),e.ALo(13,"fromNow"),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td")(17,"a",10),e._uU(18,"\u8be6\u60c5"),e.qZA(),e._UZ(19,"nz-divider",12),e.TgZ(20,"a",10),e._uU(21,"\u7f16\u8f91"),e.qZA(),e._UZ(22,"nz-divider",12),e.TgZ(23,"a",13),e._uU(24," \u66f4\u591a "),e._UZ(25,"i",14),e.qZA(),e.TgZ(26,"nz-dropdown-menu",null,15)(28,"ul",16)(29,"li",17),e.NdJ("click",function(){const w=e.CHM(s).$implicit;return e.oxw().enable(w)}),e._uU(30,"\u542f\u7528"),e.qZA(),e.TgZ(31,"li",18),e.NdJ("nzOnConfirm",function(){const w=e.CHM(s).$implicit;return e.oxw().disable(w)}),e._uU(32,"\u7981\u7528 "),e.qZA(),e.TgZ(33,"li",19),e.NdJ("nzOnConfirm",function(){const _=e.CHM(s),w=_.$implicit,me=_.index;return e.oxw().remove(w,me)}),e._uU(34,"\u5220\u9664"),e.qZA()()()()()}if(2&g){const s=x.$implicit,d=e.MAs(27);e.xp6(2),e.Oqu(s.id),e.xp6(2),e.Q6J("routerLink","/admin/tunnel/detail/"+s.tunnel_id),e.xp6(1),e.Oqu(s.tunnel||s.tunnel_id),e.xp6(2),e.AsE("",s.disabled?"\u274c":"","",s.name,""),e.xp6(2),e.Oqu(s.port),e.xp6(1),e.Q6J("title",e.lcZ(11,14,s.created)),e.xp6(2),e.Oqu(e.lcZ(13,16,s.created)),e.xp6(3),e.Oqu(s.running?"\u5728\u7ebf":"\u79bb\u7ebf"),e.xp6(2),e.Q6J("routerLink","/admin/transfer/detail/"+s.id),e.xp6(3),e.Q6J("routerLink","/admin/transfer/edit/"+s.id),e.xp6(3),e.Q6J("nzDropdownMenu",d),e.xp6(6),e.Q6J("nzDisabled",!s.disabled),e.xp6(2),e.Q6J("nzDisabled",s.disabled)}}let D1=(()=>{class g{constructor(s,d,_){this.router=s,this.rs=d,this.ms=_,this.datum=[],this.loading=!1,this.total=1,this.pageSize=20,this.pageIndex=1,this.params={filter:{}}}ngOnInit(){}search(s){this.pageIndex=1,this.params.skip=0,s?this.params.keyword={name:s,addr:s}:delete this.params.keyword,this.load()}onQuery(s){(0,sr.F)(s,this.params),this.load()}load(){this.loading=!0,this.rs.post("transfer/list",this.params).subscribe(s=>{console.log("res",s),this.datum=s.data,this.total=s.total}).add(()=>{this.loading=!1})}create(){this.router.navigate(["admin/transfer/create"])}open(s){this.router.navigate(["/admin/transfer/detail/"+s.id])}remove(s,d){this.rs.get(`transfer/${s.id}/delete`).subscribe(_=>{this.datum.splice(d,1)})}enable(s){this.rs.get(`transfer/${s.id}/enable`).subscribe(d=>{s.disabled=!1})}disable(s){this.rs.get(`transfer/${s.id}/disable`).subscribe(d=>{s.disabled=!0})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.F0),e.Y36(Fe.s),e.Y36(Ln.Sf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-transfer"]],decls:20,vars:13,consts:[[3,"loading","create","refresh","search"],["nzSize","small",3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzQueryParams"],["nzColumnKey","id",3,"nzSortFn"],["nzColumnKey","tunnel_id",3,"nzSortFn"],["nzColumnKey","name",3,"nzSortFn"],["nzColumnKey","port",3,"nzSortFn"],["nzColumnKey","created",3,"nzSortFn"],["nzWidth","100"],[3,"dblclick",4,"ngFor","ngForOf"],[3,"dblclick"],[3,"routerLink"],[3,"title"],["nzType","vertical"],["nz-dropdown","","nzTrigger","click",3,"nzDropdownMenu"],["nz-icon","","nzType","down"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"nzDisabled","click"],["nz-menu-item","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u7981\u7528\uff1f",3,"nzDisabled","nzOnConfirm"],["nz-menu-item","","nzDanger","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664\uff1f",3,"nzOnConfirm"]],template:function(s,d){1&s&&(e.TgZ(0,"app-page-list",0),e.NdJ("create",function(){return d.create()})("refresh",function(){return d.load()})("search",function(w){return d.search(w)}),e.TgZ(1,"nz-table",1),e.NdJ("nzQueryParams",function(w){return d.onQuery(w)}),e.TgZ(2,"thead")(3,"tr")(4,"th",2),e._uU(5,"ID"),e.qZA(),e.TgZ(6,"th",3),e._uU(7,"\u901a\u9053"),e.qZA(),e.TgZ(8,"th",4),e._uU(9,"\u540d\u79f0"),e.qZA(),e.TgZ(10,"th",5),e._uU(11,"\u7aef\u53e3"),e.qZA(),e.TgZ(12,"th",6),e._uU(13,"\u521b\u5efa\u65f6\u95f4"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"\u72b6\u6001"),e.qZA(),e.TgZ(16,"th",7),e._uU(17,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,w1,35,18,"tr",8),e.qZA()()()),2&s&&(e.Q6J("loading",d.loading),e.xp6(1),e.Q6J("nzData",d.datum)("nzFrontPagination",!1)("nzLoading",d.loading)("nzTotal",d.total)("nzPageSize",d.pageSize)("nzPageIndex",d.pageIndex),e.xp6(3),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(7),e.Q6J("ngForOf",d.datum))},directives:[Gr._,et.N8,et.Om,et.$Z,et.Uo,et._C,et.qD,et.p0,k.sg,Me.yS,tn.g,rt.Ws,rt.cm,K.Ls,Ce.w,rt.RR,he.wO,he.r9,er],pipes:[fr.i,xr.d],styles:[""]}),g})();function kf(g,x){if(1&g&&e._UZ(0,"app-event",8),2&g){const s=e.oxw();e.Q6J("id",s.id)}}function Zv(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"a",9),e.NdJ("click",function(){return e.CHM(s),e.oxw().load()}),e._UZ(1,"i",10),e.qZA(),e._UZ(2,"nz-divider",11),e.TgZ(3,"a",12),e._UZ(4,"i",13),e.qZA(),e._UZ(5,"nz-divider",11),e.TgZ(6,"a",14),e._UZ(7,"i",15),e.qZA()}if(2&g){const s=e.oxw();e.xp6(1),e.Q6J("nzSpin",s.loading),e.xp6(2),e.Q6J("config",s.data),e.xp6(3),e.Q6J("routerLink","/admin/transfer/edit/"+s.id)}}let A1=(()=>{class g{constructor(s,d,_){this.router=s,this.rs=d,this.ms=_,this.id=0,this.data={},this.loading=!1,this.id=parseInt(s.snapshot.params.id),this.load()}ngOnInit(){}load(){this.loading=!0,this.rs.get(`transfer/${this.id}`).subscribe(s=>{this.data=s.data,this.loading=!1})}onEnableChange(s){s?this.ms.confirm({nzTitle:"\u63d0\u793a",nzContent:"\u786e\u8ba4\u7981\u7528\u5417?",nzOnOk:()=>{this.rs.get(`transfer/${this.id}/disable`).subscribe(d=>{})},nzOnCancel:()=>{this.data.disabled=!1}}):this.rs.get(`transfer/${this.id}/enable`).subscribe(d=>{})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.gz),e.Y36(Fe.s),e.Y36(Ln.Sf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-transfer-detail"]],decls:33,vars:10,consts:[[3,"nzTabBarExtraContent"],["nzTitle","\u900f\u4f20\u8be6\u60c5"],["nzBordered",""],[3,"routerLink"],[3,"ngModel","ngModelChange"],["nzTitle","\u65e5\u5fd7"],["nz-tab",""],["extraTemplate",""],["type","transfer",3,"id"],["title","\u5237\u65b0",3,"click"],["nz-icon","","nzType","reload",3,"nzSpin"],["nzType","vertical"],["title","\u539f\u59cb\u6570\u636e","appViewConfig","",3,"config"],["nz-icon","","nzType","profile"],["title","\u7f16\u8f91",3,"routerLink"],["nz-icon","","nzType","form"]],template:function(s,d){if(1&s&&(e.TgZ(0,"nz-tabset",0)(1,"nz-tab",1)(2,"nz-list",2)(3,"nz-list-item")(4,"span"),e._uU(5,"\u540d\u79f0"),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"nz-list-item")(8,"span"),e._uU(9,"\u901a\u9053"),e.qZA(),e.TgZ(10,"a",3),e._uU(11),e.qZA()(),e.TgZ(12,"nz-list-item")(13,"span"),e._uU(14,"\u7aef\u53e3"),e.qZA(),e._uU(15),e.qZA(),e.TgZ(16,"nz-list-item")(17,"span"),e._uU(18,"\u72b6\u6001"),e.qZA(),e._uU(19),e.qZA(),e.TgZ(20,"nz-list-item")(21,"span"),e._uU(22,"\u7981\u7528"),e.qZA(),e.TgZ(23,"nz-switch",4),e.NdJ("ngModelChange",function(w){return d.onEnableChange(w)}),e.qZA()(),e.TgZ(24,"nz-list-item")(25,"span"),e._uU(26,"\u521b\u5efa\u65f6\u95f4"),e.qZA(),e._uU(27),e.ALo(28,"dateString"),e.qZA()()(),e.TgZ(29,"nz-tab",5),e.YNc(30,kf,1,1,"ng-template",6),e.qZA()(),e.YNc(31,Zv,8,3,"ng-template",null,7,e.W1O)),2&s){const _=e.MAs(32);e.Q6J("nzTabBarExtraContent",_),e.xp6(6),e.Oqu(d.data.name),e.xp6(4),e.Q6J("routerLink","/admin/tunnel/detail/"+d.data.tunnel_id),e.xp6(1),e.Oqu(d.data.tunnel||d.data.tunnel_id),e.xp6(4),e.Oqu(d.data.port),e.xp6(4),e.Oqu(d.data.running?"\u542f\u52a8":"\u505c\u6b62"),e.xp6(4),e.Q6J("ngModel",d.data.disabled),e.xp6(4),e.Oqu(e.lcZ(28,8,d.data.created))}},directives:[Wn.xH,Wn.xw,Jr.n_,Jr.AA,Me.yS,ge.i,M.JJ,M.On,Wn.cj,pe.B,K.Ls,Ce.w,tn.g,ae.Z],pipes:[fr.i],styles:[""]}),g})(),Js=(()=>{class g{constructor(s,d,_,w,me){this.fb=s,this.route=d,this.router=_,this.rs=w,this.message=me,this.submitting=!1,this.basicForm=new M.cw({}),this.data={name:"\u65b0\u5efa\u900f\u4f20",tunnel_id:0,port:1843,disabled:!1},this.id=d.snapshot.paramMap.get("id"),this.id&&this.load(),this.buildForm()}buildForm(){this.basicForm=this.fb.group({name:[this.data.name,[M.kI.required]],tunnel_id:[this.data.tunnel_id,[M.kI.required]],port:[this.data.port,[M.kI.required]],disabled:[this.data.disabled,[]]})}ngOnInit(){}load(){this.rs.get("transfer/"+this.id).subscribe(s=>{this.data=s.data,this.buildForm()})}submit(){this.submitting=!0,this.rs.post(this.id?"transfer/"+this.id:"transfer/create",this.basicForm.value).subscribe(d=>{this.message.success("\u63d0\u4ea4\u6210\u529f"),this.router.navigate(["/admin/transfer/detail/"+d.data.id])}).add(()=>{this.submitting=!1})}change(){this.data=this.basicForm.value}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu),e.Y36(Me.gz),e.Y36(Me.F0),e.Y36(Fe.s),e.Y36(ot.dD))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-transfer-edit"]],decls:23,vars:13,consts:[[3,"ngModel","submitting","ngModelChange","submit"],[3,"formGroup","change"],["nzHeader","\u57fa\u672c\u4fe1\u606f","nzActive",""],[3,"nzSpan"],["nzErrorTip","",3,"nzSpan"],["nz-input","","formControlName","name","max","40","required",""],["formControlName","tunnel_id"],["formControlName","port","nzPlaceHolder","TCP\u76d1\u542c\u7aef\u53e3\uff0c\u8bf7\u6ce8\u610f\u907f\u514d\u7aef\u53e3\u51b2\u7a81",3,"nzMin","nzMax"],["formControlName","disabled"]],template:function(s,d){1&s&&(e.TgZ(0,"app-editor",0),e.NdJ("ngModelChange",function(w){return d.data=w})("ngModelChange",function(w){return d.basicForm.patchValue(w)})("submit",function(){return d.submit()}),e.TgZ(1,"nz-collapse",1),e.NdJ("change",function(){return d.change()}),e.TgZ(2,"nz-collapse-panel",2)(3,"nz-form-item")(4,"nz-form-label",3),e._uU(5,"\u540d\u79f0"),e.qZA(),e.TgZ(6,"nz-form-control",4),e._UZ(7,"input",5),e.qZA()(),e.TgZ(8,"nz-form-item")(9,"nz-form-label",3),e._uU(10,"\u901a\u9053"),e.qZA(),e.TgZ(11,"nz-form-control",4),e._UZ(12,"app-choose-tunnel",6),e.qZA()(),e.TgZ(13,"nz-form-item")(14,"nz-form-label",3),e._uU(15,"\u7aef\u53e3"),e.qZA(),e.TgZ(16,"nz-form-control",4),e._UZ(17,"nz-input-number",7),e.qZA()(),e.TgZ(18,"nz-form-item")(19,"nz-form-label",3),e._uU(20,"\u7981\u7528"),e.qZA(),e.TgZ(21,"nz-form-control",4),e._UZ(22,"nz-switch",8),e.qZA()()()()()),2&s&&(e.Q6J("ngModel",d.data)("submitting",d.submitting),e.xp6(1),e.Q6J("formGroup",d.basicForm),e.xp6(3),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(3),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(3),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(1),e.Q6J("nzMin",100)("nzMax",65535),e.xp6(2),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12))},directives:[Mr,M.JJ,M.On,Zn.yH,M.JL,M.sg,Zn.Zv,yn.SK,le.Nx,yn.t3,le.iK,le.Fd,Ae.Zp,M.Fj,M.u,M.Q7,Cl,vt,ge.i],styles:[""]}),g})(),Uv=(()=>{class g{constructor(){}ngOnInit(){}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-component"]],decls:2,vars:0,template:function(s,d){1&s&&(e.TgZ(0,"p"),e._uU(1,"component works!"),e.qZA())},styles:[""]}),g})();function ko(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",7),e.NdJ("dblclick",function(){const w=e.CHM(s).$implicit;return e.oxw().open(w)}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td",8),e.ALo(8,"dateString"),e._uU(9),e.ALo(10,"fromNow"),e.qZA(),e.TgZ(11,"td")(12,"a",9),e._uU(13,"\u8be6\u60c5"),e.qZA(),e._UZ(14,"nz-divider",10),e.TgZ(15,"a",9),e._uU(16,"\u7f16\u8f91"),e.qZA(),e._UZ(17,"nz-divider",10),e.TgZ(18,"a",11),e._uU(19," \u66f4\u591a "),e._UZ(20,"i",12),e.qZA(),e.TgZ(21,"nz-dropdown-menu",null,13)(23,"ul",14)(24,"li",15),e.NdJ("nzOnConfirm",function(){const _=e.CHM(s),w=_.$implicit,me=_.index;return e.oxw().remove(w,me)}),e._uU(25,"\u5220\u9664"),e.qZA()()()()()}if(2&g){const s=x.$implicit,d=e.MAs(22);e.xp6(2),e.Oqu(s.id),e.xp6(2),e.Oqu(s.name),e.xp6(2),e.AsE("",s.width," x ",s.height,""),e.xp6(1),e.Q6J("title",e.lcZ(8,9,s.created)),e.xp6(2),e.Oqu(e.lcZ(10,11,s.created)),e.xp6(3),e.Q6J("routerLink","/admin/hmi/detail/"+s.id),e.xp6(3),e.Q6J("routerLink","/admin/hmi-edit/"+s.id),e.xp6(3),e.Q6J("nzDropdownMenu",d)}}let E1=(()=>{class g{constructor(s,d){this.router=s,this.rs=d,this.datum=[],this.loading=!1,this.total=1,this.pageSize=20,this.pageIndex=1,this.params={filter:{}}}ngOnInit(){}search(s){this.pageIndex=1,this.params.skip=0,s?this.params.keyword={name:s}:delete this.params.keyword,this.load()}onQuery(s){(0,sr.F)(s,this.params),this.load()}load(){this.loading=!0,this.rs.post("hmi/list",this.params).subscribe(s=>{console.log("res",s),this.datum=s.data,this.total=s.total}).add(()=>{this.loading=!1})}create(){this.router.navigate(["admin/hmi-create"])}open(s){this.router.navigate(["/admin/hmi/detail/"+s.id])}remove(s,d){this.rs.get(`hmi/${s.id}/delete`).subscribe(_=>{this.datum.splice(d,1)})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.F0),e.Y36(Fe.s))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-hmi"]],decls:16,vars:11,consts:[[3,"loading","create","refresh","search"],["nzSize","small",3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzQueryParams"],["nzColumnKey","id",3,"nzSortFn"],["nzColumnKey","name",3,"nzSortFn"],["nzColumnKey","created",3,"nzSortFn"],["nzWidth","100"],[3,"dblclick",4,"ngFor","ngForOf"],[3,"dblclick"],[3,"title"],[3,"routerLink"],["nzType","vertical"],["nz-dropdown","","nzTrigger","click",3,"nzDropdownMenu"],["nz-icon","","nzType","down"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","","nzDanger","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664\uff1f",3,"nzOnConfirm"]],template:function(s,d){1&s&&(e.TgZ(0,"app-page-list",0),e.NdJ("create",function(){return d.create()})("refresh",function(){return d.load()})("search",function(w){return d.search(w)}),e.TgZ(1,"nz-table",1),e.NdJ("nzQueryParams",function(w){return d.onQuery(w)}),e.TgZ(2,"thead")(3,"tr")(4,"th",2),e._uU(5,"ID"),e.qZA(),e.TgZ(6,"th",3),e._uU(7,"\u540d\u79f0"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"\u5c3a\u5bf8"),e.qZA(),e.TgZ(10,"th",4),e._uU(11,"\u521b\u5efa\u65f6\u95f4"),e.qZA(),e.TgZ(12,"th",5),e._uU(13,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(14,"tbody"),e.YNc(15,ko,26,13,"tr",6),e.qZA()()()),2&s&&(e.Q6J("loading",d.loading),e.xp6(1),e.Q6J("nzData",d.datum)("nzFrontPagination",!1)("nzLoading",d.loading)("nzTotal",d.total)("nzPageSize",d.pageSize)("nzPageIndex",d.pageIndex),e.xp6(3),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(4),e.Q6J("nzSortFn",!0),e.xp6(5),e.Q6J("ngForOf",d.datum))},directives:[Gr._,et.N8,et.Om,et.$Z,et.Uo,et._C,et.qD,et.p0,k.sg,Me.yS,tn.g,rt.Ws,rt.cm,K.Ls,Ce.w,rt.RR,he.wO,he.r9,er],pipes:[fr.i,xr.d],styles:[""]}),g})();var M1=J(3973);function Lf(g,x){1&g&&e._uU(0," \u3010\u5f85\u5b9e\u73b0\u3011 ")}function O1(g,x){1&g&&e._uU(0," \u3010\u5f85\u5b9e\u73b0\u3011 ")}function Vv(g,x){1&g&&e._uU(0," \u3010\u5f85\u5b9e\u73b0\u3011 ")}function P1(g,x){1&g&&e._uU(0," \u3010\u5f85\u5b9e\u73b0\u3011 ")}function I1(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"a",10),e.NdJ("click",function(){return e.CHM(s),e.oxw().load()}),e._UZ(1,"i",11),e.qZA(),e._UZ(2,"nz-divider",12),e.TgZ(3,"a",13),e._UZ(4,"i",14),e.qZA(),e._UZ(5,"nz-divider",12),e.TgZ(6,"a",15),e._UZ(7,"i",16),e.qZA()}if(2&g){const s=e.oxw();e.xp6(1),e.Q6J("nzSpin",s.loading),e.xp6(2),e.Q6J("config",s.data),e.xp6(3),e.Q6J("routerLink","/admin/hmi-edit/"+s.id)}}let k1=(()=>{class g{constructor(s,d){this.router=s,this.rs=d,this.id="",this.data={},this.loading=!1,this.id=s.snapshot.params.id,this.load()}ngOnInit(){}load(){this.loading=!0,this.rs.get(`hmi/${this.id}`).subscribe(s=>{this.data=s.data,this.loading=!1})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.gz),e.Y36(Fe.s))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-hmi-detail"]],decls:35,vars:9,consts:[[3,"nzTabBarExtraContent"],["nzTitle","\u7ec4\u6001\u8be6\u60c5"],["nzBordered",""],[3,"hmi"],["nzTitle","\u76f8\u5173\u8bbe\u5907","nzDisabled",""],["nz-tab",""],["nzTitle","\u76f8\u5173\u4ea7\u54c1","nzDisabled",""],["nzTitle","\u76f8\u5173\u9879\u76ee","nzDisabled",""],["nzTitle","\u76f8\u5173\u6a21\u677f","nzDisabled",""],["extraTemplate",""],["title","\u5237\u65b0",3,"click"],["nz-icon","","nzType","reload",3,"nzSpin"],["nzType","vertical"],["title","\u539f\u59cb\u6570\u636e","appViewConfig","",3,"config"],["nz-icon","","nzType","profile"],["title","\u7f16\u8f91",3,"routerLink"],["nz-icon","","nzType","form"]],template:function(s,d){if(1&s&&(e.TgZ(0,"nz-tabset",0)(1,"nz-tab",1)(2,"nz-list",2)(3,"nz-list-item")(4,"span"),e._uU(5,"ID"),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"nz-list-item")(8,"span"),e._uU(9,"\u540d\u79f0"),e.qZA(),e._uU(10),e.qZA(),e.TgZ(11,"nz-list-item")(12,"span"),e._uU(13,"\u5bbd\u5ea6"),e.qZA(),e._uU(14),e.qZA(),e.TgZ(15,"nz-list-item")(16,"span"),e._uU(17,"\u9ad8\u5ea6"),e.qZA(),e._uU(18),e.qZA(),e.TgZ(19,"nz-list-item")(20,"span"),e._uU(21,"\u521b\u5efa\u65f6\u95f4"),e.qZA(),e._uU(22),e.ALo(23,"dateString"),e.qZA()(),e._UZ(24,"hmi-viewer",3),e.qZA(),e.TgZ(25,"nz-tab",4),e.YNc(26,Lf,1,0,"ng-template",5),e.qZA(),e.TgZ(27,"nz-tab",6),e.YNc(28,O1,1,0,"ng-template",5),e.qZA(),e.TgZ(29,"nz-tab",7),e.YNc(30,Vv,1,0,"ng-template",5),e.qZA(),e.TgZ(31,"nz-tab",8),e.YNc(32,P1,1,0,"ng-template",5),e.qZA()(),e.YNc(33,I1,8,3,"ng-template",null,9,e.W1O)),2&s){const _=e.MAs(34);e.Q6J("nzTabBarExtraContent",_),e.xp6(6),e.Oqu(d.data.id),e.xp6(4),e.Oqu(d.data.name),e.xp6(4),e.Oqu(d.data.width),e.xp6(4),e.Oqu(d.data.height),e.xp6(4),e.Oqu(e.lcZ(23,7,d.data.created)),e.xp6(2),e.Q6J("hmi",d.data)}},directives:[Wn.xH,Wn.xw,Jr.n_,Jr.AA,M1.B,Wn.cj,K.Ls,Ce.w,tn.g,ae.Z,Me.yS],pipes:[fr.i],styles:[""]}),g})();var qr=J(315),Qh=J(4707),Ll=J(2844);function L1(g,x){1&g&&e.GkF(0)}function R1(g,x){if(1&g&&(e.ynx(0),e.YNc(1,L1,1,0,"ng-container",4),e.BQk()),2&g){const s=e.oxw(2);e.xp6(1),e.Q6J("ngTemplateOutlet",s.extraFooter)}}function N1(g,x){if(1&g&&(e.ynx(0),e._UZ(1,"span",5),e.BQk()),2&g){const s=e.oxw(2);e.xp6(1),e.Q6J("innerHTML",s.extraFooter,e.oJD)}}function Rf(g,x){if(1&g&&(e.TgZ(0,"div"),e.ynx(1,2),e.YNc(2,R1,2,1,"ng-container",3),e.YNc(3,N1,2,1,"ng-container",3),e.BQk(),e.qZA()),2&g){const s=e.oxw();e.Gre("",s.prefixCls,"-footer-extra"),e.xp6(1),e.Q6J("ngSwitch",!0),e.xp6(1),e.Q6J("ngSwitchCase",s.isTemplateRef(s.extraFooter)),e.xp6(1),e.Q6J("ngSwitchCase",s.isNonEmptyString(s.extraFooter))}}function F1(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"a",6),e.NdJ("click",function(){e.CHM(s);const _=e.oxw();return _.isTodayDisabled?null:_.onClickToday()}),e._uU(1),e.qZA()}if(2&g){const s=e.oxw();e.MT6("",s.prefixCls,"-today-btn ",s.isTodayDisabled?s.prefixCls+"-today-btn-disabled":"",""),e.s9C("title",s.todayTitle),e.xp6(1),e.hij(" ",s.locale.today," ")}}function Nf(g,x){1&g&&e.GkF(0)}function Hv(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"li")(1,"a",7),e.NdJ("click",function(){e.CHM(s);const _=e.oxw(2);return _.isTodayDisabled?null:_.onClickToday()}),e._uU(2),e.qZA()()}if(2&g){const s=e.oxw(2);e.Gre("",s.prefixCls,"-now"),e.xp6(1),e.Gre("",s.prefixCls,"-now-btn"),e.xp6(1),e.hij(" ",s.locale.now," ")}}function qh(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"li")(1,"button",8),e.NdJ("click",function(){e.CHM(s);const _=e.oxw(2);return _.okDisabled?null:_.clickOk.emit()}),e._uU(2),e.qZA()()}if(2&g){const s=e.oxw(2);e.Gre("",s.prefixCls,"-ok"),e.xp6(1),e.Q6J("disabled",s.okDisabled),e.xp6(1),e.hij(" ",s.locale.ok," ")}}function Ff(g,x){if(1&g&&(e.TgZ(0,"ul"),e.YNc(1,Nf,1,0,"ng-container",4),e.YNc(2,Hv,3,7,"li",0),e.YNc(3,qh,3,5,"li",0),e.qZA()),2&g){const s=e.oxw();e.Gre("",s.prefixCls,"-ranges"),e.xp6(1),e.Q6J("ngTemplateOutlet",s.rangeQuickSelector),e.xp6(1),e.Q6J("ngIf",s.showNow),e.xp6(1),e.Q6J("ngIf",s.hasTimePicker)}}function Wv(g,x){if(1&g){const s=e.EpF();e.ynx(0),e.TgZ(1,"button",6),e.NdJ("click",function(){return e.CHM(s).$implicit.onClick()}),e._uU(2),e.qZA(),e.BQk()}if(2&g){const s=x.$implicit;e.xp6(1),e.Tol(s.className),e.s9C("title",s.title||null),e.xp6(1),e.hij(" ",s.label," ")}}function Gv(g,x){1&g&&e._UZ(0,"th",6)}function Jv(g,x){if(1&g&&(e.TgZ(0,"th",7),e._uU(1),e.qZA()),2&g){const s=x.$implicit;e.s9C("title",s.title),e.xp6(1),e.hij(" ",s.content," ")}}function B1(g,x){if(1&g&&(e.TgZ(0,"thead")(1,"tr",3),e.YNc(2,Gv,1,0,"th",4),e.YNc(3,Jv,2,2,"th",5),e.qZA()()),2&g){const s=e.oxw();e.xp6(2),e.Q6J("ngIf",s.showWeek),e.xp6(1),e.Q6J("ngForOf",s.headRow)}}function Z1(g,x){if(1&g&&(e.TgZ(0,"td",11),e._uU(1),e.qZA()),2&g){const s=e.oxw().$implicit,d=e.oxw();e.Gre("",d.prefixCls,"-cell-week"),e.xp6(1),e.hij(" ",s.weekNum," ")}}function U1(g,x){1&g&&e.GkF(0)}const Ea=function(g){return{$implicit:g}};function V1(g,x){if(1&g&&(e.ynx(0),e.YNc(1,U1,1,0,"ng-container",16),e.BQk()),2&g){const s=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngTemplateOutlet",s.cellRender)("ngTemplateOutletContext",e.VKq(2,Ea,s.value))}}function H1(g,x){if(1&g&&(e.ynx(0),e._UZ(1,"span",17),e.BQk()),2&g){const s=e.oxw(2).$implicit;e.xp6(1),e.Q6J("innerHTML",s.cellRender,e.oJD)}}function Bf(g,x){if(1&g&&(e.ynx(0),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.BQk()),2&g){const s=e.oxw(2).$implicit,d=e.oxw(2);e.xp6(1),e.Gre("",d.prefixCls,"-cell-inner"),e.uIk("aria-selected",s.isSelected)("aria-disabled",s.isDisabled),e.xp6(1),e.hij(" ",s.content," ")}}function W1(g,x){if(1&g&&(e.ynx(0)(1,13),e.YNc(2,V1,2,4,"ng-container",14),e.YNc(3,H1,2,1,"ng-container",14),e.YNc(4,Bf,3,6,"ng-container",15),e.BQk()()),2&g){const s=e.oxw().$implicit,d=e.oxw(2);e.xp6(1),e.Q6J("ngSwitch",!0),e.xp6(1),e.Q6J("ngSwitchCase",d.isTemplateRef(s.cellRender)),e.xp6(1),e.Q6J("ngSwitchCase",d.isNonEmptyString(s.cellRender))}}function G1(g,x){1&g&&e.GkF(0)}function J1(g,x){if(1&g&&(e.ynx(0),e.YNc(1,G1,1,0,"ng-container",16),e.BQk()),2&g){const s=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngTemplateOutlet",s.fullCellRender)("ngTemplateOutletContext",e.VKq(2,Ea,s.value))}}function Yv(g,x){1&g&&e.GkF(0)}function Zf(g,x){if(1&g&&(e.TgZ(0,"div"),e._uU(1),e.qZA(),e.TgZ(2,"div"),e.YNc(3,Yv,1,0,"ng-container",16),e.qZA()),2&g){const s=e.oxw(2).$implicit,d=e.oxw(2);e.Gre("",d.prefixCls,"-date-value"),e.xp6(1),e.Oqu(s.content),e.xp6(1),e.Gre("",d.prefixCls,"-date-content"),e.xp6(1),e.Q6J("ngTemplateOutlet",s.cellRender)("ngTemplateOutletContext",e.VKq(9,Ea,s.value))}}function Rl(g,x){if(1&g&&(e.ynx(0),e.TgZ(1,"div"),e.YNc(2,J1,2,4,"ng-container",18),e.YNc(3,Zf,4,11,"ng-template",null,19,e.W1O),e.qZA(),e.BQk()),2&g){const s=e.MAs(4),d=e.oxw().$implicit,_=e.oxw(2);e.xp6(1),e.Gre("",_.prefixCls,"-date ant-picker-cell-inner"),e.ekj("ant-picker-calendar-date-today",d.isToday),e.xp6(1),e.Q6J("ngIf",d.fullCellRender)("ngIfElse",s)}}function Kh(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"td",12),e.NdJ("click",function(){const w=e.CHM(s).$implicit;return w.isDisabled?null:w.onClick()})("mouseenter",function(){return e.CHM(s).$implicit.onMouseEnter()}),e.ynx(1,13),e.YNc(2,W1,5,3,"ng-container",14),e.YNc(3,Rl,5,7,"ng-container",14),e.BQk(),e.qZA()}if(2&g){const s=x.$implicit,d=e.oxw(2);e.s9C("title",s.title),e.Q6J("ngClass",s.classMap),e.xp6(1),e.Q6J("ngSwitch",d.prefixCls),e.xp6(1),e.Q6J("ngSwitchCase","ant-picker"),e.xp6(1),e.Q6J("ngSwitchCase","ant-picker-calendar")}}function Qv(g,x){if(1&g&&(e.TgZ(0,"tr",8),e.YNc(1,Z1,2,4,"td",9),e.YNc(2,Kh,4,5,"td",10),e.qZA()),2&g){const s=x.$implicit,d=e.oxw();e.Q6J("ngClass",s.classMap),e.xp6(1),e.Q6J("ngIf",s.weekNum),e.xp6(1),e.Q6J("ngForOf",s.dateCells)("ngForTrackBy",d.trackByBodyColumn)}}function Y1(g,x){if(1&g){const s=e.EpF();e.ynx(0),e.TgZ(1,"button",6),e.NdJ("click",function(){return e.CHM(s).$implicit.onClick()}),e._uU(2),e.qZA(),e.BQk()}if(2&g){const s=x.$implicit;e.xp6(1),e.Tol(s.className),e.s9C("title",s.title||null),e.xp6(1),e.hij(" ",s.label," ")}}function Q1(g,x){1&g&&e._UZ(0,"th",6)}function Uf(g,x){if(1&g&&(e.TgZ(0,"th",7),e._uU(1),e.qZA()),2&g){const s=x.$implicit;e.s9C("title",s.title),e.xp6(1),e.hij(" ",s.content," ")}}function Vf(g,x){if(1&g&&(e.TgZ(0,"thead")(1,"tr",3),e.YNc(2,Q1,1,0,"th",4),e.YNc(3,Uf,2,2,"th",5),e.qZA()()),2&g){const s=e.oxw();e.xp6(2),e.Q6J("ngIf",s.showWeek),e.xp6(1),e.Q6J("ngForOf",s.headRow)}}function q1(g,x){if(1&g&&(e.TgZ(0,"td",11),e._uU(1),e.qZA()),2&g){const s=e.oxw().$implicit,d=e.oxw();e.Gre("",d.prefixCls,"-cell-week"),e.xp6(1),e.hij(" ",s.weekNum," ")}}function $a(g,x){1&g&&e.GkF(0)}function fa(g,x){if(1&g&&(e.ynx(0),e.YNc(1,$a,1,0,"ng-container",16),e.BQk()),2&g){const s=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngTemplateOutlet",s.cellRender)("ngTemplateOutletContext",e.VKq(2,Ea,s.value))}}function pa(g,x){if(1&g&&(e.ynx(0),e._UZ(1,"span",17),e.BQk()),2&g){const s=e.oxw(2).$implicit;e.xp6(1),e.Q6J("innerHTML",s.cellRender,e.oJD)}}function Hf(g,x){if(1&g&&(e.ynx(0),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.BQk()),2&g){const s=e.oxw(2).$implicit,d=e.oxw(2);e.xp6(1),e.Gre("",d.prefixCls,"-cell-inner"),e.uIk("aria-selected",s.isSelected)("aria-disabled",s.isDisabled),e.xp6(1),e.hij(" ",s.content," ")}}function Wf(g,x){if(1&g&&(e.ynx(0)(1,13),e.YNc(2,fa,2,4,"ng-container",14),e.YNc(3,pa,2,1,"ng-container",14),e.YNc(4,Hf,3,6,"ng-container",15),e.BQk()()),2&g){const s=e.oxw().$implicit,d=e.oxw(2);e.xp6(1),e.Q6J("ngSwitch",!0),e.xp6(1),e.Q6J("ngSwitchCase",d.isTemplateRef(s.cellRender)),e.xp6(1),e.Q6J("ngSwitchCase",d.isNonEmptyString(s.cellRender))}}function Nl(g,x){1&g&&e.GkF(0)}function $h(g,x){if(1&g&&(e.ynx(0),e.YNc(1,Nl,1,0,"ng-container",16),e.BQk()),2&g){const s=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngTemplateOutlet",s.fullCellRender)("ngTemplateOutletContext",e.VKq(2,Ea,s.value))}}function jh(g,x){1&g&&e.GkF(0)}function Xh(g,x){if(1&g&&(e.TgZ(0,"div"),e._uU(1),e.qZA(),e.TgZ(2,"div"),e.YNc(3,jh,1,0,"ng-container",16),e.qZA()),2&g){const s=e.oxw(2).$implicit,d=e.oxw(2);e.Gre("",d.prefixCls,"-date-value"),e.xp6(1),e.Oqu(s.content),e.xp6(1),e.Gre("",d.prefixCls,"-date-content"),e.xp6(1),e.Q6J("ngTemplateOutlet",s.cellRender)("ngTemplateOutletContext",e.VKq(9,Ea,s.value))}}function ed(g,x){if(1&g&&(e.ynx(0),e.TgZ(1,"div"),e.YNc(2,$h,2,4,"ng-container",18),e.YNc(3,Xh,4,11,"ng-template",null,19,e.W1O),e.qZA(),e.BQk()),2&g){const s=e.MAs(4),d=e.oxw().$implicit,_=e.oxw(2);e.xp6(1),e.Gre("",_.prefixCls,"-date ant-picker-cell-inner"),e.ekj("ant-picker-calendar-date-today",d.isToday),e.xp6(1),e.Q6J("ngIf",d.fullCellRender)("ngIfElse",s)}}function qv(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"td",12),e.NdJ("click",function(){const w=e.CHM(s).$implicit;return w.isDisabled?null:w.onClick()})("mouseenter",function(){return e.CHM(s).$implicit.onMouseEnter()}),e.ynx(1,13),e.YNc(2,Wf,5,3,"ng-container",14),e.YNc(3,ed,5,7,"ng-container",14),e.BQk(),e.qZA()}if(2&g){const s=x.$implicit,d=e.oxw(2);e.s9C("title",s.title),e.Q6J("ngClass",s.classMap),e.xp6(1),e.Q6J("ngSwitch",d.prefixCls),e.xp6(1),e.Q6J("ngSwitchCase","ant-picker"),e.xp6(1),e.Q6J("ngSwitchCase","ant-picker-calendar")}}function Kv(g,x){if(1&g&&(e.TgZ(0,"tr",8),e.YNc(1,q1,2,4,"td",9),e.YNc(2,qv,4,5,"td",10),e.qZA()),2&g){const s=x.$implicit,d=e.oxw();e.Q6J("ngClass",s.classMap),e.xp6(1),e.Q6J("ngIf",s.weekNum),e.xp6(1),e.Q6J("ngForOf",s.dateCells)("ngForTrackBy",d.trackByBodyColumn)}}function $v(g,x){if(1&g){const s=e.EpF();e.ynx(0),e.TgZ(1,"button",6),e.NdJ("click",function(){return e.CHM(s).$implicit.onClick()}),e._uU(2),e.qZA(),e.BQk()}if(2&g){const s=x.$implicit;e.xp6(1),e.Tol(s.className),e.s9C("title",s.title||null),e.xp6(1),e.hij(" ",s.label," ")}}function K1(g,x){1&g&&e._UZ(0,"th",6)}function $1(g,x){if(1&g&&(e.TgZ(0,"th",7),e._uU(1),e.qZA()),2&g){const s=x.$implicit;e.s9C("title",s.title),e.xp6(1),e.hij(" ",s.content," ")}}function j1(g,x){if(1&g&&(e.TgZ(0,"thead")(1,"tr",3),e.YNc(2,K1,1,0,"th",4),e.YNc(3,$1,2,2,"th",5),e.qZA()()),2&g){const s=e.oxw();e.xp6(2),e.Q6J("ngIf",s.showWeek),e.xp6(1),e.Q6J("ngForOf",s.headRow)}}function Ur(g,x){if(1&g&&(e.TgZ(0,"td",11),e._uU(1),e.qZA()),2&g){const s=e.oxw().$implicit,d=e.oxw();e.Gre("",d.prefixCls,"-cell-week"),e.xp6(1),e.hij(" ",s.weekNum," ")}}function Fl(g,x){1&g&&e.GkF(0)}function Bl(g,x){if(1&g&&(e.ynx(0),e.YNc(1,Fl,1,0,"ng-container",16),e.BQk()),2&g){const s=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngTemplateOutlet",s.cellRender)("ngTemplateOutletContext",e.VKq(2,Ea,s.value))}}function Lo(g,x){if(1&g&&(e.ynx(0),e._UZ(1,"span",17),e.BQk()),2&g){const s=e.oxw(2).$implicit;e.xp6(1),e.Q6J("innerHTML",s.cellRender,e.oJD)}}function Ys(g,x){if(1&g&&(e.ynx(0),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.BQk()),2&g){const s=e.oxw(2).$implicit,d=e.oxw(2);e.xp6(1),e.Gre("",d.prefixCls,"-cell-inner"),e.uIk("aria-selected",s.isSelected)("aria-disabled",s.isDisabled),e.xp6(1),e.hij(" ",s.content," ")}}function Ro(g,x){if(1&g&&(e.ynx(0)(1,13),e.YNc(2,Bl,2,4,"ng-container",14),e.YNc(3,Lo,2,1,"ng-container",14),e.YNc(4,Ys,3,6,"ng-container",15),e.BQk()()),2&g){const s=e.oxw().$implicit,d=e.oxw(2);e.xp6(1),e.Q6J("ngSwitch",!0),e.xp6(1),e.Q6J("ngSwitchCase",d.isTemplateRef(s.cellRender)),e.xp6(1),e.Q6J("ngSwitchCase",d.isNonEmptyString(s.cellRender))}}function No(g,x){1&g&&e.GkF(0)}function Gf(g,x){if(1&g&&(e.ynx(0),e.YNc(1,No,1,0,"ng-container",16),e.BQk()),2&g){const s=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngTemplateOutlet",s.fullCellRender)("ngTemplateOutletContext",e.VKq(2,Ea,s.value))}}function Jf(g,x){1&g&&e.GkF(0)}function Zl(g,x){if(1&g&&(e.TgZ(0,"div"),e._uU(1),e.qZA(),e.TgZ(2,"div"),e.YNc(3,Jf,1,0,"ng-container",16),e.qZA()),2&g){const s=e.oxw(2).$implicit,d=e.oxw(2);e.Gre("",d.prefixCls,"-date-value"),e.xp6(1),e.Oqu(s.content),e.xp6(1),e.Gre("",d.prefixCls,"-date-content"),e.xp6(1),e.Q6J("ngTemplateOutlet",s.cellRender)("ngTemplateOutletContext",e.VKq(9,Ea,s.value))}}function Ul(g,x){if(1&g&&(e.ynx(0),e.TgZ(1,"div"),e.YNc(2,Gf,2,4,"ng-container",18),e.YNc(3,Zl,4,11,"ng-template",null,19,e.W1O),e.qZA(),e.BQk()),2&g){const s=e.MAs(4),d=e.oxw().$implicit,_=e.oxw(2);e.xp6(1),e.Gre("",_.prefixCls,"-date ant-picker-cell-inner"),e.ekj("ant-picker-calendar-date-today",d.isToday),e.xp6(1),e.Q6J("ngIf",d.fullCellRender)("ngIfElse",s)}}function fs(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"td",12),e.NdJ("click",function(){const w=e.CHM(s).$implicit;return w.isDisabled?null:w.onClick()})("mouseenter",function(){return e.CHM(s).$implicit.onMouseEnter()}),e.ynx(1,13),e.YNc(2,Ro,5,3,"ng-container",14),e.YNc(3,Ul,5,7,"ng-container",14),e.BQk(),e.qZA()}if(2&g){const s=x.$implicit,d=e.oxw(2);e.s9C("title",s.title),e.Q6J("ngClass",s.classMap),e.xp6(1),e.Q6J("ngSwitch",d.prefixCls),e.xp6(1),e.Q6J("ngSwitchCase","ant-picker"),e.xp6(1),e.Q6J("ngSwitchCase","ant-picker-calendar")}}function Yf(g,x){if(1&g&&(e.TgZ(0,"tr",8),e.YNc(1,Ur,2,4,"td",9),e.YNc(2,fs,4,5,"td",10),e.qZA()),2&g){const s=x.$implicit,d=e.oxw();e.Q6J("ngClass",s.classMap),e.xp6(1),e.Q6J("ngIf",s.weekNum),e.xp6(1),e.Q6J("ngForOf",s.dateCells)("ngForTrackBy",d.trackByBodyColumn)}}function Qs(g,x){if(1&g){const s=e.EpF();e.ynx(0),e.TgZ(1,"button",6),e.NdJ("click",function(){return e.CHM(s).$implicit.onClick()}),e._uU(2),e.qZA(),e.BQk()}if(2&g){const s=x.$implicit;e.xp6(1),e.Tol(s.className),e.s9C("title",s.title||null),e.xp6(1),e.hij(" ",s.label," ")}}function Qf(g,x){1&g&&e._UZ(0,"th",6)}function Sc(g,x){if(1&g&&(e.TgZ(0,"th",7),e._uU(1),e.qZA()),2&g){const s=x.$implicit;e.s9C("title",s.title),e.xp6(1),e.hij(" ",s.content," ")}}function qf(g,x){if(1&g&&(e.TgZ(0,"thead")(1,"tr",3),e.YNc(2,Qf,1,0,"th",4),e.YNc(3,Sc,2,2,"th",5),e.qZA()()),2&g){const s=e.oxw();e.xp6(2),e.Q6J("ngIf",s.showWeek),e.xp6(1),e.Q6J("ngForOf",s.headRow)}}function jv(g,x){if(1&g&&(e.TgZ(0,"td",11),e._uU(1),e.qZA()),2&g){const s=e.oxw().$implicit,d=e.oxw();e.Gre("",d.prefixCls,"-cell-week"),e.xp6(1),e.hij(" ",s.weekNum," ")}}function X1(g,x){1&g&&e.GkF(0)}function Fo(g,x){if(1&g&&(e.ynx(0),e.YNc(1,X1,1,0,"ng-container",16),e.BQk()),2&g){const s=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngTemplateOutlet",s.cellRender)("ngTemplateOutletContext",e.VKq(2,Ea,s.value))}}function qs(g,x){if(1&g&&(e.ynx(0),e._UZ(1,"span",17),e.BQk()),2&g){const s=e.oxw(2).$implicit;e.xp6(1),e.Q6J("innerHTML",s.cellRender,e.oJD)}}function eC(g,x){if(1&g&&(e.ynx(0),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.BQk()),2&g){const s=e.oxw(2).$implicit,d=e.oxw(2);e.xp6(1),e.Gre("",d.prefixCls,"-cell-inner"),e.uIk("aria-selected",s.isSelected)("aria-disabled",s.isDisabled),e.xp6(1),e.hij(" ",s.content," ")}}function Xv(g,x){if(1&g&&(e.ynx(0)(1,13),e.YNc(2,Fo,2,4,"ng-container",14),e.YNc(3,qs,2,1,"ng-container",14),e.YNc(4,eC,3,6,"ng-container",15),e.BQk()()),2&g){const s=e.oxw().$implicit,d=e.oxw(2);e.xp6(1),e.Q6J("ngSwitch",!0),e.xp6(1),e.Q6J("ngSwitchCase",d.isTemplateRef(s.cellRender)),e.xp6(1),e.Q6J("ngSwitchCase",d.isNonEmptyString(s.cellRender))}}function em(g,x){1&g&&e.GkF(0)}function Ks(g,x){if(1&g&&(e.ynx(0),e.YNc(1,em,1,0,"ng-container",16),e.BQk()),2&g){const s=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngTemplateOutlet",s.fullCellRender)("ngTemplateOutletContext",e.VKq(2,Ea,s.value))}}function zc(g,x){1&g&&e.GkF(0)}function tC(g,x){if(1&g&&(e.TgZ(0,"div"),e._uU(1),e.qZA(),e.TgZ(2,"div"),e.YNc(3,zc,1,0,"ng-container",16),e.qZA()),2&g){const s=e.oxw(2).$implicit,d=e.oxw(2);e.Gre("",d.prefixCls,"-date-value"),e.xp6(1),e.Oqu(s.content),e.xp6(1),e.Gre("",d.prefixCls,"-date-content"),e.xp6(1),e.Q6J("ngTemplateOutlet",s.cellRender)("ngTemplateOutletContext",e.VKq(9,Ea,s.value))}}function ps(g,x){if(1&g&&(e.ynx(0),e.TgZ(1,"div"),e.YNc(2,Ks,2,4,"ng-container",18),e.YNc(3,tC,4,11,"ng-template",null,19,e.W1O),e.qZA(),e.BQk()),2&g){const s=e.MAs(4),d=e.oxw().$implicit,_=e.oxw(2);e.xp6(1),e.Gre("",_.prefixCls,"-date ant-picker-cell-inner"),e.ekj("ant-picker-calendar-date-today",d.isToday),e.xp6(1),e.Q6J("ngIf",d.fullCellRender)("ngIfElse",s)}}function $s(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"td",12),e.NdJ("click",function(){const w=e.CHM(s).$implicit;return w.isDisabled?null:w.onClick()})("mouseenter",function(){return e.CHM(s).$implicit.onMouseEnter()}),e.ynx(1,13),e.YNc(2,Xv,5,3,"ng-container",14),e.YNc(3,ps,5,7,"ng-container",14),e.BQk(),e.qZA()}if(2&g){const s=x.$implicit,d=e.oxw(2);e.s9C("title",s.title),e.Q6J("ngClass",s.classMap),e.xp6(1),e.Q6J("ngSwitch",d.prefixCls),e.xp6(1),e.Q6J("ngSwitchCase","ant-picker"),e.xp6(1),e.Q6J("ngSwitchCase","ant-picker-calendar")}}function Vl(g,x){if(1&g&&(e.TgZ(0,"tr",8),e.YNc(1,jv,2,4,"td",9),e.YNc(2,$s,4,5,"td",10),e.qZA()),2&g){const s=x.$implicit,d=e.oxw();e.Q6J("ngClass",s.classMap),e.xp6(1),e.Q6J("ngIf",s.weekNum),e.xp6(1),e.Q6J("ngForOf",s.dateCells)("ngForTrackBy",d.trackByBodyColumn)}}function nC(g,x){if(1&g){const s=e.EpF();e.ynx(0),e.TgZ(1,"decade-header",4),e.NdJ("valueChange",function(_){return e.CHM(s),e.oxw().activeDate=_})("panelModeChange",function(_){return e.CHM(s),e.oxw().panelModeChange.emit(_)})("valueChange",function(_){return e.CHM(s),e.oxw().headerChange.emit(_)}),e.qZA(),e.TgZ(2,"div")(3,"decade-table",5),e.NdJ("valueChange",function(_){return e.CHM(s),e.oxw().onChooseDecade(_)}),e.qZA()(),e.BQk()}if(2&g){const s=e.oxw();e.xp6(1),e.Q6J("value",s.activeDate)("locale",s.locale)("showSuperPreBtn",s.enablePrevNext("prev","decade"))("showSuperNextBtn",s.enablePrevNext("next","decade"))("showNextBtn",!1)("showPreBtn",!1),e.xp6(1),e.Gre("",s.prefixCls,"-body"),e.xp6(1),e.Q6J("activeDate",s.activeDate)("value",s.value)("locale",s.locale)("disabledDate",s.disabledDate)}}function rC(g,x){if(1&g){const s=e.EpF();e.ynx(0),e.TgZ(1,"year-header",4),e.NdJ("valueChange",function(_){return e.CHM(s),e.oxw().activeDate=_})("panelModeChange",function(_){return e.CHM(s),e.oxw().panelModeChange.emit(_)})("valueChange",function(_){return e.CHM(s),e.oxw().headerChange.emit(_)}),e.qZA(),e.TgZ(2,"div")(3,"year-table",6),e.NdJ("valueChange",function(_){return e.CHM(s),e.oxw().onChooseYear(_)})("cellHover",function(_){return e.CHM(s),e.oxw().cellHover.emit(_)}),e.qZA()(),e.BQk()}if(2&g){const s=e.oxw();e.xp6(1),e.Q6J("value",s.activeDate)("locale",s.locale)("showSuperPreBtn",s.enablePrevNext("prev","year"))("showSuperNextBtn",s.enablePrevNext("next","year"))("showNextBtn",!1)("showPreBtn",!1),e.xp6(1),e.Gre("",s.prefixCls,"-body"),e.xp6(1),e.Q6J("activeDate",s.activeDate)("value",s.value)("locale",s.locale)("disabledDate",s.disabledDate)("selectedValue",s.selectedValue)("hoverValue",s.hoverValue)}}function aa(g,x){if(1&g){const s=e.EpF();e.ynx(0),e.TgZ(1,"month-header",4),e.NdJ("valueChange",function(_){return e.CHM(s),e.oxw().activeDate=_})("panelModeChange",function(_){return e.CHM(s),e.oxw().panelModeChange.emit(_)})("valueChange",function(_){return e.CHM(s),e.oxw().headerChange.emit(_)}),e.qZA(),e.TgZ(2,"div")(3,"month-table",7),e.NdJ("valueChange",function(_){return e.CHM(s),e.oxw().onChooseMonth(_)})("cellHover",function(_){return e.CHM(s),e.oxw().cellHover.emit(_)}),e.qZA()(),e.BQk()}if(2&g){const s=e.oxw();e.xp6(1),e.Q6J("value",s.activeDate)("locale",s.locale)("showSuperPreBtn",s.enablePrevNext("prev","month"))("showSuperNextBtn",s.enablePrevNext("next","month"))("showNextBtn",!1)("showPreBtn",!1),e.xp6(1),e.Gre("",s.prefixCls,"-body"),e.xp6(1),e.Q6J("value",s.value)("activeDate",s.activeDate)("locale",s.locale)("disabledDate",s.disabledDate)("selectedValue",s.selectedValue)("hoverValue",s.hoverValue)}}function ja(g,x){if(1&g){const s=e.EpF();e.ynx(0),e.TgZ(1,"date-header",8),e.NdJ("valueChange",function(_){return e.CHM(s),e.oxw().activeDate=_})("panelModeChange",function(_){return e.CHM(s),e.oxw().panelModeChange.emit(_)})("valueChange",function(_){return e.CHM(s),e.oxw().headerChange.emit(_)}),e.qZA(),e.TgZ(2,"div")(3,"date-table",9),e.NdJ("valueChange",function(_){return e.CHM(s),e.oxw().onSelectDate(_)})("cellHover",function(_){return e.CHM(s),e.oxw().cellHover.emit(_)}),e.qZA()(),e.BQk()}if(2&g){const s=e.oxw();e.xp6(1),e.Q6J("value",s.activeDate)("locale",s.locale)("showSuperPreBtn",s.enablePrevNext("prev",s.showWeek?"week":"date"))("showSuperNextBtn",s.enablePrevNext("next",s.showWeek?"week":"date"))("showPreBtn",s.enablePrevNext("prev",s.showWeek?"week":"date"))("showNextBtn",s.enablePrevNext("next",s.showWeek?"week":"date")),e.xp6(1),e.Gre("",s.prefixCls,"-body"),e.xp6(1),e.Q6J("locale",s.locale)("showWeek",s.showWeek)("value",s.value)("activeDate",s.activeDate)("disabledDate",s.disabledDate)("cellRender",s.dateRender)("selectedValue",s.selectedValue)("hoverValue",s.hoverValue)}}function iC(g,x){if(1&g){const s=e.EpF();e.ynx(0),e.TgZ(1,"nz-time-picker-panel",10),e.NdJ("ngModelChange",function(_){return e.CHM(s),e.oxw().onSelectTime(_)}),e.qZA(),e.BQk()}if(2&g){const s=e.oxw();e.xp6(1),e.Q6J("nzInDatePicker",!0)("ngModel",null==s.value?null:s.value.nativeDate)("format",s.timeOptions.nzFormat)("nzHourStep",s.timeOptions.nzHourStep)("nzMinuteStep",s.timeOptions.nzMinuteStep)("nzSecondStep",s.timeOptions.nzSecondStep)("nzDisabledHours",s.timeOptions.nzDisabledHours)("nzDisabledMinutes",s.timeOptions.nzDisabledMinutes)("nzDisabledSeconds",s.timeOptions.nzDisabledSeconds)("nzHideDisabledOptions",!!s.timeOptions.nzHideDisabledOptions)("nzDefaultOpenValue",s.timeOptions.nzDefaultOpenValue)("nzUse12Hours",!!s.timeOptions.nzUse12Hours)("nzAddOn",s.timeOptions.nzAddOn)}}function aC(g,x){1&g&&e.GkF(0)}const oC=function(g){return{partType:g}};function sC(g,x){if(1&g&&(e.ynx(0),e.YNc(1,aC,1,0,"ng-container",7),e.BQk()),2&g){const s=e.oxw(2),d=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",d)("ngTemplateOutletContext",e.VKq(2,oC,s.datePickerService.activeInput))}}function tm(g,x){1&g&&e.GkF(0)}function lC(g,x){1&g&&e.GkF(0)}const nm=function(){return{partType:"left"}},wc=function(){return{partType:"right"}};function uC(g,x){if(1&g&&(e.YNc(0,tm,1,0,"ng-container",7),e.YNc(1,lC,1,0,"ng-container",7)),2&g){e.oxw(2);const s=e.MAs(4);e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.DdM(4,nm)),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.DdM(5,wc))}}function Kf(g,x){1&g&&e.GkF(0)}function cC(g,x){if(1&g&&(e.ynx(0),e.TgZ(1,"div"),e._UZ(2,"div"),e.TgZ(3,"div")(4,"div"),e.YNc(5,sC,2,4,"ng-container",0),e.YNc(6,uC,2,6,"ng-template",null,5,e.W1O),e.qZA(),e.YNc(8,Kf,1,0,"ng-container",6),e.qZA()(),e.BQk()),2&g){const s=e.MAs(7),d=e.oxw(),_=e.MAs(6);e.xp6(1),e.MT6("",d.prefixCls,"-range-wrapper ",d.prefixCls,"-date-range-wrapper"),e.xp6(1),e.Gre("",d.prefixCls,"-range-arrow"),e.Udp("left",null==d.datePickerService?null:d.datePickerService.arrowLeft,"px"),e.xp6(1),e.Gre("",d.prefixCls,"-panel-container"),e.xp6(1),e.Gre("",d.prefixCls,"-panels"),e.xp6(1),e.Q6J("ngIf",d.hasTimePicker)("ngIfElse",s),e.xp6(3),e.Q6J("ngTemplateOutlet",_)}}function Fn(g,x){1&g&&e.GkF(0)}function hC(g,x){1&g&&e.GkF(0)}function rm(g,x){if(1&g&&(e.TgZ(0,"div")(1,"div",8),e.YNc(2,Fn,1,0,"ng-container",6),e.YNc(3,hC,1,0,"ng-container",6),e.qZA()()),2&g){const s=e.oxw(),d=e.MAs(4),_=e.MAs(6);e.DjV("",s.prefixCls,"-panel-container ",s.showWeek?s.prefixCls+"-week-number":""," ",s.hasTimePicker?s.prefixCls+"-time":""," ",s.isRange?s.prefixCls+"-range":"",""),e.xp6(1),e.Gre("",s.prefixCls,"-panel"),e.ekj("ant-picker-panel-rtl","rtl"===s.dir),e.xp6(1),e.Q6J("ngTemplateOutlet",d),e.xp6(1),e.Q6J("ngTemplateOutlet",_)}}function Dc(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"div")(1,"inner-popup",9),e.NdJ("panelModeChange",function(_){const me=e.CHM(s).partType;return e.oxw().onPanelModeChange(_,me)})("cellHover",function(_){return e.CHM(s),e.oxw().onCellHover(_)})("selectDate",function(_){e.CHM(s);const w=e.oxw();return w.changeValueFromSelect(_,!w.showTime)})("selectTime",function(_){const me=e.CHM(s).partType;return e.oxw().onSelectTime(_,me)})("headerChange",function(_){const me=e.CHM(s).partType;return e.oxw().onActiveDateChange(_,me)}),e.qZA()()}if(2&g){const s=x.partType,d=e.oxw();e.Gre("",d.prefixCls,"-panel"),e.ekj("ant-picker-panel-rtl","rtl"===d.dir),e.xp6(1),e.Q6J("showWeek",d.showWeek)("endPanelMode",d.getPanelMode(d.endPanelMode,s))("partType",s)("locale",d.locale)("showTimePicker",d.hasTimePicker)("timeOptions",d.getTimeOptions(s))("panelMode",d.getPanelMode(d.panelMode,s))("activeDate",d.getActiveDate(s))("value",d.getValue(s))("disabledDate",d.disabledDate)("dateRender",d.dateRender)("selectedValue",null==d.datePickerService?null:d.datePickerService.value)("hoverValue",d.hoverValue)}}function dC(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"calendar-footer",11),e.NdJ("clickOk",function(){return e.CHM(s),e.oxw(2).onClickOk()})("clickToday",function(_){return e.CHM(s),e.oxw(2).onClickToday(_)}),e.qZA()}if(2&g){const s=e.oxw(2),d=e.MAs(8);e.Q6J("locale",s.locale)("isRange",s.isRange)("showToday",s.showToday)("showNow",s.showNow)("hasTimePicker",s.hasTimePicker)("okDisabled",!s.isAllowed(null==s.datePickerService?null:s.datePickerService.value))("extraFooter",s.extraFooter)("rangeQuickSelector",s.ranges?d:null)}}function fC(g,x){if(1&g&&e.YNc(0,dC,1,8,"calendar-footer",10),2&g){const s=e.oxw();e.Q6J("ngIf",s.hasFooter)}}function pC(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"li",13),e.NdJ("click",function(){const w=e.CHM(s).$implicit,me=e.oxw(2);return me.onClickPresetRange(me.ranges[w])})("mouseenter",function(){const w=e.CHM(s).$implicit,me=e.oxw(2);return me.onHoverPresetRange(me.ranges[w])})("mouseleave",function(){return e.CHM(s),e.oxw(2).onPresetRangeMouseLeave()}),e.TgZ(1,"span",14),e._uU(2),e.qZA()()}if(2&g){const s=x.$implicit,d=e.oxw(2);e.Gre("",d.prefixCls,"-preset"),e.xp6(2),e.Oqu(s)}}function im(g,x){if(1&g&&e.YNc(0,pC,3,4,"li",12),2&g){const s=e.oxw();e.Q6J("ngForOf",s.getObjectKeys(s.ranges))}}const ki=["separatorElement"],gC=["pickerInput"],Cu=["rangePickerInput"];function am(g,x){1&g&&e.GkF(0)}function om(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"div")(1,"input",7,8),e.NdJ("ngModelChange",function(_){return e.CHM(s),e.oxw(2).inputValue=_})("focus",function(_){return e.CHM(s),e.oxw(2).onFocus(_)})("focusout",function(_){return e.CHM(s),e.oxw(2).onFocusout(_)})("ngModelChange",function(_){return e.CHM(s),e.oxw(2).onInputChange(_)})("keyup.enter",function(_){return e.CHM(s),e.oxw(2).onKeyupEnter(_)}),e.qZA(),e.YNc(3,am,1,0,"ng-container",9),e.qZA()}if(2&g){const s=e.oxw(2),d=e.MAs(4);e.Gre("",s.prefixCls,"-input"),e.xp6(1),e.ekj("ant-input-disabled",s.nzDisabled),e.s9C("placeholder",s.getPlaceholder()),e.Q6J("disabled",s.nzDisabled)("readOnly",s.nzInputReadOnly)("ngModel",s.inputValue)("size",s.inputSize),e.uIk("id",s.nzId),e.xp6(2),e.Q6J("ngTemplateOutlet",d)}}function Hl(g,x){1&g&&e.GkF(0)}function vC(g,x){if(1&g&&(e.ynx(0),e._uU(1),e.BQk()),2&g){const s=e.oxw(3);e.xp6(1),e.Oqu(s.nzSeparator)}}function mC(g,x){1&g&&e._UZ(0,"i",13)}function sm(g,x){1&g&&e.GkF(0)}function Qn(g,x){1&g&&e.GkF(0)}function lm(g,x){if(1&g&&(e.ynx(0),e.TgZ(1,"div"),e.YNc(2,Hl,1,0,"ng-container",10),e.qZA(),e.TgZ(3,"div",null,11)(5,"span"),e.YNc(6,vC,2,1,"ng-container",0),e.qZA(),e.YNc(7,mC,1,0,"ng-template",null,12,e.W1O),e.qZA(),e.TgZ(9,"div"),e.YNc(10,sm,1,0,"ng-container",10),e.qZA(),e.YNc(11,Qn,1,0,"ng-container",9),e.BQk()),2&g){const s=e.MAs(8),d=e.oxw(2),_=e.MAs(2),w=e.MAs(4);e.xp6(1),e.Gre("",d.prefixCls,"-input"),e.xp6(1),e.Q6J("ngTemplateOutlet",_)("ngTemplateOutletContext",e.DdM(19,nm)),e.xp6(1),e.Gre("",d.prefixCls,"-range-separator"),e.xp6(2),e.Gre("",d.prefixCls,"-separator"),e.xp6(1),e.Q6J("ngIf",d.nzSeparator)("ngIfElse",s),e.xp6(3),e.Gre("",d.prefixCls,"-input"),e.xp6(1),e.Q6J("ngTemplateOutlet",_)("ngTemplateOutletContext",e.DdM(20,wc)),e.xp6(1),e.Q6J("ngTemplateOutlet",w)}}function um(g,x){if(1&g&&(e.ynx(0),e.YNc(1,om,4,12,"div",5),e.YNc(2,lm,12,21,"ng-container",6),e.BQk()),2&g){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",!s.isRange),e.xp6(1),e.Q6J("ngIf",s.isRange)}}function _C(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"input",14,15),e.NdJ("click",function(_){return e.CHM(s),e.oxw().onClickInputBox(_)})("focusout",function(_){return e.CHM(s),e.oxw().onFocusout(_)})("focus",function(_){const me=e.CHM(s).partType;return e.oxw().onFocus(_,me)})("keyup.enter",function(_){return e.CHM(s),e.oxw().onKeyupEnter(_)})("ngModelChange",function(_){const me=e.CHM(s).partType,Re=e.oxw();return Re.inputValue[Re.datePickerService.getActiveIndex(me)]=_})("ngModelChange",function(_){return e.CHM(s),e.oxw().onInputChange(_)}),e.qZA()}if(2&g){const s=x.partType,d=e.oxw();e.s9C("placeholder",d.getPlaceholder(s)),e.Q6J("disabled",d.nzDisabled)("readOnly",d.nzInputReadOnly)("size",d.inputSize)("ngModel",d.inputValue[d.datePickerService.getActiveIndex(s)]),e.uIk("id",d.nzId)}}function cm(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"span",19),e.NdJ("click",function(_){return e.CHM(s),e.oxw(2).onClickClear(_)}),e._UZ(1,"i",20),e.qZA()}if(2&g){const s=e.oxw(2);e.Gre("",s.prefixCls,"-clear")}}function yC(g,x){if(1&g&&(e.ynx(0),e._UZ(1,"i",21),e.BQk()),2&g){const s=x.$implicit;e.xp6(1),e.Q6J("nzType",s)}}function CC(g,x){if(1&g&&(e._UZ(0,"div",16),e.YNc(1,cm,2,3,"span",17),e.TgZ(2,"span"),e.YNc(3,yC,2,1,"ng-container",18),e.qZA()),2&g){const s=e.oxw();e.Gre("",s.prefixCls,"-active-bar"),e.Q6J("ngStyle",s.activeBarStyle),e.xp6(1),e.Q6J("ngIf",s.showClear()),e.xp6(1),e.Gre("",s.prefixCls,"-suffix"),e.xp6(1),e.Q6J("nzStringTemplateOutlet",s.nzSuffixIcon)}}function hm(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"div",16)(1,"date-range-popup",22),e.NdJ("panelModeChange",function(_){return e.CHM(s),e.oxw().onPanelModeChange(_)})("calendarChange",function(_){return e.CHM(s),e.oxw().onCalendarChange(_)})("resultOk",function(){return e.CHM(s),e.oxw().onResultOk()}),e.qZA()()}if(2&g){const s=e.oxw();e.MT6("",s.prefixCls,"-dropdown ",s.nzDropdownClassName,""),e.ekj("ant-picker-dropdown-rtl","rtl"===s.dir)("ant-picker-dropdown-placement-bottomLeft","bottom"===s.currentPositionY&&"start"===s.currentPositionX)("ant-picker-dropdown-placement-topLeft","top"===s.currentPositionY&&"start"===s.currentPositionX)("ant-picker-dropdown-placement-bottomRight","bottom"===s.currentPositionY&&"end"===s.currentPositionX)("ant-picker-dropdown-placement-topRight","top"===s.currentPositionY&&"end"===s.currentPositionX)("ant-picker-dropdown-range",s.isRange)("ant-picker-active-left","left"===s.datePickerService.activeInput)("ant-picker-active-right","right"===s.datePickerService.activeInput),e.Q6J("ngStyle",s.nzPopupStyle),e.xp6(1),e.Q6J("isRange",s.isRange)("inline",s.nzInline)("defaultPickerValue",s.nzDefaultPickerValue)("showWeek","week"===s.nzMode)("panelMode",s.panelMode)("locale",null==s.nzLocale?null:s.nzLocale.lang)("showToday","date"===s.nzMode&&s.nzShowToday&&!s.isRange&&!s.nzShowTime)("showNow","date"===s.nzMode&&s.nzShowNow&&!s.isRange&&!!s.nzShowTime)("showTime",s.nzShowTime)("dateRender",s.nzDateRender)("disabledDate",s.nzDisabledDate)("disabledTime",s.nzDisabledTime)("extraFooter",s.extraFooter)("ranges",s.nzRanges)("dir",s.dir)}}function dm(g,x){1&g&&e.GkF(0)}function fm(g,x){if(1&g&&(e.TgZ(0,"div",23),e.YNc(1,dm,1,0,"ng-container",9),e.qZA()),2&g){const s=e.oxw(),d=e.MAs(6);e.Q6J("nzNoAnimation",!(null==s.noAnimation||!s.noAnimation.nzNoAnimation))("@slideMotion","enter"),e.xp6(1),e.Q6J("ngTemplateOutlet",d)}}const Ac="ant-picker",xC={nzDisabledHours:()=>[],nzDisabledMinutes:()=>[],nzDisabledSeconds:()=>[]};function $f(g,x){let s=x?x(g&&g.nativeDate):{};return s=Object.assign(Object.assign({},xC),s),s}function Ec(g,x,s){return!(!g||x&&x(g.nativeDate)||s&&!function gm(g,x){return function pm(g,x){let s=!1;if(g){const d=g.getHours(),_=g.getMinutes(),w=g.getSeconds();s=-1!==x.nzDisabledHours().indexOf(d)||-1!==x.nzDisabledMinutes(d).indexOf(_)||-1!==x.nzDisabledSeconds(d,_).indexOf(w)}return!s}(g,$f(g,x))}(g,s))}function Mc(g){return g&&g.replace(/Y/g,"y").replace(/D/g,"d")}let jf=(()=>{class g{constructor(s){this.dateHelper=s,this.showToday=!1,this.showNow=!1,this.hasTimePicker=!1,this.isRange=!1,this.okDisabled=!1,this.rangeQuickSelector=null,this.clickOk=new e.vpe,this.clickToday=new e.vpe,this.prefixCls=Ac,this.isTemplateRef=fe.de,this.isNonEmptyString=fe.HH,this.isTodayDisabled=!1,this.todayTitle=""}ngOnChanges(s){const d=new Date;if(s.disabledDate&&(this.isTodayDisabled=!(!this.disabledDate||!this.disabledDate(d))),s.locale){const _=Mc(this.locale.dateFormat);this.todayTitle=this.dateHelper.format(d,_)}}onClickToday(){const s=new qr.Yp;this.clickToday.emit(s.clone())}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Br.mx))},g.\u0275cmp=e.Xpm({type:g,selectors:[["calendar-footer"]],inputs:{locale:"locale",showToday:"showToday",showNow:"showNow",hasTimePicker:"hasTimePicker",isRange:"isRange",okDisabled:"okDisabled",disabledDate:"disabledDate",extraFooter:"extraFooter",rangeQuickSelector:"rangeQuickSelector"},outputs:{clickOk:"clickOk",clickToday:"clickToday"},exportAs:["calendarFooter"],features:[e.TTD],decls:4,vars:6,consts:[[3,"class",4,"ngIf"],["role","button",3,"class","title","click",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngTemplateOutlet"],[3,"innerHTML"],["role","button",3,"title","click"],[3,"click"],["nz-button","","type","button","nzType","primary","nzSize","small",3,"disabled","click"]],template:function(s,d){1&s&&(e.TgZ(0,"div"),e.YNc(1,Rf,4,6,"div",0),e.YNc(2,F1,2,6,"a",1),e.YNc(3,Ff,4,6,"ul",0),e.qZA()),2&s&&(e.Gre("",d.prefixCls,"-footer"),e.xp6(1),e.Q6J("ngIf",d.extraFooter),e.xp6(1),e.Q6J("ngIf",d.showToday),e.xp6(1),e.Q6J("ngIf",d.hasTimePicker||d.rangeQuickSelector))},directives:[xn.ix,k.O5,k.RF,k.n9,k.tP,Rn.dQ,Ce.w],encapsulation:2,changeDetection:0}),g})(),Gn=(()=>{class g{constructor(){this.activeInput="left",this.arrowLeft=0,this.isRange=!1,this.valueChange$=new Qh.t(1),this.emitValue$=new O.x,this.inputPartChange$=new O.x}initValue(s=!1){s&&(this.initialValue=this.isRange?[]:null),this.setValue(this.initialValue)}hasValue(s=this.value){return Array.isArray(s)?!!s[0]||!!s[1]:!!s}makeValue(s){return this.isRange?s?s.map(d=>new qr.Yp(d)):[]:s?new qr.Yp(s):null}setActiveDate(s,d=!1,_="month"){this.activeDate=this.isRange?(0,qr._p)(s,d,{date:"month",month:"year",year:"decade"}[_],this.activeInput):(0,qr.ky)(s)}setValue(s){this.value=s,this.valueChange$.next(this.value)}getActiveIndex(s=this.activeInput){return{left:0,right:1}[s]}ngOnDestroy(){this.valueChange$.complete(),this.emitValue$.complete(),this.inputPartChange$.complete()}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275prov=e.Yz7({token:g,factory:g.\u0275fac}),g})(),dn=(()=>{class g{constructor(){this.prefixCls="ant-picker-header",this.selectors=[],this.showSuperPreBtn=!0,this.showSuperNextBtn=!0,this.showPreBtn=!0,this.showNextBtn=!0,this.panelModeChange=new e.vpe,this.valueChange=new e.vpe}superPreviousTitle(){return this.locale.previousYear}previousTitle(){return this.locale.previousMonth}superNextTitle(){return this.locale.nextYear}nextTitle(){return this.locale.nextMonth}superPrevious(){this.changeValue(this.value.addYears(-1))}superNext(){this.changeValue(this.value.addYears(1))}previous(){this.changeValue(this.value.addMonths(-1))}next(){this.changeValue(this.value.addMonths(1))}changeValue(s){this.value!==s&&(this.value=s,this.valueChange.emit(this.value),this.render())}changeMode(s){this.panelModeChange.emit(s)}render(){this.value&&(this.selectors=this.getSelectors())}ngOnInit(){this.value||(this.value=new qr.Yp),this.selectors=this.getSelectors()}ngOnChanges(s){(s.value||s.locale)&&this.render()}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275dir=e.lG2({type:g,inputs:{value:"value",locale:"locale",showSuperPreBtn:"showSuperPreBtn",showSuperNextBtn:"showSuperNextBtn",showPreBtn:"showPreBtn",showNextBtn:"showNextBtn"},outputs:{panelModeChange:"panelModeChange",valueChange:"valueChange"},features:[e.TTD]}),g})(),Xf=(()=>{class g extends dn{previous(){}next(){}get startYear(){return 100*parseInt(""+this.value.getYear()/100,10)}get endYear(){return this.startYear+99}superPrevious(){this.changeValue(this.value.addYears(-100))}superNext(){this.changeValue(this.value.addYears(100))}getSelectors(){return[{className:`${this.prefixCls}-decade-btn`,title:"",onClick:()=>{},label:`${this.startYear}-${this.endYear}`}]}}return g.\u0275fac=function(){let x;return function(d){return(x||(x=e.n5z(g)))(d||g)}}(),g.\u0275cmp=e.Xpm({type:g,selectors:[["decade-header"]],exportAs:["decadeHeader"],features:[e.qOj],decls:11,vars:31,consts:[["role","button","type","button","tabindex","-1",3,"title","click"],[1,"ant-picker-super-prev-icon"],[1,"ant-picker-prev-icon"],[4,"ngFor","ngForOf"],[1,"ant-picker-next-icon"],[1,"ant-picker-super-next-icon"],["role","button","type","button",3,"title","click"]],template:function(s,d){1&s&&(e.TgZ(0,"div")(1,"button",0),e.NdJ("click",function(){return d.superPrevious()}),e._UZ(2,"span",1),e.qZA(),e.TgZ(3,"button",0),e.NdJ("click",function(){return d.previous()}),e._UZ(4,"span",2),e.qZA(),e.TgZ(5,"div"),e.YNc(6,Wv,3,5,"ng-container",3),e.qZA(),e.TgZ(7,"button",0),e.NdJ("click",function(){return d.next()}),e._UZ(8,"span",4),e.qZA(),e.TgZ(9,"button",0),e.NdJ("click",function(){return d.superNext()}),e._UZ(10,"span",5),e.qZA()()),2&s&&(e.Tol(d.prefixCls),e.xp6(1),e.Gre("",d.prefixCls,"-super-prev-btn"),e.Udp("visibility",d.showSuperPreBtn?"visible":"hidden"),e.s9C("title",d.superPreviousTitle()),e.xp6(2),e.Gre("",d.prefixCls,"-prev-btn"),e.Udp("visibility",d.showPreBtn?"visible":"hidden"),e.s9C("title",d.previousTitle()),e.xp6(2),e.Gre("",d.prefixCls,"-view"),e.xp6(1),e.Q6J("ngForOf",d.selectors),e.xp6(1),e.Gre("",d.prefixCls,"-next-btn"),e.Udp("visibility",d.showNextBtn?"visible":"hidden"),e.s9C("title",d.nextTitle()),e.xp6(2),e.Gre("",d.prefixCls,"-super-next-btn"),e.Udp("visibility",d.showSuperNextBtn?"visible":"hidden"),e.s9C("title",d.superNextTitle()))},directives:[k.sg],encapsulation:2,changeDetection:0}),g})(),Oc=(()=>{class g{constructor(){this.isTemplateRef=fe.de,this.isNonEmptyString=fe.HH,this.headRow=[],this.bodyRows=[],this.MAX_ROW=6,this.MAX_COL=7,this.prefixCls="ant-picker",this.activeDate=new qr.Yp,this.showWeek=!1,this.selectedValue=[],this.hoverValue=[],this.valueChange=new e.vpe,this.cellHover=new e.vpe}render(){this.activeDate&&(this.headRow=this.makeHeadRow(),this.bodyRows=this.makeBodyRows())}trackByBodyRow(s,d){return d.trackByIndex}trackByBodyColumn(s,d){return d.trackByIndex}hasRangeValue(){var s,d;return(null===(s=this.selectedValue)||void 0===s?void 0:s.length)>0||(null===(d=this.hoverValue)||void 0===d?void 0:d.length)>0}getClassMap(s){return{"ant-picker-cell":!0,"ant-picker-cell-in-view":!0,"ant-picker-cell-selected":s.isSelected,"ant-picker-cell-disabled":s.isDisabled,"ant-picker-cell-in-range":!!s.isInSelectedRange,"ant-picker-cell-range-start":!!s.isSelectedStart,"ant-picker-cell-range-end":!!s.isSelectedEnd,"ant-picker-cell-range-start-single":!!s.isStartSingle,"ant-picker-cell-range-end-single":!!s.isEndSingle,"ant-picker-cell-range-hover":!!s.isInHoverRange,"ant-picker-cell-range-hover-start":!!s.isHoverStart,"ant-picker-cell-range-hover-end":!!s.isHoverEnd,"ant-picker-cell-range-hover-edge-start":!!s.isFirstCellInPanel,"ant-picker-cell-range-hover-edge-end":!!s.isLastCellInPanel,"ant-picker-cell-range-start-near-hover":!!s.isRangeStartNearHover,"ant-picker-cell-range-end-near-hover":!!s.isRangeEndNearHover}}ngOnInit(){this.render()}ngOnChanges(s){s.activeDate&&!s.activeDate.currentValue&&(this.activeDate=new qr.Yp),(s.disabledDate||s.locale||s.showWeek||this.isDateRealChange(s.activeDate)||this.isDateRealChange(s.value)||this.isDateRealChange(s.selectedValue)||this.isDateRealChange(s.hoverValue))&&this.render()}isDateRealChange(s){if(s){const d=s.previousValue,_=s.currentValue;return Array.isArray(_)?!Array.isArray(d)||_.length!==d.length||_.some((w,me)=>{const Re=d[me];return Re instanceof qr.Yp?Re.isSameDay(w):Re!==w}):!this.isSameDate(d,_)}return!1}isSameDate(s,d){return!s&&!d||s&&d&&d.isSameDay(s)}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275dir=e.lG2({type:g,inputs:{prefixCls:"prefixCls",value:"value",locale:"locale",activeDate:"activeDate",showWeek:"showWeek",selectedValue:"selectedValue",hoverValue:"hoverValue",disabledDate:"disabledDate",cellRender:"cellRender",fullCellRender:"fullCellRender"},outputs:{valueChange:"valueChange",cellHover:"cellHover"},features:[e.TTD]}),g})(),ep=(()=>{class g extends Oc{get startYear(){return 100*parseInt(""+this.activeDate.getYear()/100,10)}get endYear(){return this.startYear+99}makeHeadRow(){return[]}makeBodyRows(){const s=[],d=this.value&&this.value.getYear(),_=this.startYear,w=this.endYear,me=_-10;let Re=0;for(let at=0;at<4;at++){const ft={dateCells:[],trackByIndex:at};for(let xt=0;xt<3;xt++){const Bt=me+10*Re,Ot=me+10*Re+9,Cn=`${Bt}-${Ot}`,_r={trackByIndex:xt,value:this.activeDate.setYear(Bt).nativeDate,content:Cn,title:Cn,isDisabled:!1,isSelected:d>=Bt&&d<=Ot,isLowerThanStart:Ot<_,isBiggerThanEnd:Bt>w,classMap:{},onClick(){},onMouseEnter(){}};_r.classMap=this.getClassMap(_r),_r.onClick=()=>this.chooseDecade(Bt),Re++,ft.dateCells.push(_r)}s.push(ft)}return s}getClassMap(s){return{[`${this.prefixCls}-cell`]:!0,[`${this.prefixCls}-cell-in-view`]:!s.isBiggerThanEnd&&!s.isLowerThanStart,[`${this.prefixCls}-cell-selected`]:s.isSelected,[`${this.prefixCls}-cell-disabled`]:s.isDisabled}}chooseDecade(s){this.value=this.activeDate.setYear(s),this.valueChange.emit(this.value)}}return g.\u0275fac=function(){let x;return function(d){return(x||(x=e.n5z(g)))(d||g)}}(),g.\u0275cmp=e.Xpm({type:g,selectors:[["decade-table"]],exportAs:["decadeTable"],features:[e.qOj],decls:4,vars:3,consts:[["cellspacing","0","role","grid",1,"ant-picker-content"],[4,"ngIf"],["role","row",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["role","row"],["role","columnheader",4,"ngIf"],["role","columnheader",3,"title",4,"ngFor","ngForOf"],["role","columnheader"],["role","columnheader",3,"title"],["role","row",3,"ngClass"],["role","gridcell",3,"class",4,"ngIf"],["role","gridcell",3,"title","ngClass","click","mouseenter",4,"ngFor","ngForOf","ngForTrackBy"],["role","gridcell"],["role","gridcell",3,"title","ngClass","click","mouseenter"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"],[4,"ngIf","ngIfElse"],["defaultCell",""]],template:function(s,d){1&s&&(e.TgZ(0,"table",0),e.YNc(1,B1,4,2,"thead",1),e.TgZ(2,"tbody"),e.YNc(3,Qv,3,4,"tr",2),e.qZA()()),2&s&&(e.xp6(1),e.Q6J("ngIf",d.headRow&&d.headRow.length>0),e.xp6(2),e.Q6J("ngForOf",d.bodyRows)("ngForTrackBy",d.trackByBodyRow))},directives:[k.O5,k.sg,k.mk,k.RF,k.n9,k.tP,k.ED],encapsulation:2,changeDetection:0}),g})(),tp=(()=>{class g extends dn{get startYear(){return 10*parseInt(""+this.value.getYear()/10,10)}get endYear(){return this.startYear+9}superPrevious(){this.changeValue(this.value.addYears(-10))}superNext(){this.changeValue(this.value.addYears(10))}getSelectors(){return[{className:`${this.prefixCls}-year-btn`,title:"",onClick:()=>this.changeMode("decade"),label:`${this.startYear}-${this.endYear}`}]}}return g.\u0275fac=function(){let x;return function(d){return(x||(x=e.n5z(g)))(d||g)}}(),g.\u0275cmp=e.Xpm({type:g,selectors:[["year-header"]],exportAs:["yearHeader"],features:[e.qOj],decls:11,vars:31,consts:[["role","button","type","button","tabindex","-1",3,"title","click"],[1,"ant-picker-super-prev-icon"],[1,"ant-picker-prev-icon"],[4,"ngFor","ngForOf"],[1,"ant-picker-next-icon"],[1,"ant-picker-super-next-icon"],["role","button","type","button",3,"title","click"]],template:function(s,d){1&s&&(e.TgZ(0,"div")(1,"button",0),e.NdJ("click",function(){return d.superPrevious()}),e._UZ(2,"span",1),e.qZA(),e.TgZ(3,"button",0),e.NdJ("click",function(){return d.previous()}),e._UZ(4,"span",2),e.qZA(),e.TgZ(5,"div"),e.YNc(6,Y1,3,5,"ng-container",3),e.qZA(),e.TgZ(7,"button",0),e.NdJ("click",function(){return d.next()}),e._UZ(8,"span",4),e.qZA(),e.TgZ(9,"button",0),e.NdJ("click",function(){return d.superNext()}),e._UZ(10,"span",5),e.qZA()()),2&s&&(e.Tol(d.prefixCls),e.xp6(1),e.Gre("",d.prefixCls,"-super-prev-btn"),e.Udp("visibility",d.showSuperPreBtn?"visible":"hidden"),e.s9C("title",d.superPreviousTitle()),e.xp6(2),e.Gre("",d.prefixCls,"-prev-btn"),e.Udp("visibility",d.showPreBtn?"visible":"hidden"),e.s9C("title",d.previousTitle()),e.xp6(2),e.Gre("",d.prefixCls,"-view"),e.xp6(1),e.Q6J("ngForOf",d.selectors),e.xp6(1),e.Gre("",d.prefixCls,"-next-btn"),e.Udp("visibility",d.showNextBtn?"visible":"hidden"),e.s9C("title",d.nextTitle()),e.xp6(2),e.Gre("",d.prefixCls,"-super-next-btn"),e.Udp("visibility",d.showSuperNextBtn?"visible":"hidden"),e.s9C("title",d.superNextTitle()))},directives:[k.sg],encapsulation:2,changeDetection:0}),g})(),Pc=(()=>{class g extends Oc{constructor(s){super(),this.dateHelper=s,this.MAX_ROW=4,this.MAX_COL=3}makeHeadRow(){return[]}makeBodyRows(){const s=this.activeDate&&this.activeDate.getYear(),d=10*parseInt(""+s/10,10),_=d+9,w=d-1,me=[];let Re=0;for(let at=0;at<this.MAX_ROW;at++){const ft={dateCells:[],trackByIndex:at};for(let xt=0;xt<this.MAX_COL;xt++){const Bt=w+Re,Ot=this.activeDate.setYear(Bt),Cn=this.dateHelper.format(Ot.nativeDate,"yyyy"),_r=this.isDisabledYear(Ot),Hi={trackByIndex:xt,value:Ot.nativeDate,isDisabled:_r,isSameDecade:Bt>=d&&Bt<=_,isSelected:Bt===(this.value&&this.value.getYear()),content:Cn,title:Cn,classMap:{},isLastCellInPanel:Ot.getYear()===_,isFirstCellInPanel:Ot.getYear()===d,cellRender:(0,fe.rw)(this.cellRender,Ot),fullCellRender:(0,fe.rw)(this.fullCellRender,Ot),onClick:()=>this.chooseYear(Hi.value.getFullYear()),onMouseEnter:()=>this.cellHover.emit(Ot)};this.addCellProperty(Hi,Ot),ft.dateCells.push(Hi),Re++}me.push(ft)}return me}getClassMap(s){return Object.assign(Object.assign({},super.getClassMap(s)),{"ant-picker-cell-in-view":!!s.isSameDecade})}isDisabledYear(s){if(!this.disabledDate)return!1;for(let _=s.setMonth(0).setDate(1);_.getYear()===s.getYear();_=_.addDays(1))if(!this.disabledDate(_.nativeDate))return!1;return!0}addCellProperty(s,d){if(this.hasRangeValue()){const[_,w]=this.hoverValue,[me,Re]=this.selectedValue;(null==me?void 0:me.isSameYear(d))&&(s.isSelectedStart=!0,s.isSelected=!0),(null==Re?void 0:Re.isSameYear(d))&&(s.isSelectedEnd=!0,s.isSelected=!0),_&&w&&(s.isHoverStart=_.isSameYear(d),s.isHoverEnd=w.isSameYear(d),s.isInHoverRange=_.isBeforeYear(d)&&d.isBeforeYear(w)),s.isStartSingle=me&&!Re,s.isEndSingle=!me&&Re,s.isInSelectedRange=(null==me?void 0:me.isBeforeYear(d))&&(null==d?void 0:d.isBeforeYear(Re)),s.isRangeStartNearHover=me&&s.isInHoverRange,s.isRangeEndNearHover=Re&&s.isInHoverRange}else d.isSameYear(this.value)&&(s.isSelected=!0);s.classMap=this.getClassMap(s)}chooseYear(s){this.value=this.activeDate.setYear(s),this.valueChange.emit(this.value),this.render()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Br.mx))},g.\u0275cmp=e.Xpm({type:g,selectors:[["year-table"]],exportAs:["yearTable"],features:[e.qOj],decls:4,vars:3,consts:[["cellspacing","0","role","grid",1,"ant-picker-content"],[4,"ngIf"],["role","row",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["role","row"],["role","columnheader",4,"ngIf"],["role","columnheader",3,"title",4,"ngFor","ngForOf"],["role","columnheader"],["role","columnheader",3,"title"],["role","row",3,"ngClass"],["role","gridcell",3,"class",4,"ngIf"],["role","gridcell",3,"title","ngClass","click","mouseenter",4,"ngFor","ngForOf","ngForTrackBy"],["role","gridcell"],["role","gridcell",3,"title","ngClass","click","mouseenter"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"],[4,"ngIf","ngIfElse"],["defaultCell",""]],template:function(s,d){1&s&&(e.TgZ(0,"table",0),e.YNc(1,Vf,4,2,"thead",1),e.TgZ(2,"tbody"),e.YNc(3,Kv,3,4,"tr",2),e.qZA()()),2&s&&(e.xp6(1),e.Q6J("ngIf",d.headRow&&d.headRow.length>0),e.xp6(2),e.Q6J("ngForOf",d.bodyRows)("ngForTrackBy",d.trackByBodyRow))},directives:[k.O5,k.sg,k.mk,k.RF,k.n9,k.tP,k.ED],encapsulation:2,changeDetection:0}),g})(),td=(()=>{class g extends dn{constructor(s){super(),this.dateHelper=s}getSelectors(){return[{className:`${this.prefixCls}-month-btn`,title:this.locale.yearSelect,onClick:()=>this.changeMode("year"),label:this.dateHelper.format(this.value.nativeDate,Mc(this.locale.yearFormat))}]}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Br.mx))},g.\u0275cmp=e.Xpm({type:g,selectors:[["month-header"]],exportAs:["monthHeader"],features:[e.qOj],decls:11,vars:31,consts:[["role","button","type","button","tabindex","-1",3,"title","click"],[1,"ant-picker-super-prev-icon"],[1,"ant-picker-prev-icon"],[4,"ngFor","ngForOf"],[1,"ant-picker-next-icon"],[1,"ant-picker-super-next-icon"],["role","button","type","button",3,"title","click"]],template:function(s,d){1&s&&(e.TgZ(0,"div")(1,"button",0),e.NdJ("click",function(){return d.superPrevious()}),e._UZ(2,"span",1),e.qZA(),e.TgZ(3,"button",0),e.NdJ("click",function(){return d.previous()}),e._UZ(4,"span",2),e.qZA(),e.TgZ(5,"div"),e.YNc(6,$v,3,5,"ng-container",3),e.qZA(),e.TgZ(7,"button",0),e.NdJ("click",function(){return d.next()}),e._UZ(8,"span",4),e.qZA(),e.TgZ(9,"button",0),e.NdJ("click",function(){return d.superNext()}),e._UZ(10,"span",5),e.qZA()()),2&s&&(e.Tol(d.prefixCls),e.xp6(1),e.Gre("",d.prefixCls,"-super-prev-btn"),e.Udp("visibility",d.showSuperPreBtn?"visible":"hidden"),e.s9C("title",d.superPreviousTitle()),e.xp6(2),e.Gre("",d.prefixCls,"-prev-btn"),e.Udp("visibility",d.showPreBtn?"visible":"hidden"),e.s9C("title",d.previousTitle()),e.xp6(2),e.Gre("",d.prefixCls,"-view"),e.xp6(1),e.Q6J("ngForOf",d.selectors),e.xp6(1),e.Gre("",d.prefixCls,"-next-btn"),e.Udp("visibility",d.showNextBtn?"visible":"hidden"),e.s9C("title",d.nextTitle()),e.xp6(2),e.Gre("",d.prefixCls,"-super-next-btn"),e.Udp("visibility",d.showSuperNextBtn?"visible":"hidden"),e.s9C("title",d.superNextTitle()))},directives:[k.sg],encapsulation:2,changeDetection:0}),g})(),oa=(()=>{class g extends Oc{constructor(s){super(),this.dateHelper=s,this.MAX_ROW=4,this.MAX_COL=3}makeHeadRow(){return[]}makeBodyRows(){const s=[];let d=0;for(let _=0;_<this.MAX_ROW;_++){const w={dateCells:[],trackByIndex:_};for(let me=0;me<this.MAX_COL;me++){const Re=this.activeDate.setMonth(d),at=this.isDisabledMonth(Re),ft=this.dateHelper.format(Re.nativeDate,"MMM"),xt={trackByIndex:me,value:Re.nativeDate,isDisabled:at,isSelected:Re.isSameMonth(this.value),content:ft,title:ft,classMap:{},cellRender:(0,fe.rw)(this.cellRender,Re),fullCellRender:(0,fe.rw)(this.fullCellRender,Re),onClick:()=>this.chooseMonth(xt.value.getMonth()),onMouseEnter:()=>this.cellHover.emit(Re)};this.addCellProperty(xt,Re),w.dateCells.push(xt),d++}s.push(w)}return s}isDisabledMonth(s){if(!this.disabledDate)return!1;for(let _=s.setDate(1);_.getMonth()===s.getMonth();_=_.addDays(1))if(!this.disabledDate(_.nativeDate))return!1;return!0}addCellProperty(s,d){if(this.hasRangeValue()){const[_,w]=this.hoverValue,[me,Re]=this.selectedValue;(null==me?void 0:me.isSameMonth(d))&&(s.isSelectedStart=!0,s.isSelected=!0),(null==Re?void 0:Re.isSameMonth(d))&&(s.isSelectedEnd=!0,s.isSelected=!0),_&&w&&(s.isHoverStart=_.isSameMonth(d),s.isHoverEnd=w.isSameMonth(d),s.isLastCellInPanel=11===d.getMonth(),s.isFirstCellInPanel=0===d.getMonth(),s.isInHoverRange=_.isBeforeMonth(d)&&d.isBeforeMonth(w)),s.isStartSingle=me&&!Re,s.isEndSingle=!me&&Re,s.isInSelectedRange=(null==me?void 0:me.isBeforeMonth(d))&&(null==d?void 0:d.isBeforeMonth(Re)),s.isRangeStartNearHover=me&&s.isInHoverRange,s.isRangeEndNearHover=Re&&s.isInHoverRange}else d.isSameMonth(this.value)&&(s.isSelected=!0);s.classMap=this.getClassMap(s)}chooseMonth(s){this.value=this.activeDate.setMonth(s),this.valueChange.emit(this.value)}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Br.mx))},g.\u0275cmp=e.Xpm({type:g,selectors:[["month-table"]],exportAs:["monthTable"],features:[e.qOj],decls:4,vars:3,consts:[["cellspacing","0","role","grid",1,"ant-picker-content"],[4,"ngIf"],["role","row",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["role","row"],["role","columnheader",4,"ngIf"],["role","columnheader",3,"title",4,"ngFor","ngForOf"],["role","columnheader"],["role","columnheader",3,"title"],["role","row",3,"ngClass"],["role","gridcell",3,"class",4,"ngIf"],["role","gridcell",3,"title","ngClass","click","mouseenter",4,"ngFor","ngForOf","ngForTrackBy"],["role","gridcell"],["role","gridcell",3,"title","ngClass","click","mouseenter"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"],[4,"ngIf","ngIfElse"],["defaultCell",""]],template:function(s,d){1&s&&(e.TgZ(0,"table",0),e.YNc(1,j1,4,2,"thead",1),e.TgZ(2,"tbody"),e.YNc(3,Yf,3,4,"tr",2),e.qZA()()),2&s&&(e.xp6(1),e.Q6J("ngIf",d.headRow&&d.headRow.length>0),e.xp6(2),e.Q6J("ngForOf",d.bodyRows)("ngForTrackBy",d.trackByBodyRow))},directives:[k.O5,k.sg,k.mk,k.RF,k.n9,k.tP,k.ED],encapsulation:2,changeDetection:0}),g})(),Ic=(()=>{class g extends dn{constructor(s){super(),this.dateHelper=s}getSelectors(){return[{className:`${this.prefixCls}-year-btn`,title:this.locale.yearSelect,onClick:()=>this.changeMode("year"),label:this.dateHelper.format(this.value.nativeDate,Mc(this.locale.yearFormat))},{className:`${this.prefixCls}-month-btn`,title:this.locale.monthSelect,onClick:()=>this.changeMode("month"),label:this.dateHelper.format(this.value.nativeDate,this.locale.monthFormat||"MMM")}]}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Br.mx))},g.\u0275cmp=e.Xpm({type:g,selectors:[["date-header"]],exportAs:["dateHeader"],features:[e.qOj],decls:11,vars:31,consts:[["role","button","type","button","tabindex","-1",3,"title","click"],[1,"ant-picker-super-prev-icon"],[1,"ant-picker-prev-icon"],[4,"ngFor","ngForOf"],[1,"ant-picker-next-icon"],[1,"ant-picker-super-next-icon"],["role","button","type","button",3,"title","click"]],template:function(s,d){1&s&&(e.TgZ(0,"div")(1,"button",0),e.NdJ("click",function(){return d.superPrevious()}),e._UZ(2,"span",1),e.qZA(),e.TgZ(3,"button",0),e.NdJ("click",function(){return d.previous()}),e._UZ(4,"span",2),e.qZA(),e.TgZ(5,"div"),e.YNc(6,Qs,3,5,"ng-container",3),e.qZA(),e.TgZ(7,"button",0),e.NdJ("click",function(){return d.next()}),e._UZ(8,"span",4),e.qZA(),e.TgZ(9,"button",0),e.NdJ("click",function(){return d.superNext()}),e._UZ(10,"span",5),e.qZA()()),2&s&&(e.Tol(d.prefixCls),e.xp6(1),e.Gre("",d.prefixCls,"-super-prev-btn"),e.Udp("visibility",d.showSuperPreBtn?"visible":"hidden"),e.s9C("title",d.superPreviousTitle()),e.xp6(2),e.Gre("",d.prefixCls,"-prev-btn"),e.Udp("visibility",d.showPreBtn?"visible":"hidden"),e.s9C("title",d.previousTitle()),e.xp6(2),e.Gre("",d.prefixCls,"-view"),e.xp6(1),e.Q6J("ngForOf",d.selectors),e.xp6(1),e.Gre("",d.prefixCls,"-next-btn"),e.Udp("visibility",d.showNextBtn?"visible":"hidden"),e.s9C("title",d.nextTitle()),e.xp6(2),e.Gre("",d.prefixCls,"-super-next-btn"),e.Udp("visibility",d.showSuperNextBtn?"visible":"hidden"),e.s9C("title",d.superNextTitle()))},directives:[k.sg],encapsulation:2,changeDetection:0}),g})(),xu=(()=>{class g extends Oc{constructor(s,d){super(),this.i18n=s,this.dateHelper=d}changeValueFromInside(s){this.activeDate=this.activeDate.setYear(s.getYear()).setMonth(s.getMonth()).setDate(s.getDate()),this.valueChange.emit(this.activeDate),this.activeDate.isSameMonth(this.value)||this.render()}makeHeadRow(){const s=[],d=this.activeDate.calendarStart({weekStartsOn:this.dateHelper.getFirstDayOfWeek()});for(let _=0;_<this.MAX_COL;_++){const w=d.addDays(_);s.push({trackByIndex:null,value:w.nativeDate,title:this.dateHelper.format(w.nativeDate,"E"),content:this.dateHelper.format(w.nativeDate,this.getVeryShortWeekFormat()),isSelected:!1,isDisabled:!1,onClick(){},onMouseEnter(){}})}return s}getVeryShortWeekFormat(){return 0===this.i18n.getLocaleId().toLowerCase().indexOf("zh")?"EEEEE":"EEEEEE"}makeBodyRows(){const s=[],d=this.activeDate.calendarStart({weekStartsOn:this.dateHelper.getFirstDayOfWeek()});for(let _=0;_<this.MAX_ROW;_++){const w=d.addDays(7*_),me={isActive:!1,dateCells:[],trackByIndex:_};for(let Re=0;Re<7;Re++){const at=w.addDays(Re),ft=Mc(this.i18n.getLocaleData("DatePicker.lang.dateFormat","YYYY-MM-DD")),xt=this.dateHelper.format(at.nativeDate,ft),Bt=this.dateHelper.format(at.nativeDate,"dd"),Ot={trackByIndex:Re,value:at.nativeDate,label:Bt,isSelected:!1,isDisabled:!1,isToday:!1,title:xt,cellRender:(0,fe.rw)(this.cellRender,at),fullCellRender:(0,fe.rw)(this.fullCellRender,at),content:`${at.getDate()}`,onClick:()=>this.changeValueFromInside(at),onMouseEnter:()=>this.cellHover.emit(at)};this.addCellProperty(Ot,at),this.showWeek&&!me.weekNum&&(me.weekNum=this.dateHelper.getISOWeek(at.nativeDate)),at.isSameDay(this.value)&&(me.isActive=at.isSameDay(this.value)),me.dateCells.push(Ot)}me.classMap={"ant-picker-week-panel-row":this.showWeek,"ant-picker-week-panel-row-selected":this.showWeek&&me.isActive},s.push(me)}return s}addCellProperty(s,d){var _;if(this.hasRangeValue()&&!this.showWeek){const[w,me]=this.hoverValue,[Re,at]=this.selectedValue;(null==Re?void 0:Re.isSameDay(d))&&(s.isSelectedStart=!0,s.isSelected=!0),(null==at?void 0:at.isSameDay(d))&&(s.isSelectedEnd=!0,s.isSelected=!0),w&&me&&(s.isHoverStart=w.isSameDay(d),s.isHoverEnd=me.isSameDay(d),s.isLastCellInPanel=d.isLastDayOfMonth(),s.isFirstCellInPanel=d.isFirstDayOfMonth(),s.isInHoverRange=w.isBeforeDay(d)&&d.isBeforeDay(me)),s.isStartSingle=Re&&!at,s.isEndSingle=!Re&&at,s.isInSelectedRange=(null==Re?void 0:Re.isBeforeDay(d))&&d.isBeforeDay(at),s.isRangeStartNearHover=Re&&s.isInHoverRange,s.isRangeEndNearHover=at&&s.isInHoverRange}s.isToday=d.isToday(),s.isSelected=d.isSameDay(this.value),s.isDisabled=!!(null===(_=this.disabledDate)||void 0===_?void 0:_.call(this,d.nativeDate)),s.classMap=this.getClassMap(s)}getClassMap(s){const d=new qr.Yp(s.value);return Object.assign(Object.assign({},super.getClassMap(s)),{"ant-picker-cell-today":!!s.isToday,"ant-picker-cell-in-view":d.isSameMonth(this.activeDate)})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Br.wi),e.Y36(Br.mx))},g.\u0275cmp=e.Xpm({type:g,selectors:[["date-table"]],inputs:{locale:"locale"},exportAs:["dateTable"],features:[e.qOj],decls:4,vars:3,consts:[["cellspacing","0","role","grid",1,"ant-picker-content"],[4,"ngIf"],["role","row",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["role","row"],["role","columnheader",4,"ngIf"],["role","columnheader",3,"title",4,"ngFor","ngForOf"],["role","columnheader"],["role","columnheader",3,"title"],["role","row",3,"ngClass"],["role","gridcell",3,"class",4,"ngIf"],["role","gridcell",3,"title","ngClass","click","mouseenter",4,"ngFor","ngForOf","ngForTrackBy"],["role","gridcell"],["role","gridcell",3,"title","ngClass","click","mouseenter"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"],[4,"ngIf","ngIfElse"],["defaultCell",""]],template:function(s,d){1&s&&(e.TgZ(0,"table",0),e.YNc(1,qf,4,2,"thead",1),e.TgZ(2,"tbody"),e.YNc(3,Vl,3,4,"tr",2),e.qZA()()),2&s&&(e.xp6(1),e.Q6J("ngIf",d.headRow&&d.headRow.length>0),e.xp6(2),e.Q6J("ngForOf",d.bodyRows)("ngForTrackBy",d.trackByBodyRow))},directives:[k.O5,k.sg,k.mk,k.RF,k.n9,k.tP,k.ED],encapsulation:2,changeDetection:0}),g})(),TC=(()=>{class g{constructor(){this.panelModeChange=new e.vpe,this.headerChange=new e.vpe,this.selectDate=new e.vpe,this.selectTime=new e.vpe,this.cellHover=new e.vpe,this.prefixCls=Ac}enablePrevNext(s,d){return!(!this.showTimePicker&&d===this.endPanelMode&&("left"===this.partType&&"next"===s||"right"===this.partType&&"prev"===s))}onSelectTime(s){this.selectTime.emit(new qr.Yp(s))}onSelectDate(s){const d=s instanceof qr.Yp?s:new qr.Yp(s),_=this.timeOptions&&this.timeOptions.nzDefaultOpenValue;!this.value&&_&&d.setHms(_.getHours(),_.getMinutes(),_.getSeconds()),this.selectDate.emit(d)}onChooseMonth(s){this.activeDate=this.activeDate.setMonth(s.getMonth()),"month"===this.endPanelMode?(this.value=s,this.selectDate.emit(s)):(this.headerChange.emit(s),this.panelModeChange.emit(this.endPanelMode))}onChooseYear(s){this.activeDate=this.activeDate.setYear(s.getYear()),"year"===this.endPanelMode?(this.value=s,this.selectDate.emit(s)):(this.headerChange.emit(s),this.panelModeChange.emit(this.endPanelMode))}onChooseDecade(s){this.activeDate=this.activeDate.setYear(s.getYear()),"decade"===this.endPanelMode?(this.value=s,this.selectDate.emit(s)):(this.headerChange.emit(s),this.panelModeChange.emit("year"))}ngOnChanges(s){s.activeDate&&!s.activeDate.currentValue&&(this.activeDate=new qr.Yp),s.panelMode&&"time"===s.panelMode.currentValue&&(this.panelMode="date")}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275cmp=e.Xpm({type:g,selectors:[["inner-popup"]],inputs:{activeDate:"activeDate",endPanelMode:"endPanelMode",panelMode:"panelMode",showWeek:"showWeek",locale:"locale",showTimePicker:"showTimePicker",timeOptions:"timeOptions",disabledDate:"disabledDate",dateRender:"dateRender",selectedValue:"selectedValue",hoverValue:"hoverValue",value:"value",partType:"partType"},outputs:{panelModeChange:"panelModeChange",headerChange:"headerChange",selectDate:"selectDate",selectTime:"selectTime",cellHover:"cellHover"},exportAs:["innerPopup"],features:[e.TTD],decls:8,vars:11,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngIf"],[3,"value","locale","showSuperPreBtn","showSuperNextBtn","showNextBtn","showPreBtn","valueChange","panelModeChange"],[3,"activeDate","value","locale","disabledDate","valueChange"],[3,"activeDate","value","locale","disabledDate","selectedValue","hoverValue","valueChange","cellHover"],[3,"value","activeDate","locale","disabledDate","selectedValue","hoverValue","valueChange","cellHover"],[3,"value","locale","showSuperPreBtn","showSuperNextBtn","showPreBtn","showNextBtn","valueChange","panelModeChange"],[3,"locale","showWeek","value","activeDate","disabledDate","cellRender","selectedValue","hoverValue","valueChange","cellHover"],[3,"nzInDatePicker","ngModel","format","nzHourStep","nzMinuteStep","nzSecondStep","nzDisabledHours","nzDisabledMinutes","nzDisabledSeconds","nzHideDisabledOptions","nzDefaultOpenValue","nzUse12Hours","nzAddOn","ngModelChange"]],template:function(s,d){1&s&&(e.TgZ(0,"div")(1,"div"),e.ynx(2,0),e.YNc(3,nC,4,13,"ng-container",1),e.YNc(4,rC,4,15,"ng-container",1),e.YNc(5,aa,4,15,"ng-container",1),e.YNc(6,ja,4,17,"ng-container",2),e.BQk(),e.qZA(),e.YNc(7,iC,2,13,"ng-container",3),e.qZA()),2&s&&(e.ekj("ant-picker-datetime-panel",d.showTimePicker),e.xp6(1),e.MT6("",d.prefixCls,"-",d.panelMode,"-panel"),e.xp6(1),e.Q6J("ngSwitch",d.panelMode),e.xp6(1),e.Q6J("ngSwitchCase","decade"),e.xp6(1),e.Q6J("ngSwitchCase","year"),e.xp6(1),e.Q6J("ngSwitchCase","month"),e.xp6(2),e.Q6J("ngIf",d.showTimePicker&&d.timeOptions))},directives:[Xf,ep,tp,Pc,td,oa,Ic,xu,Rh,k.RF,k.n9,k.ED,k.O5,M.JJ,M.On],encapsulation:2,changeDetection:0}),g})(),js=(()=>{class g{constructor(s,d,_,w){this.datePickerService=s,this.cdr=d,this.ngZone=_,this.host=w,this.inline=!1,this.dir="ltr",this.panelModeChange=new e.vpe,this.calendarChange=new e.vpe,this.resultOk=new e.vpe,this.prefixCls=Ac,this.endPanelMode="date",this.timeOptions=null,this.hoverValue=[],this.checkedPartArr=[!1,!1],this.destroy$=new O.x,this.disabledStartTime=me=>this.disabledTime&&this.disabledTime(me,"start"),this.disabledEndTime=me=>this.disabledTime&&this.disabledTime(me,"end")}get hasTimePicker(){return!!this.showTime}get hasFooter(){return this.showToday||this.hasTimePicker||!!this.extraFooter||!!this.ranges}ngOnInit(){(0,G.T)(this.datePickerService.valueChange$,this.datePickerService.inputPartChange$).pipe((0,ee.R)(this.destroy$)).subscribe(()=>{this.updateActiveDate(),this.cdr.markForCheck()}),this.ngZone.runOutsideAngular(()=>{(0,b.R)(this.host.nativeElement,"mousedown").pipe((0,ee.R)(this.destroy$)).subscribe(s=>s.preventDefault())})}ngOnChanges(s){(s.showTime||s.disabledTime)&&this.showTime&&this.buildTimeOptions(),s.panelMode&&(this.endPanelMode=this.panelMode),s.defaultPickerValue&&this.updateActiveDate()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}updateActiveDate(){const s=this.datePickerService.hasValue()?this.datePickerService.value:this.datePickerService.makeValue(this.defaultPickerValue);this.datePickerService.setActiveDate(s,this.hasTimePicker,this.getPanelMode(this.endPanelMode))}onClickOk(){this.changeValueFromSelect(this.isRange?this.datePickerService.value[{left:0,right:1}[this.datePickerService.activeInput]]:this.datePickerService.value),this.resultOk.emit()}onClickToday(s){this.changeValueFromSelect(s,!this.showTime)}onCellHover(s){if(!this.isRange)return;const _=this.datePickerService.value[{left:1,right:0}[this.datePickerService.activeInput]];_&&(this.hoverValue=_.isBeforeDay(s)?[_,s]:[s,_])}onPanelModeChange(s,d){this.panelMode=this.isRange?0===this.datePickerService.getActiveIndex(d)?[s,this.panelMode[1]]:[this.panelMode[0],s]:s,this.panelModeChange.emit(this.panelMode)}onActiveDateChange(s,d){if(this.isRange){const _=[];_[this.datePickerService.getActiveIndex(d)]=s,this.datePickerService.setActiveDate(_,this.hasTimePicker,this.getPanelMode(this.endPanelMode,d))}else this.datePickerService.setActiveDate(s)}onSelectTime(s,d){if(this.isRange){const _=(0,qr.ky)(this.datePickerService.value),w=this.datePickerService.getActiveIndex(d);_[w]=this.overrideHms(s,_[w]),this.datePickerService.setValue(_)}else{const _=this.overrideHms(s,this.datePickerService.value);this.datePickerService.setValue(_)}this.datePickerService.inputPartChange$.next(),this.buildTimeOptions()}changeValueFromSelect(s,d=!0){if(this.isRange){const _=(0,qr.ky)(this.datePickerService.value),w=this.datePickerService.activeInput;let me=w;_[this.datePickerService.getActiveIndex(w)]=s,this.checkedPartArr[this.datePickerService.getActiveIndex(w)]=!0,this.hoverValue=_,d?this.inline?(me=this.reversedPart(w),"right"===me&&(_[this.datePickerService.getActiveIndex(me)]=null,this.checkedPartArr[this.datePickerService.getActiveIndex(me)]=!1),this.datePickerService.setValue(_),this.calendarChange.emit(_),this.isBothAllowed(_)&&this.checkedPartArr[0]&&this.checkedPartArr[1]&&(this.clearHoverValue(),this.datePickerService.emitValue$.next())):((0,qr.Et)(_)&&(me=this.reversedPart(w),_[this.datePickerService.getActiveIndex(me)]=null,this.checkedPartArr[this.datePickerService.getActiveIndex(me)]=!1),this.datePickerService.setValue(_),this.isBothAllowed(_)&&this.checkedPartArr[0]&&this.checkedPartArr[1]?(this.calendarChange.emit(_),this.clearHoverValue(),this.datePickerService.emitValue$.next()):this.isAllowed(_)&&(me=this.reversedPart(w),this.calendarChange.emit([s.clone()]))):this.datePickerService.setValue(_),this.datePickerService.inputPartChange$.next(me)}else this.datePickerService.setValue(s),this.datePickerService.inputPartChange$.next(),d&&this.isAllowed(s)&&this.datePickerService.emitValue$.next();this.buildTimeOptions()}reversedPart(s){return"left"===s?"right":"left"}getPanelMode(s,d){return this.isRange?s[this.datePickerService.getActiveIndex(d)]:s}getValue(s){return this.isRange?(this.datePickerService.value||[])[this.datePickerService.getActiveIndex(s)]:this.datePickerService.value}getActiveDate(s){return this.isRange?this.datePickerService.activeDate[this.datePickerService.getActiveIndex(s)]:this.datePickerService.activeDate}isOneAllowed(s){const d=this.datePickerService.getActiveIndex();return Ec(s[d],this.disabledDate,[this.disabledStartTime,this.disabledEndTime][d])}isBothAllowed(s){return Ec(s[0],this.disabledDate,this.disabledStartTime)&&Ec(s[1],this.disabledDate,this.disabledEndTime)}isAllowed(s,d=!1){return this.isRange?d?this.isBothAllowed(s):this.isOneAllowed(s):Ec(s,this.disabledDate,this.disabledTime)}getTimeOptions(s){return this.showTime&&this.timeOptions?this.timeOptions instanceof Array?this.timeOptions[this.datePickerService.getActiveIndex(s)]:this.timeOptions:null}onClickPresetRange(s){const d="function"==typeof s?s():s;d&&(this.datePickerService.setValue([new qr.Yp(d[0]),new qr.Yp(d[1])]),this.datePickerService.emitValue$.next())}onPresetRangeMouseLeave(){this.clearHoverValue()}onHoverPresetRange(s){"function"!=typeof s&&(this.hoverValue=[new qr.Yp(s[0]),new qr.Yp(s[1])])}getObjectKeys(s){return s?Object.keys(s):[]}show(s){return!(this.showTime&&this.isRange&&this.datePickerService.activeInput!==s)}clearHoverValue(){this.hoverValue=[]}buildTimeOptions(){if(this.showTime){const s="object"==typeof this.showTime?this.showTime:{};if(this.isRange){const d=this.datePickerService.value;this.timeOptions=[this.overrideTimeOptions(s,d[0],"start"),this.overrideTimeOptions(s,d[1],"end")]}else this.timeOptions=this.overrideTimeOptions(s,this.datePickerService.value)}else this.timeOptions=null}overrideTimeOptions(s,d,_){let w;return w=_?"start"===_?this.disabledStartTime:this.disabledEndTime:this.disabledTime,Object.assign(Object.assign({},s),$f(d,w))}overrideHms(s,d){return s=s||new qr.Yp,(d=d||new qr.Yp).setHms(s.getHours(),s.getMinutes(),s.getSeconds())}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Gn),e.Y36(e.sBO),e.Y36(e.R0b),e.Y36(e.SBq))},g.\u0275cmp=e.Xpm({type:g,selectors:[["date-range-popup"]],inputs:{isRange:"isRange",inline:"inline",showWeek:"showWeek",locale:"locale",disabledDate:"disabledDate",disabledTime:"disabledTime",showToday:"showToday",showNow:"showNow",showTime:"showTime",extraFooter:"extraFooter",ranges:"ranges",dateRender:"dateRender",panelMode:"panelMode",defaultPickerValue:"defaultPickerValue",dir:"dir"},outputs:{panelModeChange:"panelModeChange",calendarChange:"calendarChange",resultOk:"resultOk"},exportAs:["dateRangePopup"],features:[e.TTD],decls:9,vars:2,consts:[[4,"ngIf","ngIfElse"],["singlePanel",""],["tplInnerPopup",""],["tplFooter",""],["tplRangeQuickSelector",""],["noTimePicker",""],[4,"ngTemplateOutlet"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["tabindex","-1"],[3,"showWeek","endPanelMode","partType","locale","showTimePicker","timeOptions","panelMode","activeDate","value","disabledDate","dateRender","selectedValue","hoverValue","panelModeChange","cellHover","selectDate","selectTime","headerChange"],[3,"locale","isRange","showToday","showNow","hasTimePicker","okDisabled","extraFooter","rangeQuickSelector","clickOk","clickToday",4,"ngIf"],[3,"locale","isRange","showToday","showNow","hasTimePicker","okDisabled","extraFooter","rangeQuickSelector","clickOk","clickToday"],[3,"class","click","mouseenter","mouseleave",4,"ngFor","ngForOf"],[3,"click","mouseenter","mouseleave"],[1,"ant-tag","ant-tag-blue"]],template:function(s,d){if(1&s&&(e.YNc(0,cC,9,18,"ng-container",0),e.YNc(1,rm,4,13,"ng-template",null,1,e.W1O),e.YNc(3,Dc,2,18,"ng-template",null,2,e.W1O),e.YNc(5,fC,1,1,"ng-template",null,3,e.W1O),e.YNc(7,im,1,1,"ng-template",null,4,e.W1O)),2&s){const _=e.MAs(2);e.Q6J("ngIf",d.isRange)("ngIfElse",_)}},directives:[TC,jf,k.O5,k.tP,k.sg],encapsulation:2,changeDetection:0}),g})();const Tu={position:"relative"};let Lc=(()=>{class g{constructor(s,d,_,w,me,Re,at,ft,xt,Bt,Ot,Cn){this.nzConfigService=s,this.datePickerService=d,this.i18n=_,this.cdr=w,this.renderer=me,this.elementRef=Re,this.dateHelper=at,this.nzResizeObserver=ft,this.platform=xt,this.directionality=Ot,this.noAnimation=Cn,this._nzModuleName="datePicker",this.isRange=!1,this.dir="ltr",this.panelMode="date",this.destroyed$=new O.x,this.isCustomPlaceHolder=!1,this.isCustomFormat=!1,this.showTime=!1,this.nzAllowClear=!0,this.nzAutoFocus=!1,this.nzDisabled=!1,this.nzBorderless=!1,this.nzInputReadOnly=!1,this.nzInline=!1,this.nzPlaceHolder="",this.nzPopupStyle=Tu,this.nzSize="default",this.nzShowToday=!0,this.nzMode="date",this.nzShowNow=!0,this.nzDefaultPickerValue=null,this.nzSeparator=void 0,this.nzSuffixIcon="calendar",this.nzBackdrop=!1,this.nzId=null,this.nzOnPanelChange=new e.vpe,this.nzOnCalendarChange=new e.vpe,this.nzOnOk=new e.vpe,this.nzOnOpenChange=new e.vpe,this.inputSize=12,this.prefixCls=Ac,this.activeBarStyle={},this.overlayOpen=!1,this.overlayPositions=[{offsetY:2,originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{offsetY:-2,originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{offsetY:2,originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{offsetY:-2,originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}],this.currentPositionX="start",this.currentPositionY="bottom",this.onChangeFn=()=>{},this.onTouchedFn=()=>{},this.document=Bt,this.origin=new st.xu(this.elementRef)}get nzShowTime(){return this.showTime}set nzShowTime(s){this.showTime="object"==typeof s?s:(0,fe.sw)(s)}get realOpenState(){return this.isOpenHandledByUser()?!!this.nzOpen:this.overlayOpen}ngAfterViewInit(){this.nzAutoFocus&&this.focus(),this.isRange&&this.platform.isBrowser&&this.nzResizeObserver.observe(this.elementRef).pipe((0,ee.R)(this.destroyed$)).subscribe(()=>{this.updateInputWidthAndArrowLeft()}),this.datePickerService.inputPartChange$.pipe((0,ee.R)(this.destroyed$)).subscribe(s=>{s&&(this.datePickerService.activeInput=s),this.focus(),this.updateInputWidthAndArrowLeft()})}updateInputWidthAndArrowLeft(){var s,d,_;this.inputWidth=(null===(d=null===(s=this.rangePickerInputs)||void 0===s?void 0:s.first)||void 0===d?void 0:d.nativeElement.offsetWidth)||0;const w={position:"absolute",width:`${this.inputWidth}px`};this.datePickerService.arrowLeft="left"===this.datePickerService.activeInput?0:this.inputWidth+(null===(_=this.separatorElement)||void 0===_?void 0:_.nativeElement.offsetWidth)||0,this.activeBarStyle=Object.assign(Object.assign({},w),"rtl"===this.dir?{right:`${this.datePickerService.arrowLeft}px`}:{left:`${this.datePickerService.arrowLeft}px`}),this.cdr.markForCheck()}getInput(s){var d,_;if(!this.nzInline)return this.isRange?"left"===s?null===(d=this.rangePickerInputs)||void 0===d?void 0:d.first.nativeElement:null===(_=this.rangePickerInputs)||void 0===_?void 0:_.last.nativeElement:this.pickerInput.nativeElement}focus(){const s=this.getInput(this.datePickerService.activeInput);this.document.activeElement!==s&&(null==s||s.focus())}onFocus(s,d){s.preventDefault(),d&&this.datePickerService.inputPartChange$.next(d),this.renderClass(!0)}onFocusout(s){s.preventDefault(),this.elementRef.nativeElement.contains(s.relatedTarget)||this.checkAndClose(),this.renderClass(!1)}open(){this.nzInline||!this.realOpenState&&!this.nzDisabled&&(this.updateInputWidthAndArrowLeft(),this.overlayOpen=!0,this.nzOnOpenChange.emit(!0),this.cdr.markForCheck())}close(){this.nzInline||this.realOpenState&&(this.overlayOpen=!1,this.nzOnOpenChange.emit(!1))}showClear(){return!this.nzDisabled&&!this.isEmptyValue(this.datePickerService.value)&&this.nzAllowClear}checkAndClose(){if(this.realOpenState)if(this.panel.isAllowed(this.datePickerService.value,!0)){if(Array.isArray(this.datePickerService.value)&&(0,qr.Et)(this.datePickerService.value)){const s=this.datePickerService.getActiveIndex();return void this.panel.changeValueFromSelect(this.datePickerService.value[s],!0)}this.updateInputValue(),this.datePickerService.emitValue$.next()}else this.datePickerService.setValue(this.datePickerService.initialValue),this.close()}onClickInputBox(s){s.stopPropagation(),this.focus(),this.isOpenHandledByUser()||this.open()}onOverlayKeydown(s){s.keyCode===Q.hY&&this.datePickerService.initValue()}onPositionChange(s){this.currentPositionX=s.connectionPair.originX,this.currentPositionY=s.connectionPair.originY,this.cdr.detectChanges()}onClickClear(s){s.preventDefault(),s.stopPropagation(),this.datePickerService.initValue(!0),this.datePickerService.emitValue$.next()}updateInputValue(){const s=this.datePickerService.value;this.inputValue=this.isRange?s?s.map(d=>this.formatValue(d)):["",""]:this.formatValue(s),this.cdr.markForCheck()}formatValue(s){return this.dateHelper.format(s&&s.nativeDate,this.nzFormat)}onInputChange(s,d=!1){if(!this.platform.TRIDENT&&this.document.activeElement===this.getInput(this.datePickerService.activeInput)&&!this.realOpenState)return void this.open();const _=this.checkValidDate(s);_&&this.realOpenState&&this.panel.changeValueFromSelect(_,d)}onKeyupEnter(s){this.onInputChange(s.target.value,!0)}checkValidDate(s){const d=new qr.Yp(this.dateHelper.parseDate(s,this.nzFormat));return d.isValid()&&s===this.dateHelper.format(d.nativeDate,this.nzFormat)?d:null}getPlaceholder(s){return this.isRange?this.nzPlaceHolder[this.datePickerService.getActiveIndex(s)]:this.nzPlaceHolder}isEmptyValue(s){return null===s||(this.isRange?!s||!Array.isArray(s)||s.every(d=>!d):!s)}isOpenHandledByUser(){return void 0!==this.nzOpen}ngOnInit(){var s;this.nzLocale||this.i18n.localeChange.pipe((0,ee.R)(this.destroyed$)).subscribe(()=>this.setLocale()),this.datePickerService.isRange=this.isRange,this.datePickerService.initValue(!0),this.datePickerService.emitValue$.pipe((0,ee.R)(this.destroyed$)).subscribe(d=>{var _,w,me,Re;const at=this.datePickerService.value;if(this.datePickerService.initialValue=(0,qr.ky)(at),this.isRange){const ft=at;this.onChangeFn(ft.length?[null!==(w=null===(_=ft[0])||void 0===_?void 0:_.nativeDate)&&void 0!==w?w:null,null!==(Re=null===(me=ft[1])||void 0===me?void 0:me.nativeDate)&&void 0!==Re?Re:null]:[])}else this.onChangeFn(at?at.nativeDate:null);this.onTouchedFn(),this.close()}),null===(s=this.directionality.change)||void 0===s||s.pipe((0,ee.R)(this.destroyed$)).subscribe(d=>{this.dir=d,this.cdr.detectChanges()}),this.dir=this.directionality.value,this.inputValue=this.isRange?["",""]:"",this.setModeAndFormat(),this.datePickerService.valueChange$.pipe((0,ee.R)(this.destroyed$)).subscribe(()=>{this.updateInputValue()})}ngOnChanges(s){var d,_;s.nzPopupStyle&&(this.nzPopupStyle=this.nzPopupStyle?Object.assign(Object.assign({},this.nzPopupStyle),Tu):Tu),(null===(d=s.nzPlaceHolder)||void 0===d?void 0:d.currentValue)&&(this.isCustomPlaceHolder=!0),(null===(_=s.nzFormat)||void 0===_?void 0:_.currentValue)&&(this.isCustomFormat=!0),s.nzLocale&&this.setDefaultPlaceHolder(),s.nzRenderExtraFooter&&(this.extraFooter=(0,fe.rw)(this.nzRenderExtraFooter)),s.nzMode&&(this.setDefaultPlaceHolder(),this.setModeAndFormat())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}setModeAndFormat(){const s={year:"yyyy",month:"yyyy-MM",week:this.i18n.getDateLocale()?"RRRR-II":"yyyy-ww",date:this.nzShowTime?"yyyy-MM-dd HH:mm:ss":"yyyy-MM-dd"};this.nzMode||(this.nzMode="date"),this.panelMode=this.isRange?[this.nzMode,this.nzMode]:this.nzMode,this.isCustomFormat||(this.nzFormat=s[this.nzMode]),this.inputSize=Math.max(10,this.nzFormat.length)+2,this.updateInputValue()}onOpenChange(s){this.nzOnOpenChange.emit(s)}writeValue(s){this.setValue(s),this.cdr.markForCheck()}registerOnChange(s){this.onChangeFn=s}registerOnTouched(s){this.onTouchedFn=s}setDisabledState(s){this.nzDisabled=s,this.cdr.markForCheck()}setLocale(){this.nzLocale=this.i18n.getLocaleData("DatePicker",{}),this.setDefaultPlaceHolder(),this.cdr.markForCheck()}setDefaultPlaceHolder(){if(!this.isCustomPlaceHolder&&this.nzLocale){const s={year:this.getPropertyOfLocale("yearPlaceholder"),month:this.getPropertyOfLocale("monthPlaceholder"),week:this.getPropertyOfLocale("weekPlaceholder"),date:this.getPropertyOfLocale("placeholder")},d={year:this.getPropertyOfLocale("rangeYearPlaceholder"),month:this.getPropertyOfLocale("rangeMonthPlaceholder"),week:this.getPropertyOfLocale("rangeWeekPlaceholder"),date:this.getPropertyOfLocale("rangePlaceholder")};this.nzPlaceHolder=this.isRange?d[this.nzMode]:s[this.nzMode]}}getPropertyOfLocale(s){return this.nzLocale.lang[s]||this.i18n.getLocaleData(`DatePicker.lang.${s}`)}setValue(s){const d=this.datePickerService.makeValue(s);this.datePickerService.setValue(d),this.datePickerService.initialValue=d}renderClass(s){s?this.renderer.addClass(this.elementRef.nativeElement,"ant-picker-focused"):this.renderer.removeClass(this.elementRef.nativeElement,"ant-picker-focused")}onPanelModeChange(s){this.nzOnPanelChange.emit(s)}onCalendarChange(s){if(this.isRange&&Array.isArray(s)){const d=s.filter(_=>_ instanceof qr.Yp).map(_=>_.nativeDate);this.nzOnCalendarChange.emit(d)}}onResultOk(){var s,d;if(this.isRange){const _=this.datePickerService.value;this.nzOnOk.emit(_.length?[(null===(s=_[0])||void 0===s?void 0:s.nativeDate)||null,(null===(d=_[1])||void 0===d?void 0:d.nativeDate)||null]:[])}else this.nzOnOk.emit(this.datePickerService.value?this.datePickerService.value.nativeDate:null)}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(un.jY),e.Y36(Gn),e.Y36(Br.wi),e.Y36(e.sBO),e.Y36(e.Qsj),e.Y36(e.SBq),e.Y36(Br.mx),e.Y36(Ll.D3),e.Y36(se.t4),e.Y36(k.K0),e.Y36(ne.Is,8),e.Y36(Sn.P,9))},g.\u0275cmp=e.Xpm({type:g,selectors:[["nz-date-picker"],["nz-week-picker"],["nz-month-picker"],["nz-year-picker"],["nz-range-picker"]],viewQuery:function(s,d){if(1&s&&(e.Gf(st.pI,5),e.Gf(js,5),e.Gf(ki,5),e.Gf(gC,5),e.Gf(Cu,5)),2&s){let _;e.iGM(_=e.CRH())&&(d.cdkConnectedOverlay=_.first),e.iGM(_=e.CRH())&&(d.panel=_.first),e.iGM(_=e.CRH())&&(d.separatorElement=_.first),e.iGM(_=e.CRH())&&(d.pickerInput=_.first),e.iGM(_=e.CRH())&&(d.rangePickerInputs=_)}},hostVars:16,hostBindings:function(s,d){1&s&&e.NdJ("click",function(w){return d.onClickInputBox(w)}),2&s&&e.ekj("ant-picker",!0)("ant-picker-range",d.isRange)("ant-picker-large","large"===d.nzSize)("ant-picker-small","small"===d.nzSize)("ant-picker-disabled",d.nzDisabled)("ant-picker-rtl","rtl"===d.dir)("ant-picker-borderless",d.nzBorderless)("ant-picker-inline",d.nzInline)},inputs:{nzAllowClear:"nzAllowClear",nzAutoFocus:"nzAutoFocus",nzDisabled:"nzDisabled",nzBorderless:"nzBorderless",nzInputReadOnly:"nzInputReadOnly",nzInline:"nzInline",nzOpen:"nzOpen",nzDisabledDate:"nzDisabledDate",nzLocale:"nzLocale",nzPlaceHolder:"nzPlaceHolder",nzPopupStyle:"nzPopupStyle",nzDropdownClassName:"nzDropdownClassName",nzSize:"nzSize",nzFormat:"nzFormat",nzDateRender:"nzDateRender",nzDisabledTime:"nzDisabledTime",nzRenderExtraFooter:"nzRenderExtraFooter",nzShowToday:"nzShowToday",nzMode:"nzMode",nzShowNow:"nzShowNow",nzRanges:"nzRanges",nzDefaultPickerValue:"nzDefaultPickerValue",nzSeparator:"nzSeparator",nzSuffixIcon:"nzSuffixIcon",nzBackdrop:"nzBackdrop",nzId:"nzId",nzShowTime:"nzShowTime"},outputs:{nzOnPanelChange:"nzOnPanelChange",nzOnCalendarChange:"nzOnCalendarChange",nzOnOk:"nzOnOk",nzOnOpenChange:"nzOnOpenChange"},exportAs:["nzDatePicker"],features:[e._Bn([Gn,{provide:M.JU,multi:!0,useExisting:(0,e.Gpc)(()=>g)}]),e.TTD],decls:8,vars:7,consts:[[4,"ngIf","ngIfElse"],["tplRangeInput",""],["tplRightRest",""],["inlineMode",""],["cdkConnectedOverlay","","nzConnectedOverlay","",3,"cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayTransformOriginOn","positionChange","detach","overlayKeydown"],[3,"class",4,"ngIf"],[4,"ngIf"],["autocomplete","off",3,"disabled","readOnly","ngModel","placeholder","size","ngModelChange","focus","focusout","keyup.enter"],["pickerInput",""],[4,"ngTemplateOutlet"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["separatorElement",""],["defaultSeparator",""],["nz-icon","","nzType","swap-right","nzTheme","outline"],["autocomplete","off",3,"disabled","readOnly","size","ngModel","placeholder","click","focusout","focus","keyup.enter","ngModelChange"],["rangePickerInput",""],[3,"ngStyle"],[3,"class","click",4,"ngIf"],[4,"nzStringTemplateOutlet"],[3,"click"],["nz-icon","","nzType","close-circle","nzTheme","fill"],["nz-icon","",3,"nzType"],[3,"isRange","inline","defaultPickerValue","showWeek","panelMode","locale","showToday","showNow","showTime","dateRender","disabledDate","disabledTime","extraFooter","ranges","dir","panelModeChange","calendarChange","resultOk"],[1,"ant-picker-wrapper",2,"position","relative",3,"nzNoAnimation"]],template:function(s,d){if(1&s&&(e.YNc(0,um,3,2,"ng-container",0),e.YNc(1,_C,2,6,"ng-template",null,1,e.W1O),e.YNc(3,CC,4,9,"ng-template",null,2,e.W1O),e.YNc(5,hm,2,36,"ng-template",null,3,e.W1O),e.YNc(7,fm,2,3,"ng-template",4),e.NdJ("positionChange",function(w){return d.onPositionChange(w)})("detach",function(){return d.close()})("overlayKeydown",function(w){return d.onOverlayKeydown(w)})),2&s){const _=e.MAs(6);e.Q6J("ngIf",!d.nzInline)("ngIfElse",_),e.xp6(7),e.Q6J("cdkConnectedOverlayHasBackdrop",d.nzBackdrop)("cdkConnectedOverlayOrigin",d.origin)("cdkConnectedOverlayOpen",d.realOpenState)("cdkConnectedOverlayPositions",d.overlayPositions)("cdkConnectedOverlayTransformOriginOn",".ant-picker-wrapper")}},directives:[js,k.O5,M.Fj,M.JJ,M.On,k.tP,K.Ls,Ce.w,k.PC,ct.f,ne.Lv,st.pI,zt.hQ,Sn.P],encapsulation:2,data:{animation:[Sr.mF]},changeDetection:0}),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzAllowClear",void 0),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzAutoFocus",void 0),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzDisabled",void 0),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzBorderless",void 0),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzInputReadOnly",void 0),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzInline",void 0),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzOpen",void 0),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzShowToday",void 0),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzShowNow",void 0),(0,j.gn)([(0,un.oS)()],g.prototype,"nzSeparator",void 0),(0,j.gn)([(0,un.oS)()],g.prototype,"nzSuffixIcon",void 0),(0,j.gn)([(0,un.oS)()],g.prototype,"nzBackdrop",void 0),g})(),bu=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[[k.ez,M.u5,Br.YI,$i,ct.T]]}),g})(),_m=(()=>{class g{constructor(s){this.datePicker=s,this.datePicker.isRange=!0}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Lc,9))},g.\u0275dir=e.lG2({type:g,selectors:[["nz-range-picker"]],exportAs:["nzRangePicker"]}),g})(),ym=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[[ne.vT,k.ez,M.u5,st.U8,bu,K.PV,zt.e4,Sn.g,ct.T,$i,xn.sL,bu]]}),g})();const Cm=function(){return{nzFormat:"HH:mm"}};let rp=(()=>{class g{constructor(s,d){this.router=s,this.rs=d,this.id=0,this.name="",this.data={},this.loading=!1,this.options={},this.window="5m",this.date=[Bi().subtract(1,"day").toDate(),Bi().toDate()],this.id=parseInt(s.snapshot.params.id),this.name=s.snapshot.params.name,this.load()}ngOnInit(){}load(){this.loading=!0,this.rs.get(`device/${this.id}/value/${this.name}/history`,{start:Bi(this.date[0]).diff(Bi(),"minute")+"m",end:Bi(this.date[1]).diff(Bi(),"minute")+"m",window:this.window}).subscribe(s=>{console.log("history",s.data),this.data=s.data,this.loading=!1,this.update()})}update(){const s=[],d=[];this.data.forEach(_=>{s.push(Bi(_.time).format("M-D HH:mm")),d.push(_.value)}),this.options={legend:{data:[this.name],align:"left"},tooltip:{},dataZoom:[{type:"inside"},{type:"slider"}],xAxis:{data:s,silent:!1,splitLine:{show:!1}},yAxis:{},series:[{name:this.name,type:"line",data:d}],animationEasing:"elasticOut"}}onChange(s){this.load()}download(){let s=localStorage.getItem("token"),d=Bi(this.date[0]).diff(Bi(),"minute")+"m",_=Bi(this.date[1]).diff(Bi(),"minute")+"m";window.open(`/api/device/${this.id}/values/${this.name}/history-export-xlsx?window=${this.window}&start=${d}&end=${_}&token=${s}`)}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.gz),e.Y36(Fe.s))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-device-value"]],decls:18,vars:5,consts:[["nz-row","","nzJustify","center","nzAlign","middle"],["nz-col","","nzSpan","2"],["nz-col","","nzSpan","8"],["nzFormat","yyyy-MM-dd HH:mm",3,"nzShowTime","ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["nzValue","1s","nzLabel","1\u79d2"],["nzValue","1m","nzLabel","1\u5206\u949f"],["nzValue","5m","nzLabel","5\u5206\u949f"],["nzValue","30m","nzLabel","30\u5206\u949f"],["nzValue","1h","nzLabel","1\u5c0f\u65f6"],["nz-button","","nzType","primary",3,"click"],["echarts","",3,"options"]],template:function(s,d){1&s&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"\u65e5\u671f\u8303\u56f4\uff1a"),e.qZA(),e.TgZ(3,"div",2)(4,"nz-range-picker",3),e.NdJ("ngModelChange",function(w){return d.date=w})("ngModelChange",function(){return d.load()}),e.qZA()(),e.TgZ(5,"div",1),e._uU(6,"\u65f6\u95f4\u7c92\u5ea6\uff1a"),e.qZA(),e.TgZ(7,"div",2)(8,"nz-select",4),e.NdJ("ngModelChange",function(w){return d.window=w})("ngModelChange",function(){return d.load()}),e._UZ(9,"nz-option",5)(10,"nz-option",6)(11,"nz-option",7)(12,"nz-option",8)(13,"nz-option",9),e.qZA()(),e.TgZ(14,"div",1)(15,"button",10),e.NdJ("click",function(){return d.load()}),e._uU(16,"\u5237\u65b0"),e.qZA()()(),e._UZ(17,"div",11)),2&s&&(e.xp6(4),e.Q6J("nzShowTime",e.DdM(4,Cm))("ngModel",d.date),e.xp6(4),e.Q6J("ngModel",d.window),e.xp6(9),e.Q6J("options",d.options))},directives:[yn.SK,yn.t3,Lc,_m,M.JJ,M.On,Yr.Vq,Yr.Ip,xn.ix,Rn.dQ,Ce.w,ti],styles:[""]}),g})();function xm(g,x){if(1&g&&e._UZ(0,"app-event",6),2&g){const s=e.oxw();e.Q6J("id",s.id)}}function SC(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"a",7),e.NdJ("click",function(){return e.CHM(s),e.oxw().load()}),e._UZ(1,"i",8),e.qZA(),e._UZ(2,"nz-divider",9),e.TgZ(3,"a",10),e._UZ(4,"i",11),e.qZA(),e._UZ(5,"nz-divider",9),e.TgZ(6,"a",12),e._UZ(7,"i",13),e.qZA()}if(2&g){const s=e.oxw();e.xp6(1),e.Q6J("nzSpin",s.loading),e.xp6(2),e.Q6J("config",s.data),e.xp6(3),e.Q6J("routerLink","/admin/user/edit/"+s.id)}}let zC=(()=>{class g{constructor(s,d,_){this.router=s,this.rs=d,this.ms=_,this.id=0,this.data={},this.loading=!1,this.id=parseInt(s.snapshot.params.id),this.load()}ngOnInit(){}load(){this.loading=!0,this.rs.get(`user/${this.id}`).subscribe(s=>{this.data=s.data,this.loading=!1})}onEnableChange(s){s?this.ms.confirm({nzTitle:"\u63d0\u793a",nzContent:"\u786e\u8ba4\u7981\u7528\u5417?",nzOnOk:()=>{this.rs.get(`user/${this.id}/disable`).subscribe(d=>{})},nzOnCancel:()=>{this.data.disabled=!1}}):this.rs.get(`user/${this.id}/enable`).subscribe(d=>{})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.gz),e.Y36(Fe.s),e.Y36(Ln.Sf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-user-detail"]],decls:11,vars:5,consts:[[3,"nzTabBarExtraContent"],["nzTitle","\u7528\u6237\u8be6\u60c5"],[3,"ngModel","ngModelChange"],["nzTitle","\u65e5\u5fd7"],["nz-tab",""],["extraTemplate",""],["type","user",3,"id"],["title","\u5237\u65b0",3,"click"],["nz-icon","","nzType","reload",3,"nzSpin"],["nzType","vertical"],["title","\u539f\u59cb\u6570\u636e","appViewConfig","",3,"config"],["nz-icon","","nzType","profile"],["title","\u7f16\u8f91",3,"routerLink"],["nz-icon","","nzType","form"]],template:function(s,d){if(1&s&&(e.TgZ(0,"nz-tabset",0)(1,"nz-tab",1)(2,"p"),e._uU(3),e.TgZ(4,"nz-switch",2),e.NdJ("ngModelChange",function(w){return d.onEnableChange(w)}),e.qZA()(),e.TgZ(5,"p"),e._uU(6),e.qZA()(),e.TgZ(7,"nz-tab",3),e.YNc(8,xm,1,1,"ng-template",4),e.qZA()(),e.YNc(9,SC,8,3,"ng-template",null,5,e.W1O)),2&s){const _=e.MAs(10);e.Q6J("nzTabBarExtraContent",_),e.xp6(3),e.AsE(" \u540d\u79f0\uff1a",d.data.name," ","\u7981\u7528"," "),e.xp6(1),e.Q6J("ngModel",d.data.disabled),e.xp6(2),e.hij(" \u624b\u673a\uff1a",d.data.cellphone," ")}},directives:[Wn.xH,Wn.xw,ge.i,M.JJ,M.On,Wn.cj,pe.B,K.Ls,Ce.w,tn.g,ae.Z,Me.yS],styles:[""]}),g})();var ji=J(3257);const Bo=g=>(g.changedTouches&&(g=g.changedTouches[0]),{x:g.clientX,y:g.clientY});class nd{constructor(x){x.remember("_draggable",this),this.el=x,this.drag=this.drag.bind(this),this.startDrag=this.startDrag.bind(this),this.endDrag=this.endDrag.bind(this)}init(x){x?(this.el.on("mousedown.drag",this.startDrag),this.el.on("touchstart.drag",this.startDrag)):(this.el.off("mousedown.drag"),this.el.off("touchstart.drag"))}startDrag(x){const s=!x.type.indexOf("mouse");if(s&&1!==(x.which||x.buttons)||this.el.dispatch("beforedrag",{event:x,handler:this}).defaultPrevented)return;x.preventDefault(),x.stopPropagation(),this.init(!1),this.box=this.el.bbox(),this.lastClick=this.el.point(Bo(x));const _=(s?"mouseup":"touchcancel.drag touchend")+".drag";(0,ji.on)(window,(s?"mousemove":"touchmove")+".drag",this.drag),(0,ji.on)(window,_,this.endDrag),this.el.fire("dragstart",{event:x,handler:this,box:this.box})}drag(x){const{box:s,lastClick:d}=this,_=this.el.point(Bo(x)),w=s.x+(_.x-d.x),me=s.y+(_.y-d.y),Re=new ji.xu(w,me,s.w,s.h);if(!this.el.dispatch("dragmove",{event:x,handler:this,box:Re}).defaultPrevented)return this.move(w,me),Re}move(x,s){"svg"===this.el.type?ji.G.prototype.move.call(this.el,x,s):this.el.move(x,s)}endDrag(x){const s=this.drag(x);this.el.fire("dragend",{event:x,handler:this,box:s}),(0,ji.S1)(window,"mousemove.drag"),(0,ji.S1)(window,"touchmove.drag"),(0,ji.S1)(window,"mouseup.drag"),(0,ji.S1)(window,"touchend.drag"),this.init(!0)}}(0,ji.l7)(ji.W_,{draggable(g=!0){return(this.remember("_draggable")||new nd(this)).init(g),this}});var wC=J(579),Su=J(1618),Xs=J(1777);const DC=["file"],AC=["nz-upload-btn",""],rd=["*"];function Wl(g,x){}const zu=function(g){return{$implicit:g}};function Tm(g,x){if(1&g&&(e.TgZ(0,"div",18),e.YNc(1,Wl,0,0,"ng-template",19),e.qZA()),2&g){const s=e.oxw(2).$implicit,d=e.MAs(5);e.ekj("ant-upload-list-item-file",!s.isUploading),e.xp6(1),e.Q6J("ngTemplateOutlet",d)("ngTemplateOutletContext",e.VKq(4,zu,s))}}function gs(g,x){if(1&g&&e._UZ(0,"img",22),2&g){const s=e.oxw(3).$implicit;e.Q6J("src",s.thumbUrl||s.url,e.LSH),e.uIk("alt",s.name)}}function vs(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"a",20),e.NdJ("click",function(_){e.CHM(s);const w=e.oxw(2).$implicit;return e.oxw().handlePreview(w,_)}),e.YNc(1,gs,1,2,"img",21),e.qZA()}if(2&g){e.oxw();const s=e.MAs(5),d=e.oxw().$implicit;e.ekj("ant-upload-list-item-file",!d.isImageUrl),e.Q6J("href",d.url||d.thumbUrl,e.LSH),e.xp6(1),e.Q6J("ngIf",d.isImageUrl)("ngIfElse",s)}}function bm(g,x){}function ip(g,x){if(1&g&&(e.TgZ(0,"div",23),e.YNc(1,bm,0,0,"ng-template",19),e.qZA()),2&g){const s=e.oxw(2).$implicit,d=e.MAs(5);e.xp6(1),e.Q6J("ngTemplateOutlet",d)("ngTemplateOutletContext",e.VKq(2,zu,s))}}function Sm(g,x){}function zm(g,x){if(1&g&&e.YNc(0,Sm,0,0,"ng-template",19),2&g){const s=e.oxw(2).$implicit,d=e.MAs(5);e.Q6J("ngTemplateOutlet",d)("ngTemplateOutletContext",e.VKq(2,zu,s))}}function wm(g,x){if(1&g&&(e.ynx(0,13),e.YNc(1,Tm,2,6,"div",14),e.YNc(2,vs,2,5,"a",15),e.YNc(3,ip,2,4,"div",16),e.BQk(),e.YNc(4,zm,1,4,"ng-template",null,17,e.W1O)),2&g){const s=e.oxw().$implicit;e.Q6J("ngSwitch",s.iconType),e.xp6(1),e.Q6J("ngSwitchCase","uploading"),e.xp6(1),e.Q6J("ngSwitchCase","thumbnail")}}function Dm(g,x){1&g&&(e.ynx(0),e._UZ(1,"i",29),e.BQk())}function ap(g,x){if(1&g&&(e.ynx(0),e.YNc(1,Dm,2,0,"ng-container",24),e.BQk()),2&g){const s=e.oxw(2).$implicit,d=e.MAs(4);e.xp6(1),e.Q6J("ngIf",s.isUploading)("ngIfElse",d)}}function op(g,x){if(1&g&&(e.ynx(0),e._uU(1),e.BQk()),2&g){const s=e.oxw(5);e.xp6(1),e.hij(" ",s.locale.uploading," ")}}function EC(g,x){if(1&g&&(e.ynx(0),e.YNc(1,op,2,1,"ng-container",24),e.BQk()),2&g){const s=e.oxw(2).$implicit,d=e.MAs(4);e.xp6(1),e.Q6J("ngIf",s.isUploading)("ngIfElse",d)}}function sp(g,x){if(1&g&&e._UZ(0,"i",30),2&g){const s=e.oxw(2).$implicit;e.Q6J("nzType",s.isUploading?"loading":"paper-clip")}}function MC(g,x){if(1&g&&(e.ynx(0)(1,13),e.YNc(2,ap,2,2,"ng-container",27),e.YNc(3,EC,2,2,"ng-container",27),e.YNc(4,sp,1,1,"i",28),e.BQk()()),2&g){const s=e.oxw(3);e.xp6(1),e.Q6J("ngSwitch",s.listType),e.xp6(1),e.Q6J("ngSwitchCase","picture"),e.xp6(1),e.Q6J("ngSwitchCase","picture-card")}}function OC(g,x){}function PC(g,x){if(1&g&&e._UZ(0,"i",31),2&g){const s=e.oxw().$implicit;e.Q6J("nzType",s.isImageUrl?"picture":"file")}}function Am(g,x){if(1&g&&(e.YNc(0,MC,5,3,"ng-container",24),e.YNc(1,OC,0,0,"ng-template",19,25,e.W1O),e.YNc(3,PC,1,1,"ng-template",null,26,e.W1O)),2&g){const s=x.$implicit,d=e.MAs(2),_=e.oxw(2);e.Q6J("ngIf",!_.iconRender)("ngIfElse",d),e.xp6(1),e.Q6J("ngTemplateOutlet",_.iconRender)("ngTemplateOutletContext",e.VKq(4,zu,s))}}function IC(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(_){e.CHM(s);const w=e.oxw(2).$implicit;return e.oxw().handleRemove(w,_)}),e._UZ(1,"i",34),e.qZA()}if(2&g){const s=e.oxw(3);e.uIk("title",s.locale.removeFile)}}function el(g,x){if(1&g&&e.YNc(0,IC,2,1,"button",32),2&g){const s=e.oxw(2);e.Q6J("ngIf",s.icons.showRemoveIcon)}}function kC(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(s);const _=e.oxw(2).$implicit;return e.oxw().handleDownload(_)}),e._UZ(1,"i",35),e.qZA()}if(2&g){const s=e.oxw(3);e.uIk("title",s.locale.downloadFile)}}function di(g,x){if(1&g&&e.YNc(0,kC,2,1,"button",32),2&g){const s=e.oxw().$implicit;e.Q6J("ngIf",s.showDownload)}}function lp(g,x){}function Em(g,x){}function LC(g,x){if(1&g&&(e.TgZ(0,"span"),e.YNc(1,lp,0,0,"ng-template",10),e.YNc(2,Em,0,0,"ng-template",10),e.qZA()),2&g){e.oxw(2);const s=e.MAs(9),d=e.MAs(7),_=e.oxw();e.Gre("ant-upload-list-item-card-actions ","picture"===_.listType?"picture":"",""),e.xp6(1),e.Q6J("ngTemplateOutlet",s),e.xp6(1),e.Q6J("ngTemplateOutlet",d)}}function Zi(g,x){if(1&g&&e.YNc(0,LC,3,5,"span",36),2&g){const s=e.oxw(2);e.Q6J("ngIf","picture-card"!==s.listType)}}function Gl(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"a",39),e.NdJ("click",function(_){e.CHM(s);const w=e.oxw(2).$implicit;return e.oxw().handlePreview(w,_)}),e._uU(1),e.qZA()}if(2&g){const s=e.oxw(2).$implicit;e.Q6J("href",s.url,e.LSH),e.uIk("title",s.name)("download",s.linkProps&&s.linkProps.download),e.xp6(1),e.hij(" ",s.name," ")}}function Nc(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"span",40),e.NdJ("click",function(_){e.CHM(s);const w=e.oxw(2).$implicit;return e.oxw().handlePreview(w,_)}),e._uU(1),e.qZA()}if(2&g){const s=e.oxw(2).$implicit;e.uIk("title",s.name),e.xp6(1),e.hij(" ",s.name," ")}}function RC(g,x){}function NC(g,x){if(1&g&&(e.YNc(0,Gl,2,4,"a",37),e.YNc(1,Nc,2,2,"span",38),e.YNc(2,RC,0,0,"ng-template",10)),2&g){const s=e.oxw().$implicit,d=e.MAs(11);e.Q6J("ngIf",s.url),e.xp6(1),e.Q6J("ngIf",!s.url),e.xp6(1),e.Q6J("ngTemplateOutlet",d)}}function up(g,x){}function Mm(g,x){}const FC=function(){return{opacity:.5,"pointer-events":"none"}};function Om(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"a",44),e.NdJ("click",function(_){e.CHM(s);const w=e.oxw(2).$implicit;return e.oxw().handlePreview(w,_)}),e._UZ(1,"i",45),e.qZA()}if(2&g){const s=e.oxw(2).$implicit,d=e.oxw();e.Q6J("href",s.url||s.thumbUrl,e.LSH)("ngStyle",s.url||s.thumbUrl?null:e.DdM(3,FC)),e.uIk("title",d.locale.previewFile)}}function wu(g,x){}function cp(g,x){if(1&g&&(e.ynx(0),e.YNc(1,wu,0,0,"ng-template",10),e.BQk()),2&g){e.oxw(2);const s=e.MAs(9);e.xp6(1),e.Q6J("ngTemplateOutlet",s)}}function Kn(g,x){}function Kr(g,x){if(1&g&&(e.TgZ(0,"span",41),e.YNc(1,Om,2,4,"a",42),e.YNc(2,cp,2,1,"ng-container",43),e.YNc(3,Kn,0,0,"ng-template",10),e.qZA()),2&g){const s=e.oxw().$implicit,d=e.MAs(7),_=e.oxw();e.xp6(1),e.Q6J("ngIf",_.icons.showPreviewIcon),e.xp6(1),e.Q6J("ngIf","done"===s.status),e.xp6(1),e.Q6J("ngTemplateOutlet",d)}}function Du(g,x){if(1&g&&(e.TgZ(0,"div",46),e._UZ(1,"nz-progress",47),e.qZA()),2&g){const s=e.oxw().$implicit;e.xp6(1),e.Q6J("nzPercent",s.percent)("nzShowInfo",!1)("nzStrokeWidth",2)}}function tl(g,x){if(1&g&&(e.TgZ(0,"div")(1,"div",1),e.YNc(2,wm,6,3,"ng-template",null,2,e.W1O),e.YNc(4,Am,5,6,"ng-template",null,3,e.W1O),e.YNc(6,el,1,1,"ng-template",null,4,e.W1O),e.YNc(8,di,1,1,"ng-template",null,5,e.W1O),e.YNc(10,Zi,1,1,"ng-template",null,6,e.W1O),e.YNc(12,NC,3,3,"ng-template",null,7,e.W1O),e.TgZ(14,"div",8)(15,"span",9),e.YNc(16,up,0,0,"ng-template",10),e.YNc(17,Mm,0,0,"ng-template",10),e.qZA()(),e.YNc(18,Kr,4,3,"span",11),e.YNc(19,Du,2,3,"div",12),e.qZA()()),2&g){const s=x.$implicit,d=e.MAs(3),_=e.MAs(13),w=e.oxw();e.Gre("ant-upload-list-",w.listType,"-container"),e.xp6(1),e.MT6("ant-upload-list-item ant-upload-list-item-",s.status," ant-upload-list-item-list-type-",w.listType,""),e.Q6J("@itemState",void 0)("nzTooltipTitle","error"===s.status?s.message:null),e.uIk("data-key",s.key),e.xp6(15),e.Q6J("ngTemplateOutlet",d),e.xp6(1),e.Q6J("ngTemplateOutlet",_),e.xp6(1),e.Q6J("ngIf","picture-card"===w.listType&&!s.isUploading),e.xp6(1),e.Q6J("ngIf",s.isUploading)}}const Pm=["uploadComp"],Fc=["listComp"],bo=function(){return[]};function BC(g,x){if(1&g&&e._UZ(0,"nz-upload-list",8,9),2&g){const s=e.oxw(2);e.Udp("display",s.nzShowUploadList?"":"none"),e.Q6J("locale",s.locale)("listType",s.nzListType)("items",s.nzFileList||e.DdM(13,bo))("icons",s.nzShowUploadList)("iconRender",s.nzIconRender)("previewFile",s.nzPreviewFile)("previewIsImage",s.nzPreviewIsImage)("onPreview",s.nzPreview)("onRemove",s.onRemove)("onDownload",s.nzDownload)("dir",s.dir)}}function id(g,x){1&g&&e.GkF(0)}function Im(g,x){if(1&g&&(e.ynx(0),e.YNc(1,id,1,0,"ng-container",10),e.BQk()),2&g){const s=e.oxw(2);e.xp6(1),e.Q6J("ngTemplateOutlet",s.nzFileListRender)("ngTemplateOutletContext",e.VKq(2,zu,s.nzFileList))}}function hp(g,x){if(1&g&&(e.YNc(0,BC,2,14,"nz-upload-list",6),e.YNc(1,Im,2,4,"ng-container",7)),2&g){const s=e.oxw();e.Q6J("ngIf",s.locale&&!s.nzFileListRender),e.xp6(1),e.Q6J("ngIf",s.nzFileListRender)}}function Xi(g,x){1&g&&e.Hsn(0)}function Li(g,x){}function $r(g,x){if(1&g&&(e.TgZ(0,"div",11)(1,"div",12,13),e.YNc(3,Li,0,0,"ng-template",14),e.qZA()()),2&g){const s=e.oxw(),d=e.MAs(3);e.Udp("display",s.nzShowButton?"":"none"),e.Q6J("ngClass",s.classList),e.xp6(1),e.Q6J("options",s._btnOptions),e.xp6(2),e.Q6J("ngTemplateOutlet",d)}}function ad(g,x){}function ZC(g,x){}function UC(g,x){if(1&g){const s=e.EpF();e.ynx(0),e.TgZ(1,"div",15),e.NdJ("drop",function(_){return e.CHM(s),e.oxw().fileDrop(_)})("dragover",function(_){return e.CHM(s),e.oxw().fileDrop(_)})("dragleave",function(_){return e.CHM(s),e.oxw().fileDrop(_)}),e.TgZ(2,"div",16,13)(4,"div",17),e.YNc(5,ad,0,0,"ng-template",14),e.qZA()()(),e.YNc(6,ZC,0,0,"ng-template",14),e.BQk()}if(2&g){const s=e.oxw(),d=e.MAs(3),_=e.MAs(1);e.xp6(1),e.Q6J("ngClass",s.classList),e.xp6(1),e.Q6J("options",s._btnOptions),e.xp6(3),e.Q6J("ngTemplateOutlet",d),e.xp6(1),e.Q6J("ngTemplateOutlet",_)}}function km(g,x){}function Lm(g,x){}function Rm(g,x){if(1&g&&(e.ynx(0),e.YNc(1,km,0,0,"ng-template",14),e.YNc(2,Lm,0,0,"ng-template",14),e.BQk()),2&g){e.oxw(2);const s=e.MAs(1),d=e.MAs(5);e.xp6(1),e.Q6J("ngTemplateOutlet",s),e.xp6(1),e.Q6J("ngTemplateOutlet",d)}}function Nm(g,x){if(1&g&&e.YNc(0,Rm,3,2,"ng-container",3),2&g){const s=e.oxw(),d=e.MAs(10);e.Q6J("ngIf","picture-card"===s.nzListType)("ngIfElse",d)}}function Fm(g,x){}function Au(g,x){}function Bm(g,x){if(1&g&&(e.YNc(0,Fm,0,0,"ng-template",14),e.YNc(1,Au,0,0,"ng-template",14)),2&g){e.oxw();const s=e.MAs(5),d=e.MAs(1);e.Q6J("ngTemplateOutlet",s),e.xp6(1),e.Q6J("ngTemplateOutlet",d)}}let Zm=(()=>{class g{constructor(s,d,_){if(this.ngZone=s,this.http=d,this.elementRef=_,this.reqs={},this.destroy=!1,this.destroy$=new O.x,!d)throw new Error("Not found 'HttpClient', You can import 'HttpClientModule' in your root module.")}onClick(){this.options.disabled||!this.options.openFileDialogOnClick||this.file.nativeElement.click()}onFileDrop(s){if(this.options.disabled||"dragover"===s.type)s.preventDefault();else{if(this.options.directory)this.traverseFileTree(s.dataTransfer.items);else{const d=Array.prototype.slice.call(s.dataTransfer.files).filter(_=>this.attrAccept(_,this.options.accept));d.length&&this.uploadFiles(d)}s.preventDefault()}}onChange(s){if(this.options.disabled)return;const d=s.target;this.uploadFiles(d.files),d.value=""}traverseFileTree(s){const d=(_,w)=>{_.isFile?_.file(me=>{this.attrAccept(me,this.options.accept)&&this.uploadFiles([me])}):_.isDirectory&&_.createReader().readEntries(Re=>{for(const at of Re)d(at,`${w}${_.name}/`)})};for(const _ of s)d(_.webkitGetAsEntry(),"")}attrAccept(s,d){if(s&&d){const _=Array.isArray(d)?d:d.split(","),w=`${s.name}`,me=`${s.type}`,Re=me.replace(/\/.*$/,"");return _.some(at=>{const ft=at.trim();return"."===ft.charAt(0)?-1!==w.toLowerCase().indexOf(ft.toLowerCase(),w.toLowerCase().length-ft.toLowerCase().length):/\/\*$/.test(ft)?Re===ft.replace(/\/.*$/,""):me===ft})}return!0}attachUid(s){return s.uid||(s.uid=Math.random().toString(36).substring(2)),s}uploadFiles(s){let d=(0,Pr.of)(Array.prototype.slice.call(s));this.options.filters&&this.options.filters.forEach(_=>{d=d.pipe((0,Ft.w)(w=>{const me=_.fn(w);return me instanceof we.y?me:(0,Pr.of)(me)}))}),d.subscribe(_=>{_.forEach(w=>{this.attachUid(w),this.upload(w,_)})},_=>{(0,gt.ZK)("Unhandled upload filter error",_)})}upload(s,d){if(!this.options.beforeUpload)return this.post(s);const _=this.options.beforeUpload(s,d);if(_ instanceof we.y)_.subscribe(w=>{const me=Object.prototype.toString.call(w);"[object File]"===me||"[object Blob]"===me?(this.attachUid(w),this.post(w)):"boolean"==typeof w&&!1!==w&&this.post(s)},w=>{(0,gt.ZK)("Unhandled upload beforeUpload error",w)});else if(!1!==_)return this.post(s)}post(s){if(this.destroy)return;let _,d=(0,Pr.of)(s);const w=this.options,{uid:me}=s,{action:Re,data:at,headers:ft,transformFile:xt}=w,Bt={action:"string"==typeof Re?Re:"",name:w.name,headers:ft,file:s,postFile:s,data:at,withCredentials:w.withCredentials,onProgress:w.onProgress?Ot=>{w.onProgress(Ot,s)}:void 0,onSuccess:(Ot,Cn)=>{this.clean(me),w.onSuccess(Ot,s,Cn)},onError:Ot=>{this.clean(me),w.onError(Ot,s)}};if("function"==typeof Re){const Ot=Re(s);Ot instanceof we.y?d=d.pipe((0,Ft.w)(()=>Ot),(0,lr.U)(Cn=>(Bt.action=Cn,s))):Bt.action=Ot}if("function"==typeof xt){const Ot=xt(s);d=d.pipe((0,Ft.w)(()=>Ot instanceof we.y?Ot:(0,Pr.of)(Ot)),(0,wr.b)(Cn=>_=Cn))}if("function"==typeof at){const Ot=at(s);Ot instanceof we.y?d=d.pipe((0,Ft.w)(()=>Ot),(0,lr.U)(Cn=>(Bt.data=Cn,null!=_?_:s))):Bt.data=Ot}if("function"==typeof ft){const Ot=ft(s);Ot instanceof we.y?d=d.pipe((0,Ft.w)(()=>Ot),(0,lr.U)(Cn=>(Bt.headers=Cn,null!=_?_:s))):Bt.headers=Ot}d.subscribe(Ot=>{Bt.postFile=Ot;const Cn=(w.customRequest||this.xhr).call(this,Bt);Cn instanceof jt.w0||(0,gt.ZK)("Must return Subscription type in '[nzCustomRequest]' property"),this.reqs[me]=Cn,w.onStart(s)})}xhr(s){const d=new FormData;s.data&&Object.keys(s.data).map(w=>{d.append(w,s.data[w])}),d.append(s.name,s.postFile),s.headers||(s.headers={}),null!==s.headers["X-Requested-With"]?s.headers["X-Requested-With"]="XMLHttpRequest":delete s.headers["X-Requested-With"];const _=new be.aW("POST",s.action,d,{reportProgress:!0,withCredentials:s.withCredentials,headers:new be.WM(s.headers)});return this.http.request(_).subscribe(w=>{w.type===be.dt.UploadProgress?(w.total>0&&(w.percent=w.loaded/w.total*100),s.onProgress(w,s.file)):w instanceof be.Zn&&s.onSuccess(w.body,s.file,w)},w=>{this.abort(s.file),s.onError(w,s.file)})}clean(s){const d=this.reqs[s];d instanceof jt.w0&&d.unsubscribe(),delete this.reqs[s]}abort(s){s?this.clean(s&&s.uid):Object.keys(this.reqs).forEach(d=>this.clean(d))}ngOnInit(){this.ngZone.runOutsideAngular(()=>{(0,b.R)(this.elementRef.nativeElement,"click").pipe((0,ee.R)(this.destroy$)).subscribe(()=>this.onClick()),(0,b.R)(this.elementRef.nativeElement,"keydown").pipe((0,ee.R)(this.destroy$)).subscribe(s=>{this.options.disabled||("Enter"===s.key||s.keyCode===Q.K5)&&this.onClick()})})}ngOnDestroy(){this.destroy=!0,this.destroy$.next(),this.abort()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(e.R0b),e.Y36(be.eN,8),e.Y36(e.SBq))},g.\u0275cmp=e.Xpm({type:g,selectors:[["","nz-upload-btn",""]],viewQuery:function(s,d){if(1&s&&e.Gf(DC,7),2&s){let _;e.iGM(_=e.CRH())&&(d.file=_.first)}},hostAttrs:[1,"ant-upload"],hostVars:4,hostBindings:function(s,d){1&s&&e.NdJ("drop",function(w){return d.onFileDrop(w)})("dragover",function(w){return d.onFileDrop(w)}),2&s&&(e.uIk("tabindex","0")("role","button"),e.ekj("ant-upload-disabled",d.options.disabled))},inputs:{options:"options"},exportAs:["nzUploadBtn"],attrs:AC,ngContentSelectors:rd,decls:3,vars:4,consts:[["type","file",2,"display","none",3,"multiple","change"],["file",""]],template:function(s,d){1&s&&(e.F$t(),e.TgZ(0,"input",0,1),e.NdJ("change",function(w){return d.onChange(w)}),e.qZA(),e.Hsn(2)),2&s&&(e.Q6J("multiple",d.options.multiple),e.uIk("accept",d.options.accept)("directory",d.options.directory?"directory":null)("webkitdirectory",d.options.directory?"webkitdirectory":null))},encapsulation:2}),g})();const Um=g=>!!g&&0===g.indexOf("image/");let dp=(()=>{class g{constructor(s,d,_,w){this.cdr=s,this.doc=d,this.ngZone=_,this.platform=w,this.list=[],this.locale={},this.iconRender=null,this.dir="ltr",this.destroy$=new O.x}get showPic(){return"picture"===this.listType||"picture-card"===this.listType}set items(s){this.list=s}genErr(s){return s.response&&"string"==typeof s.response?s.response:s.error&&s.error.statusText||this.locale.uploadError}extname(s){const d=s.split("/"),w=d[d.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(w)||[""])[0]}isImageUrl(s){if(Um(s.type))return!0;const d=s.thumbUrl||s.url||"";if(!d)return!1;const _=this.extname(d);return!(!/^data:image\//.test(d)&&!/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg)$/i.test(_))||!/^data:/.test(d)&&!_}getIconType(s){return this.showPic?s.isUploading||!s.thumbUrl&&!s.url?"uploading":"thumbnail":""}previewImage(s){if(!Um(s.type)||!this.platform.isBrowser)return(0,Pr.of)("");const d=this.doc.createElement("canvas");d.width=200,d.height=200,d.style.cssText="position: fixed; left: 0; top: 0; width: 200px; height: 200px; z-index: 9999; display: none;",this.doc.body.appendChild(d);const _=d.getContext("2d"),w=new Image,me=URL.createObjectURL(s);return w.src=me,(0,b.R)(w,"load").pipe((0,lr.U)(()=>{const{width:Re,height:at}=w;let ft=200,xt=200,Bt=0,Ot=0;Re<at?(xt=at*(200/Re),Ot=-(xt-ft)/2):(ft=Re*(200/at),Bt=-(ft-xt)/2);try{_.drawImage(w,Bt,Ot,ft,xt)}catch(_r){}const Cn=d.toDataURL();return this.doc.body.removeChild(d),URL.revokeObjectURL(me),Cn}))}genThumb(){if(!this.platform.isBrowser)return;const s=window;!this.showPic||"undefined"==typeof document||void 0===s||!s.FileReader||!s.File||this.list.filter(d=>d.originFileObj instanceof File&&void 0===d.thumbUrl).forEach(d=>{d.thumbUrl="";const _=(this.previewFile?this.previewFile(d):this.previewImage(d.originFileObj)).pipe((0,ee.R)(this.destroy$));this.ngZone.runOutsideAngular(()=>{_.subscribe(w=>{this.ngZone.run(()=>{d.thumbUrl=w,this.detectChanges()})})})})}showDownload(s){return!(!this.icons.showDownloadIcon||"done"!==s.status)}fixData(){this.list.forEach(s=>{s.isUploading="uploading"===s.status,s.message=this.genErr(s),s.linkProps="string"==typeof s.linkProps?JSON.parse(s.linkProps):s.linkProps,s.isImageUrl=this.previewIsImage?this.previewIsImage(s):this.isImageUrl(s),s.iconType=this.getIconType(s),s.showDownload=this.showDownload(s)})}handlePreview(s,d){if(this.onPreview)return d.preventDefault(),this.onPreview(s)}handleRemove(s,d){d.preventDefault(),this.onRemove&&this.onRemove(s)}handleDownload(s){"function"==typeof this.onDownload?this.onDownload(s):s.url&&window.open(s.url)}detectChanges(){this.fixData(),this.cdr.detectChanges()}ngOnChanges(){this.fixData(),this.genThumb()}ngOnDestroy(){this.destroy$.next()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(e.sBO),e.Y36(k.K0),e.Y36(e.R0b),e.Y36(se.t4))},g.\u0275cmp=e.Xpm({type:g,selectors:[["nz-upload-list"]],hostAttrs:[1,"ant-upload-list"],hostVars:8,hostBindings:function(s,d){2&s&&e.ekj("ant-upload-list-rtl","rtl"===d.dir)("ant-upload-list-text","text"===d.listType)("ant-upload-list-picture","picture"===d.listType)("ant-upload-list-picture-card","picture-card"===d.listType)},inputs:{locale:"locale",listType:"listType",items:"items",icons:"icons",onPreview:"onPreview",onRemove:"onRemove",onDownload:"onDownload",previewFile:"previewFile",previewIsImage:"previewIsImage",iconRender:"iconRender",dir:"dir"},exportAs:["nzUploadList"],features:[e.TTD],decls:1,vars:1,consts:[[3,"class",4,"ngFor","ngForOf"],["nz-tooltip","",3,"nzTooltipTitle"],["icon",""],["iconNode",""],["removeIcon",""],["downloadIcon",""],["downloadOrDelete",""],["preview",""],[1,"ant-upload-list-item-info"],[1,"ant-upload-span"],[3,"ngTemplateOutlet"],["class","ant-upload-list-item-actions",4,"ngIf"],["class","ant-upload-list-item-progress",4,"ngIf"],[3,"ngSwitch"],["class","ant-upload-list-item-thumbnail",3,"ant-upload-list-item-file",4,"ngSwitchCase"],["class","ant-upload-list-item-thumbnail","target","_blank","rel","noopener noreferrer",3,"ant-upload-list-item-file","href","click",4,"ngSwitchCase"],["class","ant-upload-text-icon",4,"ngSwitchDefault"],["noImageThumbTpl",""],[1,"ant-upload-list-item-thumbnail"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-thumbnail",3,"href","click"],["class","ant-upload-list-item-image",3,"src",4,"ngIf","ngIfElse"],[1,"ant-upload-list-item-image",3,"src"],[1,"ant-upload-text-icon"],[4,"ngIf","ngIfElse"],["customIconRender",""],["iconNodeFileIcon",""],[4,"ngSwitchCase"],["nz-icon","",3,"nzType",4,"ngSwitchDefault"],["nz-icon","","nzType","loading"],["nz-icon","",3,"nzType"],["nz-icon","","nzTheme","twotone",3,"nzType"],["type","button","nz-button","","nzType","text","nzSize","small","class","ant-upload-list-item-card-actions-btn",3,"click",4,"ngIf"],["type","button","nz-button","","nzType","text","nzSize","small",1,"ant-upload-list-item-card-actions-btn",3,"click"],["nz-icon","","nzType","delete"],["nz-icon","","nzType","download"],[3,"class",4,"ngIf"],["target","_blank","rel","noopener noreferrer","class","ant-upload-list-item-name",3,"href","click",4,"ngIf"],["class","ant-upload-list-item-name",3,"click",4,"ngIf"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-name",3,"href","click"],[1,"ant-upload-list-item-name",3,"click"],[1,"ant-upload-list-item-actions"],["target","_blank","rel","noopener noreferrer",3,"href","ngStyle","click",4,"ngIf"],[4,"ngIf"],["target","_blank","rel","noopener noreferrer",3,"href","ngStyle","click"],["nz-icon","","nzType","eye"],[1,"ant-upload-list-item-progress"],["nzType","line",3,"nzPercent","nzShowInfo","nzStrokeWidth"]],template:function(s,d){1&s&&e.YNc(0,tl,20,14,"div",0),2&s&&e.Q6J("ngForOf",d.list)},directives:[xn.ix,Ms,k.sg,Se.SY,k.RF,k.n9,k.tP,k.O5,k.ED,K.Ls,Ce.w,k.PC],encapsulation:2,data:{animation:[(0,Xs.X$)("itemState",[(0,Xs.eR)(":enter",[(0,Xs.oB)({height:"0",width:"0",opacity:0}),(0,Xs.jt)(150,(0,Xs.oB)({height:"*",width:"*",opacity:1}))]),(0,Xs.eR)(":leave",[(0,Xs.jt)(150,(0,Xs.oB)({height:"0",width:"0",opacity:0}))])])]},changeDetection:0}),g})(),VC=(()=>{class g{constructor(s,d,_,w,me){this.ngZone=s,this.document=d,this.cdr=_,this.i18n=w,this.directionality=me,this.destroy$=new O.x,this.dir="ltr",this.nzType="select",this.nzLimit=0,this.nzSize=0,this.nzDirectory=!1,this.nzOpenFileDialogOnClick=!0,this.nzFilter=[],this.nzFileList=[],this.nzDisabled=!1,this.nzListType="text",this.nzMultiple=!1,this.nzName="file",this._showUploadList=!0,this.nzShowButton=!0,this.nzWithCredentials=!1,this.nzIconRender=null,this.nzFileListRender=null,this.nzChange=new e.vpe,this.nzFileListChange=new e.vpe,this.onStart=Re=>{this.nzFileList||(this.nzFileList=[]);const at=this.fileToObject(Re);at.status="uploading",this.nzFileList=this.nzFileList.concat(at),this.nzFileListChange.emit(this.nzFileList),this.nzChange.emit({file:at,fileList:this.nzFileList,type:"start"}),this.detectChangesList()},this.onProgress=(Re,at)=>{const xt=this.getFileItem(at,this.nzFileList);xt.percent=Re.percent,this.nzChange.emit({event:Re,file:Object.assign({},xt),fileList:this.nzFileList,type:"progress"}),this.detectChangesList()},this.onSuccess=(Re,at)=>{const ft=this.nzFileList,xt=this.getFileItem(at,ft);xt.status="done",xt.response=Re,this.nzChange.emit({file:Object.assign({},xt),fileList:ft,type:"success"}),this.detectChangesList()},this.onError=(Re,at)=>{const ft=this.nzFileList,xt=this.getFileItem(at,ft);xt.error=Re,xt.status="error",this.nzChange.emit({file:Object.assign({},xt),fileList:ft,type:"error"}),this.detectChangesList()},this.onRemove=Re=>{this.uploadComp.abort(Re),Re.status="removed";const at="function"==typeof this.nzRemove?this.nzRemove(Re):null==this.nzRemove||this.nzRemove;(at instanceof we.y?at:(0,Pr.of)(at)).pipe((0,Lt.h)(ft=>ft)).subscribe(()=>{this.nzFileList=this.removeFileItem(Re,this.nzFileList),this.nzChange.emit({file:Re,fileList:this.nzFileList,type:"removed"}),this.nzFileListChange.emit(this.nzFileList),this.cdr.detectChanges()})},this.prefixCls="ant-upload",this.classList=[]}set nzShowUploadList(s){this._showUploadList="boolean"==typeof s?(0,fe.sw)(s):s}get nzShowUploadList(){return this._showUploadList}zipOptions(){"boolean"==typeof this.nzShowUploadList&&this.nzShowUploadList&&(this.nzShowUploadList={showPreviewIcon:!0,showRemoveIcon:!0,showDownloadIcon:!0});const s=this.nzFilter.slice();if(this.nzMultiple&&this.nzLimit>0&&-1===s.findIndex(d=>"limit"===d.name)&&s.push({name:"limit",fn:d=>d.slice(-this.nzLimit)}),this.nzSize>0&&-1===s.findIndex(d=>"size"===d.name)&&s.push({name:"size",fn:d=>d.filter(_=>_.size/1024<=this.nzSize)}),this.nzFileType&&this.nzFileType.length>0&&-1===s.findIndex(d=>"type"===d.name)){const d=this.nzFileType.split(",");s.push({name:"type",fn:_=>_.filter(w=>~d.indexOf(w.type))})}return this._btnOptions={disabled:this.nzDisabled,accept:this.nzAccept,action:this.nzAction,directory:this.nzDirectory,openFileDialogOnClick:this.nzOpenFileDialogOnClick,beforeUpload:this.nzBeforeUpload,customRequest:this.nzCustomRequest,data:this.nzData,headers:this.nzHeaders,name:this.nzName,multiple:this.nzMultiple,withCredentials:this.nzWithCredentials,filters:s,transformFile:this.nzTransformFile,onStart:this.onStart,onProgress:this.onProgress,onSuccess:this.onSuccess,onError:this.onError},this}fileToObject(s){return{lastModified:s.lastModified,lastModifiedDate:s.lastModifiedDate,name:s.filename||s.name,size:s.size,type:s.type,uid:s.uid,response:s.response,error:s.error,percent:0,originFileObj:s}}getFileItem(s,d){return d.filter(_=>_.uid===s.uid)[0]}removeFileItem(s,d){return d.filter(_=>_.uid!==s.uid)}fileDrop(s){s.type!==this.dragState&&(this.dragState=s.type,this.setClassMap())}detectChangesList(){var s;this.cdr.detectChanges(),null===(s=this.listComp)||void 0===s||s.detectChanges()}setClassMap(){let s=[];"drag"===this.nzType?(this.nzFileList.some(d=>"uploading"===d.status)&&s.push(`${this.prefixCls}-drag-uploading`),"dragover"===this.dragState&&s.push(`${this.prefixCls}-drag-hover`)):s=[`${this.prefixCls}-select-${this.nzListType}`],this.classList=[this.prefixCls,`${this.prefixCls}-${this.nzType}`,...s,this.nzDisabled&&`${this.prefixCls}-disabled`||"","rtl"===this.dir&&`${this.prefixCls}-rtl`||""].filter(d=>!!d),this.cdr.detectChanges()}ngOnInit(){var s;this.dir=this.directionality.value,null===(s=this.directionality.change)||void 0===s||s.pipe((0,ee.R)(this.destroy$)).subscribe(d=>{this.dir=d,this.setClassMap(),this.cdr.detectChanges()}),this.i18n.localeChange.pipe((0,ee.R)(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Upload"),this.detectChangesList()})}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>(0,b.R)(this.document.body,"drop").pipe((0,ee.R)(this.destroy$)).subscribe(s=>{s.preventDefault(),s.stopPropagation()}))}ngOnChanges(){this.zipOptions().setClassMap()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(e.R0b),e.Y36(k.K0),e.Y36(e.sBO),e.Y36(Br.wi),e.Y36(ne.Is,8))},g.\u0275cmp=e.Xpm({type:g,selectors:[["nz-upload"]],viewQuery:function(s,d){if(1&s&&(e.Gf(Pm,5),e.Gf(Fc,5)),2&s){let _;e.iGM(_=e.CRH())&&(d.uploadComp=_.first),e.iGM(_=e.CRH())&&(d.listComp=_.first)}},hostVars:2,hostBindings:function(s,d){2&s&&e.ekj("ant-upload-picture-card-wrapper","picture-card"===d.nzListType)},inputs:{nzType:"nzType",nzLimit:"nzLimit",nzSize:"nzSize",nzFileType:"nzFileType",nzAccept:"nzAccept",nzAction:"nzAction",nzDirectory:"nzDirectory",nzOpenFileDialogOnClick:"nzOpenFileDialogOnClick",nzBeforeUpload:"nzBeforeUpload",nzCustomRequest:"nzCustomRequest",nzData:"nzData",nzFilter:"nzFilter",nzFileList:"nzFileList",nzDisabled:"nzDisabled",nzHeaders:"nzHeaders",nzListType:"nzListType",nzMultiple:"nzMultiple",nzName:"nzName",nzShowUploadList:"nzShowUploadList",nzShowButton:"nzShowButton",nzWithCredentials:"nzWithCredentials",nzRemove:"nzRemove",nzPreview:"nzPreview",nzPreviewFile:"nzPreviewFile",nzPreviewIsImage:"nzPreviewIsImage",nzTransformFile:"nzTransformFile",nzDownload:"nzDownload",nzIconRender:"nzIconRender",nzFileListRender:"nzFileListRender"},outputs:{nzChange:"nzChange",nzFileListChange:"nzFileListChange"},exportAs:["nzUpload"],features:[e.TTD],ngContentSelectors:rd,decls:11,vars:2,consts:[["list",""],["con",""],["btn",""],[4,"ngIf","ngIfElse"],["select",""],["pic",""],[3,"display","locale","listType","items","icons","iconRender","previewFile","previewIsImage","onPreview","onRemove","onDownload","dir",4,"ngIf"],[4,"ngIf"],[3,"locale","listType","items","icons","iconRender","previewFile","previewIsImage","onPreview","onRemove","onDownload","dir"],["listComp",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["nz-upload-btn","",3,"options"],["uploadComp",""],[3,"ngTemplateOutlet"],[3,"ngClass","drop","dragover","dragleave"],["nz-upload-btn","",1,"ant-upload-btn",3,"options"],[1,"ant-upload-drag-container"]],template:function(s,d){if(1&s&&(e.F$t(),e.YNc(0,hp,2,2,"ng-template",null,0,e.W1O),e.YNc(2,Xi,1,0,"ng-template",null,1,e.W1O),e.YNc(4,$r,4,5,"ng-template",null,2,e.W1O),e.YNc(6,UC,7,4,"ng-container",3),e.YNc(7,Nm,1,2,"ng-template",null,4,e.W1O),e.YNc(9,Bm,2,2,"ng-template",null,5,e.W1O)),2&s){const _=e.MAs(8);e.xp6(6),e.Q6J("ngIf","drag"===d.nzType)("ngIfElse",_)}},directives:[dp,Zm,k.O5,ne.Lv,k.tP,k.mk],encapsulation:2,changeDetection:0}),(0,j.gn)([(0,fe.Rn)()],g.prototype,"nzLimit",void 0),(0,j.gn)([(0,fe.Rn)()],g.prototype,"nzSize",void 0),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzDirectory",void 0),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzOpenFileDialogOnClick",void 0),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzDisabled",void 0),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzMultiple",void 0),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzShowButton",void 0),(0,j.gn)([(0,fe.yF)()],g.prototype,"nzWithCredentials",void 0),g})(),Vm=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[[ne.vT,k.ez,M.u5,se.ud,Se.cg,Ca,Br.YI,K.PV,xn.sL]]}),g})();function Hm(g,x){1&g&&e._UZ(0,"i",13)}function HC(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",7),e.NdJ("click",function(){const w=e.CHM(s).$implicit;return e.oxw().onItemClick(w)})("dblclick",function(){const w=e.CHM(s).$implicit;return e.oxw().onItemDoubleClick(w)}),e.TgZ(1,"td",8),e.NdJ("nzCheckedChange",function(_){const me=e.CHM(s).$implicit;return e.oxw().onItemChecked(me.name,_)}),e.qZA(),e.TgZ(2,"td"),e.YNc(3,Hm,1,0,"i",9),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td",10),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"a",11),e.NdJ("nzOnConfirm",function(){const _=e.CHM(s),w=_.$implicit,me=_.index;return e.oxw().remove(w,me)}),e._uU(11,"\u5220\u9664"),e.qZA(),e._UZ(12,"nz-divider",1),e.TgZ(13,"a",12),e.NdJ("click",function(){const w=e.CHM(s).$implicit;return e.oxw().rename(w)}),e._uU(14,"\u91cd\u547d\u540d"),e.qZA()()()}if(2&g){const s=x.$implicit,d=e.oxw();e.xp6(1),e.Q6J("nzChecked",d.select==s.name),e.xp6(2),e.Q6J("ngIf",s.folder),e.xp6(1),e.hij(" ",s.name," "),e.xp6(2),e.Oqu(s.size),e.xp6(1),e.Q6J("title",s.time),e.xp6(1),e.Oqu(s.time)}}function WC(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"div")(1,"button",14),e.NdJ("click",function(){return e.CHM(s),e.oxw().cancel()}),e._uU(2,"\u53d6 \u6d88"),e.qZA(),e.TgZ(3,"button",0),e.NdJ("click",function(){return e.CHM(s),e.oxw().ok()}),e._uU(4,"\u786e \u5b9a"),e.qZA()()}}let Wm=(()=>{class g{constructor(s,d){this.mr=s,this.http=d,this.url="/hmi/",this.path="",this.files=[],this.select=""}ngOnInit(){this.load()}load(){this.http.get(this.url+this.path).subscribe(s=>{console.log("attachment",s),this.files=s.data})}cancel(){this.mr.close()}ok(){this.mr.close(this.url+this.path+"/"+this.select)}onItemClick(s){if(s.folder)return""!=this.path&&(this.path+="/"),this.path+=s.name,void this.load();this.select=s.name}onItemDoubleClick(s){this.mr.close(this.url+this.path+"/"+s.name)}onItemChecked(s,d){d&&(this.select=s)}upper(){let s=this.path.split("/");s.pop(),this.path=s.join("/"),this.load()}remove(s,d){this.http.delete(this.url+this.path+"/"+s.name).subscribe(_=>{this.files.splice(d,1)})}rename(s){let d=prompt("\u8bf7\u8f93\u5165\u65b0\u540d\u79f0",s.name);d&&this.http.patch(this.url+this.path+"/"+s.name,{filename:d}).subscribe(_=>{s.name=d})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Ln.Lf),e.Y36(be.eN))},g.\u0275cmp=e.Xpm({type:g,selectors:[["hmi-attachment"]],inputs:{url:"url",path:"path"},decls:24,vars:5,consts:[["nz-button","","nzType","primary",3,"click"],["nzType","vertical"],["nzSize","small",3,"nzData"],[3,"nzShowCheckbox"],[3,"click","dblclick",4,"ngFor","ngForOf"],["nz-button","","nzMultiple","",3,"nzAction","nzChange"],[4,"nzModalFooter"],[3,"click","dblclick"],[3,"nzChecked","nzCheckedChange"],["nz-icon","","nzType","folder",4,"ngIf"],[3,"title"],["nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664\uff1f",3,"nzOnConfirm"],[3,"click"],["nz-icon","","nzType","folder"],["nz-button","","nzType","default",3,"click"]],template:function(s,d){1&s&&(e.TgZ(0,"div")(1,"p")(2,"button",0),e.NdJ("click",function(){return d.load()}),e._uU(3,"\u5237\u65b0"),e.qZA(),e._UZ(4,"nz-divider",1),e.TgZ(5,"button",0),e.NdJ("click",function(){return d.upper()}),e._uU(6,"\u4e0a\u4e00\u7ea7"),e.qZA(),e._uU(7),e.qZA(),e.TgZ(8,"nz-table",2)(9,"thead")(10,"tr"),e._UZ(11,"th",3),e.TgZ(12,"th"),e._uU(13,"\u540d\u79f0"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"\u4f53\u79ef"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"\u66f4\u65b0\u65f6\u95f4"),e.qZA(),e._UZ(18,"th"),e.qZA()(),e.TgZ(19,"tbody"),e.YNc(20,HC,15,6,"tr",4),e.qZA()(),e.TgZ(21,"nz-upload",5),e.NdJ("nzChange",function(){return d.load()}),e._uU(22,"\u4e0a\u4f20"),e.qZA()(),e.YNc(23,WC,5,0,"div",6)),2&s&&(e.xp6(7),e.hij(" ",d.path," "),e.xp6(1),e.Q6J("nzData",d.files),e.xp6(3),e.Q6J("nzShowCheckbox",!0),e.xp6(9),e.Q6J("ngForOf",d.files),e.xp6(1),e.Q6J("nzAction",d.url+d.path))},directives:[xn.ix,Rn.dQ,Ce.w,tn.g,et.N8,et.Om,et.$Z,et.Uo,et._C,et.g6,et.p0,k.sg,et.h7,k.O5,K.Ls,er,VC,Ln.Uh],styles:[""]}),g})();const GC=["dialogPopup"],JC=["hueSlider"],Jl=["alphaSlider"];function Or(g,x){if(1&g&&e._UZ(0,"div"),2&g){const s=e.oxw();e.Gre("arrow arrow-",s.cpUsePosition,""),e.Udp("top",s.arrowTop,"px")}}function YC(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"div",28),e.NdJ("newValue",function(_){return e.CHM(s),e.oxw().onColorChange(_)})("dragStart",function(){return e.CHM(s),e.oxw().onDragStart("saturation-lightness")})("dragEnd",function(){return e.CHM(s),e.oxw().onDragEnd("saturation-lightness")}),e._UZ(1,"div",14),e.qZA()}if(2&g){const s=e.oxw();e.Udp("background-color",s.hueSliderColor),e.Q6J("rgX",1)("rgY",1),e.xp6(1),e.Udp("top",null==s.slider?null:s.slider.v,"px")("left",null==s.slider?null:s.slider.s,"px")}}function Eu(g,x){1&g&&(e.O4$(),e.TgZ(0,"svg",29),e._UZ(1,"path",30)(2,"path",31),e.qZA())}function QC(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(_){e.CHM(s);const w=e.oxw();return w.onAddPresetColor(_,w.selectedColor)}),e._uU(1),e.qZA()}if(2&g){const s=e.oxw();e.Tol(s.cpAddColorButtonClass),e.Q6J("disabled",s.cpPresetColors&&s.cpPresetColors.length>=s.cpMaxPresetColorsLength),e.xp6(1),e.hij(" ",s.cpAddColorButtonText," ")}}function qC(g,x){1&g&&e._UZ(0,"div",33)}function nl(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"input",39),e.NdJ("keyup.enter",function(_){return e.CHM(s),e.oxw(2).onAcceptColor(_)})("newValue",function(_){return e.CHM(s),e.oxw(2).onAlphaInput(_)}),e.qZA()}if(2&g){const s=e.oxw(2);e.Q6J("rg",1)("value",null==s.cmykText?null:s.cmykText.a)}}function KC(g,x){1&g&&(e.TgZ(0,"div"),e._uU(1,"A"),e.qZA())}function $C(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"div",34)(1,"div",35)(2,"input",36),e.NdJ("keyup.enter",function(_){return e.CHM(s),e.oxw().onAcceptColor(_)})("newValue",function(_){return e.CHM(s),e.oxw().onCyanInput(_)}),e.qZA(),e.TgZ(3,"input",36),e.NdJ("keyup.enter",function(_){return e.CHM(s),e.oxw().onAcceptColor(_)})("newValue",function(_){return e.CHM(s),e.oxw().onMagentaInput(_)}),e.qZA(),e.TgZ(4,"input",36),e.NdJ("keyup.enter",function(_){return e.CHM(s),e.oxw().onAcceptColor(_)})("newValue",function(_){return e.CHM(s),e.oxw().onYellowInput(_)}),e.qZA(),e.TgZ(5,"input",36),e.NdJ("keyup.enter",function(_){return e.CHM(s),e.oxw().onAcceptColor(_)})("newValue",function(_){return e.CHM(s),e.oxw().onBlackInput(_)}),e.qZA(),e.YNc(6,nl,1,2,"input",37),e.qZA(),e.TgZ(7,"div",35)(8,"div"),e._uU(9,"C"),e.qZA(),e.TgZ(10,"div"),e._uU(11,"M"),e.qZA(),e.TgZ(12,"div"),e._uU(13,"Y"),e.qZA(),e.TgZ(14,"div"),e._uU(15,"K"),e.qZA(),e.YNc(16,KC,2,0,"div",38),e.qZA()()}if(2&g){const s=e.oxw();e.Udp("display",3!==s.format?"none":"block"),e.xp6(2),e.Q6J("rg",100)("value",null==s.cmykText?null:s.cmykText.c),e.xp6(1),e.Q6J("rg",100)("value",null==s.cmykText?null:s.cmykText.m),e.xp6(1),e.Q6J("rg",100)("value",null==s.cmykText?null:s.cmykText.y),e.xp6(1),e.Q6J("rg",100)("value",null==s.cmykText?null:s.cmykText.k),e.xp6(1),e.Q6J("ngIf","disabled"!==s.cpAlphaChannel),e.xp6(10),e.Q6J("ngIf","disabled"!==s.cpAlphaChannel)}}function od(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"input",39),e.NdJ("keyup.enter",function(_){return e.CHM(s),e.oxw(2).onAcceptColor(_)})("newValue",function(_){return e.CHM(s),e.oxw(2).onAlphaInput(_)}),e.qZA()}if(2&g){const s=e.oxw(2);e.Q6J("rg",1)("value",null==s.hslaText?null:s.hslaText.a)}}function fp(g,x){1&g&&(e.TgZ(0,"div"),e._uU(1,"A"),e.qZA())}function Bc(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"div",40)(1,"div",35)(2,"input",41),e.NdJ("keyup.enter",function(_){return e.CHM(s),e.oxw().onAcceptColor(_)})("newValue",function(_){return e.CHM(s),e.oxw().onHueInput(_)}),e.qZA(),e.TgZ(3,"input",36),e.NdJ("keyup.enter",function(_){return e.CHM(s),e.oxw().onAcceptColor(_)})("newValue",function(_){return e.CHM(s),e.oxw().onSaturationInput(_)}),e.qZA(),e.TgZ(4,"input",36),e.NdJ("keyup.enter",function(_){return e.CHM(s),e.oxw().onAcceptColor(_)})("newValue",function(_){return e.CHM(s),e.oxw().onLightnessInput(_)}),e.qZA(),e.YNc(5,od,1,2,"input",37),e.qZA(),e.TgZ(6,"div",35)(7,"div"),e._uU(8,"H"),e.qZA(),e.TgZ(9,"div"),e._uU(10,"S"),e.qZA(),e.TgZ(11,"div"),e._uU(12,"L"),e.qZA(),e.YNc(13,fp,2,0,"div",38),e.qZA()()}if(2&g){const s=e.oxw();e.Udp("display",2!==s.format?"none":"block"),e.xp6(2),e.Q6J("rg",360)("value",null==s.hslaText?null:s.hslaText.h),e.xp6(1),e.Q6J("rg",100)("value",null==s.hslaText?null:s.hslaText.s),e.xp6(1),e.Q6J("rg",100)("value",null==s.hslaText?null:s.hslaText.l),e.xp6(1),e.Q6J("ngIf","disabled"!==s.cpAlphaChannel),e.xp6(8),e.Q6J("ngIf","disabled"!==s.cpAlphaChannel)}}function sd(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"input",39),e.NdJ("keyup.enter",function(_){return e.CHM(s),e.oxw(2).onAcceptColor(_)})("newValue",function(_){return e.CHM(s),e.oxw(2).onAlphaInput(_)}),e.qZA()}if(2&g){const s=e.oxw(2);e.Q6J("rg",1)("value",null==s.rgbaText?null:s.rgbaText.a)}}function pp(g,x){1&g&&(e.TgZ(0,"div"),e._uU(1,"A"),e.qZA())}function Gm(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"div",42)(1,"div",35)(2,"input",43),e.NdJ("keyup.enter",function(_){return e.CHM(s),e.oxw().onAcceptColor(_)})("newValue",function(_){return e.CHM(s),e.oxw().onRedInput(_)}),e.qZA(),e.TgZ(3,"input",43),e.NdJ("keyup.enter",function(_){return e.CHM(s),e.oxw().onAcceptColor(_)})("newValue",function(_){return e.CHM(s),e.oxw().onGreenInput(_)}),e.qZA(),e.TgZ(4,"input",43),e.NdJ("keyup.enter",function(_){return e.CHM(s),e.oxw().onAcceptColor(_)})("newValue",function(_){return e.CHM(s),e.oxw().onBlueInput(_)}),e.qZA(),e.YNc(5,sd,1,2,"input",37),e.qZA(),e.TgZ(6,"div",35)(7,"div"),e._uU(8,"R"),e.qZA(),e.TgZ(9,"div"),e._uU(10,"G"),e.qZA(),e.TgZ(11,"div"),e._uU(12,"B"),e.qZA(),e.YNc(13,pp,2,0,"div",38),e.qZA()()}if(2&g){const s=e.oxw();e.Udp("display",1!==s.format?"none":"block"),e.xp6(2),e.Q6J("rg",255)("value",null==s.rgbaText?null:s.rgbaText.r),e.xp6(1),e.Q6J("rg",255)("value",null==s.rgbaText?null:s.rgbaText.g),e.xp6(1),e.Q6J("rg",255)("value",null==s.rgbaText?null:s.rgbaText.b),e.xp6(1),e.Q6J("ngIf","disabled"!==s.cpAlphaChannel),e.xp6(8),e.Q6J("ngIf","disabled"!==s.cpAlphaChannel)}}function gp(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"input",39),e.NdJ("keyup.enter",function(_){return e.CHM(s),e.oxw(2).onAcceptColor(_)})("newValue",function(_){return e.CHM(s),e.oxw(2).onAlphaInput(_)}),e.qZA()}if(2&g){const s=e.oxw(2);e.Q6J("rg",1)("value",s.hexAlpha)}}function jC(g,x){1&g&&(e.TgZ(0,"div"),e._uU(1,"A"),e.qZA())}function vp(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"div",44)(1,"div",35)(2,"input",45),e.NdJ("blur",function(){return e.CHM(s),e.oxw().onHexInput(null)})("keyup.enter",function(_){return e.CHM(s),e.oxw().onAcceptColor(_)})("newValue",function(_){return e.CHM(s),e.oxw().onHexInput(_)}),e.qZA(),e.YNc(3,gp,1,2,"input",37),e.qZA(),e.TgZ(4,"div",35)(5,"div"),e._uU(6,"Hex"),e.qZA(),e.YNc(7,jC,2,0,"div",38),e.qZA()()}if(2&g){const s=e.oxw();e.Udp("display",0!==s.format?"none":"block"),e.ekj("hex-alpha","forced"===s.cpAlphaChannel),e.xp6(2),e.Q6J("value",s.hexText),e.xp6(1),e.Q6J("ngIf","forced"===s.cpAlphaChannel),e.xp6(4),e.Q6J("ngIf","forced"===s.cpAlphaChannel)}}function XC(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"input",39),e.NdJ("keyup.enter",function(_){return e.CHM(s),e.oxw(2).onAcceptColor(_)})("newValue",function(_){return e.CHM(s),e.oxw(2).onAlphaInput(_)}),e.qZA()}if(2&g){const s=e.oxw(2);e.Q6J("rg",1)("value",null==s.hslaText?null:s.hslaText.a)}}function mp(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"div",46)(1,"div",35)(2,"input",36),e.NdJ("keyup.enter",function(_){return e.CHM(s),e.oxw().onAcceptColor(_)})("newValue",function(_){return e.CHM(s),e.oxw().onValueInput(_)}),e.qZA(),e.YNc(3,XC,1,2,"input",37),e.qZA(),e.TgZ(4,"div",35)(5,"div"),e._uU(6,"V"),e.qZA(),e.TgZ(7,"div"),e._uU(8,"A"),e.qZA()()()}if(2&g){const s=e.oxw();e.xp6(2),e.Q6J("rg",100)("value",null==s.hslaText?null:s.hslaText.l),e.xp6(1),e.Q6J("ngIf","disabled"!==s.cpAlphaChannel)}}function _p(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"div",47)(1,"span",48),e.NdJ("click",function(){return e.CHM(s),e.oxw().onFormatToggle(-1)}),e.qZA(),e.TgZ(2,"span",48),e.NdJ("click",function(){return e.CHM(s),e.oxw().onFormatToggle(1)}),e.qZA()()}}function Zc(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"span",55),e.NdJ("click",function(_){e.CHM(s);const w=e.oxw().$implicit;return e.oxw(3).onRemovePresetColor(_,w)}),e.qZA()}if(2&g){const s=e.oxw(4);e.Tol(s.cpRemoveColorButtonClass)}}function Xa(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"div",53),e.NdJ("click",function(){const w=e.CHM(s).$implicit;return e.oxw(3).setColorFromString(w)}),e.YNc(1,Zc,1,3,"span",54),e.qZA()}if(2&g){const s=x.$implicit,d=e.oxw(3);e.Udp("background-color",s),e.xp6(1),e.Q6J("ngIf",d.cpAddColorButton)}}function Jm(g,x){if(1&g&&(e.TgZ(0,"div"),e.YNc(1,Xa,2,3,"div",52),e.qZA()),2&g){const s=e.oxw(2);e.Tol(s.cpPresetColorsClass),e.xp6(1),e.Q6J("ngForOf",s.cpPresetColors)}}function Uc(g,x){if(1&g&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&g){const s=e.oxw(2);e.Tol(s.cpPresetEmptyMessageClass),e.xp6(1),e.Oqu(s.cpPresetEmptyMessage)}}function ld(g,x){if(1&g&&(e.TgZ(0,"div",49),e._UZ(1,"hr"),e.TgZ(2,"div",50),e._uU(3),e.qZA(),e.YNc(4,Jm,2,4,"div",51),e.YNc(5,Uc,2,4,"div",51),e.qZA()),2&g){const s=e.oxw();e.xp6(3),e.Oqu(s.cpPresetLabel),e.xp6(1),e.Q6J("ngIf",null==s.cpPresetColors?null:s.cpPresetColors.length),e.xp6(1),e.Q6J("ngIf",!(null!=s.cpPresetColors&&s.cpPresetColors.length)&&s.cpAddColorButton)}}function Ym(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",58),e.NdJ("click",function(_){return e.CHM(s),e.oxw(2).onCancelColor(_)}),e._uU(1),e.qZA()}if(2&g){const s=e.oxw(2);e.Tol(s.cpCancelButtonClass),e.xp6(1),e.Oqu(s.cpCancelButtonText)}}function yp(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"button",58),e.NdJ("click",function(_){return e.CHM(s),e.oxw(2).onAcceptColor(_)}),e._uU(1),e.qZA()}if(2&g){const s=e.oxw(2);e.Tol(s.cpOKButtonClass),e.xp6(1),e.Oqu(s.cpOKButtonText)}}function Qm(g,x){if(1&g&&(e.TgZ(0,"div",56),e.YNc(1,Ym,2,4,"button",57),e.YNc(2,yp,2,4,"button",57),e.qZA()),2&g){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.cpCancelButton),e.xp6(1),e.Q6J("ngIf",s.cpOKButton)}}function Ma(g,x){1&g&&e.GkF(0)}function Mu(g,x){if(1&g&&(e.TgZ(0,"div",59),e.YNc(1,Ma,1,0,"ng-container",60),e.qZA()),2&g){const s=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",s.cpExtraTemplate)}}var Ui=(()=>{return(g=Ui||(Ui={}))[g.HEX=0]="HEX",g[g.RGBA=1]="RGBA",g[g.HSLA=2]="HSLA",g[g.CMYK=3]="CMYK",Ui;var g})();class ms{constructor(x,s,d,_){this.r=x,this.g=s,this.b=d,this.a=_}}class rl{constructor(x,s,d,_){this.h=x,this.s=s,this.v=d,this.a=_}}class Yl{constructor(x,s,d,_){this.h=x,this.s=s,this.l=d,this.a=_}}class Ou{constructor(x,s,d,_,w=1){this.c=x,this.m=s,this.y=d,this.k=_,this.a=w}}let Pu=(()=>{class g{constructor(){this.newValue=new e.vpe}inputChange(s){const d=s.target.value;if(void 0===this.rg)this.newValue.emit(d);else{const _=parseFloat(d);this.newValue.emit({v:_,rg:this.rg})}}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275dir=e.lG2({type:g,selectors:[["","text",""]],hostBindings:function(s,d){1&s&&e.NdJ("input",function(w){return d.inputChange(w)})},inputs:{rg:"rg",text:"text"},outputs:{newValue:"newValue"}}),g})(),ud=(()=>{class g{constructor(s){this.elRef=s,this.dragEnd=new e.vpe,this.dragStart=new e.vpe,this.newValue=new e.vpe,this.listenerMove=d=>this.move(d),this.listenerStop=()=>this.stop()}mouseDown(s){this.start(s)}touchStart(s){this.start(s)}move(s){s.preventDefault(),this.setCursor(s)}start(s){this.setCursor(s),s.stopPropagation(),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),this.dragStart.emit()}stop(){document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop),document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),this.dragEnd.emit()}getX(s){const d=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==s.pageX?s.pageX:s.touches[0].pageX)-d.left-window.pageXOffset}getY(s){const d=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==s.pageY?s.pageY:s.touches[0].pageY)-d.top-window.pageYOffset}setCursor(s){const d=this.elRef.nativeElement.offsetWidth,_=this.elRef.nativeElement.offsetHeight,w=Math.max(0,Math.min(this.getX(s),d)),me=Math.max(0,Math.min(this.getY(s),_));void 0!==this.rgX&&void 0!==this.rgY?this.newValue.emit({s:w/d,v:1-me/_,rgX:this.rgX,rgY:this.rgY}):void 0===this.rgX&&void 0!==this.rgY?this.newValue.emit({v:me/_,rgY:this.rgY}):void 0!==this.rgX&&void 0===this.rgY&&this.newValue.emit({v:w/d,rgX:this.rgX})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(e.SBq))},g.\u0275dir=e.lG2({type:g,selectors:[["","slider",""]],hostBindings:function(s,d){1&s&&e.NdJ("mousedown",function(w){return d.mouseDown(w)})("touchstart",function(w){return d.touchStart(w)})},inputs:{rgX:"rgX",rgY:"rgY",slider:"slider"},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"}}),g})();class Iu{constructor(x,s,d,_){this.h=x,this.s=s,this.v=d,this.a=_}}class Vc{constructor(x,s,d,_){this.h=x,this.s=s,this.v=d,this.a=_}}let ku=(()=>{class g{constructor(){this.active=null}setActive(s){this.active&&this.active!==s&&"inline"!==this.active.cpDialogDisplay&&this.active.closeDialog(),this.active=s}hsva2hsla(s){const d=s.h,_=s.s,w=s.v,me=s.a;if(0===w)return new Yl(d,0,0,me);if(0===_&&1===w)return new Yl(d,1,1,me);{const Re=w*(2-_)/2;return new Yl(d,w*_/(1-Math.abs(2*Re-1)),Re,me)}}hsla2hsva(s){const d=Math.min(s.h,1),_=Math.min(s.s,1),w=Math.min(s.l,1),me=Math.min(s.a,1);if(0===w)return new rl(d,0,0,me);{const Re=w+_*(1-Math.abs(2*w-1))/2;return new rl(d,2*(Re-w)/Re,Re,me)}}hsvaToRgba(s){let d,_,w;const me=s.h,Re=s.s,at=s.v,ft=s.a,xt=Math.floor(6*me),Bt=6*me-xt,Ot=at*(1-Re),Cn=at*(1-Bt*Re),_r=at*(1-(1-Bt)*Re);switch(xt%6){case 0:d=at,_=_r,w=Ot;break;case 1:d=Cn,_=at,w=Ot;break;case 2:d=Ot,_=at,w=_r;break;case 3:d=Ot,_=Cn,w=at;break;case 4:d=_r,_=Ot,w=at;break;case 5:d=at,_=Ot,w=Cn;break;default:d=0,_=0,w=0}return new ms(d,_,w,ft)}cmykToRgb(s){return new ms((1-s.c)*(1-s.k),(1-s.m)*(1-s.k),(1-s.y)*(1-s.k),s.a)}rgbaToCmyk(s){const d=1-Math.max(s.r,s.g,s.b);return 1===d?new Ou(0,0,0,1,s.a):new Ou((1-s.r-d)/(1-d),(1-s.g-d)/(1-d),(1-s.b-d)/(1-d),d,s.a)}rgbaToHsva(s){let d,_;const w=Math.min(s.r,1),me=Math.min(s.g,1),Re=Math.min(s.b,1),at=Math.min(s.a,1),ft=Math.max(w,me,Re),xt=Math.min(w,me,Re),Bt=ft,Ot=ft-xt;if(_=0===ft?0:Ot/ft,ft===xt)d=0;else{switch(ft){case w:d=(me-Re)/Ot+(me<Re?6:0);break;case me:d=(Re-w)/Ot+2;break;case Re:d=(w-me)/Ot+4;break;default:d=0}d/=6}return new rl(d,_,Bt,at)}rgbaToHex(s,d){let _="#"+(16777216|s.r<<16|s.g<<8|s.b).toString(16).substr(1);return d&&(_+=(256|Math.round(255*s.a)).toString(16).substr(1)),_}normalizeCMYK(s){return new Ou(s.c/100,s.m/100,s.y/100,s.k/100,s.a)}denormalizeCMYK(s){return new Ou(Math.floor(100*s.c),Math.floor(100*s.m),Math.floor(100*s.y),Math.floor(100*s.k),s.a)}denormalizeRGBA(s){return new ms(Math.round(255*s.r),Math.round(255*s.g),Math.round(255*s.b),s.a)}stringToHsva(s="",d=!1){let _=null;s=(s||"").toLowerCase();const w=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(me){return new ms(parseInt(me[2],10)/255,parseInt(me[3],10)/255,parseInt(me[4],10)/255,isNaN(parseFloat(me[5]))?1:parseFloat(me[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(me){return new Yl(parseInt(me[2],10)/360,parseInt(me[3],10)/100,parseInt(me[4],10)/100,isNaN(parseFloat(me[5]))?1:parseFloat(me[5]))}}];w.push(d?{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(me){return new ms(parseInt(me[1],16)/255,parseInt(me[2],16)/255,parseInt(me[3],16)/255,parseInt(me[4]||"FF",16)/255)}}:{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(me){return new ms(parseInt(me[1],16)/255,parseInt(me[2],16)/255,parseInt(me[3],16)/255,1)}}),w.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(me){return new ms(parseInt(me[1]+me[1],16)/255,parseInt(me[2]+me[2],16)/255,parseInt(me[3]+me[3],16)/255,1)}});for(const me in w)if(w.hasOwnProperty(me)){const Re=w[me],at=Re.re.exec(s),ft=at&&Re.parse(at);if(ft)return ft instanceof ms?_=this.rgbaToHsva(ft):ft instanceof Yl&&(_=this.hsla2hsva(ft)),_}return _}outputFormat(s,d,_){switch("auto"===d&&(d=s.a<1?"rgba":"hex"),d){case"hsla":const w=this.hsva2hsla(s),me=new Yl(Math.round(360*w.h),Math.round(100*w.s),Math.round(100*w.l),Math.round(100*w.a)/100);return s.a<1||"always"===_?"hsla("+me.h+","+me.s+"%,"+me.l+"%,"+me.a+")":"hsl("+me.h+","+me.s+"%,"+me.l+"%)";case"rgba":const Re=this.denormalizeRGBA(this.hsvaToRgba(s));return s.a<1||"always"===_?"rgba("+Re.r+","+Re.g+","+Re.b+","+Math.round(100*Re.a)/100+")":"rgb("+Re.r+","+Re.g+","+Re.b+")";default:const at="always"===_||"forced"===_;return this.rgbaToHex(this.denormalizeRGBA(this.hsvaToRgba(s)),at)}}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275prov=e.Yz7({token:g,factory:g.\u0275fac}),g})();const Hc="undefined"!=typeof window&&"ontouchstart"in window;let ex=(()=>{class g{constructor(s,d,_,w,me,Re){this.ngZone=s,this.elRef=d,this.cdRef=_,this.document=w,this.platformId=me,this.service=Re,this.isIE10=!1,this.dialogArrowSize=10,this.dialogArrowOffset=15,this.dialogInputFields=[Ui.HEX,Ui.RGBA,Ui.HSLA,Ui.CMYK],this.useRootViewContainer=!1,this.eyeDropperSupported=(0,k.NF)(this.platformId)&&"EyeDropper"in this.document.defaultView}handleEsc(s){this.show&&"popup"===this.cpDialogDisplay&&this.onCancelColor(s)}handleEnter(s){this.show&&"popup"===this.cpDialogDisplay&&this.onAcceptColor(s)}ngOnInit(){this.slider=new Iu(0,0,0,0),this.sliderDimMax=new Vc(this.hueSlider.nativeElement.offsetWidth||140,this.cpWidth,130,this.alphaSlider.nativeElement.offsetWidth||140),this.format=this.cpCmykEnabled?Ui.CMYK:"rgba"===this.cpOutputFormat?Ui.RGBA:"hsla"===this.cpOutputFormat?Ui.HSLA:Ui.HEX,this.listenerMouseDown=_=>{this.onMouseDown(_)},this.listenerResize=()=>{this.onResize()},this.openDialog(this.initialColor,!1)}ngOnDestroy(){this.closeDialog()}ngAfterViewInit(){230===this.cpWidth&&"inline"!==this.cpDialogDisplay||(this.sliderDimMax=new Vc(this.hueSlider.nativeElement.offsetWidth||140,this.cpWidth,130,this.alphaSlider.nativeElement.offsetWidth||140),this.updateColorPicker(!1),this.cdRef.detectChanges())}openDialog(s,d=!0){this.service.setActive(this),this.width||(this.cpWidth=this.directiveElementRef.nativeElement.offsetWidth),this.height||(this.height=320),this.setInitialColor(s),this.setColorFromString(s,d),this.openColorPicker()}closeDialog(){this.closeColorPicker()}setupDialog(s,d,_,w,me,Re,at,ft,xt,Bt,Ot,Cn,_r,Hi,yi,Zu,Yc,Uu,gd,z_,kp,Rx,w_,Lp,Vu,mw,Nx,Rp,D_,Qc,Fx,A_,Bx,E_,Zx,Np,_w,Ux){this.setInitialColor(_),this.setColorMode(ft),this.isIE10=10===function Cp(){let g="";"undefined"!=typeof navigator&&(g=navigator.userAgent.toLowerCase());const x=g.indexOf("msie ");return x>0&&parseInt(g.substring(x+5,g.indexOf(".",x)),10)}(),this.directiveInstance=s,this.directiveElementRef=d,this.cpDisableInput=Cn,this.cpCmykEnabled=xt,this.cpAlphaChannel=Bt,this.cpOutputFormat=Ot,this.cpDialogDisplay=Re,this.cpIgnoredElements=_r,this.cpSaveClickOutside=Hi,this.cpCloseClickOutside=yi,this.useRootViewContainer=Zu,this.width=this.cpWidth=parseInt(w,10),this.height=this.cpHeight=parseInt(me,10),this.cpPosition=Yc,this.cpPositionOffset=parseInt(Uu,10),this.cpOKButton=mw,this.cpOKButtonText=Rp,this.cpOKButtonClass=Nx,this.cpCancelButton=D_,this.cpCancelButtonText=Fx,this.cpCancelButtonClass=Qc,this.cpEyeDropper=Np,this.fallbackColor=at||"#fff",this.setPresetConfig(z_,kp),this.cpPresetColorsClass=Rx,this.cpMaxPresetColorsLength=w_,this.cpPresetEmptyMessage=Lp,this.cpPresetEmptyMessageClass=Vu,this.cpAddColorButton=A_,this.cpAddColorButtonText=E_,this.cpAddColorButtonClass=Bx,this.cpRemoveColorButtonClass=Zx,this.cpTriggerElement=_w,this.cpExtraTemplate=Ux,gd||(this.dialogArrowOffset=0),"inline"===Re&&(this.dialogArrowSize=0,this.dialogArrowOffset=0),"hex"===Ot&&"always"!==Bt&&"forced"!==Bt&&(this.cpAlphaChannel="disabled")}setColorMode(s){switch(s.toString().toUpperCase()){case"1":case"C":case"COLOR":default:this.cpColorMode=1;break;case"2":case"G":case"GRAYSCALE":this.cpColorMode=2;break;case"3":case"P":case"PRESETS":this.cpColorMode=3}}setInitialColor(s){this.initialColor=s}setPresetConfig(s,d){this.cpPresetLabel=s,this.cpPresetColors=d}setColorFromString(s,d=!0,_=!0){let w;"always"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel?(w=this.service.stringToHsva(s,!0),!w&&!this.hsva&&(w=this.service.stringToHsva(s,!1))):w=this.service.stringToHsva(s,!1),!w&&!this.hsva&&(w=this.service.stringToHsva(this.fallbackColor,!1)),w&&(this.hsva=w,this.sliderH=this.hsva.h,"hex"===this.cpOutputFormat&&"disabled"===this.cpAlphaChannel&&(this.hsva.a=1),this.updateColorPicker(d,_))}onResize(){"fixed"===this.position?this.setDialogPosition():"inline"!==this.cpDialogDisplay&&this.closeColorPicker()}onDragEnd(s){this.directiveInstance.sliderDragEnd({slider:s,color:this.outputColor})}onDragStart(s){this.directiveInstance.sliderDragStart({slider:s,color:this.outputColor})}onMouseDown(s){this.show&&!this.isIE10&&"popup"===this.cpDialogDisplay&&s.target!==this.directiveElementRef.nativeElement&&!this.isDescendant(this.elRef.nativeElement,s.target)&&!this.isDescendant(this.directiveElementRef.nativeElement,s.target)&&0===this.cpIgnoredElements.filter(d=>d===s.target).length&&this.ngZone.run(()=>{this.cpSaveClickOutside?this.directiveInstance.colorSelected(this.outputColor):(this.hsva=null,this.setColorFromString(this.initialColor,!1),this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor),this.directiveInstance.colorCanceled()),this.cpCloseClickOutside&&this.closeColorPicker()})}onAcceptColor(s){s.stopPropagation(),this.outputColor&&this.directiveInstance.colorSelected(this.outputColor),"popup"===this.cpDialogDisplay&&this.closeColorPicker()}onCancelColor(s){this.hsva=null,s.stopPropagation(),this.directiveInstance.colorCanceled(),this.setColorFromString(this.initialColor,!0),"popup"===this.cpDialogDisplay&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor,!0),this.closeColorPicker())}onEyeDropper(){this.eyeDropperSupported&&(new window.EyeDropper).open().then(d=>{this.setColorFromString(d.sRGBHex,!0)})}onFormatToggle(s){const d=this.dialogInputFields.length-(this.cpCmykEnabled?0:1),_=((this.dialogInputFields.indexOf(this.format)+s)%d+d)%d;this.format=this.dialogInputFields[_]}onColorChange(s){this.hsva.s=s.s/s.rgX,this.hsva.v=s.v/s.rgY,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"lightness",value:this.hsva.v,color:this.outputColor}),this.directiveInstance.sliderChanged({slider:"saturation",value:this.hsva.s,color:this.outputColor})}onHueChange(s){this.hsva.h=s.v/s.rgX,this.sliderH=this.hsva.h,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"hue",value:this.hsva.h,color:this.outputColor})}onValueChange(s){this.hsva.v=s.v/s.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"value",value:this.hsva.v,color:this.outputColor})}onAlphaChange(s){this.hsva.a=s.v/s.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"alpha",value:this.hsva.a,color:this.outputColor})}onHexInput(s){if(null===s)this.updateColorPicker();else{s&&"#"!==s[0]&&(s="#"+s);let d=/^#([a-f0-9]{3}|[a-f0-9]{6})$/gi;"always"===this.cpAlphaChannel&&(d=/^#([a-f0-9]{3}|[a-f0-9]{6}|[a-f0-9]{8})$/gi);const _=d.test(s);_&&(s.length<5&&(s="#"+s.substring(1).split("").map(w=>w+w).join("")),"forced"===this.cpAlphaChannel&&(s+=Math.round(255*this.hsva.a).toString(16)),this.setColorFromString(s,!0,!1)),this.directiveInstance.inputChanged({input:"hex",valid:_,value:s,color:this.outputColor})}}onRedInput(s){const d=this.service.hsvaToRgba(this.hsva),_=!isNaN(s.v)&&s.v>=0&&s.v<=s.rg;_&&(d.r=s.v/s.rg,this.hsva=this.service.rgbaToHsva(d),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"red",valid:_,value:d.r,color:this.outputColor})}onBlueInput(s){const d=this.service.hsvaToRgba(this.hsva),_=!isNaN(s.v)&&s.v>=0&&s.v<=s.rg;_&&(d.b=s.v/s.rg,this.hsva=this.service.rgbaToHsva(d),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"blue",valid:_,value:d.b,color:this.outputColor})}onGreenInput(s){const d=this.service.hsvaToRgba(this.hsva),_=!isNaN(s.v)&&s.v>=0&&s.v<=s.rg;_&&(d.g=s.v/s.rg,this.hsva=this.service.rgbaToHsva(d),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"green",valid:_,value:d.g,color:this.outputColor})}onHueInput(s){const d=!isNaN(s.v)&&s.v>=0&&s.v<=s.rg;d&&(this.hsva.h=s.v/s.rg,this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"hue",valid:d,value:this.hsva.h,color:this.outputColor})}onValueInput(s){const d=!isNaN(s.v)&&s.v>=0&&s.v<=s.rg;d&&(this.hsva.v=s.v/s.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"value",valid:d,value:this.hsva.v,color:this.outputColor})}onAlphaInput(s){const d=!isNaN(s.v)&&s.v>=0&&s.v<=s.rg;d&&(this.hsva.a=s.v/s.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"alpha",valid:d,value:this.hsva.a,color:this.outputColor})}onLightnessInput(s){const d=this.service.hsva2hsla(this.hsva),_=!isNaN(s.v)&&s.v>=0&&s.v<=s.rg;_&&(d.l=s.v/s.rg,this.hsva=this.service.hsla2hsva(d),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"lightness",valid:_,value:d.l,color:this.outputColor})}onSaturationInput(s){const d=this.service.hsva2hsla(this.hsva),_=!isNaN(s.v)&&s.v>=0&&s.v<=s.rg;_&&(d.s=s.v/s.rg,this.hsva=this.service.hsla2hsva(d),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"saturation",valid:_,value:d.s,color:this.outputColor})}onCyanInput(s){!isNaN(s.v)&&s.v>=0&&s.v<=s.rg&&(this.cmyk.c=s.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"cyan",valid:!0,value:this.cmyk.c,color:this.outputColor})}onMagentaInput(s){!isNaN(s.v)&&s.v>=0&&s.v<=s.rg&&(this.cmyk.m=s.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"magenta",valid:!0,value:this.cmyk.m,color:this.outputColor})}onYellowInput(s){!isNaN(s.v)&&s.v>=0&&s.v<=s.rg&&(this.cmyk.y=s.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"yellow",valid:!0,value:this.cmyk.y,color:this.outputColor})}onBlackInput(s){!isNaN(s.v)&&s.v>=0&&s.v<=s.rg&&(this.cmyk.k=s.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"black",valid:!0,value:this.cmyk.k,color:this.outputColor})}onAddPresetColor(s,d){s.stopPropagation(),this.cpPresetColors.filter(_=>_===d).length||(this.cpPresetColors=this.cpPresetColors.concat(d),this.directiveInstance.presetColorsChanged(this.cpPresetColors))}onRemovePresetColor(s,d){s.stopPropagation(),this.cpPresetColors=this.cpPresetColors.filter(_=>_!==d),this.directiveInstance.presetColorsChanged(this.cpPresetColors)}openColorPicker(){this.show||(this.show=!0,this.hidden=!0,setTimeout(()=>{this.hidden=!1,this.setDialogPosition(),this.cdRef.detectChanges()},0),this.directiveInstance.stateChanged(!0),this.isIE10||this.ngZone.runOutsideAngular(()=>{Hc?document.addEventListener("touchstart",this.listenerMouseDown):document.addEventListener("mousedown",this.listenerMouseDown)}),window.addEventListener("resize",this.listenerResize))}closeColorPicker(){this.show&&(this.show=!1,this.directiveInstance.stateChanged(!1),this.isIE10||(Hc?document.removeEventListener("touchstart",this.listenerMouseDown):document.removeEventListener("mousedown",this.listenerMouseDown)),window.removeEventListener("resize",this.listenerResize),this.cdRef.destroyed||this.cdRef.detectChanges())}updateColorPicker(s=!0,d=!0,_=!1){if(this.sliderDimMax){let w,me,Re;2===this.cpColorMode&&(this.hsva.s=0);const at=this.outputColor;if(me=this.service.hsva2hsla(this.hsva),this.cpCmykEnabled?(_?(Re=this.service.cmykToRgb(this.service.normalizeCMYK(this.cmyk)),this.hsva=this.service.rgbaToHsva(Re)):(Re=this.service.hsvaToRgba(this.hsva),this.cmyk=this.service.denormalizeCMYK(this.service.rgbaToCmyk(Re))),Re=this.service.denormalizeRGBA(Re),this.sliderH=this.hsva.h):Re=this.service.denormalizeRGBA(this.service.hsvaToRgba(this.hsva)),w=this.service.denormalizeRGBA(this.service.hsvaToRgba(new rl(this.sliderH||this.hsva.h,1,1,1))),d&&(this.hslaText=new Yl(Math.round(360*me.h),Math.round(100*me.s),Math.round(100*me.l),Math.round(100*me.a)/100),this.rgbaText=new ms(Re.r,Re.g,Re.b,Math.round(100*Re.a)/100),this.cpCmykEnabled&&(this.cmykText=new Ou(this.cmyk.c,this.cmyk.m,this.cmyk.y,this.cmyk.k,Math.round(100*this.cmyk.a)/100)),this.hexText=this.service.rgbaToHex(Re,"always"===this.cpAlphaChannel),this.hexAlpha=this.rgbaText.a),"auto"===this.cpOutputFormat&&this.format!==Ui.RGBA&&this.format!==Ui.CMYK&&this.format!==Ui.HSLA&&this.hsva.a<1&&(this.format=this.hsva.a<1?Ui.RGBA:Ui.HEX),this.hueSliderColor="rgb("+w.r+","+w.g+","+w.b+")",this.alphaSliderColor="rgb("+Re.r+","+Re.g+","+Re.b+")",this.outputColor=this.service.outputFormat(this.hsva,this.cpOutputFormat,this.cpAlphaChannel),this.selectedColor=this.service.outputFormat(this.hsva,"rgba",null),this.format!==Ui.CMYK)this.cmykColor="";else if("always"===this.cpAlphaChannel||"enabled"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel){const ft=Math.round(100*this.cmyk.a)/100;this.cmykColor=`cmyka(${this.cmyk.c},${this.cmyk.m},${this.cmyk.y},${this.cmyk.k},${ft})`}else this.cmykColor=`cmyk(${this.cmyk.c},${this.cmyk.m},${this.cmyk.y},${this.cmyk.k})`;this.slider=new Iu((this.sliderH||this.hsva.h)*this.sliderDimMax.h-8,this.hsva.s*this.sliderDimMax.s-8,(1-this.hsva.v)*this.sliderDimMax.v-8,this.hsva.a*this.sliderDimMax.a-8),s&&at!==this.outputColor&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.outputColor))}}setDialogPosition(){if("inline"===this.cpDialogDisplay)this.position="relative";else{let _,s="static",d="",w=null,me=null,Re=this.directiveElementRef.nativeElement.parentNode;const at=this.dialogElement.nativeElement.offsetHeight;for(;null!==Re&&"HTML"!==Re.tagName;){if(_=window.getComputedStyle(Re),s=_.getPropertyValue("position"),d=_.getPropertyValue("transform"),"static"!==s&&null===w&&(w=Re),d&&"none"!==d&&null===me&&(me=Re),"fixed"===s){w=me;break}Re=Re.parentNode}const ft=this.createDialogBox(this.directiveElementRef.nativeElement,"fixed"!==s);if(this.useRootViewContainer||"fixed"===s&&(!w||w instanceof HTMLUnknownElement))this.top=ft.top,this.left=ft.left;else{null===w&&(w=Re);const Bt=this.createDialogBox(w,"fixed"!==s);this.top=ft.top-Bt.top,this.left=ft.left-Bt.left}"fixed"===s&&(this.position="fixed");let xt=this.cpPosition;"auto"===this.cpPosition&&(xt=function qm(g,x){let s="right",d="bottom";const{height:_,width:w}=g,{top:me,left:Re}=x,at=me+x.height,ft=Re+x.width,xt=me-_<0,Bt=at+_>(window.innerHeight||document.documentElement.clientHeight),Ot=Re-w<0,Cn=ft+w>(window.innerWidth||document.documentElement.clientWidth);return Bt&&(d="top"),xt&&(d="bottom"),Ot&&(s="right"),Cn&&(s="left"),xt&&Bt&&Ot&&Cn?["left","right","top","bottom"].reduce((yi,Zu)=>g[yi]>g[Zu]?yi:Zu):Ot&&Cn?xt?"bottom":Bt||me>at?"top":"bottom":xt&&Bt?Ot?"right":Cn||Re>ft?"left":"right":`${d}-${s}`}(this.dialogElement.nativeElement.getBoundingClientRect(),this.cpTriggerElement.nativeElement.getBoundingClientRect())),"top"===xt?(this.arrowTop=at-1,this.top-=at+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*ft.width-this.dialogArrowOffset):"bottom"===xt?(this.top+=ft.height+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*ft.width-this.dialogArrowOffset):"top-left"===xt||"left-top"===xt?(this.top-=at-ft.height+ft.height*this.cpPositionOffset/100,this.left-=this.cpWidth+this.dialogArrowSize-2-this.dialogArrowOffset):"top-right"===xt||"right-top"===xt?(this.top-=at-ft.height+ft.height*this.cpPositionOffset/100,this.left+=ft.width+this.dialogArrowSize-2-this.dialogArrowOffset):"left"===xt||"bottom-left"===xt||"left-bottom"===xt?(this.top+=ft.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left-=this.cpWidth+this.dialogArrowSize-2):(this.top+=ft.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left+=ft.width+this.dialogArrowSize-2),this.cpUsePosition=xt}}isDescendant(s,d){let _=d.parentNode;for(;null!==_;){if(_===s)return!0;_=_.parentNode}return!1}createDialogBox(s,d){const{top:_,left:w}=s.getBoundingClientRect();return{top:_+(d?window.pageYOffset:0),left:w+(d?window.pageXOffset:0),width:s.offsetWidth,height:s.offsetHeight}}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(k.K0),e.Y36(e.Lbi),e.Y36(ku))},g.\u0275cmp=e.Xpm({type:g,selectors:[["color-picker"]],viewQuery:function(s,d){if(1&s&&(e.Gf(GC,7),e.Gf(JC,7),e.Gf(Jl,7)),2&s){let _;e.iGM(_=e.CRH())&&(d.dialogElement=_.first),e.iGM(_=e.CRH())&&(d.hueSlider=_.first),e.iGM(_=e.CRH())&&(d.alphaSlider=_.first)}},hostBindings:function(s,d){1&s&&e.NdJ("keyup.esc",function(w){return d.handleEsc(w)},!1,e.evT)("keyup.enter",function(w){return d.handleEnter(w)},!1,e.evT)},decls:30,vars:51,consts:[[1,"color-picker",3,"click"],["dialogPopup",""],[3,"class","top",4,"ngIf"],["class","saturation-lightness",3,"slider","rgX","rgY","background-color","newValue","dragStart","dragEnd",4,"ngIf"],[1,"hue-alpha","box"],[1,"left"],[1,"selected-color-background"],[1,"selected-color",3,"click"],["class","eyedropper-icon","xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#000000",4,"ngIf"],["type","button",3,"class","disabled","click",4,"ngIf"],[1,"right"],["style","height: 16px;",4,"ngIf"],[1,"hue",3,"slider","rgX","newValue","dragStart","dragEnd"],["hueSlider",""],[1,"cursor"],[1,"value",3,"slider","rgX","newValue","dragStart","dragEnd"],["valueSlider",""],[1,"alpha",3,"slider","rgX","newValue","dragStart","dragEnd"],["alphaSlider",""],["class","cmyk-text",3,"display",4,"ngIf"],["class","hsla-text",3,"display",4,"ngIf"],["class","rgba-text",3,"display",4,"ngIf"],["class","hex-text",3,"hex-alpha","display",4,"ngIf"],["class","value-text",4,"ngIf"],["class","type-policy",4,"ngIf"],["class","preset-area",4,"ngIf"],["class","button-area",4,"ngIf"],["class","extra-template",4,"ngIf"],[1,"saturation-lightness",3,"slider","rgX","rgY","newValue","dragStart","dragEnd"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#000000",1,"eyedropper-icon"],["d","M0 0h24v24H0V0z","fill","none"],["d","M17.66 5.41l.92.92-2.69 2.69-.92-.92 2.69-2.69M17.67 3c-.26 0-.51.1-.71.29l-3.12 3.12-1.93-1.91-1.41 1.41 1.42 1.42L3 16.25V21h4.75l8.92-8.92 1.42 1.42 1.41-1.41-1.92-1.92 3.12-3.12c.4-.4.4-1.03.01-1.42l-2.34-2.34c-.2-.19-.45-.29-.7-.29zM6.92 19L5 17.08l8.06-8.06 1.92 1.92L6.92 19z"],["type","button",3,"disabled","click"],[2,"height","16px"],[1,"cmyk-text"],[1,"box"],["type","number","pattern","[0-9]*","min","0","max","100",3,"text","rg","value","keyup.enter","newValue"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue",4,"ngIf"],[4,"ngIf"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue"],[1,"hsla-text"],["type","number","pattern","[0-9]*","min","0","max","360",3,"text","rg","value","keyup.enter","newValue"],[1,"rgba-text"],["type","number","pattern","[0-9]*","min","0","max","255",3,"text","rg","value","keyup.enter","newValue"],[1,"hex-text"],[3,"text","value","blur","keyup.enter","newValue"],[1,"value-text"],[1,"type-policy"],[1,"type-policy-arrow",3,"click"],[1,"preset-area"],[1,"preset-label"],[3,"class",4,"ngIf"],["class","preset-color",3,"backgroundColor","click",4,"ngFor","ngForOf"],[1,"preset-color",3,"click"],[3,"class","click",4,"ngIf"],[3,"click"],[1,"button-area"],["type","button",3,"class","click",4,"ngIf"],["type","button",3,"click"],[1,"extra-template"],[4,"ngTemplateOutlet"]],template:function(s,d){1&s&&(e.TgZ(0,"div",0,1),e.NdJ("click",function(w){return w.stopPropagation()}),e.YNc(2,Or,1,5,"div",2),e.YNc(3,YC,2,8,"div",3),e.TgZ(4,"div",4)(5,"div",5),e._UZ(6,"div",6),e.TgZ(7,"div",7),e.NdJ("click",function(){return d.eyeDropperSupported&&d.cpEyeDropper&&d.onEyeDropper()}),e.YNc(8,Eu,3,0,"svg",8),e.qZA(),e.YNc(9,QC,2,5,"button",9),e.qZA(),e.TgZ(10,"div",10),e.YNc(11,qC,1,0,"div",11),e.TgZ(12,"div",12,13),e.NdJ("newValue",function(w){return d.onHueChange(w)})("dragStart",function(){return d.onDragStart("hue")})("dragEnd",function(){return d.onDragEnd("hue")}),e._UZ(14,"div",14),e.qZA(),e.TgZ(15,"div",15,16),e.NdJ("newValue",function(w){return d.onValueChange(w)})("dragStart",function(){return d.onDragStart("value")})("dragEnd",function(){return d.onDragEnd("value")}),e._UZ(17,"div",14),e.qZA(),e.TgZ(18,"div",17,18),e.NdJ("newValue",function(w){return d.onAlphaChange(w)})("dragStart",function(){return d.onDragStart("alpha")})("dragEnd",function(){return d.onDragEnd("alpha")}),e._UZ(20,"div",14),e.qZA()()(),e.YNc(21,$C,17,12,"div",19),e.YNc(22,Bc,14,10,"div",20),e.YNc(23,Gm,14,10,"div",21),e.YNc(24,vp,8,7,"div",22),e.YNc(25,mp,9,3,"div",23),e.YNc(26,_p,3,0,"div",24),e.YNc(27,ld,6,3,"div",25),e.YNc(28,Qm,3,2,"div",26),e.YNc(29,Mu,2,1,"div",27),e.qZA()),2&s&&(e.Udp("display",d.show?"block":"none")("visibility",d.hidden?"hidden":"visible")("top",d.top,"px")("left",d.left,"px")("position",d.position)("height",d.cpHeight,"px")("width",d.cpWidth,"px"),e.ekj("open",d.show),e.xp6(2),e.Q6J("ngIf","popup"===d.cpDialogDisplay),e.xp6(1),e.Q6J("ngIf",1===(d.cpColorMode||1)),e.xp6(4),e.Udp("background-color",d.selectedColor)("cursor",d.eyeDropperSupported&&d.cpEyeDropper?"pointer":null),e.xp6(1),e.Q6J("ngIf",d.eyeDropperSupported&&d.cpEyeDropper),e.xp6(1),e.Q6J("ngIf",d.cpAddColorButton),e.xp6(2),e.Q6J("ngIf","disabled"===d.cpAlphaChannel),e.xp6(1),e.Udp("display",1===(d.cpColorMode||1)?"block":"none"),e.Q6J("rgX",1),e.xp6(2),e.Udp("left",null==d.slider?null:d.slider.h,"px"),e.xp6(1),e.Udp("display",2===(d.cpColorMode||1)?"block":"none"),e.Q6J("rgX",1),e.xp6(2),e.Udp("right",null==d.slider?null:d.slider.v,"px"),e.xp6(1),e.Udp("display","disabled"===d.cpAlphaChannel?"none":"block")("background-color",d.alphaSliderColor),e.Q6J("rgX",1),e.xp6(2),e.Udp("left",null==d.slider?null:d.slider.a,"px"),e.xp6(1),e.Q6J("ngIf",!d.cpDisableInput&&1===(d.cpColorMode||1)),e.xp6(1),e.Q6J("ngIf",!d.cpDisableInput&&1===(d.cpColorMode||1)),e.xp6(1),e.Q6J("ngIf",!d.cpDisableInput&&1===(d.cpColorMode||1)),e.xp6(1),e.Q6J("ngIf",!d.cpDisableInput&&1===(d.cpColorMode||1)),e.xp6(1),e.Q6J("ngIf",!d.cpDisableInput&&2===(d.cpColorMode||1)),e.xp6(1),e.Q6J("ngIf",!d.cpDisableInput&&1===(d.cpColorMode||1)),e.xp6(1),e.Q6J("ngIf",(null==d.cpPresetColors?null:d.cpPresetColors.length)||d.cpAddColorButton),e.xp6(1),e.Q6J("ngIf",d.cpOKButton||d.cpCancelButton),e.xp6(1),e.Q6J("ngIf",d.cpExtraTemplate))},directives:[k.O5,ud,Pu,k.sg,k.tP],styles:['.color-picker{position:absolute;z-index:1000;width:230px;height:auto;border:#777 solid 1px;cursor:default;-webkit-user-select:none;user-select:none;background-color:#fff}.color-picker *{box-sizing:border-box;margin:0;font-size:11px}.color-picker input{width:0;height:26px;min-width:0;font-size:13px;text-align:center;color:#000}.color-picker input:invalid,.color-picker input:-moz-ui-invalid,.color-picker input:-moz-submit-invalid{box-shadow:none}.color-picker input::-webkit-inner-spin-button,.color-picker input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none}.color-picker .arrow{position:absolute;z-index:999999;width:0;height:0;border-style:solid}.color-picker .arrow.arrow-top{left:8px;border-width:10px 5px;border-color:#777 rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0)}.color-picker .arrow.arrow-bottom{top:-20px;left:8px;border-width:10px 5px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) #777 rgba(0,0,0,0)}.color-picker .arrow.arrow-top-left,.color-picker .arrow.arrow-left-top{right:-21px;bottom:8px;border-width:5px 10px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0) #777}.color-picker .arrow.arrow-top-right,.color-picker .arrow.arrow-right-top{bottom:8px;left:-20px;border-width:5px 10px;border-color:rgba(0,0,0,0) #777 rgba(0,0,0,0) rgba(0,0,0,0)}.color-picker .arrow.arrow-left,.color-picker .arrow.arrow-left-bottom,.color-picker .arrow.arrow-bottom-left{top:8px;right:-21px;border-width:5px 10px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0) #777}.color-picker .arrow.arrow-right,.color-picker .arrow.arrow-right-bottom,.color-picker .arrow.arrow-bottom-right{top:8px;left:-20px;border-width:5px 10px;border-color:rgba(0,0,0,0) #777 rgba(0,0,0,0) rgba(0,0,0,0)}.color-picker .cursor{position:relative;width:16px;height:16px;border:#222 solid 2px;border-radius:50%;cursor:default}.color-picker .box{display:flex;padding:4px 8px}.color-picker .left{position:relative;padding:16px 8px}.color-picker .right{flex:1 1 auto;padding:12px 8px}.color-picker .button-area{padding:0 16px 16px;text-align:right}.color-picker .button-area button{margin-left:8px}.color-picker .preset-area{padding:4px 15px}.color-picker .preset-area .preset-label{overflow:hidden;width:100%;padding:4px;font-size:11px;white-space:nowrap;text-align:left;text-overflow:ellipsis;color:#555}.color-picker .preset-area .preset-color{position:relative;display:inline-block;width:18px;height:18px;margin:4px 6px 8px;border:#a9a9a9 solid 1px;border-radius:25%;cursor:pointer}.color-picker .preset-area .preset-empty-message{min-height:18px;margin-top:4px;margin-bottom:8px;font-style:italic;text-align:center}.color-picker .hex-text{width:100%;padding:4px 8px;font-size:11px}.color-picker .hex-text .box{padding:0 24px 8px 8px}.color-picker .hex-text .box div{float:left;flex:1 1 auto;text-align:center;color:#555;clear:left}.color-picker .hex-text .box input{flex:1 1 auto;padding:1px;border:#a9a9a9 solid 1px}.color-picker .hex-alpha .box div:first-child,.color-picker .hex-alpha .box input:first-child{flex-grow:3;margin-right:8px}.color-picker .cmyk-text,.color-picker .hsla-text,.color-picker .rgba-text,.color-picker .value-text{width:100%;padding:4px 8px;font-size:11px}.color-picker .cmyk-text .box,.color-picker .hsla-text .box,.color-picker .rgba-text .box{padding:0 24px 8px 8px}.color-picker .value-text .box{padding:0 8px 8px}.color-picker .cmyk-text .box div,.color-picker .hsla-text .box div,.color-picker .rgba-text .box div,.color-picker .value-text .box div{flex:1 1 auto;margin-right:8px;text-align:center;color:#555}.color-picker .cmyk-text .box div:last-child,.color-picker .hsla-text .box div:last-child,.color-picker .rgba-text .box div:last-child,.color-picker .value-text .box div:last-child{margin-right:0}.color-picker .cmyk-text .box input,.color-picker .hsla-text .box input,.color-picker .rgba-text .box input,.color-picker .value-text .box input{float:left;flex:1;padding:1px;margin:0 8px 0 0;border:#a9a9a9 solid 1px}.color-picker .cmyk-text .box input:last-child,.color-picker .hsla-text .box input:last-child,.color-picker .rgba-text .box input:last-child,.color-picker .value-text .box input:last-child{margin-right:0}.color-picker .hue-alpha{align-items:center;margin-bottom:3px}.color-picker .hue{direction:ltr;width:100%;height:16px;margin-bottom:16px;border:none;cursor:pointer;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwkUFWbCCAAAAFxJREFUaN7t0kEKg0AQAME2x83/n2qu5qCgD1iDhCoYdpnbQC9bbY1qVO/jvc6k3ad91s7/7F1/csgPrujuQ17BDYSFsBAWwgJhISyEBcJCWAgLhIWwEBYIi2f7Ar/1TCgFH2X9AAAAAElFTkSuQmCC)}.color-picker .value{direction:rtl;width:100%;height:16px;margin-bottom:16px;border:none;cursor:pointer;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAACTklEQVR42u3SYUcrABhA4U2SkmRJMmWSJklKJiWZZpKUJJskKUmaTFImKZOUzMySpGRmliRNJilJSpKSJEtmSpIpmWmSdO736/6D+x7OP3gUCoWCv1cqlSQlJZGcnExKSgqpqamkpaWRnp5ORkYGmZmZqFQqsrKyyM7OJicnh9zcXNRqNXl5eeTn56PRaCgoKKCwsJCioiK0Wi3FxcWUlJRQWlpKWVkZ5eXlVFRUUFlZiU6no6qqiurqampqaqitraWurg69Xk99fT0GgwGj0UhDQwONjY00NTXR3NxMS0sLra2ttLW10d7ejslkwmw209HRQWdnJ11dXXR3d9PT00Nvby99fX309/czMDDA4OAgFouFoaEhrFYrw8PDjIyMMDo6ytjYGDabjfHxcSYmJpicnGRqagq73c709DQzMzPMzs4yNzfH/Pw8DocDp9OJy+XC7XazsLDA4uIiS0tLLC8vs7KywurqKmtra3g8HrxeLz6fD7/fz/r6OhsbG2xubrK1tcX29jaBQICdnR2CwSC7u7vs7e2xv7/PwcEBh4eHHB0dcXx8zMnJCaenp5ydnXF+fs7FxQWXl5dcXV1xfX3Nzc0Nt7e33N3dEQqFuL+/5+HhgXA4TCQS4fHxkaenJ56fn3l5eeH19ZVoNMrb2xvv7+98fHwQi8WIx+N8fn6SSCT4+vri+/ubn58ffn9/+VcKgSWwBJbAElgCS2AJLIElsASWwBJYAktgCSyBJbAElsASWAJLYAksgSWwBJbAElgCS2AJLIElsP4/WH8AmJ5Z6jHS4h8AAAAASUVORK5CYII=)}.color-picker .alpha{direction:ltr;width:100%;height:16px;border:none;cursor:pointer;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwYQlZMa3gAAAWVJREFUaN7tmEGO6jAQRCsOArHgBpyAJYGjcGocxAm4A2IHpmoWE0eBH+ezmFlNvU06shJ3W6VEelWMUQAIIF9f6qZpimsA1LYtS2uF51/u27YVAFZVRUkEoGHdPV/sIcbIEIIkUdI/9Xa7neyv61+SWFUVAVCSct00TWn2fv6u3+Ecfd3tXzy/0+nEUu+SPjo/kqzrmiQpScN6v98XewfA8/lMkiLJ2WxGSUopcT6fM6U0NX9/frfbjev1WtfrlZfLhYfDQQHG/AIOlnGwjINlHCxjHCzjYJm/TJWdCwquJXseFFzGwDNNeiKMOJTO8xQdDQaeB29+K9efeLaBo9J7vdvtJj1RjFFjfiv7qv95tjx/7leSQgh93e1ffMeIp6O+YQjho/N791t1XVOSSI7N//K+4/GoxWLBx+PB5/Op5XLJ+/3OlJJWqxU3m83ovv5iGf8KjYNlHCxjHCzjYBkHy5gf5gusvQU7U37jTAAAAABJRU5ErkJggg==)}.color-picker .type-policy{position:absolute;top:218px;right:12px;width:16px;height:24px;background-size:8px 16px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAgCAYAAAAffCjxAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACewAAAnsB01CO3AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIASURBVEiJ7ZY9axRRFIafsxMStrLQJpAgpBFhi+C9w1YSo00I6RZ/g9vZpBf/QOr4GyRgkSKNSrAadsZqQGwCkuAWyRZJsySwvhZ7N/vhzrgbLH3Ld8597jlzz50zJokyxXH8DqDVar0qi6v8BbItqSGpEcfxdlmsFWXkvX8AfAVWg3UKPEnT9GKujMzsAFgZsVaCN1VTQd77XUnrgE1kv+6935268WRpzrnHZvYRWC7YvC3pRZZl3wozqtVqiyH9IgjAspkd1Gq1xUJQtVrdB9ZKIAOthdg/Qc65LUk7wNIMoCVJO865rYFhkqjX6/d7vV4GPJwBMqofURS5JEk6FYBer/eeYb/Mo9WwFnPOvQbeAvfuAAK4BN4sAJtAG/gJIElmNuiJyba3EGNmZiPeZuEVmVell/Y/6N+CzDn3AXhEOOo7Hv/3BeAz8IzQkMPnJbuPx1wC+yYJ7/0nYIP5S/0FHKdp+rwCEEXRS/rf5Hl1Gtb2M0iSpCOpCZzPATmX1EySpHMLAsiy7MjMDoHrGSDXZnaYZdnRwBh7J91utwmczAA6CbG3GgPleX4jqUH/a1CktqRGnuc3hSCAMB32gKspkCtgb3KCQMmkjeP4WNJThrNNZval1WptTIsv7JtQ4tmIdRa8qSoEpWl6YWZNoAN0zKxZNPehpLSBZv2t+Q0CJ9lLnARQLAAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center}.color-picker .type-policy .type-policy-arrow{display:block;width:100%;height:50%}.color-picker .selected-color{position:absolute;top:16px;left:8px;width:40px;height:40px;border:1px solid #a9a9a9;border-radius:50%}.color-picker .selected-color-background{width:40px;height:40px;border-radius:50%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAh0lEQVRYR+2W0QlAMQgD60zdfwOdqa8TmI/wQMr5K0I5bZLIzLOa2nt37VVVbd+dDx5obgCC3KBLwJ2ff4PnVidkf+ucIhw80HQaCLo3DMH3CRK3iFsmAWVl6hPNDwt8EvNE5q+YuEXcMgkonVM6SdyCoEvAnZ8v1Hjx817MilmxSUB5rdLJDycZgUAZUch/AAAAAElFTkSuQmCC)}.color-picker .saturation-lightness{direction:ltr;width:100%;height:130px;border:none;cursor:pointer;touch-action:manipulation;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOYAAACCCAYAAABSD7T3AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwksPWR6lgAAIABJREFUeNrtnVuT47gRrAHN+P//Or/61Y5wONZ7mZ1u3XAeLMjJZGZVgdKsfc5xR3S0RIIUW+CHzCpc2McYo7XGv3ex7UiZd57rjyzzv+v+33X/R/+3r/f7vR386Y+TvKNcf/wdhTLPcv9qU2wZd74uth0t1821jkIZLPcsI/6nWa4XvutquU0Z85mnx80S/ZzgpnLnOtHNt7/ofx1TKXcSNzN/7qbMQ3ju7rNQmMYYd/4s2j9aa+P+gGaMcZrb1M/tdrvf7/d2v99P9/t93O/3cbvdxu12G9frdVwul3E+n8c///nP+2+//Xb66aefxl//+tfx5z//2YK5Al2rgvf4UsbpdGrB52bAvArXpuzjmiqAVSGz5eDmGYXzhbAZmCrnmzddpUU+8Y1dAOYeXCtDUwVwV7YCGH6uAmyMcZ9l5vkUaBPGMUZ7/J5w/792/fvv9Xq93263dr/fTxPECeME8nK5jM/Pz/HTTz/dv337dvrll1/GP/7xj/G3v/1t/OUvfwkVswongjdOp9PzH3U3D3zmWGnZVXn4jCqs7wC2BKP4/8tAzkZsoWx6XrqeHZymvp4ABCBJhTQwKfDT8gzrZCIqi5AhiACjBfEB2rP8/X63MM7f6/V6v9/v7Xa7bYC83W7jcrlsVHIq5ffv30+//fbb+OWXX8ZPP/00/v73v4+ff/75JSvbeu+bL2WMMaFbAlpBNM85QX+ct6qoSqkPAwuQlBVKqGNFSUOAA3Bmu7gC5hNOd15nSwvAOUW7C4giUCV8Sgn5L9hNFIqTsp0GxI0ysioyjAjkY/tGJVEpz+fz+OWXX+7fv38//f777+Pbt2/j119/HT///PP49ddfx8fHRwrmTjV779EXu2px2xhjwtdJZQcAWQIPLPISsMJaSwiD8gzIKrwSyATE5j5nAbR5c1dBUwBlsEWW0h6LqiYsqFPAQxCyRZ3wOSARxmlXMX5k64pQfvv27f75+dk+Pj5OHx8f4/v37+Pbt2/jt99+G9++fRsfHx/jcrmUFLO31gYDWblxRIs/TqfT7ousxJsAxXA2Gc7TA9XdgfdoHbFsj76X2+1WArgI1ageGwA3qupqoHsmcbI6Fu93quggFa9d7LeDtgKfAFHBJ+NEByIkcJ5KervdTmhhGcgJJSZ5vn//fj+fz+18Pp8+Pz/H5+fnmGD+/vvv4/v37+Pj42N8fn6O2+1Ws7JjjP6wraMI5E4RZ8x2vV5TSwkquotV7/d7Tz6HFWsD/qNcdw0CQ3q/321c686TwDVIdbuy73zNldhSHb8I2klZznm+InBS4U6n0302aBFsLhHDAKJVJVglfI9jhvu53W53sLANYNxAiDA6MCeUHx8f9+v12i6XS7tcLqcZW57P5yeY8/fz83Ocz+fnsSmYUyknWEG85WBst9stzSLyMdfr9Qi08iY15UZ0LlDGLhR3o5zK2j7OPUTD0E+nU3tk7Xb/16NFbhloAMuY1zjLUOO3BKeIDe+Z8s3/J4gFo4TM5jPmuRg28foUKKVSwo16TgA5npywcWLHgYl/Pz8/73/605/ab7/91m63W7tcLie0sZj4mao5gTyfz88E0f1+j8EcYzwTPEG2cqjyfHNF0M8fuqEiaOVnRzZZQNh5fwQyHg/HDGfJo89Q1zb/quu5XC6773I2XKfTqd/v9+d3wuqWva/YTdUdEV3fhIv/Viyps6YE3x3r43K5bJQS66zaxVGFsvd+//j4aF+/fm3fv39vt9utff36tf3+++/tdrudvn37ZuNLBaaCMgUzC+rZRiFowxUuJI8YMqcCp9Opq5vagaYU6lGJA1XQqejchw6Cj0Gw5nYBrGw01A2O206n04BGouNNyTfp/FwElhUey6nXrIKw7QQWddxuN2ldL5fL839gSPF8ahu/JvBO48CPSuqMf8Vp9/P53L58+dLu93s7n8/tfr8/39/v9/b5+TkhPJ3P56mQ436/j+/fv+/iSgbzer0+AZx/5+88bv6OMda6S5z6kd21fYC9dxv7cIJJ2d9AOS30fPMzyHiTM8B4DF6XUlYHp4KQW3W+1t77MNB1vGHxWq7Xa7vf78+y5/N5A+H1et29xuP5dbYtyaRu4AksbPq6936fjRzXRxBbPr/b+b18+fKljTHaBBBfn8/n0/1+H1++fBnn8zm0sB8fH5u4cr5GuBhMVk0EEn9RsctgVhM+ixlJtMA23R8B6yysAstBOgFXIKKCMIgToMqNEu2fYMH7ztc732dQKkCj1ytAZtY0Kx8pIr8GGJ+AT3V+2Hirhl++fBmXy2Wz73w+b17P8p+fn8/tUwGVleVkTyUb68DkfayWY4zxNRihU4EpLJPZVrK+u7J4/mgfKqeLW9X2REWlItL1diynbDDb3+jXgYjQqn0rrxWc+NkILP7F7xIbMvx7vV53x40xnlbWJF12ZSag/N0pW6t+ZzmOMzHjajKwDfond78zYTdfq18up97zr2q8v3IioBprRtBl0EZ9og5WBRGOdOHjIjXF7UotFbgOWnXzIJyzYvjG5IYgsmMOxHkz8OsMSrVNWeq5T8DaOcbEv1Od5rbs9aO7YvMet63EkF++fMExq+MRl4/L5bLZN/+ez+fnZ6KazuMqXSQVO5spJXflHAIzes/xJseckRJiDMog9d6VfRrqXMr6KpVV27jRwJacGovOAM1zMdQMnwK1AubK63kdCChvI1C7g0z9nf/D+Xze2Vj8H7Gx4P9duQlsYCrqyN8XqG3Hm/10Oj3jw/n+crlstuM+jPmmxT2dTuPz83Pzt2pn1XsEHX/bnPaVqVmh0xwOt0o6XLLAHePUU203wHfcrspCwmV3TryB5s0Mseeg97x/BwzCjBlbB+pRAPla0BVQuT6V6QHdBlj3d0KG147b+DqxQeUymDO43W4dQar+TIjwmAd0z8/h65vf0/yLv3Pb5XLpru/ydDo9s7ET0I+Pj6dKK9VUEIeKWQWPAOrJ8LKd4vE+t91Y3e7UFlWatg2VwJnb+HPmtvm/sfK59/OaWF3x/eP1UPHvA5DDYDpYXfb0drv1V2DkBkxtw/tEWVVlXWdC9pFYs5/jfh9dS/16vW7s6lTG+TfqsxSJHxkXXq/Xdr1eu4LsfD6P3vsT3N77DkL+zPm5jSdKL4zR3AxQd6rHkLkYlSowsrq7znzu6wSwdsMJOXmA5fBcjxtgMGBYHlr5zokhtsMCTgXLQOW4XC6dEyEMprL8mAQzXRgduix2yZzorxkYsDn3hB1VeMLGsXsVtgl2pW8S3svk0vw7R4hNaHvv4cACl5HFzwIH0Kc6zu4XjDPR/jpAVxWzO1Xk2DDb3vTcxeGU1iWZHkmIDWziWKvirCJ4Dravs6IJ/GG6cTqWdXDy+fArQDVVkLqkVjAoZIITdmmIqXwqa95N3+MGYoZQdRVNO53Y1xRkhO16vY7eu507Ca9lJnbGpxOemQhSw/AQsmmp5zU9BiU8G6wvX76M6/U6Pj4+do0Bz4CpgiknTUeDqwlKBmg3u4OVjrZ1A+rAcgaejWq6eJCvCYFDONSwOgHX4EQRw8lxbzDOdEK6gZ3Hk1b+8g2o1JFtKXyv/fEdTXuWjWXdAZiBp6ADeDrCFiim7B6ZFneeI7Gvm/PMkUDX67W7xI8b0D7/v8dA9qfN5oaCf74WZjH0mf1cmfY1Y0JUFmVrTWu8uzkNcLtEj7u5FXBTkfC6GOA5q8YMxO8KVvF6sAVGdcrUbsKODcQKkLMOMdmlxum642YrPm26AlhZW1YB1R+rrGswE8TaYAWeUMxdf+WjwSvZ2Ef3ytOyfn5+PpVPAaqOn43MtNBqvmjjxbjM4lZjZY4gqNMI5ktaW/sYKNwS+9lFQzGihmMCKPa7+Z0V6Eb0GRmobtpX8JljWu5FMLN5ja6hG9kwQgZqf5+1NH5UxzkFReCdWhJ8XdlGUkxO7HRlYRm4mVO43W7ter12TPJEw/rmEN3L5SKHIWZg9mz+pUoKOYq5bJTJdX2gme1UcxMZQFaEQIlHct32M+Y1BzGkGuzfiyAN9z+ugplZ1symCrDCYYkGxDTpI9RzBy0rHyeDUC1nWaeUaD9n4xkNyYMBDZtzZ3B++fJlY21XFDOcARJlabOyiS3uCpLI9jrZjCDkaVvcCCjwognKShWdzXZWlZMvVTgD8LpqlCLrqgbcB+qYwrgKYpT0ccCqbKyCValkEabn/FynogCrPKfqf51xJ7sGB2ZXcZmxoSOztjx300DZi7a0/2AIR0UlBag9SuDw6KcAzlaB7vHZvWpjK90dyrq6bKyDUZQbR0B05biLQkHIcSUmgIK+SwuqgHCnoio2RQU1yj+BnBy9pphVKLGyC7ZzFK1pxWK+E8IhVCWLN/uLtnUU4ayoYLoaANz8FdtaSvY4pV0BEW2ls61czqllBKpTyKgMAhrZ1cdc1RROtPmvWNkdcKZ7ZKxaWjiPLJMpp7OZKxA+rqG/oJLjxf0pnJlqLoDZo3gyU0mKGys2taKecj/d1C+rJSplBqlTyAqgR+D8KjKlmRL2gtUcAdCtsL+ijCNT1oqqqkH2OHEbG5sDFnUg5Aa+yLou2VU1ptj1S2ZQqv1ORZN9IWzRfgaRBxKoBE8UWyqlJFtrIc0AxNjSjed99CTY/XDfSzCz5M0IZoVEsWnPFNTsl8ooVC1TzbGgqFZNDSgVwKK+1sGDMKqxZCWGVMDysiEr1jVSQJUYwj5iHOlThdHt44SQg9CN+nl8D90NMIgAdgr46JqRiR9I8vRdFvbr17m/yxUMKjNLMiVUADwu2CWGhhi+F55TWM9M9cogzms1dnM4uOF/LAEYWdcqnM7yFmyq3IfwmOROd7Y1iFWtOjoY8To41mTV5IysgFFuRzsbWFGbNIIJCDv1dOo4lZG7jWBwRFtVTKuWyeCByJKOan8oZ3ep9XddNl0tDuaywLz9cXPYeDAA0SpkBO9sbVcTOVWldPv4uyzEkzxHtjvonHoSkFEWNoo1d8DhcQputd2ppNon4BzoAiJ1hBFQg0dVtdbGHHDQWushmNEQukLM2QO1G2Y8bgTXqFhcBJj7EjPgcPts8US8qPpPB/dXznOh5Z438tzH5ec6QgrOKrRRfKmysBmUDB+PhYabMlVPER+GCSITTzr7am2tArH3bgcEzPJm+cr5jJ4NnHNFDVrFXcI5Le9k5Jnw+bedbV+FfRzZIHaOOaOsLY0/7UGs58DjrGwKMIMFIGzOEW1/jGsdAtCN6hEAI4hBe9YXeRROBSVPAVPAqvIM5bx5hVKWAMP6zBRy3iescridVdFBinBxXDnG2GRY2XbCvp1lhvGtO9Bxu5h908XQu42lnSArMFdizMim8uwRCxPGnnOS8lwpnbOiDqTAjsrRN/PcoAScCbaACqVM40ylnjjTBs+bwWlAG23/UKbdkiwKWIQPGzWaczpoSlxPEj822cNWkpS7FyzsDrqpfgpG3jahw2vgbaSQAxuLWZYt7JzyNe8JoZpNAcvDFOdw0wqYT9AK1rZz/DdbSlLPp0ryIxgQJlK9AZlEq7IOXpohg9PIhrCng88JsOxiV4ZWAYfg4sikx/8ky2Z9l862uqwrfscIH8+ugTmVGyiddeVYUgEMn4GZzg14EwIsh9sx2cKKiWXReuOE5gzGOQgdlRKVVdlevqb279Xq0Qnsts2VDaBO0coezsruWtHApu6sKG4IBhN0aGU2kLrMKGRTN3HmbCDwKV14zvkMEDG4QfZVspVlaNU2mhc5TEZ3N1h/zqTheuLpW05ZWTGVjb3dbnNmxKZBnN8JqidaVLKAOyARNLS+MB54Z2+VaqoMLKroVBlngefnTPAcoHNWCSvlfA8CI0HEmBNBnBlXyMrzU7A7WVm94PPqQ2gmqKx+WDGsnvilmcSOBJqOK1nYyAIzuAyesq3UdSK3KfWcYKD95HmfYOU3qser2CtYEUA+FpfqdNvgPBZUBhDrGONRVlQsh8rLcaUCykHG0OOUwTlLBrsh5soEMGezi1E4HRVt1icp5wZEFXdibCkG8Y8vX75sbO4E0iom9z+hjSiOfy3DhpXItpVhE+UGQdvoWjtChmrGHf4YAzKgBNnGtuJxFCeGdhUAfQLLK8kBYAP6gvFJZajMG3Xkycy8KuC0q4Eyymwtwdxdv2M0mIBtK0LKnf640j00Auq4gUkdWGlhs22qJc6dZCsL19oxnlTJG4SYVRIGpD8TPFBuM6OElbS1pldid4mGAyN6ZIupbC5bXJN9fdpbThSxLUaI8IG1XIYBxW3Tjs6KQosKcxfxcQmdnwRGM10GnFcCy2XYunLMyAkdgk4mePiczsLygthcBut6goOqS7YVFXADLjaosB6s6ofcZWAZSIRYqSUkizYwttYab3vUOQ9w2HRxIIg8WwRVeE68xi4UtL3zRphxplzwuZrcqYCq1I3jPI5dnJIygEohMbPqVJSzrwzxBJTs5zN+ReUSgxikPQVF3JVBeNQxbHENrEMNvEdFZVV9lH9+ORGEsNZQpyTNc4C3AG7XF4ngzq+DrO2zbuaaOXgdaFcdkEotoSFBVX2qJ0C8OWZeG4KGlpghA0XfTOPCqV2qqwQ26QWfF2PMLhI2w1lVAa2aPsYd0za25MQRwgcZN6uQDCi+ZxiD4XEM2kZxOT41FnZnaRlcpZouzlRqqdbQVWopQoSB58RV50lBNrHi/AwXS5LrwDVlpY3Fc3ByiYGc52Trist6kOXdwInAQtJpp5QchyaquYOV7Su+fxVMaV3dc0RE2S6mUY0gLt2pMcYqrKIQ9w2l1gpQUMtQYcmmbt5DTNxdhnUCjQqtbK9SUSzvrC0mmhhE1e2FS2+oxypy/ZASutkmtjx3vcBC24PX65nbqkBCRhfjS9kIYPnee8cMagVOhI/3T1fAmdtAWZsCswTJCkQVNa0qWKSKPOpHAUhD9DrbVcyoYkwqhvh17vYAayXLQyKGYdxlUDFp494rBXRjYgO17DDYetNIUj/ezp6S0lnlpEwsWmJMkOwsKXeZKEAjIHn0EQJISaRBcO6UMINz7p/bEjjnw4ft+xmDvksxX4G2rIris7qaeKwAFMP2Oi7n4criuZwtpSUwpfLxSnORSrIqusc5ZFaXysqRWjiZ2DyAWEIL35tVSoQElFACjOeGGSE7AHEQgdo/LSvCOgGBvkxsmDbvlS3Fp5vhaB2TAGqRKrKKMrhLVpaGzEVjZ0OQxDhaCTA+QyRR1d15aQzrJntL3RibsipjG6jlgL4yqbS0sNYg1e84vhbBVrElK64CUcWYXDfKxhpIuxiVJZUxsbMy/uRBKTNRQ4kQ3LdRYLS0rJjRPlTPqY6gdJsEDc+aQXAn+HgsNUCbRuF0Oj0zwnA7bWDkbhO5Ens00qeQhS1laBMl5M/cAaxsLF8rKyql+Tf7ELLEGu/ixiimdCvo0TjfpjKwaggen4eh5v7LokLKbLuyvHhcZG8dhGrEDx7Hg93ZppJF7qBqO3iVveXEDQNInzeoe8Yq6ePaZBZ2JviM3W2UAGotekRCAGq4EkF1X3DOnR11yRsBL1tRa0PVcZiNFXZ2c34FskvomInQQ6lzpJoZbJxk43NwKJFBquJSsrByHydxKOnTxQASBmS3j+JMnsHSla3Ec6K9VWoJVn9zfjwOM7hqYAAqJQwE2a3nA48J2QGegRkpZNivSY+ys3EkKd4oJIwsvIHl3cWgLt5k4NH6OmtLWdpurOkwEMupYc7eMtDRhOcI2ui5JhVIzXzLyto/GAPuZoyo8wkoduVgJglCt7OhGbgID4Mq4si+63zUS1FuFFXFlqyaj2emHlLMcBqYu0FMuR28BbB7lOxRMSiCQXFhCKuwkhZ+pYDiGSgbsKKV8MiSRsuHSIWM9rklRiIlZZuqXjsQK8ooYJMgq3JKWVkhHbhsVxFUzthOWPkYijcbx54IKsSdT+uLr3crGKyoYgFiGR9iBk4kfloUX+JIlQRQqabmpgnhqtpQpb6RVQ1WH5DnrS4hEoGZqaerQ2dhFbz8XePxShmDbo70eISjoorO2vK8SJXI4SUmEU4zWKDzUDtWTYw7xXlbSTEj4FRg7zKnKoGRALv0Gs9Tgc1BpCywGZRQAtqVz2xrBcAMzEpfZwFSa2G5W0QBFjSMapWAEFa3HcGN7CxDzECyIkJ97qwrqWNTWVo876PPsjPkj2wvgroM5lLZKMETKVql/CvnWVFiFa/SzJUQwkoZsr67Y6vlSRV3/2tmNTOY3vnaxYwMuoPKqdzR1w7IqHymlPxaAThfU7Ko2ZXYj4AYJHL+kNdKwRQYESTRa5fsUZ/rVC1TMTyWVyYoqNtuzaHsMyv2tvoarxdfqwYgU1axFo/cnql1FGsqK+uAROV8BX4GU8WcZTATi2q7Qcyi0O0V+GhWBMNRUkn8H1SsWVE5By3Gi0ECqUeJoBfAtDa4amkdXG37AGP5Ggeb84p7UazpoKRzdFzeQ8HkoHGxprKy/Hpm5t12p47J6xTYDEz7uINEXSuxYXvFskYAc+ySxH9sf5ftKzU6IbwVBcUGg5e5FMCEXSErZR0wGayV19woM9guPjTqJdVTqR4uE4nJnLldWVkECCZLd2VLF+xtamex7IpiriSDUpvrpn9lrwGMCHyppMH+ps6LILsuFGUj1XEOXiqbqSHPUKnClpWV68kqtURVNDY4TNaocykoYeTU5ngGEQa/S1DnnE4AeXMcKjHPAmFVjCBENaeyLVNHfr3px8xUstJ94hIpfH4HKE/eDaArK6lSyVVFbdt1gxTIVk3pppVlFXi4pEhVBTObquohU85MLXn1iahvUkHJjSCMc01tLFveVVBx0DodM6jftCu7DOtIzYxrc0qp1JGP2ayYFz2Gb6HvMrO8cnGtV6Gjm3uImSfD2GpWK6uowbZGMxFKQCo1pOMtcMXFpRst+hXGoAomF3sSTBGgTglbBKWwsQ3tZqaYSp0Z1CimRDWFcCJUPYJ00BI5FkKYNoifuQxmN88SWVXWLMaUqqqgC0BmQJR6sk3u9NCf6jYLXxAfqsYEgVLAhRY2AtgtflZNFmFyhxdrLkAdWlk4D88M2ixHyepIdhMHrG/iR1ZGtq0MGpbDbRPYOXeSY1M6Ny4ZstvGSktK+XbFPATj2D371saPEsAMXhXrsZ0km/XStkhhMyBfsa6uXFZe2VCe+YMr1+GKgwrQyNYq1VRrB+EizAow6NsdNKcyVEkYeM73ys6q4kAHp6BiFklTkIrVC5oYV7uzwOGCz4UJ0Stq2lWMJy4wtb+RetL6tZFicnJmBw5UjCvXXMZVJX2MQkbf+XN5EWd78Vz8/JEsMZTBiKNzsm1inLRUQ74H4NidaqI68j5sAFgxcRveC7ieLJXfQYxjZZ2CsiWFewZXJmBIlZ1tdtrX4hSuateKso/RZOtOKW2nmq1oTzeK6dRWAWu2NRVb4hq0SXm1GvtugHrbr5IXqmSktg5CuDE2MSlPwsY5kNE2Wp3AqiZbWVLAxiBF+2iBZbuNj6MB6rsMLC7FyasaYDyo7KkoPyEtw3pEMXfPvxAJi2jAQQgjrz0rLIZSWZlIoNhwd5xK4AR9mYNjWAaLrnuImJeBVN9zBORObVvbr+mTTfFSEJLSRnHo7hEJoIi8MFqjxmvgmF5URZz4zLFgZZ8Ctu2X7ggVccKm9gVxIsOHqxXgNMKnFWZYnf1dBnOhayXq17QwFlWW09eNKyVJFmXqaONGA5aCegMbJ3UUkGY1ic3nKWgjq8qfVYGQG1gRt6rs62a6HiqqUOqdesK5NmX4nGofJoiE1d0dF9lVVkvT1/kEEaaCoYOwFpcVcoLM+7669PxC9rWqktH0sWUYld0VCpuBZ/stVRcGgy9WX2+U1Qthi9SzAqSxzZsy+OiFzBYnySGV6Gku44rD8BCOZBV3BvD5+AKRHNwMEsB6EzHnJpkTAeiUlEGkcECeB6GDZTp5YEJTlvdrknxYjTllMkfNtXwDjM7uVjK5JXUUn43rrqpK2jytaxHW0M5G8DC8rtHMYs7KSgduVQMGTYFqFvVS6rkD3sDJ46afdYFwoq11AOKCBLhvwoUgc8IGANycR6knZrdJPdsuxnyjfd3FovTlRMdEdtOl5CMV5EHsXQBis7TOwvIDZaGj2Vnpbh7cpK63VwYEMLwqbjzyl699sawFFkF1yqjUU31HfC6sW1ZFVFuXVXVgz9keEaw0ys1lWfm+azQAQSWA+hKYVfsZjPncAcUB9oIayy/UZXRNckDGji77GsWbvBo6tPrWPqOyVkBUq+INeqpzNdYs/u0ifh5qmpqIW+33JVSUcwY70KL4U9lYdU6ljtSls7lmfi9g3YzeQfVkaGFaV3ODCnaD2N8wsEDFklE3RzM3ZghdYkWHsszq70FIecnKkVkt8ezMzRq9bkGuKojRLBVSod3Y1yPqKgYW7JRQTPVyy5xIYLjOgxgT52RKJUY1dOrIiRd4futQx/A5AcSmEjz0vFWrkLzvbWAu9HOWbGgxFk1VNTpnBKk6TgwisI/HcxYXP1uAWO72ULFlBTq+aSu2VTUs6hrxM2CF+hEor1VIA9ZmFUaab1lSSgZsVs4sxzHlVLoJHr9H4DhONTkI1XC0/wiY2NoWAG5RlnHFnq6oLccpQddMuJ/O17JVA5OHLi0BqCztq7Y1++ucCd98qLI8MIHBV/cKjxQTme3hFBS3MyCqnDsuym2o80HjvFFTtrURmNaGJsmVahImjTsUXKtQZTAVs7Mvv8/+fzUrZAXcLJ6M4koe6XP0b6SmWWNDzyUpQ8bl+LtWx4tuqZ36cRYV3yuVxPNwvIiqiQCSmu7srgTzR6nkyhpCarXwFy1vGd5iP2cY06lFr5Njhhg1Y6+NB28ftbK83s8rf7kLJbKwDFPbLg25a0AdZJEiqr5phixKMDlRUtcssq1hriLqGoH+zeNgVm9OemjsETV8JdF0NHnkIFxWY1OB4Yrp7rtWJ7NgAAAPXklEQVQ3oNs5nplyVf8u2FoLu1JrHveaZWQjqAkshtFa2gzsSG3Zpkbvg3HafF9slPPlldjFlK80Gysm8Mr4MPhneNWENPGjAIpmilTPATdTRTXlCBYHYAQuPwA36xIpWtGN4q3Y2MhiGsUpuSSnlEJRD8PorC7CFYVw+F51qThgabxsTxWzCGY0ZSsb3lfqAy0OPNjNy8xiQQKsHYFQ2HBZVvVbBuq3m1oWKajqaonsM6uZUr6CjXWNZ0l5E3h3jURma6kP3MJIiy1Lm+kahQq41N2iZja5sjtlLYNZHZrH6qUGm4vMbDp6Rw2CFmvuyFkrBcCyMtFqBaECmsHoK9BZ2LA/lJcRqSaDqnaWbrZdGaz3DLgIvBln4woGztbyJGqslwxkhhHrTjTYFXCtOoKS8uLdofVdAbOylGU6nlYpXWZts4nXBq6WxJitMNokHUJnbnJplQm+aGpY2a5GMV2QD1hRubBPFKdumf5OHkLHz0F9luE5kjBjRa0nFE5CUGqHw32MmjZ6xkgINVnSnZ1VZStK2qKlRaLlQgK7uTq7JFXJwM+3SOEKyhZNI+tJ0I5qMYy9k2qJD7dVWdqKXa0CKNR0Ccjg+B2IYu2fcBZJZkMFgM11r0X92wilghFGgzVnexlqB7xL9mS29SiYUVY2nXOZjNBRsyDsQPRWW5hrZ4XcdC4HVWRbjgJr4sFofK5SzjQ7rhI1UebdPdEbj6sqIvTZQZ5va08rABsAW0UxeWytAk7A2KJ9ZpxzCioB24XFtYAeXYxr6anSqhLgppEqWbGwLunTgrV+IjWlL29ljaAl4EQMGsErp4apeZiquwRXLXAqOCeru32mmydc6oWTSWpFAGdzeTB8RTHVMEtlM90CbbQCYhPjq3egYr1FGdYIQjiuDGZ5zZ/AzobKGOyLxti6c4Rwtv2anyWlLICnlLhxJRXt6A5ebDBWFNONbxWZ2d02mnu4S9YECpeppV1zSWRBWxHYzVIv1CXSouwqqX3jBBBDZdYQbpTQW4ZQlS8r5kH4suSRmg2++3JN10x1PaAmEkmtYlEdeGpJEM6kOuCqCR22oSujj5IV2HdT0zj5prLKTjXFAPjdQlyq7xIBxAQP5yMczG4VxAKw0n6ilZ2QBce2pLulkuxxqnoIzFfgqyqjil9S1VNwBrFmeyeops8yOjZUybZdfS8CuaTIJumzs5tODaNtLpFDQ/PcJGweLhmeL1nB0KqiUDScsiUVD89Di3HtrKtSULw3RLiygZD+7sF8JTObgYsrGvDNUFRGl1iy0Ll1YkUc2aJYMog920I8qW6YDCg1Mqk0JHJFKXkbgbRreI+qpYNOZHrVcDUba7pjsphSJNtK6upgRNAVoOS0mugBeN4bIZgHhuPZ/s1ENaX6KsVr+YNrh1Nb7ipR0PE5zbNRegCbrHRUw6Yf07dLBJl1f8KB9as2V1nNqAsl62LBBhehwalerkHmB1JFIEZKSEusdl5JQj1nJlHXSCF342gJ9CYGrXelknJIXqVP8sD+qtplCR3XH2qfKq0ygMp+KnVkKxNlZ8m2YkIlVMiCnXUwl7qznBKSvQz3m3Pt6oQbXO5b5FixCh/fHxUQW/AEcK6zCNqKQnL9sywqmKuwvqSYzT/aPVNNpVyhvRW21aqciCsjdWvBwILUvh5VyCzbWoC1pJjJ680CWsl+udKB6T5RwG1mlohnlpbg47iz5U9ha0FGtmRLFYBtO99y97Ap0z+ZDTAog6kSLZsMHg/IFkkgp6CpvU2U0cYVSdnmkjwBdOmXbxTWNWzuIbipMioVxEckZEoahSOiy2M3K0jcC1LhVDwaqG0ZvkcWqCnrG4GIxykrqlbWdw6LQyBaZR8HmLRIhQWsHswD42ZXVLNkf9l+FlW0HVQ2lwFsC/Z1FdzlQR0KaPfo+Fdfu+/dwVRICu1CGR7AEIiAhc+AZUF0kOBaPxmUqg4i64vQnU4nFDYJ9Nz+1fVXveH9qmr+kPILx8oKcRV/BFbxbE0JMT0kSD4w6L/lNY8ocsqagVdU3A3MjxhxcGuqzsPH4irpaow1q6OyrVjvp9Npc59E91LldboYVzJWdimWfAW2SNEKcDaX2FmBLLA/uKxlmhh613Is1URQApbKfttwxL02q6Onx5pQxSbPojAg+v5hAnN6LHVRDXIsvKtRjiS0qJUyZTAXVbAK82ElFJWaQdVoqUC1Unt7BVaTQudM6SuqexjQJN4+0icaxv/utbKv83ETbT8H8gjcOKxOJmbUa6OOVXht3dFY6rHv9XoNzFLceEA1o8+pKm0LAHPHZ2rYKjFq0hfZFixsqHJgD3eD5n+U0kb1mFjXkn2lvMSSOsNE/CdIAKF0Sytq6urOHUN5gwg4GZosgbmggM5ucra2qrS2Ig1cbiBBcxYzgzUDNLCvL8GbZXNp6ORy3LmS+Kk83zRIAK6A1ioKa2I9NapIuiUFdfC9766PFZUtqUr6KbWk+zZU1a/ZrIXEztrjTOfz7hwKziCeXIaraHtbZIMz+2pGgazCmw4qWAFvEdhodYp0Xq0pV7G1YWYWbO4qhGq42+Z8BYtrLWvluNPpZAeaFFS1vubPgbgxsqcpnAaszBovKaFoDQ8BGtjfUOl4NAG2nmQV04feJgumvX2fsrQEWZghL0JnVdYkn3DOZIeRN86RqPWCmsvGVqEMRnwxQAxwS8EMYo3IzmY2+BCcLp4MKiuyuhImamlbZFcNoNl7tp+RHd18ZjQIRKyXdFRhN98/hyKqwXWNo7O1wiaXoHN108REZZWEq6grnIfjzeg8jdRf1XEL4kkXa5bBjKxoKaljBjeHlVxQ4GaycpW4lDOAKtnTxHAtOfzOtZwHAM7sqVXkV6yu6kap1nHkXKqWF/4XHqjenNKqBjpR3l1ch3Ejg1+EsgdQhsdG0B4FM9sWAVWpuAyiwTPleZxt9VyZVS2qXfReWqTAilpr9ApoWTjxymit7NwV4JTriZyOA9B0k7HFfULourmKYHVnRQvqGL5HMHdqFcR2qWpmcK6eTwx2dipWrviDilr+fKWq3OWRWdHKwA4eu8wjchbeRzFilqjjZN3ufCpfkJ0/scVpnYk6L0PI77lxdWCZ87WiWm7B/AGquQSnujGKsB8CJmiJq8q1pKIVWyqOiTK66r18BN8r74/AE71fdC3yPS2MxdOpnE1tlVxD9JmVOoggN+r4PjAXVFPa3Eg5jVJGFVUGNolH20GVrUB7BOySWq6WqYQdWR92pcFMYMwckbSgCKCqD67DiiWu1g8MQC9ByfcFqW1L+jL714qNCuznoSxt0da2gtWN1G8F0BK0NN0nuimelUF9dIdAfjO44UT3CjQLoUeLHJFTO3gmpRuIIOvwBQCbqNeo3qtZ9iF6xVK13GRlo4zqimq+CGdTiR1uRY8oqgE02hZBa79kZXPMquxRHKla2saZWN4mRqZUj0vLCKhkjKnqOQHNuSZVJoKvAqS1wpEquvWDC1B2ypwrCPsRMEPVTODMLJMDv6qeKXwi2JYV5Sq4qKyvgGsHCLiuj2jR59V8gMqSJ2FJZRXEHVRHj3sFPrct6OpqlW1GpatQdt0GvwfM6n63InsGVFhJGaBqgqqIV6IsXllZgySPq4R3bnt3wi5cv+cN2yqQLW1T95KYVsWWtKk4cB9W53WQQflQYR6Wl4HaJZjvVE0D5yvq+RKgZCs5qdBEP5sD94cAvQLlSgNaSMAtHx88BuNQ41zdFsX30zKbcs0MLD/ihkpQzl0wiTqKLTfbKmCmyYICnK0IbaieC4CG9iSyLQ7cIMGQwau6TKoq60Apl3WN40LZpca1CKKK9VQyyIEn8w0F8F6CL2h8o3ixGwC7s7EWzCOqmcApYxYD4jsAzVS0sl2t98pA7vrKophCVSonbYpgH6mvSn24pTBV4sdtV3BtMq5k82y+IADvUJ0uAlkCVTxIaPm+UNu/qkV4F1TzHXCGrXIAqItBKypqK99VtAOVs64O4ObX7pHLVCpYHcRmwvLR7TvYAKBBN58LGVzDuFz+hQbWgncQyCZAk+VbsPSouf93261iZgmfCpwRbAvqmSqriU2PwhjaoOyYqtIegVXViTsmyta6bGySpY3gyRrpIyAeaWDDxtpsXwKyalMDKNP7YBXMqEskUsi2uC8FNAPxAKTVfT1o6VzM0E0jF+1rWcUuHvdyg7vgoFplX8HpvHpMCOMRUPHzZkInsqlFKNX/EIO52E0SxSzOwob2VmRLW5D1XIU0rbgM1AzWgyC7fe8G7xUAK/taEBat7luqtyP7EmsaJQOj5F+mrnZfCuYCfBUAWwShyd6pMY/vAHG1UqOYpbI/gy5T0CMKm+UO3gFuC85dgfDVeguPDfITrIBLsLrcgdh3CFgFZjaKJ4Iv3F8ANEqvuxR1tVKOgLoCa1jxboBAkj6v7j/icFbA7f4rfRnQDLRViG13i0vqBQrYVqBbADZT0ZpiHoSzvQpopKIFS3sE1HfBWlHXd0H7LnArqvougMtljHBgZnh3Eoz/BKjLML4Z2Aq0+hEJr9jaVUBbvNzCIUiroC7AWmmFw4o5AK3MtB5VypZMSFgs05JyGVwlwBqsEGAAa2ZU1CjUexXGsE4rKriilBvFzOKKo3AuAroE6QFQU3u8YpNXwS5k+1TZt5UrwouN4KiUEw+k3ZWDp1RXHNRqXb21Ts39945yZSg3VnZFNQ9CF3XeZyr5DgBXKiwCMa2MxeTDYXgP1Fsf9QNKZc0k81RJk3r6EQ3rCmBVyLL75EjZ1pIVDHoFtiOAHoB0BdTVylqBsKKKS+AeBXJVLY+CXASuGvO/Auq7GuEjDfGKg1oKa1z/dmmi9I9SUGNhl0AtfulHAawoYrnSkmNXAVuGEhrEVXvUF+A5Ct2PqNOjDetyna4CmeUolmeXLN4Aq7C5Sj10Q7yjgl+t6CNxSRHmI5X+CpwreYB3Qfdqna4q21KdBuc4GoZsn49ZOOiVinwHqK9WzjvgeweEh2AU5+vtxZ9Cd9Wqkh49V18E5oj6vVyn0RStAyGIO5edXRKd5B0VGVXq2yr3xYp+5Ut+C4QJ4P1N339pQMjRejj4vb/Dcr6rQc3O/0rjmtZpeYCBiCHfCemRbNhbK/pNUPc3wfKy5f2D7OlL3/uPhve/oU4T0F8f+VNM2vyoiv0jK+KHQfdHq+0bncz4oz73/+Y6LbKw1o/5B7eOf1Rl/0du9B9tn/9bvrf/j+v0h6ttn2tp/r/4819y4/zv5391uvzzfwDifz6phT1MPgAAAABJRU5ErkJggg==)}.color-picker .cp-add-color-button-class{position:absolute;display:inline;padding:0;margin:3px -3px;border:0;cursor:pointer;background:transparent}.color-picker .cp-add-color-button-class:hover{text-decoration:underline}.color-picker .cp-add-color-button-class:disabled{cursor:not-allowed;color:#999}.color-picker .cp-add-color-button-class:disabled:hover{text-decoration:none}.color-picker .cp-remove-color-button-class{position:absolute;top:-5px;right:-5px;display:block;width:10px;height:10px;border-radius:50%;cursor:pointer;text-align:center;background:#fff;box-shadow:1px 1px 5px #333}.color-picker .cp-remove-color-button-class:before{content:"x";position:relative;bottom:3.5px;display:inline-block;font-size:10px}.color-picker .eyedropper-icon{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);fill:#fff;mix-blend-mode:exclusion}\n'],encapsulation:2}),g})(),$m=(()=>{class g{constructor(s,d,_,w,me,Re){this.injector=s,this.cfr=d,this.appRef=_,this.vcRef=w,this.elRef=me,this._service=Re,this.dialogCreated=!1,this.ignoreChanges=!1,this.viewAttachedToAppRef=!1,this.cpWidth="230px",this.cpHeight="auto",this.cpToggle=!1,this.cpDisabled=!1,this.cpIgnoredElements=[],this.cpFallbackColor="",this.cpColorMode="color",this.cpCmykEnabled=!1,this.cpOutputFormat="auto",this.cpAlphaChannel="enabled",this.cpDisableInput=!1,this.cpDialogDisplay="popup",this.cpSaveClickOutside=!0,this.cpCloseClickOutside=!0,this.cpUseRootViewContainer=!1,this.cpPosition="auto",this.cpPositionOffset="0%",this.cpPositionRelativeToArrow=!1,this.cpOKButton=!1,this.cpOKButtonText="OK",this.cpOKButtonClass="cp-ok-button-class",this.cpCancelButton=!1,this.cpCancelButtonText="Cancel",this.cpCancelButtonClass="cp-cancel-button-class",this.cpEyeDropper=!1,this.cpPresetLabel="Preset colors",this.cpPresetColorsClass="cp-preset-colors-class",this.cpMaxPresetColorsLength=6,this.cpPresetEmptyMessage="No colors added",this.cpPresetEmptyMessageClass="preset-empty-message",this.cpAddColorButton=!1,this.cpAddColorButtonText="Add color",this.cpAddColorButtonClass="cp-add-color-button-class",this.cpRemoveColorButtonClass="cp-remove-color-button-class",this.cpInputChange=new e.vpe(!0),this.cpToggleChange=new e.vpe(!0),this.cpSliderChange=new e.vpe(!0),this.cpSliderDragEnd=new e.vpe(!0),this.cpSliderDragStart=new e.vpe(!0),this.colorPickerOpen=new e.vpe(!0),this.colorPickerClose=new e.vpe(!0),this.colorPickerCancel=new e.vpe(!0),this.colorPickerSelect=new e.vpe(!0),this.colorPickerChange=new e.vpe(!1),this.cpCmykColorChange=new e.vpe(!0),this.cpPresetColorsChange=new e.vpe(!0)}handleClick(){this.inputFocus()}handleFocus(){this.inputFocus()}handleInput(s){this.inputChange(s)}ngOnDestroy(){null!=this.cmpRef&&(this.viewAttachedToAppRef&&this.appRef.detachView(this.cmpRef.hostView),this.cmpRef.destroy(),this.cmpRef=null,this.dialog=null)}ngOnChanges(s){s.cpToggle&&!this.cpDisabled&&(s.cpToggle.currentValue?this.openDialog():s.cpToggle.currentValue||this.closeDialog()),s.colorPicker&&(this.dialog&&!this.ignoreChanges&&("inline"===this.cpDialogDisplay&&this.dialog.setInitialColor(s.colorPicker.currentValue),this.dialog.setColorFromString(s.colorPicker.currentValue,!1),this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay&&this.cmpRef.changeDetectorRef.detectChanges()),this.ignoreChanges=!1),(s.cpPresetLabel||s.cpPresetColors)&&this.dialog&&this.dialog.setPresetConfig(this.cpPresetLabel,this.cpPresetColors)}openDialog(){if(this.dialogCreated)this.dialog&&this.dialog.openDialog(this.colorPicker);else{let s=this.vcRef;if(this.dialogCreated=!0,this.viewAttachedToAppRef=!1,this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay){const w=this.injector.get(this.appRef.componentTypes[0],e.zs3.NULL);w!==e.zs3.NULL?s=w.vcRef||w.viewContainerRef||this.vcRef:this.viewAttachedToAppRef=!0}const d=this.cfr.resolveComponentFactory(ex);if(this.viewAttachedToAppRef)this.cmpRef=d.create(this.injector),this.appRef.attachView(this.cmpRef.hostView),document.body.appendChild(this.cmpRef.hostView.rootNodes[0]);else{const _=e.zs3.create({providers:[],parent:s.injector});this.cmpRef=s.createComponent(d,0,_,[])}this.cmpRef.instance.setupDialog(this,this.elRef,this.colorPicker,this.cpWidth,this.cpHeight,this.cpDialogDisplay,this.cpFallbackColor,this.cpColorMode,this.cpCmykEnabled,this.cpAlphaChannel,this.cpOutputFormat,this.cpDisableInput,this.cpIgnoredElements,this.cpSaveClickOutside,this.cpCloseClickOutside,this.cpUseRootViewContainer,this.cpPosition,this.cpPositionOffset,this.cpPositionRelativeToArrow,this.cpPresetLabel,this.cpPresetColors,this.cpPresetColorsClass,this.cpMaxPresetColorsLength,this.cpPresetEmptyMessage,this.cpPresetEmptyMessageClass,this.cpOKButton,this.cpOKButtonClass,this.cpOKButtonText,this.cpCancelButton,this.cpCancelButtonClass,this.cpCancelButtonText,this.cpAddColorButton,this.cpAddColorButtonClass,this.cpAddColorButtonText,this.cpRemoveColorButtonClass,this.cpEyeDropper,this.elRef,this.cpExtraTemplate),this.dialog=this.cmpRef.instance,this.vcRef!==s&&this.cmpRef.changeDetectorRef.detectChanges()}}closeDialog(){this.dialog&&"popup"===this.cpDialogDisplay&&this.dialog.closeDialog()}cmykChanged(s){this.cpCmykColorChange.emit(s)}stateChanged(s){this.cpToggleChange.emit(s),s?this.colorPickerOpen.emit(this.colorPicker):this.colorPickerClose.emit(this.colorPicker)}colorChanged(s,d=!0){this.ignoreChanges=d,this.colorPickerChange.emit(s)}colorSelected(s){this.colorPickerSelect.emit(s)}colorCanceled(){this.colorPickerCancel.emit()}inputFocus(){const s=this.elRef.nativeElement,d=this.cpIgnoredElements.filter(_=>_===s);!this.cpDisabled&&!d.length&&("undefined"!=typeof document&&s===document.activeElement?this.openDialog():this.dialog&&this.dialog.show?this.closeDialog():this.openDialog())}inputChange(s){this.dialog?this.dialog.setColorFromString(s.target.value,!0):(this.colorPicker=s.target.value,this.colorPickerChange.emit(this.colorPicker))}inputChanged(s){this.cpInputChange.emit(s)}sliderChanged(s){this.cpSliderChange.emit(s)}sliderDragEnd(s){this.cpSliderDragEnd.emit(s)}sliderDragStart(s){this.cpSliderDragStart.emit(s)}presetColorsChanged(s){this.cpPresetColorsChange.emit(s)}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(e.zs3),e.Y36(e._Vd),e.Y36(e.z2F),e.Y36(e.s_b),e.Y36(e.SBq),e.Y36(ku))},g.\u0275dir=e.lG2({type:g,selectors:[["","colorPicker",""]],hostBindings:function(s,d){1&s&&e.NdJ("click",function(){return d.handleClick()})("focus",function(){return d.handleFocus()})("input",function(w){return d.handleInput(w)})},inputs:{colorPicker:"colorPicker",cpWidth:"cpWidth",cpHeight:"cpHeight",cpToggle:"cpToggle",cpDisabled:"cpDisabled",cpIgnoredElements:"cpIgnoredElements",cpFallbackColor:"cpFallbackColor",cpColorMode:"cpColorMode",cpCmykEnabled:"cpCmykEnabled",cpOutputFormat:"cpOutputFormat",cpAlphaChannel:"cpAlphaChannel",cpDisableInput:"cpDisableInput",cpDialogDisplay:"cpDialogDisplay",cpSaveClickOutside:"cpSaveClickOutside",cpCloseClickOutside:"cpCloseClickOutside",cpUseRootViewContainer:"cpUseRootViewContainer",cpPosition:"cpPosition",cpPositionOffset:"cpPositionOffset",cpPositionRelativeToArrow:"cpPositionRelativeToArrow",cpOKButton:"cpOKButton",cpOKButtonText:"cpOKButtonText",cpOKButtonClass:"cpOKButtonClass",cpCancelButton:"cpCancelButton",cpCancelButtonText:"cpCancelButtonText",cpCancelButtonClass:"cpCancelButtonClass",cpEyeDropper:"cpEyeDropper",cpPresetLabel:"cpPresetLabel",cpPresetColors:"cpPresetColors",cpPresetColorsClass:"cpPresetColorsClass",cpMaxPresetColorsLength:"cpMaxPresetColorsLength",cpPresetEmptyMessage:"cpPresetEmptyMessage",cpPresetEmptyMessageClass:"cpPresetEmptyMessageClass",cpAddColorButton:"cpAddColorButton",cpAddColorButtonText:"cpAddColorButtonText",cpAddColorButtonClass:"cpAddColorButtonClass",cpRemoveColorButtonClass:"cpRemoveColorButtonClass",cpExtraTemplate:"cpExtraTemplate"},outputs:{cpInputChange:"cpInputChange",cpToggleChange:"cpToggleChange",cpSliderChange:"cpSliderChange",cpSliderDragEnd:"cpSliderDragEnd",cpSliderDragStart:"cpSliderDragStart",colorPickerOpen:"colorPickerOpen",colorPickerClose:"colorPickerClose",colorPickerCancel:"colorPickerCancel",colorPickerSelect:"colorPickerSelect",colorPickerChange:"colorPickerChange",cpCmykColorChange:"cpCmykColorChange",cpPresetColorsChange:"cpPresetColorsChange"},exportAs:["ngxColorPicker"],features:[e.TTD]}),g})(),jm=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({providers:[ku],imports:[[k.ez]]}),g})();function Xm(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"img",43),e.NdJ("click",function(){const w=e.CHM(s).$implicit;return e.oxw(2).drawBegin(w)}),e.qZA()}if(2&g){const s=x.$implicit;e.Q6J("title",s.name)("src",s.icon,e.LSH)}}function e_(g,x){if(1&g&&(e.TgZ(0,"nz-collapse-panel",41),e.YNc(1,Xm,1,2,"img",42),e.qZA()),2&g){const s=x.$implicit;e.Q6J("nzHeader",s.name),e.xp6(1),e.Q6J("ngForOf",s.components)}}function t_(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"nz-switch",33),e.NdJ("ngModelChange",function(_){e.CHM(s);const w=e.oxw().$implicit;return e.oxw().properties[w.name]=_})("ngModelChange",function(){e.CHM(s);const _=e.oxw().$implicit;return e.oxw().onPropertyChange(_.name)}),e.qZA()}if(2&g){const s=e.oxw().$implicit,d=e.oxw();e.Q6J("ngModel",d.properties[s.name])}}function xp(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"input",50),e.NdJ("ngModelChange",function(_){e.CHM(s);const w=e.oxw().$implicit;return e.oxw().properties[w.name]=_})("change",function(){e.CHM(s);const _=e.oxw().$implicit;return e.oxw().onPropertyChange(_.name)}),e.qZA()}if(2&g){const s=e.oxw().$implicit,d=e.oxw();e.Q6J("ngModel",d.properties[s.name])}}function Tp(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"input",51),e.NdJ("ngModelChange",function(_){e.CHM(s);const w=e.oxw().$implicit;return e.oxw().properties[w.name]=_})("change",function(){e.CHM(s);const _=e.oxw().$implicit;return e.oxw().onPropertyChange(_.name)}),e.qZA()}if(2&g){const s=e.oxw().$implicit,d=e.oxw();e.Q6J("ngModel",d.properties[s.name])}}function Ql(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"textarea",51),e.NdJ("ngModelChange",function(_){e.CHM(s);const w=e.oxw().$implicit;return e.oxw().properties[w.name]=_})("change",function(){e.CHM(s);const _=e.oxw().$implicit;return e.oxw().onPropertyChange(_.name)}),e.qZA()}if(2&g){const s=e.oxw().$implicit,d=e.oxw();e.Q6J("ngModel",d.properties[s.name])}}function tx(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"a",53),e.NdJ("click",function(){e.CHM(s);const _=e.oxw(2).$implicit,w=e.oxw();return w.properties[_.name]="none",w.onPropertyChange(_.name)}),e._uU(1,"\u65e0"),e.qZA()}}function nx(g,x){if(1&g){const s=e.EpF();e.ynx(0),e.TgZ(1,"input",52),e.NdJ("colorPickerChange",function(_){e.CHM(s);const w=e.oxw().$implicit;return e.oxw().properties[w.name]=_})("colorPickerChange",function(){e.CHM(s);const _=e.oxw().$implicit;return e.oxw().onPropertyChange(_.name)}),e.qZA(),e.YNc(2,tx,2,0,"a",32),e.BQk()}if(2&g){const s=e.oxw().$implicit,d=e.oxw();e.xp6(1),e.Udp("background",d.properties[s.name]),e.Q6J("value",d.properties[s.name])("colorPicker",d.properties[s.name]),e.xp6(1),e.Q6J("ngIf","none"!=d.properties[s.name])}}function ga(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"nz-select",33),e.NdJ("ngModelChange",function(_){e.CHM(s);const w=e.oxw().$implicit;return e.oxw().properties[w.name]=_})("ngModelChange",function(){e.CHM(s);const _=e.oxw().$implicit;return e.oxw().onPropertyChange(_.name)}),e._UZ(1,"nz-option",54)(2,"nz-option",55)(3,"nz-option",56),e.qZA()}if(2&g){const s=e.oxw().$implicit,d=e.oxw();e.Q6J("ngModel",d.properties[s.name])}}function bp(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"nz-select",33),e.NdJ("ngModelChange",function(_){e.CHM(s);const w=e.oxw().$implicit;return e.oxw().properties[w.name]=_})("ngModelChange",function(){e.CHM(s);const _=e.oxw().$implicit;return e.oxw().onPropertyChange(_.name)}),e._UZ(1,"nz-option",57)(2,"nz-option",58)(3,"nz-option",59)(4,"nz-option",60)(5,"nz-option",61)(6,"nz-option",62)(7,"nz-option",63)(8,"nz-option",64),e.qZA()}if(2&g){const s=e.oxw().$implicit,d=e.oxw();e.Q6J("ngModel",d.properties[s.name])}}function n_(g,x){if(1&g&&e._UZ(0,"nz-option",66),2&g){const s=x.$implicit;e.Q6J("nzLabel",s.label)("nzValue",s.value)}}function Sp(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"nz-select",33),e.NdJ("ngModelChange",function(_){e.CHM(s);const w=e.oxw().$implicit;return e.oxw().properties[w.name]=_})("ngModelChange",function(){e.CHM(s);const _=e.oxw().$implicit;return e.oxw().onPropertyChange(_.name)}),e.YNc(1,n_,1,2,"nz-option",65),e.qZA()}if(2&g){const s=e.oxw().$implicit,d=e.oxw();e.Q6J("ngModel",d.properties[s.name]),e.xp6(1),e.Q6J("ngForOf",null==s?null:s.options)}}function zp(g,x){if(1&g){const s=e.EpF();e.ynx(0),e.TgZ(1,"input",51),e.NdJ("ngModelChange",function(_){e.CHM(s);const w=e.oxw().$implicit;return e.oxw().properties[w.name]=_})("change",function(){e.CHM(s);const _=e.oxw().$implicit;return e.oxw().onPropertyChange(_.name)}),e.qZA(),e.TgZ(2,"a",53),e.NdJ("click",function(){e.CHM(s);const _=e.oxw().$implicit;return e.oxw().browserAttachment(_.name)}),e._uU(3,"\u9644\u4ef6"),e.qZA(),e.BQk()}if(2&g){const s=e.oxw().$implicit,d=e.oxw();e.xp6(1),e.Q6J("ngModel",d.properties[s.name])}}function rx(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"input",51),e.NdJ("ngModelChange",function(_){e.CHM(s);const w=e.oxw().$implicit;return e.oxw().properties[w.name]=_})("change",function(){e.CHM(s);const _=e.oxw().$implicit;return e.oxw().onPropertyChange(_.name)}),e.qZA()}if(2&g){const s=e.oxw().$implicit,d=e.oxw();e.Q6J("ngModel",d.properties[s.name])}}function r_(g,x){if(1&g&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",44),e.YNc(4,t_,1,1,"nz-switch",45),e.YNc(5,xp,1,1,"input",46),e.YNc(6,Tp,1,1,"input",47),e.YNc(7,Ql,1,1,"textarea",47),e.YNc(8,nx,3,5,"ng-container",48),e.YNc(9,ga,4,1,"nz-select",45),e.YNc(10,bp,9,1,"nz-select",45),e.YNc(11,Sp,2,2,"nz-select",45),e.YNc(12,zp,4,1,"ng-container",48),e.YNc(13,rx,1,1,"input",49),e.qZA()()),2&g){const s=x.$implicit;e.xp6(2),e.Oqu(s.label),e.xp6(1),e.Q6J("ngSwitch",s.type),e.xp6(1),e.Q6J("ngSwitchCase","boolean"),e.xp6(1),e.Q6J("ngSwitchCase","number"),e.xp6(1),e.Q6J("ngSwitchCase","text"),e.xp6(1),e.Q6J("ngSwitchCase","textarea"),e.xp6(1),e.Q6J("ngSwitchCase","color"),e.xp6(1),e.Q6J("ngSwitchCase","font"),e.xp6(1),e.Q6J("ngSwitchCase","fontsize"),e.xp6(1),e.Q6J("ngSwitchCase","select"),e.xp6(1),e.Q6J("ngSwitchCase","attachment")}}const ix=function(){return[",","\uff0c",";"," "]},ax=function(){return[","]};function ql(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"div",70)(1,"i",71),e.NdJ("click",function(){const w=e.CHM(s).index,me=e.oxw().$implicit,Re=e.oxw();return null==Re.current?null:Re.current.handlers[me.name].splice(w,1)}),e.qZA(),e.TgZ(2,"table")(3,"tr")(4,"td"),e._uU(5,"\u76ee\u6807"),e.qZA(),e.TgZ(6,"td")(7,"nz-select",72),e.NdJ("ngModelChange",function(_){return e.CHM(s).$implicit.targets=_}),e.qZA()()(),e.TgZ(8,"tr")(9,"td"),e._uU(10,"\u547d\u4ee4"),e.qZA(),e.TgZ(11,"td")(12,"input",73),e.NdJ("ngModelChange",function(_){return e.CHM(s).$implicit.command=_}),e.qZA()()(),e.TgZ(13,"tr")(14,"td"),e._uU(15,"\u53c2\u6570"),e.qZA(),e.TgZ(16,"td")(17,"nz-select",72),e.NdJ("ngModelChange",function(_){return e.CHM(s).$implicit.arguments=_}),e.qZA()()()()()}if(2&g){const s=x.$implicit;e.xp6(7),e.Q6J("nzTokenSeparators",e.DdM(5,ix))("ngModel",s.targets),e.xp6(5),e.Q6J("ngModel",s.command),e.xp6(5),e.Q6J("nzTokenSeparators",e.DdM(6,ax))("ngModel",s.arguments)}}function cd(g,x){if(1&g){const s=e.EpF();e.ynx(0),e.TgZ(1,"div",67)(2,"div"),e._uU(3),e.TgZ(4,"i",68),e.NdJ("click",function(){const w=e.CHM(s).$implicit;return e.oxw().bindEvent(w)}),e.qZA()(),e.YNc(5,ql,18,7,"div",69),e.qZA(),e.BQk()}if(2&g){const s=x.$implicit,d=e.oxw();e.xp6(3),e.hij(" ",s.label," "),e.xp6(2),e.Q6J("ngForOf",null==d.current?null:d.current.handlers[s.name])}}function hd(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"input",73),e.NdJ("ngModelChange",function(_){const me=e.CHM(s).$implicit,Re=e.oxw();return(null==Re.current?null:Re.current.bindings)[me.name]=_}),e.qZA()()()}if(2&g){const s=x.$implicit,d=e.oxw();e.xp6(2),e.Oqu(s.label),e.xp6(2),e.Q6J("ngModel",null==d.current?null:d.current.bindings[s.name])}}function i_(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"a",53),e.NdJ("click",function(){return e.CHM(s),e.oxw().fill="none"}),e._uU(1,"\u65e0"),e.qZA()}}function Kl(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"a",53),e.NdJ("click",function(){return e.CHM(s),e.oxw(2).color="none"}),e._uU(1,"\u65e0"),e.qZA()}}function wp(g,x){if(1&g){const s=e.EpF();e.ynx(0),e.TgZ(1,"input",31),e.NdJ("colorPickerChange",function(_){return e.CHM(s),e.oxw().color=_}),e.qZA(),e.YNc(2,Kl,2,0,"a",32),e.BQk()}if(2&g){const s=e.oxw();e.xp6(1),e.Udp("background",s.color),e.Q6J("colorPicker",s.color),e.xp6(1),e.Q6J("ngIf","none"!=s.color)}}let $l=(()=>{class g{constructor(s){this.ms=s,this.currentComponent=void 0,this.groupedComponents=wC.j4,this.entities=[],this.properties={},this.$properties=[],this.color="#FFFFFF",this.fill="#cccccc",this.stroke=2,this.width=800,this.height=600,this.scale=1,this.save=new e.vpe,this._hmi={}}set hmi(s){this._hmi=s,this.changeSize(s.width,s.height),this.entities=s.entities,this.renderEntities()}onKeyup(s){var d;switch(console.log("onKeyup",s),s.key){case"Delete":null===(d=this.current)||void 0===d||d.$container.remove(),this.editLayer.clear();let _=this.entities.findIndex(w=>w==this.current);this.current=void 0,_>-1&&this.entities.splice(_,1);break;case"s":break;case"x":s.ctrlKey&&this.onCut();break;case"c":s.ctrlKey&&this.onCopy();break;case"v":s.ctrlKey&&this.onPaste();break;case"ArrowUp":this.current&&(this.setupEntity(this.current,{y:this.current.properties.y-5}),this.editEntity(this.current));break;case"ArrowDown":this.current&&(this.setupEntity(this.current,{y:this.current.properties.y+5}),this.editEntity(this.current));break;case"ArrowLeft":this.current&&(this.setupEntity(this.current,{x:this.current.properties.x-5}),this.editEntity(this.current));break;case"ArrowRight":this.current&&(this.setupEntity(this.current,{x:this.current.properties.x+5}),this.editEntity(this.current))}}ngOnInit(){}ngAfterViewInit(){this.canvas=(0,ji.Wj)().addTo("#hmi-editor-canvas").size(this.width,this.height),this.baseLayer=this.canvas.group(),this.createGrid(),this.mainLayer=this.canvas.group(),this.editLayer=this.canvas.group(),this.renderEntities()}renderEntities(){!this.canvas||this.entities.forEach(s=>{s.$container=new ji.G,s.$component=(0,wC.x5)(s.component),(0,Su.$I)(s),this.appendEntity(s),s.$component.setup.call(s.$object,s.properties)})}createGrid(){let d="#202020",_=this.baseLayer.pattern(10,10,w=>{w.line(0,0,10,0).stroke(d),w.line(0,0,0,10).stroke(d)});this.grid=this.baseLayer.rect().size("100%","100%").fill(_).stroke(d)}appendEntity(s){this.mainLayer.add(s.$container),this.setupEntity(s,s.properties),this.makeEntityEditable(s)}setupEntity(s,d){Object.assign(s.properties,d),d.hasOwnProperty("rotate")&&s.$container.transform({rotate:d.rotate}),d.hasOwnProperty("x")&&s.$container.x(d.x),d.hasOwnProperty("y")&&s.$container.y(d.y),s.$component.setup.call(s.$object,d)}makeEntityEditable(s){let _,d=s.$container;d.draggable().on("dragmove",w=>{}),d.on("dragstart",w=>{this.editLayer.clear(),_=w}),d.on("dragend",w=>{let me=_.detail.box,Re=w.detail.box,at=s.$component.drawer||"rect";switch(at){case"rect":case"circle":this.setupEntity(s,{x:s.properties.x+Re.x-me.x,y:s.properties.y+Re.y-me.y});break;case"line":this.setupEntity(s,{x1:s.properties.x1+Re.x-me.x,y1:s.properties.y1+Re.y-me.y,x2:s.properties.x2+Re.x-me.x,y2:s.properties.y2+Re.y-me.y});break;case"poly":let Hi=s.properties.points;Hi.forEach(yi=>{yi[0]+=Re.x-me.x,yi[1]+=Re.y-me.y}),this.setupEntity(s,{points:Hi});break;default:throw new Error("\u4e0d\u652f\u6301\u7684\u63a7\u4ef6\u7c7b\u578b\uff1a"+at)}this.editEntity(s)}),d.on("click",w=>{this.current!=s&&(this.current=s,this.editEntity(s))})}drawBegin(s){this.editLayer.clear(),this.current=void 0,this.currentComponent=s,this.$properties=(0,Su.yU)(s),this.properties=(0,Su.vW)(s),s.color&&(this.properties.fill=this.fill),s.stroke&&(this.properties.color=this.color,this.properties.stroke=this.stroke);let d={name:"",component:s.id,properties:this.properties,handlers:{},bindings:{},$container:new ji.G,$component:s,$object:void 0};(0,Su.$I)(d),this.drawEntity(d)}drawEnd(){this.editLayer.clear(),this.canvas.off("click.draw"),this.canvas.off("mousemove.draw")}drawLine(s){let d=!0;this.canvas.on("click.draw",_=>{d?(d=!1,this.entities.push(s),this.appendEntity(s),this.setupEntity(s,{x1:_.offsetX,y1:_.offsetY,x2:_.offsetX,y2:_.offsetY}),this.canvas.on("mousemove.draw",w=>{this.setupEntity(s,{x2:w.offsetX,y2:w.offsetY})})):this.drawEnd()})}drawRect(s){let d=0,_=0,w=!0,me=new ji.UL;this.canvas.on("click.draw",Re=>{w?(w=!1,d=Re.offsetX,_=Re.offsetY,this.appendEntity(s),this.entities.push(s),this.setupEntity(s,{x:Re.offsetX,y:Re.offsetY}),me.addTo(this.editLayer).move(d,_).stroke({width:1,color:"#7be",dasharray:"6 2",dashoffset:8}).fill("none"),me.animate().ease("-").stroke({dashoffset:0}).loop(),this.canvas.on("mousemove.draw",at=>{let ft=at.offsetX-d,xt=at.offsetY-_;ft>0&&xt>0&&(me.size(ft,xt),this.setupEntity(s,{width:ft,height:xt}))})):this.drawEnd()})}drawCircle(s){let d=0,_=0,w=!0,me=0;this.canvas.on("click.draw",Re=>{w?(w=!1,d=Re.offsetX,_=Re.offsetY,this.appendEntity(s),this.entities.push(s),this.setupEntity(s,{x:Re.offsetX,y:Re.offsetY}),this.canvas.on("mousemove.draw",at=>{let ft=at.offsetX-d,xt=at.offsetY-_;me=Math.sqrt(ft*ft+xt*xt),this.setupEntity(s,{radius:me})})):this.drawEnd()})}drawPoly(s){let d=!0,_=[];this.canvas.on("click.draw",w=>{if(d){d=!1,_.push([w.offsetX,w.offsetY],[w.offsetX,w.offsetY]),this.appendEntity(s),this.entities.push(s),this.setupEntity(s,{points:_}),this.canvas.on("mousemove.draw",Re=>{let at=_[_.length-1];at[0]=Re.offsetX,at[1]=Re.offsetY,this.setupEntity(s,{points:_})});let me=this;document.addEventListener("keydown",function Re(at){"Escape"==at.key&&(_.pop(),me.setupEntity(s,{points:_}),me.drawEnd(),document.removeEventListener("keydown",Re))})}else _.pop(),_.push([w.offsetX,w.offsetY],[w.offsetX,w.offsetY]),this.setupEntity(s,{points:_})})}drawEntity(s){this.drawEnd();const d=s.$component.drawer||"rect";switch(d){case"rect":this.drawRect(s);break;case"circle":this.drawCircle(s);break;case"line":this.drawLine(s);break;case"poly":this.drawPoly(s);break;default:throw new Error("\u4e0d\u652f\u6301\u7684\u63a7\u4ef6\u7c7b\u578b\uff1a"+d)}}editLine(s){let d=s.properties,_=[[d.x1,d.y1],[d.x2,d.y2]];_.forEach((w,me)=>{let Re=this.editLayer.circle(8).fill("#7be").center(w[0],w[1]).css("cursor","pointer").draggable();Re.on("dragmove",()=>{w[0]=Re.cx(),w[1]=Re.cy(),this.setupEntity(s,{x1:_[0][0],y1:_[0][1],x2:_[1][0],y2:_[1][1]})})})}editPoly(s){let d=s.properties.points;d.forEach((_,w)=>{let me=this.editLayer.circle(8).fill("#7be").center(_[0],_[1]).css("cursor","pointer").draggable();me.on("dragmove",()=>{_[0]=me.cx(),_[1]=me.cy(),this.setupEntity(s,{points:d})})})}editRect(s){let d=s.properties,_=this.editLayer.rect(d.width,d.height).move(d.x,d.y).fill("none").stroke({width:1,color:"#7be",dasharray:"6 2",dashoffset:0});_.animate().ease("-").stroke({dashoffset:8}).loop();let w=this.editLayer.rect(8,8).fill("#7be").center(d.x,d.y).css("cursor","nw-resize").draggable(),me=this.editLayer.rect(8,8).fill("#7be").center(d.x,d.y+.5*d.height).css("cursor","w-resize").draggable(),Re=this.editLayer.rect(8,8).fill("#7be").center(d.x,d.y+d.height).css("cursor","sw-resize").draggable(),at=this.editLayer.rect(8,8).fill("#7be").center(d.x+d.width,d.y).css("cursor","ne-resize").draggable(),ft=this.editLayer.rect(8,8).fill("#7be").center(d.x+d.width,d.y+.5*d.height).css("cursor","e-resize").draggable(),xt=this.editLayer.rect(8,8).fill("#7be").center(d.x+d.width,d.y+d.height).css("cursor","se-resize").draggable(),Bt=this.editLayer.rect(8,8).fill("#7be").center(d.x+.5*d.width,d.y).css("cursor","n-resize").draggable(),Ot=this.editLayer.rect(8,8).fill("#7be").center(d.x+.5*d.width,d.y+d.height).css("cursor","s-resize").draggable();w.on("dragmove",()=>{w.cx()>d.width+d.x||w.cy()>d.height+d.y||(d.width=d.width-w.cx()+d.x,d.height=d.height-w.cy()+d.y,d.x=w.cx(),d.y=w.cy(),_r())}),me.on("dragmove",()=>{me.cx()>d.width+d.x||(d.width=d.width-me.cx()+d.x,d.x=me.cx(),_r())}),Re.on("dragmove",()=>{Re.cx()>d.width+d.x||Re.cy()<d.y||(d.width=d.width-Re.cx()+d.x,d.height=Re.cy()-d.y,d.x=Re.cx(),_r())}),at.on("dragmove",()=>{at.cx()<d.x||at.cy()>d.height+d.y||(d.width=at.cx()-d.x,d.height=d.height-at.cy()+d.y,d.y=at.cy(),_r())}),ft.on("dragmove",()=>{ft.cx()<d.x||(d.width=ft.cx()-d.x,_r())}),xt.on("dragmove",()=>{xt.cx()<d.x||xt.cy()<d.y||(d.width=xt.cx()-d.x,d.height=xt.cy()-d.y,_r())}),Bt.on("dragmove",()=>{Bt.cy()>d.y+d.height||(d.height=d.height-Bt.cy()+d.y,d.y=Bt.cy(),_r())}),Ot.on("dragmove",()=>{Ot.cy()<d.y||(d.height=Ot.cy()-d.y,_r())});let Cn=this;function _r(){_.size(d.width,d.height).move(d.x,d.y),Cn.setupEntity(s,{width:d.width,height:d.height,x:d.x,y:d.y}),w.center(d.x,d.y),me.center(d.x,d.y+.5*d.height),Re.center(d.x,d.y+d.height),at.center(d.x+d.width,d.y),ft.center(d.x+d.width,d.y+.5*d.height),xt.center(d.x+d.width,d.y+d.height),Bt.center(d.x+.5*d.width,d.y),Ot.center(d.x+.5*d.width,d.y+d.height)}}editCircle(s){let d=s.properties,_=d.x+d.radius,w=d.y,me=this.editLayer.circle(8).fill("#7be").center(_,w).css("cursor","pointer").draggable();me.on("dragmove",()=>{let Re=me.cx()-d.x,at=me.cy()-d.y,ft=Math.sqrt(Re*Re+at*at);this.setupEntity(s,{radius:ft})})}editEntity(s){this.editLayer.clear(),this.$properties=(0,Su.yU)(s.$component),this.properties=s.properties;const d=s.$component.drawer||"rect";switch(d){case"rect":this.editRect(s);break;case"circle":this.editCircle(s);break;case"line":this.editLine(s);break;case"poly":this.editPoly(s);break;default:throw new Error("\u4e0d\u652f\u6301\u7684\u63a7\u4ef6\u7c7b\u578b\uff1a"+d)}}onPropertyChange(s){if(this.current){let d=this.properties[s];console.log("onPropertyChange",s,d),this.setupEntity(this.current,{[s]:d})}}moveTop(){var s;let d=this.entities.findIndex(_=>_==this.current);if(d<this.entities.length-1){let _=this.entities.splice(d,1);this.entities.push(..._),null===(s=this.current)||void 0===s||s.$container.front()}}moveBottom(){var s;let d=this.entities.findIndex(_=>_==this.current);if(d>0){let _=this.entities.splice(d,1);this.entities.splice(0,0,..._),null===(s=this.current)||void 0===s||s.$container.back()}}moveUp(){var s;let d=this.entities.findIndex(_=>_==this.current);if(d<this.entities.length-1){let _=this.entities.splice(d,1);this.entities.splice(d+1,0,..._),null===(s=this.current)||void 0===s||s.$container.forward()}}moveDown(){var s;let d=this.entities.findIndex(_=>_==this.current);if(d>0){let _=this.entities.splice(d,1);this.entities.splice(d-1,0,..._),null===(s=this.current)||void 0===s||s.$container.backward()}}onCut(){var s;this.onCopy(),null===(s=this.current)||void 0===s||s.$container.remove(),this.current=void 0}onCopy(){let s=this.entities.findIndex(d=>d==this.current);s>0&&(this.entities.splice(s,1),this.plate=this.current,this.editLayer.clear())}onPaste(){if(this.plate){let s={name:this.plate.name,component:this.plate.component,properties:JSON.parse(JSON.stringify(this.plate.properties)),handlers:JSON.parse(JSON.stringify(this.plate.handlers)),bindings:JSON.parse(JSON.stringify(this.plate.bindings)),$container:new ji.G,$component:this.plate.$component,$object:void 0};s.properties.x+=10,s.properties.y+=10,(0,Su.$I)(s),this.appendEntity(s),this.plate=s}}onDelete(){var s;let d=this.entities.findIndex(_=>_==this.current);d>0&&this.entities.splice(d,1),null===(s=this.current)||void 0===s||s.$container.remove(),this.current=void 0,this.editLayer.clear()}onSizeChange(){this.canvas.size(this.width,this.height)}onScaleChange(){this.canvas.transform({scale:this.scale})}changeSize(s,d){var _;this.width=s,this.height=d,null===(_=this.canvas)||void 0===_||_.size(this.width,this.height)}bindEvent(s){console.log("bind",s),this.current&&(this.current.handlers[s.name]=this.current.handlers[s.name]||[],this.current.handlers[s.name].push({}))}onSave(){let s=this.canvas.clone();s.children()[0].remove(),s.children()[2].remove(),this._hmi.snap=s.svg(),this._hmi.entities=this.entities.map(d=>({name:d.name,component:d.component,properties:d.properties,handlers:d.handlers,bindings:d.bindings})),this.save.emit(this._hmi)}browserAttachment(s){this.ms.create({nzTitle:"\u9009\u62e9\u9644\u4ef6",nzContent:Wm,nzWidth:"80%",nzComponentParams:{url:"/hmi/"+this._hmi.id+"/"}}).afterClose.subscribe(_=>{console.log("attach",_),_&&(this.properties[s]=_,this.onPropertyChange(s))})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Ln.Sf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["hmi-editor"]],hostBindings:function(s,d){1&s&&e.NdJ("keyup",function(w){return d.onKeyup(w)},!1,e.evT)},inputs:{entities:"entities",hmi:"hmi"},outputs:{save:"save"},decls:75,vars:26,consts:[[1,"editor-layout"],[1,"header"],["nz-icon","","nzType","save","title","\u4fdd\u5b58",1,"btn",3,"click"],["nzType","vertical"],["nz-icon","","nzType","scissor","title","\u526a\u5207",1,"btn",3,"click"],["nz-icon","","nzType","copy","title","\u590d\u5236",1,"btn",3,"click"],["nz-icon","","nzType","snippets","title","\u7c98\u8d34",1,"btn",3,"click"],["nz-icon","","nzType","delete","title","\u5220\u9664",1,"btn",3,"click"],["nz-icon","","nzType","vertical-right","title","\u7f6e\u9876",1,"btn",3,"nzRotate","click"],["nz-icon","","nzType","up","title","\u4e0a\u79fb\u4e00\u5c42",1,"btn",3,"click"],["nz-icon","","nzType","down","title","\u4e0b\u79fb\u4e00\u5c42",1,"btn",3,"click"],["nz-icon","","nzType","vertical-left","title","\u7f6e\u5e95",1,"btn",3,"nzRotate","click"],["nzActive","",3,"nzHeader",4,"ngFor","ngForOf"],[1,"content"],["id","hmi-editor-canvas"],["nzWidth","300px",1,"properties"],["nzHeader","\u53c2\u6570\u914d\u7f6e","nzActive",""],[4,"ngFor","ngForOf"],["nzHeader","\u4e8b\u4ef6\u54cd\u5e94","nzActive",""],["nzHeader","\u6570\u636e\u7ed1\u5b9a","nzActive",""],["nz-input","","nzSize","small",1,"size",3,"ngModel","ngModelChange","change"],["nz-dropdown","",3,"nzDropdownMenu"],["nz-icon","","nzType","down"],["sizeMenu","nzDropdownMenu"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"click"],[3,"ngModel","ngModelChange"],["nzLabel","10%",3,"nzValue"],["nzLabel","50%",3,"nzValue"],["nzLabel","100%",3,"nzValue"],["nzLabel","200%",3,"nzValue"],[1,"color",3,"colorPicker","colorPickerChange"],[3,"click",4,"ngIf"],["nzSize","small",3,"ngModel","ngModelChange"],["nzLabel","\u65e0",3,"nzValue"],["nzLabel","1",3,"nzValue"],["nzLabel","2",3,"nzValue"],["nzLabel","3",3,"nzValue"],["nzLabel","4",3,"nzValue"],["nzLabel","5",3,"nzValue"],[4,"ngIf"],["nzActive","",3,"nzHeader"],["class","component",3,"title","src","click",4,"ngFor","ngForOf"],[1,"component",3,"title","src","click"],[3,"ngSwitch"],["nzSize","small",3,"ngModel","ngModelChange",4,"ngSwitchCase"],["nz-input","","nzSize","small","type","number",3,"ngModel","ngModelChange","change",4,"ngSwitchCase"],["nz-input","","nzSize","small",3,"ngModel","ngModelChange","change",4,"ngSwitchCase"],[4,"ngSwitchCase"],["nz-input","","nzSize","small",3,"ngModel","ngModelChange","change",4,"ngSwitchDefault"],["nz-input","","nzSize","small","type","number",3,"ngModel","ngModelChange","change"],["nz-input","","nzSize","small",3,"ngModel","ngModelChange","change"],["nz-input","","nzSize","small",3,"value","colorPicker","colorPickerChange"],[3,"click"],["nzLabel","\u9ed8\u8ba4","nzValue",""],["nzLabel","\u9ed1\u4f53","nzValue","\u9ed1\u4f53"],["nzLabel","\u5b8b\u4f53","nzValue","\u5b8b\u4f53"],["nzLabel","\u6700\u5c0f","nzValue","xx-small"],["nzLabel","\u8f83\u5c0f","nzValue","x-small"],["nzLabel","\u5c0f\u53f7","nzValue","small"],["nzLabel","\u4e2d\u53f7","nzValue","medium"],["nzLabel","\u5927\u53f7","nzValue","large"],["nzLabel","\u8f83\u5927","nzValue","x-large"],["nzLabel","\u8d85\u5927","nzValue","xx-large"],["nzLabel","\u6700\u5927","nzValue","xxx-large"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"],[1,"handler"],["nz-icon","","nzType","plus-circle",3,"click"],["class","invoke",4,"ngFor","ngForOf"],[1,"invoke"],["nz-icon","","nzType","close",1,"remove",3,"click"],["nzAllowClear","","nzMode","tags","nzSize","small",3,"nzTokenSeparators","ngModel","ngModelChange"],["nz-input","","nzSize","small",3,"ngModel","ngModelChange"]],template:function(s,d){if(1&s&&(e.TgZ(0,"nz-layout",0)(1,"nz-header",1)(2,"i",2),e.NdJ("click",function(){return d.onSave()}),e.qZA(),e._UZ(3,"nz-divider",3),e.TgZ(4,"i",4),e.NdJ("click",function(){return d.onCut()}),e.qZA(),e.TgZ(5,"i",5),e.NdJ("click",function(){return d.onCopy()}),e.qZA(),e.TgZ(6,"i",6),e.NdJ("click",function(){return d.onPaste()}),e.qZA(),e.TgZ(7,"i",7),e.NdJ("click",function(){return d.onDelete()}),e.qZA(),e._UZ(8,"nz-divider",3),e.TgZ(9,"i",8),e.NdJ("click",function(){return d.moveTop()}),e.qZA(),e.TgZ(10,"i",9),e.NdJ("click",function(){return d.moveUp()}),e.qZA(),e.TgZ(11,"i",10),e.NdJ("click",function(){return d.moveDown()}),e.qZA(),e.TgZ(12,"i",11),e.NdJ("click",function(){return d.moveBottom()}),e.qZA()(),e.TgZ(13,"nz-layout")(14,"nz-sider")(15,"nz-collapse"),e.YNc(16,e_,2,2,"nz-collapse-panel",12),e.qZA()(),e.TgZ(17,"nz-content",13),e._UZ(18,"div",14),e.qZA(),e.TgZ(19,"nz-sider",15)(20,"nz-collapse")(21,"nz-collapse-panel",16)(22,"table")(23,"tbody"),e.YNc(24,r_,14,11,"tr",17),e.qZA()()(),e.TgZ(25,"nz-collapse-panel",18),e.YNc(26,cd,6,2,"ng-container",17),e.qZA(),e.TgZ(27,"nz-collapse-panel",19)(28,"table")(29,"tbody"),e.YNc(30,hd,5,2,"tr",17),e.qZA()()()()()(),e.TgZ(31,"nz-footer")(32,"input",20),e.NdJ("ngModelChange",function(w){return d.width=w})("change",function(){return d.onSizeChange()}),e.qZA(),e._uU(33," x "),e.TgZ(34,"input",20),e.NdJ("ngModelChange",function(w){return d.height=w})("change",function(){return d.onSizeChange()}),e.qZA(),e.TgZ(35,"a",21),e._uU(36," \u5e38\u7528\u5c3a\u5bf8 "),e._UZ(37,"i",22),e.qZA(),e.TgZ(38,"nz-dropdown-menu",null,23)(40,"ul",24)(41,"li",25),e.NdJ("click",function(){return d.changeSize(400,300)}),e._uU(42,"400x300"),e.qZA(),e.TgZ(43,"li",25),e.NdJ("click",function(){return d.changeSize(600,400)}),e._uU(44,"600x400"),e.qZA(),e.TgZ(45,"li",25),e.NdJ("click",function(){return d.changeSize(800,600)}),e._uU(46,"800x600"),e.qZA(),e.TgZ(47,"li",25),e.NdJ("click",function(){return d.changeSize(1e3,800)}),e._uU(48,"1000x800"),e.qZA(),e.TgZ(49,"li",25),e.NdJ("click",function(){return d.changeSize(1200,900)}),e._uU(50,"1200x900"),e.qZA(),e.TgZ(51,"li",25),e.NdJ("click",function(){return d.changeSize(1600,1200)}),e._uU(52,"1600x1200"),e.qZA(),e.TgZ(53,"li",25),e.NdJ("click",function(){return d.changeSize(2e3,1600)}),e._uU(54,"2000x1600"),e.qZA()()(),e._UZ(55,"nz-divider",3),e.TgZ(56,"nz-select",26),e.NdJ("ngModelChange",function(w){return d.scale=w})("ngModelChange",function(){return d.onScaleChange()}),e._UZ(57,"nz-option",27)(58,"nz-option",28)(59,"nz-option",29)(60,"nz-option",30),e.qZA(),e._UZ(61,"nz-divider",3),e._uU(62," \u586b\u5145 "),e.TgZ(63,"input",31),e.NdJ("colorPickerChange",function(w){return d.fill=w}),e.qZA(),e.YNc(64,i_,2,0,"a",32),e._UZ(65,"nz-divider",3),e._uU(66," \u8fb9\u6846 "),e.TgZ(67,"nz-select",33),e.NdJ("ngModelChange",function(w){return d.stroke=w}),e._UZ(68,"nz-option",34)(69,"nz-option",35)(70,"nz-option",36)(71,"nz-option",37)(72,"nz-option",38)(73,"nz-option",39),e.qZA(),e.YNc(74,wp,3,4,"ng-container",40),e.qZA()()),2&s){const _=e.MAs(39);e.xp6(9),e.Q6J("nzRotate",90),e.xp6(3),e.Q6J("nzRotate",90),e.xp6(4),e.Q6J("ngForOf",d.groupedComponents),e.xp6(8),e.Q6J("ngForOf",d.$properties),e.xp6(2),e.Q6J("ngForOf",null==d.current||null==d.current.$component?null:d.current.$component.events),e.xp6(4),e.Q6J("ngForOf",null==d.current||null==d.current.$component?null:d.current.$component.values),e.xp6(2),e.Q6J("ngModel",d.width),e.xp6(2),e.Q6J("ngModel",d.height),e.xp6(1),e.Q6J("nzDropdownMenu",_),e.xp6(21),e.Q6J("ngModel",d.scale),e.xp6(1),e.Q6J("nzValue",.1),e.xp6(1),e.Q6J("nzValue",.5),e.xp6(1),e.Q6J("nzValue",1),e.xp6(1),e.Q6J("nzValue",2),e.xp6(3),e.Udp("background",d.fill),e.Q6J("colorPicker",d.fill),e.xp6(1),e.Q6J("ngIf","none"!=d.fill),e.xp6(3),e.Q6J("ngModel",d.stroke),e.xp6(1),e.Q6J("nzValue",0),e.xp6(1),e.Q6J("nzValue",1),e.xp6(1),e.Q6J("nzValue",2),e.xp6(1),e.Q6J("nzValue",3),e.xp6(1),e.Q6J("nzValue",4),e.xp6(1),e.Q6J("nzValue",5),e.xp6(1),e.Q6J("ngIf",d.stroke>0)}},directives:[$,L,K.Ls,Ce.w,tn.g,F,Zn.yH,k.sg,Zn.Zv,q,et.p0,et.$Z,et.Uo,k.RF,k.n9,ge.i,M.JJ,M.On,Ae.Zp,M.wV,M.Fj,$m,k.O5,Yr.Vq,Yr.Ip,k.ED,W,rt.Ws,rt.cm,rt.RR,he.wO,he.r9],styles:[".editor-layout[_ngcontent-%COMP%]{height:100vh}.editor-layout[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-size:20px}.editor-layout[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:5px}.color[_ngcontent-%COMP%]{border:1px solid white;width:30px}.size[_ngcontent-%COMP%]{width:60px;text-align:center}.component[_ngcontent-%COMP%]{width:30px;height:30px;margin:5px}.content[_ngcontent-%COMP%]{padding:30px;overflow:auto}.handler[_ngcontent-%COMP%]   .invoke[_ngcontent-%COMP%]{border:1px solid grey;padding:5px;margin:2px;position:relative}.handler[_ngcontent-%COMP%]   .invoke[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{position:absolute;top:0;right:0}"]}),g})(),Dp=(()=>{class g{constructor(s,d,_,w){this.route=s,this.router=d,this.rs=_,this.message=w,this.submitting=!1,this.data={width:800,height:600,entities:[]},this.id=s.snapshot.paramMap.get("id"),this.id&&this.load()}ngOnInit(){}load(){this.rs.get("hmi/"+this.id).subscribe(s=>{this.data=s.data})}submit(){}onSave(s){console.log("save",s),s.id=this.id,this.submitting=!0,this.rs.post(this.id?"hmi/"+this.id:"hmi/create",s).subscribe(_=>{this.message.success("\u63d0\u4ea4\u6210\u529f"),this.router.navigate(["/admin/hmi/detail/"+_.data.id])}).add(()=>{this.submitting=!1})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.gz),e.Y36(Me.F0),e.Y36(Fe.s),e.Y36(ot.dD))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-hmi-edit"]],decls:1,vars:1,consts:[[3,"hmi","save"]],template:function(s,d){1&s&&(e.TgZ(0,"hmi-editor",0),e.NdJ("save",function(w){return d.onSave(w)}),e.qZA()),2&s&&e.Q6J("hmi",d.data)},directives:[$l],styles:[""]}),g})();function nw(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"tr",8),e.NdJ("dblclick",function(){const w=e.CHM(s).$implicit;return e.oxw().open(w)}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td",9),e.ALo(8,"dateString"),e._uU(9),e.ALo(10,"fromNow"),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td")(14,"a",10),e._uU(15,"\u8be6\u60c5"),e.qZA(),e._UZ(16,"nz-divider",11),e.TgZ(17,"a",10),e._uU(18,"\u7f16\u8f91"),e.qZA(),e._UZ(19,"nz-divider",11),e.TgZ(20,"a",12),e._uU(21," \u66f4\u591a "),e._UZ(22,"i",13),e.qZA(),e.TgZ(23,"nz-dropdown-menu",null,14)(25,"ul",15)(26,"li",16),e.NdJ("click",function(){const w=e.CHM(s).$implicit;return e.oxw().enable(w)}),e._uU(27,"\u542f\u7528"),e.qZA(),e.TgZ(28,"li",17),e.NdJ("nzOnConfirm",function(){const w=e.CHM(s).$implicit;return e.oxw().disable(w)}),e._uU(29,"\u7981\u7528 "),e.qZA(),e.TgZ(30,"li",18),e.NdJ("nzOnConfirm",function(){const _=e.CHM(s),w=_.$implicit,me=_.index;return e.oxw().remove(w,me)}),e._uU(31,"\u5220\u9664"),e.qZA()()()()()}if(2&g){const s=x.$implicit,d=e.MAs(24);e.xp6(2),e.Oqu(s.id),e.xp6(2),e.AsE("",s.disabled?"\u274c":"","",s.name,""),e.xp6(2),e.Oqu(s.url),e.xp6(1),e.Q6J("title",e.lcZ(8,12,s.created)),e.xp6(2),e.Oqu(e.lcZ(10,14,s.created)),e.xp6(3),e.Oqu(s.running?"\u5728\u7ebf":"\u79bb\u7ebf"),e.xp6(2),e.Q6J("routerLink","/admin/camera/detail/"+s.id),e.xp6(3),e.Q6J("routerLink","/admin/camera/edit/"+s.id),e.xp6(3),e.Q6J("nzDropdownMenu",d),e.xp6(6),e.Q6J("nzDisabled",!s.disabled),e.xp6(2),e.Q6J("nzDisabled",s.disabled)}}let ox=(()=>{class g{constructor(s,d,_){this.router=s,this.rs=d,this.ms=_,this.datum=[],this.loading=!1,this.total=1,this.pageSize=20,this.pageIndex=1,this.params={filter:{}}}ngOnInit(){}search(s){this.pageIndex=1,this.params.skip=0,s?this.params.keyword={name:s,addr:s}:delete this.params.keyword,this.load()}onQuery(s){(0,sr.F)(s,this.params),this.load()}load(){this.loading=!0,this.rs.post("camera/list",this.params).subscribe(s=>{console.log("res",s),this.datum=s.data,this.total=s.total}).add(()=>{this.loading=!1})}create(){this.router.navigate(["admin/camera/create"])}open(s){this.router.navigate(["/admin/camera/detail/"+s.id])}remove(s,d){this.rs.get(`camera/${s.id}/delete`).subscribe(_=>{this.datum.splice(d,1)})}enable(s){this.rs.get(`camera/${s.id}/enable`).subscribe(d=>{s.disabled=!1})}disable(s){this.rs.get(`camera/${s.id}/disable`).subscribe(d=>{s.disabled=!0})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.F0),e.Y36(Fe.s),e.Y36(Ln.Sf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-camera"]],decls:18,vars:12,consts:[[3,"loading","create","refresh","search"],["nzSize","small",3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzQueryParams"],["nzColumnKey","id",3,"nzSortFn"],["nzColumnKey","name",3,"nzSortFn"],["nzColumnKey","url",3,"nzSortFn"],["nzColumnKey","created",3,"nzSortFn"],["nzWidth","100"],[3,"dblclick",4,"ngFor","ngForOf"],[3,"dblclick"],[3,"title"],[3,"routerLink"],["nzType","vertical"],["nz-dropdown","","nzTrigger","click",3,"nzDropdownMenu"],["nz-icon","","nzType","down"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"nzDisabled","click"],["nz-menu-item","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u7981\u7528\uff1f",3,"nzDisabled","nzOnConfirm"],["nz-menu-item","","nzDanger","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664\uff1f",3,"nzOnConfirm"]],template:function(s,d){1&s&&(e.TgZ(0,"app-page-list",0),e.NdJ("create",function(){return d.create()})("refresh",function(){return d.load()})("search",function(w){return d.search(w)}),e.TgZ(1,"nz-table",1),e.NdJ("nzQueryParams",function(w){return d.onQuery(w)}),e.TgZ(2,"thead")(3,"tr")(4,"th",2),e._uU(5,"ID"),e.qZA(),e.TgZ(6,"th",3),e._uU(7,"\u540d\u79f0"),e.qZA(),e.TgZ(8,"th",4),e._uU(9,"\u5730\u5740"),e.qZA(),e.TgZ(10,"th",5),e._uU(11,"\u521b\u5efa\u65f6\u95f4"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"\u72b6\u6001"),e.qZA(),e.TgZ(14,"th",6),e._uU(15,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,nw,32,16,"tr",7),e.qZA()()()),2&s&&(e.Q6J("loading",d.loading),e.xp6(1),e.Q6J("nzData",d.datum)("nzFrontPagination",!1)("nzLoading",d.loading)("nzTotal",d.total)("nzPageSize",d.pageSize)("nzPageIndex",d.pageIndex),e.xp6(3),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(7),e.Q6J("ngForOf",d.datum))},directives:[Gr._,et.N8,et.Om,et.$Z,et.Uo,et._C,et.qD,et.p0,k.sg,Me.yS,tn.g,rt.Ws,rt.cm,K.Ls,Ce.w,rt.RR,he.wO,he.r9,er],pipes:[fr.i,xr.d],styles:[""]}),g})();var ui=J(2070);const dd=["video"];function sx(g,x){if(1&g&&e._UZ(0,"app-event",9),2&g){const s=e.oxw();e.Q6J("id",s.id)}}function Wc(g,x){if(1&g){const s=e.EpF();e.TgZ(0,"a",10),e.NdJ("click",function(){return e.CHM(s),e.oxw().load()}),e._UZ(1,"i",11),e.qZA(),e._UZ(2,"nz-divider",12),e.TgZ(3,"a",13),e._UZ(4,"i",14),e.qZA(),e._UZ(5,"nz-divider",12),e.TgZ(6,"a",15),e._UZ(7,"i",16),e.qZA()}if(2&g){const s=e.oxw();e.xp6(1),e.Q6J("nzSpin",s.loading),e.xp6(2),e.Q6J("config",s.data),e.xp6(3),e.Q6J("routerLink","/admin/camera/edit/"+s.id)}}let il=(()=>{class g{constructor(s,d,_){this.router=s,this.rs=d,this.ms=_,this.id=0,this.data={},this.loading=!1,this.id=parseInt(s.snapshot.params.id),this.load()}ngOnInit(){}load(){this.loading=!0,this.rs.get(`camera/${this.id}`).subscribe(s=>{var d,_,w;if(this.data=s.data,this.loading=!1,this.data.running){let me=`/stream/${this.id}/index.m3u8`;if(null===(d=this.video)||void 0===d?void 0:d.nativeElement.canPlayType("application/vnd.apple.mpegurl"))null===(_=this.video)||void 0===_||(_.nativeElement.src=me);else{let Re=new ui;Re.loadSource(me),Re.attachMedia(null===(w=this.video)||void 0===w?void 0:w.nativeElement),Re.on(ui.Events.MEDIA_ATTACHED,()=>{}),Re.on(ui.Events.MANIFEST_PARSED,()=>{}),Re.on(ui.Events.ERROR,console.error)}}})}onEnableChange(s){s?this.ms.confirm({nzTitle:"\u63d0\u793a",nzContent:"\u786e\u8ba4\u7981\u7528\u5417?",nzOnOk:()=>{this.rs.get(`camera/${this.id}/disable`).subscribe(d=>{})},nzOnCancel:()=>{this.data.disabled=!1}}):this.rs.get(`camera/${this.id}/enable`).subscribe(d=>{})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(Me.gz),e.Y36(Fe.s),e.Y36(Ln.Sf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-camera-detail"]],viewQuery:function(s,d){if(1&s&&e.Gf(dd,5),2&s){let _;e.iGM(_=e.CRH())&&(d.video=_.first)}},decls:30,vars:8,consts:[[3,"nzTabBarExtraContent"],["nzTitle","\u6444\u50cf\u5934\u8be6\u60c5"],["nzBordered",""],[3,"ngModel","ngModelChange"],["autoplay","","controls",""],["video",""],["nzTitle","\u65e5\u5fd7"],["nz-tab",""],["extraTemplate",""],["type","camera",3,"id"],["title","\u5237\u65b0",3,"click"],["nz-icon","","nzType","reload",3,"nzSpin"],["nzType","vertical"],["title","\u539f\u59cb\u6570\u636e","appViewConfig","",3,"config"],["nz-icon","","nzType","profile"],["title","\u7f16\u8f91",3,"routerLink"],["nz-icon","","nzType","form"]],template:function(s,d){if(1&s&&(e.TgZ(0,"nz-tabset",0)(1,"nz-tab",1)(2,"nz-list",2)(3,"nz-list-item")(4,"span"),e._uU(5,"\u540d\u79f0"),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"nz-list-item")(8,"span"),e._uU(9,"\u5730\u5740"),e.qZA(),e._uU(10),e.qZA(),e.TgZ(11,"nz-list-item")(12,"span"),e._uU(13,"\u72b6\u6001"),e.qZA(),e._uU(14),e.qZA(),e.TgZ(15,"nz-list-item")(16,"span"),e._uU(17,"\u7981\u7528"),e.qZA(),e.TgZ(18,"nz-switch",3),e.NdJ("ngModelChange",function(w){return d.onEnableChange(w)}),e.qZA()(),e.TgZ(19,"nz-list-item")(20,"span"),e._uU(21,"\u521b\u5efa\u65f6\u95f4"),e.qZA(),e._uU(22),e.ALo(23,"dateString"),e.qZA()(),e._UZ(24,"video",4,5),e.qZA(),e.TgZ(26,"nz-tab",6),e.YNc(27,sx,1,1,"ng-template",7),e.qZA()(),e.YNc(28,Wc,8,3,"ng-template",null,8,e.W1O)),2&s){const _=e.MAs(29);e.Q6J("nzTabBarExtraContent",_),e.xp6(6),e.Oqu(d.data.name),e.xp6(4),e.Oqu(d.data.addr),e.xp6(4),e.Oqu(d.data.running?"\u542f\u52a8":"\u505c\u6b62"),e.xp6(4),e.Q6J("ngModel",d.data.disabled),e.xp6(4),e.Oqu(e.lcZ(23,6,d.data.created))}},directives:[Wn.xH,Wn.xw,Jr.n_,Jr.AA,ge.i,M.JJ,M.On,Wn.cj,pe.B,K.Ls,Ce.w,tn.g,ae.Z,Me.yS],pipes:[fr.i],styles:[""]}),g})(),jl=(()=>{class g{constructor(s,d,_,w,me,Re){this.fb=s,this.route=d,this.router=_,this.rs=w,this.message=me,this.ms=Re,this.submitting=!1,this.basicForm=new M.cw({}),this.data={name:"\u65b0\u5efa\u6444\u50cf\u5934",url:"",disabled:!1},this.id=d.snapshot.paramMap.get("id"),this.id&&this.load(),this.buildForm()}buildForm(){this.basicForm=this.fb.group({name:[this.data.name,[M.kI.required]],url:[this.data.url,[M.kI.required]],disabled:[this.data.disabled,[]]})}ngOnInit(){}load(){this.rs.get("camera/"+this.id).subscribe(s=>{this.data=s.data,this.buildForm()})}submit(){this.submitting=!0,this.rs.post(this.id?"camera/"+this.id:"camera/create",this.basicForm.value).subscribe(d=>{this.message.success("\u63d0\u4ea4\u6210\u529f"),this.router.navigate(["/admin/camera/detail/"+d.data.id])}).add(()=>{this.submitting=!1})}change(){this.data=this.basicForm.value}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.qu),e.Y36(Me.gz),e.Y36(Me.F0),e.Y36(Fe.s),e.Y36(ot.dD),e.Y36(Ln.Sf))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-camera-edit"]],decls:18,vars:9,consts:[[3,"ngModel","submitting","ngModelChange","submit"],[3,"formGroup","change"],["nzHeader","\u57fa\u672c\u4fe1\u606f","nzActive",""],[3,"nzSpan"],["nzErrorTip","",3,"nzSpan"],["nz-input","","formControlName","name","required",""],["nz-input","","formControlName","url","placeholder","","required",""],["formControlName","disabled"]],template:function(s,d){1&s&&(e.TgZ(0,"app-editor",0),e.NdJ("ngModelChange",function(w){return d.data=w})("ngModelChange",function(w){return d.basicForm.patchValue(w)})("submit",function(){return d.submit()}),e.TgZ(1,"nz-collapse",1),e.NdJ("change",function(){return d.change()}),e.TgZ(2,"nz-collapse-panel",2)(3,"nz-form-item")(4,"nz-form-label",3),e._uU(5,"\u540d\u79f0"),e.qZA(),e.TgZ(6,"nz-form-control",4),e._UZ(7,"input",5),e.qZA()(),e.TgZ(8,"nz-form-item")(9,"nz-form-label",3),e._uU(10,"\u5730\u5740"),e.qZA(),e.TgZ(11,"nz-form-control",4),e._UZ(12,"input",6),e.qZA()(),e.TgZ(13,"nz-form-item")(14,"nz-form-label",3),e._uU(15,"\u7981\u7528"),e.qZA(),e.TgZ(16,"nz-form-control",4),e._UZ(17,"nz-switch",7),e.qZA()()()()()),2&s&&(e.Q6J("ngModel",d.data)("submitting",d.submitting),e.xp6(1),e.Q6J("formGroup",d.basicForm),e.xp6(3),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(3),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12),e.xp6(3),e.Q6J("nzSpan",5),e.xp6(2),e.Q6J("nzSpan",12))},directives:[Mr,M.JJ,M.On,Zn.yH,M.JL,M.sg,Zn.Zv,yn.SK,le.Nx,yn.t3,le.iK,le.Fd,Ae.Zp,M.Fj,M.u,M.Q7,ge.i],styles:[""]}),g})();const a_=[{path:"hmi-edit/:id",component:Dp},{path:"hmi-create",component:Dp},{path:"",component:_t,data:{breadcrumb:"\u540e\u53f0"},children:[{path:"",component:fi,data:{breadcrumb:"\u63a7\u5236\u53f0"}},{path:"dash",component:fi,data:{breadcrumb:"\u63a7\u5236\u53f0"}},{path:"home",component:Ps,data:{breadcrumb:"\u9996\u9875"}},{path:"server",component:Da,data:{breadcrumb:"\u670d\u52a1\u5668"},children:[{path:"",component:Ni,data:{breadcrumb:"\u670d\u52a1\u5668"}},{path:"detail/:id",component:Be,data:{breadcrumb:"\u8be6\u60c5"}},{path:"edit/:id",component:Yh,data:{breadcrumb:"\u7f16\u8f91"}},{path:"create",component:Yh,data:{breadcrumb:"\u521b\u5efa"}}]},{path:"tunnel",component:Da,data:{breadcrumb:"\u901a\u9053"},children:[{path:"",component:vi,data:{breadcrumb:"\u901a\u9053"}},{path:"detail/:id",component:It,data:{breadcrumb:"\u8be6\u60c5"}},{path:"edit/:id",component:Dr,data:{breadcrumb:"\u7f16\u8f91"}},{path:"create",component:Dr,data:{breadcrumb:"\u521b\u5efa"}},{path:"monitor/:id",component:Bv,data:{breadcrumb:"\u76d1\u63a7"}}]},{path:"transfer",component:Da,data:{breadcrumb:"\u8fdc\u7a0b\u8c03\u8bd5"},children:[{path:"",component:D1,data:{breadcrumb:"\u8fdc\u7a0b\u8c03\u8bd5"}},{path:"detail/:id",component:A1,data:{breadcrumb:"\u8be6\u60c5"}},{path:"edit/:id",component:Js,data:{breadcrumb:"\u7f16\u8f91"}},{path:"create",component:Js,data:{breadcrumb:"\u521b\u5efa"}}]},{path:"device",component:Da,data:{breadcrumb:"\u8bbe\u5907"},children:[{path:"",component:ca,data:{breadcrumb:"\u8bbe\u5907"}},{path:"detail/:id",component:Vt.q,data:{breadcrumb:"\u8be6\u60c5"}},{path:"edit/:id",component:mv,data:{breadcrumb:"\u7f16\u8f91"}},{path:"create",component:mv,data:{breadcrumb:"\u521b\u5efa"}},{path:"value/:id/:name",component:rp,data:{breadcrumb:"\u5386\u53f2"}}]},{path:"product",component:Da,data:{breadcrumb:"\u4ea7\u54c1\u5e93"},children:[{path:"",component:ho,data:{breadcrumb:"\u4ea7\u54c1\u5e93"}},{path:"detail/:id",component:If,data:{breadcrumb:"\u8be6\u60c5"}},{path:"edit/:id",component:Xy,data:{breadcrumb:"\u7f16\u8f91"}},{path:"create",component:Xy,data:{breadcrumb:"\u521b\u5efa"}}]},{path:"project",component:Da,data:{breadcrumb:"\u9879\u76ee"},children:[{path:"",component:Oi,data:{breadcrumb:"\u9879\u76ee"}},{path:"detail/:id",component:t1,data:{breadcrumb:"\u8be6\u60c5"}},{path:"edit/:id",component:Wh,data:{breadcrumb:"\u7f16\u8f91"}},{path:"create",component:Wh,data:{breadcrumb:"\u521b\u5efa"}}]},{path:"template",component:Da,data:{breadcrumb:"\u6a21\u677f\u5e93"},children:[{path:"",component:Qa,data:{breadcrumb:"\u6a21\u677f\u5e93"}},{path:"detail/:id",component:Si,data:{breadcrumb:"\u8be6\u60c5"}},{path:"edit/:id",component:yu,data:{breadcrumb:"\u7f16\u8f91"}},{path:"create",component:yu,data:{breadcrumb:"\u521b\u5efa"}}]},{path:"hmi",component:Da,data:{breadcrumb:"\u7ec4\u6001"},children:[{path:"",component:E1,data:{breadcrumb:"\u7ec4\u6001"}},{path:"detail/:id",component:k1,data:{breadcrumb:"\u8be6\u60c5"}},{path:"edit/:id",component:Dp,data:{breadcrumb:"\u7f16\u8f91"}},{path:"create",component:Dp,data:{breadcrumb:"\u521b\u5efa"}}]},{path:"component",component:Da,data:{breadcrumb:"\u7ec4\u4ef6\u5e93"},children:[{path:"",component:Uv,data:{breadcrumb:"\u7ec4\u4ef6\u5e93"}}]},{path:"extension",component:Da,data:{breadcrumb:"\u6269\u5c55"},children:[{path:"plugin",component:fo,data:{breadcrumb:"\u63d2\u4ef6"}},{path:"protocol",component:go,data:{breadcrumb:"\u534f\u8bae"}}]},{path:"camera",component:Da,data:{breadcrumb:"\u6444\u50cf\u5934"},children:[{path:"",component:ox,data:{breadcrumb:"\u6444\u50cf\u5934"}},{path:"detail/:id",component:il,data:{breadcrumb:"\u8be6\u60c5"}},{path:"edit/:id",component:jl,data:{breadcrumb:"\u7f16\u8f91"}},{path:"create",component:jl,data:{breadcrumb:"\u521b\u5efa"}}]},{path:"setting",component:Da,data:{breadcrumb:"\u8bbe\u7f6e"},children:[{path:"",component:os,data:{breadcrumb:"\u7cfb\u7edf"}},{path:"user",component:Fi,data:{breadcrumb:"\u7528\u6237"}},{path:"password",component:na,data:{breadcrumb:"\u4fee\u6539\u5bc6\u7801"}}]},{path:"user",component:Da,data:{breadcrumb:"\u7528\u6237"},children:[{path:"",component:Fi,data:{breadcrumb:"\u7528\u6237"}},{path:"detail/:id",component:zC,data:{breadcrumb:"\u8be6\u60c5"}}]},{path:"logout",canActivate:[_n]},{path:"**",component:cr}]}];let lx=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[[Me.Bz.forChild(a_)],Me.Bz]}),g})();var Lu=J(7429);let p_=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({}),g})(),px=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[[ne.vT,k.ez,st.U8,Lu.eL,K.PV,ct.T,Sn.g,p_]]}),g})(),m_=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[[k.ez]]}),g})(),Ep=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[[ne.vT,k.ez,se.ud,ct.T,m_]]}),g})();var C_=J(685);let Op=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[[ne.vT,k.ez,M.u5,hs.Wr,xn.sL,Ae.o7,Br.YI,K.PV,C_.Xo]]}),g})();var Bu=J(3868),Pp=J(9577);let S_=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({providers:[],imports:[[k.ez,M.u5,Cf.k,Wn.we,xn.sL,K.PV,Me.Bz,Rt.zf,Ae.o7,$i,Ln.Qp,Bu.aF,Pp.JZ.forRoot({apiKey:"e4c1bd11fe1b25d77dae4cf3993f7034",debug:!0})]]}),g})(),Ix=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[[k.ez,Ep,Ca,Ra,tn.S,ni]]}),g})();var jr=J(9193);const Ip=[jr.qgH,jr.n0m,jr.ctN,jr.CnB,jr.x0x,jr.KrS,jr.BXO,jr.vkb,jr.MjI,jr.NvA,jr.J1v,jr.TSL,jr.HIu,jr.lKn,jr.FsU,jr.vEg,jr.gvV,jr.np6,jr.Xwh,jr.fhO,jr.zuz,jr.DxT,jr.eLU,jr.y56,jr.RYI,jr.Mwl];let kx=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({providers:[{provide:K.sV,useValue:Ip}],imports:[[k.ez,K.PV.forChild(Ip)],K.PV]}),g})(),Lx=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({providers:[],imports:[[k.ez,M.u5,oe,Zn.cD,K.PV,tn.S,et.HQ,Yr.LV,Ae.o7,ge.m,kx,jm,Wn.we,rt.b1,Vm,xn.sL,xi,Ln.Qp]]}),g})(),pd=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=e.oAB({type:g,bootstrap:[_t]}),g.\u0275inj=e.cJS({providers:[Sa],imports:[[k.ez,M.u5,M.UX,be.JF,lx,K.PV,yn.Jb,oe,he.ip,Se.cg,et.HQ,Ln.Qp,le.U5,xn.sL,Ae.o7,hs.Wr,ge.m,xi,tn.S,px,Yr.LV,Rt.zf,Ct,Ep,Wn.we,Zn.cD,Op,Bu.aF,Ca,gn.vh,Vm,rt.b1,$i,ym,uf,ni.forRoot({echarts:()=>Promise.resolve().then(J.bind(J,8045))}),Pp.JZ.forRoot({apiKey:"e4c1bd11fe1b25d77dae4cf3993f7034",debug:!0}),S_,Ix,ir,Jr.Ph,Lx,Ge]]}),g})()},5045:(Gt,ht,J)=>{"use strict";J.d(ht,{f:()=>ne});var e=J(8090),O=J(5e3),ee=J(7152),j=J(1445),S=J(9279),fe=J(592),he=J(9808),se=J(7448),k=J(1485);function K(ie,re){if(1&ie&&(O.TgZ(0,"tr")(1,"td")(2,"a",4),O._uU(3),O.qZA()(),O.TgZ(4,"td")(5,"a",4),O._uU(6),O.qZA()(),O.TgZ(7,"td"),O._uU(8),O.qZA(),O.TgZ(9,"td"),O._uU(10),O.qZA(),O.TgZ(11,"td",5),O.ALo(12,"dateString"),O._uU(13),O.ALo(14,"fromNow"),O.qZA()()),2&ie){const R=re.$implicit;O.xp6(2),O.Q6J("routerLink","/admin/project/detail/"+R.project_id),O.xp6(1),O.Oqu(null==R.project?null:R.project.name),O.xp6(2),O.Q6J("routerLink","/admin/device/detail/"+R.device_id),O.xp6(1),O.Oqu(null==R.device?null:R.device.name),O.xp6(2),O.Oqu(R.name),O.xp6(2),O.Oqu(R.content),O.xp6(1),O.Q6J("title",O.lcZ(12,8,R.created)),O.xp6(2),O.Oqu(O.lcZ(14,10,R.created))}}let ne=(()=>{class ie{constructor(R,V){this.router=R,this.rs=V,this.type="",this.id=0,this.datum=[],this.loading=!1,this.total=1,this.pageSize=20,this.pageIndex=1,this.params={filter:{}}}ngOnInit(){}search(R){this.pageIndex=1,this.params.skip=0,R?this.params.keyword={code:R,message:R}:delete this.params.keyword,this.load()}onQuery(R){(0,e.F)(R,this.params),this.load()}load(){this.loading=!0,this.rs.post(`${this.type}/${this.id}/alarm/list`,this.params).subscribe(R=>{console.log("res",R),this.datum=R.data,this.total=R.total}).add(()=>{this.loading=!1})}clear(R,V){this.rs.get(`${this.type}/${this.id}/alarm/clear`).subscribe(A=>{this.datum.splice(V,1)})}}return ie.\u0275fac=function(R){return new(R||ie)(O.Y36(ee.F0),O.Y36(j.s))},ie.\u0275cmp=O.Xpm({type:ie,selectors:[["app-alarm"]],inputs:{type:"type",id:"id"},decls:16,vars:9,consts:[["noCreate","",3,"loading","refresh","search"],["nzSize","small",3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzQueryParams"],["nzColumnKey","created",3,"nzSortFn"],[4,"ngFor","ngForOf"],[3,"routerLink"],[3,"title"]],template:function(R,V){1&R&&(O.TgZ(0,"app-page-list",0),O.NdJ("refresh",function(){return V.load()})("search",function(P){return V.search(P)}),O.TgZ(1,"nz-table",1),O.NdJ("nzQueryParams",function(P){return V.onQuery(P)}),O.TgZ(2,"thead")(3,"tr")(4,"th"),O._uU(5,"\u9879\u76ee"),O.qZA(),O.TgZ(6,"th"),O._uU(7,"\u8bbe\u5907"),O.qZA(),O.TgZ(8,"th"),O._uU(9,"\u540d\u79f0"),O.qZA(),O.TgZ(10,"th"),O._uU(11,"\u5185\u5bb9"),O.qZA(),O.TgZ(12,"th",2),O._uU(13,"\u65f6\u95f4"),O.qZA()()(),O.TgZ(14,"tbody"),O.YNc(15,K,15,12,"tr",3),O.qZA()()()),2&R&&(O.Q6J("loading",V.loading),O.xp6(1),O.Q6J("nzData",V.datum)("nzFrontPagination",!1)("nzLoading",V.loading)("nzTotal",V.total)("nzPageSize",V.pageSize)("nzPageIndex",V.pageIndex),O.xp6(11),O.Q6J("nzSortFn",!0),O.xp6(3),O.Q6J("ngForOf",V.datum))},directives:[S._,fe.N8,fe.Om,fe.$Z,fe.Uo,fe._C,fe.qD,fe.p0,he.sg,ee.yS],pipes:[se.i,k.d],styles:[""]}),ie})()},3968:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{q:()=>DeviceDetailComponent});var _angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5e3),_angular_router__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(7152),_request_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1445),ng_zorro_antd_modal__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(7957),ng_zorro_antd_tabs__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(868),ng_zorro_antd_collapse__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(5482),ng_zorro_antd_list__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(8186),ng_zorro_antd_switch__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(6462),_angular_forms__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(2382),ng_zorro_antd_grid__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(1894),_angular_common__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(9808),ng_zorro_antd_card__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(7484),ng_zorro_antd_icon__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(647),ng_zorro_antd_core_transition_patch__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(2683),ng_zorro_antd_button__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(6042),ng_zorro_antd_core_wave__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(2643),_device_hmi_device_hmi_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1488),_alarm_alarm_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5045),_event_event_component__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5860),ng_zorro_antd_divider__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(5737),_helper_view_config_directive__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2728),_helper_date_string_pipe__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(7448);function DeviceDetailComponent_div_34_span_4_Template(Gt,ht){if(1&Gt&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()),2&Gt){const J=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw().$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.hij("(",J.unit,")")}}function DeviceDetailComponent_div_34_ng_container_6_Template(Gt,ht){if(1&Gt&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.ynx(0),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.BQk()),2&Gt){const J=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw().$implicit,e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.hij(" ",e.context[J.name]," ")}}function DeviceDetailComponent_div_34_ng_container_7_Template(Gt,ht){if(1&Gt&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.ynx(0),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(2,"number"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.BQk()),2&Gt){const J=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw().$implicit,e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_5__.xi3(2,1,e.context[J.name],"1.0-"+J.precision)," ")}}function DeviceDetailComponent_div_34_Template(Gt,ht){if(1&Gt){const J=_angular_core__WEBPACK_IMPORTED_MODULE_5__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",18)(1,"nz-card")(2,"div",19),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(4,DeviceDetailComponent_div_34_span_4_Template,2,1,"span",20),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(5,"div",21),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(6,DeviceDetailComponent_div_34_ng_container_6_Template,2,1,"ng-container",20),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(7,DeviceDetailComponent_div_34_ng_container_7_Template,3,4,"ng-container",20),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(8,"div",22),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){const ee=_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(J).$implicit;return _angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw().refresh(ee.name)}),_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(9,"i",23),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(10,"div",24),_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(11,"i",25),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()()}if(2&Gt){const J=ht.$implicit,e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("nzSpan",4)("nzXs",12)("nzSm",8)("nzMd",6)("nzLg",4)("nzXl",3)("nzXXl",2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.hij("",J.label," "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf",J.unit),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf","bit"==J.type),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf","bit"!=J.type),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("routerLink","/admin/device/value/"+e.data.id+"/"+J.name)}}function DeviceDetailComponent_div_39_Template(Gt,ht){if(1&Gt){const J=_angular_core__WEBPACK_IMPORTED_MODULE_5__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",26)(1,"nz-card",27),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){const ee=_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(J).$implicit;return _angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw().exec(ee)}),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()}if(2&Gt){const J=ht.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("nzSpan",4)("nzXs",12)("nzSm",8)("nzMd",6)("nzLg",4)("nzXl",3)("nzXXl",2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.hij(" ",J.name," ")}}function DeviceDetailComponent_ng_template_41_Template(Gt,ht){if(1&Gt&&_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(0,"app-device-hmi",28),2&Gt){const J=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("hmi",J.data.hmi)("id",J.id)}}function DeviceDetailComponent_ng_template_43_Template(Gt,ht){if(1&Gt&&_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(0,"app-alarm",29),2&Gt){const J=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("id",J.id)}}function DeviceDetailComponent_ng_template_45_Template(Gt,ht){if(1&Gt&&_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(0,"app-event",29),2&Gt){const J=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("id",J.id)}}function DeviceDetailComponent_ng_template_46_Template(Gt,ht){if(1&Gt){const J=_angular_core__WEBPACK_IMPORTED_MODULE_5__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"a",30),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){return _angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(J),_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw().load()}),_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(1,"i",31),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(2,"nz-divider",32),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(3,"a",33),_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(4,"i",34),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(5,"nz-divider",32),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(6,"a",35),_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(7,"i",36),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()}if(2&Gt){const J=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("nzSpin",J.loading),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("config",J.data),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("routerLink","/admin/device/edit/"+J.id)}}let DeviceDetailComponent=(()=>{class DeviceDetailComponent{constructor(Gt,ht,J){this.router=Gt,this.rs=ht,this.ms=J,this.id=0,this.data={},this.context={},this.loading=!1,this.id=parseInt(Gt.snapshot.params.id),this.load()}ngOnInit(){}load(){this.loading=!0,this.rs.get(`device/${this.id}`).subscribe(Gt=>{this.data=Gt.data,this.loading=!1}),this.loadContext()}loadContext(){this.rs.get(`device/${this.id}/context`).subscribe(Gt=>{this.context=Gt.data})}exec(cmd){let params=[];if(cmd.argc>0){let param=prompt("\u8bf7\u8f93\u5165\u503c\uff0c\u4ee5\u9017\u53f7\u95f4\u9694","");if(!param)return;params=eval(`[${param}]`)}this.rs.post(`device/${this.id}/execute`,{command:cmd.name,parameters:params}).subscribe(Gt=>{})}onEnableChange(Gt){Gt?this.ms.confirm({nzTitle:"\u63d0\u793a",nzContent:"\u786e\u8ba4\u7981\u7528\u5417?",nzOnOk:()=>{this.rs.get(`device/${this.id}/disable`).subscribe(ht=>{})},nzOnCancel:()=>{this.data.disabled=!1}}):this.rs.get(`device/${this.id}/enable`).subscribe(ht=>{})}refresh(Gt){this.rs.get(`device/${this.id}/refresh/${Gt}`).subscribe(ht=>{this.context[Gt]=ht.data})}refreshAll(){this.rs.get(`device/${this.id}/refresh`).subscribe(Gt=>{this.loadContext()})}}return DeviceDetailComponent.\u0275fac=function Gt(ht){return new(ht||DeviceDetailComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y36(_angular_router__WEBPACK_IMPORTED_MODULE_6__.gz),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y36(_request_service__WEBPACK_IMPORTED_MODULE_7__.s),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y36(ng_zorro_antd_modal__WEBPACK_IMPORTED_MODULE_8__.Sf))},DeviceDetailComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_5__.Xpm({type:DeviceDetailComponent,selectors:[["app-device-detail"]],decls:48,vars:16,consts:[[3,"nzTabBarExtraContent"],["nzTitle","\u8bbe\u5907\u8be6\u60c5"],["nzHeader","\u57fa\u7840\u4fe1\u606f","nzActive",""],["nzBordered",""],[3,"routerLink"],[3,"ngModel","ngModelChange"],["nzHeader","\u6570\u636e","nzActive",""],["nz-row","",1,"values",3,"nzGutter"],["class","item","nz-col","",3,"nzSpan","nzXs","nzSm","nzMd","nzLg","nzXl","nzXXl",4,"ngFor","ngForOf"],["nz-button","","nzType","primary",3,"click"],["nzHeader","\u63a7\u5236\u547d\u4ee4","nzActive",""],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan","nzXs","nzSm","nzMd","nzLg","nzXl","nzXXl",4,"ngFor","ngForOf"],["nzTitle","\u7ec4\u6001",3,"nzDisabled"],["nz-tab",""],["nzTitle","\u544a\u8b66\u8bb0\u5f55"],["nzTitle","\u65e5\u5fd7"],["extraTemplate",""],["nz-col","",1,"item",3,"nzSpan","nzXs","nzSm","nzMd","nzLg","nzXl","nzXXl"],[1,"label"],[4,"ngIf"],[1,"value"],["title","\u5237\u65b0",1,"refresh",3,"click"],["nz-icon","","nzType","sync","nzTheme","outline"],["title","\u5386\u53f2",1,"history",3,"routerLink"],["nz-icon","","nzType","line-chart","nzTheme","outline"],["nz-col","",3,"nzSpan","nzXs","nzSm","nzMd","nzLg","nzXl","nzXXl"],[3,"click"],[3,"hmi","id"],["type","device",3,"id"],["title","\u5237\u65b0",3,"click"],["nz-icon","","nzType","reload",3,"nzSpin"],["nzType","vertical"],["title","\u539f\u59cb\u6570\u636e","appViewConfig","",3,"config"],["nz-icon","","nzType","profile"],["title","\u7f16\u8f91",3,"routerLink"],["nz-icon","","nzType","form"]],template:function Gt(ht,J){if(1&ht&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"nz-tabset",0)(1,"nz-tab",1)(2,"nz-collapse")(3,"nz-collapse-panel",2)(4,"nz-list",3)(5,"nz-list-item")(6,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(7,"\u540d\u79f0"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(8),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(9,"nz-list-item")(10,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(11,"\u4ea7\u54c1"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(12,"a",4),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(13),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(14,"nz-list-item")(15,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(16,"\u901a\u9053"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(17,"a",4),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(18),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(19,"nz-list-item")(20,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(21,"\u72b6\u6001"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(22),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(23,"nz-list-item")(24,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(25,"\u7981\u7528"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(26,"nz-switch",5),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(O){return J.onEnableChange(O)}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(27,"nz-list-item")(28,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(29,"\u521b\u5efa\u65f6\u95f4"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(30),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(31,"dateString"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(32,"nz-collapse-panel",6)(33,"div",7),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(34,DeviceDetailComponent_div_34_Template,12,12,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(35,"button",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){return J.refreshAll()}),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(36,"\u5237\u65b0\u5168\u90e8\u6570\u636e"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(37,"nz-collapse-panel",10)(38,"div",11),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(39,DeviceDetailComponent_div_39_Template,3,8,"div",12),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(40,"nz-tab",13),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(41,DeviceDetailComponent_ng_template_41_Template,1,2,"ng-template",14),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(42,"nz-tab",15),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(43,DeviceDetailComponent_ng_template_43_Template,1,1,"ng-template",14),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(44,"nz-tab",16),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(45,DeviceDetailComponent_ng_template_45_Template,1,1,"ng-template",14),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(46,DeviceDetailComponent_ng_template_46_Template,8,3,"ng-template",null,17,_angular_core__WEBPACK_IMPORTED_MODULE_5__.W1O)),2&ht){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.MAs(47);_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("nzTabBarExtraContent",e),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(8),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(J.data.name),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("routerLink","/admin/product/detail/"+J.data.product_id),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(J.data.product),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("routerLink","/admin/tunnel/detail/"+J.data.tunnel_id),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(J.data.tunnel||J.data.tunnel_id),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(J.data.running?"\u542f\u52a8":"\u79bb\u7ebf"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngModel",J.data.disabled),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_5__.lcZ(31,14,J.data.created)),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("nzGutter",10),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngForOf",J.data.points),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("nzGutter",10),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngForOf",J.data.commands),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("nzDisabled",!J.data.hmi)}},directives:[ng_zorro_antd_tabs__WEBPACK_IMPORTED_MODULE_9__.xH,ng_zorro_antd_tabs__WEBPACK_IMPORTED_MODULE_9__.xw,ng_zorro_antd_collapse__WEBPACK_IMPORTED_MODULE_10__.yH,ng_zorro_antd_collapse__WEBPACK_IMPORTED_MODULE_10__.Zv,ng_zorro_antd_list__WEBPACK_IMPORTED_MODULE_11__.n_,ng_zorro_antd_list__WEBPACK_IMPORTED_MODULE_11__.AA,_angular_router__WEBPACK_IMPORTED_MODULE_6__.yS,ng_zorro_antd_switch__WEBPACK_IMPORTED_MODULE_12__.i,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.JJ,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.On,ng_zorro_antd_grid__WEBPACK_IMPORTED_MODULE_14__.SK,_angular_common__WEBPACK_IMPORTED_MODULE_15__.sg,ng_zorro_antd_grid__WEBPACK_IMPORTED_MODULE_14__.t3,ng_zorro_antd_card__WEBPACK_IMPORTED_MODULE_16__.bd,_angular_common__WEBPACK_IMPORTED_MODULE_15__.O5,ng_zorro_antd_icon__WEBPACK_IMPORTED_MODULE_17__.Ls,ng_zorro_antd_core_transition_patch__WEBPACK_IMPORTED_MODULE_18__.w,_angular_router__WEBPACK_IMPORTED_MODULE_6__.rH,ng_zorro_antd_button__WEBPACK_IMPORTED_MODULE_19__.ix,ng_zorro_antd_core_wave__WEBPACK_IMPORTED_MODULE_20__.dQ,ng_zorro_antd_tabs__WEBPACK_IMPORTED_MODULE_9__.cj,_device_hmi_device_hmi_component__WEBPACK_IMPORTED_MODULE_0__.o,_alarm_alarm_component__WEBPACK_IMPORTED_MODULE_1__.f,_event_event_component__WEBPACK_IMPORTED_MODULE_2__.B,ng_zorro_antd_divider__WEBPACK_IMPORTED_MODULE_21__.g,_helper_view_config_directive__WEBPACK_IMPORTED_MODULE_3__.Z],pipes:[_helper_date_string_pipe__WEBPACK_IMPORTED_MODULE_4__.i,_angular_common__WEBPACK_IMPORTED_MODULE_15__.JJ],styles:[".values[_ngcontent-%COMP%]{position:relative}.values[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{margin:5px 0}.values[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#7f7f7f;font-size:.9em}.values[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.2em}.values[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]{position:absolute;padding:10px;right:0;bottom:0;color:#d9d9d9}.values[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#666}.values[_ngcontent-%COMP%]   .history[_ngcontent-%COMP%]{position:absolute;padding:10px;right:0;top:0;color:#d9d9d9}.values[_ngcontent-%COMP%]   .history[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#666}"]}),DeviceDetailComponent})()},1488:(Gt,ht,J)=>{"use strict";J.d(ht,{o:()=>fe});var e=J(2340),O=J(5e3),ee=J(9727),j=J(1445),S=J(3973);let fe=(()=>{class he{constructor(k,K){this.ms=k,this.rs=K,this.hmi="",this.id=0,this.data={},this.values={}}ngOnInit(){this.load(),this.watch()}ngOnDestroy(){var k;null===(k=this.ws)||void 0===k||k.close()}load(){this.rs.get(`hmi/${this.hmi}`).subscribe(k=>{this.data=k.data})}watch(){const k=e.N.production?location.origin.replace(/^http/,"ws"):"ws://localhost:8080";this.ws=new WebSocket(`${k}/api/device/${this.id}/watch`),this.ws.onmessage=K=>{console.log("websocket onmessage",K.data);const ne=JSON.parse(K.data);switch(ne.event){case"error":this.ms.error(ne.data);break;case"data":this.values=ne.data}},this.ws.onerror=K=>{console.log("websocket onerror",K)},this.ws.onclose=K=>{console.log("websocket onclose",K)}}invoke(k){console.log("invoke",k),this.rs.post(`device/${this.id}/execute`,k).subscribe(K=>{this.data=K.data})}bind(k){console.log("bind",k),this.rs.post(`device/${this.id}/context`,k).subscribe(K=>{this.data=K.data})}}return he.\u0275fac=function(k){return new(k||he)(O.Y36(ee.dD),O.Y36(j.s))},he.\u0275cmp=O.Xpm({type:he,selectors:[["app-device-hmi"]],inputs:{hmi:"hmi",id:"id"},decls:1,vars:2,consts:[[3,"hmi","values","invoke","bind"]],template:function(k,K){1&k&&(O.TgZ(0,"hmi-viewer",0),O.NdJ("invoke",function(ie){return K.invoke(ie)})("bind",function(ie){return K.bind(ie)}),O.qZA()),2&k&&O.Q6J("hmi",K.data)("values",K.values)},directives:[S.B],styles:[""]}),he})()},5860:(Gt,ht,J)=>{"use strict";J.d(ht,{B:()=>ne});var e=J(8090),O=J(5e3),ee=J(7152),j=J(1445),S=J(9279),fe=J(592),he=J(9808),se=J(7448),k=J(1485);function K(ie,re){if(1&ie&&(O.TgZ(0,"tr")(1,"td"),O._uU(2),O.qZA(),O.TgZ(3,"td",5),O.ALo(4,"dateString"),O._uU(5),O.ALo(6,"fromNow"),O.qZA()()),2&ie){const R=re.$implicit;O.xp6(2),O.Oqu(R.event),O.xp6(1),O.Q6J("title",O.lcZ(4,3,R.created)),O.xp6(2),O.Oqu(O.lcZ(6,5,R.created))}}let ne=(()=>{class ie{constructor(R,V){this.router=R,this.rs=V,this.type="",this.id=0,this.datum=[],this.loading=!1,this.total=1,this.pageSize=20,this.pageIndex=1,this.params={filter:{}}}ngOnInit(){}search(R){this.pageIndex=1,this.params.skip=0,R?this.params.keyword={event:R}:delete this.params.keyword,this.load()}onQuery(R){(0,e.F)(R,this.params),this.load()}load(){this.loading=!0,this.params.filter.target_id=this.id,this.params.filter.target=this.type,this.rs.post("event/list",this.params).subscribe(R=>{console.log("res",R),this.datum=R.data,this.total=R.total}).add(()=>{this.loading=!1})}clear(R,V){this.rs.get("event/clear").subscribe(A=>{this.datum.splice(V,1)})}}return ie.\u0275fac=function(R){return new(R||ie)(O.Y36(ee.F0),O.Y36(j.s))},ie.\u0275cmp=O.Xpm({type:ie,selectors:[["app-event"]],inputs:{type:"type",id:"id"},decls:10,vars:10,consts:[["noCreate","",3,"loading","refresh","search"],["nzSize","small",3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzQueryParams"],["nzColumnKey","event",3,"nzSortFn"],["nzColumnKey","created",3,"nzSortFn"],[4,"ngFor","ngForOf"],[3,"title"]],template:function(R,V){1&R&&(O.TgZ(0,"app-page-list",0),O.NdJ("refresh",function(){return V.load()})("search",function(P){return V.search(P)}),O.TgZ(1,"nz-table",1),O.NdJ("nzQueryParams",function(P){return V.onQuery(P)}),O.TgZ(2,"thead")(3,"tr")(4,"th",2),O._uU(5,"\u4e8b\u4ef6"),O.qZA(),O.TgZ(6,"th",3),O._uU(7,"\u65f6\u95f4"),O.qZA()()(),O.TgZ(8,"tbody"),O.YNc(9,K,7,7,"tr",4),O.qZA()()()),2&R&&(O.Q6J("loading",V.loading),O.xp6(1),O.Q6J("nzData",V.datum)("nzFrontPagination",!1)("nzLoading",V.loading)("nzTotal",V.total)("nzPageSize",V.pageSize)("nzPageIndex",V.pageIndex),O.xp6(3),O.Q6J("nzSortFn",!0),O.xp6(2),O.Q6J("nzSortFn",!0),O.xp6(3),O.Q6J("ngForOf",V.datum))},directives:[S._,fe.N8,fe.Om,fe.$Z,fe.Uo,fe._C,fe.qD,fe.p0,he.sg],pipes:[se.i,k.d],styles:[""]}),ie})()},8090:(Gt,ht,J)=>{"use strict";function e(O,ee){ee.filter={},O.filter.forEach(S=>{ee.filter[S.key]=S.value}),ee.skip=(O.pageIndex-1)*O.pageSize,ee.limit=O.pageSize;const j=O.sort.filter(S=>S.value);j.length?(ee.sort={},j.forEach(S=>{ee.sort[S.key]="ascend"===S.value?1:-1})):delete ee.sort}J.d(ht,{F:()=>e})},5863:(Gt,ht,J)=>{"use strict";J.d(ht,{G:()=>he});var e=J(5e3),O=J(2382),ee=J(5435),S=J(3868),fe=J(8550);let he=(()=>{class se{constructor(){this.options={lineNumbers:!0,theme:"material",mode:"yaml",readOnly:!1},this.onChanged=()=>{},this.onTouched=()=>{},this._config=""}set readOnly(K){this.options.readOnly=K}get config(){return this._config}set config(K){this._config=K,this.onChanged(ee.parse(K)),this.onTouched()}parse(K){let ne={};switch(this.options.mode){case"yaml":ne=ee.parse(K);break;case"javascript":ne=JSON.parse(K)}return ne}stringify(K){let ne="";switch(this.options.mode){case"yaml":ne=ee.stringify(K);break;case"javascript":ne=JSON.stringify(K,void 0,"\t")}return ne}get lang(){return"yaml"}set lang(K){if(this.options.mode===K)return;let ne=this.parse(this._config);this.options.mode=K,this._config=this.stringify(ne)}ngOnInit(){}registerOnChange(K){this.onChanged=K}registerOnTouched(K){this.onTouched=K}writeValue(K){this._config=ee.stringify(K)}}return se.\u0275fac=function(K){return new(K||se)},se.\u0275cmp=e.Xpm({type:se,selectors:[["app-config-editor"]],inputs:{readOnly:"readOnly",lang:"lang"},features:[e._Bn([{provide:O.JU,useExisting:(0,e.Gpc)(()=>se),multi:!0}])],decls:6,vars:3,consts:[[3,"ngModel","ngModelChange"],["nz-radio-button","","nzValue","yaml"],["nz-radio-button","","nzValue","javascript"],[3,"ngModel","options","ngModelChange"]],template:function(K,ne){1&K&&(e.TgZ(0,"nz-radio-group",0),e.NdJ("ngModelChange",function(re){return ne.lang=re}),e.TgZ(1,"label",1),e._uU(2,"YAML"),e.qZA(),e.TgZ(3,"label",2),e._uU(4,"JSON"),e.qZA()(),e.TgZ(5,"ngx-codemirror",3),e.NdJ("ngModelChange",function(re){return ne.config=re}),e.qZA()),2&K&&(e.Q6J("ngModel",ne.lang),e.xp6(5),e.Q6J("ngModel",ne.config)("options",ne.options))},directives:[S.Dg,O.JJ,O.On,S.Of,S.Bq,fe.C],styles:[""]}),se})()},7448:(Gt,ht,J)=>{"use strict";J.d(ht,{i:()=>j});var e=J(1764),ee=J(5e3);let j=(()=>{class S{transform(he,se){return e(he).format(se||"YYYY-MM-DD HH:mm:ss")}}return S.\u0275fac=function(he){return new(he||S)},S.\u0275pipe=ee.Yjl({name:"dateString",type:S,pure:!0}),S})()},1485:(Gt,ht,J)=>{"use strict";J.d(ht,{d:()=>se});var e=J(1764),ee=J(2243),he=(J(7638),J(5e3));e.locale("zh-cn"),e.extend(ee);let se=(()=>{class k{transform(ne){let ie=e(ne);return e().diff(ie,"day")<7?ie.fromNow():ie.format("YYYY-MM-DD HH:mm:ss")}}return k.\u0275fac=function(ne){return new(ne||k)},k.\u0275pipe=he.Yjl({name:"fromNow",type:k,pure:!0}),k})()},9279:(Gt,ht,J)=>{"use strict";J.d(ht,{_:()=>Z});var e=J(5e3),O=J(9987),ee=J(2382),j=J(8144),S=J(6042),fe=J(2643),he=J(2683),se=J(647),k=J(1047),K=J(9808);function ne(U,Y){if(1&U){const B=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){return e.CHM(B),e.oxw().refresh.emit()}),e._UZ(1,"i",8),e._uU(2," \u5237\u65b0 "),e.qZA()}if(2&U){const B=e.oxw();e.Q6J("nzLoading",B.loading)}}function ie(U,Y){if(1&U){const B=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){return e.CHM(B),e.oxw().create.emit()}),e._UZ(1,"i",10),e._uU(2),e.qZA()}if(2&U){const B=e.oxw();e.Q6J("hidden",!1!==B.noCreate),e.xp6(2),e.hij(" ",B.createButtonText," ")}}const re=function(){return{standalone:!0}};function R(U,Y){if(1&U){const B=e.EpF();e.TgZ(0,"nz-input-group",11)(1,"input",12),e.NdJ("ngModelChange",function(W){return e.CHM(B),e.oxw().keyword=W}),e.qZA()()}if(2&U){const B=e.oxw(),q=e.MAs(6),W=e.MAs(8);e.Q6J("nzAddOnAfter",q)("hidden",!1!==B.noSearch)("nzSuffix",W),e.xp6(1),e.Q6J("ngModel",B.keyword)("ngModelOptions",e.DdM(5,re))}}function V(U,Y){if(1&U){const B=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(B);const W=e.oxw();return W.search.emit(W.keyword)}),e._uU(1," \u641c\u7d22 "),e.qZA()}}function A(U,Y){if(1&U){const B=e.EpF();e.TgZ(0,"i",15),e.NdJ("click",function(){e.CHM(B);const W=e.oxw(2);return W.keyword="",W.search.emit(W.keyword)}),e.qZA()}}function P(U,Y){if(1&U&&e.YNc(0,A,1,0,"i",14),2&U){const B=e.oxw();e.Q6J("ngIf",B.keyword)}}const I=[[["",8,"right"]],"*"],H=[".right","*"];let Z=(()=>{class U{constructor(){this.search=new e.vpe,this.refresh=new e.vpe,this.create=new e.vpe,this.loading=!1,this.noCreate=!1,this.createButtonText="\u65b0\u5efa",this.noSearch=!1,this.keyword=""}ngOnInit(){}}return U.\u0275fac=function(B){return new(B||U)},U.\u0275cmp=e.Xpm({type:U,selectors:[["app-page-list"]],inputs:{loading:"loading",noCreate:"noCreate",createButtonText:"createButtonText",noSearch:"noSearch"},outputs:{search:"search",refresh:"refresh",create:"create"},ngContentSelectors:H,decls:12,vars:0,consts:[["nz-space","",3,"submit"],["type","button","nz-button","","nzType","primary",3,"nzLoading","click",4,"nzSpaceItem"],["type","button","nz-button","","nzType","primary",3,"hidden","click",4,"nzSpaceItem"],["nzSearch","","nzPrefixIcon","search",3,"nzAddOnAfter","hidden","nzSuffix",4,"nzSpaceItem"],["suffixIconButton",""],["suffixIconClear",""],[2,"float","right"],["type","button","nz-button","","nzType","primary",3,"nzLoading","click"],["nz-icon","","nzType","reload"],["type","button","nz-button","","nzType","primary",3,"hidden","click"],["nz-icon","","nzType","plus"],["nzSearch","","nzPrefixIcon","search",3,"nzAddOnAfter","hidden","nzSuffix"],["type","text","nz-input","","placeholder","\u5173\u952e\u5b57",3,"ngModel","ngModelOptions","ngModelChange"],["type","button","nz-button","","nzType","primary","nzSearch","",3,"click"],["nz-icon","","nzType","close",3,"click",4,"ngIf"],["nz-icon","","nzType","close",3,"click"]],template:function(B,q){1&B&&(e.F$t(I),e.TgZ(0,"app-toolbar")(1,"form",0),e.NdJ("submit",function(){return q.search.emit(q.keyword)}),e.YNc(2,ne,3,1,"button",1),e.YNc(3,ie,3,2,"button",2),e.YNc(4,R,2,6,"nz-input-group",3),e.YNc(5,V,2,0,"ng-template",null,4,e.W1O),e.YNc(7,P,1,1,"ng-template",null,5,e.W1O),e.qZA(),e.TgZ(9,"span",6),e.Hsn(10),e.qZA()(),e.Hsn(11,1))},directives:[O.n,ee._Y,ee.JL,ee.F,j.NU,j.$1,S.ix,fe.dQ,he.w,se.Ls,k.gB,k.ke,k.Zp,ee.Fj,ee.JJ,ee.On,K.O5],styles:[""]}),U})()},9987:(Gt,ht,J)=>{"use strict";J.d(ht,{n:()=>ee});var e=J(5e3);const O=["*"];let ee=(()=>{class j{constructor(){}ngOnInit(){}}return j.\u0275fac=function(fe){return new(fe||j)},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-toolbar"]],ngContentSelectors:O,decls:1,vars:0,template:function(fe,he){1&fe&&(e.F$t(),e.Hsn(0))},styles:["[_nghost-%COMP%]{display:block;margin:12px 0 16px}"]}),j})()},2728:(Gt,ht,J)=>{"use strict";J.d(ht,{Z:()=>fe});var e=J(5e3),O=J(5863),ee=J(2382);let j=(()=>{class he{constructor(){this.config={}}ngOnInit(){}}return he.\u0275fac=function(k){return new(k||he)},he.\u0275cmp=e.Xpm({type:he,selectors:[["app-config-viewer"]],inputs:{config:"config"},decls:1,vars:2,consts:[[3,"ngModel","readOnly"]],template:function(k,K){1&k&&e._UZ(0,"app-config-editor",0),2&k&&e.Q6J("ngModel",K.config)("readOnly",!0)},directives:[O.G,ee.JJ,ee.On],styles:[""]}),he})();var S=J(7957);let fe=(()=>{class he{constructor(k){this.ms=k,this.config={}}view(){this.ms.create({nzTitle:"\u67e5\u770b\u914d\u7f6e",nzContent:j,nzWidth:"80%",nzComponentParams:{config:this.config}})}}return he.\u0275fac=function(k){return new(k||he)(e.Y36(S.Sf))},he.\u0275dir=e.lG2({type:he,selectors:[["","appViewConfig",""]],hostBindings:function(k,K){1&k&&e.NdJ("click",function(){return K.view()})},inputs:{config:"config"}}),he})()},579:(Gt,ht,J)=>{"use strict";J.d(ht,{x5:()=>Ze,j4:()=>M});let e={id:"line",name:"\u76f4\u7ebf",icon:"/assets/hmi/line.svg",group:"\u57fa\u7840\u7ec4\u4ef6",drawer:"line",color:!1,stroke:!0,rotation:!1,position:!1,properties:[{label:"x1",name:"x1",type:"number"},{label:"y1",name:"y1",type:"number"},{label:"x2",name:"x2",type:"number"},{label:"y2",name:"y2",type:"number"}],create(){this.element=this.$container.line()},setup(Ce){let Se=this.$properties;(Ce.hasOwnProperty("color")||Ce.hasOwnProperty("stroke"))&&this.element.stroke({color:Se.color,width:Se.stroke}),(Ce.hasOwnProperty("x1")||Ce.hasOwnProperty("y1")||Ce.hasOwnProperty("x2")||Ce.hasOwnProperty("y2"))&&this.element.plot(Se.x1,Se.y1,Se.x2,Se.y2)}},O={id:"circle",name:"\u5706\u5f62",icon:"/assets/hmi/circle.svg",group:"\u57fa\u7840\u7ec4\u4ef6",drawer:"circle",color:!0,stroke:!0,rotation:!1,position:!1,properties:[{label:"X",name:"x",type:"number"},{label:"Y",name:"y",type:"number"},{label:"\u534a\u5f84",name:"radius",type:"number"}],create(){this.element=this.$container.circle(this.$properties.radius)},setup(Ce){let Se=this.$properties;Ce.hasOwnProperty("fill")&&this.element.fill(Se.fill),(Ce.hasOwnProperty("color")||Ce.hasOwnProperty("stroke"))&&this.element.stroke({color:Se.color,width:Se.stroke}),Ce.hasOwnProperty("radius")&&this.element.radius(Se.radius),(Ce.hasOwnProperty("x")||Ce.hasOwnProperty("y"))&&this.element.center(Se.x,Se.y)}},ee={id:"polyline",name:"\u6298\u7ebf",icon:"/assets/hmi/polyline.svg",group:"\u57fa\u7840\u7ec4\u4ef6",drawer:"poly",color:!1,stroke:!0,rotation:!1,position:!1,create(){this.element=this.$container.polyline().fill("none")},setup(Ce){let Se=this.$properties;(Ce.hasOwnProperty("color")||Ce.hasOwnProperty("stroke"))&&this.element.stroke({color:Se.color,width:Se.stroke}),Ce.hasOwnProperty("points")&&this.element.plot(Se.points)}},j={id:"polygon",name:"\u6298\u7ebf",icon:"/assets/hmi/polygon.svg",group:"\u57fa\u7840\u7ec4\u4ef6",drawer:"poly",color:!0,stroke:!0,rotation:!1,position:!1,create(){this.element=this.$container.polygon()},setup(Ce){let Se=this.$properties;Ce.hasOwnProperty("fill")&&this.element.fill(Se.fill),(Ce.hasOwnProperty("color")||Ce.hasOwnProperty("stroke"))&&this.element.stroke({color:Se.color,width:Se.stroke}),Ce.hasOwnProperty("points")&&this.element.plot(Se.points)}},S={id:"rect",name:"\u77e9\u5f62",icon:"/assets/hmi/rect.svg",group:"\u57fa\u7840\u7ec4\u4ef6",drawer:"rect",color:!0,stroke:!0,create(){this.element=this.$container.rect(this.$properties.width,this.$properties.height)},setup(Ce){let Se=this.$properties;Ce.hasOwnProperty("fill")&&this.element.fill(Se.fill),(Ce.hasOwnProperty("color")||Ce.hasOwnProperty("stroke"))&&this.element.stroke({color:Se.color,width:Se.stroke}),(Ce.hasOwnProperty("width")||Ce.hasOwnProperty("height"))&&this.element.size(Se.width,Se.height)}},fe={id:"ellipse",name:"\u692d\u5706",icon:"/assets/hmi/ellipse.svg",group:"\u57fa\u7840\u7ec4\u4ef6",drawer:"rect",color:!0,stroke:!0,create(){this.element=this.$container.ellipse(this.$properties.width,this.$properties.height)},setup(Ce){let Se=this.$properties;Ce.hasOwnProperty("fill")&&this.element.fill(Se.fill),(Ce.hasOwnProperty("color")||Ce.hasOwnProperty("stroke"))&&this.element.stroke({color:Se.color,width:Se.stroke}),(Ce.hasOwnProperty("width")||Ce.hasOwnProperty("height"))&&this.element.size(Se.width,Se.height)}};var he=J(7353);let se={id:"text",name:"\u6587\u672c",icon:"/assets/hmi/text.svg",group:"\u57fa\u7840\u7ec4\u4ef6",drawer:"rect",color:!0,properties:[{label:"\u6587\u5b57",name:"text",type:"text",default:"\u6587\u5b57"},...he.mS],create(){this.element=this.$container.text(this.$properties.text||"\u6587\u672c")},setup(Ce){let Se=this.$properties;Ce.hasOwnProperty("text")&&this.element.text(Se.text),Ce.hasOwnProperty("fill")&&this.element.fill(Se.fill),(Ce.hasOwnProperty("width")||Ce.hasOwnProperty("height"))&&this.element.size(Se.width,Se.height)}},k={id:"image",name:"\u56fe\u50cf",icon:"/assets/hmi/image.svg",group:"\u57fa\u7840\u7ec4\u4ef6",drawer:"rect",properties:[{label:"URL",name:"url",type:"attachment"}],create(){this.element=this.$container.image().load(this.$properties.url||"/assets/hmi/image.svg")},setup(Ce){let Se=this.$properties;(Ce.hasOwnProperty("width")||Ce.hasOwnProperty("height"))&&this.element.size(Se.width,Se.height),Ce.hasOwnProperty("url")&&this.element.load(Se.url)}},K={id:"button",name:"\u6309\u94ae",group:"\u63a7\u4ef6",icon:"/assets/hmi/button.svg",drawer:"rect",properties:[{label:"\u6587\u5b57",name:"text",type:"text",default:"\u6309\u94ae"},{label:"\u989c\u8272",name:"color",type:"color",default:"#fff"},{label:"\u80cc\u666f",name:"back",type:"color",default:"#8BBB11"},{label:"\u8fb9\u6846\u8272",name:"fill",type:"color",default:"#ccc"},{label:"\u5706\u89d2",name:"radius",type:"number",default:20},{label:"\u8fb9\u6846",name:"stroke",type:"number",default:10},...he.mS],events:[{label:"\u70b9\u51fb",name:"click"}],create(){this.rect=this.$container.rect(),this.back=this.$container.rect(),this.text=this.$container.text(this.$properties.text)},start(){this.rect.on("click",()=>{this.$emit("click")})},setup(Ce){let Se=this.$properties;Ce.hasOwnProperty("text")&&this.text.text(Se.text),Ce.hasOwnProperty("color")&&this.text.fill(Se.color),Ce.hasOwnProperty("back")&&this.back.fill(Se.back),Ce.hasOwnProperty("fill")&&this.rect.fill(Se.fill),(Ce.hasOwnProperty("radius")||Ce.hasOwnProperty("stroke")||Ce.hasOwnProperty("width")||Ce.hasOwnProperty("height"))&&(this.rect.radius(Se.radius).size(Se.width,Se.height).move(Se.x,Se.y),this.back.radius(Se.radius).size(Se.width-2*Se.stroke,Se.height-2*Se.stroke).cx(Se.x+Se.width/2).cy(Se.y+Se.height/2),this.text.center(Se.x+Se.width/2,Se.y+Se.height/2)),Ce.hasOwnProperty("font")&&this.text.font({family:Se.font}),Ce.hasOwnProperty("fontsize")&&this.text.font({size:Se.fontsize}),Ce.hasOwnProperty("bold")&&this.text.font({weight:Se.bold?"bold":"normal"})},update(Ce){}},ne={id:"input",name:"\u8f93\u5165\u6846",icon:"/assets/hmi/input.svg",group:"\u63a7\u4ef6",drawer:"rect",properties:[{label:"\u989c\u8272",name:"color",type:"color",default:"#fff"},{label:"\u80cc\u666f",name:"fill",type:"color",default:"#8BBB11"},{label:"\u7c7b\u578b",name:"type",type:"select",options:[{value:"text",label:"\u6587\u672c"},{value:"number",label:"\u6570\u503c"},{value:"integer",label:"\u6574\u6570"}],default:"text"},{label:"\u5185\u5bb9\u63d0\u793a",name:"placeholder",type:"text",default:"\u8f93\u5165\u6846"},...he.mS],events:[{name:"click",label:"\u70b9\u51fb"},{name:"change",label:"\u53d8\u5316"}],values:[{name:"value",label:"\u5185\u5bb9"}],create(){let Ce=this.$properties;this.element=this.$container.foreignObject();let Se=document.createElement("input");Se.setAttribute("type",Ce.type),Se.setAttribute("placeholder","\u8f93\u5165\u6846"),Se.setAttribute("style","width:100%; height:100%;background-color:black;"),Se.onchange=rt=>{console.log("input change",rt)},this.input=Se,this.element.node.appendChild(Se)},setup(Ce){let Se=this.$properties;Ce.hasOwnProperty("color")&&this.input.setAttribute("style","width:100%; height:100%;color:"+Ce.color+";"),Ce.hasOwnProperty("fill")&&this.input.setAttribute("style","width:100%; height:100%;background-color:"+Ce.fill+";"),Ce.hasOwnProperty("type")&&this.input.setAttribute("type",Se.type),Ce.hasOwnProperty("placeholder")&&this.input.setAttribute("placeholder",Se.placeholder),(Ce.hasOwnProperty("width")||Ce.hasOwnProperty("height"))&&this.element.size(Se.width,Se.height)},update(Ce){}},ie={id:"switch",name:"\u5f00\u5173",icon:"/assets/hmi/switch.svg",group:"\u63a7\u4ef6",properties:[{label:"\u989c\u8272",name:"color",type:"color",default:"#8BBB11"},{label:"\u80cc\u666f",name:"back",type:"color",default:"#666"},{label:"\u8fb9\u6846\u8272",name:"fill",type:"color",default:"#ccc"},{label:"\u8fb9\u6846",name:"stroke",type:"number",default:10}],events:[{label:"\u70b9\u51fb",name:"click"},{label:"\u53d8\u5316",name:"change"}],values:[{label:"\u503c",name:"value"}],create(){this.rect=this.$container.rect(),this.back=this.$container.rect(),this.cell=this.$container.circle(0)},setup(Ce){let Se=this.$properties,rt=Se.height/2;Ce.hasOwnProperty("color")&&this.cell.fill(Se.color),Ce.hasOwnProperty("back")&&this.back.fill(Se.back),Ce.hasOwnProperty("fill")&&this.rect.fill(Se.fill),(Ce.hasOwnProperty("stroke")||Ce.hasOwnProperty("width")||Ce.hasOwnProperty("height"))&&(this.rect.radius(rt).size(Se.width,Se.height).move(Se.x,Se.y),this.back.radius(rt-Se.stroke).size(Se.width-2*Se.stroke,Se.height-2*Se.stroke).cx(Se.x+Se.width/2).cy(Se.y+Se.height/2),this.cell.radius(rt-1.5*Se.stroke).cx(Se.x+rt).cy(Se.y+Se.height/2))},update(Ce){}},re={id:"slider",name:"\u6ed1\u5757",icon:"/assets/hmi/slider.svg",group:"\u63a7\u4ef6",properties:[{label:"\u989c\u8272",name:"color",type:"color",default:"#8BBB11"},{label:"\u80cc\u666f",name:"fill",type:"color",default:"#fff"}],events:[{label:"\u70b9\u51fb",name:"click"},{label:"\u53d8\u5316",name:"change"}],values:[{label:"\u503c",name:"value"}],create(){this.rect=this.$container.rect(),this.cell=this.$container.circle(0)},setup(Ce){let Se=this.$properties,rt=Se.height/4,ct=Se.height/2;Ce.hasOwnProperty("color")&&this.cell.fill(Se.color),Ce.hasOwnProperty("fill")&&this.rect.fill(Se.fill),(Ce.hasOwnProperty("stroke")||Ce.hasOwnProperty("width")||Ce.hasOwnProperty("height"))&&(this.rect.radius(rt).size(Se.width,Se.height/2).x(Se.x).cy(Se.y+Se.height/2),this.cell.radius(ct).cx(Se.x+rt+ct).cy(Se.y+Se.height/2))}},R={id:"value",name:"\u6570\u503c",group:"\u63a7\u4ef6",icon:"/assets/hmi/value.svg",drawer:"rect",properties:[{label:"\u524d\u7f00",name:"prefix",type:"text",default:""},{label:"\u540e\u7f00",name:"suffix",type:"text",default:""},{label:"\u989c\u8272",name:"color",type:"color",default:"#fff"},{label:"\u80cc\u666f",name:"back",type:"color",default:"#8BBB11"},{label:"\u8fb9\u6846\u8272",name:"fill",type:"color",default:"#ccc"},{label:"\u5706\u89d2",name:"radius",type:"number",default:0},{label:"\u8fb9\u6846",name:"stroke",type:"number",default:5},...he.mS],events:[{label:"\u70b9\u51fb",name:"click"},{label:"\u53d8\u5316",name:"change"}],values:[{label:"\u503c",name:"value"}],create(){this.rect=this.$container.rect(),this.back=this.$container.rect(),this.text=this.$container.text("123")},setup(Ce){let Se=this.$properties;(Ce.hasOwnProperty("prefix")||Ce.hasOwnProperty("suffix"))&&this.text.text(Se.prefix+"123"+Se.suffix),Ce.hasOwnProperty("color")&&this.text.fill(Se.color),Ce.hasOwnProperty("back")&&this.back.fill(Se.back),Ce.hasOwnProperty("fill")&&this.rect.fill(Se.fill),(Ce.hasOwnProperty("radius")||Ce.hasOwnProperty("stroke")||Ce.hasOwnProperty("width")||Ce.hasOwnProperty("height"))&&(this.rect.radius(Se.radius).size(Se.width,Se.height).move(Se.x,Se.y),this.back.radius(Se.radius).size(Se.width-2*Se.stroke,Se.height-2*Se.stroke).cx(Se.x+Se.width/2).cy(Se.y+Se.height/2),this.text.center(Se.x+Se.width/2,Se.y+Se.height/2)),Ce.hasOwnProperty("font")&&this.text.font({family:Se.font}),Ce.hasOwnProperty("fontsize")&&this.text.font({size:Se.fontsize}),Ce.hasOwnProperty("bold")&&this.text.font({weight:Se.bold?"bold":"normal"})},update(Ce){let Se=this.$properties;Ce.hasOwnProperty("value")&&this.text.text(Se.prefix+Ce.value+Se.suffix)}},V={id:"can",name:"\u6c34\u7f50",icon:"/assets/hmi/can.svg",group:"\u5de5\u4e1a",properties:[{label:"\u989c\u8272",name:"color",type:"color",default:"#8BBB11"},{label:"\u80cc\u666f",name:"back",type:"color",default:"#666"},{label:"\u8fb9\u6846\u8272",name:"fill",type:"color",default:"#ccc"},{label:"\u8fb9\u6846",name:"stroke",type:"number",default:10}],values:[{name:"value",label:"\u5185\u5bb9"}],create(){this.rect=this.$container.rect(),this.back=this.$container.rect(),this.clipCell=this.$container.rect().size("100%","100%"),this.cell=this.$container.rect()},setup(Ce){let Se=this.$properties,rt=Se.width/2;Ce.hasOwnProperty("color")&&this.cell.fill(Se.color),Ce.hasOwnProperty("back")&&this.back.fill(Se.back),Ce.hasOwnProperty("fill")&&this.rect.fill(Se.fill),(Ce.hasOwnProperty("stroke")||Ce.hasOwnProperty("width")||Ce.hasOwnProperty("height"))&&(this.rect.radius(rt).size(Se.width,Se.height).move(Se.x,Se.y),this.back.radius(rt-Se.stroke).size(Se.width-2*Se.stroke,Se.height-2*Se.stroke).cx(Se.x+Se.width/2).cy(Se.y+Se.height/2),this.cell.radius(rt-Se.stroke).size(Se.width-2*Se.stroke,Se.height-2*Se.stroke).cx(Se.x+Se.width/2).cy(Se.y+Se.height/2),this.clipCell.y(Se.y+Se.stroke+.6*(Se.height-2*Se.stroke)),this.cell.unclip().clipWith(this.$container.clip().add(this.clipCell))),(Ce.hasOwnProperty("x")||Ce.hasOwnProperty("y"))&&(this.clipCell.y(Se.y+Se.stroke+.6*(Se.height-2*Se.stroke)),this.cell.unclip().clipWith(this.$container.clip().add(this.clipCell)))},update(Ce){}},A={id:"fan",name:"\u98ce\u673a",icon:"/assets/hmi/fan.svg",group:"\u5de5\u4e1a",color:!0,values:[{name:"open",label:"\u8fd0\u884c"},{name:"speed",label:"\u901f\u5ea6"}],create(){this.element=this.$container.nested().attr("preserveAspectRatio","xMidYMid meet"),this.path=this.element.path("M512 1024C229.701818 1024 0 794.298182 0 512S229.701818 0 512 0s512 229.701818 512 512-229.701818 512-512 512z m0-36.584727c262.562909 0 475.415273-212.852364 475.415273-475.415273S774.562909 36.584727 512 36.584727 36.584727 249.437091 36.584727 512 249.437091 987.415273 512 987.415273z m-62.557091-464.430546a73.122909 73.122909 0 1 1 146.292364 0 73.122909 73.122909 0 0 1-146.292364 0z m-54.551273 0a128.558545 128.558545 0 0 0 91.136 99.886546c-33.605818 84.666182 41.053091 210.618182-96.209454 261.026909-72.238545 26.530909-276.805818-57.204364-162.210909-231.517091C279.272727 573.905455 341.736727 538.391273 394.891636 522.984727z m48.407273-73.076363C389.026909 375.296 236.590545 365.754182 271.825455 225.978182c18.618182-73.541818 209.221818-193.303273 294.772363-2.839273 38.493091 85.736727 33.326545 156.392727 16.104727 208.197818a139.077818 139.077818 0 0 0-53.992727-10.845091c-32.442182 0-62.231273 11.031273-85.410909 29.323637z m447.860364 40.96c54.830545 54.318545 64.930909 277.410909-142.894546 249.111272-93.602909-12.8-152.529455-54.272-189.067636-96.023272a131.258182 131.258182 0 0 0 52.596364-126.743273c91.601455-6.283636 175.150545-129.489455 279.365818-26.344727z").fill("#FFFFFF"),this.element.viewbox(this.path.bbox())},setup(Ce){let Se=this.$properties;(Ce.hasOwnProperty("width")||Ce.hasOwnProperty("height"))&&this.element.size(Se.width,Se.height),Ce.hasOwnProperty("fill")&&this.path.fill(Se.fill),(Ce.hasOwnProperty("x")||Ce.hasOwnProperty("y"))&&this.element.move(Se.x,Se.y)},update(Ce){Ce.speed>0&&this.element.animate().ease("-").transform({rotate:120}).loop()}},P={id:"light",name:"\u6307\u793a\u706f",icon:"/assets/hmi/light.svg",group:"\u5de5\u4e1a",drawer:"circle",rotation:!1,position:!1,properties:[{label:"X",name:"x",type:"number"},{label:"Y",name:"y",type:"number"},{label:"\u534a\u5f84",name:"radius",type:"number"},{label:"\u989c\u8272",name:"color",type:"color",default:"#8BBB11"},{label:"\u5173\u95ed\u8272",name:"dark",type:"color",default:"#eee"},{label:"\u8fb9\u6846\u8272",name:"fill",type:"color",default:"#ccc"},{label:"\u8fb9\u6846",name:"stroke",type:"number",default:10}],values:[{name:"open",label:"\u8fd0\u884c"}],create(){this.element=this.$container.circle(this.$properties.radius),this.cell=this.$container.circle(0)},setup(Ce){let Se=this.$properties;Ce.hasOwnProperty("color")&&this.cell.fill(Se.color),Ce.hasOwnProperty("fill")&&this.element.fill(Se.fill),(Ce.hasOwnProperty("radius")||Ce.hasOwnProperty("stroke"))&&(this.element.radius(Se.radius),this.cell.radius(Se.radius-Se.stroke)),(Ce.hasOwnProperty("x")||Ce.hasOwnProperty("y"))&&(this.element.center(Se.x,Se.y),this.cell.center(Se.x,Se.y))}},I={id:"pipe",name:"\u7ba1\u9053",icon:"/assets/hmi/pipe.svg",group:"\u5de5\u4e1a",drawer:"poly",color:!1,stroke:!1,rotation:!1,position:!1,properties:[{label:"\u989c\u8272",name:"color",type:"color",default:"#fff"},{label:"\u5bbd\u5ea6",name:"stroke",type:"number",default:20},{label:"\u6c34\u6d41",name:"flow",type:"color",default:"#8BBB11"}],values:[{name:"speed",label:"\u901f\u5ea6"}],create(){this.element=this.$container.polyline().fill("none"),this.flow=this.$container.polyline().fill("none")},setup(Ce){let Se=this.$properties;(Ce.hasOwnProperty("color")||Ce.hasOwnProperty("stroke")||Ce.hasOwnProperty("flow"))&&(this.element.stroke({color:Se.color,width:Se.stroke}),this.flow.stroke({color:Se.flow,width:Se.stroke/2,dasharray:Se.stroke+" "+Math.floor(Se.stroke/2)})),Ce.hasOwnProperty("points")&&(this.element.plot(Se.points),this.flow.plot(Se.points))}},H={id:"pool",name:"\u6c34\u6c60",icon:"/assets/hmi/pool.svg",group:"\u5de5\u4e1a",properties:[{label:"\u989c\u8272",name:"color",type:"color",default:"#8BBB11"},{label:"\u80cc\u666f",name:"back",type:"color",default:"#666"},{label:"\u8fb9\u6846\u8272",name:"fill",type:"color",default:"#ccc"},{label:"\u5706\u89d2",name:"radius",type:"number",default:20},{label:"\u8fb9\u6846",name:"stroke",type:"number",default:10}],values:[{name:"value",label:"\u5185\u5bb9"}],create(){this.clipRect=this.$container.rect().size("100%","100%"),this.rect=this.$container.rect(),this.back=this.$container.rect(),this.clipCell=this.$container.rect().size("100%","100%"),this.cell=this.$container.rect()},setup(Ce){let Se=this.$properties;if(Ce.hasOwnProperty("color")&&this.cell.fill(Se.color),Ce.hasOwnProperty("back")&&this.back.fill(Se.back),Ce.hasOwnProperty("fill")&&this.rect.fill(Se.fill),Ce.hasOwnProperty("stroke")||Ce.hasOwnProperty("radius")||Ce.hasOwnProperty("width")||Ce.hasOwnProperty("height")){this.rect.radius(Se.radius).size(Se.width,Se.height).move(Se.x,Se.y),this.back.radius(Se.radius-Se.stroke).size(Se.width-2*Se.stroke,Se.height-2*Se.stroke).cx(Se.x+Se.width/2).cy(Se.y+Se.height/2),this.cell.radius(Se.radius-Se.stroke).size(Se.width-2*Se.stroke,Se.height-2*Se.stroke).cx(Se.x+Se.width/2).cy(Se.y+Se.height/2),this.clipRect.move(0,Se.y+Se.radius+Se.stroke);let rt=this.$container.clip().add(this.clipRect);this.rect.unclip().clipWith(rt),this.back.unclip().clipWith(rt),this.clipCell.y(Se.y+Se.radius+Se.stroke+.6*(Se.height-2*Se.stroke)),this.cell.unclip().clipWith(this.$container.clip().add(this.clipCell))}if(Ce.hasOwnProperty("x")||Ce.hasOwnProperty("y")){this.clipRect.move(0,Se.y+Se.radius+Se.stroke);let rt=this.$container.clip().add(this.clipRect);this.rect.unclip().clipWith(rt),this.back.unclip().clipWith(rt),this.clipCell.y(Se.y+Se.stroke+.6*(Se.height-2*Se.stroke)),this.cell.unclip().clipWith(this.$container.clip().add(this.clipCell))}},update(Ce){}},Z={id:"pump",name:"\u6c34\u6cf5",icon:"/assets/hmi/pump.svg",group:"\u5de5\u4e1a",values:[{name:"open",label:"\u8fd0\u884c"},{name:"speed",label:"\u901f\u5ea6"}],create(){this.element=this.$container.image().load("/assets/hmi/pump.svg")},setup(Ce){let Se=this.$properties;(Ce.hasOwnProperty("width")||Ce.hasOwnProperty("height"))&&this.element.size(Se.width,Se.height),Ce.hasOwnProperty("color")&&this.element.fill(Se.color)}},U={id:"valve",name:"\u9600\u95e8",icon:"/assets/hmi/valve.svg",group:"\u5de5\u4e1a",drawer:"rect",values:[{name:"open",label:"\u6253\u5f00"}],events:[{name:"click",label:"\u70b9\u51fb"},{name:"change",label:"\u53d8\u5316"}],create(){this.element=this.$container.image().load("/assets/hmi/valve.svg")},setup(Ce){let Se=this.$properties;(Ce.hasOwnProperty("width")||Ce.hasOwnProperty("height"))&&this.element.size(Se.width,Se.height),Ce.hasOwnProperty("color")&&this.element.fill(Se.color)}},Y={id:"motor",name:"\u7535\u673a",icon:"/assets/hmi/motor.svg",group:"\u5de5\u4e1a",values:[{name:"open",label:"\u8fd0\u884c"},{name:"speed",label:"\u901f\u5ea6"}],create(){this.element=this.$container.image().load("/assets/hmi/motor.svg")},setup(Ce){let Se=this.$properties;(Ce.hasOwnProperty("width")||Ce.hasOwnProperty("height"))&&this.element.size(Se.width,Se.height),Ce.hasOwnProperty("color")&&this.element.fill(Se.color)}};var B=J(8045);let M=[],be={},Me={};function Ze(Ce){return be[Ce]}[e,O,fe,S,ee,j,se,k,K,ne,ie,re,R,{id:"progress",name:"\u5f00\u5173",icon:"/assets/hmi/progress.svg",group:"\u63a7\u4ef6",drawer:"rect",properties:[{label:"\u989c\u8272",name:"color",type:"color",default:"#8BBB11"},{label:"\u80cc\u666f",name:"back",type:"color",default:"#666"},{label:"\u8fb9\u6846\u8272",name:"fill",type:"color",default:"#ccc"},{label:"\u5706\u89d2",name:"radius",type:"number",default:20},{label:"\u8fb9\u6846",name:"stroke",type:"number",default:10}],events:[{label:"\u70b9\u51fb",name:"click"}],values:[{label:"\u503c",name:"value"}],create(){this.rect=this.$container.rect(),this.back=this.$container.rect(),this.cell=this.$container.rect()},setup(Ce){let Se=this.$properties;Ce.hasOwnProperty("color")&&this.cell.fill(Se.color),Ce.hasOwnProperty("back")&&this.back.fill(Se.back),Ce.hasOwnProperty("fill")&&this.rect.fill(Se.fill),(Ce.hasOwnProperty("radius")||Ce.hasOwnProperty("stroke")||Ce.hasOwnProperty("width")||Ce.hasOwnProperty("height"))&&(this.rect.radius(Se.radius).size(Se.width,Se.height).move(Se.x,Se.y),this.back.radius(Se.radius-Se.stroke).size(Se.width-2*Se.stroke,Se.height-2*Se.stroke).x(Se.x+Se.stroke).cy(Se.y+Se.height/2),this.cell.radius(Se.radius-Se.stroke).size(.6*Se.width-2*Se.stroke,Se.height-2*Se.stroke).x(Se.x+Se.stroke).cy(Se.y+Se.height/2))},update(Ce){}},{id:"svg",name:"SVG",icon:"/assets/hmi/svg.svg",group:"\u63a7\u4ef6",color:!0,properties:[{label:"SVG PATH",name:"path",type:"textarea",default:"M935.2 405.6c-16.700000000000045 17.299999999999955-32.90000000000009 34.599999999999966-49.80000000000007 51.19999999999999-45.39999999999998 44.69999999999999-91.29999999999995 88.99999999999994-137 133.40000000000003-7.199999999999932 7-14.899999999999977 13.699999999999932-21.5 21.399999999999977-2.6000000000000227 3.1000000000000227-4.2999999999999545 8.600000000000023-3.6000000000000227 12.5 16.600000000000023 98.69999999999993 33.5 197.29999999999995 50.40000000000009 296 0.09999999999990905 0.39999999999997726 0 0.8999999999999773-0.10000000000002274 1.6000000000000227-0.20000000000004547 0.8999999999999773-4.399999999999977-0.6000000000000227-9.5-3.300000000000068-17.700000000000045-9.199999999999932-35.10000000000002-18.299999999999955-52.5-27.5-68.89999999999998-36.19999999999993-137.89999999999998-72.39999999999998-206.60000000000002-108.89999999999998-6-3.2000000000000455-10.100000000000023-1.7000000000000455-15.300000000000011 1-86.09999999999997 45.39999999999998-172.2 90.70000000000005-258.4 136-1.5 0.7999999999999545-3 1.5-4.600000000000023 2.2000000000000455-2.5999999999999943 1.1999999999999318-3.8999999999999773-2.5-2.8999999999999773-8.200000000000045 3.8999999999999773-23.299999999999955 7.599999999999994-46 11.5-68.60000000000002 12.699999999999989-74 25.69999999999999-147.89999999999998 38.099999999999966-221.89999999999998 0.6000000000000227-3.5-1.8999999999999773-8.700000000000045-4.599999999999966-11.399999999999977-44.70000000000002-44-90-87.30000000000007-134.3-131.70000000000005-24.200000000000003-24.299999999999955-47.2-49.799999999999955-69.8-74.09999999999997-3.9000000000000057-4.199999999999989-2.5-8.300000000000011 3.200000000000003-9.199999999999989 11.899999999999991-1.8000000000000114 25.69999999999999-3.900000000000034 39.599999999999994-5.900000000000034 60.5-8.800000000000011 121.1-17.599999999999966 181.60000000000002-26.5 20.299999999999955-3 40.5-6.5 60.89999999999998-8.599999999999966 7.699999999999989-0.8000000000000114 11.399999999999977-4 14.600000000000023-10.600000000000023 42.19999999999999-86.10000000000002 84.69999999999999-172.1 127.09999999999997-258.1 0.9000000000000341-1.8999999999999773 1.900000000000034-3.6999999999999744 3-5.699999999999974 1.6999999999999886-3.1000000000000085 4.300000000000011-3.700000000000003 5.900000000000034-1.1000000000000085 1 1.6000000000000085 1.8999999999999773 3.1000000000000085 2.6999999999999886 4.700000000000003 42.900000000000034 86.89999999999999 85.90000000000003 173.8 128.59999999999997 260.9 3.1000000000000227 6.300000000000011 6.600000000000023 9 13.800000000000068 10 88.79999999999995 12.699999999999989 177.5 25.80000000000001 266.29999999999995 38.80000000000001 6.7000000000000455 1 13.399999999999977 1.8999999999999773 20.100000000000023 2.8000000000000114 5.699999999999932 0.5999999999999659 7.100000000000023 4.599999999999966 3.1000000000000227 8.800000000000011z"}],create(){this.element=this.$container.nested().attr("preserveAspectRatio","xMidYMid meet"),this.path=this.element.path(this.$properties.path).fill("#FFFFFF"),this.element.viewbox(this.path.bbox())},setup(Ce){let Se=this.$properties;(Ce.hasOwnProperty("width")||Ce.hasOwnProperty("height"))&&this.element.size(Se.width,Se.height),Ce.hasOwnProperty("fill")&&this.path.fill(Se.fill),(Ce.hasOwnProperty("x")||Ce.hasOwnProperty("y"))&&this.element.move(Se.x,Se.y),Ce.hasOwnProperty("path")&&(this.path.plot(Se.path),this.element.viewbox(this.path.bbox()))}},{id:"html",name:"HTML",icon:"/assets/hmi/code.svg",group:"\u63a7\u4ef6",drawer:"rect",properties:[{label:"HTML",name:"html",type:"textarea",default:"<div>HTML</div>"}],create(){this.element=this.$container.foreignObject(),this.element.node.innerHTML=this.$properties.html,this.element.node.firstChild.style="width:100%; height:100%;"},setup(Ce){let Se=this.$properties;(Ce.hasOwnProperty("width")||Ce.hasOwnProperty("height"))&&this.element.size(Se.width,Se.height),Ce.hasOwnProperty("html")&&(this.element.node.innerHTML=Se.html)}},I,U,V,H,Z,Y,A,P,{id:"gauge-chart",name:"\u4eea\u8868\u76d8",icon:"/assets/hmi/chart-gauge.svg",group:"\u56fe\u8868",drawer:"rect",data:()=>({options:{tooltip:{},series:[{name:"d",type:"gauge",data:[{name:"cpu",value:20}]}]}}),create(){this.element=this.$container.foreignObject(),this.chart=B.init(this.element.node),this.chart.setOption(this.options)},setup(Ce){let Se=this.$properties;(Ce.hasOwnProperty("width")||Ce.hasOwnProperty("height"))&&(this.element.size(Se.width,Se.height),this.chart.resize())},update(Ce){}},{id:"bar-chart",name:"\u67f1\u72b6\u56fe",icon:"/assets/hmi/chart-bar.svg",group:"\u56fe\u8868",drawer:"rect",data:()=>({options:{tooltip:{},xAxis:{data:["a","b","c","e"]},yAxis:{},series:[{name:"d",type:"bar",data:[1,2,3,4]}]}}),create(){this.element=this.$container.foreignObject(),this.chart=B.init(this.element.node),this.chart.setOption(this.options)},setup(Ce){let Se=this.$properties;(Ce.hasOwnProperty("width")||Ce.hasOwnProperty("height"))&&(this.element.size(Se.width,Se.height),this.chart.resize())},update(Ce){}},{id:"line-chart",name:"\u6298\u7ebf\u56fe",icon:"/assets/hmi/chart-line.svg",group:"\u56fe\u8868",drawer:"rect",data:()=>({options:{tooltip:{},xAxis:{data:["a","b","c","e"]},yAxis:{},series:[{name:"d",type:"line",data:[1,2,3,4]}]}}),create(){this.element=this.$container.foreignObject(),this.chart=B.init(this.element.node),this.chart.setOption(this.options)},setup(Ce){let Se=this.$properties;(Ce.hasOwnProperty("width")||Ce.hasOwnProperty("height"))&&(this.element.size(Se.width,Se.height),this.chart.resize())},update(Ce){}},{id:"pie-chart",name:"\u997c\u72b6\u56fe",icon:"/assets/hmi/chart-pie.svg",group:"\u56fe\u8868",drawer:"rect",data:()=>({options:{tooltip:{},series:[{name:"d",type:"pie",radius:"65%",center:["50%","50%"],data:[{name:"cpu",value:20},{name:"mem",value:60}]}]}}),create(){this.element=this.$container.foreignObject(),this.chart=B.init(this.element.node),this.chart.setOption(this.options)},setup(Ce){let Se=this.$properties;(Ce.hasOwnProperty("width")||Ce.hasOwnProperty("height"))&&(this.element.size(Se.width,Se.height),this.chart.resize())},update(Ce){}}].forEach(Ce=>function Fe(Ce){Ce=Object.assign({color:!1,stroke:!1,rotation:!0,position:!0,group:"\u6269\u5c55",properties:[]},Ce),be[Ce.id]=Ce;let rt=Me[Ce.group];rt||(rt=Me[Ce.group]=[],M.push({name:Ce.group,components:rt})),rt.push(Ce)}(Ce))},1618:(Gt,ht,J)=>{"use strict";J.d(ht,{yU:()=>ee,vW:()=>j,$I:()=>S});var e=J(7353);function ee(fe){return function O(fe){let he=[];return fe.color&&(null==he||he.unshift(...e.ZX)),fe.stroke&&(null==he||he.unshift(...e.Hd)),fe.rotation&&(null==he||he.unshift(...e.Xh)),fe.position&&(null==he||he.unshift(...e.GT)),he}(fe).concat(fe.properties)}function j(fe){let he={};return ee(fe).forEach(k=>{k.hasOwnProperty("default")&&(he[k.name]=k.default)}),he}function S(fe){var he;fe.$object=(null===(he=fe.$component.data)||void 0===he?void 0:he.call(fe))||{},fe.$object.__proto__={$container:fe.$container,$component:fe.$component,$properties:fe.properties},fe.$component.create.call(fe.$object)}},7353:(Gt,ht,J)=>{"use strict";J.d(ht,{GT:()=>e,Xh:()=>O,Hd:()=>ee,ZX:()=>j,mS:()=>S});let e=[{label:"x",name:"x",type:"number",default:0},{label:"y",name:"y",type:"number",default:0},{label:"\u5bbd\u5ea6",name:"width",type:"number",default:0},{label:"\u9ad8\u5ea6",name:"height",type:"number",default:0}],O=[{label:"\u65cb\u8f6c\u89d2\u5ea6",name:"rotate",type:"number"}],ee=[{label:"\u8fb9\u6846\u8272",name:"color",type:"color",default:"#fff"},{label:"\u8fb9\u6846",name:"stroke",type:"number",default:"none"}],j=[{label:"\u586b\u5145\u8272",name:"fill",type:"color",default:"none"}],S=[{label:"\u5b57\u4f53",name:"font",type:"font"},{label:"\u5b57\u53f7",name:"fontsize",type:"fontsize",default:20},{label:"\u659c\u4f53",name:"italic",type:"boolean",default:!1},{label:"\u7c97\u4f53",name:"bold",type:"boolean",default:!1}]},3973:(Gt,ht,J)=>{"use strict";J.d(ht,{B:()=>he});var e=J(5e3),O=J(1618),ee=J(3257),j=J(579);let he=(()=>{class se{constructor(K){this.ref=K,this.entities=[],this.width=800,this.height=600,this.invoke=new e.vpe,this.bind=new e.vpe}set hmi(K){var ne;null===(ne=this.canvas)||void 0===ne||ne.size(K.width,K.height),this.entities=K.entities,this.renderEntities()}set values(K){var ne;null===(ne=this.entities)||void 0===ne||ne.forEach(ie=>{var re;let R={},V=!1;Object.keys(ie.bindings).forEach(A=>{let P=function fe(se,k){let K=k.split(".");for(let ne=0;ne<K.length;ne++){let ie=K[ne];if(!se.hasOwnProperty(ie))return;se=se[ie]}return se}(K,ie.bindings[A]);void 0!==P&&(R[A]=P,V=!0)}),V&&(null===(re=ie.$component.update)||void 0===re||re.call(ie.$object,R))})}ngOnInit(){}ngAfterViewInit(){this.canvas=(0,ee.Wj)().addTo(this.ref.nativeElement).size(this.width,this.height),this.renderEntities()}renderEntities(){var K;if(!this.canvas)return;let ne=this;null===(K=this.entities)||void 0===K||K.forEach(ie=>{var re;ie.$container=new ee.G,ie.$component=(0,j.x5)(ie.component),(0,O.$I)(ie),this.appendEntity(ie),null===(re=ie.$component.start)||void 0===re||re.call(ie.$object),ie.$object.__proto__.$emit=function(R,V){var A;null===(A=ie.handlers[R])||void 0===A||A.forEach(P=>ne.invoke.emit(P))},ie.$object.__proto__.$bind=function(R,V){ne.bind.emit({[R]:V})}})}appendEntity(K){this.canvas.add(K.$container),this.setupEntity(K,K.properties),this.entities.push(K)}setupEntity(K,ne){Object.assign(K.properties,ne),ne.hasOwnProperty("rotate")&&K.$container.transform({rotate:ne.rotate}),ne.hasOwnProperty("x")&&K.$container.x(ne.x),ne.hasOwnProperty("y")&&K.$container.y(ne.y),K.$component.setup.call(K.$object,ne)}}return se.\u0275fac=function(K){return new(K||se)(e.Y36(e.SBq))},se.\u0275cmp=e.Xpm({type:se,selectors:[["hmi-viewer"]],inputs:{hmi:"hmi",values:"values"},outputs:{invoke:"invoke",bind:"bind"},decls:0,vars:0,template:function(K,ne){},styles:[""]}),se})()},3257:(Gt,ht,J)=>{"use strict";J.d(ht,{xu:()=>$t,W_:()=>Ri,G:()=>yl,UL:()=>Be,Wj:()=>Yr,l7:()=>st,S1:()=>Ei,on:()=>kr});const e={},O=[];function ee(Q,b){if(Array.isArray(Q))for(const G of Q)ee(G,b);else if("object"!=typeof Q)fe(Object.getOwnPropertyNames(b)),e[Q]=Object.assign(e[Q]||{},b);else for(const G in Q)ee(G,Q[G])}function j(Q){return e[Q]||{}}function fe(Q){O.push(...Q)}function he(Q,b){let G;const ye=Q.length,Oe=[];for(G=0;G<ye;G++)Oe.push(b(Q[G]));return Oe}function se(Q,b){let G;const ye=Q.length,Oe=[];for(G=0;G<ye;G++)b(Q[G])&&Oe.push(Q[G]);return Oe}function k(Q){return Q%360*Math.PI/180}function ne(Q){return Q.toLowerCase().replace(/-(.)/g,function(b,G){return G.toUpperCase()})}function ie(Q){return Q.replace(/([A-Z])/g,function(b,G){return"-"+G.toLowerCase()})}function re(Q){return Q.charAt(0).toUpperCase()+Q.slice(1)}function R(Q,b,G,ye){return(null==b||null==G)&&(ye=ye||Q.bbox(),null==b?b=ye.width/ye.height*G:null==G&&(G=ye.height/ye.width*b)),{width:b,height:G}}function V(Q,b){const G=Q.origin;let ye=null!=Q.ox?Q.ox:null!=Q.originX?Q.originX:"center",Oe=null!=Q.oy?Q.oy:null!=Q.originY?Q.originY:"center";null!=G&&([ye,Oe]=Array.isArray(G)?G:"object"==typeof G?[G.x,G.y]:[G,G]);const Xe="string"==typeof ye,vt="string"==typeof Oe;if(Xe||vt){const{height:Ct,width:bt,x:Et,y:jt}=b.bbox();Xe&&(ye=ye.includes("left")?Et:ye.includes("right")?Et+bt:Et+bt/2),vt&&(Oe=Oe.includes("top")?jt:Oe.includes("bottom")?jt+Ct:jt+Ct/2)}return[ye,Oe]}const P="http://www.w3.org/2000/svg",H="http://www.w3.org/2000/xmlns/",Z="http://www.w3.org/1999/xlink",B={window:"undefined"==typeof window?null:window,document:"undefined"==typeof document?null:document};class oe{}const M={},be="___SYMBOL___ROOT___";function Me(Q,b=P){return B.document.createElementNS(b,Q)}function Ze(Q,b=!1){if(Q instanceof oe)return Q;if("object"==typeof Q)return Ce(Q);if(null==Q)return new M[be];if("string"==typeof Q&&"<"!==Q.charAt(0))return Ce(B.document.querySelector(Q));const G=b?B.document.createElement("div"):Me("svg");return G.innerHTML=Q,Q=Ce(G.firstChild),G.removeChild(G.firstChild),Q}function Fe(Q,b){return b&&b.ownerDocument&&b instanceof b.ownerDocument.defaultView.Node?b:Me(Q)}function je(Q){if(!Q)return null;if(Q.instance instanceof oe)return Q.instance;if("#document-fragment"===Q.nodeName)return new M.Fragment(Q);let b=re(Q.nodeName||"Dom");return"LinearGradient"===b||"RadialGradient"===b?b="Gradient":M[b]||(b="Dom"),new M[b](Q)}let Ce=je;function rt(Q,b=Q.name,G=!1){return M[b]=Q,G&&(M[be]=Q),fe(Object.getOwnPropertyNames(Q.prototype)),Q}let Lt=1e3;function pt(Q){return"Svgjs"+re(Q)+Lt++}function gt(Q){for(let b=Q.children.length-1;b>=0;b--)gt(Q.children[b]);return Q.id&&(Q.id=pt(Q.nodeName)),Q}function st(Q,b){let G,ye;for(ye=(Q=Array.isArray(Q)?Q:[Q]).length-1;ye>=0;ye--)for(G in b)Q[ye].prototype[G]=b[G]}function zt(Q){return function(...b){const G=b[b.length-1];return!G||G.constructor!==Object||G instanceof Array?Q.apply(this,b):Q.apply(this,b.slice(0,-1)).attr(G)}}ee("Dom",{siblings:function Pt(){return this.parent().children()},position:function Wt(){return this.parent().index(this)},next:function sn(){return this.siblings()[this.position()+1]},prev:function Vn(){return this.siblings()[this.position()-1]},forward:function wn(){const Q=this.position();return this.parent().add(this.remove(),Q+1),this},backward:function qn(){const Q=this.position();return this.parent().add(this.remove(),Q?Q-1:0),this},front:function fn(){return this.parent().add(this.remove()),this},back:function $n(){return this.parent().add(this.remove(),0),this},before:function ur(Q){(Q=Ze(Q)).remove();const b=this.position();return this.parent().add(Q,b),this},after:function Pn(Q){(Q=Ze(Q)).remove();const b=this.position();return this.parent().add(Q,b+1),this},insertBefore:function Yn(Q){return(Q=Ze(Q)).before(this),this},insertAfter:function hr(Q){return(Q=Ze(Q)).after(this),this}});const vr=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,ir=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,tn=/rgb\((\d+),(\d+),(\d+)\)/,Sr=/(#[a-z_][a-z0-9\-_]*)/i,un=/\)\s*,?\s*/,Sn=/\s/g,mn=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,yr=/^rgb\(/,Er=/^(\s+)?$/,Dn=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Nt=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,Zt=/[\s,]+/,dr=/[MLHVCSQTAZ]/i;function yt(Q){const b=Math.round(Q),ye=Math.max(0,Math.min(255,b)).toString(16);return 1===ye.length?"0"+ye:ye}function we(Q,b){for(let G=b.length;G--;)if(null==Q[b[G]])return!1;return!0}function Ie(Q,b,G){return G<0&&(G+=1),G>1&&(G-=1),G<1/6?Q+6*(b-Q)*G:G<.5?b:G<2/3?Q+(b-Q)*(2/3-G)*6:Q}ee("Dom",{classes:function Dt(){const Q=this.attr("class");return null==Q?[]:Q.trim().split(Zt)},hasClass:function it(Q){return-1!==this.classes().indexOf(Q)},addClass:function Ye(Q){if(!this.hasClass(Q)){const b=this.classes();b.push(Q),this.attr("class",b.join(" "))}return this},removeClass:function Ut(Q){return this.hasClass(Q)&&this.attr("class",this.classes().filter(function(b){return b!==Q}).join(" ")),this},toggleClass:function Qt(Q){return this.hasClass(Q)?this.removeClass(Q):this.addClass(Q)}}),ee("Dom",{css:function zn(Q,b){const G={};if(0===arguments.length)return this.node.style.cssText.split(/\s*;\s*/).filter(function(ye){return!!ye.length}).forEach(function(ye){const Oe=ye.split(/\s*:\s*/);G[Oe[0]]=Oe[1]}),G;if(arguments.length<2){if(Array.isArray(Q)){for(const ye of Q){const Oe=ne(ye);G[ye]=this.node.style[Oe]}return G}if("string"==typeof Q)return this.node.style[ne(Q)];if("object"==typeof Q)for(const ye in Q)this.node.style[ne(ye)]=null==Q[ye]||Er.test(Q[ye])?"":Q[ye]}return 2===arguments.length&&(this.node.style[ne(Q)]=null==b||Er.test(b)?"":b),this},show:function De(){return this.css("display","")},hide:function _t(){return this.css("display","none")},visible:function cr(){return"none"!==this.css("display")}}),ee("Dom",{data:function _n(Q,b,G){if(null==Q)return this.data(he(se(this.node.attributes,ye=>0===ye.nodeName.indexOf("data-")),ye=>ye.nodeName.slice(5)));if(Q instanceof Array){const ye={};for(const Oe of Q)ye[Oe]=this.data(Oe);return ye}if("object"==typeof Q)for(b in Q)this.data(b,Q[b]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+Q))}catch(ye){return this.attr("data-"+Q)}else this.attr("data-"+Q,null===b?null:!0===G||"string"==typeof b||"number"==typeof b?b:JSON.stringify(b));return this}}),ee("Dom",{remember:function yn(Q,b){if("object"==typeof arguments[0])for(const G in Q)this.remember(G,Q[G]);else{if(1===arguments.length)return this.memory()[Q];this.memory()[Q]=b}return this},forget:function gn(){if(0===arguments.length)this._memory={};else for(let Q=arguments.length-1;Q>=0;Q--)delete this.memory()[arguments[Q]];return this},memory:function Pr(){return this._memory=this._memory||{}}});class Ve{constructor(...b){this.init(...b)}static isColor(b){return b&&(b instanceof Ve||this.isRgb(b)||this.test(b))}static isRgb(b){return b&&"number"==typeof b.r&&"number"==typeof b.g&&"number"==typeof b.b}static random(b="vibrant",G,ye){const{random:Oe,round:Xe,sin:vt,PI:Ct}=Math;if("vibrant"===b){const bt=24*Oe()+57,Et=38*Oe()+45,jt=360*Oe();return new Ve(bt,Et,jt,"lch")}if("sine"===b){const bt=Xe(80*vt(2*Ct*(G=null==G?Oe():G)/.5+.01)+150),Et=Xe(50*vt(2*Ct*G/.5+4.6)+200),jt=Xe(100*vt(2*Ct*G/.5+2.3)+150);return new Ve(bt,Et,jt)}if("pastel"===b){const bt=8*Oe()+86,Et=17*Oe()+9,jt=360*Oe();return new Ve(bt,Et,jt,"lch")}if("dark"===b){const bt=10+10*Oe(),Et=50*Oe()+86,jt=360*Oe();return new Ve(bt,Et,jt,"lch")}if("rgb"===b){const bt=255*Oe(),Et=255*Oe(),jt=255*Oe();return new Ve(bt,Et,jt)}if("lab"===b){const bt=100*Oe(),Et=256*Oe()-128,jt=256*Oe()-128;return new Ve(bt,Et,jt,"lab")}if("grey"===b){const bt=255*Oe();return new Ve(bt,bt,bt)}throw new Error("Unsupported random color mode")}static test(b){return"string"==typeof b&&(mn.test(b)||yr.test(b))}cmyk(){const{_a:b,_b:G,_c:ye}=this.rgb(),[Oe,Xe,vt]=[b,G,ye].map(Rr=>Rr/255),Ct=Math.min(1-Oe,1-Xe,1-vt);return 1===Ct?new Ve(0,0,0,1,"cmyk"):new Ve((1-Oe-Ct)/(1-Ct),(1-Xe-Ct)/(1-Ct),(1-vt-Ct)/(1-Ct),Ct,"cmyk")}hsl(){const{_a:b,_b:G,_c:ye}=this.rgb(),[Oe,Xe,vt]=[b,G,ye].map(wr=>wr/255),Ct=Math.max(Oe,Xe,vt),bt=Math.min(Oe,Xe,vt),Et=(Ct+bt)/2,jt=Ct===bt,an=Ct-bt;return new Ve(360*(jt?0:Ct===Oe?((Xe-vt)/an+(Xe<vt?6:0))/6:Ct===Xe?((vt-Oe)/an+2)/6:Ct===vt?((Oe-Xe)/an+4)/6:0),100*(jt?0:Et>.5?an/(2-Ct-bt):an/(Ct+bt)),100*Et,"hsl")}init(b=0,G=0,ye=0,Oe=0,Xe="rgb"){if(b=b||0,this.space)for(const an in this.space)delete this[this.space[an]];if("number"==typeof b)Xe="string"==typeof Oe?Oe:Xe,Oe="string"==typeof Oe?0:Oe,Object.assign(this,{_a:b,_b:G,_c:ye,_d:Oe,space:Xe});else if(b instanceof Array)this.space=G||("string"==typeof b[3]?b[3]:b[4])||"rgb",Object.assign(this,{_a:b[0],_b:b[1],_c:b[2],_d:b[3]||0});else if(b instanceof Object){const an=function Pe(Q,b){const G=we(Q,"rgb")?{_a:Q.r,_b:Q.g,_c:Q.b,_d:0,space:"rgb"}:we(Q,"xyz")?{_a:Q.x,_b:Q.y,_c:Q.z,_d:0,space:"xyz"}:we(Q,"hsl")?{_a:Q.h,_b:Q.s,_c:Q.l,_d:0,space:"hsl"}:we(Q,"lab")?{_a:Q.l,_b:Q.a,_c:Q.b,_d:0,space:"lab"}:we(Q,"lch")?{_a:Q.l,_b:Q.c,_c:Q.h,_d:0,space:"lch"}:we(Q,"cmyk")?{_a:Q.c,_b:Q.m,_c:Q.y,_d:Q.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return G.space=b||G.space,G}(b,G);Object.assign(this,an)}else if("string"==typeof b)if(yr.test(b)){const an=b.replace(Sn,""),[Rr,lr,Wr]=tn.exec(an).slice(1,4).map(wr=>parseInt(wr));Object.assign(this,{_a:Rr,_b:lr,_c:Wr,_d:0,space:"rgb"})}else{if(!mn.test(b))throw Error("Unsupported string format, can't construct Color");{const an=wr=>parseInt(wr,16),[,Rr,lr,Wr]=ir.exec(function qe(Q){return 4===Q.length?["#",Q.substring(1,2),Q.substring(1,2),Q.substring(2,3),Q.substring(2,3),Q.substring(3,4),Q.substring(3,4)].join(""):Q}(b)).map(an);Object.assign(this,{_a:Rr,_b:lr,_c:Wr,_d:0,space:"rgb"})}}const{_a:vt,_b:Ct,_c:bt,_d:Et}=this;Object.assign(this,"rgb"===this.space?{r:vt,g:Ct,b:bt}:"xyz"===this.space?{x:vt,y:Ct,z:bt}:"hsl"===this.space?{h:vt,s:Ct,l:bt}:"lab"===this.space?{l:vt,a:Ct,b:bt}:"lch"===this.space?{l:vt,c:Ct,h:bt}:"cmyk"===this.space?{c:vt,m:Ct,y:bt,k:Et}:{})}lab(){const{x:b,y:G,z:ye}=this.xyz();return new Ve(116*G-16,500*(b-G),200*(G-ye),"lab")}lch(){const{l:b,a:G,b:ye}=this.lab(),Oe=Math.sqrt(G**2+ye**2);let Xe=180*Math.atan2(ye,G)/Math.PI;return Xe<0&&(Xe*=-1,Xe=360-Xe),new Ve(b,Oe,Xe,"lch")}rgb(){if("rgb"===this.space)return this;if(function Qe(Q){return"lab"===Q||"xyz"===Q||"lch"===Q}(this.space)){let{x:b,y:G,z:ye}=this;if("lab"===this.space||"lch"===this.space){let{l:lr,a:Wr,b:wr}=this;if("lch"===this.space){const{c:mo,h:Us}=this,_o=Math.PI/180;Wr=mo*Math.cos(_o*Us),wr=mo*Math.sin(_o*Us)}const nr=(lr+16)/116,Qr=Wr/500+nr,bi=nr-wr/200,Pi=16/116,Ii=.008856,ai=7.787;b=.95047*(Qr**3>Ii?Qr**3:(Qr-Pi)/ai),G=1*(nr**3>Ii?nr**3:(nr-Pi)/ai),ye=1.08883*(bi**3>Ii?bi**3:(bi-Pi)/ai)}const Oe=3.2406*b+-1.5372*G+-.4986*ye,Xe=-.9689*b+1.8758*G+.0415*ye,vt=.0557*b+-.204*G+1.057*ye,Ct=Math.pow,bt=.0031308,Et=Oe>bt?1.055*Ct(Oe,1/2.4)-.055:12.92*Oe,jt=Xe>bt?1.055*Ct(Xe,1/2.4)-.055:12.92*Xe,an=vt>bt?1.055*Ct(vt,1/2.4)-.055:12.92*vt;return new Ve(255*Et,255*jt,255*an)}if("hsl"===this.space){let{h:b,s:G,l:ye}=this;if(b/=360,G/=100,ye/=100,0===G)return ye*=255,new Ve(ye,ye,ye);const Oe=ye<.5?ye*(1+G):ye+G-ye*G,Xe=2*ye-Oe,vt=255*Ie(Xe,Oe,b+1/3),Ct=255*Ie(Xe,Oe,b),bt=255*Ie(Xe,Oe,b-1/3);return new Ve(vt,Ct,bt)}if("cmyk"===this.space){const{c:b,m:G,y:ye,k:Oe}=this,Xe=255*(1-Math.min(1,b*(1-Oe)+Oe)),vt=255*(1-Math.min(1,G*(1-Oe)+Oe)),Ct=255*(1-Math.min(1,ye*(1-Oe)+Oe));return new Ve(Xe,vt,Ct)}return this}toArray(){const{_a:b,_b:G,_c:ye,_d:Oe,space:Xe}=this;return[b,G,ye,Oe,Xe]}toHex(){const[b,G,ye]=this._clamped().map(yt);return`#${b}${G}${ye}`}toRgb(){const[b,G,ye]=this._clamped();return`rgb(${b},${G},${ye})`}toString(){return this.toHex()}xyz(){const{_a:b,_b:G,_c:ye}=this.rgb(),[Oe,Xe,vt]=[b,G,ye].map(Qr=>Qr/255),Ct=Oe>.04045?Math.pow((Oe+.055)/1.055,2.4):Oe/12.92,bt=Xe>.04045?Math.pow((Xe+.055)/1.055,2.4):Xe/12.92,Et=vt>.04045?Math.pow((vt+.055)/1.055,2.4):vt/12.92,jt=(.4124*Ct+.3576*bt+.1805*Et)/.95047,an=(.2126*Ct+.7152*bt+.0722*Et)/1,Rr=(.0193*Ct+.1192*bt+.9505*Et)/1.08883,lr=jt>.008856?Math.pow(jt,1/3):7.787*jt+16/116,Wr=an>.008856?Math.pow(an,1/3):7.787*an+16/116,wr=Rr>.008856?Math.pow(Rr,1/3):7.787*Rr+16/116;return new Ve(lr,Wr,wr,"xyz")}_clamped(){const{_a:b,_b:G,_c:ye}=this.rgb(),{max:Oe,min:Xe,round:vt}=Math;return[b,G,ye].map(bt=>Oe(0,Xe(vt(bt),255)))}}class tt{constructor(...b){this.init(...b)}clone(){return new tt(this)}init(b,G){const Oe=Array.isArray(b)?{x:b[0],y:b[1]}:"object"==typeof b?{x:b.x,y:b.y}:{x:b,y:G};return this.x=null==Oe.x?0:Oe.x,this.y=null==Oe.y?0:Oe.y,this}toArray(){return[this.x,this.y]}transform(b){return this.clone().transformO(b)}transformO(b){Ft.isMatrixLike(b)||(b=new Ft(b));const{x:G,y:ye}=this;return this.x=b.a*G+b.c*ye+b.e,this.y=b.b*G+b.d*ye+b.f,this}}function ln(Q,b,G){return Math.abs(b-Q)<(G||1e-6)}class Ft{constructor(...b){this.init(...b)}static formatTransforms(b){const G="both"===b.flip||!0===b.flip,ye=b.flip&&(G||"x"===b.flip)?-1:1,Oe=b.flip&&(G||"y"===b.flip)?-1:1,Xe=b.skew&&b.skew.length?b.skew[0]:isFinite(b.skew)?b.skew:isFinite(b.skewX)?b.skewX:0,vt=b.skew&&b.skew.length?b.skew[1]:isFinite(b.skew)?b.skew:isFinite(b.skewY)?b.skewY:0,Ct=b.scale&&b.scale.length?b.scale[0]*ye:isFinite(b.scale)?b.scale*ye:isFinite(b.scaleX)?b.scaleX*ye:ye,bt=b.scale&&b.scale.length?b.scale[1]*Oe:isFinite(b.scale)?b.scale*Oe:isFinite(b.scaleY)?b.scaleY*Oe:Oe,Et=b.shear||0,jt=b.rotate||b.theta||0,an=new tt(b.origin||b.around||b.ox||b.originX,b.oy||b.originY),Rr=an.x,lr=an.y,Wr=new tt(b.position||b.px||b.positionX||NaN,b.py||b.positionY||NaN),wr=Wr.x,nr=Wr.y,Qr=new tt(b.translate||b.tx||b.translateX,b.ty||b.translateY),bi=Qr.x,Pi=Qr.y,Ii=new tt(b.relative||b.rx||b.relativeX,b.ry||b.relativeY);return{scaleX:Ct,scaleY:bt,skewX:Xe,skewY:vt,shear:Et,theta:jt,rx:Ii.x,ry:Ii.y,tx:bi,ty:Pi,ox:Rr,oy:lr,px:wr,py:nr}}static fromArray(b){return{a:b[0],b:b[1],c:b[2],d:b[3],e:b[4],f:b[5]}}static isMatrixLike(b){return null!=b.a||null!=b.b||null!=b.c||null!=b.d||null!=b.e||null!=b.f}static matrixMultiply(b,G,ye){const Xe=b.b*G.a+b.d*G.b,vt=b.a*G.c+b.c*G.d,Ct=b.b*G.c+b.d*G.d,bt=b.e+b.a*G.e+b.c*G.f,Et=b.f+b.b*G.e+b.d*G.f;return ye.a=b.a*G.a+b.c*G.b,ye.b=Xe,ye.c=vt,ye.d=Ct,ye.e=bt,ye.f=Et,ye}around(b,G,ye){return this.clone().aroundO(b,G,ye)}aroundO(b,G,ye){const Oe=b||0,Xe=G||0;return this.translateO(-Oe,-Xe).lmultiplyO(ye).translateO(Oe,Xe)}clone(){return new Ft(this)}decompose(b=0,G=0){const ye=this.a,Oe=this.b,Xe=this.c,vt=this.d,Ct=this.e,bt=this.f,Et=ye*vt-Oe*Xe,jt=Et>0?1:-1,an=jt*Math.sqrt(ye*ye+Oe*Oe),Rr=Math.atan2(jt*Oe,jt*ye),lr=180/Math.PI*Rr,Wr=Math.cos(Rr),wr=Math.sin(Rr),nr=(ye*Xe+Oe*vt)/Et,Qr=Xe*an/(nr*ye-Oe)||vt*an/(nr*Oe+ye);return{scaleX:an,scaleY:Qr,shear:nr,rotate:lr,translateX:Ct-b+b*Wr*an+G*(nr*Wr*an-wr*Qr),translateY:bt-G+b*wr*an+G*(nr*wr*an+Wr*Qr),originX:b,originY:G,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(b){if(b===this)return!0;const G=new Ft(b);return ln(this.a,G.a)&&ln(this.b,G.b)&&ln(this.c,G.c)&&ln(this.d,G.d)&&ln(this.e,G.e)&&ln(this.f,G.f)}flip(b,G){return this.clone().flipO(b,G)}flipO(b,G){return"x"===b?this.scaleO(-1,1,G,0):"y"===b?this.scaleO(1,-1,0,G):this.scaleO(-1,-1,b,G||b)}init(b){const G=Ft.fromArray([1,0,0,1,0,0]);return b=b instanceof Ri?b.matrixify():"string"==typeof b?Ft.fromArray(b.split(Zt).map(parseFloat)):Array.isArray(b)?Ft.fromArray(b):"object"==typeof b&&Ft.isMatrixLike(b)?b:"object"==typeof b?(new Ft).transform(b):6===arguments.length?Ft.fromArray([].slice.call(arguments)):G,this.a=null!=b.a?b.a:G.a,this.b=null!=b.b?b.b:G.b,this.c=null!=b.c?b.c:G.c,this.d=null!=b.d?b.d:G.d,this.e=null!=b.e?b.e:G.e,this.f=null!=b.f?b.f:G.f,this}inverse(){return this.clone().inverseO()}inverseO(){const b=this.a,G=this.b,ye=this.c,Oe=this.d,Xe=this.e,vt=this.f,Ct=b*Oe-G*ye;if(!Ct)throw new Error("Cannot invert "+this);const bt=Oe/Ct,Et=-G/Ct,jt=-ye/Ct,an=b/Ct,Rr=-(bt*Xe+jt*vt),lr=-(Et*Xe+an*vt);return this.a=bt,this.b=Et,this.c=jt,this.d=an,this.e=Rr,this.f=lr,this}lmultiply(b){return this.clone().lmultiplyO(b)}lmultiplyO(b){const ye=b instanceof Ft?b:new Ft(b);return Ft.matrixMultiply(ye,this,this)}multiply(b){return this.clone().multiplyO(b)}multiplyO(b){const ye=b instanceof Ft?b:new Ft(b);return Ft.matrixMultiply(this,ye,this)}rotate(b,G,ye){return this.clone().rotateO(b,G,ye)}rotateO(b,G=0,ye=0){b=k(b);const Oe=Math.cos(b),Xe=Math.sin(b),{a:vt,b:Ct,c:bt,d:Et,e:jt,f:an}=this;return this.a=vt*Oe-Ct*Xe,this.b=Ct*Oe+vt*Xe,this.c=bt*Oe-Et*Xe,this.d=Et*Oe+bt*Xe,this.e=jt*Oe-an*Xe+ye*Xe-G*Oe+G,this.f=an*Oe+jt*Xe-G*Xe-ye*Oe+ye,this}scale(b,G,ye,Oe){return this.clone().scaleO(...arguments)}scaleO(b,G=b,ye=0,Oe=0){3===arguments.length&&(Oe=ye,ye=G,G=b);const{a:Xe,b:vt,c:Ct,d:bt,e:Et,f:jt}=this;return this.a=Xe*b,this.b=vt*G,this.c=Ct*b,this.d=bt*G,this.e=Et*b-ye*b+ye,this.f=jt*G-Oe*G+Oe,this}shear(b,G,ye){return this.clone().shearO(b,G,ye)}shearO(b,G=0,ye=0){const{a:Oe,b:Xe,c:vt,d:Ct,e:bt,f:Et}=this;return this.a=Oe+Xe*b,this.c=vt+Ct*b,this.e=bt+Et*b-ye*b,this}skew(b,G,ye,Oe){return this.clone().skewO(...arguments)}skewO(b,G=b,ye=0,Oe=0){3===arguments.length&&(Oe=ye,ye=G,G=b),b=k(b),G=k(G);const Xe=Math.tan(b),vt=Math.tan(G),{a:Ct,b:bt,c:Et,d:jt,e:an,f:Rr}=this;return this.a=Ct+bt*Xe,this.b=bt+Ct*vt,this.c=Et+jt*Xe,this.d=jt+Et*vt,this.e=an+Rr*Xe-Oe*Xe,this.f=Rr+an*vt-ye*vt,this}skewX(b,G,ye){return this.skew(b,0,G,ye)}skewY(b,G,ye){return this.skew(0,b,G,ye)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(b){if(Ft.isMatrixLike(b))return new Ft(b).multiplyO(this);const G=Ft.formatTransforms(b),{x:Oe,y:Xe}=new tt(G.ox,G.oy).transform(this),vt=(new Ft).translateO(G.rx,G.ry).lmultiplyO(this).translateO(-Oe,-Xe).scaleO(G.scaleX,G.scaleY).skewO(G.skewX,G.skewY).shearO(G.shear).rotateO(G.theta).translateO(Oe,Xe);if(isFinite(G.px)||isFinite(G.py)){const Ct=new tt(Oe,Xe).transform(vt),bt=isFinite(G.px)?G.px-Ct.x:0,Et=isFinite(G.py)?G.py-Ct.y:0;vt.translateO(bt,Et)}return vt.translateO(G.tx,G.ty),vt}translate(b,G){return this.clone().translateO(b,G)}translateO(b,G){return this.e+=b||0,this.f+=G||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}function ti(){if(!ti.nodes){const Q=Ze().size(2,0);Q.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),Q.attr("focusable","false"),Q.attr("aria-hidden","true");const b=Q.path().node;ti.nodes={svg:Q,path:b}}return ti.nodes.svg.node.parentNode||ti.nodes.svg.addTo(B.document.body||B.document.documentElement),ti.nodes}function ni(Q){return!(Q.width||Q.height||Q.x||Q.y)}rt(Ft,"Matrix");class $t{constructor(...b){this.init(...b)}addOffset(){return this.x+=B.window.pageXOffset,this.y+=B.window.pageYOffset,new $t(this)}init(b){return b="string"==typeof b?b.split(Zt).map(parseFloat):Array.isArray(b)?b:"object"==typeof b?[null!=b.left?b.left:b.x,null!=b.top?b.top:b.y,b.width,b.height]:4===arguments.length?[].slice.call(arguments):[0,0,0,0],this.x=b[0]||0,this.y=b[1]||0,this.width=this.w=b[2]||0,this.height=this.h=b[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return ni(this)}merge(b){const G=Math.min(this.x,b.x),ye=Math.min(this.y,b.y),Oe=Math.max(this.x+this.width,b.x+b.width)-G,Xe=Math.max(this.y+this.height,b.y+b.height)-ye;return new $t(G,ye,Oe,Xe)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(b){b instanceof Ft||(b=new Ft(b));let G=1/0,ye=-1/0,Oe=1/0,Xe=-1/0;return[new tt(this.x,this.y),new tt(this.x2,this.y),new tt(this.x,this.y2),new tt(this.x2,this.y2)].forEach(function(Ct){Ct=Ct.transform(b),G=Math.min(G,Ct.x),ye=Math.max(ye,Ct.x),Oe=Math.min(Oe,Ct.y),Xe=Math.max(Xe,Ct.y)}),new $t(G,Oe,ye-G,Xe-Oe)}}function ri(Q,b,G){let ye;try{if(ye=b(Q.node),ni(ye)&&!function Cr(Q){return Q===B.document||(B.document.documentElement.contains||function(b){for(;b.parentNode;)b=b.parentNode;return b===B.document}).call(B.document.documentElement,Q)}(Q.node))throw new Error("Element not in the dom")}catch(Oe){ye=G(Q)}return ye}ee({viewbox:{viewbox(Q,b,G,ye){return null==Q?new $t(this.attr("viewBox")):this.attr("viewBox",new $t(Q,b,G,ye))},zoom(Q,b){let{width:G,height:ye}=this.attr(["width","height"]);if((!G&&!ye||"string"==typeof G||"string"==typeof ye)&&(G=this.node.clientWidth,ye=this.node.clientHeight),!G||!ye)throw new Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");const Oe=this.viewbox(),Xe=G/Oe.width,vt=ye/Oe.height,Ct=Math.min(Xe,vt);if(null==Q)return Ct;let bt=Ct/Q;bt===1/0&&(bt=Number.MAX_SAFE_INTEGER/100),b=b||new tt(G/2/Xe+Oe.x,ye/2/vt+Oe.y);const Et=new $t(Oe).transform(new Ft({scale:bt,origin:b}));return this.viewbox(Et)}}}),rt($t,"Box");class Ir extends Array{constructor(b=[],...G){if(super(b,...G),"number"==typeof b)return this;this.length=0,this.push(...b)}}st([Ir],{each(Q,...b){return this.map("function"==typeof Q?(G,ye,Oe)=>Q.call(G,G,ye,Oe):G=>G[Q](...b))},toArray(){return Array.prototype.concat.apply([],this)}});const Fa=["toArray","constructor","each"];function Yi(Q,b){return new Ir(he((b||B.document).querySelectorAll(Q),function(G){return je(G)}))}Ir.extend=function(Q){Q=Q.reduce((b,G)=>(Fa.includes(G)||"_"===G[0]||(b[G]=function(...ye){return this.each(G,...ye)}),b),{}),st([Ir],Q)};let Kt=0;const Za={};function Ua(Q){let b=Q.getEventHolder();return b===B.window&&(b=Za),b.events||(b.events={}),b.events}function Va(Q){return Q.getEventTarget()}function kr(Q,b,G,ye,Oe){const Xe=G.bind(ye||Q),vt=Ze(Q),Ct=Ua(vt),bt=Va(vt);b=Array.isArray(b)?b:b.split(Zt),G._svgjsListenerId||(G._svgjsListenerId=++Kt),b.forEach(function(Et){const jt=Et.split(".")[0],an=Et.split(".")[1]||"*";Ct[jt]=Ct[jt]||{},Ct[jt][an]=Ct[jt][an]||{},Ct[jt][an][G._svgjsListenerId]=Xe,bt.addEventListener(jt,Xe,Oe||!1)})}function Ei(Q,b,G,ye){const Oe=Ze(Q),Xe=Ua(Oe),vt=Va(Oe);"function"==typeof G&&!(G=G._svgjsListenerId)||(b=Array.isArray(b)?b:(b||"").split(Zt)).forEach(function(Ct){const bt=Ct&&Ct.split(".")[0],Et=Ct&&Ct.split(".")[1];let jt,an;if(G)Xe[bt]&&Xe[bt][Et||"*"]&&(vt.removeEventListener(bt,Xe[bt][Et||"*"][G],ye||!1),delete Xe[bt][Et||"*"][G]);else if(bt&&Et){if(Xe[bt]&&Xe[bt][Et]){for(an in Xe[bt][Et])Ei(vt,[bt,Et].join("."),an);delete Xe[bt][Et]}}else if(Et)for(Ct in Xe)for(jt in Xe[Ct])Et===jt&&Ei(vt,[Ct,Et].join("."));else if(bt){if(Xe[bt]){for(jt in Xe[bt])Ei(vt,[bt,jt].join("."));delete Xe[bt]}}else{for(Ct in Xe)Ei(vt,Ct);!function qt(Q){let b=Q.getEventHolder();b===B.window&&(b=Za),b.events&&(b.events={})}(Oe)}})}class or extends oe{addEventListener(){}dispatch(b,G,ye){return function es(Q,b,G,ye){const Oe=Va(Q);return b instanceof B.window.Event||(b=new B.window.CustomEvent(b,Xd({detail:G,cancelable:!0},ye))),Oe.dispatchEvent(b),b}(this,b,G,ye)}dispatchEvent(b){const G=this.getEventHolder().events;if(!G)return!0;const ye=G[b.type];for(const Oe in ye)for(const Xe in ye[Oe])ye[Oe][Xe](b);return!b.defaultPrevented}fire(b,G,ye){return this.dispatch(b,G,ye),this}getEventHolder(){return this}getEventTarget(){return this}off(b,G,ye){return Ei(this,b,G,ye),this}on(b,G,ye,Oe){return kr(this,b,G,ye,Oe),this}removeEventListener(){}}function oo(){}rt(or,"EventTarget");const Ha_duration=400,Ha_ease=">",Ha_delay=0,As={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"};class ua extends Array{constructor(...b){super(...b),this.init(...b)}clone(){return new this.constructor(this)}init(b){return"number"==typeof b||(this.length=0,this.push(...this.parse(b))),this}parse(b=[]){return b instanceof Array?b:b.trim().split(Zt).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){const b=[];return b.push(...this),b}}class In{constructor(...b){this.init(...b)}convert(b){return new In(this.value,b)}divide(b){return b=new In(b),new In(this/b,this.unit||b.unit)}init(b,G){return G=Array.isArray(b)?b[1]:G,b=Array.isArray(b)?b[0]:b,this.value=0,this.unit=G||"","number"==typeof b?this.value=isNaN(b)?0:isFinite(b)?b:b<0?-34e37:34e37:"string"==typeof b?(G=b.match(vr))&&(this.value=parseFloat(G[1]),"%"===G[5]?this.value/=100:"s"===G[5]&&(this.value*=1e3),this.unit=G[5]):b instanceof In&&(this.value=b.valueOf(),this.unit=b.unit),this}minus(b){return b=new In(b),new In(this-b,this.unit||b.unit)}plus(b){return b=new In(b),new In(this+b,this.unit||b.unit)}times(b){return b=new In(b),new In(this*b,this.unit||b.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return("%"===this.unit?~~(1e8*this.value)/1e6:"s"===this.unit?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}}const pl=[];class Qi extends or{constructor(b,G){super(),this.node=b,this.type=b.nodeName,G&&b!==G&&this.attr(G)}add(b,G){return(b=Ze(b)).removeNamespace&&this.node instanceof B.window.SVGElement&&b.removeNamespace(),null==G?this.node.appendChild(b.node):b.node!==this.node.childNodes[G]&&this.node.insertBefore(b.node,this.node.childNodes[G]),this}addTo(b,G){return Ze(b).put(this,G)}children(){return new Ir(he(this.node.children,function(b){return je(b)}))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(b=!0){return this.writeDataToDom(),new this.constructor(gt(this.node.cloneNode(b)))}each(b,G){const ye=this.children();let Oe,Xe;for(Oe=0,Xe=ye.length;Oe<Xe;Oe++)b.apply(ye[Oe],[Oe,ye]),G&&ye[Oe].each(b,G);return this}element(b,G){return this.put(new Qi(Me(b),G))}first(){return je(this.node.firstChild)}get(b){return je(this.node.childNodes[b])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(b){return this.index(b)>=0}html(b,G){return this.xml(b,G,"http://www.w3.org/1999/xhtml")}id(b){return void 0===b&&!this.node.id&&(this.node.id=pt(this.type)),this.attr("id",b)}index(b){return[].slice.call(this.node.childNodes).indexOf(b.node)}last(){return je(this.node.lastChild)}matches(b){const G=this.node,ye=G.matches||G.matchesSelector||G.msMatchesSelector||G.mozMatchesSelector||G.webkitMatchesSelector||G.oMatchesSelector||null;return ye&&ye.call(G,b)}parent(b){let G=this;if(!G.node.parentNode)return null;if(G=je(G.node.parentNode),!b)return G;do{if("string"==typeof b?G.matches(b):G instanceof b)return G}while(G=je(G.node.parentNode));return G}put(b,G){return b=Ze(b),this.add(b,G),b}putIn(b,G){return Ze(b).add(this,G)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(b){return this.node.removeChild(b.node),this}replace(b){return b=Ze(b),this.node.parentNode&&this.node.parentNode.replaceChild(b.node,this.node),b}round(b=2,G=null){const ye=10**b,Oe=this.attr(G);for(const Xe in Oe)"number"==typeof Oe[Xe]&&(Oe[Xe]=Math.round(Oe[Xe]*ye)/ye);return this.attr(Oe),this}svg(b,G){return this.xml(b,G,P)}toString(){return this.id()}words(b){return this.node.textContent=b,this}wrap(b){const G=this.parent();if(!G)return this.addTo(b);const ye=G.index(this);return G.put(b,ye).put(this)}writeDataToDom(){return this.each(function(){this.writeDataToDom()}),this}xml(b,G,ye){if("boolean"==typeof b&&(ye=G,G=b,b=null),null==b||"function"==typeof b){G=null==G||G,this.writeDataToDom();let Ct=this;if(null!=b){if(Ct=je(Ct.node.cloneNode(!0)),G){const bt=b(Ct);if(Ct=bt||Ct,!1===bt)return""}Ct.each(function(){const bt=b(this),Et=bt||this;!1===bt?this.remove():bt&&this!==Et&&this.replace(Et)},!0)}return G?Ct.node.outerHTML:Ct.node.innerHTML}G=null!=G&&G;const Oe=Me("wrapper",ye),Xe=B.document.createDocumentFragment();Oe.innerHTML=b;for(let Ct=Oe.children.length;Ct--;)Xe.appendChild(Oe.firstElementChild);const vt=this.parent();return G?this.replace(Xe)&&vt:this.add(Xe)}}st(Qi,{attr:function ns(Q,b,G){if(null==Q){Q={},b=this.node.attributes;for(const ye of b)Q[ye.nodeName]=Dn.test(ye.nodeValue)?parseFloat(ye.nodeValue):ye.nodeValue;return Q}if(Q instanceof Array)return Q.reduce((ye,Oe)=>(ye[Oe]=this.attr(Oe),ye),{});if("object"==typeof Q&&Q.constructor===Object)for(b in Q)this.attr(b,Q[b]);else if(null===b)this.node.removeAttribute(Q);else{if(null==b)return null==(b=this.node.getAttribute(Q))?As[Q]:Dn.test(b)?parseFloat(b):b;"number"==typeof(b=pl.reduce((ye,Oe)=>Oe(Q,ye,this),b))?b=new In(b):Ve.isColor(b)?b=new Ve(b):b.constructor===Array&&(b=new ua(b)),"leading"===Q?this.leading&&this.leading(b):"string"==typeof G?this.node.setAttributeNS(G,Q,b.toString()):this.node.setAttribute(Q,b.toString()),this.rebuild&&("font-size"===Q||"x"===Q)&&this.rebuild()}return this},find:function Ba(Q){return Yi(Q,this.node)},findOne:function Ds(Q){return je(this.node.querySelector(Q))}}),rt(Qi,"Dom");class Ri extends Qi{constructor(b,G){super(b,G),this.dom={},this.node.instance=this,b.hasAttribute("svgjs:data")&&this.setData(JSON.parse(b.getAttribute("svgjs:data"))||{})}center(b,G){return this.cx(b).cy(G)}cx(b){return null==b?this.x()+this.width()/2:this.x(b-this.width()/2)}cy(b){return null==b?this.y()+this.height()/2:this.y(b-this.height()/2)}defs(){const b=this.root();return b&&b.defs()}dmove(b,G){return this.dx(b).dy(G)}dx(b=0){return this.x(new In(b).plus(this.x()))}dy(b=0){return this.y(new In(b).plus(this.y()))}getEventHolder(){return this}height(b){return this.attr("height",b)}move(b,G){return this.x(b).y(G)}parents(b=this.root()){const G="string"==typeof b;G||(b=Ze(b));const ye=new Ir;let Oe=this;for(;(Oe=Oe.parent())&&Oe.node!==B.document&&"#document-fragment"!==Oe.nodeName&&(ye.push(Oe),!(!G&&Oe.node===b.node||G&&Oe.matches(b)));)if(Oe.node===this.root().node)return null;return ye}reference(b){if(!(b=this.attr(b)))return null;const G=(b+"").match(Sr);return G?Ze(G[1]):null}root(){const b=this.parent(function ct(Q){return M[Q]}(be));return b&&b.root()}setData(b){return this.dom=b,this}size(b,G){const ye=R(this,b,G);return this.width(new In(ye.width)).height(new In(ye.height))}width(b){return this.attr("width",b)}writeDataToDom(){return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),super.writeDataToDom()}x(b){return this.attr("x",b)}y(b){return this.attr("y",b)}}st(Ri,{bbox:function Ra(){const G=ri(this,Oe=>Oe.getBBox(),Oe=>{try{const Xe=Oe.clone().addTo(ti().svg).show(),vt=Xe.node.getBBox();return Xe.remove(),vt}catch(Xe){throw new Error(`Getting bbox of element "${Oe.node.nodeName}" is not possible: ${Xe.toString()}`)}});return new $t(G)},rbox:function Na(Q){const ye=ri(this,Xe=>Xe.getBoundingClientRect(),Xe=>{throw new Error(`Getting rbox of element "${Xe.node.nodeName}" is not possible`)}),Oe=new $t(ye);return Q?Oe.transform(Q.screenCTM().inverseO()):Oe.addOffset()},inside:function ar(Q,b){const G=this.bbox();return Q>G.x&&b>G.y&&Q<G.x+G.width&&b<G.y+G.height},point:function Mt(Q,b){return new tt(Q,b).transform(this.screenCTM().inverse())},ctm:function jn(){return new Ft(this.node.getCTM())},screenCTM:function Nr(){if("function"==typeof this.isRoot&&!this.isRoot()){const Q=this.rect(1,1),b=Q.node.getScreenCTM();return Q.remove(),new Ft(b)}return new Ft(this.node.getScreenCTM())}}),rt(Ri,"Element");const so={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(Q,b){return"color"===b?Q:Q+"-"+b}};["fill","stroke"].forEach(function(Q){const b={};let G;b[Q]=function(ye){if(void 0===ye)return this.attr(Q);if("string"==typeof ye||ye instanceof Ve||Ve.isRgb(ye)||ye instanceof Ri)this.attr(Q,ye);else for(G=so[Q].length-1;G>=0;G--)null!=ye[so[Q][G]]&&this.attr(so.prefix(Q,so[Q][G]),ye[so[Q][G]]);return this},ee(["Element","Runner"],b)}),ee(["Element","Runner"],{matrix:function(Q,b,G,ye,Oe,Xe){return null==Q?new Ft(this):this.attr("transform",new Ft(Q,b,G,ye,Oe,Xe))},rotate:function(Q,b,G){return this.transform({rotate:Q,ox:b,oy:G},!0)},skew:function(Q,b,G,ye){return this.transform(1===arguments.length||3===arguments.length?{skew:Q,ox:b,oy:G}:{skew:[Q,b],ox:G,oy:ye},!0)},shear:function(Q,b,G){return this.transform({shear:Q,ox:b,oy:G},!0)},scale:function(Q,b,G,ye){return this.transform(1===arguments.length||3===arguments.length?{scale:Q,ox:b,oy:G}:{scale:[Q,b],ox:G,oy:ye},!0)},translate:function(Q,b){return this.transform({translate:[Q,b]},!0)},relative:function(Q,b){return this.transform({relative:[Q,b]},!0)},flip:function(Q="both",b="center"){return-1==="xybothtrue".indexOf(Q)&&(b=Q,Q="both"),this.transform({flip:Q,origin:b},!0)},opacity:function(Q){return this.attr("opacity",Q)}}),ee("radius",{radius:function(Q,b=Q){return"radialGradient"===(this._element||this).type?this.attr("r",new In(Q)):this.rx(Q).ry(b)}}),ee("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(Q){return new tt(this.node.getPointAtLength(Q))}}),ee(["Element","Runner"],{font:function(Q,b){if("object"==typeof Q){for(b in Q)this.font(b,Q[b]);return this}return"leading"===Q?this.leading(b):this.attr("anchor"===Q?"text-anchor":"size"===Q||"family"===Q||"weight"===Q||"stretch"===Q||"variant"===Q||"style"===Q?"font-"+Q:Q,b)}}),ee("Element",["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].reduce(function(Q,b){return Q[b]=function(ye){return null===ye?this.off(b):this.on(b,ye),this},Q},{})),ee("Element",{untransform:function Ms(){return this.attr("transform",null)},matrixify:function Ca(){return(this.attr("transform")||"").split(un).slice(0,-1).map(function(b){const G=b.trim().split("(");return[G[0],G[1].split(Zt).map(function(ye){return parseFloat(ye)})]}).reverse().reduce(function(b,G){return"matrix"===G[0]?b.lmultiply(Ft.fromArray(G[1])):b[G[0]].apply(b,G[1])},new Ft)},toParent:function gl(Q,b){if(this===Q)return this;const G=this.screenCTM(),ye=Q.screenCTM().inverse();return this.addTo(Q,b).untransform().transform(ye.multiply(G)),this},toRoot:function vl(Q){return this.toParent(this.root(),Q)},transform:function Os(Q,b){if(null==Q||"string"==typeof Q){const Oe=new Ft(this).decompose();return null==Q?Oe:Oe[Q]}Ft.isMatrixLike(Q)||(Q=Iy(Xd({},Q),{origin:V(Q,this)}));const ye=new Ft(!0===b?this:b||!1).transform(Q);return this.attr("transform",ye)}});class fi extends Ri{flatten(b=this,G){return this.each(function(){if(this instanceof fi)return this.flatten().ungroup()}),this}ungroup(b=this.parent(),G=b.index(this)){return G=-1===G?b.children().length:G,this.each(function(ye,Oe){return Oe[Oe.length-ye-1].toParent(b,G)}),this.remove()}}rt(fi,"Container");class Ps extends fi{constructor(b,G=b){super(Fe("defs",b),G)}flatten(){return this}ungroup(){return this}}rt(Ps,"Defs");class sr extends Ri{}function Ln(Q){return this.attr("rx",Q)}function Gr(Q){return this.attr("ry",Q)}function et(Q){return null==Q?this.cx()-this.rx():this.cx(Q+this.rx())}function xn(Q){return null==Q?this.cy()-this.ry():this.cy(Q+this.ry())}function Fr(Q){return this.attr("cx",Q)}function Rn(Q){return this.attr("cy",Q)}function Br(Q){return null==Q?2*this.rx():this.rx(new In(Q).divide(2))}function xa(Q){return null==Q?2*this.ry():this.ry(new In(Q).divide(2))}rt(sr,"Shape");var Wa={__proto__:null,rx:Ln,ry:Gr,x:et,y:xn,cx:Fr,cy:Rn,width:Br,height:xa};class Mi extends sr{constructor(b,G=b){super(Fe("ellipse",b),G)}size(b,G){const ye=R(this,b,G);return this.rx(new In(ye.width).divide(2)).ry(new In(ye.height).divide(2))}}st(Mi,Wa),ee("Container",{ellipse:zt(function(Q=0,b=Q){return this.put(new Mi).size(Q,b).move(0,0)})}),rt(Mi,"Ellipse");class Ta extends Qi{constructor(b=B.document.createDocumentFragment()){super(b)}xml(b,G,ye){if("boolean"==typeof b&&(ye=G,G=b,b=null),null==b||"function"==typeof b){const Oe=new Qi(Me("wrapper",ye));return Oe.add(this.node.cloneNode(!0)),Oe.xml(!1,ye)}return super.xml(b,!1,ye)}}function rs(Q,b){return this.attr("radialGradient"===(this._element||this).type?{fx:new In(Q),fy:new In(b)}:{x1:new In(Q),y1:new In(b)})}function lo(Q,b){return this.attr("radialGradient"===(this._element||this).type?{cx:new In(Q),cy:new In(b)}:{x2:new In(Q),y2:new In(b)})}rt(Ta,"Fragment");var Is={__proto__:null,from:rs,to:lo};class Ga extends fi{constructor(b,G){super(Fe(b+"Gradient","string"==typeof b?null:b),G)}attr(b,G,ye){return"transform"===b&&(b="gradientTransform"),super.attr(b,G,ye)}bbox(){return new $t}targets(){return Yi('svg [fill*="'+this.id()+'"]')}toString(){return this.url()}update(b){return this.clear(),"function"==typeof b&&b.call(this,this),this}url(){return'url("#'+this.id()+'")'}}st(Ga,Is),ee({Container:{gradient(...Q){return this.defs().gradient(...Q)}},Defs:{gradient:zt(function(Q,b){return this.put(new Ga(Q)).update(b)})}}),rt(Ga,"Gradient");class Ja extends fi{constructor(b,G=b){super(Fe("pattern",b),G)}attr(b,G,ye){return"transform"===b&&(b="patternTransform"),super.attr(b,G,ye)}bbox(){return new $t}targets(){return Yi('svg [fill*="'+this.id()+'"]')}toString(){return this.url()}update(b){return this.clear(),"function"==typeof b&&b.call(this,this),this}url(){return'url("#'+this.id()+'")'}}ee({Container:{pattern(...Q){return this.defs().pattern(...Q)}},Defs:{pattern:zt(function(Q,b,G){return this.put(new Ja).update(G).attr({x:0,y:0,width:Q,height:b,patternUnits:"userSpaceOnUse"})})}}),rt(Ja,"Pattern");class uo extends sr{constructor(b,G=b){super(Fe("image",b),G)}load(b,G){if(!b)return this;const ye=new B.window.Image;return kr(ye,"load",function(Oe){const Xe=this.parent(Ja);0===this.width()&&0===this.height()&&this.size(ye.width,ye.height),Xe instanceof Ja&&0===Xe.width()&&0===Xe.height()&&Xe.size(this.width(),this.height()),"function"==typeof G&&G.call(this,Oe)},this),kr(ye,"load error",function(){Ei(ye)}),this.attr("href",ye.src=b,Z)}}(function ts(Q){pl.push(Q)})(function(Q,b,G){return("fill"===Q||"stroke"===Q)&&Nt.test(b)&&(b=G.root().defs().image(b)),b instanceof uo&&(b=G.root().defs().pattern(0,0,ye=>{ye.add(b)})),b}),ee({Container:{image:zt(function(Q,b){return this.put(new uo).size(0,0).load(Q,b)})}}),rt(uo,"Image");class si extends ua{bbox(){let b=-1/0,G=-1/0,ye=1/0,Oe=1/0;return this.forEach(function(Xe){b=Math.max(Xe[0],b),G=Math.max(Xe[1],G),ye=Math.min(Xe[0],ye),Oe=Math.min(Xe[1],Oe)}),new $t(ye,Oe,b-ye,G-Oe)}move(b,G){const ye=this.bbox();if(b-=ye.x,G-=ye.y,!isNaN(b)&&!isNaN(G))for(let Oe=this.length-1;Oe>=0;Oe--)this[Oe]=[this[Oe][0]+b,this[Oe][1]+G];return this}parse(b=[0,0]){const G=[];(b=b instanceof Array?Array.prototype.concat.apply([],b):b.trim().split(Zt).map(parseFloat)).length%2!=0&&b.pop();for(let ye=0,Oe=b.length;ye<Oe;ye+=2)G.push([b[ye],b[ye+1]]);return G}size(b,G){let ye;const Oe=this.bbox();for(ye=this.length-1;ye>=0;ye--)Oe.width&&(this[ye][0]=(this[ye][0]-Oe.x)*b/Oe.width+Oe.x),Oe.height&&(this[ye][1]=(this[ye][1]-Oe.y)*G/Oe.height+Oe.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){const b=[];for(let G=0,ye=this.length;G<ye;G++)b.push(this[G].join(","));return b.join(" ")}transform(b){return this.clone().transformO(b)}transformO(b){Ft.isMatrixLike(b)||(b=new Ft(b));for(let G=this.length;G--;){const[ye,Oe]=this[G];this[G][0]=b.a*ye+b.c*Oe+b.e,this[G][1]=b.b*ye+b.d*Oe+b.f}return this}}var Ya={__proto__:null,MorphArray:si,x:function co(Q){return null==Q?this.bbox().x:this.move(Q,this.bbox().y)},y:function xi(Q){return null==Q?this.bbox().y:this.move(this.bbox().x,Q)},width:function fr(Q){const b=this.bbox();return null==Q?b.width:this.size(Q,b.height)},height:function xr(Q){const b=this.bbox();return null==Q?b.height:this.size(b.width,Q)}};class Ni extends sr{constructor(b,G=b){super(Fe("line",b),G)}array(){return new si([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(b,G){return this.attr(this.array().move(b,G).toLine())}plot(b,G,ye,Oe){return null==b?this.array():(b=void 0!==G?{x1:b,y1:G,x2:ye,y2:Oe}:new si(b).toLine(),this.attr(b))}size(b,G){const ye=R(this,b,G);return this.attr(this.array().size(ye.width,ye.height).toLine())}}st(Ni,Ya),ee({Container:{line:zt(function(...Q){return Ni.prototype.plot.apply(this.put(new Ni),null!=Q[0]?Q:[0,0,0,0])})}}),rt(Ni,"Line");class Hr extends fi{constructor(b,G=b){super(Fe("marker",b),G)}height(b){return this.attr("markerHeight",b)}orient(b){return this.attr("orient",b)}ref(b,G){return this.attr("refX",b).attr("refY",G)}toString(){return"url(#"+this.id()+")"}update(b){return this.clear(),"function"==typeof b&&b.call(this,this),this}width(b){return this.attr("markerWidth",b)}}function vi(Q,b){return function(G){return null==G?this[Q]:(this[Q]=G,b&&b.call(this),this)}}ee({Container:{marker(...Q){return this.defs().marker(...Q)}},Defs:{marker:zt(function(Q,b,G){return this.put(new Hr).size(Q,b).ref(Q/2,b/2).viewbox(0,0,Q,b).attr("orient","auto").update(G)})},marker:{marker(Q,b,G,ye){let Oe=["marker"];return"all"!==Q&&Oe.push(Q),Oe=Oe.join("-"),Q=arguments[1]instanceof Hr?arguments[1]:this.defs().marker(b,G,ye),this.attr(Oe,Q)}}}),rt(Hr,"Marker");const ta={"-":function(Q){return Q},"<>":function(Q){return-Math.cos(Q*Math.PI)/2+.5},">":function(Q){return Math.sin(Q*Math.PI/2)},"<":function(Q){return 1-Math.cos(Q*Math.PI/2)},bezier:function(Q,b,G,ye){return function(Oe){return Oe<0?Q>0?b/Q*Oe:G>0?ye/G*Oe:0:Oe>1?G<1?(1-ye)/(1-G)*Oe+(ye-G)/(1-G):Q<1?(1-b)/(1-Q)*Oe+(b-Q)/(1-Q):1:3*Oe*(1-Oe)**2*b+3*Oe**2*(1-Oe)*ye+Oe**3}},steps:function(Q,b="end"){b=b.split("-").reverse()[0];let G=Q;return"none"===b?--G:"both"===b&&++G,(ye,Oe=!1)=>{let Xe=Math.floor(ye*Q);const vt=ye*Xe%1==0;return("start"===b||"both"===b)&&++Xe,Oe&&vt&&--Xe,ye>=0&&Xe<0&&(Xe=0),ye<=1&&Xe>G&&(Xe=G),Xe/G}}};class ca{done(){return!1}}class is extends ca{constructor(b=Ha_ease){super(),this.ease=ta[b]||b}step(b,G,ye){return"number"!=typeof b?ye<1?b:G:b+(G-b)*this.ease(ye)}}class ho extends ca{constructor(b){super(),this.stepper=b}done(b){return b.done}step(b,G,ye,Oe){return this.stepper(b,G,ye,Oe)}}function as(){const Q=(this._duration||500)/1e3,ye=Math.PI,Oe=Math.log((this._overshoot||0)/100+1e-10),Xe=-Oe/Math.sqrt(ye*ye+Oe*Oe),vt=3.9/(Xe*Q);this.d=2*Xe*vt,this.k=vt*vt}st(class Oi extends ho{constructor(b=500,G=0){super(),this.duration(b).overshoot(G)}step(b,G,ye,Oe){if("string"==typeof b)return b;if(Oe.done=ye===1/0,ye===1/0)return G;if(0===ye)return b;ye>100&&(ye=16);const Xe=Oe.velocity||0,vt=-this.d*Xe-this.k*(b-G),Ct=b+Xe*(ye/=1e3)+vt*ye*ye/2;return Oe.velocity=Xe+vt*ye,Oe.done=Math.abs(G-Ct)+Math.abs(Xe)<.002,Oe.done?G:Ct}},{duration:vi("_duration",as),overshoot:vi("_overshoot",as)}),st(class ba extends ho{constructor(b=.1,G=.01,ye=0,Oe=1e3){super(),this.p(b).i(G).d(ye).windup(Oe)}step(b,G,ye,Oe){if("string"==typeof b)return b;if(Oe.done=ye===1/0,ye===1/0)return G;if(0===ye)return b;const Xe=G-b;let vt=(Oe.integral||0)+Xe*ye;const Ct=(Xe-(Oe.error||0))/ye,bt=this._windup;return!1!==bt&&(vt=Math.max(-bt,Math.min(vt,bt))),Oe.error=Xe,Oe.integral=vt,Oe.done=Math.abs(Xe)<.001,Oe.done?G:b+(this.P*Xe+this.I*vt+this.D*Ct)}},{windup:vi("_windup"),p:vi("P"),i:vi("I"),d:vi("D")});const Qa={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},fo={M:function(Q,b,G){return b.x=G.x=Q[0],b.y=G.y=Q[1],["M",b.x,b.y]},L:function(Q,b){return b.x=Q[0],b.y=Q[1],["L",Q[0],Q[1]]},H:function(Q,b){return b.x=Q[0],["H",Q[0]]},V:function(Q,b){return b.y=Q[0],["V",Q[0]]},C:function(Q,b){return b.x=Q[4],b.y=Q[5],["C",Q[0],Q[1],Q[2],Q[3],Q[4],Q[5]]},S:function(Q,b){return b.x=Q[2],b.y=Q[3],["S",Q[0],Q[1],Q[2],Q[3]]},Q:function(Q,b){return b.x=Q[2],b.y=Q[3],["Q",Q[0],Q[1],Q[2],Q[3]]},T:function(Q,b){return b.x=Q[0],b.y=Q[1],["T",Q[0],Q[1]]},Z:function(Q,b,G){return b.x=G.x,b.y=G.y,["Z"]},A:function(Q,b){return b.x=Q[5],b.y=Q[6],["A",Q[0],Q[1],Q[2],Q[3],Q[4],Q[5],Q[6]]}},po="mlhvqtcsaz".split("");for(let Q=0,b=po.length;Q<b;++Q)fo[po[Q]]=function(G){return function(ye,Oe,Xe){if("H"===G)ye[0]=ye[0]+Oe.x;else if("V"===G)ye[0]=ye[0]+Oe.y;else if("A"===G)ye[5]=ye[5]+Oe.x,ye[6]=ye[6]+Oe.y;else for(let vt=0,Ct=ye.length;vt<Ct;++vt)ye[vt]=ye[vt]+(vt%2?Oe.y:Oe.x);return fo[G](ye,Oe,Xe)}}(po[Q].toUpperCase());function os(Q){return Q.segment.length&&Q.segment.length-1===Qa[Q.segment[0].toUpperCase()]}function ks(Q,b){Q.inNumber&&Fi(Q,!1);const G=dr.test(b);if(G)Q.segment=[b];else{const ye=Q.lastCommand,Oe=ye.toLowerCase(),Xe=ye===Oe;Q.segment=["m"===Oe?Xe?"l":"L":ye]}return Q.inSegment=!0,Q.lastCommand=Q.segment[0],G}function Fi(Q,b){if(!Q.inNumber)throw new Error("Parser Error");Q.number&&Q.segment.push(parseFloat(Q.number)),Q.inNumber=b,Q.number="",Q.pointSeen=!1,Q.hasExponent=!1,os(Q)&&Ne(Q)}function Ne(Q){Q.inSegment=!1,Q.absolute&&(Q.segment=function go(Q){return fo[Q.segment[0]](Q.segment.slice(1),Q.p,Q.p0)}(Q)),Q.segments.push(Q.segment)}function ot(Q){if(!Q.segment.length)return!1;const b="A"===Q.segment[0].toUpperCase(),G=Q.segment.length;return b&&(4===G||5===G)}function le(Q){return"E"===Q.lastToken.toUpperCase()}class Tt extends ua{bbox(){return ti().path.setAttribute("d",this.toString()),new $t(ti.nodes.path.getBBox())}move(b,G){const ye=this.bbox();if(b-=ye.x,G-=ye.y,!isNaN(b)&&!isNaN(G))for(let Oe,Xe=this.length-1;Xe>=0;Xe--)Oe=this[Xe][0],"M"===Oe||"L"===Oe||"T"===Oe?(this[Xe][1]+=b,this[Xe][2]+=G):"H"===Oe?this[Xe][1]+=b:"V"===Oe?this[Xe][1]+=G:"C"===Oe||"S"===Oe||"Q"===Oe?(this[Xe][1]+=b,this[Xe][2]+=G,this[Xe][3]+=b,this[Xe][4]+=G,"C"===Oe&&(this[Xe][5]+=b,this[Xe][6]+=G)):"A"===Oe&&(this[Xe][6]+=b,this[Xe][7]+=G);return this}parse(b="M0 0"){return Array.isArray(b)&&(b=Array.prototype.concat.apply([],b).toString()),function Ae(Q,b=!0){let G=0,ye="";const Oe={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:b,p0:new tt,p:new tt};for(;Oe.lastToken=ye,ye=Q.charAt(G++);)if(Oe.inSegment||!ks(Oe,ye)){if("."===ye){if(Oe.pointSeen||Oe.hasExponent){Fi(Oe,!1),--G;continue}Oe.inNumber=!0,Oe.pointSeen=!0,Oe.number+=ye;continue}if(!isNaN(parseInt(ye))){if("0"===Oe.number||ot(Oe)){Oe.inNumber=!0,Oe.number=ye,Fi(Oe,!0);continue}Oe.inNumber=!0,Oe.number+=ye;continue}if(" "===ye||","===ye){Oe.inNumber&&Fi(Oe,!1);continue}if("-"===ye){if(Oe.inNumber&&!le(Oe)){Fi(Oe,!1),--G;continue}Oe.number+=ye,Oe.inNumber=!0;continue}if("E"===ye.toUpperCase()){Oe.number+=ye,Oe.hasExponent=!0;continue}if(dr.test(ye)){if(Oe.inNumber)Fi(Oe,!1);else{if(!os(Oe))throw new Error("parser Error");Ne(Oe)}--G}}return Oe.inNumber&&Fi(Oe,!1),Oe.inSegment&&os(Oe)&&Ne(Oe),Oe.segments}(b)}size(b,G){const ye=this.bbox();let Oe,Xe;for(ye.width=0===ye.width?1:ye.width,ye.height=0===ye.height?1:ye.height,Oe=this.length-1;Oe>=0;Oe--)Xe=this[Oe][0],"M"===Xe||"L"===Xe||"T"===Xe?(this[Oe][1]=(this[Oe][1]-ye.x)*b/ye.width+ye.x,this[Oe][2]=(this[Oe][2]-ye.y)*G/ye.height+ye.y):"H"===Xe?this[Oe][1]=(this[Oe][1]-ye.x)*b/ye.width+ye.x:"V"===Xe?this[Oe][1]=(this[Oe][1]-ye.y)*G/ye.height+ye.y:"C"===Xe||"S"===Xe||"Q"===Xe?(this[Oe][1]=(this[Oe][1]-ye.x)*b/ye.width+ye.x,this[Oe][2]=(this[Oe][2]-ye.y)*G/ye.height+ye.y,this[Oe][3]=(this[Oe][3]-ye.x)*b/ye.width+ye.x,this[Oe][4]=(this[Oe][4]-ye.y)*G/ye.height+ye.y,"C"===Xe&&(this[Oe][5]=(this[Oe][5]-ye.x)*b/ye.width+ye.x,this[Oe][6]=(this[Oe][6]-ye.y)*G/ye.height+ye.y)):"A"===Xe&&(this[Oe][1]=this[Oe][1]*b/ye.width,this[Oe][2]=this[Oe][2]*G/ye.height,this[Oe][6]=(this[Oe][6]-ye.x)*b/ye.width+ye.x,this[Oe][7]=(this[Oe][7]-ye.y)*G/ye.height+ye.y);return this}toString(){return function ut(Q){let b="";for(let G=0,ye=Q.length;G<ye;G++)b+=Q[G][0],null!=Q[G][1]&&(b+=Q[G][1],null!=Q[G][2]&&(b+=" ",b+=Q[G][2],null!=Q[G][3]&&(b+=" ",b+=Q[G][3],b+=" ",b+=Q[G][4],null!=Q[G][5]&&(b+=" ",b+=Q[G][5],b+=" ",b+=Q[G][6],null!=Q[G][7]&&(b+=" ",b+=Q[G][7])))));return b+" "}(this)}}const Jt=Q=>{const b=typeof Q;return"number"===b?In:"string"===b?Ve.isColor(Q)?Ve:Zt.test(Q)?dr.test(Q)?Tt:ua:vr.test(Q)?In:nn:Zr.indexOf(Q.constructor)>-1?Q.constructor:Array.isArray(Q)?ua:"object"===b?Tn:nn};class on{constructor(b){this._stepper=b||new is("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(b){return this._morphObj.morph(this._from,this._to,b,this._stepper,this._context)}done(){return this._context.map(this._stepper.done).reduce(function(G,ye){return G&&ye},!0)}from(b){return null==b?this._from:(this._from=this._set(b),this)}stepper(b){return null==b?this._stepper:(this._stepper=b,this)}to(b){return null==b?this._to:(this._to=this._set(b),this)}type(b){return null==b?this._type:(this._type=b,this)}_set(b){this._type||this.type(Jt(b));let G=new this._type(b);return this._type===Ve&&(G=this._to?G[this._to[4]]():this._from?G[this._from[4]]():G),this._type===Tn&&(G=this._to?G.align(this._to):this._from?G.align(this._from):G),G=G.toConsumable(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(G.length)).map(Object).map(function(ye){return ye.done=!0,ye}),G}}class nn{constructor(...b){this.init(...b)}init(b){return b=Array.isArray(b)?b[0]:b,this.value=b,this}toArray(){return[this.value]}valueOf(){return this.value}}let tr=(()=>{class Q{constructor(...G){this.init(...G)}init(G){return Array.isArray(G)&&(G={scaleX:G[0],scaleY:G[1],shear:G[2],rotate:G[3],translateX:G[4],translateY:G[5],originX:G[6],originY:G[7]}),Object.assign(this,Q.defaults,G),this}toArray(){const G=this;return[G.scaleX,G.scaleY,G.shear,G.rotate,G.translateX,G.translateY,G.originX,G.originY]}}return Q.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0},Q})();const pr=(Q,b)=>Q[0]<b[0]?-1:Q[0]>b[0]?1:0;class Tn{constructor(...b){this.init(...b)}align(b){const G=this.values;for(let ye=0,Oe=G.length;ye<Oe;++ye){if(G[ye+1]===b[ye+1]){if(G[ye+1]===Ve&&b[ye+7]!==G[ye+7]){const Ct=b[ye+7],bt=new Ve(this.values.splice(ye+3,5))[Ct]().toArray();this.values.splice(ye+3,0,...bt)}ye+=G[ye+2]+2;continue}if(!b[ye+1])return this;const Xe=(new b[ye+1]).toArray();G.splice(ye,G[ye+2]+3,b[ye],b[ye+1],b[ye+2],...Xe),ye+=G[ye+2]+2}return this}init(b){if(this.values=[],Array.isArray(b))return void(this.values=b.slice());b=b||{};const G=[];for(const ye in b){const Oe=Jt(b[ye]),Xe=new Oe(b[ye]).toArray();G.push([ye,Oe,Xe.length,...Xe])}return G.sort(pr),this.values=G.reduce((ye,Oe)=>ye.concat(Oe),[]),this}toArray(){return this.values}valueOf(){const b={},G=this.values;for(;G.length;){const ye=G.shift(),Oe=G.shift(),Xe=G.shift(),vt=G.splice(0,Xe);b[ye]=new Oe(vt)}return b}}const Zr=[nn,tr,Tn];class Jr extends sr{constructor(b,G=b){super(Fe("path",b),G)}array(){return this._array||(this._array=new Tt(this.attr("d")))}clear(){return delete this._array,this}height(b){return null==b?this.bbox().height:this.size(this.bbox().width,b)}move(b,G){return this.attr("d",this.array().move(b,G))}plot(b){return null==b?this.array():this.clear().attr("d","string"==typeof b?b:this._array=new Tt(b))}size(b,G){const ye=R(this,b,G);return this.attr("d",this.array().size(ye.width,ye.height))}width(b){return null==b?this.bbox().width:this.size(b,this.bbox().height)}x(b){return null==b?this.bbox().x:this.move(b,this.bbox().y)}y(b){return null==b?this.bbox().y:this.move(this.bbox().x,b)}}Jr.prototype.MorphArray=Tt,ee({Container:{path:zt(function(Q){return this.put(new Jr).plot(Q||new Tt)})}}),rt(Jr,"Path");var de={__proto__:null,array:function ge(){return this._array||(this._array=new si(this.attr("points")))},clear:function ue(){return delete this._array,this},move:function te(Q,b){return this.attr("points",this.array().move(Q,b))},plot:function pe(Q){return null==Q?this.array():this.clear().attr("points","string"==typeof Q?Q:this._array=new si(Q))},size:function ae(Q,b){const G=R(this,Q,b);return this.attr("points",this.array().size(G.width,G.height))}};class xe extends sr{constructor(b,G=b){super(Fe("polygon",b),G)}}ee({Container:{polygon:zt(function(Q){return this.put(new xe).plot(Q||new si)})}}),st(xe,Ya),st(xe,de),rt(xe,"Polygon");class Te extends sr{constructor(b,G=b){super(Fe("polyline",b),G)}}ee({Container:{polyline:zt(function(Q){return this.put(new Te).plot(Q||new si)})}}),st(Te,Ya),st(Te,de),rt(Te,"Polyline");class Be extends sr{constructor(b,G=b){super(Fe("rect",b),G)}}st(Be,{rx:Ln,ry:Gr}),ee({Container:{rect:zt(function(Q,b){return this.put(new Be).size(Q,b)})}}),rt(Be,"Rect");class We{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(b){const G=void 0!==b.next?b:{value:b,next:null,prev:null};return this._last?(G.prev=this._last,this._last.next=G,this._last=G):(this._last=G,this._first=G),G}remove(b){b.prev&&(b.prev.next=b.next),b.next&&(b.next.prev=b.prev),b===this._last&&(this._last=b.prev),b===this._first&&(this._first=b.next),b.prev=null,b.next=null}shift(){const b=this._first;return b?(this._first=b.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,b.value):null}}const Je={nextDraw:null,frames:new We,timeouts:new We,immediates:new We,timer:()=>B.window.performance||B.window.Date,transforms:[],frame(Q){const b=Je.frames.push({run:Q});return null===Je.nextDraw&&(Je.nextDraw=B.window.requestAnimationFrame(Je._draw)),b},timeout(Q,b){b=b||0;const G=Je.timer().now()+b,ye=Je.timeouts.push({run:Q,time:G});return null===Je.nextDraw&&(Je.nextDraw=B.window.requestAnimationFrame(Je._draw)),ye},immediate(Q){const b=Je.immediates.push(Q);return null===Je.nextDraw&&(Je.nextDraw=B.window.requestAnimationFrame(Je._draw)),b},cancelFrame(Q){null!=Q&&Je.frames.remove(Q)},clearTimeout(Q){null!=Q&&Je.timeouts.remove(Q)},cancelImmediate(Q){null!=Q&&Je.immediates.remove(Q)},_draw(Q){let b=null;const G=Je.timeouts.last();for(;(b=Je.timeouts.shift())&&(Q>=b.time?b.run():Je.timeouts.push(b),b!==G););let ye=null;const Oe=Je.frames.last();for(;ye!==Oe&&(ye=Je.frames.shift());)ye.run(Q);let Xe=null;for(;Xe=Je.immediates.shift();)Xe();Je.nextDraw=Je.timeouts.first()||Je.frames.first()?B.window.requestAnimationFrame(Je._draw):null}},$e=function(Q){const b=Q.start,G=Q.runner.duration();return{start:b,duration:G,end:b+G,runner:Q.runner}},dt=function(){const Q=B.window;return(Q.performance||Q.Date).now()};class At extends or{constructor(b=dt){super(),this._timeSource=b,this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){const b=this.getLastRunnerInfo(),G=b?b.runner.duration():0;return(b?b.start:this._time)+G}getEndTimeOfTimeline(){const b=this._runners.map(G=>G.start+G.runner.duration());return Math.max(0,...b)}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(b){return this._runners[this._runnerIds.indexOf(b)]||null}pause(){return this._paused=!0,this._continue()}persist(b){return null==b?this._persist:(this._persist=b,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(b){const G=this.speed();if(null==b)return this.speed(-G);const ye=Math.abs(G);return this.speed(b?-ye:ye)}schedule(b,G,ye){if(null==b)return this._runners.map($e);let Oe=0;const Xe=this.getEndTime();if(G=G||0,null==ye||"last"===ye||"after"===ye)Oe=Xe;else if("absolute"===ye||"start"===ye)Oe=G,G=0;else if("now"===ye)Oe=this._time;else if("relative"===ye){const bt=this.getRunnerInfoById(b.id);bt&&(Oe=bt.start+G,G=0)}else{if("with-last"!==ye)throw new Error('Invalid value for the "when" parameter');{const bt=this.getLastRunnerInfo();Oe=bt?bt.start:this._time}}b.unschedule(),b.timeline(this);const vt=b.persist(),Ct={persist:null===vt?this._persist:vt,start:Oe+G,runner:b};return this._lastRunnerId=b.id,this._runners.push(Ct),this._runners.sort((bt,Et)=>bt.start-Et.start),this._runnerIds=this._runners.map(bt=>bt.runner.id),this.updateTime()._continue(),this}seek(b){return this.time(this._time+b)}source(b){return null==b?this._timeSource:(this._timeSource=b,this)}speed(b){return null==b?this._speed:(this._speed=b,this)}stop(){return this.time(0),this.pause()}time(b){return null==b?this._time:(this._time=b,this._continue(!0))}unschedule(b){const G=this._runnerIds.indexOf(b.id);return G<0||(this._runners.splice(G,1),this._runnerIds.splice(G,1),b.timeline(null)),this}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(b=!1){return Je.cancelFrame(this._nextFrame),this._nextFrame=null,b?this._stepImmediate():(this._paused||(this._nextFrame=Je.frame(this._step)),this)}_stepFn(b=!1){const G=this._timeSource();let ye=G-this._lastSourceTime;b&&(ye=0);const Oe=this._speed*ye+(this._time-this._lastStepTime);this._lastSourceTime=G,b||(this._time+=Oe,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let vt=this._runners.length;vt--;){const Ct=this._runners[vt],bt=Ct.runner;this._time-Ct.start<=0&&bt.reset()}let Xe=!1;for(let vt=0,Ct=this._runners.length;vt<Ct;vt++){const bt=this._runners[vt],Et=bt.runner;let jt=Oe;const an=this._time-bt.start;an<=0?Xe=!0:(an<jt&&(jt=an),Et.active()&&(Et.step(jt).done?!0!==bt.persist&&Et.duration()-Et.time()+this._time+bt.persist<this._time&&(Et.unschedule(),--vt,--Ct):Xe=!0))}return Xe&&!(this._speed<0&&0===this._time)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}}ee({Element:{timeline:function(Q){return null==Q?(this._timeline=this._timeline||new At,this._timeline):(this._timeline=Q,this)}}});let It=(()=>{class Q extends or{constructor(G){super(),this.id=Q.id++,G="function"==typeof(G=null==G?Ha_duration:G)?new ho(G):G,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration="number"==typeof G&&G,this._isDeclarative=G instanceof ho,this._stepper=this._isDeclarative?G:new is,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new Ft,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=!!this._isDeclarative||null}static sanitise(G,ye,Oe){let Xe=1,vt=!1,Ct=0;return ye=ye||Ha_delay,Oe=Oe||"last","object"==typeof(G=G||Ha_duration)&&!(G instanceof ca)&&(ye=G.delay||ye,Oe=G.when||Oe,vt=G.swing||vt,Xe=G.times||Xe,Ct=G.wait||Ct,G=G.duration||Ha_duration),{duration:G,delay:ye,swing:vt,times:Xe,wait:Ct,when:Oe}}active(G){return null==G?this.enabled:(this.enabled=G,this)}addTransform(G,ye){return this.transforms.lmultiplyO(G),this}after(G){return this.on("finished",G)}animate(G,ye,Oe){const Xe=Q.sanitise(G,ye,Oe),vt=new Q(Xe.duration);return this._timeline&&vt.timeline(this._timeline),this._element&&vt.element(this._element),vt.loop(Xe).schedule(Xe.delay,Xe.when)}clearTransform(){return this.transforms=new Ft,this}clearTransformsFromQueue(){(!this.done||!this._timeline||!this._timeline._runnerIds.includes(this.id))&&(this._queue=this._queue.filter(G=>!G.isTransform))}delay(G){return this.animate(0,G)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(G){return this.queue(null,G)}ease(G){return this._stepper=new is(G),this}element(G){return null==G?this._element:(this._element=G,G._prepareRunner(),this)}finish(){return this.step(1/0)}loop(G,ye,Oe){return"object"==typeof G&&(ye=G.swing,Oe=G.wait,G=G.times),this._times=G||1/0,this._swing=ye||!1,this._wait=Oe||0,!0===this._times&&(this._times=1/0),this}loops(G){const ye=this._duration+this._wait;if(null==G){const Ct=Math.floor(this._time/ye);return Math.min(Ct+(this._time-Ct*ye)/this._duration,this._times)}const Oe=Math.floor(G);return this.time(ye*Oe+this._duration*(G%1))}persist(G){return null==G?this._persist:(this._persist=G,this)}position(G){const ye=this._time,Oe=this._duration,Xe=this._wait,Ct=this._swing,bt=this._reverse;let Et;if(null==G){const lr=function(wr){const nr=Ct*Math.floor(wr%(2*(Xe+Oe))/(Xe+Oe)),Qr=nr&&!bt||!nr&&bt,bi=Math.pow(-1,Qr)*(wr%(Xe+Oe))/Oe+Qr;return Math.max(Math.min(bi,1),0)},Wr=this._times*(Xe+Oe)-Xe;return Et=ye<=0?Math.round(lr(1e-5)):ye<Wr?lr(ye):Math.round(lr(Wr-1e-5)),Et}const jt=Math.floor(this.loops()),an=Ct&&jt%2==0;return Et=jt+(an&&!bt||bt&&an?G:1-G),this.loops(Et)}progress(G){return null==G?Math.min(1,this._time/this.duration()):this.time(G*this.duration())}queue(G,ye,Oe,Xe){return this._queue.push({initialiser:G||oo,runner:ye||oo,retarget:Oe,isTransform:Xe,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted||(this.time(0),this._reseted=!0),this}reverse(G){return this._reverse=null==G?!this._reverse:G,this}schedule(G,ye,Oe){if(G instanceof At||(Oe=ye,ye=G,G=this.timeline()),!G)throw Error("Runner cannot be scheduled without timeline");return G.schedule(this,ye,Oe),this}step(G){if(!this.enabled)return this;this._time+=G=null==G?16:G;const ye=this.position(),Oe=this._lastPosition!==ye&&this._time>=0;this._lastPosition=ye;const Xe=this.duration(),vt=this._lastTime<=0&&this._time>0,Ct=this._lastTime<Xe&&this._time>=Xe;this._lastTime=this._time,vt&&this.fire("start",this);const bt=this._isDeclarative;this.done=!bt&&!Ct&&this._time>=Xe,this._reseted=!1;let Et=!1;return(Oe||bt)&&(this._initialise(Oe),this.transforms=new Ft,Et=this._run(bt?G:ye),this.fire("step",this)),this.done=this.done||Et&&bt,Ct&&this.fire("finished",this),this}time(G){return null==G?this._time:(this.step(G-this._time),this)}timeline(G){return void 0===G?this._timeline:(this._timeline=G,this)}unschedule(){const G=this.timeline();return G&&G.unschedule(this),this}_initialise(G){if(G||this._isDeclarative)for(let ye=0,Oe=this._queue.length;ye<Oe;++ye){const Xe=this._queue[ye],vt=this._isDeclarative||!Xe.initialised&&G;G=!Xe.finished,vt&&G&&(Xe.initialiser.call(this),Xe.initialised=!0)}}_rememberMorpher(G,ye){if(this._history[G]={morpher:ye,caller:this._queue[this._queue.length-1]},this._isDeclarative){const Oe=this.timeline();Oe&&Oe.play()}}_run(G){let ye=!0;for(let Oe=0,Xe=this._queue.length;Oe<Xe;++Oe){const vt=this._queue[Oe],Ct=vt.runner.call(this,G);vt.finished=vt.finished||!0===Ct,ye=ye&&vt.finished}return ye}_tryRetarget(G,ye,Oe){if(this._history[G]){if(!this._history[G].caller.initialised){const vt=this._queue.indexOf(this._history[G].caller);return this._queue.splice(vt,1),!1}this._history[G].caller.retarget?this._history[G].caller.retarget.call(this,ye,Oe):this._history[G].morpher.to(ye),this._history[G].caller.finished=!1;const Xe=this.timeline();return Xe&&Xe.play(),!0}return!1}}return Q.id=0,Q})();class Vt{constructor(b=new Ft,G=-1,ye=!0){this.transforms=b,this.id=G,this.done=ye}clearTransformsFromQueue(){}}st([It,Vt],{mergeWith(Q){return new Vt(Q.transforms.lmultiply(this.transforms),Q.id)}});const en=(Q,b)=>Q.lmultiplyO(b),Rt=Q=>Q.transforms;function cn(){const b=this._transformationRunners.runners.map(Rt).reduce(en,new Ft);this.transform(b),this._transformationRunners.merge(),1===this._transformationRunners.length()&&(this._frameId=null)}class En{constructor(){this.runners=[],this.ids=[]}add(b){if(this.runners.includes(b))return;const G=b.id+1;return this.runners.push(b),this.ids.push(G),this}clearBefore(b){const G=this.ids.indexOf(b+1)||1;return this.ids.splice(0,G,0),this.runners.splice(0,G,new Vt).forEach(ye=>ye.clearTransformsFromQueue()),this}edit(b,G){const ye=this.ids.indexOf(b+1);return this.ids.splice(ye,1,b+1),this.runners.splice(ye,1,G),this}getByID(b){return this.runners[this.ids.indexOf(b+1)]}length(){return this.ids.length}merge(){let b=null;for(let G=0;G<this.runners.length;++G){const ye=this.runners[G];if(!(b&&ye.done&&b.done)||ye._timeline&&ye._timeline._runnerIds.includes(ye.id)||b._timeline&&b._timeline._runnerIds.includes(b.id))b=ye;else{this.remove(ye.id);const Xe=ye.mergeWith(b);this.edit(b.id,Xe),b=Xe,--G}}return this}remove(b){const G=this.ids.indexOf(b+1);return this.ids.splice(G,1),this.runners.splice(G,1),this}}ee({Element:{animate(Q,b,G){const ye=It.sanitise(Q,b,G),Oe=this.timeline();return new It(ye.duration).loop(ye).element(this).timeline(Oe.play()).schedule(ye.delay,ye.when)},delay(Q,b){return this.animate(0,Q,b)},_clearTransformRunnersBefore(Q){this._transformationRunners.clearBefore(Q.id)},_currentTransform(Q){return this._transformationRunners.runners.filter(b=>b.id<=Q.id).map(Rt).reduce(en,new Ft)},_addRunner(Q){this._transformationRunners.add(Q),Je.cancelImmediate(this._frameId),this._frameId=Je.immediate(cn.bind(this))},_prepareRunner(){null==this._frameId&&(this._transformationRunners=(new En).add(new Vt(new Ft(this))))}}}),st(It,{attr(Q,b){return this.styleAttr("attr",Q,b)},css(Q,b){return this.styleAttr("css",Q,b)},styleAttr(Q,b,G){if("string"==typeof b)return this.styleAttr(Q,{[b]:G});let ye=b;if(this._tryRetarget(Q,ye))return this;let Oe=new on(this._stepper).to(ye),Xe=Object.keys(ye);return this.queue(function(){Oe=Oe.from(this.element()[Q](Xe))},function(vt){return this.element()[Q](Oe.at(vt).valueOf()),Oe.done()},function(vt){const Ct=Object.keys(vt),bt=((Q,b)=>Q.filter(G=>!b.includes(G)))(Ct,Xe);if(bt.length){const jt=this.element()[Q](bt),an=new Tn(Oe.from()).valueOf();Object.assign(an,jt),Oe.from(an)}const Et=new Tn(Oe.to()).valueOf();Object.assign(Et,vt),Oe.to(Et),Xe=Ct,ye=vt}),this._rememberMorpher(Q,Oe),this},zoom(Q,b){if(this._tryRetarget("zoom",Q,b))return this;let G=new on(this._stepper).to(new In(Q));return this.queue(function(){G=G.from(this.element().zoom())},function(ye){return this.element().zoom(G.at(ye),b),G.done()},function(ye,Oe){b=Oe,G.to(ye)}),this._rememberMorpher("zoom",G),this},transform(Q,b,G){if(b=Q.relative||b,this._isDeclarative&&!b&&this._tryRetarget("transform",Q))return this;const ye=Ft.isMatrixLike(Q);G=null!=Q.affine?Q.affine:null!=G?G:!ye;const Oe=new on(this._stepper).type(G?tr:Ft);let Xe,vt,Ct,bt,Et;return this.queue(function jt(){vt=vt||this.element(),Xe=Xe||V(Q,vt),Et=new Ft(b?void 0:vt),vt._addRunner(this),b||vt._clearTransformRunnersBefore(this)},function an(lr){b||this.clearTransform();const{x:Wr,y:wr}=new tt(Xe).transform(vt._currentTransform(this));let nr=new Ft(Iy(Xd({},Q),{origin:[Wr,wr]})),Qr=this._isDeclarative&&Ct?Ct:Et;if(G){nr=nr.decompose(Wr,wr),Qr=Qr.decompose(Wr,wr);const Pi=nr.rotate,Ii=Qr.rotate,ai=[Pi-360,Pi,Pi+360],mo=ai.map(cc=>Math.abs(cc-Ii)),Us=Math.min(...mo),_o=mo.indexOf(Us);nr.rotate=ai[_o]}b&&(ye||(nr.rotate=Q.rotate||0),this._isDeclarative&&bt&&(Qr.rotate=bt)),Oe.from(Qr),Oe.to(nr);const bi=Oe.at(lr);return bt=bi.rotate,Ct=new Ft(bi),this.addTransform(Ct),vt._addRunner(this),Oe.done()},function Rr(lr){(lr.origin||"center").toString()!==(Q.origin||"center").toString()&&(Xe=V(lr,vt)),Q=Iy(Xd({},lr),{origin:Xe})},!0),this._isDeclarative&&this._rememberMorpher("transform",Oe),this},x(Q,b){return this._queueNumber("x",Q)},y(Q){return this._queueNumber("y",Q)},dx(Q=0){return this._queueNumberDelta("x",Q)},dy(Q=0){return this._queueNumberDelta("y",Q)},dmove(Q,b){return this.dx(Q).dy(b)},_queueNumberDelta(Q,b){if(b=new In(b),this._tryRetarget(Q,b))return this;const G=new on(this._stepper).to(b);let ye=null;return this.queue(function(){ye=this.element()[Q](),G.from(ye),G.to(ye+b)},function(Oe){return this.element()[Q](G.at(Oe)),G.done()},function(Oe){G.to(ye+new In(Oe))}),this._rememberMorpher(Q,G),this},_queueObject(Q,b){if(this._tryRetarget(Q,b))return this;const G=new on(this._stepper).to(b);return this.queue(function(){G.from(this.element()[Q]())},function(ye){return this.element()[Q](G.at(ye)),G.done()}),this._rememberMorpher(Q,G),this},_queueNumber(Q,b){return this._queueObject(Q,new In(b))},cx(Q){return this._queueNumber("cx",Q)},cy(Q){return this._queueNumber("cy",Q)},move(Q,b){return this.x(Q).y(b)},center(Q,b){return this.cx(Q).cy(b)},size(Q,b){let G;return(!Q||!b)&&(G=this._element.bbox()),Q||(Q=G.width/G.height*b),b||(b=G.height/G.width*Q),this.width(Q).height(b)},width(Q){return this._queueNumber("width",Q)},height(Q){return this._queueNumber("height",Q)},plot(Q,b,G,ye){if(4===arguments.length)return this.plot([Q,b,G,ye]);if(this._tryRetarget("plot",Q))return this;const Oe=new on(this._stepper).type(this._element.MorphArray).to(Q);return this.queue(function(){Oe.from(this._element.array())},function(Xe){return this._element.plot(Oe.at(Xe)),Oe.done()}),this._rememberMorpher("plot",Oe),this},leading(Q){return this._queueNumber("leading",Q)},viewbox(Q,b,G,ye){return this._queueObject("viewbox",new $t(Q,b,G,ye))},update(Q){return"object"!=typeof Q?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(null!=Q.opacity&&this.attr("stop-opacity",Q.opacity),null!=Q.color&&this.attr("stop-color",Q.color),null!=Q.offset&&this.attr("offset",Q.offset),this)}}),st(It,{rx:Ln,ry:Gr,from:rs,to:lo}),rt(It,"Runner");class zr extends fi{constructor(b,G=b){super(Fe("svg",b),G),this.namespace()}defs(){return this.isRoot()?je(this.node.querySelector("defs"))||this.put(new Ps):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof B.window.SVGElement)&&"#document-fragment"!==this.node.parentNode.nodeName}namespace(){return this.isRoot()?this.attr({xmlns:P,version:"1.1"}).attr("xmlns:xlink",Z,H).attr("xmlns:svgjs","http://svgjs.dev/svgjs",H):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,H).attr("xmlns:svgjs",null,H)}root(){return this.isRoot()?this:super.root()}}ee({Container:{nested:zt(function(){return this.put(new zr)})}}),rt(zr,"Svg",!0);class An extends fi{constructor(b,G=b){super(Fe("symbol",b),G)}}ee({Container:{symbol:zt(function(){return this.put(new An)})}}),rt(An,"Symbol");var ls={__proto__:null,plain:function gr(Q){return!1===this._build&&this.clear(),this.node.appendChild(B.document.createTextNode(Q)),this},length:function Mr(){return this.node.getComputedTextLength()},x:function Zn(Q,b=this.bbox()){return null==Q?b.x:this.attr("x",this.attr("x")+Q-b.x)},y:function Ti(Q,b=this.bbox()){return null==Q?b.y:this.attr("y",this.attr("y")+Q-b.y)},move:function qi(Q,b,G=this.bbox()){return this.x(Q,G).y(b,G)},cx:function ss(Q,b=this.bbox()){return null==Q?b.cx:this.attr("x",this.attr("x")+Q-b.cx)},cy:function cu(Q,b=this.bbox()){return null==Q?b.cy:this.attr("y",this.attr("y")+Q-b.cy)},center:function Ls(Q,b,G=this.bbox()){return this.cx(Q,G).cy(b,G)},ax:function ml(Q){return this.attr("x",Q)},ay:function Rs(Q){return this.attr("y",Q)},amove:function Ai(Q,b){return this.ax(Q).ay(b)},build:function hi(Q){return this._build=!!Q,this}};class ii extends sr{constructor(b,G=b){super(Fe("text",b),G),this.dom.leading=new In(1.3),this._rebuild=!0,this._build=!1}leading(b){return null==b?this.dom.leading:(this.dom.leading=new In(b),this.rebuild())}rebuild(b){if("boolean"==typeof b&&(this._rebuild=b),this._rebuild){const G=this;let ye=0;const Oe=this.dom.leading;this.each(function(Xe){const vt=B.window.getComputedStyle(this.node).getPropertyValue("font-size"),Ct=Oe*new In(vt);this.dom.newLined&&(this.attr("x",G.attr("x")),"\n"===this.text()?ye+=Ct:(this.attr("dy",Xe?Ct+ye:0),ye=0))}),this.fire("rebuild")}return this}setData(b){return this.dom=b,this.dom.leading=new In(b.leading||1.3),this}text(b){if(void 0===b){const G=this.node.childNodes;let ye=0;b="";for(let Oe=0,Xe=G.length;Oe<Xe;++Oe)"textPath"!==G[Oe].nodeName?(Oe!==ye&&3!==G[Oe].nodeType&&!0===je(G[Oe]).dom.newLined&&(b+="\n"),b+=G[Oe].textContent):0===Oe&&(ye=1);return b}if(this.clear().build(!0),"function"==typeof b)b.call(this,this);else for(let G=0,ye=(b=(b+"").split("\n")).length;G<ye;G++)this.newLine(b[G]);return this.build(!1).rebuild()}}st(ii,ls),ee({Container:{text:zt(function(Q=""){return this.put(new ii).text(Q)}),plain:zt(function(Q=""){return this.put(new ii).plain(Q)})}}),rt(ii,"Text");class ra extends sr{constructor(b,G=b){super(Fe("tspan",b),G),this._build=!1}dx(b){return this.attr("dx",b)}dy(b){return this.attr("dy",b)}newLine(){this.dom.newLined=!0;const b=this.parent();if(!(b instanceof ii))return this;const G=b.index(this),ye=B.window.getComputedStyle(this.node).getPropertyValue("font-size"),Oe=b.dom.leading*new In(ye);return this.dy(G?Oe:0).attr("x",b.x())}text(b){return null==b?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof b?(this.clear().build(!0),b.call(this,this),this.build(!1)):this.plain(b),this)}}st(ra,ls),ee({Tspan:{tspan:zt(function(Q=""){const b=new ra;return this._build||this.clear(),this.put(b).text(Q)})},Text:{newLine:function(Q=""){return this.tspan(Q).newLine()}}}),rt(ra,"Tspan");class Ns extends sr{constructor(b,G=b){super(Fe("circle",b),G)}radius(b){return this.attr("r",b)}rx(b){return this.attr("r",b)}ry(b){return this.rx(b)}size(b){return this.radius(new In(b).divide(2))}}st(Ns,{x:et,y:xn,cx:Fr,cy:Rn,width:Br,height:xa}),ee({Container:{circle:zt(function(Q=0){return this.put(new Ns).size(Q).move(0,0)})}}),rt(Ns,"Circle");class hu extends fi{constructor(b,G=b){super(Fe("clipPath",b),G)}remove(){return this.targets().forEach(function(b){b.unclip()}),super.remove()}targets(){return Yi('svg [clip-path*="'+this.id()+'"]')}}ee({Container:{clip:zt(function(){return this.defs().put(new hu)})},Element:{clipper(){return this.reference("clip-path")},clipWith(Q){const b=Q instanceof hu?Q:this.parent().clip().add(Q);return this.attr("clip-path",'url("#'+b.id()+'")')},unclip(){return this.attr("clip-path",null)}}}),rt(hu,"ClipPath");class _l extends Ri{constructor(b,G=b){super(Fe("foreignObject",b),G)}}ee({Container:{foreignObject:zt(function(Q,b){return this.put(new _l).size(Q,b)})}}),rt(_l,"ForeignObject");var vo={__proto__:null,dmove:function qa(Q,b){return this.children().forEach((G,ye)=>{let Oe;try{Oe=G.bbox()}catch(bt){return}const Xe=new Ft(G),vt=Xe.translate(Q,b).transform(Xe.inverse()),Ct=new tt(Oe.x,Oe.y).transform(vt);G.move(Ct.x,Ct.y)}),this},dx:function ha(Q){return this.dmove(Q,0)},dy:function Fs(Q){return this.dmove(0,Q)},height:function Ao(Q,b=this.bbox()){return null==Q?b.height:this.size(b.width,Q,b)},move:function Sh(Q=0,b=0,G=this.bbox()){return this.dmove(Q-G.x,b-G.y)},size:function mi(Q,b,G=this.bbox()){const ye=R(this,Q,b,G),Oe=ye.width/G.width,Xe=ye.height/G.height;return this.children().forEach((vt,Ct)=>{const bt=new tt(G).transform(new Ft(vt).inverse());vt.scale(Oe,Xe,bt.x,bt.y)}),this},width:function zh(Q,b=this.bbox()){return null==Q?b.width:this.size(Q,b.height,b)},x:function du(Q,b=this.bbox()){return null==Q?b.x:this.move(Q,b.y,b)},y:function wh(Q,b=this.bbox()){return null==Q?b.y:this.move(b.x,Q,b)}};class yl extends fi{constructor(b,G=b){super(Fe("g",b),G)}}st(yl,vo),ee({Container:{group:zt(function(){return this.put(new yl)})}}),rt(yl,"G");class Sa extends fi{constructor(b,G=b){super(Fe("a",b),G)}target(b){return this.attr("target",b)}to(b){return this.attr("href",b,Z)}}st(Sa,vo),ee({Container:{link:zt(function(Q){return this.put(new Sa).to(Q)})},Element:{unlink(){const Q=this.linker();if(!Q)return this;const b=Q.parent();if(!b)return this.remove();const G=b.index(Q);return b.add(this,G),Q.remove(),this},linkTo(Q){let b=this.linker();return b||(b=new Sa,this.wrap(b)),"function"==typeof Q?Q.call(b,b):b.to(Q),this},linker(){const Q=this.parent();return Q&&"a"===Q.node.nodeName.toLowerCase()?Q:null}}}),rt(Sa,"A");class pi extends fi{constructor(b,G=b){super(Fe("mask",b),G)}remove(){return this.targets().forEach(function(b){b.unmask()}),super.remove()}targets(){return Yi('svg [mask*="'+this.id()+'"]')}}ee({Container:{mask:zt(function(){return this.defs().put(new pi)})},Element:{masker(){return this.reference("mask")},maskWith(Q){const b=Q instanceof pi?Q:this.parent().mask().add(Q);return this.attr("mask",'url("#'+b.id()+'")')},unmask(){return this.attr("mask",null)}}}),rt(pi,"Mask");class Bs extends Ri{constructor(b,G=b){super(Fe("stop",b),G)}update(b){return("number"==typeof b||b instanceof In)&&(b={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=b.opacity&&this.attr("stop-opacity",b.opacity),null!=b.color&&this.attr("stop-color",b.color),null!=b.offset&&this.attr("offset",new In(b.offset)),this}}ee({Gradient:{stop:function(Q,b,G){return this.put(new Bs).update(Q,b,G)}}}),rt(Bs,"Stop");class Cl extends Ri{constructor(b,G=b){super(Fe("style",b),G)}addText(b=""){return this.node.textContent+=b,this}font(b,G,ye={}){return this.rule("@font-face",Xd({fontFamily:b,src:G},ye))}rule(b,G){return this.addText(function ef(Q,b){if(!Q)return"";if(!b)return Q;let G=Q+"{";for(const ye in b)G+=ie(ye)+":"+b[ye]+";";return G+="}",G}(b,G))}}ee("Dom",{style(Q,b){return this.put(new Cl).rule(Q,b)},fontface(Q,b,G){return this.put(new Cl).font(Q,b,G)}}),rt(Cl,"Style");class us extends ii{constructor(b,G=b){super(Fe("textPath",b),G)}array(){const b=this.track();return b?b.array():null}plot(b){const G=this.track();let ye=null;return G&&(ye=G.plot(b)),null==b?ye:this}track(){return this.reference("href")}}ee({Container:{textPath:zt(function(Q,b){return Q instanceof ii||(Q=this.text(Q)),Q.path(b)})},Text:{path:zt(function(Q,b=!0){const G=new us;let ye;if(Q instanceof Jr||(Q=this.defs().path(Q)),G.attr("href","#"+Q,Z),b)for(;ye=this.node.firstChild;)G.node.appendChild(ye);return this.put(G)}),textPath(){return this.findOne("textPath")}},Path:{text:zt(function(Q){return Q instanceof ii||(Q=(new ii).addTo(this.parent()).text(Q)),Q.path(this)}),targets(){return Yi("svg textPath").filter(Q=>(Q.attr("href")||"").includes(this.id()))}}}),us.prototype.MorphArray=Tt,rt(us,"TextPath");class Zs extends sr{constructor(b,G=b){super(Fe("use",b),G)}use(b,G){return this.attr("href",(G||"")+"#"+b,Z)}}ee({Container:{use:zt(function(Q,b){return this.put(new Zs).use(Q,b)})}}),rt(Zs,"Use");const Yr=Ze;st([zr,An,uo,Ja,Hr],j("viewbox")),st([Ni,Te,xe,Jr],j("marker")),st(ii,j("Text")),st(Jr,j("Path")),st(Ps,j("Defs")),st([ii,ra],j("Tspan")),st([Be,Mi,Ga,It],j("radius")),st(or,j("EventTarget")),st(Qi,j("Dom")),st(Ri,j("Element")),st(sr,j("Shape")),st([fi,Ta],j("Container")),st(Ga,j("Gradient")),st(It,j("Runner")),Ir.extend(function S(){return[...new Set(O)]}()),function na(Q=[]){Zr.push(...[].concat(Q))}([In,Ve,$t,Ft,ua,si,Tt,tt]),function Wn(){st(Zr,{to(Q){return(new on).type(this.constructor).from(this.toArray()).to(Q)},fromArray(Q){return this.init(Q),this},toConsumable(){return this.toArray()},morph(Q,b,G,ye,Oe){return this.fromArray(Q.map(function(vt,Ct){return ye.step(vt,b[Ct],G,Oe[Ct],Oe)}))}})}()},1764:function(Gt){Gt.exports=function(){"use strict";var J=6e4,e=36e5,O="millisecond",ee="second",j="minute",S="hour",fe="day",he="week",se="month",k="quarter",K="year",ne="date",ie="Invalid Date",re=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,R=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,V={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},A=function(L,D,F){var $=String(L);return!$||$.length>=D?L:""+Array(D+1-$.length).join(F)+L},P={s:A,z:function(L){var D=-L.utcOffset(),F=Math.abs(D),$=Math.floor(F/60),oe=F%60;return(D<=0?"+":"-")+A($,2,"0")+":"+A(oe,2,"0")},m:function L(D,F){if(D.date()<F.date())return-L(F,D);var $=12*(F.year()-D.year())+(F.month()-D.month()),oe=D.clone().add($,se),M=F-oe<0,be=D.clone().add($+(M?-1:1),se);return+(-($+(F-oe)/(M?oe-be:be-oe))||0)},a:function(L){return L<0?Math.ceil(L)||0:Math.floor(L)},p:function(L){return{M:se,y:K,w:he,d:fe,D:ne,h:S,m:j,s:ee,ms:O,Q:k}[L]||String(L||"").toLowerCase().replace(/s$/,"")},u:function(L){return void 0===L}},I="en",H={};H[I]=V;var Z=function(L){return L instanceof q},U=function L(D,F,$){var oe;if(!D)return I;if("string"==typeof D){var M=D.toLowerCase();H[M]&&(oe=M),F&&(H[M]=F,oe=M);var be=D.split("-");if(!oe&&be.length>1)return L(be[0])}else{var Me=D.name;H[Me]=D,oe=Me}return!$&&oe&&(I=oe),oe||!$&&I},Y=function(L,D){if(Z(L))return L.clone();var F="object"==typeof D?D:{};return F.date=L,F.args=arguments,new q(F)},B=P;B.l=U,B.i=Z,B.w=function(L,D){return Y(L,{locale:D.$L,utc:D.$u,x:D.$x,$offset:D.$offset})};var q=function(){function L(F){this.$L=U(F.locale,null,!0),this.parse(F)}var D=L.prototype;return D.parse=function(F){this.$d=function($){var oe=$.date,M=$.utc;if(null===oe)return new Date(NaN);if(B.u(oe))return new Date;if(oe instanceof Date)return new Date(oe);if("string"==typeof oe&&!/Z$/i.test(oe)){var be=oe.match(re);if(be){var Me=be[2]-1||0,Ze=(be[7]||"0").substring(0,3);return M?new Date(Date.UTC(be[1],Me,be[3]||1,be[4]||0,be[5]||0,be[6]||0,Ze)):new Date(be[1],Me,be[3]||1,be[4]||0,be[5]||0,be[6]||0,Ze)}}return new Date(oe)}(F),this.$x=F.x||{},this.init()},D.init=function(){var F=this.$d;this.$y=F.getFullYear(),this.$M=F.getMonth(),this.$D=F.getDate(),this.$W=F.getDay(),this.$H=F.getHours(),this.$m=F.getMinutes(),this.$s=F.getSeconds(),this.$ms=F.getMilliseconds()},D.$utils=function(){return B},D.isValid=function(){return this.$d.toString()!==ie},D.isSame=function(F,$){var oe=Y(F);return this.startOf($)<=oe&&oe<=this.endOf($)},D.isAfter=function(F,$){return Y(F)<this.startOf($)},D.isBefore=function(F,$){return this.endOf($)<Y(F)},D.$g=function(F,$,oe){return B.u(F)?this[$]:this.set(oe,F)},D.unix=function(){return Math.floor(this.valueOf()/1e3)},D.valueOf=function(){return this.$d.getTime()},D.startOf=function(F,$){var oe=this,M=!!B.u($)||$,be=B.p(F),Me=function(Lt,pt){var gt=B.w(oe.$u?Date.UTC(oe.$y,pt,Lt):new Date(oe.$y,pt,Lt),oe);return M?gt:gt.endOf(fe)},Ze=function(Lt,pt){return B.w(oe.toDate()[Lt].apply(oe.toDate("s"),(M?[0,0,0,0]:[23,59,59,999]).slice(pt)),oe)},Fe=this.$W,je=this.$M,Ce=this.$D,Se="set"+(this.$u?"UTC":"");switch(be){case K:return M?Me(1,0):Me(31,11);case se:return M?Me(1,je):Me(0,je+1);case he:var rt=this.$locale().weekStart||0,ct=(Fe<rt?Fe+7:Fe)-rt;return Me(M?Ce-ct:Ce+(6-ct),je);case fe:case ne:return Ze(Se+"Hours",0);case S:return Ze(Se+"Minutes",1);case j:return Ze(Se+"Seconds",2);case ee:return Ze(Se+"Milliseconds",3);default:return this.clone()}},D.endOf=function(F){return this.startOf(F,!1)},D.$set=function(F,$){var oe,M=B.p(F),be="set"+(this.$u?"UTC":""),Me=(oe={},oe[fe]=be+"Date",oe[ne]=be+"Date",oe[se]=be+"Month",oe[K]=be+"FullYear",oe[S]=be+"Hours",oe[j]=be+"Minutes",oe[ee]=be+"Seconds",oe[O]=be+"Milliseconds",oe)[M],Ze=M===fe?this.$D+($-this.$W):$;if(M===se||M===K){var Fe=this.clone().set(ne,1);Fe.$d[Me](Ze),Fe.init(),this.$d=Fe.set(ne,Math.min(this.$D,Fe.daysInMonth())).$d}else Me&&this.$d[Me](Ze);return this.init(),this},D.set=function(F,$){return this.clone().$set(F,$)},D.get=function(F){return this[B.p(F)]()},D.add=function(F,$){var oe,M=this;F=Number(F);var be=B.p($),Me=function(je){var Ce=Y(M);return B.w(Ce.date(Ce.date()+Math.round(je*F)),M)};if(be===se)return this.set(se,this.$M+F);if(be===K)return this.set(K,this.$y+F);if(be===fe)return Me(1);if(be===he)return Me(7);var Ze=(oe={},oe[j]=J,oe[S]=e,oe[ee]=1e3,oe)[be]||1,Fe=this.$d.getTime()+F*Ze;return B.w(Fe,this)},D.subtract=function(F,$){return this.add(-1*F,$)},D.format=function(F){var $=this,oe=this.$locale();if(!this.isValid())return oe.invalidDate||ie;var M=F||"YYYY-MM-DDTHH:mm:ssZ",be=B.z(this),Me=this.$H,Ze=this.$m,Fe=this.$M,je=oe.weekdays,Ce=oe.months,Se=function(pt,gt,st,zt){return pt&&(pt[gt]||pt($,M))||st[gt].slice(0,zt)},rt=function(pt){return B.s(Me%12||12,pt,"0")},ct=oe.meridiem||function(pt,gt,st){var zt=pt<12?"AM":"PM";return st?zt.toLowerCase():zt},Lt={YY:String(this.$y).slice(-2),YYYY:this.$y,M:Fe+1,MM:B.s(Fe+1,2,"0"),MMM:Se(oe.monthsShort,Fe,Ce,3),MMMM:Se(Ce,Fe),D:this.$D,DD:B.s(this.$D,2,"0"),d:String(this.$W),dd:Se(oe.weekdaysMin,this.$W,je,2),ddd:Se(oe.weekdaysShort,this.$W,je,3),dddd:je[this.$W],H:String(Me),HH:B.s(Me,2,"0"),h:rt(1),hh:rt(2),a:ct(Me,Ze,!0),A:ct(Me,Ze,!1),m:String(Ze),mm:B.s(Ze,2,"0"),s:String(this.$s),ss:B.s(this.$s,2,"0"),SSS:B.s(this.$ms,3,"0"),Z:be};return M.replace(R,function(pt,gt){return gt||Lt[pt]||be.replace(":","")})},D.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},D.diff=function(F,$,oe){var M,be=B.p($),Me=Y(F),Ze=(Me.utcOffset()-this.utcOffset())*J,Fe=this-Me,je=B.m(this,Me);return je=(M={},M[K]=je/12,M[se]=je,M[k]=je/3,M[he]=(Fe-Ze)/6048e5,M[fe]=(Fe-Ze)/864e5,M[S]=Fe/e,M[j]=Fe/J,M[ee]=Fe/1e3,M)[be]||Fe,oe?je:B.a(je)},D.daysInMonth=function(){return this.endOf(se).$D},D.$locale=function(){return H[this.$L]},D.locale=function(F,$){if(!F)return this.$L;var oe=this.clone(),M=U(F,$,!0);return M&&(oe.$L=M),oe},D.clone=function(){return B.w(this.$d,this)},D.toDate=function(){return new Date(this.valueOf())},D.toJSON=function(){return this.isValid()?this.toISOString():null},D.toISOString=function(){return this.$d.toISOString()},D.toString=function(){return this.$d.toUTCString()},L}(),W=q.prototype;return Y.prototype=W,[["$ms",O],["$s",ee],["$m",j],["$H",S],["$W",fe],["$M",se],["$y",K],["$D",ne]].forEach(function(L){W[L[1]]=function(D){return this.$g(D,L[0],L[1])}}),Y.extend=function(L,D){return L.$i||(L(D,q,Y),L.$i=!0),Y},Y.locale=U,Y.isDayjs=Z,Y.unix=function(L){return Y(1e3*L)},Y.en=H[I],Y.Ls=H,Y.p={},Y}()},7638:function(Gt,ht,J){Gt.exports=function(e){"use strict";var ee=function O(S){return S&&"object"==typeof S&&"default"in S?S:{default:S}}(e),j={name:"zh-cn",weekdays:"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),weekdaysShort:"\u5468\u65e5_\u5468\u4e00_\u5468\u4e8c_\u5468\u4e09_\u5468\u56db_\u5468\u4e94_\u5468\u516d".split("_"),weekdaysMin:"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_"),months:"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),ordinal:function(S,fe){return"W"===fe?S+"\u5468":S+"\u65e5"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5e74M\u6708D\u65e5",LLL:"YYYY\u5e74M\u6708D\u65e5Ah\u70b9mm\u5206",LLLL:"YYYY\u5e74M\u6708D\u65e5ddddAh\u70b9mm\u5206",l:"YYYY/M/D",ll:"YYYY\u5e74M\u6708D\u65e5",lll:"YYYY\u5e74M\u6708D\u65e5 HH:mm",llll:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm"},relativeTime:{future:"%s\u5185",past:"%s\u524d",s:"\u51e0\u79d2",m:"1 \u5206\u949f",mm:"%d \u5206\u949f",h:"1 \u5c0f\u65f6",hh:"%d \u5c0f\u65f6",d:"1 \u5929",dd:"%d \u5929",M:"1 \u4e2a\u6708",MM:"%d \u4e2a\u6708",y:"1 \u5e74",yy:"%d \u5e74"},meridiem:function(S,fe){var he=100*S+fe;return he<600?"\u51cc\u6668":he<900?"\u65e9\u4e0a":he<1100?"\u4e0a\u5348":he<1300?"\u4e2d\u5348":he<1800?"\u4e0b\u5348":"\u665a\u4e0a"}};return ee.default.locale(j,null,!0),j}(J(1764))},2243:function(Gt){Gt.exports=function(){"use strict";return function(ht,J,e){ht=ht||{};var O=J.prototype,ee={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function j(fe,he,se,k){return O.fromToBase(fe,he,se,k)}e.en.relativeTime=ee,O.fromToBase=function(fe,he,se,k,K){for(var ne,ie,re,R=se.$locale().relativeTime||ee,V=ht.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],A=V.length,P=0;P<A;P+=1){var I=V[P];I.d&&(ne=k?e(fe).diff(se,I.d,!0):se.diff(fe,I.d,!0));var H=(ht.rounding||Math.round)(Math.abs(ne));if(re=ne>0,H<=I.r||!I.r){H<=1&&P>0&&(I=V[P-1]);var Z=R[I.l];K&&(H=K(""+H)),ie="string"==typeof Z?Z.replace("%d",H):Z(H,he,I.l,re);break}}if(he)return ie;var U=re?R.future:R.past;return"function"==typeof U?U(ie):U.replace("%s",ie)},O.to=function(fe,he){return j(fe,he,this,!0)},O.from=function(fe,he){return j(fe,he,this)};var S=function(fe){return fe.$u?e.utc():e()};O.toNow=function(fe){return this.to(S(this),fe)},O.fromNow=function(fe){return this.from(S(this),fe)}}}()},8045:(Gt,ht,J)=>{"use strict";J.r(ht),J.d(ht,{Axis:()=>Yo,ChartView:()=>Vr,ComponentModel:()=>Jn,ComponentView:()=>oi,List:()=>_a,Model:()=>Or,PRIORITY:()=>oA,SeriesModel:()=>Xr,color:()=>ee,connect:()=>AN,dataTool:()=>LN,dependencies:()=>cN,disConnect:()=>xA,disconnect:()=>EN,dispose:()=>MN,env:()=>gt,extendChartView:()=>uF,extendComponentModel:()=>oF,extendComponentView:()=>sF,extendSeriesModel:()=>lF,format:()=>ne,getCoordinateSystemDimensions:()=>PN,getInstanceByDom:()=>DT,getInstanceById:()=>ON,getMap:()=>kN,graphic:()=>K,helper:()=>he,init:()=>DN,innerDrawElementOnCanvas:()=>dT,matrix:()=>j,number:()=>se,parseGeoJSON:()=>qT,parseGeoJson:()=>qT,registerAction:()=>Ss,registerCoordinateSystem:()=>SA,registerLayout:()=>zA,registerLoading:()=>PT,registerLocale:()=>gp,registerMap:()=>DA,registerPostInit:()=>TA,registerPostUpdate:()=>bA,registerPreprocessor:()=>ET,registerProcessor:()=>MT,registerTheme:()=>AT,registerTransform:()=>AA,registerUpdateLifecycle:()=>d0,registerVisual:()=>Qu,setCanvasCreator:()=>IN,setPlatformAPI:()=>$n,throttle:()=>K_,time:()=>k,use:()=>Nn,util:()=>ie,vector:()=>O,version:()=>uN,zrUtil:()=>e,zrender:()=>S});var e={};J.r(e),J.d(e,{HashMap:()=>Ds,RADIAN_TO_DEGREE:()=>Ei,assert:()=>ar,bind:()=>qe,clone:()=>Nt,concatArray:()=>Za,createCanvas:()=>it,createHashMap:()=>Kt,createObject:()=>Ua,curry:()=>yt,defaults:()=>Dt,disableUserSelect:()=>Va,each:()=>De,eqNaN:()=>ni,extend:()=>Ge,filter:()=>_n,find:()=>yn,guid:()=>Er,hasOwn:()=>qt,indexOf:()=>Ye,inherits:()=>Ut,isArray:()=>we,isArrayLike:()=>zn,isBuiltInObject:()=>Mt,isDom:()=>Ft,isFunction:()=>Pe,isGradientObject:()=>jn,isImagePatternObject:()=>Nr,isNumber:()=>Ve,isObject:()=>tt,isPrimitive:()=>Ba,isRegExp:()=>ti,isString:()=>Qe,isStringSafe:()=>Ie,isTypedArray:()=>ln,keys:()=>gn,logError:()=>Dn,map:()=>_t,merge:()=>Zt,mergeAll:()=>dr,mixin:()=>Qt,noop:()=>kr,normalizeCssArray:()=>Na,reduce:()=>cr,retrieve:()=>Cr,retrieve2:()=>$t,retrieve3:()=>ri,setAsPrimitive:()=>Yi,slice:()=>Ra,trim:()=>Ir});var O={};J.r(O),J.d(O,{add:()=>xa,applyTransform:()=>Hr,clone:()=>Rn,copy:()=>Fr,create:()=>xn,dist:()=>xi,distSquare:()=>xr,distance:()=>co,distanceSquare:()=>fr,div:()=>Ja,dot:()=>uo,len:()=>Ta,lenSquare:()=>lo,length:()=>rs,lengthSquare:()=>Is,lerp:()=>Ni,max:()=>ta,min:()=>vi,mul:()=>Ga,negate:()=>Ya,normalize:()=>er,scale:()=>si,scaleAndAdd:()=>Wa,set:()=>Br,sub:()=>Mi});var ee={};J.r(ee),J.d(ee,{fastLerp:()=>cs,fastMapToColor:()=>qg,lerp:()=>Dh,lift:()=>_o,lum:()=>fu,mapToColor:()=>Kg,modifyAlpha:()=>hc,modifyHSL:()=>xl,parse:()=>ai,random:()=>$g,stringify:()=>Ka,toHex:()=>cc});var j={};J.r(j),J.d(j,{clone:()=>pv,copy:()=>Nh,create:()=>$i,identity:()=>mu,invert:()=>zl,mul:()=>Mo,rotate:()=>Ws,scale:()=>Fh,translate:()=>Co});var S={};J.r(S),J.d(S,{dispose:()=>u1,disposeAll:()=>c1,getInstance:()=>bv,init:()=>wf,registerPainter:()=>Sv,version:()=>h1});var fe={};J.r(fe),J.d(fe,{Arc:()=>B_,BezierCurve:()=>Hp,BoundingRect:()=>Mn,Circle:()=>Cs,CompoundPath:()=>Z_,Ellipse:()=>N_,Group:()=>hn,Image:()=>ki,IncrementalDisplayable:()=>cD,Line:()=>Gi,LinearGradient:()=>Cd,OrientedBoundingRect:()=>H_,Path:()=>Fn,Point:()=>bn,Polygon:()=>Pa,Polyline:()=>Ia,RadialGradient:()=>eT,Rect:()=>Qn,Ring:()=>Vp,Sector:()=>Oa,Text:()=>Gn,applyTransform:()=>Ts,clipPointsByRect:()=>iT,clipRectByRect:()=>gD,createIcon:()=>xd,extendPath:()=>dD,extendShape:()=>hD,getShapeClass:()=>J_,getTransform:()=>Gu,groupTransition:()=>Gp,initProps:()=>Kr,isElementRemoved:()=>Du,lineLineIntersect:()=>vD,linePolygonIntersect:()=>Jp,makeImage:()=>nT,makePath:()=>Wp,mergePath:()=>zo,registerShape:()=>Wo,removeElement:()=>tl,removeElementWithFadeOut:()=>Fc,resizePath:()=>rT,setTooltipConfig:()=>Td,subPixelOptimize:()=>Y_,subPixelOptimizeLine:()=>n6,subPixelOptimizeRect:()=>r6,transformDirection:()=>Q_,traverseElements:()=>Ju,updateProps:()=>Kn});var he={};J.r(he),J.d(he,{createDimensions:()=>qN,createList:()=>B3,createScale:()=>U3,createSymbol:()=>wi,createTextStyle:()=>H3,dataStack:()=>Z3,enableHoverEmphasis:()=>el,getECData:()=>dn,getLayoutRect:()=>ui,mixinAxisModelCommonMethods:()=>V3});var se={};J.r(se),J.d(se,{MAX_SAFE_INTEGER:()=>Af,asc:()=>da,getPercentWithPrecision:()=>Dv,getPixelPrecision:()=>Wh,getPrecision:()=>To,getPrecisionSafe:()=>wv,isNumeric:()=>Of,isRadianAroundZero:()=>yu,linearMap:()=>mr,nice:()=>Mf,numericToNumber:()=>Io,parseDate:()=>Aa,quantile:()=>Jh,quantity:()=>Av,quantityExponent:()=>Gh,reformIntervals:()=>Yh,remRadian:()=>Ef,round:()=>li});var k={};J.r(k),J.d(k,{format:()=>rl,parse:()=>Aa});var K={};J.r(K),J.d(K,{Arc:()=>B_,BezierCurve:()=>Hp,BoundingRect:()=>Mn,Circle:()=>Cs,CompoundPath:()=>Z_,Ellipse:()=>N_,Group:()=>hn,Image:()=>ki,IncrementalDisplayable:()=>cD,Line:()=>Gi,LinearGradient:()=>Cd,Polygon:()=>Pa,Polyline:()=>Ia,RadialGradient:()=>eT,Rect:()=>Qn,Ring:()=>Vp,Sector:()=>Oa,Text:()=>Gn,clipPointsByRect:()=>iT,clipRectByRect:()=>gD,createIcon:()=>xd,extendPath:()=>dD,extendShape:()=>hD,getShapeClass:()=>J_,getTransform:()=>Gu,initProps:()=>Kr,makeImage:()=>nT,makePath:()=>Wp,mergePath:()=>zo,registerShape:()=>Wo,resizePath:()=>rT,updateProps:()=>Kn});var ne={};J.r(ne),J.d(ne,{addCommas:()=>xp,capitalFirst:()=>ax,encodeHTML:()=>ga,formatTime:()=>ix,formatTpl:()=>zp,getTextRect:()=>q3,getTooltipMarker:()=>r_,normalizeCssArray:()=>Ql,toCamelCase:()=>Tp,truncateText:()=>Wv});var ie={};J.r(ie),J.d(ie,{bind:()=>qe,clone:()=>Nt,curry:()=>yt,defaults:()=>Dt,each:()=>De,extend:()=>Ge,filter:()=>_n,indexOf:()=>Ye,inherits:()=>Ut,isArray:()=>we,isFunction:()=>Pe,isObject:()=>tt,isString:()=>Qe,map:()=>_t,merge:()=>Zt,reduce:()=>cr});var re=function(r,n){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])})(r,n)};function R(r,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=r}re(r,n),r.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}var rt=function r(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1},Lt=new function r(){this.browser=new rt,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow="undefined"!=typeof window};"object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?(Lt.wxa=!0,Lt.touchEventsSupported=!0):"undefined"==typeof document&&"undefined"!=typeof self?Lt.worker=!0:"undefined"==typeof navigator?(Lt.node=!0,Lt.svgSupported=!0):function pt(r,n){var t=n.browser,i=r.match(/Firefox\/([\d.]+)/),a=r.match(/MSIE\s([\d.]+)/)||r.match(/Trident\/.+?rv:(([\d.]+))/),o=r.match(/Edge?\/([\d.]+)/),l=/micromessenger/i.test(r);i&&(t.firefox=!0,t.version=i[1]),a&&(t.ie=!0,t.version=a[1]),o&&(t.edge=!0,t.version=o[1],t.newEdge=+o[1].split(".")[0]>18),l&&(t.weChat=!0),n.svgSupported="undefined"!=typeof SVGRect,n.touchEventsSupported="ontouchstart"in window&&!t.ie&&!t.edge,n.pointerEventsSupported="onpointerdown"in window&&(t.edge||t.ie&&+t.version>=11),n.domSupported="undefined"!=typeof document;var u=document.documentElement.style;n.transform3dSupported=(t.ie&&"transition"in u||t.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in u)&&!("OTransition"in u),n.transformSupported=n.transform3dSupported||t.ie&&+t.version>=9}(navigator.userAgent,Lt);const gt=Lt;var r,n,zt="sans-serif",Pt="12px "+zt,qn=function wn(r){var n={};if("undefined"==typeof JSON)return n;for(var t=0;t<r.length;t++){var i=String.fromCharCode(t+32),a=(r.charCodeAt(t)-20)/100;n[i]=a}return n}("007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N"),fn={createCanvas:function(){return"undefined"!=typeof document&&document.createElement("canvas")},measureText:function(t,i){if(!r){var a=fn.createCanvas();r=a&&a.getContext("2d")}if(r)return n!==i&&(n=r.font=i||Pt),r.measureText(t);t=t||"";var o=/^([0-9]*?)px$/.exec(i=i||Pt),l=+(o&&o[1])||12,u=0;if(i.indexOf("mono")>=0)u=l*t.length;else for(var c=0;c<t.length;c++){var h=qn[t[c]];u+=null==h?l:h*l}return{width:u}},loadImage:function(r,n,t){var i=new Image;return i.onload=n,i.onerror=t,i.src=r,i}};function $n(r){for(var n in fn)r[n]&&(fn[n]=r[n])}var ur=cr(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(r,n){return r["[object "+n+"]"]=!0,r},{}),Pn=cr(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(r,n){return r["[object "+n+"Array]"]=!0,r},{}),Yn=Object.prototype.toString,hr=Array.prototype,vr=hr.forEach,ir=hr.filter,tn=hr.slice,Sr=hr.map,un=function(){}.constructor,Sn=un?un.prototype:null,mn="__proto__",yr=2311;function Er(){return yr++}function Dn(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];"undefined"!=typeof console&&console.error.apply(console,r)}function Nt(r){if(null==r||"object"!=typeof r)return r;var n=r,t=Yn.call(r);if("[object Array]"===t){if(!Ba(r)){n=[];for(var i=0,a=r.length;i<a;i++)n[i]=Nt(r[i])}}else if(Pn[t]){if(!Ba(r)){var o=r.constructor;if(o.from)n=o.from(r);else for(n=new o(r.length),i=0,a=r.length;i<a;i++)n[i]=r[i]}}else if(!ur[t]&&!Ba(r)&&!Ft(r))for(var l in n={},r)r.hasOwnProperty(l)&&l!==mn&&(n[l]=Nt(r[l]));return n}function Zt(r,n,t){if(!tt(n)||!tt(r))return t?Nt(n):r;for(var i in n)if(n.hasOwnProperty(i)&&i!==mn){var a=r[i],o=n[i];!tt(o)||!tt(a)||we(o)||we(a)||Ft(o)||Ft(a)||Mt(o)||Mt(a)||Ba(o)||Ba(a)?(t||!(i in r))&&(r[i]=Nt(n[i])):Zt(a,o,t)}return r}function dr(r,n){for(var t=r[0],i=1,a=r.length;i<a;i++)t=Zt(t,r[i],n);return t}function Ge(r,n){if(Object.assign)Object.assign(r,n);else for(var t in n)n.hasOwnProperty(t)&&t!==mn&&(r[t]=n[t]);return r}function Dt(r,n,t){for(var i=gn(n),a=0;a<i.length;a++){var o=i[a];(t?null!=n[o]:null==r[o])&&(r[o]=n[o])}return r}var it=fn.createCanvas;function Ye(r,n){if(r){if(r.indexOf)return r.indexOf(n);for(var t=0,i=r.length;t<i;t++)if(r[t]===n)return t}return-1}function Ut(r,n){var t=r.prototype;function i(){}for(var a in i.prototype=n.prototype,r.prototype=new i,t)t.hasOwnProperty(a)&&(r.prototype[a]=t[a]);r.prototype.constructor=r,r.superClass=n}function Qt(r,n,t){if(r="prototype"in r?r.prototype:r,n="prototype"in n?n.prototype:n,Object.getOwnPropertyNames)for(var i=Object.getOwnPropertyNames(n),a=0;a<i.length;a++){var o=i[a];"constructor"!==o&&(t?null!=n[o]:null==r[o])&&(r[o]=n[o])}else Dt(r,n,t)}function zn(r){return!(!r||"string"==typeof r)&&"number"==typeof r.length}function De(r,n,t){if(r&&n)if(r.forEach&&r.forEach===vr)r.forEach(n,t);else if(r.length===+r.length)for(var i=0,a=r.length;i<a;i++)n.call(t,r[i],i,r);else for(var o in r)r.hasOwnProperty(o)&&n.call(t,r[o],o,r)}function _t(r,n,t){if(!r)return[];if(!n)return Ra(r);if(r.map&&r.map===Sr)return r.map(n,t);for(var i=[],a=0,o=r.length;a<o;a++)i.push(n.call(t,r[a],a,r));return i}function cr(r,n,t,i){if(r&&n){for(var a=0,o=r.length;a<o;a++)t=n.call(i,t,r[a],a,r);return t}}function _n(r,n,t){if(!r)return[];if(!n)return Ra(r);if(r.filter&&r.filter===ir)return r.filter(n,t);for(var i=[],a=0,o=r.length;a<o;a++)n.call(t,r[a],a,r)&&i.push(r[a]);return i}function yn(r,n,t){if(r&&n)for(var i=0,a=r.length;i<a;i++)if(n.call(t,r[i],i,r))return r[i]}function gn(r){if(!r)return[];if(Object.keys)return Object.keys(r);var n=[];for(var t in r)r.hasOwnProperty(t)&&n.push(t);return n}var qe=Sn&&Pe(Sn.bind)?Sn.call.bind(Sn.bind):function Pr(r,n){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];return function(){return r.apply(n,t.concat(tn.call(arguments)))}};function yt(r){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return function(){return r.apply(this,n.concat(tn.call(arguments)))}}function we(r){return Array.isArray?Array.isArray(r):"[object Array]"===Yn.call(r)}function Pe(r){return"function"==typeof r}function Qe(r){return"string"==typeof r}function Ie(r){return"[object String]"===Yn.call(r)}function Ve(r){return"number"==typeof r}function tt(r){var n=typeof r;return"function"===n||!!r&&"object"===n}function Mt(r){return!!ur[Yn.call(r)]}function ln(r){return!!Pn[Yn.call(r)]}function Ft(r){return"object"==typeof r&&"number"==typeof r.nodeType&&"object"==typeof r.ownerDocument}function jn(r){return null!=r.colorStops}function Nr(r){return null!=r.image}function ti(r){return"[object RegExp]"===Yn.call(r)}function ni(r){return r!=r}function Cr(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];for(var t=0,i=r.length;t<i;t++)if(null!=r[t])return r[t]}function $t(r,n){return null!=r?r:n}function ri(r,n,t){return null!=r?r:null!=n?n:t}function Ra(r){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return tn.apply(r,n)}function Na(r){if("number"==typeof r)return[r,r,r,r];var n=r.length;return 2===n?[r[0],r[1],r[0],r[1]]:3===n?[r[0],r[1],r[2],r[1]]:r}function ar(r,n){if(!r)throw new Error(n)}function Ir(r){return null==r?null:"function"==typeof r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var Fa="__ec_primitive__";function Yi(r){r[Fa]=!0}function Ba(r){return r[Fa]}var Ds=function(){function r(n){this.data={};var t=we(n);this.data={};var i=this;function a(o,l){t?i.set(o,l):i.set(l,o)}n instanceof r?n.each(a):n&&De(n,a)}return r.prototype.get=function(n){return this.data.hasOwnProperty(n)?this.data[n]:null},r.prototype.set=function(n,t){return this.data[n]=t},r.prototype.each=function(n,t){for(var i in this.data)this.data.hasOwnProperty(i)&&n.call(t,this.data[i],i)},r.prototype.keys=function(){return gn(this.data)},r.prototype.removeKey=function(n){delete this.data[n]},r}();function Kt(r){return new Ds(r)}function Za(r,n){for(var t=new r.constructor(r.length+n.length),i=0;i<r.length;i++)t[i]=r[i];var a=r.length;for(i=0;i<n.length;i++)t[i+a]=n[i];return t}function Ua(r,n){var t;if(Object.create)t=Object.create(r);else{var i=function(){};i.prototype=r,t=new i}return n&&Ge(t,n),t}function Va(r){var n=r.style;n.webkitUserSelect="none",n.userSelect="none",n.webkitTapHighlightColor="rgba(0,0,0,0)",n["-webkit-touch-callout"]="none"}function qt(r,n){return r.hasOwnProperty(n)}function kr(){}var Ei=180/Math.PI,es=function(r,n){return(es=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])})(r,n)};function or(r,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=r}es(r,n),r.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}function xn(r,n){return null==r&&(r=0),null==n&&(n=0),[r,n]}function Fr(r,n){return r[0]=n[0],r[1]=n[1],r}function Rn(r){return[r[0],r[1]]}function Br(r,n,t){return r[0]=n,r[1]=t,r}function xa(r,n,t){return r[0]=n[0]+t[0],r[1]=n[1]+t[1],r}function Wa(r,n,t,i){return r[0]=n[0]+t[0]*i,r[1]=n[1]+t[1]*i,r}function Mi(r,n,t){return r[0]=n[0]-t[0],r[1]=n[1]-t[1],r}function Ta(r){return Math.sqrt(lo(r))}var rs=Ta;function lo(r){return r[0]*r[0]+r[1]*r[1]}var Is=lo;function Ga(r,n,t){return r[0]=n[0]*t[0],r[1]=n[1]*t[1],r}function Ja(r,n,t){return r[0]=n[0]/t[0],r[1]=n[1]/t[1],r}function uo(r,n){return r[0]*n[0]+r[1]*n[1]}function si(r,n,t){return r[0]=n[0]*t,r[1]=n[1]*t,r}function er(r,n){var t=Ta(n);return 0===t?(r[0]=0,r[1]=0):(r[0]=n[0]/t,r[1]=n[1]/t),r}function co(r,n){return Math.sqrt((r[0]-n[0])*(r[0]-n[0])+(r[1]-n[1])*(r[1]-n[1]))}var xi=co;function fr(r,n){return(r[0]-n[0])*(r[0]-n[0])+(r[1]-n[1])*(r[1]-n[1])}var xr=fr;function Ya(r,n){return r[0]=-n[0],r[1]=-n[1],r}function Ni(r,n,t,i){return r[0]=n[0]+i*(t[0]-n[0]),r[1]=n[1]+i*(t[1]-n[1]),r}function Hr(r,n,t){var i=n[0],a=n[1];return r[0]=t[0]*i+t[2]*a+t[4],r[1]=t[1]*i+t[3]*a+t[5],r}function vi(r,n,t){return r[0]=Math.min(n[0],t[0]),r[1]=Math.min(n[1],t[1]),r}function ta(r,n,t){return r[0]=Math.max(n[0],t[0]),r[1]=Math.max(n[1],t[1]),r}var ca=function r(n,t){this.target=n,this.topTarget=t&&t.topTarget},is=function(){function r(n){this.handler=n,n.on("mousedown",this._dragStart,this),n.on("mousemove",this._drag,this),n.on("mouseup",this._dragEnd,this)}return r.prototype._dragStart=function(n){for(var t=n.target;t&&!t.draggable;)t=t.parent||t.__hostTarget;t&&(this._draggingTarget=t,t.dragging=!0,this._x=n.offsetX,this._y=n.offsetY,this.handler.dispatchToElement(new ca(t,n),"dragstart",n.event))},r.prototype._drag=function(n){var t=this._draggingTarget;if(t){var i=n.offsetX,a=n.offsetY,o=i-this._x,l=a-this._y;this._x=i,this._y=a,t.drift(o,l,n),this.handler.dispatchToElement(new ca(t,n),"drag",n.event);var u=this.handler.findHover(i,a,t).target,c=this._dropTarget;this._dropTarget=u,t!==u&&(c&&u!==c&&this.handler.dispatchToElement(new ca(c,n),"dragleave",n.event),u&&u!==c&&this.handler.dispatchToElement(new ca(u,n),"dragenter",n.event))}},r.prototype._dragEnd=function(n){var t=this._draggingTarget;t&&(t.dragging=!1),this.handler.dispatchToElement(new ca(t,n),"dragend",n.event),this._dropTarget&&this.handler.dispatchToElement(new ca(this._dropTarget,n),"drop",n.event),this._draggingTarget=null,this._dropTarget=null},r}();const ho=is;var as=function(){function r(n){n&&(this._$eventProcessor=n)}return r.prototype.on=function(n,t,i,a){this._$handlers||(this._$handlers={});var o=this._$handlers;if("function"==typeof t&&(a=i,i=t,t=null),!i||!n)return this;var l=this._$eventProcessor;null!=t&&l&&l.normalizeQuery&&(t=l.normalizeQuery(t)),o[n]||(o[n]=[]);for(var u=0;u<o[n].length;u++)if(o[n][u].h===i)return this;var c={h:i,query:t,ctx:a||this,callAtLast:i.zrEventfulCallAtLast},h=o[n].length-1,f=o[n][h];return f&&f.callAtLast?o[n].splice(h,0,c):o[n].push(c),this},r.prototype.isSilent=function(n){var t=this._$handlers;return!t||!t[n]||!t[n].length},r.prototype.off=function(n,t){var i=this._$handlers;if(!i)return this;if(!n)return this._$handlers={},this;if(t){if(i[n]){for(var a=[],o=0,l=i[n].length;o<l;o++)i[n][o].h!==t&&a.push(i[n][o]);i[n]=a}i[n]&&0===i[n].length&&delete i[n]}else delete i[n];return this},r.prototype.trigger=function(n){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(!this._$handlers)return this;var a=this._$handlers[n],o=this._$eventProcessor;if(a)for(var l=t.length,u=a.length,c=0;c<u;c++){var h=a[c];if(!o||!o.filter||null==h.query||o.filter(n,h.query))switch(l){case 0:h.h.call(h.ctx);break;case 1:h.h.call(h.ctx,t[0]);break;case 2:h.h.call(h.ctx,t[0],t[1]);break;default:h.h.apply(h.ctx,t)}}return o&&o.afterTrigger&&o.afterTrigger(n),this},r.prototype.triggerWithContext=function(n){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(!this._$handlers)return this;var a=this._$handlers[n],o=this._$eventProcessor;if(a)for(var l=t.length,u=t[l-1],c=a.length,h=0;h<c;h++){var f=a[h];if(!o||!o.filter||null==f.query||o.filter(n,f.query))switch(l){case 0:f.h.call(u);break;case 1:f.h.call(u,t[0]);break;case 2:f.h.call(u,t[0],t[1]);break;default:f.h.apply(u,t.slice(1,l-1))}}return o&&o.afterTrigger&&o.afterTrigger(n),this},r}();const Oi=as;var ba=Math.log(2);function Qa(r,n,t,i,a,o){var l=i+"-"+a,u=r.length;if(o.hasOwnProperty(l))return o[l];if(1===n){var c=Math.round(Math.log((1<<u)-1&~a)/ba);return r[t][c]}for(var h=i|1<<t,f=t+1;i&1<<f;)f++;for(var p=0,v=0,m=0;v<u;v++){var y=1<<v;y&a||(p+=(m%2?-1:1)*r[t][v]*Qa(r,n-1,f,h,a|y,o),m++)}return o[l]=p,p}function fo(r,n){var t=[[r[0],r[1],1,0,0,0,-n[0]*r[0],-n[0]*r[1]],[0,0,0,r[0],r[1],1,-n[1]*r[0],-n[1]*r[1]],[r[2],r[3],1,0,0,0,-n[2]*r[2],-n[2]*r[3]],[0,0,0,r[2],r[3],1,-n[3]*r[2],-n[3]*r[3]],[r[4],r[5],1,0,0,0,-n[4]*r[4],-n[4]*r[5]],[0,0,0,r[4],r[5],1,-n[5]*r[4],-n[5]*r[5]],[r[6],r[7],1,0,0,0,-n[6]*r[6],-n[6]*r[7]],[0,0,0,r[6],r[7],1,-n[7]*r[6],-n[7]*r[7]]],i={},a=Qa(t,8,0,0,0,i);if(0!==a){for(var o=[],l=0;l<8;l++)for(var u=0;u<8;u++)null==o[u]&&(o[u]=0),o[u]+=((l+u)%2?-1:1)*Qa(t,7,0===l?1:0,1<<l,1<<u,i)/a*n[l];return function(c,h,f){var p=h*o[6]+f*o[7]+1;c[0]=(h*o[0]+f*o[1]+o[2])/p,c[1]=(h*o[3]+f*o[4]+o[5])/p}}}var po="___zrEVENTSAVED",go=[];function ks(r,n,t,i,a){if(n.getBoundingClientRect&&gt.domSupported&&!ot(n)){var o=n[po]||(n[po]={}),l=function Fi(r,n){var t=n.markers;if(t)return t;t=n.markers=[];for(var i=["left","right"],a=["top","bottom"],o=0;o<4;o++){var l=document.createElement("div"),c=o%2,h=(o>>1)%2;l.style.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",i[c]+":0",a[h]+":0",i[1-c]+":auto",a[1-h]+":auto",""].join("!important;"),r.appendChild(l),t.push(l)}return t}(n,o),u=function Ne(r,n,t){for(var i=t?"invTrans":"trans",a=n[i],o=n.srcCoords,l=[],u=[],c=!0,h=0;h<4;h++){var f=r[h].getBoundingClientRect(),p=2*h,v=f.left,m=f.top;l.push(v,m),c=c&&o&&v===o[p]&&m===o[p+1],u.push(r[h].offsetLeft,r[h].offsetTop)}return c&&a?a:(n.srcCoords=l,n[i]=t?fo(u,l):fo(l,u))}(l,o,a);if(u)return u(r,t,i),!0}return!1}function ot(r){return"CANVAS"===r.nodeName.toUpperCase()}var le=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ae=[],ut=gt.browser.firefox&&+gt.browser.version.split(".")[0]<39;function Tt(r,n,t,i){return t=t||{},i?Jt(r,n,t):ut&&null!=n.layerX&&n.layerX!==n.offsetX?(t.zrX=n.layerX,t.zrY=n.layerY):null!=n.offsetX?(t.zrX=n.offsetX,t.zrY=n.offsetY):Jt(r,n,t),t}function Jt(r,n,t){if(gt.domSupported&&r.getBoundingClientRect){var i=n.clientX,a=n.clientY;if(ot(r)){var o=r.getBoundingClientRect();return t.zrX=i-o.left,void(t.zrY=a-o.top)}if(ks(Ae,r,i,a))return t.zrX=Ae[0],void(t.zrY=Ae[1])}t.zrX=t.zrY=0}function on(r){return r||window.event}function nn(r,n,t){if(null!=(n=on(n)).zrX)return n;var i=n.type;if(i&&i.indexOf("touch")>=0){var l="touchend"!==i?n.targetTouches[0]:n.changedTouches[0];l&&Tt(r,l,n,t)}else{Tt(r,n,n,t);var o=function tr(r){var n=r.wheelDelta;if(n)return n;var t=r.deltaX,i=r.deltaY;return null==t||null==i?n:3*Math.abs(0!==i?i:t)*(i>0?-1:i<0?1:t>0?-1:1)}(n);n.zrDelta=o?o/120:-(n.detail||0)/3}var u=n.button;return null==n.which&&void 0!==u&&le.test(n.type)&&(n.which=1&u?1:2&u?3:4&u?2:0),n}function pr(r,n,t,i){r.addEventListener(n,t,i)}function Tn(r,n,t,i){r.removeEventListener(n,t,i)}var Zr=function(r){r.preventDefault(),r.stopPropagation(),r.cancelBubble=!0};function na(r){return 2===r.which||3===r.which}var Wn=function(){function r(){this._track=[]}return r.prototype.recognize=function(n,t,i){return this._doTrack(n,t,i),this._recognize(n)},r.prototype.clear=function(){return this._track.length=0,this},r.prototype._doTrack=function(n,t,i){var a=n.touches;if(a){for(var o={points:[],touches:[],target:t,event:n},l=0,u=a.length;l<u;l++){var c=a[l],h=Tt(i,c,{});o.points.push([h.zrX,h.zrY]),o.touches.push(c)}this._track.push(o)}},r.prototype._recognize=function(n){for(var t in ue)if(ue.hasOwnProperty(t)){var i=ue[t](this._track,n);if(i)return i}},r}();function Jr(r){var n=r[1][0]-r[0][0],t=r[1][1]-r[0][1];return Math.sqrt(n*n+t*t)}var ue={pinch:function(r,n){var t=r.length;if(t){var i=(r[t-1]||{}).points,a=(r[t-2]||{}).points||i;if(a&&a.length>1&&i&&i.length>1){var o=Jr(i)/Jr(a);!isFinite(o)&&(o=1),n.pinchScale=o;var l=function ge(r){return[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]}(i);return n.pinchX=l[0],n.pinchY=l[1],{type:"pinch",target:r[0].target,event:n}}}}};function ae(){Zr(this.event)}var de=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.handler=null,t}return or(n,r),n.prototype.dispose=function(){},n.prototype.setCursor=function(){},n}(Oi),xe=function r(n,t){this.x=n,this.y=t},Te=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],Be=function(r){function n(t,i,a,o){var l=r.call(this)||this;return l._hovered=new xe(0,0),l.storage=t,l.painter=i,l.painterRoot=o,a=a||new de,l.proxy=null,l.setHandlerProxy(a),l._draggingMgr=new ho(l),l}return or(n,r),n.prototype.setHandlerProxy=function(t){this.proxy&&this.proxy.dispose(),t&&(De(Te,function(i){t.on&&t.on(i,this[i],this)},this),t.handler=this),this.proxy=t},n.prototype.mousemove=function(t){var i=t.zrX,a=t.zrY,o=Je(this,i,a),l=this._hovered,u=l.target;u&&!u.__zr&&(u=(l=this.findHover(l.x,l.y)).target);var c=this._hovered=o?new xe(i,a):this.findHover(i,a),h=c.target,f=this.proxy;f.setCursor&&f.setCursor(h?h.cursor:"default"),u&&h!==u&&this.dispatchToElement(l,"mouseout",t),this.dispatchToElement(c,"mousemove",t),h&&h!==u&&this.dispatchToElement(c,"mouseover",t)},n.prototype.mouseout=function(t){var i=t.zrEventControl;"only_globalout"!==i&&this.dispatchToElement(this._hovered,"mouseout",t),"no_globalout"!==i&&this.trigger("globalout",{type:"globalout",event:t})},n.prototype.resize=function(){this._hovered=new xe(0,0)},n.prototype.dispatch=function(t,i){var a=this[t];a&&a.call(this,i)},n.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},n.prototype.setCursorStyle=function(t){var i=this.proxy;i.setCursor&&i.setCursor(t)},n.prototype.dispatchToElement=function(t,i,a){var o=(t=t||{}).target;if(!o||!o.silent){for(var l="on"+i,u=function pe(r,n,t){return{type:r,event:t,target:n.target,topTarget:n.topTarget,cancelBubble:!1,offsetX:t.zrX,offsetY:t.zrY,gestureEvent:t.gestureEvent,pinchX:t.pinchX,pinchY:t.pinchY,pinchScale:t.pinchScale,wheelDelta:t.zrDelta,zrByTouch:t.zrByTouch,which:t.which,stop:ae}}(i,t,a);o&&(o[l]&&(u.cancelBubble=!!o[l].call(o,u)),o.trigger(i,u),o=o.__hostTarget?o.__hostTarget:o.parent,!u.cancelBubble););u.cancelBubble||(this.trigger(i,u),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(c){"function"==typeof c[l]&&c[l].call(c,u),c.trigger&&c.trigger(i,u)}))}},n.prototype.findHover=function(t,i,a){for(var o=this.storage.getDisplayList(),l=new xe(t,i),u=o.length-1;u>=0;u--){var c=void 0;if(o[u]!==a&&!o[u].ignore&&(c=We(o[u],t,i))&&(!l.topTarget&&(l.topTarget=o[u]),"silent"!==c)){l.target=o[u];break}}return l},n.prototype.processGesture=function(t,i){this._gestureMgr||(this._gestureMgr=new Wn);var a=this._gestureMgr;"start"===i&&a.clear();var o=a.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if("end"===i&&a.clear(),o){var l=o.type;t.gestureEvent=l;var u=new xe;u.target=o.target,this.dispatchToElement(u,l,o.event)}},n}(Oi);function We(r,n,t){if(r[r.rectHover?"rectContain":"contain"](n,t)){for(var i=r,a=void 0,o=!1;i;){if(i.ignoreClip&&(o=!0),!o){var l=i.getClipPath();if(l&&!l.contain(n,t))return!1;i.silent&&(a=!0)}i=i.__hostTarget||i.parent}return!a||"silent"}return!1}function Je(r,n,t){var i=r.painter;return n<0||n>i.getWidth()||t<0||t>i.getHeight()}De(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(r){Be.prototype[r]=function(n){var o,l,t=n.zrX,i=n.zrY,a=Je(this,t,i);if(("mouseup"!==r||!a)&&(l=(o=this.findHover(t,i)).target),"mousedown"===r)this._downEl=l,this._downPoint=[n.zrX,n.zrY],this._upEl=l;else if("mouseup"===r)this._upEl=l;else if("click"===r){if(this._downEl!==this._upEl||!this._downPoint||xi(this._downPoint,[n.zrX,n.zrY])>4)return;this._downPoint=null}this.dispatchToElement(o,r,n)}});const $e=Be;function en(r,n,t,i){var a=n+1;if(a===t)return 1;if(i(r[a++],r[n])<0){for(;a<t&&i(r[a],r[a-1])<0;)a++;!function Rt(r,n,t){for(t--;n<t;){var i=r[n];r[n++]=r[t],r[t--]=i}}(r,n,a)}else for(;a<t&&i(r[a],r[a-1])>=0;)a++;return a-n}function cn(r,n,t,i,a){for(i===n&&i++;i<t;i++){for(var c,o=r[i],l=n,u=i;l<u;)a(o,r[c=l+u>>>1])<0?u=c:l=c+1;var h=i-l;switch(h){case 3:r[l+3]=r[l+2];case 2:r[l+2]=r[l+1];case 1:r[l+1]=r[l];break;default:for(;h>0;)r[l+h]=r[l+h-1],h--}r[l]=o}}function En(r,n,t,i,a,o){var l=0,u=0,c=1;if(o(r,n[t+a])>0){for(u=i-a;c<u&&o(r,n[t+a+c])>0;)l=c,(c=1+(c<<1))<=0&&(c=u);c>u&&(c=u),l+=a,c+=a}else{for(u=a+1;c<u&&o(r,n[t+a-c])<=0;)l=c,(c=1+(c<<1))<=0&&(c=u);c>u&&(c=u);var h=l;l=a-c,c=a-h}for(l++;l<c;){var f=l+(c-l>>>1);o(r,n[t+f])>0?l=f+1:c=f}return c}function Lr(r,n,t,i,a,o){var l=0,u=0,c=1;if(o(r,n[t+a])<0){for(u=a+1;c<u&&o(r,n[t+a-c])<0;)l=c,(c=1+(c<<1))<=0&&(c=u);c>u&&(c=u);var h=l;l=a-c,c=a-h}else{for(u=i-a;c<u&&o(r,n[t+a+c])>=0;)l=c,(c=1+(c<<1))<=0&&(c=u);c>u&&(c=u),l+=a,c+=a}for(l++;l<c;){var f=l+(c-l>>>1);o(r,n[t+f])<0?c=f:l=f+1}return c}function An(r,n,t,i){t||(t=0),i||(i=r.length);var a=i-t;if(!(a<2)){var o=0;if(a<32)return void cn(r,t,i,t+(o=en(r,t,i,n)),n);var l=function zr(r,n){var l,u,t=7,c=0,h=[];function m(T){var z=l[T],E=u[T],N=l[T+1],X=u[T+1];u[T]=E+X,T===c-3&&(l[T+1]=l[T+2],u[T+1]=u[T+2]),c--;var ve=Lr(r[N],r,z,E,0,n);z+=ve,0!=(E-=ve)&&0!==(X=En(r[z+E-1],r,N,X,X-1,n))&&(E<=X?function y(T,z,E,N){var X=0;for(X=0;X<z;X++)h[X]=r[T+X];var ve=0,ce=E,_e=T;if(r[_e++]=r[ce++],0!=--N)if(1!==z){for(var Ee,Le,ke,ze=t;;){Ee=0,Le=0,ke=!1;do{if(n(r[ce],h[ve])<0){if(r[_e++]=r[ce++],Le++,Ee=0,0==--N){ke=!0;break}}else if(r[_e++]=h[ve++],Ee++,Le=0,1==--z){ke=!0;break}}while((Ee|Le)<ze);if(ke)break;do{if(0!==(Ee=Lr(r[ce],h,ve,z,0,n))){for(X=0;X<Ee;X++)r[_e+X]=h[ve+X];if(_e+=Ee,ve+=Ee,(z-=Ee)<=1){ke=!0;break}}if(r[_e++]=r[ce++],0==--N){ke=!0;break}if(0!==(Le=En(h[ve],r,ce,N,0,n))){for(X=0;X<Le;X++)r[_e+X]=r[ce+X];if(_e+=Le,ce+=Le,0==(N-=Le)){ke=!0;break}}if(r[_e++]=h[ve++],1==--z){ke=!0;break}ze--}while(Ee>=7||Le>=7);if(ke)break;ze<0&&(ze=0),ze+=2}if((t=ze)<1&&(t=1),1===z){for(X=0;X<N;X++)r[_e+X]=r[ce+X];r[_e+N]=h[ve]}else{if(0===z)throw new Error;for(X=0;X<z;X++)r[_e+X]=h[ve+X]}}else{for(X=0;X<N;X++)r[_e+X]=r[ce+X];r[_e+N]=h[ve]}else for(X=0;X<z;X++)r[_e+X]=h[ve+X]}(z,E,N,X):function C(T,z,E,N){var X=0;for(X=0;X<N;X++)h[X]=r[E+X];var ve=T+z-1,ce=N-1,_e=E+N-1,ze=0,Ee=0;if(r[_e--]=r[ve--],0!=--z)if(1!==N){for(var Le=t;;){var ke=0,Ue=0,He=!1;do{if(n(h[ce],r[ve])<0){if(r[_e--]=r[ve--],ke++,Ue=0,0==--z){He=!0;break}}else if(r[_e--]=h[ce--],Ue++,ke=0,1==--N){He=!0;break}}while((ke|Ue)<Le);if(He)break;do{if(0!=(ke=z-Lr(h[ce],r,T,z,z-1,n))){for(z-=ke,Ee=1+(_e-=ke),ze=1+(ve-=ke),X=ke-1;X>=0;X--)r[Ee+X]=r[ze+X];if(0===z){He=!0;break}}if(r[_e--]=h[ce--],1==--N){He=!0;break}if(0!=(Ue=N-En(r[ve],h,0,N,N-1,n))){for(N-=Ue,Ee=1+(_e-=Ue),ze=1+(ce-=Ue),X=0;X<Ue;X++)r[Ee+X]=h[ze+X];if(N<=1){He=!0;break}}if(r[_e--]=r[ve--],0==--z){He=!0;break}Le--}while(ke>=7||Ue>=7);if(He)break;Le<0&&(Le=0),Le+=2}if((t=Le)<1&&(t=1),1===N){for(Ee=1+(_e-=z),ze=1+(ve-=z),X=z-1;X>=0;X--)r[Ee+X]=r[ze+X];r[_e]=h[ce]}else{if(0===N)throw new Error;for(ze=_e-(N-1),X=0;X<N;X++)r[ze+X]=h[X]}}else{for(Ee=1+(_e-=z),ze=1+(ve-=z),X=z-1;X>=0;X--)r[Ee+X]=r[ze+X];r[_e]=h[ce]}else for(ze=_e-(N-1),X=0;X<N;X++)r[ze+X]=h[X]}(z,E,N,X))}return l=[],u=[],{mergeRuns:function p(){for(;c>1;){var T=c-2;if(T>=1&&u[T-1]<=u[T]+u[T+1]||T>=2&&u[T-2]<=u[T]+u[T-1])u[T-1]<u[T+1]&&T--;else if(u[T]>u[T+1])break;m(T)}},forceMergeRuns:function v(){for(;c>1;){var T=c-2;T>0&&u[T-1]<u[T+1]&&T--,m(T)}},pushRun:function f(T,z){l[c]=T,u[c]=z,c+=1}}}(r,n),u=function Vt(r){for(var n=0;r>=32;)n|=1&r,r>>=1;return r+n}(a);do{if((o=en(r,t,i,n))<u){var c=a;c>u&&(c=u),cn(r,t,t+c,t+o,n),o=c}l.pushRun(t,o),l.mergeRuns(),a-=o,t+=o}while(0!==a);l.forceMergeRuns()}}var Ti=!1;function qi(){Ti||(Ti=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function ss(r,n){return r.zlevel===n.zlevel?r.z===n.z?r.z2-n.z2:r.z-n.z:r.zlevel-n.zlevel}var cu=function(){function r(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=ss}return r.prototype.traverse=function(n,t){for(var i=0;i<this._roots.length;i++)this._roots[i].traverse(n,t)},r.prototype.getDisplayList=function(n,t){t=t||!1;var i=this._displayList;return(n||!i.length)&&this.updateDisplayList(t),i},r.prototype.updateDisplayList=function(n){this._displayListLen=0;for(var t=this._roots,i=this._displayList,a=0,o=t.length;a<o;a++)this._updateAndAddDisplayable(t[a],null,n);i.length=this._displayListLen,An(i,ss)},r.prototype._updateAndAddDisplayable=function(n,t,i){if(!n.ignore||i){n.beforeUpdate(),n.update(),n.afterUpdate();var a=n.getClipPath();if(n.ignoreClip)t=null;else if(a){t=t?t.slice():[];for(var o=a,l=n;o;)o.parent=l,o.updateTransform(),t.push(o),l=o,o=o.getClipPath()}if(n.childrenRef){for(var u=n.childrenRef(),c=0;c<u.length;c++){var h=u[c];n.__dirty&&(h.__dirty|=1),this._updateAndAddDisplayable(h,t,i)}n.__dirty=0}else{var f=n;t&&t.length?f.__clipPaths=t:f.__clipPaths&&f.__clipPaths.length>0&&(f.__clipPaths=[]),isNaN(f.z)&&(qi(),f.z=0),isNaN(f.z2)&&(qi(),f.z2=0),isNaN(f.zlevel)&&(qi(),f.zlevel=0),this._displayList[this._displayListLen++]=f}var p=n.getDecalElement&&n.getDecalElement();p&&this._updateAndAddDisplayable(p,t,i);var v=n.getTextGuideLine();v&&this._updateAndAddDisplayable(v,t,i);var m=n.getTextContent();m&&this._updateAndAddDisplayable(m,t,i)}},r.prototype.addRoot=function(n){n.__zr&&n.__zr.storage===this||this._roots.push(n)},r.prototype.delRoot=function(n){if(n instanceof Array)for(var t=0,i=n.length;t<i;t++)this.delRoot(n[t]);else{var a=Ye(this._roots,n);a>=0&&this._roots.splice(a,1)}},r.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},r.prototype.getRoots=function(){return this._roots},r.prototype.dispose=function(){this._displayList=null,this._roots=null},r}();const Ls=cu;var ml;ml=gt.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(r){return setTimeout(r,16)};const Rs=ml;var Ai={linear:function(r){return r},quadraticIn:function(r){return r*r},quadraticOut:function(r){return r*(2-r)},quadraticInOut:function(r){return(r*=2)<1?.5*r*r:-.5*(--r*(r-2)-1)},cubicIn:function(r){return r*r*r},cubicOut:function(r){return--r*r*r+1},cubicInOut:function(r){return(r*=2)<1?.5*r*r*r:.5*((r-=2)*r*r+2)},quarticIn:function(r){return r*r*r*r},quarticOut:function(r){return 1- --r*r*r*r},quarticInOut:function(r){return(r*=2)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2)},quinticIn:function(r){return r*r*r*r*r},quinticOut:function(r){return--r*r*r*r*r+1},quinticInOut:function(r){return(r*=2)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2)},sinusoidalIn:function(r){return 1-Math.cos(r*Math.PI/2)},sinusoidalOut:function(r){return Math.sin(r*Math.PI/2)},sinusoidalInOut:function(r){return.5*(1-Math.cos(Math.PI*r))},exponentialIn:function(r){return 0===r?0:Math.pow(1024,r-1)},exponentialOut:function(r){return 1===r?1:1-Math.pow(2,-10*r)},exponentialInOut:function(r){return 0===r?0:1===r?1:(r*=2)<1?.5*Math.pow(1024,r-1):.5*(2-Math.pow(2,-10*(r-1)))},circularIn:function(r){return 1-Math.sqrt(1-r*r)},circularOut:function(r){return Math.sqrt(1- --r*r)},circularInOut:function(r){return(r*=2)<1?-.5*(Math.sqrt(1-r*r)-1):.5*(Math.sqrt(1-(r-=2)*r)+1)},elasticIn:function(r){var n,t=.1;return 0===r?0:1===r?1:(!t||t<1?(t=1,n=.1):n=.4*Math.asin(1/t)/(2*Math.PI),-t*Math.pow(2,10*(r-=1))*Math.sin((r-n)*(2*Math.PI)/.4))},elasticOut:function(r){var n,t=.1;return 0===r?0:1===r?1:(!t||t<1?(t=1,n=.1):n=.4*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*r)*Math.sin((r-n)*(2*Math.PI)/.4)+1)},elasticInOut:function(r){var n,t=.1;return 0===r?0:1===r?1:(!t||t<1?(t=1,n=.1):n=.4*Math.asin(1/t)/(2*Math.PI),(r*=2)<1?t*Math.pow(2,10*(r-=1))*Math.sin((r-n)*(2*Math.PI)/.4)*-.5:t*Math.pow(2,-10*(r-=1))*Math.sin((r-n)*(2*Math.PI)/.4)*.5+1)},backIn:function(r){var n=1.70158;return r*r*((n+1)*r-n)},backOut:function(r){var n=1.70158;return--r*r*((n+1)*r+n)+1},backInOut:function(r){var n=2.5949095;return(r*=2)<1?r*r*((n+1)*r-n)*.5:.5*((r-=2)*r*((n+1)*r+n)+2)},bounceIn:function(r){return 1-Ai.bounceOut(1-r)},bounceOut:function(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375},bounceInOut:function(r){return r<.5?.5*Ai.bounceIn(2*r):.5*Ai.bounceOut(2*r-1)+.5}};const hi=Ai;var ls=Math.pow,ii=Math.sqrt,hu=ii(3),_l=1/3,qa=xn(),ha=xn(),Fs=xn();function Ao(r){return r>-1e-8&&r<1e-8}function Sh(r){return r>1e-8||r<-1e-8}function mi(r,n,t,i,a){var o=1-a;return o*o*(o*r+3*a*n)+a*a*(a*i+3*o*t)}function zh(r,n,t,i,a){var o=1-a;return 3*(((n-r)*o+2*(t-n)*a)*o+(i-t)*a*a)}function du(r,n,t,i,a,o){var l=i+3*(n-t)-r,u=3*(t-2*n+r),c=3*(n-r),h=r-a,f=u*u-3*l*c,p=u*c-9*l*h,v=c*c-3*u*h,m=0;if(Ao(f)&&Ao(p))Ao(u)?o[0]=0:(y=-c/u)>=0&&y<=1&&(o[m++]=y);else{var C=p*p-4*f*v;if(Ao(C)){var T=p/f,z=-T/2;(y=-u/l+T)>=0&&y<=1&&(o[m++]=y),z>=0&&z<=1&&(o[m++]=z)}else if(C>0){var E=ii(C),N=f*u+1.5*l*(-p+E),X=f*u+1.5*l*(-p-E);(y=(-u-((N=N<0?-ls(-N,_l):ls(N,_l))+(X=X<0?-ls(-X,_l):ls(X,_l))))/(3*l))>=0&&y<=1&&(o[m++]=y)}else{var ve=(2*f*u-3*l*p)/(2*ii(f*f*f)),ce=Math.acos(ve)/3,_e=ii(f),ze=Math.cos(ce),y=(-u-2*_e*ze)/(3*l),Ee=(z=(-u+_e*(ze+hu*Math.sin(ce)))/(3*l),(-u+_e*(ze-hu*Math.sin(ce)))/(3*l));y>=0&&y<=1&&(o[m++]=y),z>=0&&z<=1&&(o[m++]=z),Ee>=0&&Ee<=1&&(o[m++]=Ee)}}return m}function wh(r,n,t,i,a){var o=6*t-12*n+6*r,l=9*n+3*i-3*r-9*t,u=3*n-3*r,c=0;if(Ao(l))Sh(o)&&(h=-u/o)>=0&&h<=1&&(a[c++]=h);else{var f=o*o-4*l*u;if(Ao(f))a[0]=-o/(2*l);else if(f>0){var h,p=ii(f),v=(-o-p)/(2*l);(h=(-o+p)/(2*l))>=0&&h<=1&&(a[c++]=h),v>=0&&v<=1&&(a[c++]=v)}}return c}function vo(r,n,t,i,a,o){var l=(n-r)*a+r,u=(t-n)*a+n,c=(i-t)*a+t,h=(u-l)*a+l,f=(c-u)*a+u,p=(f-h)*a+h;o[0]=r,o[1]=l,o[2]=h,o[3]=p,o[4]=p,o[5]=f,o[6]=c,o[7]=i}function yl(r,n,t,i,a,o,l,u,c,h,f){var p,y,C,T,z,v=.005,m=1/0;qa[0]=c,qa[1]=h;for(var E=0;E<1;E+=.05)ha[0]=mi(r,t,a,l,E),ha[1]=mi(n,i,o,u,E),(T=xr(qa,ha))<m&&(p=E,m=T);m=1/0;for(var N=0;N<32&&!(v<1e-4);N++)C=p+v,ha[0]=mi(r,t,a,l,y=p-v),ha[1]=mi(n,i,o,u,y),T=xr(ha,qa),y>=0&&T<m?(p=y,m=T):(Fs[0]=mi(r,t,a,l,C),Fs[1]=mi(n,i,o,u,C),z=xr(Fs,qa),C<=1&&z<m?(p=C,m=z):v*=.5);return f&&(f[0]=mi(r,t,a,l,p),f[1]=mi(n,i,o,u,p)),ii(m)}function Sa(r,n,t,i,a,o,l,u,c){for(var h=r,f=n,p=0,v=1/c,m=1;m<=c;m++){var y=m*v,C=mi(r,t,a,l,y),T=mi(n,i,o,u,y),z=C-h,E=T-f;p+=Math.sqrt(z*z+E*E),h=C,f=T}return p}function pi(r,n,t,i){var a=1-i;return a*(a*r+2*i*n)+i*i*t}function Bs(r,n,t,i){return 2*((1-i)*(n-r)+i*(t-n))}function Cl(r,n,t){var i=r+t-2*n;return 0===i?.5:(r-n)/i}function us(r,n,t,i,a){var o=(n-r)*i+r,l=(t-n)*i+n,u=(l-o)*i+o;a[0]=r,a[1]=o,a[2]=u,a[3]=u,a[4]=l,a[5]=t}function Zs(r,n,t,i,a,o,l,u,c){var h,f=.005,p=1/0;qa[0]=l,qa[1]=u;for(var v=0;v<1;v+=.05)ha[0]=pi(r,t,a,v),ha[1]=pi(n,i,o,v),(m=xr(qa,ha))<p&&(h=v,p=m);p=1/0;for(var y=0;y<32&&!(f<1e-4);y++){var C=h-f,T=h+f;ha[0]=pi(r,t,a,C),ha[1]=pi(n,i,o,C);var m=xr(ha,qa);if(C>=0&&m<p)h=C,p=m;else{Fs[0]=pi(r,t,a,T),Fs[1]=pi(n,i,o,T);var z=xr(Fs,qa);T<=1&&z<p?(h=T,p=z):f*=.5}}return c&&(c[0]=pi(r,t,a,h),c[1]=pi(n,i,o,h)),ii(p)}function Yr(r,n,t,i,a,o,l){for(var u=r,c=n,h=0,f=1/l,p=1;p<=l;p++){var v=p*f,m=pi(r,t,a,v),y=pi(n,i,o,v),C=m-u,T=y-c;h+=Math.sqrt(C*C+T*T),u=m,c=y}return h}var Q=/cubic-bezier\(([0-9,\.e ]+)\)/;function b(r){var n=r&&Q.exec(r);if(n){var t=n[1].split(","),i=+Ir(t[0]),a=+Ir(t[1]),o=+Ir(t[2]),l=+Ir(t[3]);if(isNaN(i+a+o+l))return;var u=[];return function(c){return c<=0?0:c>=1?1:du(0,i,o,1,c,u)&&mi(0,a,l,1,u[0])}}}var G=function(){function r(n){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=n.life||1e3,this._delay=n.delay||0,this.loop=n.loop||!1,this.onframe=n.onframe||kr,this.ondestroy=n.ondestroy||kr,this.onrestart=n.onrestart||kr,n.easing&&this.setEasing(n.easing)}return r.prototype.step=function(n,t){if(this._inited||(this._startTime=n+this._delay,this._inited=!0),!this._paused){var i=this._life,a=n-this._startTime-this._pausedTime,o=a/i;o<0&&(o=0),o=Math.min(o,1);var l=this.easingFunc,u=l?l(o):o;if(this.onframe(u),1===o){if(!this.loop)return!0;this._startTime=n-a%i,this._pausedTime=0,this.onrestart()}return!1}this._pausedTime+=t},r.prototype.pause=function(){this._paused=!0},r.prototype.resume=function(){this._paused=!1},r.prototype.setEasing=function(n){this.easing=n,this.easingFunc=Pe(n)?n:hi[n]||b(n)},r}();const ye=G;var Oe=function r(n){this.value=n},Xe=function(){function r(){this._len=0}return r.prototype.insert=function(n){var t=new Oe(n);return this.insertEntry(t),t},r.prototype.insertEntry=function(n){this.head?(this.tail.next=n,n.prev=this.tail,n.next=null,this.tail=n):this.head=this.tail=n,this._len++},r.prototype.remove=function(n){var t=n.prev,i=n.next;t?t.next=i:this.head=i,i?i.prev=t:this.tail=t,n.next=n.prev=null,this._len--},r.prototype.len=function(){return this._len},r.prototype.clear=function(){this.head=this.tail=null,this._len=0},r}(),vt=function(){function r(n){this._list=new Xe,this._maxSize=10,this._map={},this._maxSize=n}return r.prototype.put=function(n,t){var i=this._list,a=this._map,o=null;if(null==a[n]){var l=i.len(),u=this._lastRemovedEntry;if(l>=this._maxSize&&l>0){var c=i.head;i.remove(c),delete a[c.key],o=c.value,this._lastRemovedEntry=c}u?u.value=t:u=new Oe(t),u.key=n,i.insertEntry(u),a[n]=u}return o},r.prototype.get=function(n){var t=this._map[n],i=this._list;if(null!=t)return t!==i.tail&&(i.remove(t),i.insertEntry(t)),t.value},r.prototype.clear=function(){this._list.clear(),this._map={}},r.prototype.len=function(){return this._list.len()},r}();const Ct=vt;var bt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Et(r){return(r=Math.round(r))<0?0:r>255?255:r}function an(r){return r<0?0:r>1?1:r}function Rr(r){var n=r;return n.length&&"%"===n.charAt(n.length-1)?Et(parseFloat(n)/100*255):Et(parseInt(n,10))}function lr(r){var n=r;return n.length&&"%"===n.charAt(n.length-1)?an(parseFloat(n)/100):an(parseFloat(n))}function Wr(r,n,t){return t<0?t+=1:t>1&&(t-=1),6*t<1?r+(n-r)*t*6:2*t<1?n:3*t<2?r+(n-r)*(2/3-t)*6:r}function wr(r,n,t){return r+(n-r)*t}function nr(r,n,t,i,a){return r[0]=n,r[1]=t,r[2]=i,r[3]=a,r}function Qr(r,n){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r}var bi=new Ct(20),Pi=null;function Ii(r,n){Pi&&Qr(Pi,n),Pi=bi.put(r,Pi||n.slice())}function ai(r,n){if(r){n=n||[];var t=bi.get(r);if(t)return Qr(n,t);var i=(r+="").replace(/ /g,"").toLowerCase();if(i in bt)return Qr(n,bt[i]),Ii(r,n),n;var o,a=i.length;if("#"===i.charAt(0))return 4===a||5===a?(o=parseInt(i.slice(1,4),16))>=0&&o<=4095?(nr(n,(3840&o)>>4|(3840&o)>>8,240&o|(240&o)>>4,15&o|(15&o)<<4,5===a?parseInt(i.slice(4),16)/15:1),Ii(r,n),n):void nr(n,0,0,0,1):7===a||9===a?(o=parseInt(i.slice(1,7),16))>=0&&o<=16777215?(nr(n,(16711680&o)>>16,(65280&o)>>8,255&o,9===a?parseInt(i.slice(7),16)/255:1),Ii(r,n),n):void nr(n,0,0,0,1):void 0;var l=i.indexOf("("),u=i.indexOf(")");if(-1!==l&&u+1===a){var c=i.substr(0,l),h=i.substr(l+1,u-(l+1)).split(","),f=1;switch(c){case"rgba":if(4!==h.length)return 3===h.length?nr(n,+h[0],+h[1],+h[2],1):nr(n,0,0,0,1);f=lr(h.pop());case"rgb":return 3!==h.length?void nr(n,0,0,0,1):(nr(n,Rr(h[0]),Rr(h[1]),Rr(h[2]),f),Ii(r,n),n);case"hsla":return 4!==h.length?void nr(n,0,0,0,1):(h[3]=lr(h[3]),mo(h,n),Ii(r,n),n);case"hsl":return 3!==h.length?void nr(n,0,0,0,1):(mo(h,n),Ii(r,n),n);default:return}}nr(n,0,0,0,1)}}function mo(r,n){var t=(parseFloat(r[0])%360+360)%360/360,i=lr(r[1]),a=lr(r[2]),o=a<=.5?a*(i+1):a+i-a*i,l=2*a-o;return nr(n=n||[],Et(255*Wr(l,o,t+1/3)),Et(255*Wr(l,o,t)),Et(255*Wr(l,o,t-1/3)),1),4===r.length&&(n[3]=r[3]),n}function _o(r,n){var t=ai(r);if(t){for(var i=0;i<3;i++)t[i]=n<0?t[i]*(1-n)|0:(255-t[i])*n+t[i]|0,t[i]>255?t[i]=255:t[i]<0&&(t[i]=0);return Ka(t,4===t.length?"rgba":"rgb")}}function cc(r){var n=ai(r);if(n)return((1<<24)+(n[0]<<16)+(n[1]<<8)+ +n[2]).toString(16).slice(1)}function cs(r,n,t){if(n&&n.length&&r>=0&&r<=1){t=t||[];var i=r*(n.length-1),a=Math.floor(i),o=Math.ceil(i),l=n[a],u=n[o],c=i-a;return t[0]=Et(wr(l[0],u[0],c)),t[1]=Et(wr(l[1],u[1],c)),t[2]=Et(wr(l[2],u[2],c)),t[3]=an(wr(l[3],u[3],c)),t}}var qg=cs;function Dh(r,n,t){if(n&&n.length&&r>=0&&r<=1){var i=r*(n.length-1),a=Math.floor(i),o=Math.ceil(i),l=ai(n[a]),u=ai(n[o]),c=i-a,h=Ka([Et(wr(l[0],u[0],c)),Et(wr(l[1],u[1],c)),Et(wr(l[2],u[2],c)),an(wr(l[3],u[3],c))],"rgba");return t?{color:h,leftIndex:a,rightIndex:o,value:i}:h}}var Kg=Dh;function xl(r,n,t,i){var a=ai(r);if(r)return a=function Us(r){if(r){var c,h,n=r[0]/255,t=r[1]/255,i=r[2]/255,a=Math.min(n,t,i),o=Math.max(n,t,i),l=o-a,u=(o+a)/2;if(0===l)c=0,h=0;else{h=u<.5?l/(o+a):l/(2-o-a);var f=((o-n)/6+l/2)/l,p=((o-t)/6+l/2)/l,v=((o-i)/6+l/2)/l;n===o?c=v-p:t===o?c=1/3+f-v:i===o&&(c=2/3+p-f),c<0&&(c+=1),c>1&&(c-=1)}var m=[360*c,h,u];return null!=r[3]&&m.push(r[3]),m}}(a),null!=n&&(a[0]=function jt(r){return(r=Math.round(r))<0?0:r>360?360:r}(n)),null!=t&&(a[1]=lr(t)),null!=i&&(a[2]=lr(i)),Ka(mo(a),"rgba")}function hc(r,n){var t=ai(r);if(t&&null!=n)return t[3]=an(n),Ka(t,"rgba")}function Ka(r,n){if(r&&r.length){var t=r[0]+","+r[1]+","+r[2];return("rgba"===n||"hsva"===n||"hsla"===n)&&(t+=","+r[3]),n+"("+t+")"}}function fu(r,n){var t=ai(r);return t?(.299*t[0]+.587*t[1]+.114*t[2])*t[3]/255+(1-t[3])*n:0}function $g(){return Ka([Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random())],"rgb")}var Vs=Math.round;function pu(r){var n;if(r&&"transparent"!==r){if("string"==typeof r&&r.indexOf("rgba")>-1){var t=ai(r);t&&(r="rgb("+t[0]+","+t[1]+","+t[2]+")",n=t[3])}}else r="none";return{color:r,opacity:null==n?1:n}}function Hs(r){return r<1e-4&&r>-1e-4}function Tl(r){return Vs(1e3*r)/1e3}function Eh(r){return Vs(1e4*r)/1e4}var Xg={left:"start",right:"end",center:"middle",middle:"middle"};function tf(r){return r&&!!r.image}function nf(r){return"linear"===r.type}function rf(r){return"radial"===r.type}function bl(r){return"url(#"+r+")"}function tv(r){var n=r.getGlobalScale(),t=Math.max(n[0],n[1]);return Math.max(Math.ceil(Math.log(t)/Math.log(10)),1)}function nv(r){var n=r.x||0,t=r.y||0,i=(r.rotation||0)*Ei,a=$t(r.scaleX,1),o=$t(r.scaleY,1),l=r.skewX||0,u=r.skewY||0,c=[];return(n||t)&&c.push("translate("+n+"px,"+t+"px)"),i&&c.push("rotate("+i+")"),(1!==a||1!==o)&&c.push("scale("+a+","+o+")"),(l||u)&&c.push("skew("+Vs(l*Ei)+"deg, "+Vs(u*Ei)+"deg)"),c.join(" ")}var af=gt.hasGlobalWindow&&Pe(window.btoa)?function(r){return window.btoa(unescape(r))}:"undefined"!=typeof Buffer?function(r){return Buffer.from(r).toString("base64")}:function(r){return null},dc=Array.prototype.slice;function Eo(r,n,t){return(n-r)*t+r}function rv(r,n,t,i){for(var a=n.length,o=0;o<a;o++)r[o]=Eo(n[o],t[o],i);return r}function sf(r,n,t,i){for(var a=n.length,o=0;o<a;o++)r[o]=n[o]+t[o]*i;return r}function av(r,n,t,i){for(var a=n.length,o=a&&n[0].length,l=0;l<a;l++){r[l]||(r[l]=[]);for(var u=0;u<o;u++)r[l][u]=n[l][u]+t[l][u]*i}return r}function ov(r,n){for(var t=r.length,i=n.length,a=t>i?n:r,o=Math.min(t,i),l=a[o-1]||{color:[0,0,0,0],offset:0},u=o;u<Math.max(t,i);u++)a.push({offset:l.offset,color:l.color.slice()})}function za(r,n,t){var i=r,a=n;if(i.push&&a.push){var o=i.length,l=a.length;if(o!==l)if(o>l)i.length=l;else for(var c=o;c<l;c++)i.push(1===t?a[c]:dc.call(a[c]));var h=i[0]&&i[0].length;for(c=0;c<i.length;c++)if(1===t)isNaN(i[c])&&(i[c]=a[c]);else for(var f=0;f<h;f++)isNaN(i[c][f])&&(i[c][f]=a[c][f])}}function Sl(r){if(zn(r)){var n=r.length;if(zn(r[0])){for(var t=[],i=0;i<n;i++)t.push(dc.call(r[i]));return t}return dc.call(r)}return r}function Ki(r){return r[0]=Math.floor(r[0])||0,r[1]=Math.floor(r[1])||0,r[2]=Math.floor(r[2])||0,r[3]=null==r[3]?1:r[3],"rgba("+r.join(",")+")"}function sv(r){return 4===r||5===r}function Ih(r){return 1===r||2===r}var pc=[0,0,0,0],By=function(){function r(n){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=n}return r.prototype.isFinished=function(){return this._finished},r.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},r.prototype.needsAnimate=function(){return this.keyframes.length>=1},r.prototype.getAdditiveTrack=function(){return this._additiveTrack},r.prototype.addKeyframe=function(n,t,i){this._needsSort=!0;var a=this.keyframes,o=a.length,l=!1,u=6,c=t;if(zn(t)){var h=function Ny(r){return zn(r&&r[0])?2:1}(t);u=h,(1===h&&!Ve(t[0])||2===h&&!Ve(t[0][0]))&&(l=!0)}else if(Ve(t)&&!ni(t))u=0;else if(Qe(t))if(isNaN(+t)){var f=ai(t);f&&(c=f,u=3)}else u=0;else if(jn(t)){var p=Ge({},c);p.colorStops=_t(t.colorStops,function(m){return{offset:m.offset,color:ai(m.color)}}),nf(t)?u=4:rf(t)&&(u=5),c=p}0===o?this.valType=u:(u!==this.valType||6===u)&&(l=!0),this.discrete=this.discrete||l;var v={time:n,value:c,rawValue:t,percent:0};return i&&(v.easing=i,v.easingFunc=Pe(i)?i:hi[i]||b(i)),a.push(v),v},r.prototype.prepare=function(n,t){var i=this.keyframes;this._needsSort&&i.sort(function(C,T){return C.time-T.time});for(var a=this.valType,o=i.length,l=i[o-1],u=this.discrete,c=Ih(a),h=sv(a),f=0;f<o;f++){var p=i[f],v=p.value,m=l.value;p.percent=p.time/n,u||(c&&f!==o-1?za(v,m,a):h&&ov(v.colorStops,m.colorStops))}if(!u&&5!==a&&t&&this.needsAnimate()&&t.needsAnimate()&&a===t.valType&&!t._finished){this._additiveTrack=t;var y=i[0].value;for(f=0;f<o;f++)0===a?i[f].additiveValue=i[f].value-y:3===a?i[f].additiveValue=sf([],i[f].value,y,-1):Ih(a)&&(i[f].additiveValue=1===a?sf([],i[f].value,y,-1):av([],i[f].value,y,-1))}},r.prototype.step=function(n,t){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var f,m,y,i=null!=this._additiveTrack,a=i?"additiveValue":"value",o=this.valType,l=this.keyframes,u=l.length,c=this.propName,h=3===o,p=this._lastFr,v=Math.min;if(1===u)m=y=l[0];else{if(t<0)f=0;else if(t<this._lastFrP){for(f=v(p+1,u-1);f>=0&&!(l[f].percent<=t);f--);f=v(f,u-2)}else{for(f=p;f<u&&!(l[f].percent>t);f++);f=v(f-1,u-2)}y=l[f+1],m=l[f]}if(m&&y){this._lastFr=f,this._lastFrP=t;var T=y.percent-m.percent,z=0===T?1:v((t-m.percent)/T,1);y.easingFunc&&(z=y.easingFunc(z));var E=i?this._additiveValue:h?pc:n[c];if((Ih(o)||h)&&!E&&(E=this._additiveValue=[]),this.discrete)n[c]=z<1?m.rawValue:y.rawValue;else if(Ih(o))1===o?rv(E,m[a],y[a],z):function iv(r,n,t,i){for(var a=n.length,o=a&&n[0].length,l=0;l<a;l++){r[l]||(r[l]=[]);for(var u=0;u<o;u++)r[l][u]=Eo(n[l][u],t[l][u],i)}}(E,m[a],y[a],z);else if(sv(o)){var N=m[a],X=y[a],ve=4===o;n[c]={type:ve?"linear":"radial",x:Eo(N.x,X.x,z),y:Eo(N.y,X.y,z),colorStops:_t(N.colorStops,function(_e,ze){var Ee=X.colorStops[ze];return{offset:Eo(_e.offset,Ee.offset,z),color:Ki(rv([],_e.color,Ee.color,z))}}),global:X.global},ve?(n[c].x2=Eo(N.x2,X.x2,z),n[c].y2=Eo(N.y2,X.y2,z)):n[c].r=Eo(N.r,X.r,z)}else if(h)rv(E,m[a],y[a],z),i||(n[c]=Ki(E));else{var ce=Eo(m[a],y[a],z);i?this._additiveValue=ce:n[c]=ce}i&&this._addToTarget(n)}}},r.prototype._addToTarget=function(n){var t=this.valType,i=this.propName,a=this._additiveValue;0===t?n[i]=n[i]+a:3===t?(ai(n[i],pc),sf(pc,pc,a,1),n[i]=Ki(pc)):1===t?sf(n[i],n[i],a,1):2===t&&av(n[i],n[i],a,1)},r}(),lv=function(){function r(n,t,i,a){this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=n,this._loop=t,t&&a?Dn("Can' use additive animation on looped animation."):(this._additiveAnimators=a,this._allowDiscrete=i)}return r.prototype.getMaxTime=function(){return this._maxTime},r.prototype.getDelay=function(){return this._delay},r.prototype.getLoop=function(){return this._loop},r.prototype.getTarget=function(){return this._target},r.prototype.changeTarget=function(n){this._target=n},r.prototype.when=function(n,t,i){return this.whenWithKeys(n,t,gn(t),i)},r.prototype.whenWithKeys=function(n,t,i,a){for(var o=this._tracks,l=0;l<i.length;l++){var u=i[l],c=o[u];if(!c){c=o[u]=new By(u);var h=void 0,f=this._getAdditiveTrack(u);if(f){var p=f.keyframes,v=p[p.length-1];h=v&&v.value,3===f.valType&&h&&(h=Ki(h))}else h=this._target[u];if(null==h)continue;n>0&&c.addKeyframe(0,Sl(h),a),this._trackKeys.push(u)}c.addKeyframe(n,Sl(t[u]),a)}return this._maxTime=Math.max(this._maxTime,n),this},r.prototype.pause=function(){this._clip.pause(),this._paused=!0},r.prototype.resume=function(){this._clip.resume(),this._paused=!1},r.prototype.isPaused=function(){return!!this._paused},r.prototype.duration=function(n){return this._maxTime=n,this._force=!0,this},r.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var n=this._doneCbs;if(n)for(var t=n.length,i=0;i<t;i++)n[i].call(this)},r.prototype._abortedCallback=function(){this._setTracksFinished();var n=this.animation,t=this._abortedCbs;if(n&&n.removeClip(this._clip),this._clip=null,t)for(var i=0;i<t.length;i++)t[i].call(this)},r.prototype._setTracksFinished=function(){for(var n=this._tracks,t=this._trackKeys,i=0;i<t.length;i++)n[t[i]].setFinished()},r.prototype._getAdditiveTrack=function(n){var t,i=this._additiveAnimators;if(i)for(var a=0;a<i.length;a++){var o=i[a].getTrack(n);o&&(t=o)}return t},r.prototype.start=function(n){if(!(this._started>0)){this._started=1;for(var t=this,i=[],a=this._maxTime||0,o=0;o<this._trackKeys.length;o++){var l=this._trackKeys[o],u=this._tracks[l],c=this._getAdditiveTrack(l),h=u.keyframes,f=h.length;if(u.prepare(a,c),u.needsAnimate())if(!this._allowDiscrete&&u.discrete){var p=h[f-1];p&&(t._target[u.propName]=p.rawValue),u.setFinished()}else i.push(u)}if(i.length||this._force){var v=new ye({life:a,loop:this._loop,delay:this._delay||0,onframe:function(m){t._started=2;var y=t._additiveAnimators;if(y){for(var C=!1,T=0;T<y.length;T++)if(y[T]._clip){C=!0;break}C||(t._additiveAnimators=null)}for(T=0;T<i.length;T++)i[T].step(t._target,m);var z=t._onframeCbs;if(z)for(T=0;T<z.length;T++)z[T](t._target,m)},ondestroy:function(){t._doneCallback()}});this._clip=v,this.animation&&this.animation.addClip(v),n&&v.setEasing(n)}else this._doneCallback();return this}},r.prototype.stop=function(n){this._clip&&(n&&this._clip.onframe(1),this._abortedCallback())},r.prototype.delay=function(n){return this._delay=n,this},r.prototype.during=function(n){return n&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(n)),this},r.prototype.done=function(n){return n&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(n)),this},r.prototype.aborted=function(n){return n&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(n)),this},r.prototype.getClip=function(){return this._clip},r.prototype.getTrack=function(n){return this._tracks[n]},r.prototype.getTracks=function(){var n=this;return _t(this._trackKeys,function(t){return n._tracks[t]})},r.prototype.stopTracks=function(n,t){if(!n.length||!this._clip)return!0;for(var i=this._tracks,a=this._trackKeys,o=0;o<n.length;o++){var l=i[n[o]];l&&!l.isFinished()&&(t?l.step(this._target,1):1===this._started&&l.step(this._target,0),l.setFinished())}var u=!0;for(o=0;o<a.length;o++)if(!i[a[o]].isFinished()){u=!1;break}return u&&this._abortedCallback(),u},r.prototype.saveTo=function(n,t,i){if(n){t=t||this._trackKeys;for(var a=0;a<t.length;a++){var o=t[a],l=this._tracks[o];if(l&&!l.isFinished()){var u=l.keyframes,c=u[i?0:u.length-1];c&&(n[o]=Sl(c.rawValue))}}}},r.prototype.__changeFinalValue=function(n,t){t=t||gn(n);for(var i=0;i<t.length;i++){var a=t[i],o=this._tracks[a];if(o){var l=o.keyframes;if(l.length>1){var u=l.pop();o.addKeyframe(u.time,n[a]),o.prepare(this._maxTime,o.getAdditiveTrack())}}}},r}();const gu=lv;function vu(){return(new Date).getTime()}var Zy=function(r){function n(t){var i=r.call(this)||this;return i._running=!1,i._time=0,i._pausedTime=0,i._pauseStart=0,i._paused=!1,i.stage=(t=t||{}).stage||{},i}return or(n,r),n.prototype.addClip=function(t){t.animation&&this.removeClip(t),this._head?(this._tail.next=t,t.prev=this._tail,t.next=null,this._tail=t):this._head=this._tail=t,t.animation=this},n.prototype.addAnimator=function(t){t.animation=this;var i=t.getClip();i&&this.addClip(i)},n.prototype.removeClip=function(t){if(t.animation){var i=t.prev,a=t.next;i?i.next=a:this._head=a,a?a.prev=i:this._tail=i,t.next=t.prev=t.animation=null}},n.prototype.removeAnimator=function(t){var i=t.getClip();i&&this.removeClip(i),t.animation=null},n.prototype.update=function(t){for(var i=vu()-this._pausedTime,a=i-this._time,o=this._head;o;){var l=o.next;o.step(i,a)&&(o.ondestroy(),this.removeClip(o)),o=l}this._time=i,t||(this.trigger("frame",a),this.stage.update&&this.stage.update())},n.prototype._startLoop=function(){var t=this;this._running=!0,Rs(function i(){t._running&&(Rs(i),!t._paused&&t.update())})},n.prototype.start=function(){this._running||(this._time=vu(),this._pausedTime=0,this._startLoop())},n.prototype.stop=function(){this._running=!1},n.prototype.pause=function(){this._paused||(this._pauseStart=vu(),this._paused=!0)},n.prototype.resume=function(){this._paused&&(this._pausedTime+=vu()-this._pauseStart,this._paused=!1)},n.prototype.clear=function(){for(var t=this._head;t;){var i=t.next;t.prev=t.next=t.animation=null,t=i}this._head=this._tail=null},n.prototype.isFinished=function(){return null==this._head},n.prototype.animate=function(t,i){i=i||{},this.start();var a=new gu(t,i.loop);return this.addAnimator(a),a},n}(Oi);const Uy=Zy;var cf=gt.domSupported,hf=function(){var r=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t={pointerdown:1,pointerup:1,pointermove:1,pointerout:1};return{mouse:r,touch:["touchstart","touchend","touchmove"],pointer:_t(r,function(a){var o=a.replace("mouse","pointer");return t.hasOwnProperty(o)?o:a})}}(),uv_mouse=["mousemove","mouseup"],uv_pointer=["pointermove","pointerup"],cv=!1;function df(r){var n=r.pointerType;return"pen"===n||"touch"===n}function ff(r){r&&(r.zrByTouch=!0)}function hv(r,n){for(var t=n,i=!1;t&&9!==t.nodeType&&!(i=t.domBelongToZr||t!==n&&t===r.painterRoot);)t=t.parentNode;return i}var Gy=function r(n,t){this.stopPropagation=kr,this.stopImmediatePropagation=kr,this.preventDefault=kr,this.type=t.type,this.target=this.currentTarget=n.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY},yo={mousedown:function(r){r=nn(this.dom,r),this.__mayPointerCapture=[r.zrX,r.zrY],this.trigger("mousedown",r)},mousemove:function(r){r=nn(this.dom,r);var n=this.__mayPointerCapture;n&&(r.zrX!==n[0]||r.zrY!==n[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",r)},mouseup:function(r){r=nn(this.dom,r),this.__togglePointerCapture(!1),this.trigger("mouseup",r)},mouseout:function(r){hv(this,(r=nn(this.dom,r)).toElement||r.relatedTarget)||(this.__pointerCapturing&&(r.zrEventControl="no_globalout"),this.trigger("mouseout",r))},wheel:function(r){cv=!0,r=nn(this.dom,r),this.trigger("mousewheel",r)},mousewheel:function(r){cv||(r=nn(this.dom,r),this.trigger("mousewheel",r))},touchstart:function(r){ff(r=nn(this.dom,r)),this.__lastTouchMoment=new Date,this.handler.processGesture(r,"start"),yo.mousemove.call(this,r),yo.mousedown.call(this,r)},touchmove:function(r){ff(r=nn(this.dom,r)),this.handler.processGesture(r,"change"),yo.mousemove.call(this,r)},touchend:function(r){ff(r=nn(this.dom,r)),this.handler.processGesture(r,"end"),yo.mouseup.call(this,r),+new Date-+this.__lastTouchMoment<300&&yo.click.call(this,r)},pointerdown:function(r){yo.mousedown.call(this,r)},pointermove:function(r){df(r)||yo.mousemove.call(this,r)},pointerup:function(r){yo.mouseup.call(this,r)},pointerout:function(r){df(r)||yo.mouseout.call(this,r)}};De(["click","dblclick","contextmenu"],function(r){yo[r]=function(n){n=nn(this.dom,n),this.trigger(r,n)}});var pf={pointermove:function(r){df(r)||pf.mousemove.call(this,r)},pointerup:function(r){pf.mouseup.call(this,r)},mousemove:function(r){this.trigger("mousemove",r)},mouseup:function(r){var n=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",r),n&&(r.zrEventControl="only_globalout",this.trigger("mouseout",r))}};function kh(r,n,t,i){r.mounted[n]=t,r.listenerOpts[n]=i,pr(r.domTarget,n,t,i)}function gf(r){var n=r.mounted;for(var t in n)n.hasOwnProperty(t)&&Tn(r.domTarget,t,n[t],r.listenerOpts[t]);r.mounted={}}var dv=function r(n,t){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=n,this.domHandlers=t},Qy=function(r){function n(t,i){var a=r.call(this)||this;return a.__pointerCapturing=!1,a.dom=t,a.painterRoot=i,a._localHandlerScope=new dv(t,yo),cf&&(a._globalHandlerScope=new dv(document,pf)),function Jy(r,n){var t=n.domHandlers;gt.pointerEventsSupported?De(hf.pointer,function(i){kh(n,i,function(a){t[i].call(r,a)})}):(gt.touchEventsSupported&&De(hf.touch,function(i){kh(n,i,function(a){t[i].call(r,a),function Hy(r){r.touching=!0,null!=r.touchTimer&&(clearTimeout(r.touchTimer),r.touchTimer=null),r.touchTimer=setTimeout(function(){r.touching=!1,r.touchTimer=null},700)}(n)})}),De(hf.mouse,function(i){kh(n,i,function(a){a=on(a),n.touching||t[i].call(r,a)})}))}(a,a._localHandlerScope),a}return or(n,r),n.prototype.dispose=function(){gf(this._localHandlerScope),cf&&gf(this._globalHandlerScope)},n.prototype.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},n.prototype.__togglePointerCapture=function(t){if(this.__mayPointerCapture=null,cf&&+this.__pointerCapturing^+t){this.__pointerCapturing=t;var i=this._globalHandlerScope;t?function Yy(r,n){function t(i){kh(n,i,function a(o){o=on(o),hv(r,o.target)||(o=function Wy(r,n){return nn(r.dom,new Gy(r,n),!0)}(r,o),n.domHandlers[i].call(r,o))},{capture:!0})}gt.pointerEventsSupported?De(uv_pointer,t):gt.touchEventsSupported||De(uv_mouse,t)}(this,i):gf(i)}},n}(Oi);const qy=Qy;var fv=1;gt.hasGlobalWindow&&(fv=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var Lh=fv,Rh="#333",vf="#ccc";function $i(){return[1,0,0,1,0,0]}function mu(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,r}function Nh(r,n){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r}function Mo(r,n,t){var a=n[1]*t[0]+n[3]*t[1],o=n[0]*t[2]+n[2]*t[3],l=n[1]*t[2]+n[3]*t[3],u=n[0]*t[4]+n[2]*t[5]+n[4],c=n[1]*t[4]+n[3]*t[5]+n[5];return r[0]=n[0]*t[0]+n[2]*t[1],r[1]=a,r[2]=o,r[3]=l,r[4]=u,r[5]=c,r}function Co(r,n,t){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4]+t[0],r[5]=n[5]+t[1],r}function Ws(r,n,t){var i=n[0],a=n[2],o=n[4],l=n[1],u=n[3],c=n[5],h=Math.sin(t),f=Math.cos(t);return r[0]=i*f+l*h,r[1]=-i*h+l*f,r[2]=a*f+u*h,r[3]=-a*h+f*u,r[4]=f*o+h*c,r[5]=f*c-h*o,r}function Fh(r,n,t){var i=t[0],a=t[1];return r[0]=n[0]*i,r[1]=n[1]*a,r[2]=n[2]*i,r[3]=n[3]*a,r[4]=n[4]*i,r[5]=n[5]*a,r}function zl(r,n){var t=n[0],i=n[2],a=n[4],o=n[1],l=n[3],u=n[5],c=t*l-o*i;return c?(r[0]=l*(c=1/c),r[1]=-o*c,r[2]=-i*c,r[3]=t*c,r[4]=(i*u-l*a)*c,r[5]=(o*a-t*u)*c,r):null}function pv(r){var n=[1,0,0,1,0,0];return Nh(n,r),n}var mf=mu;function wl(r){return r>5e-5||r<-5e-5}var Dl=[],Al=[],_f=[1,0,0,1,0,0],yf=Math.abs,$y=function(){function r(){}return r.prototype.getLocalTransform=function(n){return r.getLocalTransform(this,n)},r.prototype.setPosition=function(n){this.x=n[0],this.y=n[1]},r.prototype.setScale=function(n){this.scaleX=n[0],this.scaleY=n[1]},r.prototype.setSkew=function(n){this.skewX=n[0],this.skewY=n[1]},r.prototype.setOrigin=function(n){this.originX=n[0],this.originY=n[1]},r.prototype.needLocalTransform=function(){return wl(this.rotation)||wl(this.x)||wl(this.y)||wl(this.scaleX-1)||wl(this.scaleY-1)||wl(this.skewX)||wl(this.skewY)},r.prototype.updateTransform=function(){var n=this.parent&&this.parent.transform,t=this.needLocalTransform(),i=this.transform;t||n?(i=i||[1,0,0,1,0,0],t?this.getLocalTransform(i):mf(i),n&&(t?Mo(i,n,i):Nh(i,n)),this.transform=i,this._resolveGlobalScaleRatio(i)):i&&mf(i)},r.prototype._resolveGlobalScaleRatio=function(n){var t=this.globalScaleRatio;if(null!=t&&1!==t){this.getGlobalScale(Dl);var i=Dl[0]<0?-1:1,a=Dl[1]<0?-1:1,o=((Dl[0]-i)*t+i)/Dl[0]||0,l=((Dl[1]-a)*t+a)/Dl[1]||0;n[0]*=o,n[1]*=o,n[2]*=l,n[3]*=l}this.invTransform=this.invTransform||[1,0,0,1,0,0],zl(this.invTransform,n)},r.prototype.getComputedTransform=function(){for(var n=this,t=[];n;)t.push(n),n=n.parent;for(;n=t.pop();)n.updateTransform();return this.transform},r.prototype.setLocalTransform=function(n){if(n){var t=n[0]*n[0]+n[1]*n[1],i=n[2]*n[2]+n[3]*n[3],a=Math.atan2(n[1],n[0]),o=Math.PI/2+a-Math.atan2(n[3],n[2]);i=Math.sqrt(i)*Math.cos(o),t=Math.sqrt(t),this.skewX=o,this.skewY=0,this.rotation=-a,this.x=+n[4],this.y=+n[5],this.scaleX=t,this.scaleY=i,this.originX=0,this.originY=0}},r.prototype.decomposeTransform=function(){if(this.transform){var n=this.parent,t=this.transform;n&&n.transform&&(Mo(Al,n.invTransform,t),t=Al);var i=this.originX,a=this.originY;(i||a)&&(_f[4]=i,_f[5]=a,Mo(Al,t,_f),Al[4]-=i,Al[5]-=a,t=Al),this.setLocalTransform(t)}},r.prototype.getGlobalScale=function(n){var t=this.transform;return n=n||[],t?(n[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),n[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(n[0]=-n[0]),t[3]<0&&(n[1]=-n[1]),n):(n[0]=1,n[1]=1,n)},r.prototype.transformCoordToLocal=function(n,t){var i=[n,t],a=this.invTransform;return a&&Hr(i,i,a),i},r.prototype.transformCoordToGlobal=function(n,t){var i=[n,t],a=this.transform;return a&&Hr(i,i,a),i},r.prototype.getLineScale=function(){var n=this.transform;return n&&yf(n[0]-1)>1e-10&&yf(n[3]-1)>1e-10?Math.sqrt(yf(n[0]*n[3]-n[2]*n[1])):1},r.prototype.copyTransform=function(n){vv(this,n)},r.getLocalTransform=function(n,t){t=t||[];var i=n.originX||0,a=n.originY||0,o=n.scaleX,l=n.scaleY,u=n.anchorX,c=n.anchorY,h=n.rotation||0,f=n.x,p=n.y,v=n.skewX?Math.tan(n.skewX):0,m=n.skewY?Math.tan(-n.skewY):0;if(i||a||u||c){var y=i+u,C=a+c;t[4]=-y*o-v*C*l,t[5]=-C*l-m*y*o}else t[4]=t[5]=0;return t[0]=o,t[3]=l,t[1]=m*o,t[2]=v*l,h&&Ws(t,t,h),t[4]+=i+f,t[5]+=a+p,t},r.initDefaultProps=function(){var n=r.prototype;n.scaleX=n.scaleY=n.globalScaleRatio=1,n.x=n.y=n.originX=n.originY=n.skewX=n.skewY=n.rotation=n.anchorX=n.anchorY=0}(),r}(),Oo=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function vv(r,n){for(var t=0;t<Oo.length;t++){var i=Oo[t];r[i]=n[i]}}const ds=$y;var jy=function(){function r(n,t){this.x=n||0,this.y=t||0}return r.prototype.copy=function(n){return this.x=n.x,this.y=n.y,this},r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.set=function(n,t){return this.x=n,this.y=t,this},r.prototype.equal=function(n){return n.x===this.x&&n.y===this.y},r.prototype.add=function(n){return this.x+=n.x,this.y+=n.y,this},r.prototype.scale=function(n){this.x*=n,this.y*=n},r.prototype.scaleAndAdd=function(n,t){this.x+=n.x*t,this.y+=n.y*t},r.prototype.sub=function(n){return this.x-=n.x,this.y-=n.y,this},r.prototype.dot=function(n){return this.x*n.x+this.y*n.y},r.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},r.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},r.prototype.normalize=function(){var n=this.len();return this.x/=n,this.y/=n,this},r.prototype.distance=function(n){var t=this.x-n.x,i=this.y-n.y;return Math.sqrt(t*t+i*i)},r.prototype.distanceSquare=function(n){var t=this.x-n.x,i=this.y-n.y;return t*t+i*i},r.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},r.prototype.transform=function(n){if(n){var t=this.x,i=this.y;return this.x=n[0]*t+n[2]*i+n[4],this.y=n[1]*t+n[3]*i+n[5],this}},r.prototype.toArray=function(n){return n[0]=this.x,n[1]=this.y,n},r.prototype.fromArray=function(n){this.x=n[0],this.y=n[1]},r.set=function(n,t,i){n.x=t,n.y=i},r.copy=function(n,t){n.x=t.x,n.y=t.y},r.len=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},r.lenSquare=function(n){return n.x*n.x+n.y*n.y},r.dot=function(n,t){return n.x*t.x+n.y*t.y},r.add=function(n,t,i){n.x=t.x+i.x,n.y=t.y+i.y},r.sub=function(n,t,i){n.x=t.x-i.x,n.y=t.y-i.y},r.scale=function(n,t,i){n.x=t.x*i,n.y=t.y*i},r.scaleAndAdd=function(n,t,i,a){n.x=t.x+i.x*a,n.y=t.y+i.y*a},r.lerp=function(n,t,i,a){var o=1-a;n.x=o*t.x+a*i.x,n.y=o*t.y+a*i.y},r}();const bn=jy;var Bh=Math.min,Zh=Math.max,El=new bn,Po=new bn,Ml=new bn,Ol=new bn,vc=new bn,mc=new bn,mv=function(){function r(n,t,i,a){i<0&&(n+=i,i=-i),a<0&&(t+=a,a=-a),this.x=n,this.y=t,this.width=i,this.height=a}return r.prototype.union=function(n){var t=Bh(n.x,this.x),i=Bh(n.y,this.y);this.width=isFinite(this.x)&&isFinite(this.width)?Zh(n.x+n.width,this.x+this.width)-t:n.width,this.height=isFinite(this.y)&&isFinite(this.height)?Zh(n.y+n.height,this.y+this.height)-i:n.height,this.x=t,this.y=i},r.prototype.applyTransform=function(n){r.applyTransform(this,this,n)},r.prototype.calculateTransform=function(n){var t=this,i=n.width/t.width,a=n.height/t.height,o=[1,0,0,1,0,0];return Co(o,o,[-t.x,-t.y]),Fh(o,o,[i,a]),Co(o,o,[n.x,n.y]),o},r.prototype.intersect=function(n,t){if(!n)return!1;n instanceof r||(n=r.create(n));var i=this,a=i.x,o=i.x+i.width,l=i.y,u=i.y+i.height,c=n.x,h=n.x+n.width,f=n.y,p=n.y+n.height,v=!(o<c||h<a||u<f||p<l);if(t){var m=1/0,y=0,C=Math.abs(o-c),T=Math.abs(h-a),z=Math.abs(u-f),E=Math.abs(p-l),N=Math.min(C,T),X=Math.min(z,E);o<c||h<a?N>y&&(y=N,bn.set(mc,C<T?-C:T,0)):N<m&&(m=N,bn.set(vc,C<T?C:-T,0)),u<f||p<l?X>y&&(y=X,bn.set(mc,0,z<E?-z:E)):N<m&&(m=N,bn.set(vc,0,z<E?z:-E))}return t&&bn.copy(t,v?vc:mc),v},r.prototype.contain=function(n,t){var i=this;return n>=i.x&&n<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copy=function(n){r.copy(this,n)},r.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},r.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},r.prototype.isZero=function(){return 0===this.width||0===this.height},r.create=function(n){return new r(n.x,n.y,n.width,n.height)},r.copy=function(n,t){n.x=t.x,n.y=t.y,n.width=t.width,n.height=t.height},r.applyTransform=function(n,t,i){if(i){if(i[1]<1e-5&&i[1]>-1e-5&&i[2]<1e-5&&i[2]>-1e-5){var a=i[0],o=i[3],u=i[5];return n.x=t.x*a+i[4],n.y=t.y*o+u,n.width=t.width*a,n.height=t.height*o,n.width<0&&(n.x+=n.width,n.width=-n.width),void(n.height<0&&(n.y+=n.height,n.height=-n.height))}El.x=Ml.x=t.x,El.y=Ol.y=t.y,Po.x=Ol.x=t.x+t.width,Po.y=Ml.y=t.y+t.height,El.transform(i),Ol.transform(i),Po.transform(i),Ml.transform(i),n.x=Bh(El.x,Po.x,Ml.x,Ol.x),n.y=Bh(El.y,Po.y,Ml.y,Ol.y);var c=Zh(El.x,Po.x,Ml.x,Ol.x),h=Zh(El.y,Po.y,Ml.y,Ol.y);n.width=c-n.x,n.height=h-n.y}else n!==t&&r.copy(n,t)},r}();const Mn=mv;var Cf={};function wa(r,n){var t=Cf[n=n||Pt];t||(t=Cf[n]=new Ct(500));var i=t.get(r);return null==i&&(i=fn.measureText(r,n).width,t.put(r,i)),i}function _v(r,n,t,i){var a=wa(r,n),o=Uh(n),l=yc(0,a,t),u=Gs(0,o,i);return new Mn(l,u,a,o)}function _c(r,n,t,i){var a=((r||"")+"").split("\n");if(1===a.length)return _v(a[0],n,t,i);for(var l=new Mn(0,0,0,0),u=0;u<a.length;u++){var c=_v(a[u],n,t,i);0===u?l.copy(c):l.union(c)}return l}function yc(r,n,t){return"right"===t?r-=n:"center"===t&&(r-=n/2),r}function Gs(r,n,t){return"middle"===t?r-=n/2:"bottom"===t&&(r-=n),r}function Uh(r){return wa("\u56fd",r)}function xo(r,n){return"string"==typeof r?r.lastIndexOf("%")>=0?parseFloat(r)/100*n:parseFloat(r):r}function Vh(r,n,t){var i=n.position||"inside",a=null!=n.distance?n.distance:5,o=t.height,l=t.width,u=o/2,c=t.x,h=t.y,f="left",p="top";if(i instanceof Array)c+=xo(i[0],t.width),h+=xo(i[1],t.height),f=null,p=null;else switch(i){case"left":c-=a,h+=u,f="right",p="middle";break;case"right":c+=a+l,h+=u,p="middle";break;case"top":c+=l/2,h-=a,f="center",p="bottom";break;case"bottom":c+=l/2,h+=o+a,f="center";break;case"inside":c+=l/2,h+=u,f="center",p="middle";break;case"insideLeft":c+=a,h+=u,p="middle";break;case"insideRight":c+=l-a,h+=u,f="right",p="middle";break;case"insideTop":c+=l/2,h+=a,f="center";break;case"insideBottom":c+=l/2,h+=o-a,f="center",p="bottom";break;case"insideTopLeft":c+=a,h+=a;break;case"insideTopRight":c+=l-a,h+=a,f="right";break;case"insideBottomLeft":c+=a,h+=o-a,p="bottom";break;case"insideBottomRight":c+=l-a,h+=o-a,f="right",p="bottom"}return(r=r||{}).x=c,r.y=h,r.align=f,r.verticalAlign=p,r}var xf="__zr_normal__",Tf=Oo.concat(["ignore"]),e1=cr(Oo,function(r,n){return r[n]=!0,r},{ignore:!1}),_u={},t1=new Mn(0,0,0,0),bf=function(){function r(n){this.id=Er(),this.animators=[],this.currentStates=[],this.states={},this._init(n)}return r.prototype._init=function(n){this.attr(n)},r.prototype.drift=function(n,t,i){switch(this.draggable){case"horizontal":t=0;break;case"vertical":n=0}var a=this.transform;a||(a=this.transform=[1,0,0,1,0,0]),a[4]+=n,a[5]+=t,this.decomposeTransform(),this.markRedraw()},r.prototype.beforeUpdate=function(){},r.prototype.afterUpdate=function(){},r.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},r.prototype.updateInnerText=function(n){var t=this._textContent;if(t&&(!t.ignore||n)){this.textConfig||(this.textConfig={});var i=this.textConfig,a=i.local,o=t.innerTransformable,l=void 0,u=void 0,c=!1;o.parent=a?this:null;var h=!1;if(o.copyTransform(t),null!=i.position){var f=t1;f.copy(i.layoutRect?i.layoutRect:this.getBoundingRect()),a||f.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(_u,i,f):Vh(_u,i,f),o.x=_u.x,o.y=_u.y,l=_u.align,u=_u.verticalAlign;var p=i.origin;if(p&&null!=i.rotation){var v=void 0,m=void 0;"center"===p?(v=.5*f.width,m=.5*f.height):(v=xo(p[0],f.width),m=xo(p[1],f.height)),h=!0,o.originX=-o.x+v+(a?0:f.x),o.originY=-o.y+m+(a?0:f.y)}}null!=i.rotation&&(o.rotation=i.rotation);var y=i.offset;y&&(o.x+=y[0],o.y+=y[1],h||(o.originX=-y[0],o.originY=-y[1]));var C=null==i.inside?"string"==typeof i.position&&i.position.indexOf("inside")>=0:i.inside,T=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),z=void 0,E=void 0,N=void 0;C&&this.canBeInsideText()?(E=i.insideStroke,(null==(z=i.insideFill)||"auto"===z)&&(z=this.getInsideTextFill()),(null==E||"auto"===E)&&(E=this.getInsideTextStroke(z),N=!0)):(E=i.outsideStroke,(null==(z=i.outsideFill)||"auto"===z)&&(z=this.getOutsideFill()),(null==E||"auto"===E)&&(E=this.getOutsideStroke(z),N=!0)),((z=z||"#000")!==T.fill||E!==T.stroke||N!==T.autoStroke||l!==T.align||u!==T.verticalAlign)&&(c=!0,T.fill=z,T.stroke=E,T.autoStroke=N,T.align=l,T.verticalAlign=u,t.setDefaultTextStyle(T)),t.__dirty|=1,c&&t.dirtyStyle(!0)}},r.prototype.canBeInsideText=function(){return!0},r.prototype.getInsideTextFill=function(){return"#fff"},r.prototype.getInsideTextStroke=function(n){return"#000"},r.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?vf:Rh},r.prototype.getOutsideStroke=function(n){var t=this.__zr&&this.__zr.getBackgroundColor(),i="string"==typeof t&&ai(t);i||(i=[255,255,255,1]);for(var a=i[3],o=this.__zr.isDarkMode(),l=0;l<3;l++)i[l]=i[l]*a+(o?0:255)*(1-a);return i[3]=1,Ka(i,"rgba")},r.prototype.traverse=function(n,t){},r.prototype.attrKV=function(n,t){"textConfig"===n?this.setTextConfig(t):"textContent"===n?this.setTextContent(t):"clipPath"===n?this.setClipPath(t):"extra"===n?(this.extra=this.extra||{},Ge(this.extra,t)):this[n]=t},r.prototype.hide=function(){this.ignore=!0,this.markRedraw()},r.prototype.show=function(){this.ignore=!1,this.markRedraw()},r.prototype.attr=function(n,t){if("string"==typeof n)this.attrKV(n,t);else if(tt(n))for(var a=gn(n),o=0;o<a.length;o++){var l=a[o];this.attrKV(l,n[l])}return this.markRedraw(),this},r.prototype.saveCurrentToNormalState=function(n){this._innerSaveToNormal(n);for(var t=this._normalState,i=0;i<this.animators.length;i++){var a=this.animators[i],o=a.__fromStateTransition;if(!(a.getLoop()||o&&o!==xf)){var l=a.targetName;a.saveTo(l?t[l]:t)}}},r.prototype._innerSaveToNormal=function(n){var t=this._normalState;t||(t=this._normalState={}),n.textConfig&&!t.textConfig&&(t.textConfig=this.textConfig),this._savePrimaryToNormal(n,t,Tf)},r.prototype._savePrimaryToNormal=function(n,t,i){for(var a=0;a<i.length;a++){var o=i[a];null!=n[o]&&!(o in t)&&(t[o]=this[o])}},r.prototype.hasState=function(){return this.currentStates.length>0},r.prototype.getState=function(n){return this.states[n]},r.prototype.ensureState=function(n){var t=this.states;return t[n]||(t[n]={}),t[n]},r.prototype.clearStates=function(n){this.useState(xf,!1,n)},r.prototype.useState=function(n,t,i,a){var o=n===xf;if(this.hasState()||!o){var u=this.currentStates,c=this.stateTransition;if(!(Ye(u,n)>=0)||!t&&1!==u.length){var h;if(this.stateProxy&&!o&&(h=this.stateProxy(n)),h||(h=this.states&&this.states[n]),!h&&!o)return void Dn("State "+n+" not exists.");o||this.saveCurrentToNormalState(h);var f=!!(h&&h.hoverLayer||a);f&&this._toggleHoverLayerFlag(!0),this._applyStateObj(n,h,this._normalState,t,!i&&!this.__inHover&&c&&c.duration>0,c);var p=this._textContent,v=this._textGuide;return p&&p.useState(n,t,i,f),v&&v.useState(n,t,i,f),o?(this.currentStates=[],this._normalState={}):t?this.currentStates.push(n):this.currentStates=[n],this._updateAnimationTargets(),this.markRedraw(),!f&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2),h}}},r.prototype.useStates=function(n,t,i){if(n.length){var a=[],o=this.currentStates,l=n.length,u=l===o.length;if(u)for(var c=0;c<l;c++)if(n[c]!==o[c]){u=!1;break}if(u)return;for(c=0;c<l;c++){var h=n[c],f=void 0;this.stateProxy&&(f=this.stateProxy(h,n)),f||(f=this.states[h]),f&&a.push(f)}var p=a[l-1],v=!!(p&&p.hoverLayer||i);v&&this._toggleHoverLayerFlag(!0);var m=this._mergeStates(a),y=this.stateTransition;this.saveCurrentToNormalState(m),this._applyStateObj(n.join(","),m,this._normalState,!1,!t&&!this.__inHover&&y&&y.duration>0,y);var C=this._textContent,T=this._textGuide;C&&C.useStates(n,t,v),T&&T.useStates(n,t,v),this._updateAnimationTargets(),this.currentStates=n.slice(),this.markRedraw(),!v&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2)}else this.clearStates()},r.prototype._updateAnimationTargets=function(){for(var n=0;n<this.animators.length;n++){var t=this.animators[n];t.targetName&&t.changeTarget(this[t.targetName])}},r.prototype.removeState=function(n){var t=Ye(this.currentStates,n);if(t>=0){var i=this.currentStates.slice();i.splice(t,1),this.useStates(i)}},r.prototype.replaceState=function(n,t,i){var a=this.currentStates.slice(),o=Ye(a,n),l=Ye(a,t)>=0;o>=0?l?a.splice(o,1):a[o]=t:i&&!l&&a.push(t),this.useStates(a)},r.prototype.toggleState=function(n,t){t?this.useState(n,!0):this.removeState(n)},r.prototype._mergeStates=function(n){for(var i,t={},a=0;a<n.length;a++){var o=n[a];Ge(t,o),o.textConfig&&Ge(i=i||{},o.textConfig)}return i&&(t.textConfig=i),t},r.prototype._applyStateObj=function(n,t,i,a,o,l){var u=!(t&&a);t&&t.textConfig?(this.textConfig=Ge({},a?this.textConfig:i.textConfig),Ge(this.textConfig,t.textConfig)):u&&i.textConfig&&(this.textConfig=i.textConfig);for(var c={},h=!1,f=0;f<Tf.length;f++){var p=Tf[f],v=o&&e1[p];t&&null!=t[p]?v?(h=!0,c[p]=t[p]):this[p]=t[p]:u&&null!=i[p]&&(v?(h=!0,c[p]=i[p]):this[p]=i[p])}if(!o)for(f=0;f<this.animators.length;f++){var m=this.animators[f],y=m.targetName;m.getLoop()||m.__changeFinalValue(y?(t||i)[y]:t||i)}h&&this._transitionState(n,c,l)},r.prototype._attachComponent=function(n){if((!n.__zr||n.__hostTarget)&&n!==this){var t=this.__zr;t&&n.addSelfToZr(t),n.__zr=t,n.__hostTarget=this}},r.prototype._detachComponent=function(n){n.__zr&&n.removeSelfFromZr(n.__zr),n.__zr=null,n.__hostTarget=null},r.prototype.getClipPath=function(){return this._clipPath},r.prototype.setClipPath=function(n){this._clipPath&&this._clipPath!==n&&this.removeClipPath(),this._attachComponent(n),this._clipPath=n,this.markRedraw()},r.prototype.removeClipPath=function(){var n=this._clipPath;n&&(this._detachComponent(n),this._clipPath=null,this.markRedraw())},r.prototype.getTextContent=function(){return this._textContent},r.prototype.setTextContent=function(n){var t=this._textContent;t!==n&&(t&&t!==n&&this.removeTextContent(),n.innerTransformable=new ds,this._attachComponent(n),this._textContent=n,this.markRedraw())},r.prototype.setTextConfig=function(n){this.textConfig||(this.textConfig={}),Ge(this.textConfig,n),this.markRedraw()},r.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},r.prototype.removeTextContent=function(){var n=this._textContent;n&&(n.innerTransformable=null,this._detachComponent(n),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},r.prototype.getTextGuideLine=function(){return this._textGuide},r.prototype.setTextGuideLine=function(n){this._textGuide&&this._textGuide!==n&&this.removeTextGuideLine(),this._attachComponent(n),this._textGuide=n,this.markRedraw()},r.prototype.removeTextGuideLine=function(){var n=this._textGuide;n&&(this._detachComponent(n),this._textGuide=null,this.markRedraw())},r.prototype.markRedraw=function(){this.__dirty|=1;var n=this.__zr;n&&(this.__inHover?n.refreshHover():n.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},r.prototype.dirty=function(){this.markRedraw()},r.prototype._toggleHoverLayerFlag=function(n){this.__inHover=n;var t=this._textContent,i=this._textGuide;t&&(t.__inHover=n),i&&(i.__inHover=n)},r.prototype.addSelfToZr=function(n){if(this.__zr!==n){this.__zr=n;var t=this.animators;if(t)for(var i=0;i<t.length;i++)n.animation.addAnimator(t[i]);this._clipPath&&this._clipPath.addSelfToZr(n),this._textContent&&this._textContent.addSelfToZr(n),this._textGuide&&this._textGuide.addSelfToZr(n)}},r.prototype.removeSelfFromZr=function(n){if(this.__zr){this.__zr=null;var t=this.animators;if(t)for(var i=0;i<t.length;i++)n.animation.removeAnimator(t[i]);this._clipPath&&this._clipPath.removeSelfFromZr(n),this._textContent&&this._textContent.removeSelfFromZr(n),this._textGuide&&this._textGuide.removeSelfFromZr(n)}},r.prototype.animate=function(n,t,i){var o=new gu(n?this[n]:this,t,i);return n&&(o.targetName=n),this.addAnimator(o,n),o},r.prototype.addAnimator=function(n,t){var i=this.__zr,a=this;n.during(function(){a.updateDuringAnimation(t)}).done(function(){var o=a.animators,l=Ye(o,n);l>=0&&o.splice(l,1)}),this.animators.push(n),i&&i.animation.addAnimator(n),i&&i.wakeUp()},r.prototype.updateDuringAnimation=function(n){this.markRedraw()},r.prototype.stopAnimation=function(n,t){for(var i=this.animators,a=i.length,o=[],l=0;l<a;l++){var u=i[l];n&&n!==u.scope?o.push(u):u.stop(t)}return this.animators=o,this},r.prototype.animateTo=function(n,t,i){Sf(this,n,t,i)},r.prototype.animateFrom=function(n,t,i){Sf(this,n,t,i,!0)},r.prototype._transitionState=function(n,t,i,a){for(var o=Sf(this,t,i,a),l=0;l<o.length;l++)o[l].__fromStateTransition=n},r.prototype.getBoundingRect=function(){return null},r.prototype.getPaintRect=function(){return null},r.initDefaultProps=function(){var n=r.prototype;function a(o,l,u,c){function h(f,p){Object.defineProperty(p,0,{get:function(){return f[u]},set:function(v){f[u]=v}}),Object.defineProperty(p,1,{get:function(){return f[c]},set:function(v){f[c]=v}})}Object.defineProperty(n,o,{get:function(){return this[l]||h(this,this[l]=[]),this[l]},set:function(f){this[u]=f[0],this[c]=f[1],this[l]=f,h(this,f)}})}n.type="element",n.name="",n.ignore=n.silent=n.isGroup=n.draggable=n.dragging=n.ignoreClip=n.__inHover=!1,n.__dirty=1,Object.defineProperty&&(a("position","_legacyPos","x","y"),a("scale","_legacyScale","scaleX","scaleY"),a("origin","_legacyOrigin","originX","originY"))}(),r}();function Sf(r,n,t,i,a){var o=[];yv(r,"",r,n,t=t||{},i,o,a);var l=o.length,u=!1,c=t.done,h=t.aborted,f=function(){u=!0,--l<=0&&(u?c&&c():h&&h())},p=function(){--l<=0&&(u?c&&c():h&&h())};l||c&&c(),o.length>0&&t.during&&o[0].during(function(y,C){t.during(C)});for(var v=0;v<o.length;v++){var m=o[v];f&&m.done(f),p&&m.aborted(p),t.force&&m.duration(t.duration),m.start(t.easing)}return o}function zf(r,n,t){for(var i=0;i<t;i++)r[i]=n[i]}function r1(r,n,t){if(zn(n[t]))if(zn(r[t])||(r[t]=[]),ln(n[t])){var i=n[t].length;r[t].length!==i&&(r[t]=new n[t].constructor(i),zf(r[t],n[t],i))}else{var a=n[t],o=r[t],l=a.length;if(function n1(r){return zn(r[0])}(a))for(var u=a[0].length,c=0;c<l;c++)o[c]?zf(o[c],a[c],u):o[c]=Array.prototype.slice.call(a[c]);else zf(o,a,l);o.length=a.length}else r[t]=n[t]}function yv(r,n,t,i,a,o,l,u){for(var c=gn(i),h=a.duration,f=a.delay,p=a.additive,v=a.setToFinal,m=!tt(o),y=r.animators,C=[],T=0;T<c.length;T++){var E=i[z=c[T]];if(null!=E&&null!=t[z]&&(m||o[z]))if(!tt(E)||zn(E)||jn(E))C.push(z);else{if(n){u||(t[z]=E,r.updateDuringAnimation(n));continue}yv(r,z,t[z],E,a,o&&o[z],l,u)}else u||(t[z]=E,r.updateDuringAnimation(n),C.push(z))}var N=C.length;if(!p&&N)for(var X=0;X<y.length;X++)if((ve=y[X]).targetName===n&&ve.stopTracks(C)){var _e=Ye(y,ve);y.splice(_e,1)}if(a.force||(C=_n(C,function(ke){return!function a1(r,n){return r===n||zn(r)&&zn(n)&&function o1(r,n){var t=r.length;if(t!==n.length)return!1;for(var i=0;i<t;i++)if(r[i]!==n[i])return!1;return!0}(r,n)}(i[ke],t[ke])}),N=C.length),N>0||a.force&&!l.length){var ve,ze=void 0,Ee=void 0,Le=void 0;if(u)for(Ee={},v&&(ze={}),X=0;X<N;X++)Ee[z=C[X]]=t[z],v?ze[z]=i[z]:t[z]=i[z];else if(v)for(Le={},X=0;X<N;X++){var z;Le[z=C[X]]=Sl(t[z]),r1(t,i,z)}(ve=new gu(t,!1,!1,p?_n(y,function(Ue){return Ue.targetName===n}):null)).targetName=n,a.scope&&(ve.scope=a.scope),v&&ze&&ve.whenWithKeys(0,ze,C),Le&&ve.whenWithKeys(0,Le,C),ve.whenWithKeys(null==h?500:h,u?Ee:i,C).delay(f||0),r.addAnimator(ve,n),l.push(ve)}}Qt(bf,Oi),Qt(bf,ds);const Cv=bf;var xv=function(r){function n(t){var i=r.call(this)||this;return i.isGroup=!0,i._children=[],i.attr(t),i}return or(n,r),n.prototype.childrenRef=function(){return this._children},n.prototype.children=function(){return this._children.slice()},n.prototype.childAt=function(t){return this._children[t]},n.prototype.childOfName=function(t){for(var i=this._children,a=0;a<i.length;a++)if(i[a].name===t)return i[a]},n.prototype.childCount=function(){return this._children.length},n.prototype.add=function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},n.prototype.addBefore=function(t,i){if(t&&t!==this&&t.parent!==this&&i&&i.parent===this){var a=this._children,o=a.indexOf(i);o>=0&&(a.splice(o,0,t),this._doAdd(t))}return this},n.prototype.replace=function(t,i){var a=Ye(this._children,t);return a>=0&&this.replaceAt(i,a),this},n.prototype.replaceAt=function(t,i){var a=this._children,o=a[i];if(t&&t!==this&&t.parent!==this&&t!==o){a[i]=t,o.parent=null;var l=this.__zr;l&&o.removeSelfFromZr(l),this._doAdd(t)}return this},n.prototype._doAdd=function(t){t.parent&&t.parent.remove(t),t.parent=this;var i=this.__zr;i&&i!==t.__zr&&t.addSelfToZr(i),i&&i.refresh()},n.prototype.remove=function(t){var i=this.__zr,a=this._children,o=Ye(a,t);return o<0||(a.splice(o,1),t.parent=null,i&&t.removeSelfFromZr(i),i&&i.refresh()),this},n.prototype.removeAll=function(){for(var t=this._children,i=this.__zr,a=0;a<t.length;a++){var o=t[a];i&&o.removeSelfFromZr(i),o.parent=null}return t.length=0,this},n.prototype.eachChild=function(t,i){for(var a=this._children,o=0;o<a.length;o++)t.call(i,a[o],o);return this},n.prototype.traverse=function(t,i){for(var a=0;a<this._children.length;a++){var o=this._children[a],l=t.call(i,o);o.isGroup&&!l&&o.traverse(t,i)}return this},n.prototype.addSelfToZr=function(t){r.prototype.addSelfToZr.call(this,t);for(var i=0;i<this._children.length;i++)this._children[i].addSelfToZr(t)},n.prototype.removeSelfFromZr=function(t){r.prototype.removeSelfFromZr.call(this,t);for(var i=0;i<this._children.length;i++)this._children[i].removeSelfFromZr(t)},n.prototype.getBoundingRect=function(t){for(var i=new Mn(0,0,0,0),a=t||this._children,o=[],l=null,u=0;u<a.length;u++){var c=a[u];if(!c.ignore&&!c.invisible){var h=c.getBoundingRect(),f=c.getLocalTransform(o);f?(Mn.applyTransform(i,h,f),(l=l||i.clone()).union(i)):(l=l||h.clone()).union(h)}}return l||i},n}(Cv);xv.prototype.type="group";const hn=xv;var Hh={},Pl={},l1=function(){function r(n,t,i){var a=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,i=i||{},this.dom=t,this.id=n;var o=new Ls,l=i.renderer||"canvas";Hh[l]||(l=gn(Hh)[0]),i.useDirtyRect=null!=i.useDirtyRect&&i.useDirtyRect;var u=new Hh[l](t,o,i,n),c=i.ssr||u.ssrOnly;this.storage=o,this.painter=u;var h=gt.node||gt.worker||c?null:new qy(u.getViewportRoot(),u.root);this.handler=new $e(o,u,h,u.root),this.animation=new Uy({stage:{update:c?null:function(){return a._flush(!0)}}}),c||this.animation.start()}return r.prototype.add=function(n){!n||(this.storage.addRoot(n),n.addSelfToZr(this),this.refresh())},r.prototype.remove=function(n){!n||(this.storage.delRoot(n),n.removeSelfFromZr(this),this.refresh())},r.prototype.configLayer=function(n,t){this.painter.configLayer&&this.painter.configLayer(n,t),this.refresh()},r.prototype.setBackgroundColor=function(n){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(n),this.refresh(),this._backgroundColor=n,this._darkMode=function s1(r){if(!r)return!1;if("string"==typeof r)return fu(r,1)<.4;if(r.colorStops){for(var n=r.colorStops,t=0,i=n.length,a=0;a<i;a++)t+=fu(n[a].color,1);return(t/=i)<.4}return!1}(n)},r.prototype.getBackgroundColor=function(){return this._backgroundColor},r.prototype.setDarkMode=function(n){this._darkMode=n},r.prototype.isDarkMode=function(){return this._darkMode},r.prototype.refreshImmediately=function(n){n||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},r.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},r.prototype.flush=function(){this._flush(!1)},r.prototype._flush=function(n){var t,i=vu();this._needsRefresh&&(t=!0,this.refreshImmediately(n)),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately());var a=vu();t?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:a-i})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},r.prototype.setSleepAfterStill=function(n){this._sleepAfterStill=n},r.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},r.prototype.refreshHover=function(){this._needsRefreshHover=!0},r.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&"canvas"===this.painter.getType()&&this.painter.refreshHover()},r.prototype.resize=function(n){this.painter.resize((n=n||{}).width,n.height),this.handler.resize()},r.prototype.clearAnimation=function(){this.animation.clear()},r.prototype.getWidth=function(){return this.painter.getWidth()},r.prototype.getHeight=function(){return this.painter.getHeight()},r.prototype.setCursorStyle=function(n){this.handler.setCursorStyle(n)},r.prototype.findHover=function(n,t){return this.handler.findHover(n,t)},r.prototype.on=function(n,t,i){return this.handler.on(n,t,i),this},r.prototype.off=function(n,t){this.handler.off(n,t)},r.prototype.trigger=function(n,t){this.handler.trigger(n,t)},r.prototype.clear=function(){for(var n=this.storage.getRoots(),t=0;t<n.length;t++)n[t]instanceof hn&&n[t].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},r.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,function Tv(r){delete Pl[r]}(this.id)},r}();function wf(r,n){var t=new l1(Er(),r,n);return Pl[t.id]=t,t}function u1(r){r.dispose()}function c1(){for(var r in Pl)Pl.hasOwnProperty(r)&&Pl[r].dispose();Pl={}}function bv(r){return Pl[r]}function Sv(r,n){Hh[r]=n}var h1="5.3.0";function mr(r,n,t,i){var a=n[0],o=n[1],l=t[0],u=t[1],c=o-a,h=u-l;if(0===c)return 0===h?l:(l+u)/2;if(i)if(c>0){if(r<=a)return l;if(r>=o)return u}else{if(r>=a)return l;if(r<=o)return u}else{if(r===a)return l;if(r===o)return u}return(r-a)/c*h+l}function Ht(r,n){switch(r){case"center":case"middle":r="50%";break;case"left":case"top":r="0%";break;case"right":case"bottom":r="100%"}return Qe(r)?function d1(r){return r.replace(/^\s+|\s+$/g,"")}(r).match(/%$/)?parseFloat(r)/100*n:parseFloat(r):null==r?NaN:+r}function li(r,n,t){return null==n&&(n=10),n=Math.min(Math.max(0,n),20),r=(+r).toFixed(n),t?r:+r}function da(r){return r.sort(function(n,t){return n-t}),r}function To(r){if(r=+r,isNaN(r))return 0;if(r>1e-14)for(var n=1,t=0;t<15;t++,n*=10)if(Math.round(r*n)/n===r)return t;return wv(r)}function wv(r){var n=r.toString().toLowerCase(),t=n.indexOf("e"),i=t>0?+n.slice(t+1):0,a=t>0?t:n.length,o=n.indexOf(".");return Math.max(0,(o<0?0:a-1-o)-i)}function Wh(r,n){var t=Math.log,i=Math.LN10,a=Math.floor(t(r[1]-r[0])/i),o=Math.round(t(Math.abs(n[1]-n[0]))/i),l=Math.min(Math.max(-a+o,0),20);return isFinite(l)?l:20}function Dv(r,n,t){if(!r[n])return 0;var i=cr(r,function(y,C){return y+(isNaN(C)?0:C)},0);if(0===i)return 0;for(var a=Math.pow(10,t),o=_t(r,function(y){return(isNaN(y)?0:y)/i*a*100}),l=100*a,u=_t(o,function(y){return Math.floor(y)}),c=cr(u,function(y,C){return y+C},0),h=_t(o,function(y,C){return y-u[C]});c<l;){for(var f=Number.NEGATIVE_INFINITY,p=null,v=0,m=h.length;v<m;++v)h[v]>f&&(f=h[v],p=v);++u[p],h[p]=0,++c}return u[n]/a}function f1(r,n){var t=Math.max(To(r),To(n)),i=r+n;return t>20?i:li(i,t)}var Af=9007199254740991;function Ef(r){var n=2*Math.PI;return(r%n+n)%n}function yu(r){return r>-1e-4&&r<1e-4}var Da=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Aa(r){if(r instanceof Date)return r;if(Qe(r)){var n=Da.exec(r);if(!n)return new Date(NaN);if(n[8]){var t=+n[4]||0;return"Z"!==n[8].toUpperCase()&&(t-=+n[8].slice(0,3)),new Date(Date.UTC(+n[1],+(n[2]||1)-1,+n[3]||1,t,+(n[5]||0),+n[6]||0,n[7]?+n[7].substring(0,3):0))}return new Date(+n[1],+(n[2]||1)-1,+n[3]||1,+n[4]||0,+(n[5]||0),+n[6]||0,n[7]?+n[7].substring(0,3):0)}return null==r?new Date(NaN):new Date(Math.round(r))}function Av(r){return Math.pow(10,Gh(r))}function Gh(r){if(0===r)return 0;var n=Math.floor(Math.log(r)/Math.LN10);return r/Math.pow(10,n)>=10&&n++,n}function Mf(r,n){var t=Gh(r),i=Math.pow(10,t),a=r/i;return r=(n?a<1.5?1:a<2.5?2:a<4?3:a<7?5:10:a<1?1:a<2?2:a<3?3:a<5?5:10)*i,t>=-20?+r.toFixed(t<0?-t:0):r}function Jh(r,n){var t=(r.length-1)*n+1,i=Math.floor(t),a=+r[i-1],o=t-i;return o?a+o*(r[i]-a):a}function Yh(r){r.sort(function(c,h){return u(c,h,0)?-1:1});for(var n=-1/0,t=1,i=0;i<r.length;){for(var a=r[i].interval,o=r[i].close,l=0;l<2;l++)a[l]<=n&&(a[l]=n,o[l]=l?1:1-t),n=a[l],t=o[l];a[0]===a[1]&&o[0]*o[1]!=1?r.splice(i,1):i++}return r;function u(c,h,f){return c.interval[f]<h.interval[f]||c.interval[f]===h.interval[f]&&(c.close[f]-h.close[f]==(f?-1:1)||!f&&u(c,h,1))}}function Io(r){var n=parseFloat(r);return n==r&&(0!==n||!Qe(r)||r.indexOf("x")<=0)?n:NaN}function Of(r){return!isNaN(Io(r))}function Ev(){return Math.round(9*Math.random())}function Mv(r,n){return 0===n?r:Mv(n,r%n)}function Ov(r,n){return null==r?n:null==n?r:r*n/Mv(r,n)}function Pv(r,n,t){return(n-r)*t+r}var Iv="series\0";function Dr(r){return r instanceof Array?r:null==r?[]:[r]}function Il(r,n,t){if(r){r[n]=r[n]||{},r.emphasis=r.emphasis||{},r.emphasis[n]=r.emphasis[n]||{};for(var i=0,a=t.length;i<a;i++){var o=t[i];!r.emphasis[n].hasOwnProperty(o)&&r[n].hasOwnProperty(o)&&(r.emphasis[n][o]=r[n][o])}}}var Lv=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Bi(r){return!tt(r)||we(r)||r instanceof Date?r:r.value}function Rv(r){return tt(r)&&!(r instanceof Array)}function Nv(r,n,t){var i="normalMerge"===t,a="replaceMerge"===t,o="replaceAll"===t;r=r||[],n=(n||[]).slice();var l=Kt();De(n,function(c,h){tt(c)||(n[h]=null)});var u=function p1(r,n,t){var i=[];if("replaceAll"===t)return i;for(var a=0;a<r.length;a++){var o=r[a];o&&null!=o.id&&n.set(o.id,a),i.push({existing:"replaceMerge"===t||xc(o)?null:o,newOption:null,keyInfo:null,brandNew:null})}return i}(r,l,t);return(i||a)&&function g1(r,n,t,i){De(i,function(a,o){if(a&&null!=a.id){var l=Cc(a.id),u=t.get(l);if(null!=u){var c=r[u];ar(!c.newOption,'Duplicated option on id "'+l+'".'),c.newOption=a,c.existing=n[u],i[o]=null}}})}(u,r,l,n),i&&function v1(r,n){De(n,function(t,i){if(t&&null!=t.name)for(var a=0;a<r.length;a++){var o=r[a].existing;if(!r[a].newOption&&o&&(null==o.id||null==t.id)&&!xc(t)&&!xc(o)&&Fv("name",o,t))return r[a].newOption=t,void(n[i]=null)}})}(u,n),i||a?function m1(r,n,t){De(n,function(i){if(i){for(var a,o=0;(a=r[o])&&(a.newOption||xc(a.existing)||a.existing&&null!=i.id&&!Fv("id",i,a.existing));)o++;a?(a.newOption=i,a.brandNew=t):r.push({newOption:i,brandNew:t,existing:null,keyInfo:null}),o++}})}(u,n,a):o&&function _1(r,n){De(n,function(t){r.push({newOption:t,brandNew:!0,existing:null,keyInfo:null})})}(u,n),function y1(r){var n=Kt();De(r,function(t){var i=t.existing;i&&n.set(i.id,t)}),De(r,function(t){var i=t.newOption;ar(!i||null==i.id||!n.get(i.id)||n.get(i.id)===t,"id duplicates: "+(i&&i.id)),i&&null!=i.id&&n.set(i.id,t),!t.keyInfo&&(t.keyInfo={})}),De(r,function(t,i){var a=t.existing,o=t.newOption,l=t.keyInfo;if(tt(o)){if(l.name=null!=o.name?Cc(o.name):a?a.name:Iv+i,a)l.id=Cc(a.id);else if(null!=o.id)l.id=Cc(o.id);else{var u=0;do{l.id="\0"+l.name+"\0"+u++}while(n.get(l.id))}n.set(l.id,t)}})}(u),u}function Fv(r,n,t){var i=Si(n[r],null),a=Si(t[r],null);return null!=i&&null!=a&&i===a}function Cc(r){return Si(r,"")}function Si(r,n){return null==r?n:Qe(r)?r:Ve(r)||Ie(r)?r+"":n}function Pf(r){var n=r.name;return!(!n||!n.indexOf(Iv))}function xc(r){return r&&null!=r.id&&0===Cc(r.id).indexOf("\0_ec_\0")}function kl(r,n){return null!=n.dataIndexInside?n.dataIndexInside:null!=n.dataIndex?we(n.dataIndex)?_t(n.dataIndex,function(t){return r.indexOfRawIndex(t)}):r.indexOfRawIndex(n.dataIndex):null!=n.name?we(n.name)?_t(n.name,function(t){return r.indexOfName(t)}):r.indexOfName(n.name):void 0}function Xn(){var r="__ec_inner_"+S1++;return function(n){return n[r]||(n[r]={})}}var S1=Ev();function Tc(r,n,t){var i=If(n,t),o=i.queryOptionMap,u=i.others,c=t?t.defaultMainType:null;return!i.mainTypeSpecified&&c&&o.set(c,{}),o.each(function(h,f){var p=bc(r,f,h,{useDefault:c===f,enableAll:!t||null==t.enableAll||t.enableAll,enableNone:!t||null==t.enableNone||t.enableNone});u[f+"Models"]=p.models,u[f+"Model"]=p.models[0]}),u}function If(r,n){var t;if(Qe(r)){var i={};i[r+"Index"]=0,t=i}else t=r;var a=Kt(),o={},l=!1;return De(t,function(u,c){if("dataIndex"!==c&&"dataIndexInside"!==c){var h=c.match(/^(\w+)(Index|Id|Name)$/)||[],f=h[1],p=(h[2]||"").toLowerCase();!f||!p||n&&n.includeMainTypes&&Ye(n.includeMainTypes,f)<0||(l=l||!!f,(a.get(f)||a.set(f,{}))[p]=u)}else o[c]=u}),{mainTypeSpecified:l,queryOptionMap:a,others:o}}var _i={useDefault:!0,enableAll:!1,enableNone:!1},z1={useDefault:!1,enableAll:!0,enableNone:!0};function bc(r,n,t,i){i=i||_i;var a=t.index,o=t.id,l=t.name,u={models:null,specified:null!=a||null!=o||null!=l};if(!u.specified){var c=void 0;return u.models=i.useDefault&&(c=r.getComponent(n))?[c]:[],u}return"none"===a||!1===a?(ar(i.enableNone,'`"none"` or `false` is not a valid value on index option.'),u.models=[],u):("all"===a&&(ar(i.enableAll,'`"all"` is not a valid value on index option.'),a=o=l=null),u.models=r.queryComponents({mainType:n,index:a,id:o,name:l}),u)}function Bv(r,n,t){r.setAttribute?r.setAttribute(n,t):r[n]=t}function kf(r,n){var t=Kt(),i=[];return De(r,function(a){var o=n(a);(t.get(o)||(i.push(o),t.set(o,[]))).push(a)}),{keys:i,buckets:t}}function Zv(r,n,t,i,a){var o=null==n||"auto"===n;if(null==i)return i;if(Ve(i))return li(l=Pv(t||0,i,a),o?Math.max(To(t||0),To(i)):n);if(Qe(i))return a<1?t:i;for(var u=[],c=t,h=i,f=Math.max(c?c.length:0,h.length),p=0;p<f;++p){var v=r.getDimensionInfo(p);if(v&&"ordinal"===v.type)u[p]=(a<1&&c?c:h)[p];else{var m=c&&c[p]?c[p]:0,y=h[p],l=Pv(m,y,a);u[p]=li(l,o?Math.max(To(m),To(y)):n)}}return u}var Js="___EC__COMPONENT__CONTAINER___",Uv="___EC__EXTENDED_CLASS___";function ko(r){var n={main:"",sub:""};if(r){var t=r.split(".");n.main=t[0]||"",n.sub=t[1]||""}return n}function Lf(r,n){r.$constructor=r,r.extend=function(t){var a,i=this;return function O1(r){return Pe(r)&&/^class\s/.test(Function.prototype.toString.call(r))}(i)?a=function(o){function l(){return o.apply(this,arguments)||this}return R(l,o),l}(i):(a=function(){(t.$constructor||i).apply(this,arguments)},Ut(a,this)),Ge(a.prototype,t),a[Uv]=!0,a.extend=this.extend,a.superCall=k1,a.superApply=qr,a.superClass=i,a}}function Vv(r,n){r.extend=n.extend}var P1=Math.round(10*Math.random());function k1(r,n){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];return this.superClass.prototype[n].apply(r,t)}function qr(r,n,t){return this.superClass.prototype[n].apply(r,t)}function Qh(r){var n={};r.registerClass=function(i){var a=i.type||i.prototype.type;if(a){(function E1(r){ar(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(r),'componentType "'+r+'" illegal')})(a),i.prototype.type=a;var o=ko(a);if(o.sub){if(o.sub!==Js){var l=function t(i){var a=n[i.main];return(!a||!a[Js])&&((a=n[i.main]={})[Js]=!0),a}(o);l[o.sub]=i}}else n[o.main]=i}return i},r.getClass=function(i,a,o){var l=n[i];if(l&&l[Js]&&(l=a?l[a]:null),o&&!l)throw new Error(a?"Component "+i+"."+(a||"")+" is used but not imported.":i+".type should be specified.");return l},r.getClassesByMainType=function(i){var a=ko(i),o=[],l=n[a.main];return l&&l[Js]?De(l,function(u,c){c!==Js&&o.push(u)}):o.push(l),o},r.hasClass=function(i){var a=ko(i);return!!n[a.main]},r.getAllClassMainTypes=function(){var i=[];return De(n,function(a,o){i.push(o)}),i},r.hasSubTypes=function(i){var a=ko(i),o=n[a.main];return o&&o[Js]}}function Ll(r,n){for(var t=0;t<r.length;t++)r[t][1]||(r[t][1]=r[t][0]);return n=n||!1,function(i,a,o){for(var l={},u=0;u<r.length;u++){var c=r[u][1];if(!(a&&Ye(a,c)>=0||o&&Ye(o,c)<0)){var h=i.getShallow(c,n);null!=h&&(l[r[u][0]]=h)}}return l}}var R1=Ll([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),N1=function(){function r(){}return r.prototype.getAreaStyle=function(n,t){return R1(this,n,t)},r}(),Rf=new Ct(50);function F1(r){if("string"==typeof r){var n=Rf.get(r);return n&&n.image}return r}function Nf(r,n,t,i,a){if(r){if("string"==typeof r){if(n&&n.__zrImageSrc===r||!t)return n;var o=Rf.get(r),l={hostEl:t,cb:i,cbPayload:a};if(o)!qh(n=o.image)&&o.pending.push(l);else{var u=fn.loadImage(r,Hv,Hv);u.__zrImageSrc=r,Rf.put(r,u.__cachedImgObj={image:u,pending:[l]})}return n}return r}return n}function Hv(){var r=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var n=0;n<r.pending.length;n++){var t=r.pending[n],i=t.cb;i&&i(this,t.cbPayload),t.hostEl.dirty()}r.pending.length=0}function qh(r){return r&&r.width&&r.height}var Ff=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function Wv(r,n,t,i,a){if(!n)return"";var o=(r+"").split("\n");a=Gv(n,t,i,a);for(var l=0,u=o.length;l<u;l++)o[l]=Jv(o[l],a);return o.join("\n")}function Gv(r,n,t,i){var a=Ge({},i=i||{});a.font=n,t=$t(t,"..."),a.maxIterations=$t(i.maxIterations,2);var o=a.minChar=$t(i.minChar,0);a.cnCharWidth=wa("\u56fd",n);var l=a.ascCharWidth=wa("a",n);a.placeholder=$t(i.placeholder,"");for(var u=r=Math.max(0,r-1),c=0;c<o&&u>=l;c++)u-=l;var h=wa(t,n);return h>u&&(t="",h=0),u=r-h,a.ellipsis=t,a.ellipsisWidth=h,a.contentWidth=u,a.containerWidth=r,a}function Jv(r,n){var t=n.containerWidth,i=n.font,a=n.contentWidth;if(!t)return"";var o=wa(r,i);if(o<=t)return r;for(var l=0;;l++){if(o<=a||l>=n.maxIterations){r+=n.ellipsis;break}var u=0===l?B1(r,a,n.ascCharWidth,n.cnCharWidth):o>0?Math.floor(r.length*a/o):0;o=wa(r=r.substr(0,u),i)}return""===r&&(r=n.placeholder),r}function B1(r,n,t,i){for(var a=0,o=0,l=r.length;o<l&&a<n;o++){var u=r.charCodeAt(o);a+=0<=u&&u<=127?t:i}return o}var U1=function r(){},Ea=function r(n){this.tokens=[],n&&(this.tokens=n)},V1=function r(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]};function Bf(r,n,t,i,a){var f,p,o=""===n,l=a&&t.rich[a]||{},u=r.lines,c=l.font||t.font,h=!1;if(i){var v=l.padding,m=v?v[1]+v[3]:0;if(null!=l.width&&"auto"!==l.width){var y=xo(l.width,i.width)+m;u.length>0&&y+i.accumWidth>i.width&&(f=n.split("\n"),h=!0),i.accumWidth=y}else{var C=Yv(n,c,i.width,i.breakAll,i.accumWidth);i.accumWidth=C.accumWidth+m,p=C.linesWidths,f=C.lines}}else f=n.split("\n");for(var T=0;T<f.length;T++){var z=f[T],E=new U1;if(E.styleName=a,E.text=z,E.isLineHolder=!z&&!o,E.width="number"==typeof l.width?l.width:p?p[T]:wa(z,c),T||h)u.push(new Ea([E]));else{var N=(u[u.length-1]||(u[0]=new Ea)).tokens,X=N.length;1===X&&N[0].isLineHolder?N[0]=E:(z||!X||o)&&N.push(E)}}}var G1=cr(",&?/;] ".split(""),function(r,n){return r[n]=!0,r},{});function J1(r){return!function W1(r){var n=r.charCodeAt(0);return n>=33&&n<=383}(r)||!!G1[r]}function Yv(r,n,t,i,a){for(var o=[],l=[],u="",c="",h=0,f=0,p=0;p<r.length;p++){var v=r.charAt(p);if("\n"!==v){var m=wa(v,n),y=!i&&!J1(v);(o.length?f+m>t:a+f+m>t)?f?(u||c)&&(y?(u||(u=c,c="",f=h=0),o.push(u),l.push(f-h),c+=v,u="",f=h+=m):(c&&(u+=c,c="",h=0),o.push(u),l.push(f),u=v,f=m)):y?(o.push(c),l.push(h),c=v,h=m):(o.push(v),l.push(m)):(f+=m,y?(c+=v,h+=m):(c&&(u+=c,c="",h=0),u+=v))}else c&&(u+=c,f+=h),o.push(u),l.push(f),u="",c="",h=0,f=0}return!o.length&&!u&&(u=r,c="",h=0),c&&(u+=c),u&&(o.push(u),l.push(f)),1===o.length&&(f+=a),{accumWidth:f,lines:o,linesWidths:l}}var Zf="__zr_style_"+Math.round(10*Math.random()),Rl={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},Kh={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Rl[Zf]=!0;var Qv=["z","z2","invisible"],Y1=["invisible"],Q1=function(r){function n(t){return r.call(this,t)||this}return or(n,r),n.prototype._init=function(t){for(var i=gn(t),a=0;a<i.length;a++){var o=i[a];"style"===o?this.useStyle(t[o]):r.prototype.attrKV.call(this,o,t[o])}this.style||this.useStyle({})},n.prototype.beforeBrush=function(){},n.prototype.afterBrush=function(){},n.prototype.innerBeforeBrush=function(){},n.prototype.innerAfterBrush=function(){},n.prototype.shouldBePainted=function(t,i,a,o){var l=this.transform;if(this.ignore||this.invisible||0===this.style.opacity||this.culling&&function q1(r,n,t){return Uf.copy(r.getBoundingRect()),r.transform&&Uf.applyTransform(r.transform),Vf.width=n,Vf.height=t,!Uf.intersect(Vf)}(this,t,i)||l&&!l[0]&&!l[3])return!1;if(a&&this.__clipPaths)for(var u=0;u<this.__clipPaths.length;++u)if(this.__clipPaths[u].isZeroArea())return!1;if(o&&this.parent)for(var c=this.parent;c;){if(c.ignore)return!1;c=c.parent}return!0},n.prototype.contain=function(t,i){return this.rectContain(t,i)},n.prototype.traverse=function(t,i){t.call(i,this)},n.prototype.rectContain=function(t,i){var a=this.transformCoordToLocal(t,i);return this.getBoundingRect().contain(a[0],a[1])},n.prototype.getPaintRect=function(){var t=this._paintRect;if(!this._paintRect||this.__dirty){var i=this.transform,a=this.getBoundingRect(),o=this.style,l=o.shadowBlur||0,u=o.shadowOffsetX||0,c=o.shadowOffsetY||0;t=this._paintRect||(this._paintRect=new Mn(0,0,0,0)),i?Mn.applyTransform(t,a,i):t.copy(a),(l||u||c)&&(t.width+=2*l+Math.abs(u),t.height+=2*l+Math.abs(c),t.x=Math.min(t.x,t.x+u-l),t.y=Math.min(t.y,t.y+c-l));var h=this.dirtyRectTolerance;t.isZero()||(t.x=Math.floor(t.x-h),t.y=Math.floor(t.y-h),t.width=Math.ceil(t.width+1+2*h),t.height=Math.ceil(t.height+1+2*h))}return t},n.prototype.setPrevPaintRect=function(t){t?(this._prevPaintRect=this._prevPaintRect||new Mn(0,0,0,0),this._prevPaintRect.copy(t)):this._prevPaintRect=null},n.prototype.getPrevPaintRect=function(){return this._prevPaintRect},n.prototype.animateStyle=function(t){return this.animate("style",t)},n.prototype.updateDuringAnimation=function(t){"style"===t?this.dirtyStyle():this.markRedraw()},n.prototype.attrKV=function(t,i){"style"!==t?r.prototype.attrKV.call(this,t,i):this.style?this.setStyle(i):this.useStyle(i)},n.prototype.setStyle=function(t,i){return"string"==typeof t?this.style[t]=i:Ge(this.style,t),this.dirtyStyle(),this},n.prototype.dirtyStyle=function(t){t||this.markRedraw(),this.__dirty|=2,this._rect&&(this._rect=null)},n.prototype.dirty=function(){this.dirtyStyle()},n.prototype.styleChanged=function(){return!!(2&this.__dirty)},n.prototype.styleUpdated=function(){this.__dirty&=-3},n.prototype.createStyle=function(t){return Ua(Rl,t)},n.prototype.useStyle=function(t){t[Zf]||(t=this.createStyle(t)),this.__inHover?this.__hoverStyle=t:this.style=t,this.dirtyStyle()},n.prototype.isStyleObject=function(t){return t[Zf]},n.prototype._innerSaveToNormal=function(t){r.prototype._innerSaveToNormal.call(this,t);var i=this._normalState;t.style&&!i.style&&(i.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(t,i,Qv)},n.prototype._applyStateObj=function(t,i,a,o,l,u){r.prototype._applyStateObj.call(this,t,i,a,o,l,u);var h,c=!(i&&o);if(i&&i.style?l?o?h=i.style:(h=this._mergeStyle(this.createStyle(),a.style),this._mergeStyle(h,i.style)):(h=this._mergeStyle(this.createStyle(),o?this.style:a.style),this._mergeStyle(h,i.style)):c&&(h=a.style),h)if(l){var f=this.style;if(this.style=this.createStyle(c?{}:f),c)for(var p=gn(f),v=0;v<p.length;v++)(m=p[v])in h&&(h[m]=h[m],this.style[m]=f[m]);var y=gn(h);for(v=0;v<y.length;v++)this.style[m=y[v]]=this.style[m];this._transitionState(t,{style:h},u,this.getAnimationStyleProps())}else this.useStyle(h);var C=this.__inHover?Y1:Qv;for(v=0;v<C.length;v++){var m=C[v];i&&null!=i[m]?this[m]=i[m]:c&&null!=a[m]&&(this[m]=a[m])}},n.prototype._mergeStates=function(t){for(var a,i=r.prototype._mergeStates.call(this,t),o=0;o<t.length;o++){var l=t[o];l.style&&this._mergeStyle(a=a||{},l.style)}return a&&(i.style=a),i},n.prototype._mergeStyle=function(t,i){return Ge(t,i),t},n.prototype.getAnimationStyleProps=function(){return Kh},n.initDefaultProps=((t=n.prototype).type="displayable",t.invisible=!1,t.z=0,t.z2=0,t.zlevel=0,t.culling=!1,t.cursor="pointer",t.rectHover=!1,t.incremental=!1,t._rect=null,t.dirtyRectTolerance=0,void(t.__dirty=3)),n;var t}(Cv),Uf=new Mn(0,0,0,0),Vf=new Mn(0,0,0,0);const $a=Q1;var fa=Math.min,pa=Math.max,Hf=Math.sin,Wf=Math.cos,Nl=2*Math.PI,$h=xn(),jh=xn(),Xh=xn();function ed(r,n,t){if(0!==r.length){for(var i=r[0],a=i[0],o=i[0],l=i[1],u=i[1],c=1;c<r.length;c++)a=fa(a,(i=r[c])[0]),o=pa(o,i[0]),l=fa(l,i[1]),u=pa(u,i[1]);n[0]=a,n[1]=l,t[0]=o,t[1]=u}}function qv(r,n,t,i,a,o){a[0]=fa(r,t),a[1]=fa(n,i),o[0]=pa(r,t),o[1]=pa(n,i)}var Kv=[],$v=[];function K1(r,n,t,i,a,o,l,u,c,h){var f=wh,p=mi,v=f(r,t,a,l,Kv);c[0]=1/0,c[1]=1/0,h[0]=-1/0,h[1]=-1/0;for(var m=0;m<v;m++){var y=p(r,t,a,l,Kv[m]);c[0]=fa(y,c[0]),h[0]=pa(y,h[0])}for(v=f(n,i,o,u,$v),m=0;m<v;m++){var C=p(n,i,o,u,$v[m]);c[1]=fa(C,c[1]),h[1]=pa(C,h[1])}c[0]=fa(r,c[0]),h[0]=pa(r,h[0]),c[0]=fa(l,c[0]),h[0]=pa(l,h[0]),c[1]=fa(n,c[1]),h[1]=pa(n,h[1]),c[1]=fa(u,c[1]),h[1]=pa(u,h[1])}function $1(r,n,t,i,a,o,l,u){var c=Cl,h=pi,f=pa(fa(c(r,t,a),1),0),p=pa(fa(c(n,i,o),1),0),v=h(r,t,a,f),m=h(n,i,o,p);l[0]=fa(r,a,v),l[1]=fa(n,o,m),u[0]=pa(r,a,v),u[1]=pa(n,o,m)}function j1(r,n,t,i,a,o,l,u,c){var h=vi,f=ta,p=Math.abs(a-o);if(p%Nl<1e-4&&p>1e-4)return u[0]=r-t,u[1]=n-i,c[0]=r+t,void(c[1]=n+i);if($h[0]=Wf(a)*t+r,$h[1]=Hf(a)*i+n,jh[0]=Wf(o)*t+r,jh[1]=Hf(o)*i+n,h(u,$h,jh),f(c,$h,jh),(a%=Nl)<0&&(a+=Nl),(o%=Nl)<0&&(o+=Nl),a>o&&!l?o+=Nl:a<o&&l&&(a+=Nl),l){var v=o;o=a,a=v}for(var m=0;m<o;m+=Math.PI/2)m>a&&(Xh[0]=Wf(m)*t+r,Xh[1]=Hf(m)*i+n,h(u,Xh,u),f(c,Xh,c))}var Ur={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Fl=[],Bl=[],Lo=[],Ys=[],Ro=[],No=[],Gf=Math.min,Jf=Math.max,Zl=Math.cos,Ul=Math.sin,fs=Math.abs,Yf=Math.PI,Qs=2*Yf,Qf="undefined"!=typeof Float32Array,Sc=[];function qf(r){return Math.round(r/Yf*1e8)/1e8%2*Yf}function jv(r,n){var t=qf(r[0]);t<0&&(t+=Qs);var a=r[1];a+=t-r[0],!n&&a-t>=Qs?a=t+Qs:n&&t-a>=Qs?a=t-Qs:!n&&t>a?a=t+(Qs-qf(t-a)):n&&t<a&&(a=t-(Qs-qf(a-t))),r[0]=t,r[1]=a}var X1=function(){function r(n){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,n&&(this._saveData=!1),this._saveData&&(this.data=[])}return r.prototype.increaseVersion=function(){this._version++},r.prototype.getVersion=function(){return this._version},r.prototype.setScale=function(n,t,i){(i=i||0)>0&&(this._ux=fs(i/Lh/n)||0,this._uy=fs(i/Lh/t)||0)},r.prototype.setDPR=function(n){this.dpr=n},r.prototype.setContext=function(n){this._ctx=n},r.prototype.getContext=function(){return this._ctx},r.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},r.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},r.prototype.moveTo=function(n,t){return this._drawPendingPt(),this.addData(Ur.M,n,t),this._ctx&&this._ctx.moveTo(n,t),this._x0=n,this._y0=t,this._xi=n,this._yi=t,this},r.prototype.lineTo=function(n,t){var i=fs(n-this._xi),a=fs(t-this._yi),o=i>this._ux||a>this._uy;if(this.addData(Ur.L,n,t),this._ctx&&o&&this._ctx.lineTo(n,t),o)this._xi=n,this._yi=t,this._pendingPtDist=0;else{var l=i*i+a*a;l>this._pendingPtDist&&(this._pendingPtX=n,this._pendingPtY=t,this._pendingPtDist=l)}return this},r.prototype.bezierCurveTo=function(n,t,i,a,o,l){return this._drawPendingPt(),this.addData(Ur.C,n,t,i,a,o,l),this._ctx&&this._ctx.bezierCurveTo(n,t,i,a,o,l),this._xi=o,this._yi=l,this},r.prototype.quadraticCurveTo=function(n,t,i,a){return this._drawPendingPt(),this.addData(Ur.Q,n,t,i,a),this._ctx&&this._ctx.quadraticCurveTo(n,t,i,a),this._xi=i,this._yi=a,this},r.prototype.arc=function(n,t,i,a,o,l){return this._drawPendingPt(),Sc[0]=a,Sc[1]=o,jv(Sc,l),this.addData(Ur.A,n,t,i,i,a=Sc[0],(o=Sc[1])-a,0,l?0:1),this._ctx&&this._ctx.arc(n,t,i,a,o,l),this._xi=Zl(o)*i+n,this._yi=Ul(o)*i+t,this},r.prototype.arcTo=function(n,t,i,a,o){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(n,t,i,a,o),this},r.prototype.rect=function(n,t,i,a){return this._drawPendingPt(),this._ctx&&this._ctx.rect(n,t,i,a),this.addData(Ur.R,n,t,i,a),this},r.prototype.closePath=function(){this._drawPendingPt(),this.addData(Ur.Z);var n=this._ctx,t=this._x0,i=this._y0;return n&&n.closePath(),this._xi=t,this._yi=i,this},r.prototype.fill=function(n){n&&n.fill(),this.toStatic()},r.prototype.stroke=function(n){n&&n.stroke(),this.toStatic()},r.prototype.len=function(){return this._len},r.prototype.setData=function(n){var t=n.length;(!this.data||this.data.length!==t)&&Qf&&(this.data=new Float32Array(t));for(var i=0;i<t;i++)this.data[i]=n[i];this._len=t},r.prototype.appendPath=function(n){n instanceof Array||(n=[n]);for(var t=n.length,i=0,a=this._len,o=0;o<t;o++)i+=n[o].len();for(Qf&&this.data instanceof Float32Array&&(this.data=new Float32Array(a+i)),o=0;o<t;o++)for(var l=n[o].data,u=0;u<l.length;u++)this.data[a++]=l[u];this._len=a},r.prototype.addData=function(n,t,i,a,o,l,u,c,h){if(this._saveData){var f=this.data;this._len+arguments.length>f.length&&(this._expandData(),f=this.data);for(var p=0;p<arguments.length;p++)f[this._len++]=arguments[p]}},r.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},r.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var n=[],t=0;t<this._len;t++)n[t]=this.data[t];this.data=n}},r.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var n=this.data;n instanceof Array&&(n.length=this._len,Qf&&this._len>11&&(this.data=new Float32Array(n)))}},r.prototype.getBoundingRect=function(){Lo[0]=Lo[1]=Ro[0]=Ro[1]=Number.MAX_VALUE,Ys[0]=Ys[1]=No[0]=No[1]=-Number.MAX_VALUE;var l,n=this.data,t=0,i=0,a=0,o=0;for(l=0;l<this._len;){var u=n[l++],c=1===l;switch(c&&(a=t=n[l],o=i=n[l+1]),u){case Ur.M:t=a=n[l++],i=o=n[l++],Ro[0]=a,Ro[1]=o,No[0]=a,No[1]=o;break;case Ur.L:qv(t,i,n[l],n[l+1],Ro,No),t=n[l++],i=n[l++];break;case Ur.C:K1(t,i,n[l++],n[l++],n[l++],n[l++],n[l],n[l+1],Ro,No),t=n[l++],i=n[l++];break;case Ur.Q:$1(t,i,n[l++],n[l++],n[l],n[l+1],Ro,No),t=n[l++],i=n[l++];break;case Ur.A:var h=n[l++],f=n[l++],p=n[l++],v=n[l++],m=n[l++],y=n[l++]+m;l+=1;var C=!n[l++];c&&(a=Zl(m)*p+h,o=Ul(m)*v+f),j1(h,f,p,v,m,y,C,Ro,No),t=Zl(y)*p+h,i=Ul(y)*v+f;break;case Ur.R:qv(a=t=n[l++],o=i=n[l++],a+n[l++],o+n[l++],Ro,No);break;case Ur.Z:t=a,i=o}vi(Lo,Lo,Ro),ta(Ys,Ys,No)}return 0===l&&(Lo[0]=Lo[1]=Ys[0]=Ys[1]=0),new Mn(Lo[0],Lo[1],Ys[0]-Lo[0],Ys[1]-Lo[1])},r.prototype._calculateLength=function(){var n=this.data,t=this._len,i=this._ux,a=this._uy,o=0,l=0,u=0,c=0;this._pathSegLen||(this._pathSegLen=[]);for(var h=this._pathSegLen,f=0,p=0,v=0;v<t;){var m=n[v++],y=1===v;y&&(u=o=n[v],c=l=n[v+1]);var C=-1;switch(m){case Ur.M:o=u=n[v++],l=c=n[v++];break;case Ur.L:var T=n[v++],N=(z=n[v++])-l;(fs(E=T-o)>i||fs(N)>a||v===t-1)&&(C=Math.sqrt(E*E+N*N),o=T,l=z);break;case Ur.C:var X=n[v++],ve=n[v++],z=(T=n[v++],n[v++]),ce=n[v++],_e=n[v++];C=Sa(o,l,X,ve,T,z,ce,_e,10),o=ce,l=_e;break;case Ur.Q:C=Yr(o,l,X=n[v++],ve=n[v++],T=n[v++],z=n[v++],10),o=T,l=z;break;case Ur.A:var ze=n[v++],Ee=n[v++],Le=n[v++],ke=n[v++],Ue=n[v++],He=n[v++],Ke=He+Ue;v+=1,v++,y&&(u=Zl(Ue)*Le+ze,c=Ul(Ue)*ke+Ee),C=Jf(Le,ke)*Gf(Qs,Math.abs(He)),o=Zl(Ke)*Le+ze,l=Ul(Ke)*ke+Ee;break;case Ur.R:u=o=n[v++],c=l=n[v++],C=2*n[v++]+2*n[v++];break;case Ur.Z:var E=u-o;N=c-l,C=Math.sqrt(E*E+N*N),o=u,l=c}C>=0&&(h[p++]=C,f+=C)}return this._pathLen=f,f},r.prototype.rebuildPath=function(n,t){var u,c,h,f,p,v,y,E,X,ve,i=this.data,a=this._ux,o=this._uy,l=this._len,m=t<1,T=0,z=0,N=0;if(!m||(this._pathSegLen||this._calculateLength(),y=this._pathSegLen,E=t*this._pathLen))e:for(var ce=0;ce<l;){var _e=i[ce++],ze=1===ce;switch(ze&&(u=h=i[ce],c=f=i[ce+1]),_e!==Ur.L&&N>0&&(n.lineTo(X,ve),N=0),_e){case Ur.M:u=h=i[ce++],c=f=i[ce++],n.moveTo(h,f);break;case Ur.L:p=i[ce++],v=i[ce++];var Ee=fs(p-h),Le=fs(v-f);if(Ee>a||Le>o){if(m){if(T+(ke=y[z++])>E){n.lineTo(h*(1-(Ue=(E-T)/ke))+p*Ue,f*(1-Ue)+v*Ue);break e}T+=ke}n.lineTo(p,v),h=p,f=v,N=0}else{var He=Ee*Ee+Le*Le;He>N&&(X=p,ve=v,N=He)}break;case Ur.C:var Ke=i[ce++],nt=i[ce++],lt=i[ce++],St=i[ce++],mt=i[ce++],wt=i[ce++];if(m){if(T+(ke=y[z++])>E){vo(h,Ke,lt,mt,Ue=(E-T)/ke,Fl),vo(f,nt,St,wt,Ue,Bl),n.bezierCurveTo(Fl[1],Bl[1],Fl[2],Bl[2],Fl[3],Bl[3]);break e}T+=ke}n.bezierCurveTo(Ke,nt,lt,St,mt,wt),h=mt,f=wt;break;case Ur.Q:if(Ke=i[ce++],nt=i[ce++],lt=i[ce++],St=i[ce++],m){if(T+(ke=y[z++])>E){us(h,Ke,lt,Ue=(E-T)/ke,Fl),us(f,nt,St,Ue,Bl),n.quadraticCurveTo(Fl[1],Bl[1],Fl[2],Bl[2]);break e}T+=ke}n.quadraticCurveTo(Ke,nt,lt,St),h=lt,f=St;break;case Ur.A:var kt=i[ce++],Yt=i[ce++],Xt=i[ce++],pn=i[ce++],Bn=i[ce++],Ar=i[ce++],br=i[ce++],Un=!i[ce++],vn=Xt>pn?Xt:pn,Hn=fs(Xt-pn)>.001,kn=Bn+Ar,rn=!1;if(m&&(T+(ke=y[z++])>E&&(kn=Bn+Ar*(E-T)/ke,rn=!0),T+=ke),Hn&&n.ellipse?n.ellipse(kt,Yt,Xt,pn,br,Bn,kn,Un):n.arc(kt,Yt,vn,Bn,kn,Un),rn)break e;ze&&(u=Zl(Bn)*Xt+kt,c=Ul(Bn)*pn+Yt),h=Zl(kn)*Xt+kt,f=Ul(kn)*pn+Yt;break;case Ur.R:u=h=i[ce],c=f=i[ce+1],p=i[ce++],v=i[ce++];var On=i[ce++],ci=i[ce++];if(m){if(T+(ke=y[z++])>E){var rr=E-T;n.moveTo(p,v),n.lineTo(p+Gf(rr,On),v),(rr-=On)>0&&n.lineTo(p+On,v+Gf(rr,ci)),(rr-=ci)>0&&n.lineTo(p+Jf(On-rr,0),v+ci),(rr-=On)>0&&n.lineTo(p,v+Jf(ci-rr,0));break e}T+=ke}n.rect(p,v,On,ci);break;case Ur.Z:if(m){var ke;if(T+(ke=y[z++])>E){var Ue;n.lineTo(h*(1-(Ue=(E-T)/ke))+u*Ue,f*(1-Ue)+c*Ue);break e}T+=ke}n.closePath(),h=u,f=c}}},r.prototype.clone=function(){var n=new r,t=this.data;return n.data=t.slice?t.slice():Array.prototype.slice.call(t),n._len=this._len,n},r.CMD=Ur,r.initDefaultProps=function(){var n=r.prototype;n._saveData=!0,n._ux=0,n._uy=0,n._pendingPtDist=0,n._version=0}(),r}();const Fo=X1;function qs(r,n,t,i,a,o,l){if(0===a)return!1;var c,u=a;if(l>n+u&&l>i+u||l<n-u&&l<i-u||o>r+u&&o>t+u||o<r-u&&o<t-u)return!1;if(r===t)return Math.abs(o-r)<=u/2;var f=(c=(n-i)/(r-t))*o-l+(r*i-t*n)/(r-t);return f*f/(c*c+1)<=u/2*u/2}function eC(r,n,t,i,a,o,l,u,c,h,f){if(0===c)return!1;var p=c;return!(f>n+p&&f>i+p&&f>o+p&&f>u+p||f<n-p&&f<i-p&&f<o-p&&f<u-p||h>r+p&&h>t+p&&h>a+p&&h>l+p||h<r-p&&h<t-p&&h<a-p&&h<l-p)&&yl(r,n,t,i,a,o,l,u,h,f,null)<=p/2}function Xv(r,n,t,i,a,o,l,u,c){if(0===l)return!1;var h=l;return!(c>n+h&&c>i+h&&c>o+h||c<n-h&&c<i-h&&c<o-h||u>r+h&&u>t+h&&u>a+h||u<r-h&&u<t-h&&u<a-h)&&Zs(r,n,t,i,a,o,u,c,null)<=h/2}var em=2*Math.PI;function Ks(r){return(r%=em)<0&&(r+=em),r}var zc=2*Math.PI;function tC(r,n,t,i,a,o,l,u,c){if(0===l)return!1;var h=l;u-=r,c-=n;var f=Math.sqrt(u*u+c*c);if(f-h>t||f+h<t)return!1;if(Math.abs(i-a)%zc<1e-4)return!0;if(o){var p=i;i=Ks(a),a=Ks(p)}else i=Ks(i),a=Ks(a);i>a&&(a+=zc);var v=Math.atan2(c,u);return v<0&&(v+=zc),v>=i&&v<=a||v+zc>=i&&v+zc<=a}function ps(r,n,t,i,a,o){if(o>n&&o>i||o<n&&o<i||i===n)return 0;var l=(o-n)/(i-n),u=i<n?1:-1;(1===l||0===l)&&(u=i<n?.5:-.5);var c=l*(t-r)+r;return c===a?1/0:c>a?u:0}var $s=Fo.CMD,Vl=2*Math.PI,aa=[-1,-1,-1],ja=[-1,-1];function iC(){var r=ja[0];ja[0]=ja[1],ja[1]=r}function aC(r,n,t,i,a,o,l,u,c,h){if(h>n&&h>i&&h>o&&h>u||h<n&&h<i&&h<o&&h<u)return 0;var f=du(n,i,o,u,h,aa);if(0===f)return 0;for(var p=0,v=-1,m=void 0,y=void 0,C=0;C<f;C++){var T=aa[C],z=0===T||1===T?.5:1;mi(r,t,a,l,T)<c||(v<0&&(v=wh(n,i,o,u,ja),ja[1]<ja[0]&&v>1&&iC(),m=mi(n,i,o,u,ja[0]),v>1&&(y=mi(n,i,o,u,ja[1]))),p+=2===v?T<ja[0]?m<n?z:-z:T<ja[1]?y<m?z:-z:u<y?z:-z:T<ja[0]?m<n?z:-z:u<m?z:-z)}return p}function oC(r,n,t,i,a,o,l,u){if(u>n&&u>i&&u>o||u<n&&u<i&&u<o)return 0;var c=function ef(r,n,t,i,a){var o=r-2*n+t,l=2*(n-r),u=r-i,c=0;if(Ao(o))Sh(l)&&(h=-u/l)>=0&&h<=1&&(a[c++]=h);else{var f=l*l-4*o*u;if(Ao(f))(h=-l/(2*o))>=0&&h<=1&&(a[c++]=h);else if(f>0){var h,p=ii(f),v=(-l-p)/(2*o);(h=(-l+p)/(2*o))>=0&&h<=1&&(a[c++]=h),v>=0&&v<=1&&(a[c++]=v)}}return c}(n,i,o,u,aa);if(0===c)return 0;var h=Cl(n,i,o);if(h>=0&&h<=1){for(var f=0,p=pi(n,i,o,h),v=0;v<c;v++){var m=0===aa[v]||1===aa[v]?.5:1;pi(r,t,a,aa[v])<l||(f+=aa[v]<h?p<n?m:-m:o<p?m:-m)}return f}return m=0===aa[0]||1===aa[0]?.5:1,pi(r,t,a,aa[0])<l?0:o<n?m:-m}function sC(r,n,t,i,a,o,l,u){if((u-=n)>t||u<-t)return 0;var c=Math.sqrt(t*t-u*u);aa[0]=-c,aa[1]=c;var h=Math.abs(i-a);if(h<1e-4)return 0;if(h>=Vl-1e-4){i=0,a=Vl;var f=o?1:-1;return l>=aa[0]+r&&l<=aa[1]+r?f:0}if(i>a){var p=i;i=a,a=p}i<0&&(i+=Vl,a+=Vl);for(var v=0,m=0;m<2;m++){var y=aa[m];if(y+r>l){var C=Math.atan2(u,y);f=o?1:-1,C<0&&(C=Vl+C),(C>=i&&C<=a||C+Vl>=i&&C+Vl<=a)&&(C>Math.PI/2&&C<1.5*Math.PI&&(f=-f),v+=f)}}return v}function tm(r,n,t,i,a){for(var v,m,o=r.data,l=r.len(),u=0,c=0,h=0,f=0,p=0,y=0;y<l;){var C=o[y++],T=1===y;switch(C===$s.M&&y>1&&(t||(u+=ps(c,h,f,p,i,a))),T&&(f=c=o[y],p=h=o[y+1]),C){case $s.M:c=f=o[y++],h=p=o[y++];break;case $s.L:if(t){if(qs(c,h,o[y],o[y+1],n,i,a))return!0}else u+=ps(c,h,o[y],o[y+1],i,a)||0;c=o[y++],h=o[y++];break;case $s.C:if(t){if(eC(c,h,o[y++],o[y++],o[y++],o[y++],o[y],o[y+1],n,i,a))return!0}else u+=aC(c,h,o[y++],o[y++],o[y++],o[y++],o[y],o[y+1],i,a)||0;c=o[y++],h=o[y++];break;case $s.Q:if(t){if(Xv(c,h,o[y++],o[y++],o[y],o[y+1],n,i,a))return!0}else u+=oC(c,h,o[y++],o[y++],o[y],o[y+1],i,a)||0;c=o[y++],h=o[y++];break;case $s.A:var z=o[y++],E=o[y++],N=o[y++],X=o[y++],ve=o[y++],ce=o[y++];y+=1;var _e=!!(1-o[y++]);v=Math.cos(ve)*N+z,m=Math.sin(ve)*X+E,T?(f=v,p=m):u+=ps(c,h,v,m,i,a);var ze=(i-z)*X/N+z;if(t){if(tC(z,E,X,ve,ve+ce,_e,n,ze,a))return!0}else u+=sC(z,E,X,ve,ve+ce,_e,ze,a);c=Math.cos(ve+ce)*N+z,h=Math.sin(ve+ce)*X+E;break;case $s.R:if(f=c=o[y++],p=h=o[y++],v=f+o[y++],m=p+o[y++],t){if(qs(f,p,v,p,n,i,a)||qs(v,p,v,m,n,i,a)||qs(v,m,f,m,n,i,a)||qs(f,m,f,p,n,i,a))return!0}else u+=ps(v,p,v,m,i,a),u+=ps(f,m,f,p,i,a);break;case $s.Z:if(t){if(qs(c,h,f,p,n,i,a))return!0}else u+=ps(c,h,f,p,i,a);c=f,h=p}}return!t&&!function rC(r,n){return Math.abs(r-n)<1e-4}(h,p)&&(u+=ps(c,h,f,p,i,a)||0),0!==u}var wc=Dt({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Rl),uC={style:Dt({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},Kh.style)},Kf=Oo.concat(["invisible","culling","z","z2","zlevel","parent"]),cC=function(r){function n(t){return r.call(this,t)||this}return or(n,r),n.prototype.update=function(){var t=this;r.prototype.update.call(this);var i=this.style;if(i.decal){var a=this._decalEl=this._decalEl||new n;a.buildPath===n.prototype.buildPath&&(a.buildPath=function(c){t.buildPath(c,t.shape)}),a.silent=!0;var o=a.style;for(var l in i)o[l]!==i[l]&&(o[l]=i[l]);o.fill=i.fill?i.decal:null,o.decal=null,o.shadowColor=null,i.strokeFirst&&(o.stroke=null);for(var u=0;u<Kf.length;++u)a[Kf[u]]=this[Kf[u]];a.__dirty|=1}else this._decalEl&&(this._decalEl=null)},n.prototype.getDecalElement=function(){return this._decalEl},n.prototype._init=function(t){var i=gn(t);this.shape=this.getDefaultShape();var a=this.getDefaultStyle();a&&this.useStyle(a);for(var o=0;o<i.length;o++){var l=i[o],u=t[l];"style"===l?this.style?Ge(this.style,u):this.useStyle(u):"shape"===l?Ge(this.shape,u):r.prototype.attrKV.call(this,l,u)}this.style||this.useStyle({})},n.prototype.getDefaultStyle=function(){return null},n.prototype.getDefaultShape=function(){return{}},n.prototype.canBeInsideText=function(){return this.hasFill()},n.prototype.getInsideTextFill=function(){var t=this.style.fill;if("none"!==t){if(Qe(t)){var i=fu(t,0);return i>.5?Rh:i>.2?"#eee":vf}if(t)return vf}return Rh},n.prototype.getInsideTextStroke=function(t){var i=this.style.fill;if(Qe(i)){var a=this.__zr;if(!(!a||!a.isDarkMode())==fu(t,0)<.4)return i}},n.prototype.buildPath=function(t,i,a){},n.prototype.pathUpdated=function(){this.__dirty&=-5},n.prototype.getUpdatedPathProxy=function(t){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,t),this.path},n.prototype.createPathProxy=function(){this.path=new Fo(!1)},n.prototype.hasStroke=function(){var t=this.style,i=t.stroke;return!(null==i||"none"===i||!(t.lineWidth>0))},n.prototype.hasFill=function(){var i=this.style.fill;return null!=i&&"none"!==i},n.prototype.getBoundingRect=function(){var t=this._rect,i=this.style,a=!t;if(a){var o=!1;this.path||(o=!0,this.createPathProxy());var l=this.path;(o||4&this.__dirty)&&(l.beginPath(),this.buildPath(l,this.shape,!1),this.pathUpdated()),t=l.getBoundingRect()}if(this._rect=t,this.hasStroke()&&this.path&&this.path.len()>0){var u=this._rectStroke||(this._rectStroke=t.clone());if(this.__dirty||a){u.copy(t);var c=i.strokeNoScale?this.getLineScale():1,h=i.lineWidth;if(!this.hasFill()){var f=this.strokeContainThreshold;h=Math.max(h,null==f?4:f)}c>1e-10&&(u.width+=h/c,u.height+=h/c,u.x-=h/c/2,u.y-=h/c/2)}return u}return t},n.prototype.contain=function(t,i){var a=this.transformCoordToLocal(t,i),o=this.getBoundingRect(),l=this.style;if(o.contain(t=a[0],i=a[1])){var u=this.path;if(this.hasStroke()){var c=l.lineWidth,h=l.strokeNoScale?this.getLineScale():1;if(h>1e-10&&(this.hasFill()||(c=Math.max(c,this.strokeContainThreshold)),function nm(r,n,t,i){return tm(r,n,!0,t,i)}(u,c/h,t,i)))return!0}if(this.hasFill())return function lC(r,n,t){return tm(r,0,!1,n,t)}(u,t,i)}return!1},n.prototype.dirtyShape=function(){this.__dirty|=4,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},n.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},n.prototype.animateShape=function(t){return this.animate("shape",t)},n.prototype.updateDuringAnimation=function(t){"style"===t?this.dirtyStyle():"shape"===t?this.dirtyShape():this.markRedraw()},n.prototype.attrKV=function(t,i){"shape"===t?this.setShape(i):r.prototype.attrKV.call(this,t,i)},n.prototype.setShape=function(t,i){var a=this.shape;return a||(a=this.shape={}),"string"==typeof t?a[t]=i:Ge(a,t),this.dirtyShape(),this},n.prototype.shapeChanged=function(){return!!(4&this.__dirty)},n.prototype.createStyle=function(t){return Ua(wc,t)},n.prototype._innerSaveToNormal=function(t){r.prototype._innerSaveToNormal.call(this,t);var i=this._normalState;t.shape&&!i.shape&&(i.shape=Ge({},this.shape))},n.prototype._applyStateObj=function(t,i,a,o,l,u){r.prototype._applyStateObj.call(this,t,i,a,o,l,u);var h,c=!(i&&o);if(i&&i.shape?l?o?h=i.shape:(h=Ge({},a.shape),Ge(h,i.shape)):(h=Ge({},o?this.shape:a.shape),Ge(h,i.shape)):c&&(h=a.shape),h)if(l){this.shape=Ge({},this.shape);for(var f={},p=gn(h),v=0;v<p.length;v++){var m=p[v];"object"==typeof h[m]?this.shape[m]=h[m]:f[m]=h[m]}this._transitionState(t,{shape:f},u)}else this.shape=h,this.dirtyShape()},n.prototype._mergeStates=function(t){for(var a,i=r.prototype._mergeStates.call(this,t),o=0;o<t.length;o++){var l=t[o];l.shape&&this._mergeStyle(a=a||{},l.shape)}return a&&(i.shape=a),i},n.prototype.getAnimationStyleProps=function(){return uC},n.prototype.isZeroArea=function(){return!1},n.extend=function(t){var i=function(o){function l(u){var c=o.call(this,u)||this;return t.init&&t.init.call(c,u),c}return or(l,o),l.prototype.getDefaultStyle=function(){return Nt(t.style)},l.prototype.getDefaultShape=function(){return Nt(t.shape)},l}(n);for(var a in t)"function"==typeof t[a]&&(i.prototype[a]=t[a]);return i},n.initDefaultProps=((t=n.prototype).type="path",t.strokeContainThreshold=5,t.segmentIgnoreThreshold=0,t.subPixelOptimize=!1,t.autoBatch=!1,void(t.__dirty=7)),n;var t}($a);const Fn=cC;var hC=Dt({strokeFirst:!0,font:Pt,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},wc),rm=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return or(n,r),n.prototype.hasStroke=function(){var t=this.style,i=t.stroke;return null!=i&&"none"!==i&&t.lineWidth>0},n.prototype.hasFill=function(){var i=this.style.fill;return null!=i&&"none"!==i},n.prototype.createStyle=function(t){return Ua(hC,t)},n.prototype.setBoundingRect=function(t){this._rect=t},n.prototype.getBoundingRect=function(){var t=this.style;if(!this._rect){var i=t.text;null!=i?i+="":i="";var a=_c(i,t.font,t.textAlign,t.textBaseline);if(a.x+=t.x||0,a.y+=t.y||0,this.hasStroke()){var o=t.lineWidth;a.x-=o/2,a.y-=o/2,a.width+=o,a.height+=o}this._rect=a}return this._rect},n.initDefaultProps=void(n.prototype.dirtyRectTolerance=10),n}($a);rm.prototype.type="tspan";const Dc=rm;var dC=Dt({x:0,y:0},Rl),fC={style:Dt({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},Kh.style)},im=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return or(n,r),n.prototype.createStyle=function(t){return Ua(dC,t)},n.prototype._getSize=function(t){var i=this.style,a=i[t];if(null!=a)return a;var o=function pC(r){return!!(r&&"string"!=typeof r&&r.width&&r.height)}(i.image)?i.image:this.__image;if(!o)return 0;var l="width"===t?"height":"width",u=i[l];return null==u?o[t]:o[t]/o[l]*u},n.prototype.getWidth=function(){return this._getSize("width")},n.prototype.getHeight=function(){return this._getSize("height")},n.prototype.getAnimationStyleProps=function(){return fC},n.prototype.getBoundingRect=function(){var t=this.style;return this._rect||(this._rect=new Mn(t.x||0,t.y||0,this.getWidth(),this.getHeight())),this._rect},n}($a);im.prototype.type="image";const ki=im;var Cu=Math.round;function am(r,n,t){if(n){var i=n.x1,a=n.x2,o=n.y1,l=n.y2;r.x1=i,r.x2=a,r.y1=o,r.y2=l;var u=t&&t.lineWidth;return u&&(Cu(2*i)===Cu(2*a)&&(r.x1=r.x2=Hl(i,u,!0)),Cu(2*o)===Cu(2*l)&&(r.y1=r.y2=Hl(o,u,!0))),r}}function om(r,n,t){if(n){var i=n.x,a=n.y,o=n.width,l=n.height;r.x=i,r.y=a,r.width=o,r.height=l;var u=t&&t.lineWidth;return u&&(r.x=Hl(i,u,!0),r.y=Hl(a,u,!0),r.width=Math.max(Hl(i+o,u,!1)-r.x,0===o?0:1),r.height=Math.max(Hl(a+l,u,!1)-r.y,0===l?0:1)),r}}function Hl(r,n,t){if(!n)return r;var i=Cu(2*r);return(i+Cu(n))%2==0?i/2:(i+(t?1:-1))/2}var vC=function r(){this.x=0,this.y=0,this.width=0,this.height=0},mC={},sm=function(r){function n(t){return r.call(this,t)||this}return or(n,r),n.prototype.getDefaultShape=function(){return new vC},n.prototype.buildPath=function(t,i){var a,o,l,u;if(this.subPixelOptimize){var c=om(mC,i,this.style);a=c.x,o=c.y,l=c.width,u=c.height,c.r=i.r,i=c}else a=i.x,o=i.y,l=i.width,u=i.height;i.r?function gC(r,n){var u,c,h,f,p,t=n.x,i=n.y,a=n.width,o=n.height,l=n.r;a<0&&(t+=a,a=-a),o<0&&(i+=o,o=-o),"number"==typeof l?u=c=h=f=l:l instanceof Array?1===l.length?u=c=h=f=l[0]:2===l.length?(u=h=l[0],c=f=l[1]):3===l.length?(u=l[0],c=f=l[1],h=l[2]):(u=l[0],c=l[1],h=l[2],f=l[3]):u=c=h=f=0,u+c>a&&(u*=a/(p=u+c),c*=a/p),h+f>a&&(h*=a/(p=h+f),f*=a/p),c+h>o&&(c*=o/(p=c+h),h*=o/p),u+f>o&&(u*=o/(p=u+f),f*=o/p),r.moveTo(t+u,i),r.lineTo(t+a-c,i),0!==c&&r.arc(t+a-c,i+c,c,-Math.PI/2,0),r.lineTo(t+a,i+o-h),0!==h&&r.arc(t+a-h,i+o-h,h,0,Math.PI/2),r.lineTo(t+f,i+o),0!==f&&r.arc(t+f,i+o-f,f,Math.PI/2,Math.PI),r.lineTo(t,i+u),0!==u&&r.arc(t+u,i+u,u,Math.PI,1.5*Math.PI)}(t,i):t.rect(a,o,l,u)},n.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},n}(Fn);sm.prototype.type="rect";const Qn=sm;var lm={fill:"#000"},_C={style:Dt({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},Kh.style)},cm=function(r){function n(t){var i=r.call(this)||this;return i.type="text",i._children=[],i._defaultStyle=lm,i.attr(t),i}return or(n,r),n.prototype.childrenRef=function(){return this._children},n.prototype.update=function(){r.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var t=0;t<this._children.length;t++){var i=this._children[t];i.zlevel=this.zlevel,i.z=this.z,i.z2=this.z2,i.culling=this.culling,i.cursor=this.cursor,i.invisible=this.invisible}},n.prototype.updateTransform=function(){var t=this.innerTransformable;t?(t.updateTransform(),t.transform&&(this.transform=t.transform)):r.prototype.updateTransform.call(this)},n.prototype.getLocalTransform=function(t){var i=this.innerTransformable;return i?i.getLocalTransform(t):r.prototype.getLocalTransform.call(this,t)},n.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),r.prototype.getComputedTransform.call(this)},n.prototype._updateSubTexts=function(){this._childCursor=0,function xC(r){$f(r),De(r.rich,$f)}(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},n.prototype.addSelfToZr=function(t){r.prototype.addSelfToZr.call(this,t);for(var i=0;i<this._children.length;i++)this._children[i].__zr=t},n.prototype.removeSelfFromZr=function(t){r.prototype.removeSelfFromZr.call(this,t);for(var i=0;i<this._children.length;i++)this._children[i].__zr=null},n.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var t=new Mn(0,0,0,0),i=this._children,a=[],o=null,l=0;l<i.length;l++){var u=i[l],c=u.getBoundingRect(),h=u.getLocalTransform(a);h?(t.copy(c),t.applyTransform(h),(o=o||t.clone()).union(t)):(o=o||c.clone()).union(c)}this._rect=o||t}return this._rect},n.prototype.setDefaultTextStyle=function(t){this._defaultStyle=t||lm},n.prototype.setTextContent=function(t){},n.prototype._mergeStyle=function(t,i){if(!i)return t;var a=i.rich,o=t.rich||a&&{};return Ge(t,i),a&&o?(this._mergeRich(o,a),t.rich=o):o&&(t.rich=o),t},n.prototype._mergeRich=function(t,i){for(var a=gn(i),o=0;o<a.length;o++){var l=a[o];t[l]=t[l]||{},Ge(t[l],i[l])}},n.prototype.getAnimationStyleProps=function(){return _C},n.prototype._getOrCreateChild=function(t){var i=this._children[this._childCursor];return(!i||!(i instanceof t))&&(i=new t),this._children[this._childCursor++]=i,i.__zr=this.__zr,i.parent=this,i},n.prototype._updatePlainTexts=function(){var t=this.style,i=t.font||Pt,a=t.padding,l=function Z1(r,n){null!=r&&(r+="");var p,t=n.overflow,i=n.padding,a=n.font,o="truncate"===t,l=Uh(a),u=$t(n.lineHeight,l),c=!!n.backgroundColor,h="truncate"===n.lineOverflow,f=n.width,v=(p=null==f||"break"!==t&&"breakAll"!==t?r?r.split("\n"):[]:r?Yv(r,n.font,f,"breakAll"===t,0).lines:[]).length*u,m=$t(n.height,v);if(v>m&&h){var y=Math.floor(m/u);p=p.slice(0,y)}if(r&&o&&null!=f)for(var C=Gv(f,a,n.ellipsis,{minChar:n.truncateMinChar,placeholder:n.placeholder}),T=0;T<p.length;T++)p[T]=Jv(p[T],C);var z=m,E=0;for(T=0;T<p.length;T++)E=Math.max(wa(p[T],a),E);null==f&&(f=E);var N=E;return i&&(z+=i[0]+i[2],N+=i[1]+i[3],f+=i[1]+i[3]),c&&(N=f),{lines:p,height:m,outerWidth:N,outerHeight:z,lineHeight:u,calculatedLineHeight:l,contentWidth:E,contentHeight:v,width:f}}(Mc(t),t),u=jf(t),c=!!t.backgroundColor,h=l.outerHeight,f=l.outerWidth,p=l.contentWidth,v=l.lines,m=l.lineHeight,y=this._defaultStyle,C=t.x||0,T=t.y||0,z=t.align||y.align||"left",E=t.verticalAlign||y.verticalAlign||"top",N=C,X=Gs(T,l.contentHeight,E);if(u||a){var ve=yc(C,f,z),ce=Gs(T,h,E);u&&this._renderBackground(t,t,ve,ce,f,h)}X+=m/2,a&&(N=Ec(C,z,a),"top"===E?X+=a[0]:"bottom"===E&&(X-=a[2]));for(var _e=0,ze=!1,Ee=(gm("fill"in t?t.fill:(ze=!0,y.fill))),Le=(pm("stroke"in t?t.stroke:c||y.autoStroke&&!ze?null:(_e=2,y.stroke))),ke=t.textShadowBlur>0,Ue=null!=t.width&&("truncate"===t.overflow||"break"===t.overflow||"breakAll"===t.overflow),He=l.calculatedLineHeight,Ke=0;Ke<v.length;Ke++){var nt=this._getOrCreateChild(Dc),lt=nt.createStyle();nt.useStyle(lt),lt.text=v[Ke],lt.x=N,lt.y=X,z&&(lt.textAlign=z),lt.textBaseline="middle",lt.opacity=t.opacity,lt.strokeFirst=!0,ke&&(lt.shadowBlur=t.textShadowBlur||0,lt.shadowColor=t.textShadowColor||"transparent",lt.shadowOffsetX=t.textShadowOffsetX||0,lt.shadowOffsetY=t.textShadowOffsetY||0),lt.stroke=Le,lt.fill=Ee,Le&&(lt.lineWidth=t.lineWidth||_e,lt.lineDash=t.lineDash,lt.lineDashOffset=t.lineDashOffset||0),lt.font=i,fm(lt,t),X+=m,Ue&&nt.setBoundingRect(new Mn(yc(lt.x,t.width,lt.textAlign),Gs(lt.y,He,lt.textBaseline),p,He))}},n.prototype._updateRichTexts=function(){var t=this.style,a=function H1(r,n){var t=new V1;if(null!=r&&(r+=""),!r)return t;for(var c,i=n.width,a=n.height,o=n.overflow,l="break"!==o&&"breakAll"!==o||null==i?null:{width:i,accumWidth:0,breakAll:"breakAll"===o},u=Ff.lastIndex=0;null!=(c=Ff.exec(r));){var h=c.index;h>u&&Bf(t,r.substring(u,h),n,l),Bf(t,c[2],n,l,c[1]),u=Ff.lastIndex}u<r.length&&Bf(t,r.substring(u,r.length),n,l);var f=[],p=0,v=0,m=n.padding,y="truncate"===o,C="truncate"===n.lineOverflow;function T(mt,wt,kt){mt.width=wt,mt.lineHeight=kt,p+=kt,v=Math.max(v,wt)}e:for(var z=0;z<t.lines.length;z++){for(var E=t.lines[z],N=0,X=0,ve=0;ve<E.tokens.length;ve++){var _e=(ce=E.tokens[ve]).styleName&&n.rich[ce.styleName]||{},ze=ce.textPadding=_e.padding,Ee=ze?ze[1]+ze[3]:0,Le=ce.font=_e.font||n.font;ce.contentHeight=Uh(Le);var ke=$t(_e.height,ce.contentHeight);if(ce.innerHeight=ke,ze&&(ke+=ze[0]+ze[2]),ce.height=ke,ce.lineHeight=ri(_e.lineHeight,n.lineHeight,ke),ce.align=_e&&_e.align||n.align,ce.verticalAlign=_e&&_e.verticalAlign||"middle",C&&null!=a&&p+ce.lineHeight>a){ve>0?(E.tokens=E.tokens.slice(0,ve),T(E,X,N),t.lines=t.lines.slice(0,z+1)):t.lines=t.lines.slice(0,z);break e}var Ue=_e.width,He=null==Ue||"auto"===Ue;if("string"==typeof Ue&&"%"===Ue.charAt(Ue.length-1))ce.percentWidth=Ue,f.push(ce),ce.contentWidth=wa(ce.text,Le);else{if(He){var Ke=_e.backgroundColor,nt=Ke&&Ke.image;nt&&qh(nt=F1(nt))&&(ce.width=Math.max(ce.width,nt.width*ke/nt.height))}var lt=y&&null!=i?i-X:null;null!=lt&&lt<ce.width?!He||lt<Ee?(ce.text="",ce.width=ce.contentWidth=0):(ce.text=Wv(ce.text,lt-Ee,Le,n.ellipsis,{minChar:n.truncateMinChar}),ce.width=ce.contentWidth=wa(ce.text,Le)):ce.contentWidth=wa(ce.text,Le)}ce.width+=Ee,X+=ce.width,_e&&(N=Math.max(N,ce.lineHeight))}T(E,X,N)}for(t.outerWidth=t.width=$t(i,v),t.outerHeight=t.height=$t(a,p),t.contentHeight=p,t.contentWidth=v,m&&(t.outerWidth+=m[1]+m[3],t.outerHeight+=m[0]+m[2]),z=0;z<f.length;z++){var ce;(ce=f[z]).width=parseInt(ce.percentWidth,10)/100*t.width}return t}(Mc(t),t),o=a.width,l=a.outerWidth,u=a.outerHeight,c=t.padding,f=t.y||0,p=this._defaultStyle,m=t.verticalAlign||p.verticalAlign,y=yc(t.x||0,l,t.align||p.align),C=Gs(f,u,m),T=y,z=C;c&&(T+=c[3],z+=c[0]);var E=T+o;jf(t)&&this._renderBackground(t,t,y,C,l,u);for(var N=!!t.backgroundColor,X=0;X<a.lines.length;X++){for(var ve=a.lines[X],ce=ve.tokens,_e=ce.length,ze=ve.lineHeight,Ee=ve.width,Le=0,ke=T,Ue=E,He=_e-1,Ke=void 0;Le<_e&&(!(Ke=ce[Le]).align||"left"===Ke.align);)this._placeToken(Ke,t,ze,z,ke,"left",N),Ee-=Ke.width,ke+=Ke.width,Le++;for(;He>=0&&"right"===(Ke=ce[He]).align;)this._placeToken(Ke,t,ze,z,Ue,"right",N),Ee-=Ke.width,Ue-=Ke.width,He--;for(ke+=(o-(ke-T)-(E-Ue)-Ee)/2;Le<=He;)this._placeToken(Ke=ce[Le],t,ze,z,ke+Ke.width/2,"center",N),ke+=Ke.width,Le++;z+=ze}},n.prototype._placeToken=function(t,i,a,o,l,u,c){var h=i.rich[t.styleName]||{};h.text=t.text;var f=t.verticalAlign,p=o+a/2;"top"===f?p=o+t.height/2:"bottom"===f&&(p=o+a-t.height/2),!t.isLineHolder&&jf(h)&&this._renderBackground(h,i,"right"===u?l-t.width:"center"===u?l-t.width/2:l,p-t.height/2,t.width,t.height);var m=!!h.backgroundColor,y=t.textPadding;y&&(l=Ec(l,u,y),p-=t.height/2-y[0]-t.innerHeight/2);var C=this._getOrCreateChild(Dc),T=C.createStyle();C.useStyle(T);var z=this._defaultStyle,E=!1,N=0,X=gm("fill"in h?h.fill:"fill"in i?i.fill:(E=!0,z.fill)),ve=pm("stroke"in h?h.stroke:"stroke"in i?i.stroke:m||c||z.autoStroke&&!E?null:(N=2,z.stroke)),ce=h.textShadowBlur>0||i.textShadowBlur>0;T.text=t.text,T.x=l,T.y=p,ce&&(T.shadowBlur=h.textShadowBlur||i.textShadowBlur||0,T.shadowColor=h.textShadowColor||i.textShadowColor||"transparent",T.shadowOffsetX=h.textShadowOffsetX||i.textShadowOffsetX||0,T.shadowOffsetY=h.textShadowOffsetY||i.textShadowOffsetY||0),T.textAlign=u,T.textBaseline="middle",T.font=t.font||Pt,T.opacity=ri(h.opacity,i.opacity,1),fm(T,h),ve&&(T.lineWidth=ri(h.lineWidth,i.lineWidth,N),T.lineDash=$t(h.lineDash,i.lineDash),T.lineDashOffset=i.lineDashOffset||0,T.stroke=ve),X&&(T.fill=X);var _e=t.contentWidth,ze=t.contentHeight;C.setBoundingRect(new Mn(yc(T.x,_e,T.textAlign),Gs(T.y,ze,T.textBaseline),_e,ze))},n.prototype._renderBackground=function(t,i,a,o,l,u){var C,T,E,c=t.backgroundColor,h=t.borderWidth,f=t.borderColor,p=c&&c.image,v=c&&!p,m=t.borderRadius,y=this;if(v||t.lineHeight||h&&f){(C=this._getOrCreateChild(Qn)).useStyle(C.createStyle()),C.style.fill=null;var z=C.shape;z.x=a,z.y=o,z.width=l,z.height=u,z.r=m,C.dirtyShape()}if(v)(E=C.style).fill=c||null,E.fillOpacity=$t(t.fillOpacity,1);else if(p){(T=this._getOrCreateChild(ki)).onload=function(){y.dirtyStyle()};var N=T.style;N.image=c.image,N.x=a,N.y=o,N.width=l,N.height=u}h&&f&&((E=C.style).lineWidth=h,E.stroke=f,E.strokeOpacity=$t(t.strokeOpacity,1),E.lineDash=t.borderDash,E.lineDashOffset=t.borderDashOffset||0,C.strokeContainThreshold=0,C.hasFill()&&C.hasStroke()&&(E.strokeFirst=!0,E.lineWidth*=2));var X=(C||T).style;X.shadowBlur=t.shadowBlur||0,X.shadowColor=t.shadowColor||"transparent",X.shadowOffsetX=t.shadowOffsetX||0,X.shadowOffsetY=t.shadowOffsetY||0,X.opacity=ri(t.opacity,i.opacity,1)},n.makeFont=function(t){var i="";return Ac(t)&&(i=[t.fontStyle,t.fontWeight,dm(t.fontSize),t.fontFamily||"sans-serif"].join(" ")),i&&Ir(i)||t.textFont||t.font},n}($a),yC={left:!0,right:1,center:1},CC={top:1,bottom:1,middle:1},hm=["fontStyle","fontWeight","fontSize","fontFamily"];function dm(r){return"string"!=typeof r||-1===r.indexOf("px")&&-1===r.indexOf("rem")&&-1===r.indexOf("em")?isNaN(+r)?"12px":r+"px":r}function fm(r,n){for(var t=0;t<hm.length;t++){var i=hm[t],a=n[i];null!=a&&(r[i]=a)}}function Ac(r){return null!=r.fontSize||r.fontFamily||r.fontWeight}function $f(r){if(r){r.font=cm.makeFont(r);var n=r.align;"middle"===n&&(n="center"),r.align=null==n||yC[n]?n:"left";var t=r.verticalAlign;"center"===t&&(t="middle"),r.verticalAlign=null==t||CC[t]?t:"top",r.padding&&(r.padding=Na(r.padding))}}function pm(r,n){return null==r||n<=0||"transparent"===r||"none"===r?null:r.image||r.colorStops?"#000":r}function gm(r){return null==r||"none"===r?null:r.image||r.colorStops?"#000":r}function Ec(r,n,t){return"right"===n?r-t[1]:"center"===n?r+t[3]/2-t[1]/2:r+t[3]}function Mc(r){var n=r.text;return null!=n&&(n+=""),n}function jf(r){return!!(r.backgroundColor||r.lineHeight||r.borderWidth&&r.borderColor)}const Gn=cm;var dn=Xn(),Xf=function(r,n,t,i){if(i){var a=dn(i);a.dataIndex=t,a.dataType=n,a.seriesIndex=r,"group"===i.type&&i.traverse(function(o){var l=dn(o);l.seriesIndex=r,l.dataIndex=t,l.dataType=n})}},Oc=1,vm={},mm=Xn(),ep=Xn(),oa=["emphasis","blur","select"],Ic=["normal","emphasis","blur","select"],js="highlight",Tu="downplay",kc="select",Lc="unselect",bu="toggleSelect";function Rc(r){return null!=r&&"none"!==r}var _m=new Ct(100);function bC(r){if(Qe(r)){var n=_m.get(r);return n||(n=_o(r,-.1),_m.put(r,n)),n}if(jn(r)){var t=Ge({},r);return t.colorStops=_t(r.colorStops,function(i){return{offset:i.offset,color:_o(i.color,-.1)}}),t}return r}function np(r,n,t){r.onHoverStateChange&&(r.hoverState||0)!==t&&r.onHoverStateChange(n),r.hoverState=t}function ym(r){np(r,"emphasis",2)}function Cm(r){2===r.hoverState&&np(r,"normal",0)}function rp(r){np(r,"blur",1)}function xm(r){1===r.hoverState&&np(r,"normal",0)}function SC(r){r.selected=!0}function zC(r){r.selected=!1}function ji(r,n,t){n(r,t)}function Bo(r,n,t){ji(r,n,t),r.isGroup&&r.traverse(function(i){ji(i,n,t)})}function nd(r,n){switch(n){case"emphasis":r.hoverState=2;break;case"normal":r.hoverState=0;break;case"blur":r.hoverState=1;break;case"select":r.selected=!0}}function rd(r,n){var t=this.states[r];if(this.style){if("emphasis"===r)return function Xs(r,n,t,i){var a=t&&Ye(t,"select")>=0,o=!1;if(r instanceof Fn){var l=mm(r),u=a&&l.selectFill||l.normalFill,c=a&&l.selectStroke||l.normalStroke;if(Rc(u)||Rc(c)){var h=(i=i||{}).style||{};"inherit"===h.fill?(o=!0,i=Ge({},i),(h=Ge({},h)).fill=u):!Rc(h.fill)&&Rc(u)?(o=!0,i=Ge({},i),(h=Ge({},h)).fill=bC(u)):!Rc(h.stroke)&&Rc(c)&&(o||(i=Ge({},i),h=Ge({},h)),h.stroke=bC(c)),i.style=h}}if(i&&null==i.z2){o||(i=Ge({},i));var f=r.z2EmphasisLift;i.z2=r.z2+(null!=f?f:10)}return i}(this,0,n,t);if("blur"===r)return function AC(r,n,t){var i=Ye(r.currentStates,n)>=0,a=r.style.opacity,o=i?null:function Su(r,n,t,i){for(var a=r.style,o={},l=0;l<n.length;l++){var u=n[l],c=a[u];o[u]=null==c?i&&i[u]:c}for(l=0;l<r.animators.length;l++){var h=r.animators[l];h.__fromStateTransition&&h.__fromStateTransition.indexOf(t)<0&&"style"===h.targetName&&h.saveTo(o,n)}return o}(r,["opacity"],n,{opacity:1}),l=(t=t||{}).style||{};return null==l.opacity&&(t=Ge({},t),l=Ge({opacity:i?a:.1*o.opacity},l),t.style=l),t}(this,r,t);if("select"===r)return function DC(r,n,t){if(t&&null==t.z2){t=Ge({},t);var i=r.z2SelectLift;t.z2=r.z2+(null!=i?i:9)}return t}(this,0,t)}return t}function Wl(r){r.stateProxy=rd;var n=r.getTextContent(),t=r.getTextGuideLine();n&&(n.stateProxy=rd),t&&(t.stateProxy=rd)}function zu(r,n){!wm(r,n)&&!r.__highByOuter&&Bo(r,ym)}function Tm(r,n){!wm(r,n)&&!r.__highByOuter&&Bo(r,Cm)}function gs(r,n){r.__highByOuter|=1<<(n||0),Bo(r,ym)}function vs(r,n){!(r.__highByOuter&=~(1<<(n||0)))&&Bo(r,Cm)}function bm(r){Bo(r,rp)}function ip(r){Bo(r,xm)}function Sm(r){Bo(r,SC)}function zm(r){Bo(r,zC)}function wm(r,n){return r.__highDownSilentOnTouch&&n.zrByTouch}function Dm(r){var n=r.getModel(),t=[],i=[];n.eachComponent(function(a,o){var l=ep(o),u="series"===a,c=u?r.getViewOfSeriesModel(o):r.getViewOfComponentModel(o);!u&&i.push(c),l.isBlured&&(c.group.traverse(function(h){xm(h)}),u&&t.push(o)),l.isBlured=!1}),De(i,function(a){a&&a.toggleBlurSeries&&a.toggleBlurSeries(t,!1,n)})}function ap(r,n,t,i){var a=i.getModel();function o(h,f){for(var p=0;p<f.length;p++){var v=h.getItemGraphicEl(f[p]);v&&ip(v)}}if(t=t||"coordinateSystem",null!=r&&n&&"none"!==n){var l=a.getSeriesByIndex(r),u=l.coordinateSystem;u&&u.master&&(u=u.master);var c=[];a.eachSeries(function(h){var f=l===h,p=h.coordinateSystem;if(p&&p.master&&(p=p.master),!("series"===t&&!f||"coordinateSystem"===t&&!(p&&u?p===u:f)||"series"===n&&f)){if(i.getViewOfSeriesModel(h).group.traverse(function(T){rp(T)}),zn(n))o(h.getData(),n);else if(tt(n))for(var y=gn(n),C=0;C<y.length;C++)o(h.getData(y[C]),n[y[C]]);c.push(h),ep(h).isBlured=!0}}),a.eachComponent(function(h,f){if("series"!==h){var p=i.getViewOfComponentModel(f);p&&p.toggleBlurSeries&&p.toggleBlurSeries(c,!0,a)}})}}function op(r,n,t){if(null!=r&&null!=n){var i=t.getModel().getComponent(r,n);if(i){ep(i).isBlured=!0;var a=t.getViewOfComponentModel(i);!a||!a.focusBlurEnabled||a.group.traverse(function(o){rp(o)})}}}function sp(r,n,t,i){var a={focusSelf:!1,dispatchers:null};if(null==r||"series"===r||null==n||null==t)return a;var o=i.getModel().getComponent(r,n);if(!o)return a;var l=i.getViewOfComponentModel(o);if(!l||!l.findHighDownDispatchers)return a;for(var c,u=l.findHighDownDispatchers(t),h=0;h<u.length;h++)if("self"===dn(u[h]).focus){c=!0;break}return{focusSelf:c,dispatchers:u}}function Am(r){De(r.getAllData(),function(t){var a=t.type;t.data.eachItemGraphicEl(function(o,l){r.isSelected(l,a)?Sm(o):zm(o)})})}function IC(r){var n=[];return r.eachSeries(function(t){De(t.getAllData(),function(a){var l=a.type,u=t.getSelectedDataIndices();if(u.length>0){var c={dataIndex:u,seriesIndex:t.seriesIndex};null!=l&&(c.dataType=l),n.push(c)}})}),n}function el(r,n,t){Gl(r,!0),Bo(r,Wl),lp(r,n,t)}function di(r,n,t,i){i?function kC(r){Gl(r,!1)}(r):el(r,n,t)}function lp(r,n,t){var i=dn(r);null!=n?(i.focus=n,i.blurScope=t):i.focus&&(i.focus=null)}var Em=["emphasis","blur","select"],LC={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function Zi(r,n,t,i){t=t||"itemStyle";for(var a=0;a<Em.length;a++){var o=Em[a],l=n.getModel([o,t]);r.ensureState(o).style=i?i(l):l[LC[t]]()}}function Gl(r,n){var t=!1===n,i=r;r.highDownSilentOnTouch&&(i.__highDownSilentOnTouch=r.highDownSilentOnTouch),(!t||i.__highDownDispatcher)&&(i.__highByOuter=i.__highByOuter||0,i.__highDownDispatcher=!t)}function Nc(r){return!(!r||!r.__highDownDispatcher)}function up(r){var n=r.type;return n===kc||n===Lc||n===bu}function Mm(r){var n=r.type;return n===js||n===Tu}var Om=Xn();function wu(r,n,t,i,a){var o;if(n&&n.ecModel){var l=n.ecModel.getUpdatePayload();o=l&&l.animation}var c="update"===r;if(n&&n.isAnimationEnabled()){var h=void 0,f=void 0,p=void 0;return i?(h=$t(i.duration,200),f=$t(i.easing,"cubicOut"),p=0):(h=n.getShallow(c?"animationDurationUpdate":"animationDuration"),f=n.getShallow(c?"animationEasingUpdate":"animationEasing"),p=n.getShallow(c?"animationDelayUpdate":"animationDelay")),o&&(null!=o.duration&&(h=o.duration),null!=o.easing&&(f=o.easing),null!=o.delay&&(p=o.delay)),Pe(p)&&(p=p(t,a)),Pe(h)&&(h=h(t)),{duration:h||0,delay:p,easing:f}}return null}function cp(r,n,t,i,a,o,l){var c,u=!1;Pe(a)?(l=o,o=a,a=null):tt(a)&&(o=a.cb,l=a.during,u=a.isFrom,c=a.removeOpt,a=a.dataIndex);var h="leave"===r;h||n.stopAnimation("leave");var f=wu(r,i,a,h?c||{}:null,i&&i.getAnimationDelayParams?i.getAnimationDelayParams(n,a):null);if(f&&f.duration>0){var y={duration:f.duration,delay:f.delay||0,easing:f.easing,done:o,force:!!o||!!l,setToFinal:!h,scope:r,during:l};u?n.animateFrom(t,y):n.animateTo(t,y)}else n.stopAnimation(),!u&&n.attr(t),l&&l(1),o&&o()}function Kn(r,n,t,i,a,o){cp("update",r,n,t,i,a,o)}function Kr(r,n,t,i,a,o){cp("enter",r,n,t,i,a,o)}function Du(r){if(!r.__zr)return!0;for(var n=0;n<r.animators.length;n++)if("leave"===r.animators[n].scope)return!0;return!1}function tl(r,n,t,i,a,o){Du(r)||cp("leave",r,n,t,i,a,o)}function Pm(r,n,t,i){r.removeTextContent(),r.removeTextGuideLine(),tl(r,{style:{opacity:0}},n,t,i)}function Fc(r,n,t){function i(){r.parent&&r.parent.remove(r)}r.isGroup?r.traverse(function(a){a.isGroup||Pm(a,n,t,i)}):Pm(r,n,t,i)}function bo(r){Om(r).oldStyle=r.style}var id={};function Im(r,n){for(var t=0;t<oa.length;t++){var i=oa[t],a=n[i],o=r.ensureState(i);o.style=o.style||{},o.style.text=a}var l=r.currentStates.slice();r.clearStates(!0),r.setStyle({text:n.normal}),r.useStates(l,!0)}function hp(r,n,t){var u,i=r.labelFetcher,a=r.labelDataIndex,o=r.labelDimIndex,l=n.normal;i&&(u=i.getFormattedLabel(a,"normal",null,o,l&&l.get("formatter"),null!=t?{interpolatedValue:t}:null)),null==u&&(u=Pe(r.defaultText)?r.defaultText(a,r,t):r.defaultText);for(var c={normal:u},h=0;h<oa.length;h++){var f=oa[h],p=n[f];c[f]=$t(i?i.getFormattedLabel(a,f,null,o,p&&p.get("formatter")):null,u)}return c}function Xi(r,n,t,i){t=t||id;for(var a=r instanceof Gn,o=!1,l=0;l<Ic.length;l++)if((u=n[Ic[l]])&&u.getShallow("show")){o=!0;break}var c=a?r:r.getTextContent();if(o){a||(c||(c=new Gn,r.setTextContent(c)),r.stateProxy&&(c.stateProxy=r.stateProxy));var h=hp(t,n),f=n.normal,p=!!f.getShallow("show"),v=$r(f,i&&i.normal,t,!1,!a);for(v.text=h.normal,a||r.setTextConfig(ad(f,t,!1)),l=0;l<oa.length;l++){var u,m=oa[l];if(u=n[m]){var y=c.ensureState(m),C=!!$t(u.getShallow("show"),p);C!==p&&(y.ignore=!C),y.style=$r(u,i&&i[m],t,!0,!a),y.style.text=h[m],a||(r.ensureState(m).textConfig=ad(u,t,!0))}}c.silent=!!f.getShallow("silent"),null!=c.style.x&&(v.x=c.style.x),null!=c.style.y&&(v.y=c.style.y),c.ignore=!p,c.useStyle(v),c.dirty(),t.enableTextSetter&&(Au(c).setLabelText=function(z){var E=hp(t,n,z);Im(c,E)})}else c&&(c.ignore=!0);r.dirty()}function Li(r,n){for(var t={normal:r.getModel(n=n||"label")},i=0;i<oa.length;i++){var a=oa[i];t[a]=r.getModel([a,n])}return t}function $r(r,n,t,i,a){var o={};return function ZC(r,n,t,i,a){t=t||id;var c,o=n.ecModel,l=o&&o.option.textStyle,u=function UC(r){for(var n;r&&r!==r.ecModel;){var t=(r.option||id).rich;if(t){n=n||{};for(var i=gn(t),a=0;a<i.length;a++)n[i[a]]=1}r=r.parentModel}return n}(n);if(u)for(var h in c={},u)if(u.hasOwnProperty(h)){var f=n.getModel(["rich",h]);Nm(c[h]={},f,l,t,i,a,!1,!0)}c&&(r.rich=c);var p=n.get("overflow");p&&(r.overflow=p);var v=n.get("minMargin");null!=v&&(r.margin=v),Nm(r,n,l,t,i,a,!0,!1)}(o,r,t,i,a),n&&Ge(o,n),o}function ad(r,n,t){n=n||{};var a,i={},o=r.getShallow("rotate"),l=$t(r.getShallow("distance"),t?null:5),u=r.getShallow("offset");return"outside"===(a=r.getShallow("position")||(t?null:"inside"))&&(a=n.defaultOutsidePosition||"top"),null!=a&&(i.position=a),null!=u&&(i.offset=u),null!=o&&(o*=Math.PI/180,i.rotation=o),null!=l&&(i.distance=l),i.outsideFill="inherit"===r.get("color")?n.inheritColor||null:"auto",i}var km=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],Lm=["align","lineHeight","width","height","tag","verticalAlign"],Rm=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function Nm(r,n,t,i,a,o,l,u){t=!a&&t||id;var c=i&&i.inheritColor,h=n.getShallow("color"),f=n.getShallow("textBorderColor"),p=$t(n.getShallow("opacity"),t.opacity);("inherit"===h||"auto"===h)&&(h=c||null),("inherit"===f||"auto"===f)&&(f=c||null),o||(h=h||t.color,f=f||t.textBorderColor),null!=h&&(r.fill=h),null!=f&&(r.stroke=f);var v=$t(n.getShallow("textBorderWidth"),t.textBorderWidth);null!=v&&(r.lineWidth=v);var m=$t(n.getShallow("textBorderType"),t.textBorderType);null!=m&&(r.lineDash=m);var y=$t(n.getShallow("textBorderDashOffset"),t.textBorderDashOffset);null!=y&&(r.lineDashOffset=y),!a&&null==p&&!u&&(p=i&&i.defaultOpacity),null!=p&&(r.opacity=p),!a&&!o&&null==r.fill&&i.inheritColor&&(r.fill=i.inheritColor);for(var C=0;C<km.length;C++)null!=(z=$t(n.getShallow(T=km[C]),t[T]))&&(r[T]=z);for(C=0;C<Lm.length;C++)null!=(z=n.getShallow(T=Lm[C]))&&(r[T]=z);if(null==r.verticalAlign){var E=n.getShallow("baseline");null!=E&&(r.verticalAlign=E)}if(!l||!i.disableBox){for(C=0;C<Rm.length;C++){var T,z;null!=(z=n.getShallow(T=Rm[C]))&&(r[T]=z)}var N=n.getShallow("borderType");null!=N&&(r.borderDash=N),("auto"===r.backgroundColor||"inherit"===r.backgroundColor)&&c&&(r.backgroundColor=c),("auto"===r.borderColor||"inherit"===r.borderColor)&&c&&(r.borderColor=c)}}function Fm(r,n){var t=n&&n.getModel("textStyle");return Ir([r.fontStyle||t&&t.getShallow("fontStyle")||"",r.fontWeight||t&&t.getShallow("fontWeight")||"",(r.fontSize||t&&t.getShallow("fontSize")||12)+"px",r.fontFamily||t&&t.getShallow("fontFamily")||"sans-serif"].join(" "))}var Au=Xn();function Bm(r,n,t,i){if(r){var a=Au(r);a.prevValue=a.value,a.value=t;var o=n.normal;a.valueAnimation=o.get("valueAnimation"),a.valueAnimation&&(a.precision=o.get("precision"),a.defaultInterpolatedText=i,a.statesModels=n)}}function Zm(r,n,t,i,a){var o=Au(r);if(o.valueAnimation&&o.prevValue!==o.value){var l=o.defaultInterpolatedText,u=$t(o.interpolatedValue,o.prevValue),c=o.value;r.percent=0,(null==o.prevValue?Kr:Kn)(r,{percent:1},i,n,null,function h(f){var p=Zv(t,o.precision,u,c,f);o.interpolatedValue=1===f?null:p;var v=hp({labelDataIndex:n,labelFetcher:a,defaultText:l?l(p):p+""},o.statesModels,p);Im(r,v)})}}var Um=["textStyle","color"],Zo=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],dp=new Gn,VC=function(){function r(){}return r.prototype.getTextColor=function(n){var t=this.ecModel;return this.getShallow("color")||(!n&&t?t.get(Um):null)},r.prototype.getFont=function(){return Fm({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},r.prototype.getTextRect=function(n){for(var t={text:n,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},i=0;i<Zo.length;i++)t[Zo[i]]=this.getShallow(Zo[i]);return dp.useStyle(t),dp.update(),dp.getBoundingRect()},r}();const Vm=VC;var Hm=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],HC=Ll(Hm),WC=function(){function r(){}return r.prototype.getLineStyle=function(n){return HC(this,n)},r}(),Wm=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],GC=Ll(Wm),JC=function(){function r(){}return r.prototype.getItemStyle=function(n,t){return GC(this,n,t)},r}(),Jl=function(){function r(n,t,i){this.parentModel=t,this.ecModel=i,this.option=n}return r.prototype.init=function(n,t,i){for(var a=[],o=3;o<arguments.length;o++)a[o-3]=arguments[o]},r.prototype.mergeOption=function(n,t){Zt(this.option,n,!0)},r.prototype.get=function(n,t){return null==n?this.option:this._doGet(this.parsePath(n),!t&&this.parentModel)},r.prototype.getShallow=function(n,t){var i=this.option,a=null==i?i:i[n];if(null==a&&!t){var o=this.parentModel;o&&(a=o.getShallow(n))}return a},r.prototype.getModel=function(n,t){var i=null!=n,a=i?this.parsePath(n):null;return new r(i?this._doGet(a):this.option,t=t||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(a)),this.ecModel)},r.prototype.isEmpty=function(){return null==this.option},r.prototype.restoreData=function(){},r.prototype.clone=function(){return new(0,this.constructor)(Nt(this.option))},r.prototype.parsePath=function(n){return"string"==typeof n?n.split("."):n},r.prototype.resolveParentPath=function(n){return n},r.prototype.isAnimationEnabled=function(){if(!gt.node&&this.option){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},r.prototype._doGet=function(n,t){var i=this.option;if(!n)return i;for(var a=0;a<n.length&&(!n[a]||null!=(i=i&&"object"==typeof i?i[n[a]]:null));a++);return null==i&&t&&(i=t._doGet(this.resolveParentPath(n),t.parentModel)),i},r}();Lf(Jl),function I1(r){var n=["__\0is_clz",P1++].join("_");r.prototype[n]=!0,r.isInstance=function(t){return!(!t||!t[n])}}(Jl),Qt(Jl,WC),Qt(Jl,JC),Qt(Jl,N1),Qt(Jl,Vm);const Or=Jl;var YC=Math.round(10*Math.random());function Eu(r){return[r||"",YC++].join("_")}function nl(r,n){return Zt(Zt({},r,!0),n,!0)}var sd={},pp={},Gm=gt.domSupported&&(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase().indexOf("ZH")>-1?"ZH":"EN";function gp(r,n){r=r.toUpperCase(),pp[r]=new Or(n),sd[r]=n}function vp(r){return pp[r]}gp("EN",{time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}}),gp("ZH",{time:{month:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],dayOfWeekAbbr:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53cd\u9009"}},toolbox:{brush:{title:{rect:"\u77e9\u5f62\u9009\u62e9",polygon:"\u5708\u9009",lineX:"\u6a2a\u5411\u9009\u62e9",lineY:"\u7eb5\u5411\u9009\u62e9",keep:"\u4fdd\u6301\u9009\u62e9",clear:"\u6e05\u9664\u9009\u62e9"}},dataView:{title:"\u6570\u636e\u89c6\u56fe",lang:["\u6570\u636e\u89c6\u56fe","\u5173\u95ed","\u5237\u65b0"]},dataZoom:{title:{zoom:"\u533a\u57df\u7f29\u653e",back:"\u533a\u57df\u7f29\u653e\u8fd8\u539f"}},magicType:{title:{line:"\u5207\u6362\u4e3a\u6298\u7ebf\u56fe",bar:"\u5207\u6362\u4e3a\u67f1\u72b6\u56fe",stack:"\u5207\u6362\u4e3a\u5806\u53e0",tiled:"\u5207\u6362\u4e3a\u5e73\u94fa"}},restore:{title:"\u8fd8\u539f"},saveAsImage:{title:"\u4fdd\u5b58\u4e3a\u56fe\u7247",lang:["\u53f3\u952e\u53e6\u5b58\u4e3a\u56fe\u7247"]}},series:{typeNames:{pie:"\u997c\u56fe",bar:"\u67f1\u72b6\u56fe",line:"\u6298\u7ebf\u56fe",scatter:"\u6563\u70b9\u56fe",effectScatter:"\u6d9f\u6f2a\u6563\u70b9\u56fe",radar:"\u96f7\u8fbe\u56fe",tree:"\u6811\u56fe",treemap:"\u77e9\u5f62\u6811\u56fe",boxplot:"\u7bb1\u578b\u56fe",candlestick:"K\u7ebf\u56fe",k:"K\u7ebf\u56fe",heatmap:"\u70ed\u529b\u56fe",map:"\u5730\u56fe",parallel:"\u5e73\u884c\u5750\u6807\u56fe",lines:"\u7ebf\u56fe",graph:"\u5173\u7cfb\u56fe",sankey:"\u6851\u57fa\u56fe",funnel:"\u6f0f\u6597\u56fe",gauge:"\u4eea\u8868\u76d8\u56fe",pictorialBar:"\u8c61\u5f62\u67f1\u56fe",themeRiver:"\u4e3b\u9898\u6cb3\u6d41\u56fe",sunburst:"\u65ed\u65e5\u56fe"}},aria:{general:{withTitle:"\u8fd9\u662f\u4e00\u4e2a\u5173\u4e8e\u201c{title}\u201d\u7684\u56fe\u8868\u3002",withoutTitle:"\u8fd9\u662f\u4e00\u4e2a\u56fe\u8868\uff0c"},series:{single:{prefix:"",withName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\uff0c\u8868\u793a{seriesName}\u3002",withoutName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\u3002"},multiple:{prefix:"\u5b83\u7531{seriesCount}\u4e2a\u56fe\u8868\u7cfb\u5217\u7ec4\u6210\u3002",withName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a\u8868\u793a{seriesName}\u7684{seriesType}\uff0c",withoutName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a{seriesType}\uff0c",separator:{middle:"\uff1b",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636e\u662f\u2014\u2014",partialData:"\u5176\u4e2d\uff0c\u524d{displayCnt}\u9879\u662f\u2014\u2014",withName:"{name}\u7684\u6570\u636e\u662f{value}",withoutName:"{value}",separator:{middle:"\uff0c",end:""}}}});var Zc=36e5,Xa=24*Zc,Jm=365*Xa,Uc={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},ld="{yyyy}-{MM}-{dd}",Ym={year:"{yyyy}",month:"{yyyy}-{MM}",day:ld,hour:ld+" "+Uc.hour,minute:ld+" "+Uc.minute,second:ld+" "+Uc.second,millisecond:Uc.none},yp=["year","month","day","hour","minute","second","millisecond"],Qm=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function Ma(r,n){return"0000".substr(0,n-(r+="").length)+r}function Mu(r){switch(r){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return r}}function Ui(r){return r===Mu(r)}function rl(r,n,t,i){var a=Aa(r),o=a[Cp(t)](),l=a[Pu(t)]()+1,u=Math.floor((l-1)/4)+1,c=a[ud(t)](),h=a["get"+(t?"UTC":"")+"Day"](),f=a[Iu(t)](),p=(f-1)%12+1,v=a[Vc(t)](),m=a[ku(t)](),y=a[Hc(t)](),T=(i instanceof Or?i:vp(i||Gm)||function XC(){return pp.EN}()).getModel("time"),z=T.get("month"),E=T.get("monthAbbr"),N=T.get("dayOfWeek"),X=T.get("dayOfWeekAbbr");return(n||"").replace(/{yyyy}/g,o+"").replace(/{yy}/g,o%100+"").replace(/{Q}/g,u+"").replace(/{MMMM}/g,z[l-1]).replace(/{MMM}/g,E[l-1]).replace(/{MM}/g,Ma(l,2)).replace(/{M}/g,l+"").replace(/{dd}/g,Ma(c,2)).replace(/{d}/g,c+"").replace(/{eeee}/g,N[h]).replace(/{ee}/g,X[h]).replace(/{e}/g,h+"").replace(/{HH}/g,Ma(f,2)).replace(/{H}/g,f+"").replace(/{hh}/g,Ma(p+"",2)).replace(/{h}/g,p+"").replace(/{mm}/g,Ma(v,2)).replace(/{m}/g,v+"").replace(/{ss}/g,Ma(m,2)).replace(/{s}/g,m+"").replace(/{SSS}/g,Ma(y,3)).replace(/{S}/g,y+"")}function Ou(r,n){var t=Aa(r),i=t[Pu(n)]()+1,a=t[ud(n)](),o=t[Iu(n)](),l=t[Vc(n)](),u=t[ku(n)](),h=0===t[Hc(n)](),f=h&&0===u,p=f&&0===l,v=p&&0===o,m=v&&1===a;return m&&1===i?"year":m?"month":v?"day":p?"hour":f?"minute":h?"second":"millisecond"}function qm(r,n,t){var i=Ve(r)?Aa(r):r;switch(n=n||Ou(r,t)){case"year":return i[Cp(t)]();case"half-year":return i[Pu(t)]()>=6?1:0;case"quarter":return Math.floor((i[Pu(t)]()+1)/4);case"month":return i[Pu(t)]();case"day":return i[ud(t)]();case"half-day":return i[Iu(t)]()/24;case"hour":return i[Iu(t)]();case"minute":return i[Vc(t)]();case"second":return i[ku(t)]();case"millisecond":return i[Hc(t)]()}}function Cp(r){return r?"getUTCFullYear":"getFullYear"}function Pu(r){return r?"getUTCMonth":"getMonth"}function ud(r){return r?"getUTCDate":"getDate"}function Iu(r){return r?"getUTCHours":"getHours"}function Vc(r){return r?"getUTCMinutes":"getMinutes"}function ku(r){return r?"getUTCSeconds":"getSeconds"}function Hc(r){return r?"getUTCMilliseconds":"getMilliseconds"}function ex(r){return r?"setUTCFullYear":"setFullYear"}function Km(r){return r?"setUTCMonth":"setMonth"}function $m(r){return r?"setUTCDate":"setDate"}function jm(r){return r?"setUTCHours":"setHours"}function Xm(r){return r?"setUTCMinutes":"setMinutes"}function e_(r){return r?"setUTCSeconds":"setSeconds"}function t_(r){return r?"setUTCMilliseconds":"setMilliseconds"}function xp(r){if(!Of(r))return Qe(r)?r:"-";var n=(r+"").split(".");return n[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(n.length>1?"."+n[1]:"")}function Tp(r,n){return r=(r||"").toLowerCase().replace(/-(.)/g,function(t,i){return i.toUpperCase()}),n&&r&&(r=r.charAt(0).toUpperCase()+r.slice(1)),r}var Ql=Na,tx=/([&<>"'])/g,nx={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function ga(r){return null==r?"":(r+"").replace(tx,function(n,t){return nx[t]})}function bp(r,n,t){function a(f){return f&&Ir(f)?f:"-"}function o(f){return!(null==f||isNaN(f)||!isFinite(f))}var l="time"===n,u=r instanceof Date;if(l||u){var c=l?Aa(r):r;if(!isNaN(+c))return rl(c,"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}",t);if(u)return"-"}if("ordinal"===n)return Ie(r)?a(r):Ve(r)&&o(r)?r+"":"-";var h=Io(r);return o(h)?xp(h):Ie(r)?a(r):"boolean"==typeof r?r+"":"-"}var n_=["a","b","c","d","e","f","g"],Sp=function(r,n){return"{"+r+(null==n?"":n)+"}"};function zp(r,n,t){we(n)||(n=[n]);var i=n.length;if(!i)return"";for(var a=n[0].$vars||[],o=0;o<a.length;o++){var l=n_[o];r=r.replace(Sp(l),Sp(l,0))}for(var u=0;u<i;u++)for(var c=0;c<a.length;c++){var h=n[u][a[c]];r=r.replace(Sp(n_[c],u),t?ga(h):h)}return r}function r_(r,n){var t=Qe(r)?{color:r,extraCssText:n}:r||{},i=t.color,a=t.type;n=t.extraCssText;var o=t.renderMode||"html";return i?"html"===o?"subItem"===a?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+ga(i)+";"+(n||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+ga(i)+";"+(n||"")+'"></span>':{renderMode:o,content:"{"+(t.markerId||"markerX")+"|}  ",style:"subItem"===a?{width:4,height:4,borderRadius:2,backgroundColor:i}:{width:10,height:10,borderRadius:5,backgroundColor:i}}:""}function ix(r,n,t){("week"===r||"month"===r||"quarter"===r||"half-year"===r||"year"===r)&&(r="MM-dd\nyyyy");var i=Aa(n),a=t?"getUTC":"get",o=i[a+"FullYear"](),l=i[a+"Month"]()+1,u=i[a+"Date"](),c=i[a+"Hours"](),h=i[a+"Minutes"](),f=i[a+"Seconds"](),p=i[a+"Milliseconds"]();return r.replace("MM",Ma(l,2)).replace("M",l).replace("yyyy",o).replace("yy",o%100+"").replace("dd",Ma(u,2)).replace("d",u).replace("hh",Ma(c,2)).replace("h",c).replace("mm",Ma(h,2)).replace("m",h).replace("ss",Ma(f,2)).replace("s",f).replace("SSS",Ma(p,3))}function ax(r){return r&&r.charAt(0).toUpperCase()+r.substr(1)}function ql(r,n){return n=n||"transparent",Qe(r)?r:tt(r)&&r.colorStops&&(r.colorStops[0]||{}).color||n}function cd(r,n){if("_blank"===n||"blank"===n){var t=window.open();t.opener=null,t.location.href=r}else window.open(r,n)}var hd=De,i_=["left","right","top","bottom","width","height"],Kl=[["width","left","right"],["height","top","bottom"]];function wp(r,n,t,i,a){var o=0,l=0;null==i&&(i=1/0),null==a&&(a=1/0);var u=0;n.eachChild(function(c,h){var m,y,f=c.getBoundingRect(),p=n.childAt(h+1),v=p&&p.getBoundingRect();if("horizontal"===r){var C=f.width+(v?-v.x+f.x:0);(m=o+C)>i||c.newline?(o=0,m=C,l+=u+t,u=f.height):u=Math.max(u,f.height)}else{var T=f.height+(v?-v.y+f.y:0);(y=l+T)>a||c.newline?(o+=u+t,l=0,y=T,u=f.width):u=Math.max(u,f.width)}c.newline||(c.x=o,c.y=l,c.markRedraw(),"horizontal"===r?o=m+t:l=y+t)})}var $l=wp;function ui(r,n,t){t=Ql(t||0);var i=n.width,a=n.height,o=Ht(r.left,i),l=Ht(r.top,a),u=Ht(r.right,i),c=Ht(r.bottom,a),h=Ht(r.width,i),f=Ht(r.height,a),p=t[2]+t[0],v=t[1]+t[3],m=r.aspect;switch(isNaN(h)&&(h=i-u-v-o),isNaN(f)&&(f=a-c-p-l),null!=m&&(isNaN(h)&&isNaN(f)&&(m>i/a?h=.8*i:f=.8*a),isNaN(h)&&(h=m*f),isNaN(f)&&(f=h/m)),isNaN(o)&&(o=i-u-h-v),isNaN(l)&&(l=a-c-f-p),r.left||r.right){case"center":o=i/2-h/2-t[3];break;case"right":o=i-h-v}switch(r.top||r.bottom){case"middle":case"center":l=a/2-f/2-t[0];break;case"bottom":l=a-f-p}o=o||0,l=l||0,isNaN(h)&&(h=i-v-o-(u||0)),isNaN(f)&&(f=a-p-l-(c||0));var y=new Mn(o+t[3],l+t[0],h,f);return y.margin=t,y}function dd(r,n,t,i,a,o){var h,l=!a||!a.hv||a.hv[0],u=!a||!a.hv||a.hv[1],c=a&&a.boundingMode||"all";if((o=o||r).x=r.x,o.y=r.y,!l&&!u)return!1;if("raw"===c)h="group"===r.type?new Mn(0,0,+n.width||0,+n.height||0):r.getBoundingRect();else if(h=r.getBoundingRect(),r.needLocalTransform()){var f=r.getLocalTransform();(h=h.clone()).applyTransform(f)}var p=ui(Dt({width:h.width,height:h.height},n),t,i),v=l?p.x-h.x:0,m=u?p.y-h.y:0;return"raw"===c?(o.x=v,o.y=m):(o.x+=v,o.y+=m),o===r&&r.markRedraw(),!0}function Wc(r){var n=r.layoutMode||r.constructor.layoutMode;return tt(n)?n:n?{type:n}:null}function il(r,n,t){var i=t&&t.ignoreSize;!we(i)&&(i=[i,i]);var a=l(Kl[0],0),o=l(Kl[1],1);function l(f,p){var v={},m=0,y={},C=0;if(hd(f,function(N){y[N]=r[N]}),hd(f,function(N){u(n,N)&&(v[N]=y[N]=n[N]),c(v,N)&&m++,c(y,N)&&C++}),i[p])return c(n,f[1])?y[f[2]]=null:c(n,f[2])&&(y[f[1]]=null),y;if(2===C||!m)return y;if(m>=2)return v;for(var z=0;z<f.length;z++){var E=f[z];if(!u(v,E)&&u(r,E)){v[E]=r[E];break}}return v}function u(f,p){return f.hasOwnProperty(p)}function c(f,p){return null!=f[p]&&"auto"!==f[p]}function h(f,p,v){hd(f,function(m){p[m]=v[m]})}h(Kl[0],r,a),h(Kl[1],r,o)}function jl(r){return a_({},r)}function a_(r,n){return n&&r&&hd(i_,function(t){n.hasOwnProperty(t)&&(r[t]=n[t])}),r}yt(wp,"vertical"),yt(wp,"horizontal");var lx=Xn(),Lu=function(r){function n(t,i,a){var o=r.call(this,t,i,a)||this;return o.uid=Eu("ec_cpt_model"),o}return R(n,r),n.prototype.init=function(t,i,a){this.mergeDefaultAndTheme(t,a)},n.prototype.mergeDefaultAndTheme=function(t,i){var a=Wc(this),o=a?jl(t):{};Zt(t,i.getTheme().get(this.mainType)),Zt(t,this.getDefaultOption()),a&&il(t,o,a)},n.prototype.mergeOption=function(t,i){Zt(this.option,t,!0);var a=Wc(this);a&&il(this.option,t,a)},n.prototype.optionUpdated=function(t,i){},n.prototype.getDefaultOption=function(){var t=this.constructor;if(!function M1(r){return!(!r||!r[Uv])}(t))return t.defaultOption;var i=lx(this);if(!i.defaultOption){for(var a=[],o=t;o;){var l=o.prototype.defaultOption;l&&a.push(l),o=o.superClass}for(var u={},c=a.length-1;c>=0;c--)u=Zt(u,a[c],!0);i.defaultOption=u}return i.defaultOption},n.prototype.getReferringComponents=function(t,i){var o=t+"Id";return bc(this.ecModel,t,{index:this.get(t+"Index",!0),id:this.get(o,!0)},i)},n.prototype.getBoxLayoutParams=function(){var t=this;return{left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")}},n.prototype.getZLevelKey=function(){return""},n.prototype.setZLevel=function(t){this.option.zlevel=t},n.protoInitialize=((t=n.prototype).type="component",t.id="",t.name="",t.mainType="",t.subType="",void(t.componentIndex=0)),n;var t}(Or);Vv(Lu,Or),Qh(Lu),function QC(r){var n={};r.registerSubTypeDefaulter=function(t,i){var a=ko(t);n[a.main]=i},r.determineSubType=function(t,i){var a=i.type;if(!a){var o=ko(t).main;r.hasSubTypes(t)&&n[o]&&(a=n[o](i))}return a}}(Lu),function qC(r,n){function i(o,l){return o[l]||(o[l]={predecessor:[],successor:[]}),o[l]}r.topologicalTravel=function(o,l,u,c){if(o.length){var h=function t(o){var l={},u=[];return De(o,function(c){var h=i(l,c),p=function a(o,l){var u=[];return De(o,function(c){Ye(l,c)>=0&&u.push(c)}),u}(h.originalDeps=n(c),o);h.entryCount=p.length,0===h.entryCount&&u.push(c),De(p,function(v){Ye(h.predecessor,v)<0&&h.predecessor.push(v);var m=i(l,v);Ye(m.successor,v)<0&&m.successor.push(c)})}),{graph:l,noEntryList:u}}(l),f=h.graph,p=h.noEntryList,v={};for(De(o,function(E){v[E]=!0});p.length;){var m=p.pop(),y=f[m],C=!!v[m];C&&(u.call(c,m,y.originalDeps.slice()),delete v[m]),De(y.successor,C?z:T)}De(v,function(){throw new Error("")})}function T(E){f[E].entryCount--,0===f[E].entryCount&&p.push(E)}function z(E){v[E]=!0,T(E)}}}(Lu,function rw(r){var n=[];return De(Lu.getClassesByMainType(r),function(t){n=n.concat(t.dependencies||t.prototype.dependencies||[])}),n=_t(n,function(t){return ko(t).main}),"dataset"!==r&&Ye(n,"dataset")<=0&&n.unshift("dataset"),n});const Jn=Lu;var o_="";"undefined"!=typeof navigator&&(o_=navigator.platform||"");var Ru="rgba(0, 0, 0, 0.2)";const ux={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Ru,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Ru,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Ru,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Ru,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Ru,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Ru,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:o_.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var s_=Kt(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),eo="original",ea="arrayRows",to="objectRows",Uo="keyedColumns",_s="typedArray",l_="unknown",Vo="column",Nu="row",u_=Xn();function c_(r,n,t){var i={},a=d_(n);if(!a||!r)return i;var f,p,o=[],l=[],c=u_(n.ecModel).datasetMap,h=a.uid+"_"+t.seriesLayoutBy;De(r=r.slice(),function(C,T){var z=tt(C)?C:r[T]={name:C};"ordinal"===z.type&&null==f&&(f=T,p=y(z)),i[z.name]=[]});var v=c.get(h)||c.set(h,{categoryWayDim:p,valueWayDim:0});function m(C,T,z){for(var E=0;E<z;E++)C.push(T+E)}function y(C){var T=C.dimsDef;return T?T.length:1}return De(r,function(C,T){var z=C.name,E=y(C);if(null==f)m(i[z],N=v.valueWayDim,E),m(l,N,E),v.valueWayDim+=E;else if(f===T)m(i[z],0,E),m(o,0,E);else{var N;m(i[z],N=v.categoryWayDim,E),m(l,N,E),v.categoryWayDim+=E}}),o.length&&(i.itemName=o),l.length&&(i.seriesName=l),i}function h_(r,n,t){var i={};if(!d_(r))return i;var u,o=n.sourceFormat,l=n.dimensionsDefine;(o===to||o===Uo)&&De(l,function(f,p){"name"===(tt(f)?f.name:f)&&(u=p)});var c=function(){for(var f={},p={},v=[],m=0,y=Math.min(5,t);m<y;m++){var C=dx(n.data,o,n.seriesLayoutBy,l,n.startIndex,m);v.push(C);var T=3===C;if(T&&null==f.v&&m!==u&&(f.v=m),(null==f.n||f.n===f.v||!T&&3===v[f.n])&&(f.n=m),z(f)&&3!==v[f.n])return f;T||(2===C&&null==p.v&&m!==u&&(p.v=m),(null==p.n||p.n===p.v)&&(p.n=m))}function z(E){return null!=E.v&&null!=E.n}return z(f)?f:z(p)?p:null}();if(c){i.value=[c.v];var h=null!=u?u:c.n;i.itemName=[h],i.seriesName=[h]}return i}function d_(r){if(!r.get("data",!0))return bc(r.ecModel,"dataset",{index:r.get("datasetIndex",!0),id:r.get("datasetId",!0)},_i).models[0]}function hx(r,n){return dx(r.data,r.sourceFormat,r.seriesLayoutBy,r.dimensionsDefine,r.startIndex,n)}function dx(r,n,t,i,a,o){var l,c,h;if(ln(r))return 3;if(i){var f=i[o];tt(f)?(c=f.name,h=f.type):Qe(f)&&(c=f)}if(null!=h)return"ordinal"===h?1:3;if(n===ea){var p=r;if(t===Nu){for(var v=p[o],m=0;m<(v||[]).length&&m<5;m++)if(null!=(l=X(v[a+m])))return l}else for(m=0;m<p.length&&m<5;m++){var y=p[a+m];if(y&&null!=(l=X(y[o])))return l}}else if(n===to){var C=r;if(!c)return 3;for(m=0;m<C.length&&m<5;m++)if((T=C[m])&&null!=(l=X(T[c])))return l}else if(n===Uo){if(!c)return 3;if(!(v=r[c])||ln(v))return 3;for(m=0;m<v.length&&m<5;m++)if(null!=(l=X(v[m])))return l}else if(n===eo){var E=r;for(m=0;m<E.length&&m<5;m++){var T,N=Bi(T=E[m]);if(!we(N))return 3;if(null!=(l=X(N[o])))return l}}function X(ve){var ce=Qe(ve);return null!=ve&&isFinite(ve)&&""!==ve?ce?2:3:ce&&"-"!==ve?1:void 0}return 3}var f_=Kt(),p_=Xn(),px=Xn(),g_=function(){function r(){}return r.prototype.getColorFromPalette=function(n,t,i){var a=Dr(this.get("color",!0)),o=this.get("colorLayer",!0);return m_(this,p_,a,o,n,t,i)},r.prototype.clearColorPalette=function(){!function gx(r,n){n(r).paletteIdx=0,n(r).paletteNameMap={}}(this,p_)},r}();function v_(r,n,t,i){var a=Dr(r.get(["aria","decal","decals"]));return m_(r,px,a,null,n,t,i)}function m_(r,n,t,i,a,o,l){var u=n(o=o||r),c=u.paletteIdx||0,h=u.paletteNameMap=u.paletteNameMap||{};if(h.hasOwnProperty(a))return h[a];var f=null!=l&&i?function ow(r,n){for(var t=r.length,i=0;i<t;i++)if(r[i].length>n)return r[i];return r[t-1]}(i,l):t;if((f=f||t)&&f.length){var p=f[c];return a&&(h[a]=p),u.paletteIdx=(c+1)%f.length,p}}var Ap,Gc,__,vx="\0_ec_inner",_x=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return R(n,r),n.prototype.init=function(t,i,a,o,l,u){o=o||{},this.option=null,this._theme=new Or(o),this._locale=new Or(l),this._optionManager=u},n.prototype.setOption=function(t,i,a){var o=Ep(i);this._optionManager.setOption(t,a,o),this._resetOption(null,o)},n.prototype.resetOption=function(t,i){return this._resetOption(t,Ep(i))},n.prototype._resetOption=function(t,i){var a=!1,o=this._optionManager;if(!t||"recreate"===t){var l=o.mountOption("recreate"===t);this.option&&"recreate"!==t?(this.restoreData(),this._mergeOption(l,i)):__(this,l),a=!0}if(("timeline"===t||"media"===t)&&this.restoreData(),!t||"recreate"===t||"timeline"===t){var u=o.getTimelineOption(this);u&&(a=!0,this._mergeOption(u,i))}if(!t||"recreate"===t||"media"===t){var c=o.getMediaOption(this);c.length&&De(c,function(h){a=!0,this._mergeOption(h,i)},this)}return a},n.prototype.mergeOption=function(t){this._mergeOption(t,null)},n.prototype._mergeOption=function(t,i){var a=this.option,o=this._componentsMap,l=this._componentsCount,u=[],c=Kt(),h=i&&i.replaceMergeMainTypeMap;(function cx(r){u_(r).datasetMap=Kt()})(this),De(t,function(p,v){null!=p&&(Jn.hasClass(v)?v&&(u.push(v),c.set(v,!0)):a[v]=null==a[v]?Nt(p):Zt(a[v],p,!0))}),h&&h.each(function(p,v){Jn.hasClass(v)&&!c.get(v)&&(u.push(v),c.set(v,!0))}),Jn.topologicalTravel(u,Jn.getAllClassMainTypes(),function f(p){var v=function fx(r,n,t){var i=f_.get(n);if(!i)return t;var a=i(r);return a?t.concat(a):t}(this,p,Dr(t[p])),m=o.get(p),C=Nv(m,v,m?h&&h.get(p)?"replaceMerge":"normalMerge":"replaceAll");(function x1(r,n,t){De(r,function(i){var a=i.newOption;tt(a)&&(i.keyInfo.mainType=n,i.keyInfo.subType=function T1(r,n,t,i){return n.type?n.type:t?t.subType:i.determineSubType(r,n)}(n,a,i.existing,t))})})(C,p,Jn),a[p]=null,o.set(p,null),l.set(p,0);var N,T=[],z=[],E=0;De(C,function(ve,ce){var _e=ve.existing,ze=ve.newOption;if(ze){var Le=Jn.getClass(p,ve.keyInfo.subType,!("series"===p));if(!Le)return;if("tooltip"===p){if(N)return;N=!0}if(_e&&_e.constructor===Le)_e.name=ve.keyInfo.name,_e.mergeOption(ze,this),_e.optionUpdated(ze,!1);else{var He=Ge({componentIndex:ce},ve.keyInfo);Ge(_e=new Le(ze,this,this,He),He),ve.brandNew&&(_e.__requireNewView=!0),_e.init(ze,this,this),_e.optionUpdated(null,!0)}}else _e&&(_e.mergeOption({},this),_e.optionUpdated({},!1));_e?(T.push(_e.option),z.push(_e),E++):(T.push(void 0),z.push(void 0))},this),a[p]=T,o.set(p,z),l.set(p,E),"series"===p&&Ap(this)},this),this._seriesIndices||Ap(this)},n.prototype.getOption=function(){var t=Nt(this.option);return De(t,function(i,a){if(Jn.hasClass(a)){for(var o=Dr(i),l=o.length,u=!1,c=l-1;c>=0;c--)o[c]&&!xc(o[c])?u=!0:(o[c]=null,!u&&l--);o.length=l,t[a]=o}}),delete t[vx],t},n.prototype.getTheme=function(){return this._theme},n.prototype.getLocaleModel=function(){return this._locale},n.prototype.setUpdatePayload=function(t){this._payload=t},n.prototype.getUpdatePayload=function(){return this._payload},n.prototype.getComponent=function(t,i){var a=this._componentsMap.get(t);if(a){var o=a[i||0];if(o)return o;if(null==i)for(var l=0;l<a.length;l++)if(a[l])return a[l]}},n.prototype.queryComponents=function(t){var i=t.mainType;if(!i)return[];var c,a=t.index,o=t.id,l=t.name,u=this._componentsMap.get(i);return u&&u.length?(null!=a?(c=[],De(Dr(a),function(h){u[h]&&c.push(u[h])})):c=null!=o?yx("id",o,u):null!=l?yx("name",l,u):_n(u,function(h){return!!h}),Cx(c,t)):[]},n.prototype.findComponents=function(t){var a=t.mainType,o=function u(h){var f=a+"Index",p=a+"Id",v=a+"Name";return!h||null==h[f]&&null==h[p]&&null==h[v]?null:{mainType:a,index:h[f],id:h[p],name:h[v]}}(t.query);return function c(h){return t.filter?_n(h,t.filter):h}(Cx(o?this.queryComponents(o):_n(this._componentsMap.get(a),function(h){return!!h}),t))},n.prototype.eachComponent=function(t,i,a){var o=this._componentsMap;if(Pe(t)){var l=i,u=t;o.each(function(p,v){for(var m=0;p&&m<p.length;m++){var y=p[m];y&&u.call(l,v,y,y.componentIndex)}})}else for(var c=Qe(t)?o.get(t):tt(t)?this.findComponents(t):null,h=0;c&&h<c.length;h++){var f=c[h];f&&i.call(a,f,f.componentIndex)}},n.prototype.getSeriesByName=function(t){var i=Si(t,null);return _n(this._componentsMap.get("series"),function(a){return!!a&&null!=i&&a.name===i})},n.prototype.getSeriesByIndex=function(t){return this._componentsMap.get("series")[t]},n.prototype.getSeriesByType=function(t){return _n(this._componentsMap.get("series"),function(i){return!!i&&i.subType===t})},n.prototype.getSeries=function(){return _n(this._componentsMap.get("series"),function(t){return!!t})},n.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},n.prototype.eachSeries=function(t,i){Gc(this),De(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];t.call(i,o,a)},this)},n.prototype.eachRawSeries=function(t,i){De(this._componentsMap.get("series"),function(a){a&&t.call(i,a,a.componentIndex)})},n.prototype.eachSeriesByType=function(t,i,a){Gc(this),De(this._seriesIndices,function(o){var l=this._componentsMap.get("series")[o];l.subType===t&&i.call(a,l,o)},this)},n.prototype.eachRawSeriesByType=function(t,i,a){return De(this.getSeriesByType(t),i,a)},n.prototype.isSeriesFiltered=function(t){return Gc(this),null==this._seriesIndicesMap.get(t.componentIndex)},n.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},n.prototype.filterSeries=function(t,i){Gc(this);var a=[];De(this._seriesIndices,function(o){var l=this._componentsMap.get("series")[o];t.call(i,l,o)&&a.push(o)},this),this._seriesIndices=a,this._seriesIndicesMap=Kt(a)},n.prototype.restoreData=function(t){Ap(this);var i=this._componentsMap,a=[];i.each(function(o,l){Jn.hasClass(l)&&a.push(l)}),Jn.topologicalTravel(a,Jn.getAllClassMainTypes(),function(o){De(i.get(o),function(l){l&&("series"!==o||!function lw(r,n){if(n){var t=n.seriesIndex,i=n.seriesId,a=n.seriesName;return null!=t&&r.componentIndex!==t||null!=i&&r.id!==i||null!=a&&r.name!==a}}(l,t))&&l.restoreData()})})},n.internalField=(Ap=function(t){var i=t._seriesIndices=[];De(t._componentsMap.get("series"),function(a){a&&i.push(a.componentIndex)}),t._seriesIndicesMap=Kt(i)},Gc=function(t){},void(__=function(t,i){t.option={},t.option[vx]=1,t._componentsMap=Kt({series:[]}),t._componentsCount=Kt();var a=i.aria;tt(a)&&null==a.enabled&&(a.enabled=!0),function uw(r,n){var t=r.color&&!r.colorLayer;De(n,function(i,a){"colorLayer"===a&&t||Jn.hasClass(a)||("object"==typeof i?r[a]=r[a]?Zt(r[a],i,!1):Nt(i):null==r[a]&&(r[a]=i))})}(i,t._theme.option),Zt(i,ux,!1),t._mergeOption(i,null)})),n}(Or);function yx(r,n,t){if(we(n)){var i=Kt();return De(n,function(o){null!=o&&null!=Si(o,null)&&i.set(o,!0)}),_n(t,function(o){return o&&i.get(o[r])})}var a=Si(n,null);return _n(t,function(o){return o&&null!=a&&o[r]===a})}function Cx(r,n){return n.hasOwnProperty("subType")?_n(r,function(t){return t&&t.subType===n.subType}):r}function Ep(r){var n=Kt();return r&&De(Dr(r.replaceMerge),function(t){n.set(t,!0)}),{replaceMergeMainTypeMap:n}}Qt(_x,g_);const C_=_x;var cw=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"];const xx=function r(n){De(cw,function(t){this[t]=qe(n[t],n)},this)};var x_={},Tx=function(){function r(){this._coordinateSystems=[]}return r.prototype.create=function(n,t){var i=[];De(x_,function(a,o){var l=a.create(n,t);i=i.concat(l||[])}),this._coordinateSystems=i},r.prototype.update=function(n,t){De(this._coordinateSystems,function(i){i.update&&i.update(n,t)})},r.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},r.register=function(n,t){x_[n]=t},r.get=function(n){return x_[n]},r}();const Fu=Tx;var bx=/^(min|max)?(.+)$/,T_=function(){function r(n){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=n}return r.prototype.setOption=function(n,t,i){n&&(De(Dr(n.series),function(l){l&&l.data&&ln(l.data)&&Yi(l.data)}),De(Dr(n.dataset),function(l){l&&l.source&&ln(l.source)&&Yi(l.source)})),n=Nt(n);var a=this._optionBackup,o=function Sx(r,n,t){var a,o,i=[],l=r.baseOption,u=r.timeline,c=r.options,h=r.media,f=!!r.media,p=!!(c||u||l&&l.timeline);function v(m){De(n,function(y){y(m,t)})}return l?(o=l).timeline||(o.timeline=u):((p||f)&&(r.options=r.media=null),o=r),f&&we(h)&&De(h,function(m){m&&m.option&&(m.query?i.push(m):a||(a=m))}),v(o),De(c,function(m){return v(m)}),De(i,function(m){return v(m.option)}),{baseOption:o,timelineOptions:c||[],mediaDefault:a,mediaList:i}}(n,t,!a);this._newBaseOption=o.baseOption,a?(o.timelineOptions.length&&(a.timelineOptions=o.timelineOptions),o.mediaList.length&&(a.mediaList=o.mediaList),o.mediaDefault&&(a.mediaDefault=o.mediaDefault)):this._optionBackup=o},r.prototype.mountOption=function(n){var t=this._optionBackup;return this._timelineOptions=t.timelineOptions,this._mediaList=t.mediaList,this._mediaDefault=t.mediaDefault,this._currentMediaIndices=[],Nt(n?t.baseOption:this._newBaseOption)},r.prototype.getTimelineOption=function(n){var t,i=this._timelineOptions;if(i.length){var a=n.getComponent("timeline");a&&(t=Nt(i[a.getCurrentIndex()]))}return t},r.prototype.getMediaOption=function(n){var t=this._api.getWidth(),i=this._api.getHeight(),a=this._mediaList,o=this._mediaDefault,l=[],u=[];if(!a.length&&!o)return u;for(var c=0,h=a.length;c<h;c++)zx(a[c].query,t,i)&&l.push(c);return!l.length&&o&&(l=[-1]),l.length&&!function dw(r,n){return r.join(",")===n.join(",")}(l,this._currentMediaIndices)&&(u=_t(l,function(f){return Nt(-1===f?o.option:a[f].option)})),this._currentMediaIndices=l,u},r}();function zx(r,n,t){var i={width:n,height:t,aspectratio:n/t},a=!0;return De(r,function(o,l){var u=l.match(bx);if(u&&u[1]&&u[2]){var c=u[1],h=u[2].toLowerCase();(function Dx(r,n,t){return"min"===t?r>=n:"max"===t?r<=n:r===n})(i[h],o,c)||(a=!1)}}),a}const fw=T_;var Ho=De,fd=tt,b_=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function Mp(r){var n=r&&r.itemStyle;if(n)for(var t=0,i=b_.length;t<i;t++){var a=b_[t],o=n.normal,l=n.emphasis;o&&o[a]&&(r[a]=r[a]||{},r[a].normal?Zt(r[a].normal,o[a]):r[a].normal=o[a],o[a]=null),l&&l[a]&&(r[a]=r[a]||{},r[a].emphasis?Zt(r[a].emphasis,l[a]):r[a].emphasis=l[a],l[a]=null)}}function sa(r,n,t){if(r&&r[n]&&(r[n].normal||r[n].emphasis)){var i=r[n].normal,a=r[n].emphasis;i&&(t?(r[n].normal=r[n].emphasis=null,Dt(r[n],i)):r[n]=i),a&&(r.emphasis=r.emphasis||{},r.emphasis[n]=a,a.focus&&(r.emphasis.focus=a.focus),a.blurScope&&(r.emphasis.blurScope=a.blurScope))}}function Jc(r){sa(r,"itemStyle"),sa(r,"lineStyle"),sa(r,"areaStyle"),sa(r,"label"),sa(r,"labelLine"),sa(r,"upperLabel"),sa(r,"edgeLabel")}function zi(r,n){var t=fd(r)&&r[n],i=fd(t)&&t.textStyle;if(i)for(var a=0,o=Lv.length;a<o;a++){var l=Lv[a];i.hasOwnProperty(l)&&(t[l]=i[l])}}function So(r){r&&(Jc(r),zi(r,"label"),r.emphasis&&zi(r.emphasis,"label"))}function ys(r){return we(r)?r:r?[r]:[]}function Ex(r){return(we(r)?r[0]:r)||{}}function Px(r){r&&De(gw,function(n){n[0]in r&&!(n[1]in r)&&(r[n[1]]=r[n[0]])})}var gw=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],vw=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],Op=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function Bu(r){var n=r&&r.itemStyle;if(n)for(var t=0;t<Op.length;t++){var i=Op[t][1];null!=n[i]&&(n[Op[t][0]]=n[i])}}function Pp(r){!r||"edge"===r.alignTo&&null!=r.margin&&null==r.edgeDistance&&(r.edgeDistance=r.margin)}function S_(r){!r||r.downplay&&!r.blur&&(r.blur=r.downplay)}function jr(r,n){if(r)for(var t=0;t<r.length;t++)n(r[t]),r[t]&&jr(r[t].children,n)}function Ip(r,n){(function Mx(r,n){Ho(ys(r.series),function(i){fd(i)&&function Ax(r){if(fd(r)){Mp(r),Jc(r),zi(r,"label"),zi(r,"upperLabel"),zi(r,"edgeLabel"),r.emphasis&&(zi(r.emphasis,"label"),zi(r.emphasis,"upperLabel"),zi(r.emphasis,"edgeLabel"));var n=r.markPoint;n&&(Mp(n),So(n));var t=r.markLine;t&&(Mp(t),So(t));var i=r.markArea;i&&So(i);var a=r.data;if("graph"===r.type){a=a||r.nodes;var o=r.links||r.edges;if(o&&!ln(o))for(var l=0;l<o.length;l++)So(o[l]);De(r.categories,function(h){Jc(h)})}if(a&&!ln(a))for(l=0;l<a.length;l++)So(a[l]);if((n=r.markPoint)&&n.data){var u=n.data;for(l=0;l<u.length;l++)So(u[l])}if((t=r.markLine)&&t.data){var c=t.data;for(l=0;l<c.length;l++)we(c[l])?(So(c[l][0]),So(c[l][1])):So(c[l])}"gauge"===r.type?(zi(r,"axisLabel"),zi(r,"title"),zi(r,"detail")):"treemap"===r.type?(sa(r.breadcrumb,"itemStyle"),De(r.levels,function(h){Jc(h)})):"tree"===r.type&&Jc(r.leaves)}}(i)});var t=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];n&&t.push("valueAxis","categoryAxis","logAxis","timeAxis"),Ho(t,function(i){Ho(ys(r[i]),function(a){a&&(zi(a,"axisLabel"),zi(a.axisPointer,"label"))})}),Ho(ys(r.parallel),function(i){var a=i&&i.parallelAxisDefault;zi(a,"axisLabel"),zi(a&&a.axisPointer,"label")}),Ho(ys(r.calendar),function(i){sa(i,"itemStyle"),zi(i,"dayLabel"),zi(i,"monthLabel"),zi(i,"yearLabel")}),Ho(ys(r.radar),function(i){zi(i,"name"),i.name&&null==i.axisName&&(i.axisName=i.name,delete i.name),null!=i.nameGap&&null==i.axisNameGap&&(i.axisNameGap=i.nameGap,delete i.nameGap)}),Ho(ys(r.geo),function(i){fd(i)&&(So(i),Ho(ys(i.regions),function(a){So(a)}))}),Ho(ys(r.timeline),function(i){So(i),sa(i,"label"),sa(i,"itemStyle"),sa(i,"controlStyle",!0);var a=i.data;we(a)&&De(a,function(o){tt(o)&&(sa(o,"label"),sa(o,"itemStyle"))})}),Ho(ys(r.toolbox),function(i){sa(i,"iconStyle"),Ho(i.feature,function(a){sa(a,"iconStyle")})}),zi(Ex(r.axisPointer),"label"),zi(Ex(r.tooltip).axisPointer,"label")})(r,n),r.series=Dr(r.series),De(r.series,function(t){if(tt(t)){var i=t.type;if("line"===i)null!=t.clipOverflow&&(t.clip=t.clipOverflow);else if("pie"===i||"gauge"===i){if(null!=t.clockWise&&(t.clockwise=t.clockWise),Pp(t.label),(a=t.data)&&!ln(a))for(var o=0;o<a.length;o++)Pp(a[o]);null!=t.hoverOffset&&(t.emphasis=t.emphasis||{},(t.emphasis.scaleSize=null)&&(t.emphasis.scaleSize=t.hoverOffset))}else if("gauge"===i){var l=function Ox(r,n){for(var t=n.split(","),i=r,a=0;a<t.length&&null!=(i=i&&i[t[a]]);a++);return i}(t,"pointer.color");null!=l&&function pw(r,n,t,i){for(var l,a=n.split(","),o=r,u=0;u<a.length-1;u++)null==o[l=a[u]]&&(o[l]={}),o=o[l];(i||null==o[a[u]])&&(o[a[u]]=t)}(t,"itemStyle.color",l)}else if("bar"===i){var a;if(Bu(t),Bu(t.backgroundStyle),Bu(t.emphasis),(a=t.data)&&!ln(a))for(o=0;o<a.length;o++)"object"==typeof a[o]&&(Bu(a[o]),Bu(a[o]&&a[o].emphasis))}else if("sunburst"===i){var u=t.highlightPolicy;u&&(t.emphasis=t.emphasis||{},t.emphasis.focus||(t.emphasis.focus=u)),S_(t),jr(t.data,S_)}else"graph"===i||"sankey"===i?function Ix(r){!r||null!=r.focusNodeAdjacency&&(r.emphasis=r.emphasis||{},null==r.emphasis.focus&&(r.emphasis.focus="adjacency"))}(t):"map"===i&&(t.mapType&&!t.map&&(t.map=t.mapType),t.mapLocation&&Dt(t,t.mapLocation));null!=t.hoverAnimation&&(t.emphasis=t.emphasis||{},t.emphasis&&null==t.emphasis.scale&&(t.emphasis.scale=t.hoverAnimation)),Px(t)}}),r.dataRange&&(r.visualMap=r.dataRange),De(vw,function(t){var i=r[t];i&&(we(i)||(i=[i]),De(i,function(a){Px(a)}))})}function Lx(r){De(r,function(n,t){var i=[],a=[NaN,NaN],l=n.data,u=n.isStackedByIndex;l.modify([n.stackResultDimension,n.stackedOverDimension],function(c,h,f){var v,m,p=l.get(n.stackedDimension,f);if(isNaN(p))return a;u?m=l.getRawIndex(f):v=l.get(n.stackedByDimension,f);for(var y=NaN,C=t-1;C>=0;C--){var T=r[C];if(u||(m=T.data.rawIndexOf(T.stackedByDimension,v)),m>=0){var z=T.data.getByRawIndex(T.stackResultDimension,m);if(p>=0&&z>0||p<=0&&z<0){p=f1(p,z),y=z;break}}}return i[0]=p,i[1]=y,i})})}var pd=function r(n){this.data=n.data||(n.sourceFormat===Uo?{}:[]),this.sourceFormat=n.sourceFormat||l_,this.seriesLayoutBy=n.seriesLayoutBy||Vo,this.startIndex=n.startIndex||0,this.dimensionsDetectedCount=n.dimensionsDetectedCount,this.metaRawOption=n.metaRawOption;var t=this.dimensionsDefine=n.dimensionsDefine;if(t)for(var i=0;i<t.length;i++){var a=t[i];null==a.type&&1===hx(this,i)&&(a.type="ordinal")}};function g(r){return r instanceof pd}function x(r,n,t){t=t||_(r);var i=n.seriesLayoutBy,a=function w(r,n,t,i,a){var o,l;if(!r)return{dimensionsDefine:Re(a),startIndex:l,dimensionsDetectedCount:o};if(n===ea){var u=r;"auto"===i||null==i?at(function(h){null!=h&&"-"!==h&&(Qe(h)?null==l&&(l=1):l=0)},t,u,10):l=Ve(i)?i:i?1:0,!a&&1===l&&(a=[],at(function(h,f){a[f]=null!=h?h+"":""},t,u,1/0)),o=a?a.length:t===Nu?u.length:u[0]?u[0].length:null}else if(n===to)a||(a=function me(r){for(var t,n=0;n<r.length&&!(t=r[n++]););if(t){var i=[];return De(t,function(a,o){i.push(o)}),i}}(r));else if(n===Uo)a||(a=[],De(r,function(h,f){a.push(f)}));else if(n===eo){var c=Bi(r[0]);o=we(c)&&c.length||1}return{startIndex:l,dimensionsDefine:Re(a),dimensionsDetectedCount:o}}(r,t,i,n.sourceHeader,n.dimensions);return new pd({data:r,sourceFormat:t,seriesLayoutBy:i,dimensionsDefine:a.dimensionsDefine,startIndex:a.startIndex,dimensionsDetectedCount:a.dimensionsDetectedCount,metaRawOption:Nt(n)})}function s(r){return new pd({data:r,sourceFormat:ln(r)?_s:eo})}function d(r){return new pd({data:r.data,sourceFormat:r.sourceFormat,seriesLayoutBy:r.seriesLayoutBy,dimensionsDefine:Nt(r.dimensionsDefine),startIndex:r.startIndex,dimensionsDetectedCount:r.dimensionsDetectedCount})}function _(r){var n=l_;if(ln(r))n=_s;else if(we(r)){0===r.length&&(n=ea);for(var t=0,i=r.length;t<i;t++){var a=r[t];if(null!=a){if(we(a)){n=ea;break}if(tt(a)){n=to;break}}}}else if(tt(r))for(var o in r)if(qt(r,o)&&zn(r[o])){n=Uo;break}return n}function Re(r){if(r){var n=Kt();return _t(r,function(t,i){var a={name:(t=tt(t)?t:{name:t}).name,displayName:t.displayName,type:t.type};if(null==a.name)return a;a.name+="",null==a.displayName&&(a.displayName=a.name);var o=n.get(a.name);return o?a.name+="-"+o.count++:n.set(a.name,{count:1}),a})}}function at(r,n,t,i){if(n===Nu)for(var a=0;a<t.length&&a<i;a++)r(t[a]?t[a][0]:null,a);else{var o=t[0]||[];for(a=0;a<o.length&&a<i;a++)r(o[a],a)}}function ft(r){var n=r.sourceFormat;return n===to||n===Uo}var xt,Bt,Ot,Cn,_r,Hi=function(){function r(n,t){var i=g(n)?n:s(n);this._source=i;var a=this._data=i.data;i.sourceFormat===_s&&(this._offset=0,this._dimSize=t,this._data=a),_r(this,a,i)}return r.prototype.getSource=function(){return this._source},r.prototype.count=function(){return 0},r.prototype.getItem=function(n,t){},r.prototype.appendData=function(n){},r.prototype.clean=function(){},r.protoInitialize=function(){var n=r.prototype;n.pure=!1,n.persistent=!0}(),r.internalField=function(){var n;_r=function(l,u,c){var h=c.sourceFormat,f=c.seriesLayoutBy,p=c.startIndex,v=c.dimensionsDefine;if(Ge(l,Cn[Lp(h,f)]),h===_s)l.getItem=t,l.count=a,l.fillStorage=i;else{var y=Yc(h,f);l.getItem=qe(y,null,u,p,v);var C=z_(h,f);l.count=qe(C,null,u,p,v)}};var t=function(l,u){u=u||[];for(var c=this._data,h=this._dimSize,f=h*(l-=this._offset),p=0;p<h;p++)u[p]=c[f+p];return u},i=function(l,u,c,h){for(var f=this._data,p=this._dimSize,v=0;v<p;v++){for(var m=h[v],y=null==m[0]?1/0:m[0],C=null==m[1]?-1/0:m[1],T=u-l,z=c[v],E=0;E<T;E++){var N=f[E*p+v];z[l+E]=N,N<y&&(y=N),N>C&&(C=N)}m[0]=y,m[1]=C}},a=function(){return this._data?this._data.length/this._dimSize:0};function o(l){for(var u=0;u<l.length;u++)this._data.push(l[u])}(n={})[ea+"_"+Vo]={pure:!0,appendData:o},n[ea+"_"+Nu]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},n[to]={pure:!0,appendData:o},n[Uo]={pure:!0,appendData:function(l){var u=this._data;De(l,function(c,h){for(var f=u[h]||(u[h]=[]),p=0;p<(c||[]).length;p++)f.push(c[p])})}},n[eo]={appendData:o},n[_s]={persistent:!1,pure:!0,appendData:function(l){this._data=l},clean:function(){this._offset+=this.count(),this._data=null}},Cn=n}(),r}(),yi=function(r,n,t,i){return r[i]},Zu=((xt={})[ea+"_"+Vo]=function(r,n,t,i){return r[i+n]},xt[ea+"_"+Nu]=function(r,n,t,i,a){i+=n;for(var o=a||[],l=r,u=0;u<l.length;u++){var c=l[u];o[u]=c?c[i]:null}return o},xt[to]=yi,xt[Uo]=function(r,n,t,i,a){for(var o=a||[],l=0;l<t.length;l++){var c=r[t[l].name];o[l]=c?c[i]:null}return o},xt[eo]=yi,xt);function Yc(r,n){return Zu[Lp(r,n)]}var Uu=function(r,n,t){return r.length},gd=((Bt={})[ea+"_"+Vo]=function(r,n,t){return Math.max(0,r.length-n)},Bt[ea+"_"+Nu]=function(r,n,t){var i=r[0];return i?Math.max(0,i.length-n):0},Bt[to]=Uu,Bt[Uo]=function(r,n,t){var a=r[t[0].name];return a?a.length:0},Bt[eo]=Uu,Bt);function z_(r,n){return gd[Lp(r,n)]}var kp=function(r,n,t){return r[n]},Rx=((Ot={})[ea]=kp,Ot[to]=function(r,n,t){return r[t]},Ot[Uo]=kp,Ot[eo]=function(r,n,t){var i=Bi(r);return i instanceof Array?i[n]:i},Ot[_s]=kp,Ot);function w_(r){return Rx[r]}function Lp(r,n){return r===ea?r+"_"+n:r}function Vu(r,n,t){if(r){var i=r.getRawDataItem(n);if(null!=i){var a=r.getStore(),o=a.getSource().sourceFormat;if(null!=t){var l=r.getDimensionIndex(t),u=a.getDimensionProperty(l);return w_(o)(i,l,u)}var c=i;return o===eo&&(c=Bi(i)),c}}}var Nx=/\{@(.+?)\}/g,Rp=function(){function r(){}return r.prototype.getDataParams=function(n,t){var i=this.getData(t),a=this.getRawValue(n,t),o=i.getRawIndex(n),l=i.getName(n),u=i.getRawDataItem(n),c=i.getItemVisual(n,"style"),h=c&&c[i.getItemVisual(n,"drawType")||"fill"],f=c&&c.stroke,p=this.mainType,v="series"===p,m=i.userOutput&&i.userOutput.get();return{componentType:p,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:v?this.subType:null,seriesIndex:this.seriesIndex,seriesId:v?this.id:null,seriesName:v?this.name:null,name:l,dataIndex:o,data:u,dataType:t,value:a,color:h,borderColor:f,dimensionNames:m?m.fullDimensions:null,encode:m?m.encode:null,$vars:["seriesName","name","value"]}},r.prototype.getFormattedLabel=function(n,t,i,a,o,l){t=t||"normal";var u=this.getData(i),c=this.getDataParams(n,i);return l&&(c.value=l.interpolatedValue),null!=a&&we(c.value)&&(c.value=c.value[a]),o||(o=u.getItemModel(n).get("normal"===t?["label","formatter"]:[t,"label","formatter"])),Pe(o)?(c.status=t,c.dimensionIndex=a,o(c)):Qe(o)?zp(o,c).replace(Nx,function(p,v){var m=v.length,y=v;"["===y.charAt(0)&&"]"===y.charAt(m-1)&&(y=+y.slice(1,m-1));var C=Vu(u,n,y);if(l&&we(l.interpolatedValue)){var T=u.getDimensionIndex(y);T>=0&&(C=l.interpolatedValue[T])}return null!=C?C+"":""}):void 0},r.prototype.getRawValue=function(n,t){return Vu(this.getData(t),n)},r.prototype.formatTooltip=function(n,t,i){},r}();function D_(r){var n,t;return tt(r)?r.type&&(t=r):n=r,{text:n,frag:t}}function Qc(r){return new Fx(r)}var Fx=function(){function r(n){this._reset=(n=n||{}).reset,this._plan=n.plan,this._count=n.count,this._onDirty=n.onDirty,this._dirty=!0}return r.prototype.perform=function(n){var o,t=this._upstream,i=n&&n.skip;if(this._dirty&&t){var a=this.context;a.data=a.outputData=t.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!i&&(o=this._plan(this.context));var p,l=f(this._modBy),u=this._modDataCount||0,c=f(n&&n.modBy),h=n&&n.modDataCount||0;function f(E){return!(E>=1)&&(E=1),E}(l!==c||u!==h)&&(o="reset"),(this._dirty||"reset"===o)&&(this._dirty=!1,p=this._doReset(i)),this._modBy=c,this._modDataCount=h;var v=n&&n.step;if(this._dueEnd=t?t._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var m=this._dueIndex,y=Math.min(null!=v?this._dueIndex+v:1/0,this._dueEnd);if(!i&&(p||m<y)){var C=this._progress;if(we(C))for(var T=0;T<C.length;T++)this._doProgress(C[T],m,y,c,h);else this._doProgress(C,m,y,c,h)}this._dueIndex=y,this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:y}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()},r.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},r.prototype._doProgress=function(n,t,i,a,o){A_.reset(t,i,a,o),this._callingProgress=n,this._callingProgress({start:t,end:i,count:i-t,next:A_.next},this.context)},r.prototype._doReset=function(n){var t,i;this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null,!n&&this._reset&&((t=this._reset(this.context))&&t.progress&&(i=t.forceFirstProgress,t=t.progress),we(t)&&!t.length&&(t=null)),this._progress=t,this._modBy=this._modDataCount=null;var a=this._downstream;return a&&a.dirty(),i},r.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},r.prototype.pipe=function(n){(this._downstream!==n||this._dirty)&&(this._downstream=n,n._upstream=this,n.dirty())},r.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},r.prototype.getUpstream=function(){return this._upstream},r.prototype.getDownstream=function(){return this._downstream},r.prototype.setOutputEnd=function(n){this._outputDueEnd=this._settedOutputEnd=n},r}(),A_=function(){var r,n,t,i,a,o={reset:function(c,h,f,p){n=c,r=h,t=f,i=p,a=Math.ceil(i/t),o.next=t>1&&i>0?u:l}};return o;function l(){return n<r?n++:null}function u(){var c=n%a*t+Math.ceil(n/a),h=n>=r?null:c<i?c:n;return n++,h}}();function Tr(r){throw new Error(r)}function Hu(r,n){var t=n&&n.type;return"ordinal"===t?r:("time"===t&&!Ve(r)&&null!=r&&"-"!==r&&(r=+Aa(r)),null==r||""===r?NaN:+r)}"undefined"!=typeof console&&console.warn&&console;var qL=Kt({number:function(r){return parseFloat(r)},time:function(r){return+Aa(r)},trim:function(r){return Qe(r)?Ir(r):r}});function yw(r){return qL.get(r)}var Cw={lt:function(r,n){return r<n},lte:function(r,n){return r<=n},gt:function(r,n){return r>n},gte:function(r,n){return r>=n}},KL=function(){function r(n,t){Ve(t)||Tr(""),this._opFn=Cw[n],this._rvalFloat=Io(t)}return r.prototype.evaluate=function(n){return Ve(n)?this._opFn(n,this._rvalFloat):this._opFn(Io(n),this._rvalFloat)},r}(),xw=function(){function r(n,t){var i="desc"===n;this._resultLT=i?1:-1,null==t&&(t=i?"min":"max"),this._incomparable="min"===t?-1/0:1/0}return r.prototype.evaluate=function(n,t){var i=Ve(n)?n:Io(n),a=Ve(t)?t:Io(t),o=isNaN(i),l=isNaN(a);if(o&&(i=this._incomparable),l&&(a=this._incomparable),o&&l){var u=Qe(n),c=Qe(t);u&&(i=c?n:0),c&&(a=u?t:0)}return i<a?this._resultLT:i>a?-this._resultLT:0},r}(),$L=function(){function r(n,t){this._rval=t,this._isEQ=n,this._rvalTypeof=typeof t,this._rvalFloat=Io(t)}return r.prototype.evaluate=function(n){var t=n===this._rval;if(!t){var i=typeof n;i!==this._rvalTypeof&&("number"===i||"number"===this._rvalTypeof)&&(t=Io(n)===this._rvalFloat)}return this._isEQ?t:!t},r}();function jL(r,n){return"eq"===r||"ne"===r?new $L("eq"===r,n):qt(Cw,r)?new KL(r,n):null}var XL=function(){function r(){}return r.prototype.getRawData=function(){throw new Error("not supported")},r.prototype.getRawDataItem=function(n){throw new Error("not supported")},r.prototype.cloneRawData=function(){},r.prototype.getDimensionInfo=function(n){},r.prototype.cloneAllDimensionInfo=function(){},r.prototype.count=function(){},r.prototype.retrieveValue=function(n,t){},r.prototype.retrieveValueFromItem=function(n,t){},r.prototype.convertValue=function(n,t){return Hu(n,t)},r}();function tR(r){return Vx(r.sourceFormat)||Tr(""),r.data}function nR(r){var n=r.sourceFormat,t=r.data;if(Vx(n)||Tr(""),n===ea){for(var a=[],o=0,l=t.length;o<l;o++)a.push(t[o].slice());return a}if(n===to){for(a=[],o=0,l=t.length;o<l;o++)a.push(Ge({},t[o]));return a}}function rR(r,n,t){if(null!=t){if(Ve(t)||!isNaN(t)&&!qt(n,t))return r[t];if(qt(n,t))return n[t]}}function iR(r){return Nt(r)}var Tw=Kt();function sR(r,n,t,i){n.length||Tr(""),tt(r)||Tr("");var l=Tw.get(r.type);l||Tr("");var u=_t(n,function(f){return function eR(r,n){var t=new XL,i=r.data,a=t.sourceFormat=r.sourceFormat,o=r.startIndex;r.seriesLayoutBy!==Vo&&Tr("");var u=[],c={},h=r.dimensionsDefine;if(h)De(h,function(C,T){var z=C.name,E={index:T,name:z,displayName:C.displayName};u.push(E),null!=z&&(qt(c,z)&&Tr(""),c[z]=E)});else for(var f=0;f<r.dimensionsDetectedCount;f++)u.push({index:f});var p=Yc(a,Vo);n.__isBuiltIn&&(t.getRawDataItem=function(C){return p(i,o,u,C)},t.getRawData=qe(tR,null,r)),t.cloneRawData=qe(nR,null,r);var v=z_(a,Vo);t.count=qe(v,null,i,o,u);var m=w_(a);t.retrieveValue=function(C,T){var z=p(i,o,u,C);return y(z,T)};var y=t.retrieveValueFromItem=function(C,T){if(null!=C){var z=u[T];if(z)return m(C,T,z.name)}};return t.getDimensionInfo=qe(rR,null,u,c),t.cloneAllDimensionInfo=qe(iR,null,u),t}(f,l)});return _t(Dr(l.transform({upstream:u[0],upstreamList:u,config:Nt(r.config)})),function(f,p){tt(f)||Tr(""),f.data||Tr(""),Vx(_(f.data))||Tr("");var y,C=n[0];if(C&&0===p&&!f.dimensions){var T=C.startIndex;T&&(f.data=C.data.slice(0,T).concat(f.data)),y={seriesLayoutBy:Vo,sourceHeader:T,dimensions:C.metaRawOption.dimensions}}else y={seriesLayoutBy:Vo,sourceHeader:0,dimensions:f.dimensions};return x(f.data,y,null)})}function Vx(r){return r===ea||r===to}var Hx,M_="undefined",lR=typeof Uint32Array===M_?Array:Uint32Array,uR=typeof Uint16Array===M_?Array:Uint16Array,bw=typeof Int32Array===M_?Array:Int32Array,Sw=typeof Float64Array===M_?Array:Float64Array,zw={float:Sw,int:bw,ordinal:Array,number:Array,time:Sw};function Fp(r){return r>65535?lR:uR}function cR(r){var n=r.constructor;return n===Array?r.slice():new n(r)}function ww(r,n,t,i,a){var o=zw[t||"float"];if(a){var l=r[n],u=l&&l.length;if(u!==i){for(var c=new o(i),h=0;h<u;h++)c[h]=l[h];r[n]=c}}else r[n]=new o(i)}var hR=function(){function r(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=Kt()}return r.prototype.initData=function(n,t,i){this._provider=n,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var a=n.getSource(),o=this.defaultDimValueGetter=Hx[a.sourceFormat];this._dimValueGetter=i||o,this._rawExtent=[],ft(a),this._dimensions=_t(t,function(u){return{type:u.type,property:u.property}}),this._initDataFromProvider(0,n.count())},r.prototype.getProvider=function(){return this._provider},r.prototype.getSource=function(){return this._provider.getSource()},r.prototype.ensureCalculationDimension=function(n,t){var i=this._calcDimNameToIdx,a=this._dimensions,o=i.get(n);if(null!=o){if(a[o].type===t)return o}else o=a.length;return a[o]={type:t},i.set(n,o),this._chunks[o]=new zw[t||"float"](this._rawCount),this._rawExtent[o]=[1/0,-1/0],o},r.prototype.collectOrdinalMeta=function(n,t){var i=this._chunks[n],a=this._dimensions[n],o=this._rawExtent,l=a.ordinalOffset||0,u=i.length;0===l&&(o[n]=[1/0,-1/0]);for(var c=o[n],h=l;h<u;h++){var f=i[h]=t.parseAndCollect(i[h]);isNaN(f)||(c[0]=Math.min(f,c[0]),c[1]=Math.max(f,c[1]))}a.ordinalMeta=t,a.ordinalOffset=u,a.type="ordinal"},r.prototype.getOrdinalMeta=function(n){return this._dimensions[n].ordinalMeta},r.prototype.getDimensionProperty=function(n){var t=this._dimensions[n];return t&&t.property},r.prototype.appendData=function(n){var t=this._provider,i=this.count();t.appendData(n);var a=t.count();return t.persistent||(a+=i),i<a&&this._initDataFromProvider(i,a,!0),[i,a]},r.prototype.appendValues=function(n,t){for(var i=this._chunks,a=this._dimensions,o=a.length,l=this._rawExtent,u=this.count(),c=u+Math.max(n.length,t||0),h=0;h<o;h++)ww(i,h,a[h].type,c,!0);for(var p=[],v=u;v<c;v++)for(var m=v-u,y=0;y<o;y++){var C=Hx.arrayRows.call(this,n[m]||p,a[y].property,m,y);i[y][v]=C;var T=l[y];C<T[0]&&(T[0]=C),C>T[1]&&(T[1]=C)}return this._rawCount=this._count=c,{start:u,end:c}},r.prototype._initDataFromProvider=function(n,t,i){for(var a=this._provider,o=this._chunks,l=this._dimensions,u=l.length,c=this._rawExtent,h=_t(l,function(E){return E.property}),f=0;f<u;f++){var p=l[f];c[f]||(c[f]=[1/0,-1/0]),ww(o,f,p.type,t,i)}if(a.fillStorage)a.fillStorage(n,t,o,c);else for(var v=[],m=n;m<t;m++){v=a.getItem(m,v);for(var y=0;y<u;y++){var C=o[y],T=this._dimValueGetter(v,h[y],m,y);C[m]=T;var z=c[y];T<z[0]&&(z[0]=T),T>z[1]&&(z[1]=T)}}!a.persistent&&a.clean&&a.clean(),this._rawCount=this._count=t,this._extent=[]},r.prototype.count=function(){return this._count},r.prototype.get=function(n,t){if(!(t>=0&&t<this._count))return NaN;var i=this._chunks[n];return i?i[this.getRawIndex(t)]:NaN},r.prototype.getValues=function(n,t){var i=[],a=[];if(null==t){t=n,n=[];for(var o=0;o<this._dimensions.length;o++)a.push(o)}else a=n;o=0;for(var l=a.length;o<l;o++)i.push(this.get(a[o],t));return i},r.prototype.getByRawIndex=function(n,t){if(!(t>=0&&t<this._rawCount))return NaN;var i=this._chunks[n];return i?i[t]:NaN},r.prototype.getSum=function(n){var i=0;if(this._chunks[n])for(var a=0,o=this.count();a<o;a++){var l=this.get(n,a);isNaN(l)||(i+=l)}return i},r.prototype.getMedian=function(n){var t=[];this.each([n],function(o){isNaN(o)||t.push(o)});var i=t.sort(function(o,l){return o-l}),a=this.count();return 0===a?0:a%2==1?i[(a-1)/2]:(i[a/2]+i[a/2-1])/2},r.prototype.indexOfRawIndex=function(n){if(n>=this._rawCount||n<0)return-1;if(!this._indices)return n;var t=this._indices,i=t[n];if(null!=i&&i<this._count&&i===n)return n;for(var a=0,o=this._count-1;a<=o;){var l=(a+o)/2|0;if(t[l]<n)a=l+1;else{if(!(t[l]>n))return l;o=l-1}}return-1},r.prototype.indicesOfNearest=function(n,t,i){var o=this._chunks[n],l=[];if(!o)return l;null==i&&(i=1/0);for(var u=1/0,c=-1,h=0,f=0,p=this.count();f<p;f++){var m=t-o[this.getRawIndex(f)],y=Math.abs(m);y<=i&&((y<u||y===u&&m>=0&&c<0)&&(u=y,c=m,h=0),m===c&&(l[h++]=f))}return l.length=h,l},r.prototype.getIndices=function(){var n,t=this._indices;if(t){var a=this._count;if((i=t.constructor)===Array){n=new i(a);for(var o=0;o<a;o++)n[o]=t[o]}else n=new i(t.buffer,0,a)}else{var i;for(n=new(i=Fp(this._rawCount))(this.count()),o=0;o<n.length;o++)n[o]=o}return n},r.prototype.filter=function(n,t){if(!this._count)return this;for(var i=this.clone(),a=i.count(),l=new(Fp(i._rawCount))(a),u=[],c=n.length,h=0,f=n[0],p=i._chunks,v=0;v<a;v++){var m=void 0,y=i.getRawIndex(v);if(0===c)m=t(v);else if(1===c)m=t(p[f][y],v);else{for(var T=0;T<c;T++)u[T]=p[n[T]][y];u[T]=v,m=t.apply(null,u)}m&&(l[h++]=y)}return h<a&&(i._indices=l),i._count=h,i._extent=[],i._updateGetRawIdx(),i},r.prototype.selectRange=function(n){var t=this.clone(),i=t._count;if(!i)return this;var a=gn(n),o=a.length;if(!o)return this;var l=t.count(),c=new(Fp(t._rawCount))(l),h=0,f=a[0],p=n[f][0],v=n[f][1],m=t._chunks,y=!1;if(!t._indices){var C=0;if(1===o){for(var T=m[a[0]],z=0;z<i;z++)((E=T[z])>=p&&E<=v||isNaN(E))&&(c[h++]=C),C++;y=!0}else if(2===o){T=m[a[0]];var N=m[a[1]],X=n[a[1]][0],ve=n[a[1]][1];for(z=0;z<i;z++){var ce=N[z];((E=T[z])>=p&&E<=v||isNaN(E))&&(ce>=X&&ce<=ve||isNaN(ce))&&(c[h++]=C),C++}y=!0}}if(!y)if(1===o)for(z=0;z<l;z++){var _e=t.getRawIndex(z);((E=m[a[0]][_e])>=p&&E<=v||isNaN(E))&&(c[h++]=_e)}else for(z=0;z<l;z++){for(var ze=!0,Ee=(_e=t.getRawIndex(z),0);Ee<o;Ee++){var E,Le=a[Ee];((E=m[Le][_e])<n[Le][0]||E>n[Le][1])&&(ze=!1)}ze&&(c[h++]=t.getRawIndex(z))}return h<l&&(t._indices=c),t._count=h,t._extent=[],t._updateGetRawIdx(),t},r.prototype.map=function(n,t){var i=this.clone(n);return this._updateDims(i,n,t),i},r.prototype.modify=function(n,t){this._updateDims(this,n,t)},r.prototype._updateDims=function(n,t,i){for(var a=n._chunks,o=[],l=t.length,u=n.count(),c=[],h=n._rawExtent,f=0;f<t.length;f++)h[t[f]]=[1/0,-1/0];for(var p=0;p<u;p++){for(var v=n.getRawIndex(p),m=0;m<l;m++)c[m]=a[t[m]][v];c[l]=p;var y=i&&i.apply(null,c);if(null!=y)for("object"!=typeof y&&(o[0]=y,y=o),f=0;f<y.length;f++){var C=t[f],T=y[f],z=h[C],E=a[C];E&&(E[v]=T),T<z[0]&&(z[0]=T),T>z[1]&&(z[1]=T)}}},r.prototype.lttbDownSample=function(n,t){var f,p,v,i=this.clone([n],!0),o=i._chunks[n],l=this.count(),u=0,c=Math.floor(1/t),h=this.getRawIndex(0),m=new(Fp(this._rawCount))(Math.min(2*(Math.ceil(l/c)+2),l));m[u++]=h;for(var y=1;y<l-1;y+=c){for(var C=Math.min(y+c,l-1),T=Math.min(y+2*c,l),z=(T+C)/2,E=0,N=C;N<T;N++){var ve=o[X=this.getRawIndex(N)];isNaN(ve)||(E+=ve)}E/=T-C;var ce=y,_e=Math.min(y+c,l),ze=y-1,Ee=o[h];f=-1,v=ce;var Le=-1,ke=0;for(N=ce;N<_e;N++){var X;ve=o[X=this.getRawIndex(N)],isNaN(ve)?(ke++,Le<0&&(Le=X)):(p=Math.abs((ze-z)*(ve-Ee)-(ze-N)*(E-Ee)))>f&&(f=p,v=X)}ke>0&&ke<_e-ce&&(m[u++]=Math.min(Le,v),v=Math.max(Le,v)),m[u++]=v,h=v}return m[u++]=this.getRawIndex(l-1),i._count=u,i._indices=m,i.getRawIndex=this._getRawIdx,i},r.prototype.downSample=function(n,t,i,a){for(var o=this.clone([n],!0),l=o._chunks,u=[],c=Math.floor(1/t),h=l[n],f=this.count(),p=o._rawExtent[n]=[1/0,-1/0],v=new(Fp(this._rawCount))(Math.ceil(f/c)),m=0,y=0;y<f;y+=c){c>f-y&&(u.length=c=f-y);for(var C=0;C<c;C++){var T=this.getRawIndex(y+C);u[C]=h[T]}var z=i(u),E=this.getRawIndex(Math.min(y+a(u,z)||0,f-1));h[E]=z,z<p[0]&&(p[0]=z),z>p[1]&&(p[1]=z),v[m++]=E}return o._count=m,o._indices=v,o._updateGetRawIdx(),o},r.prototype.each=function(n,t){if(this._count)for(var i=n.length,a=this._chunks,o=0,l=this.count();o<l;o++){var u=this.getRawIndex(o);switch(i){case 0:t(o);break;case 1:t(a[n[0]][u],o);break;case 2:t(a[n[0]][u],a[n[1]][u],o);break;default:for(var c=0,h=[];c<i;c++)h[c]=a[n[c]][u];h[c]=o,t.apply(null,h)}}},r.prototype.getDataExtent=function(n){var t=this._chunks[n],i=[1/0,-1/0];if(!t)return i;var l,a=this.count();if(!this._indices)return this._rawExtent[n].slice();if(l=this._extent[n])return l.slice();for(var u=(l=i)[0],c=l[1],h=0;h<a;h++){var p=t[this.getRawIndex(h)];p<u&&(u=p),p>c&&(c=p)}return this._extent[n]=l=[u,c],l},r.prototype.getRawDataItem=function(n){var t=this.getRawIndex(n);if(this._provider.persistent)return this._provider.getItem(t);for(var i=[],a=this._chunks,o=0;o<a.length;o++)i.push(a[o][t]);return i},r.prototype.clone=function(n,t){var i=new r,a=this._chunks,o=n&&cr(n,function(u,c){return u[c]=!0,u},{});if(o)for(var l=0;l<a.length;l++)i._chunks[l]=o[l]?cR(a[l]):a[l];else i._chunks=a;return this._copyCommonProps(i),t||(i._indices=this._cloneIndices()),i._updateGetRawIdx(),i},r.prototype._copyCommonProps=function(n){n._count=this._count,n._rawCount=this._rawCount,n._provider=this._provider,n._dimensions=this._dimensions,n._extent=Nt(this._extent),n._rawExtent=Nt(this._rawExtent)},r.prototype._cloneIndices=function(){if(this._indices){var n=this._indices.constructor,t=void 0;if(n===Array){var i=this._indices.length;t=new n(i);for(var a=0;a<i;a++)t[a]=this._indices[a]}else t=new n(this._indices);return t}return null},r.prototype._getRawIdxIdentity=function(n){return n},r.prototype._getRawIdx=function(n){return n<this._count&&n>=0?this._indices[n]:-1},r.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},r.internalField=function(){function n(t,i,a,o){return Hu(t[o],this._dimensions[o])}Hx={arrayRows:n,objectRows:function(t,i,a,o){return Hu(t[i],this._dimensions[o])},keyedColumns:n,original:function(t,i,a,o){var l=t&&(null==t.value?t:t.value);return Hu(l instanceof Array?l[o]:l,this._dimensions[o])},typedArray:function(t,i,a,o){return t[o]}}}(),r}();const Wx=hR;var Dw=function(){function r(n){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=n}return r.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},r.prototype._setLocalSource=function(n,t){this._sourceList=n,this._upstreamSignList=t,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},r.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},r.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},r.prototype._createSource=function(){this._setLocalSource([],[]);var a,o,n=this._sourceHost,t=this._getUpstreamSourceManagers(),i=!!t.length;if(O_(n)){var l=n,u=void 0,c=void 0,h=void 0;if(i){var f=t[0];f.prepareSource(),u=(h=f.getSource()).data,c=h.sourceFormat,o=[f._getVersionSign()]}else c=ln(u=l.get("data",!0))?_s:eo,o=[];var p=this._getSourceMetaRawOption()||{},v=h&&h.metaRawOption||{},m=$t(p.seriesLayoutBy,v.seriesLayoutBy)||null,y=$t(p.sourceHeader,v.sourceHeader),C=$t(p.dimensions,v.dimensions);a=m!==v.seriesLayoutBy||!!y!=!!v.sourceHeader||C?[x(u,{seriesLayoutBy:m,sourceHeader:y,dimensions:C},c)]:[]}else{var z=n;if(i){var E=this._applyTransform(t);a=E.sourceList,o=E.upstreamSignList}else a=[x(z.get("source",!0),this._getSourceMetaRawOption(),null)],o=[]}this._setLocalSource(a,o)},r.prototype._applyTransform=function(n){var t=this._sourceHost,i=t.get("transform",!0),a=t.get("fromTransformResult",!0);null!=a&&1!==n.length&&Ew("");var l,u=[],c=[];return De(n,function(h){h.prepareSource();var f=h.getSource(a||0);null!=a&&!f&&Ew(""),u.push(f),c.push(h._getVersionSign())}),i?l=function oR(r,n,t){var i=Dr(r),a=i.length;a||Tr("");for(var l=0,u=a;l<u;l++)n=sR(i[l],n),l!==u-1&&(n.length=Math.max(n.length,1));return n}(i,u):null!=a&&(l=[d(u[0])]),{sourceList:l,upstreamSignList:c}},r.prototype._isDirty=function(){if(this._dirty)return!0;for(var n=this._getUpstreamSourceManagers(),t=0;t<n.length;t++){var i=n[t];if(i._isDirty()||this._upstreamSignList[t]!==i._getVersionSign())return!0}},r.prototype.getSource=function(n){var t=this._sourceList[n=n||0];if(!t){var i=this._getUpstreamSourceManagers();return i[0]&&i[0].getSource(n)}return t},r.prototype.getSharedDataStore=function(n){var t=n.makeStoreSchema();return this._innerGetDataStore(t.dimensions,n.source,t.hash)},r.prototype._innerGetDataStore=function(n,t,i){var o=this._storeList,l=o[0];l||(l=o[0]={});var u=l[i];if(!u){var c=this._getUpstreamSourceManagers()[0];O_(this._sourceHost)&&c?u=c._innerGetDataStore(n,t,i):(u=new Wx).initData(new Hi(t,n.length),n),l[i]=u}return u},r.prototype._getUpstreamSourceManagers=function(){var n=this._sourceHost;if(O_(n)){var t=d_(n);return t?[t.getSourceManager()]:[]}return _t(function iw(r){return r.get("transform",!0)||r.get("fromTransformResult",!0)?bc(r.ecModel,"dataset",{index:r.get("fromDatasetIndex",!0),id:r.get("fromDatasetId",!0)},_i).models:[]}(n),function(i){return i.getSourceManager()})},r.prototype._getSourceMetaRawOption=function(){var t,i,a,n=this._sourceHost;if(O_(n))t=n.get("seriesLayoutBy",!0),i=n.get("sourceHeader",!0),a=n.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var o=n;t=o.get("seriesLayoutBy",!0),i=o.get("sourceHeader",!0),a=o.get("dimensions",!0)}return{seriesLayoutBy:t,sourceHeader:i,dimensions:a}},r}();function Aw(r){r.option.transform&&Yi(r.option.transform)}function O_(r){return"series"===r.mainType}function Ew(r){throw new Error(r)}var Mw="line-height:1";function Ow(r,n){var t=r.color||"#6e7079",i=r.fontSize||12,a=r.fontWeight||"400",o=r.color||"#464646",l=r.fontSize||14,u=r.fontWeight||"900";return"html"===n?{nameStyle:"font-size:"+ga(i+"")+"px;color:"+ga(t)+";font-weight:"+ga(a+""),valueStyle:"font-size:"+ga(l+"")+"px;color:"+ga(o)+";font-weight:"+ga(u+"")}:{nameStyle:{fontSize:i,fill:t,fontWeight:a},valueStyle:{fontSize:l,fill:o,fontWeight:u}}}var dR=[0,10,20,30],fR=["","\n","\n\n","\n\n\n"];function Wi(r,n){return n.type=r,n}function Gx(r){return"section"===r.type}function Pw(r){return Gx(r)?pR:gR}function Iw(r){if(Gx(r)){var n=0,t=r.blocks.length,i=t>1||t>0&&!r.noHeader;return De(r.blocks,function(a){var o=Iw(a);o>=n&&(n=o+ +(i&&(!o||Gx(a)&&!a.noHeader)))}),n}return 0}function pR(r,n,t,i){var a=n.noHeader,o=function vR(r){return{html:dR[r],richText:fR[r]}}(Iw(n)),l=[],u=n.blocks||[];ar(!u||we(u)),u=u||[];var c=r.orderMode;if(n.sortBlocks&&c){u=u.slice();var h={valueAsc:"asc",valueDesc:"desc"};if(qt(h,c)){var f=new xw(h[c],null);u.sort(function(y,C){return f.evaluate(y.sortParam,C.sortParam)})}else"seriesDesc"===c&&u.reverse()}De(u,function(y,C){var T=n.valueFormatter,z=Pw(y)(T?Ge(Ge({},r),{valueFormatter:T}):r,y,C>0?o.html:0,i);null!=z&&l.push(z)});var p="richText"===r.renderMode?l.join(o.richText):Jx(l.join(""),a?t:o.html);if(a)return p;var v=bp(n.header,"ordinal",r.useUTC),m=Ow(i,r.renderMode).nameStyle;return"richText"===r.renderMode?Lw(r,v,m)+o.richText+p:Jx('<div style="'+m+";"+Mw+';">'+ga(v)+"</div>"+p,t)}function gR(r,n,t,i){var a=r.renderMode,o=n.noName,l=n.noValue,u=!n.markerType,c=n.name,h=r.useUTC,f=n.valueFormatter||r.valueFormatter||function(X){return _t(X=we(X)?X:[X],function(ve,ce){return bp(ve,we(m)?m[ce]:m,h)})};if(!o||!l){var p=u?"":r.markupStyleCreator.makeTooltipMarker(n.markerType,n.markerColor||"#333",a),v=o?"":bp(c,"ordinal",h),m=n.valueType,y=l?[]:f(n.value),C=!u||!o,T=!u&&o,z=Ow(i,a),E=z.nameStyle,N=z.valueStyle;return"richText"===a?(u?"":p)+(o?"":Lw(r,v,E))+(l?"":function yR(r,n,t,i,a){var o=[a];return t&&o.push({padding:[0,0,0,i?10:20],align:"right"}),r.markupStyleCreator.wrapRichTextStyle(we(n)?n.join("  "):n,o)}(r,y,C,T,N)):Jx((u?"":p)+(o?"":function mR(r,n,t){return'<span style="'+t+";"+(n?"margin-left:2px":"")+'">'+ga(r)+"</span>"}(v,!u,E))+(l?"":function _R(r,n,t,i){return'<span style="'+(n?"float:right;margin-left:"+(t?"10px":"20px"):"")+";"+i+'">'+_t(r=we(r)?r:[r],function(l){return ga(l)}).join("&nbsp;&nbsp;")+"</span>"}(y,C,T,N)),t)}}function kw(r,n,t,i,a,o){if(r)return Pw(r)({useUTC:a,renderMode:t,orderMode:i,markupStyleCreator:n,valueFormatter:r.valueFormatter},r,0,o)}function Jx(r,n){return'<div style="margin: '+n+"px 0 0;"+Mw+';">'+r+'<div style="clear:both"></div></div>'}function Lw(r,n,t){return r.markupStyleCreator.wrapRichTextStyle(n,t)}function Rw(r,n){return ql(r.getData().getItemVisual(n,"style")[r.visualDrawType])}function Nw(r,n){var t=r.get("padding");return null!=t?t:"richText"===n?[8,10]:10}var Yx=function(){function r(){this.richTextStyles={},this._nextStyleNameId=Ev()}return r.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},r.prototype.makeTooltipMarker=function(n,t,i){var a="richText"===i?this._generateStyleName():null,o=r_({color:t,type:n,renderMode:i,markerId:a});return Qe(o)?o:(this.richTextStyles[a]=o.style,o.content)},r.prototype.wrapRichTextStyle=function(n,t){var i={};we(t)?De(t,function(o){return Ge(i,o)}):Ge(i,t);var a=this._generateStyleName();return this.richTextStyles[a]=i,"{"+a+"|"+n+"}"},r}();function Fw(r){var f,p,v,m,n=r.series,t=r.dataIndex,i=r.multipleSeries,a=n.getData(),o=a.mapDimensionsAll("defaultedTooltip"),l=o.length,u=n.getRawValue(t),c=we(u),h=Rw(n,t);if(l>1||c&&!l){var y=function CR(r,n,t,i,a){var o=n.getData(),l=cr(r,function(p,v,m){var y=o.getDimensionInfo(m);return p||y&&!1!==y.tooltip&&null!=y.displayName},!1),u=[],c=[],h=[];function f(p,v){var m=o.getDimensionInfo(v);!m||!1===m.otherDims.tooltip||(l?h.push(Wi("nameValue",{markerType:"subItem",markerColor:a,name:m.displayName,value:p,valueType:m.type})):(u.push(p),c.push(m.type)))}return i.length?De(i,function(p){f(Vu(o,t,p),p)}):De(r,f),{inlineValues:u,inlineValueTypes:c,blocks:h}}(u,n,t,o,h);f=y.inlineValues,p=y.inlineValueTypes,v=y.blocks,m=y.inlineValues[0]}else if(l){var C=a.getDimensionInfo(o[0]);m=f=Vu(a,t,o[0]),p=C.type}else m=f=c?u[0]:u;var T=Pf(n),z=T&&n.name||"",E=a.getName(t),N=i?z:E;return Wi("section",{header:z,noHeader:i||!T,sortParam:m,blocks:[Wi("nameValue",{markerType:"item",markerColor:h,name:N,noName:!Ir(N),value:f,valueType:p})].concat(v||[])})}var Wu=Xn();function P_(r,n){return r.getName(n)||r.getId(n)}var I_="__universalTransitionEnabled",k_=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t._selectedDataIndicesMap={},t}return R(n,r),n.prototype.init=function(t,i,a){this.seriesIndex=this.componentIndex,this.dataTask=Qc({count:TR,reset:bR}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,a),(Wu(this).sourceManager=new Dw(this)).prepareSource();var l=this.getInitialData(t,a);Zw(l,this),this.dataTask.context.data=l,Wu(this).dataBeforeProcessed=l,Bw(this),this._initSelectedMapFromData(l)},n.prototype.mergeDefaultAndTheme=function(t,i){var a=Wc(this),o=a?jl(t):{},l=this.subType;Jn.hasClass(l)&&(l+="Series"),Zt(t,i.getTheme().get(this.subType)),Zt(t,this.getDefaultOption()),Il(t,"label",["show"]),this.fillDataTextStyle(t.data),a&&il(t,o,a)},n.prototype.mergeOption=function(t,i){t=Zt(this.option,t,!0),this.fillDataTextStyle(t.data);var a=Wc(this);a&&il(this.option,t,a);var o=Wu(this).sourceManager;o.dirty(),o.prepareSource();var l=this.getInitialData(t,i);Zw(l,this),this.dataTask.dirty(),this.dataTask.context.data=l,Wu(this).dataBeforeProcessed=l,Bw(this),this._initSelectedMapFromData(l)},n.prototype.fillDataTextStyle=function(t){if(t&&!ln(t))for(var i=["show"],a=0;a<t.length;a++)t[a]&&t[a].label&&Il(t[a],"label",i)},n.prototype.getInitialData=function(t,i){},n.prototype.appendData=function(t){this.getRawData().appendData(t.data)},n.prototype.getData=function(t){var i=Qx(this);if(i){var a=i.context.data;return null==t?a:a.getLinkedData(t)}return Wu(this).data},n.prototype.getAllData=function(){var t=this.getData();return t&&t.getLinkedDataAll?t.getLinkedDataAll():[{data:t}]},n.prototype.setData=function(t){var i=Qx(this);if(i){var a=i.context;a.outputData=t,i!==this.dataTask&&(a.data=t)}Wu(this).data=t},n.prototype.getEncode=function(){var t=this.get("encode",!0);if(t)return Kt(t)},n.prototype.getSourceManager=function(){return Wu(this).sourceManager},n.prototype.getSource=function(){return this.getSourceManager().getSource()},n.prototype.getRawData=function(){return Wu(this).dataBeforeProcessed},n.prototype.getColorBy=function(){return this.get("colorBy")||"series"},n.prototype.isColorBySeries=function(){return"series"===this.getColorBy()},n.prototype.getBaseAxis=function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},n.prototype.formatTooltip=function(t,i,a){return Fw({series:this,dataIndex:t,multipleSeries:i})},n.prototype.isAnimationEnabled=function(){var t=this.ecModel;if(gt.node&&(!t||!t.ssr))return!1;var i=this.getShallow("animation");return i&&this.getData().count()>this.getShallow("animationThreshold")&&(i=!1),!!i},n.prototype.restoreData=function(){this.dataTask.dirty()},n.prototype.getColorFromPalette=function(t,i,a){var o=this.ecModel,l=g_.prototype.getColorFromPalette.call(this,t,i,a);return l||(l=o.getColorFromPalette(t,i,a)),l},n.prototype.coordDimToDataDim=function(t){return this.getRawData().mapDimensionsAll(t)},n.prototype.getProgressive=function(){return this.get("progressive")},n.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},n.prototype.select=function(t,i){this._innerSelect(this.getData(i),t)},n.prototype.unselect=function(t,i){var a=this.option.selectedMap;if(a){var o=this.option.selectedMode,l=this.getData(i);if("series"===o||"all"===a)return this.option.selectedMap={},void(this._selectedDataIndicesMap={});for(var u=0;u<t.length;u++){var h=P_(l,t[u]);a[h]=!1,this._selectedDataIndicesMap[h]=-1}}},n.prototype.toggleSelect=function(t,i){for(var a=[],o=0;o<t.length;o++)a[0]=t[o],this.isSelected(t[o],i)?this.unselect(a,i):this.select(a,i)},n.prototype.getSelectedDataIndices=function(){if("all"===this.option.selectedMap)return[].slice.call(this.getData().getIndices());for(var t=this._selectedDataIndicesMap,i=gn(t),a=[],o=0;o<i.length;o++){var l=t[i[o]];l>=0&&a.push(l)}return a},n.prototype.isSelected=function(t,i){var a=this.option.selectedMap;if(!a)return!1;var o=this.getData(i);return("all"===a||a[P_(o,t)])&&!o.getItemModel(t).get(["select","disabled"])},n.prototype.isUniversalTransitionEnabled=function(){if(this[I_])return!0;var t=this.option.universalTransition;return!!t&&(!0===t||t&&t.enabled)},n.prototype._innerSelect=function(t,i){var a,o,l=this.option,u=l.selectedMode,c=i.length;if(u&&c)if("series"===u)l.selectedMap="all";else if("multiple"===u){tt(l.selectedMap)||(l.selectedMap={});for(var h=l.selectedMap,f=0;f<c;f++){var p=i[f];h[v=P_(t,p)]=!0,this._selectedDataIndicesMap[v]=t.getRawIndex(p)}}else if("single"===u||!0===u){var m=i[c-1],v=P_(t,m);l.selectedMap=((a={})[v]=!0,a),this._selectedDataIndicesMap=((o={})[v]=t.getRawIndex(m),o)}},n.prototype._initSelectedMapFromData=function(t){if(!this.option.selectedMap){var i=[];t.hasItemOption&&t.each(function(a){var o=t.getRawDataItem(a);o&&o.selected&&i.push(a)}),i.length>0&&this._innerSelect(t,i)}},n.registerClass=function(t){return Jn.registerClass(t)},n.protoInitialize=((t=n.prototype).type="series.__base__",t.seriesIndex=0,t.ignoreStyleOnData=!1,t.hasSymbolVisual=!1,t.defaultSymbol="circle",t.visualStyleAccessPath="itemStyle",void(t.visualDrawType="fill")),n;var t}(Jn);function Bw(r){var n=r.name;Pf(r)||(r.name=function xR(r){var n=r.getRawData(),t=n.mapDimensionsAll("seriesName"),i=[];return De(t,function(a){var o=n.getDimensionInfo(a);o.displayName&&i.push(o.displayName)}),i.join(" ")}(r)||n)}function TR(r){return r.model.getRawData().count()}function bR(r){var n=r.model;return n.setData(n.getRawData().cloneShallow()),SR}function SR(r,n){n.outputData&&r.end>n.outputData.count()&&n.model.getRawData().cloneShallow(n.outputData)}function Zw(r,n){De(Za(r.CHANGABLE_METHODS,r.DOWNSAMPLE_METHODS),function(t){r.wrapMethod(t,yt(zR,n))})}function zR(r,n){var t=Qx(r);return t&&t.setOutputEnd((n||this).count()),n}function Qx(r){var n=(r.ecModel||{}).scheduler,t=n&&n.getPipeline(r.uid);if(t){var i=t.currentTask;if(i){var a=i.agentStubMap;a&&(i=a.get(r.uid))}return i}}Qt(k_,Rp),Qt(k_,g_),Vv(k_,Jn);const Xr=k_;var qx=function(){function r(){this.group=new hn,this.uid=Eu("viewComponent")}return r.prototype.init=function(n,t){},r.prototype.render=function(n,t,i,a){},r.prototype.dispose=function(n,t){},r.prototype.updateView=function(n,t,i,a){},r.prototype.updateLayout=function(n,t,i,a){},r.prototype.updateVisual=function(n,t,i,a){},r.prototype.toggleBlurSeries=function(n,t,i){},r.prototype.eachRendered=function(n){var t=this.group;t&&t.traverse(n)},r}();Lf(qx),Qh(qx);const oi=qx;function md(){var r=Xn();return function(n){var t=r(n),i=n.pipelineContext,a=!!t.large,o=!!t.progressiveRender,l=t.large=!(!i||!i.large),u=t.progressiveRender=!(!i||!i.progressiveRender);return(a!==l||o!==u)&&"reset"}}var _d=Fo.CMD,wR=[[],[],[]],Uw=Math.sqrt,DR=Math.atan2;function Vw(r,n){if(n){var a,o,l,u,c,h,t=r.data,i=r.len(),f=_d.M,p=_d.C,v=_d.L,m=_d.R,y=_d.A,C=_d.Q;for(l=0,u=0;l<i;){switch(a=t[l++],u=l,o=0,a){case f:case v:o=1;break;case p:o=3;break;case C:o=2;break;case y:var T=n[4],z=n[5],E=Uw(n[0]*n[0]+n[1]*n[1]),N=Uw(n[2]*n[2]+n[3]*n[3]),X=DR(-n[1]/N,n[0]/E);t[l]*=E,t[l++]+=T,t[l]*=N,t[l++]+=z,t[l++]*=E,t[l++]*=N,t[l++]+=X,t[l++]+=X,u=l+=2;break;case m:h[0]=t[l++],h[1]=t[l++],Hr(h,h,n),t[u++]=h[0],t[u++]=h[1],h[0]+=t[l++],h[1]+=t[l++],Hr(h,h,n),t[u++]=h[0],t[u++]=h[1]}for(c=0;c<o;c++){var ve=wR[c];ve[0]=t[l++],ve[1]=t[l++],Hr(ve,ve,n),t[u++]=ve[0],t[u++]=ve[1]}}r.increaseVersion()}}var Kx=Math.sqrt,L_=Math.sin,R_=Math.cos,Bp=Math.PI;function Hw(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function $x(r,n){return(r[0]*n[0]+r[1]*n[1])/(Hw(r)*Hw(n))}function Ww(r,n){return(r[0]*n[1]<r[1]*n[0]?-1:1)*Math.acos($x(r,n))}function Gw(r,n,t,i,a,o,l,u,c,h,f){var p=c*(Bp/180),v=R_(p)*(r-t)/2+L_(p)*(n-i)/2,m=-1*L_(p)*(r-t)/2+R_(p)*(n-i)/2,y=v*v/(l*l)+m*m/(u*u);y>1&&(l*=Kx(y),u*=Kx(y));var C=(a===o?-1:1)*Kx((l*l*(u*u)-l*l*(m*m)-u*u*(v*v))/(l*l*(m*m)+u*u*(v*v)))||0,T=C*l*m/u,z=C*-u*v/l,E=(r+t)/2+R_(p)*T-L_(p)*z,N=(n+i)/2+L_(p)*T+R_(p)*z,X=Ww([1,0],[(v-T)/l,(m-z)/u]),ve=[(v-T)/l,(m-z)/u],ce=[(-1*v-T)/l,(-1*m-z)/u],_e=Ww(ve,ce);if($x(ve,ce)<=-1&&(_e=Bp),$x(ve,ce)>=1&&(_e=0),_e<0){var ze=Math.round(_e/Bp*1e6)/1e6;_e=2*Bp+ze%2*Bp}f.addData(h,E,N,l,u,X,_e,p,o)}var AR=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,ER=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g,Jw=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return or(n,r),n.prototype.applyTransform=function(t){},n}(Fn);function Yw(r){return null!=r.setData}function Qw(r,n){var t=function MR(r){var n=new Fo;if(!r)return n;var l,t=0,i=0,a=t,o=i,u=Fo.CMD,c=r.match(AR);if(!c)return n;for(var h=0;h<c.length;h++){for(var f=c[h],p=f.charAt(0),v=void 0,m=f.match(ER)||[],y=m.length,C=0;C<y;C++)m[C]=parseFloat(m[C]);for(var T=0;T<y;){var z=void 0,E=void 0,N=void 0,X=void 0,ve=void 0,ce=void 0,_e=void 0,ze=t,Ee=i,Le=void 0,ke=void 0;switch(p){case"l":t+=m[T++],i+=m[T++],n.addData(v=u.L,t,i);break;case"L":t=m[T++],i=m[T++],n.addData(v=u.L,t,i);break;case"m":t+=m[T++],i+=m[T++],n.addData(v=u.M,t,i),a=t,o=i,p="l";break;case"M":t=m[T++],i=m[T++],n.addData(v=u.M,t,i),a=t,o=i,p="L";break;case"h":t+=m[T++],n.addData(v=u.L,t,i);break;case"H":t=m[T++],n.addData(v=u.L,t,i);break;case"v":i+=m[T++],n.addData(v=u.L,t,i);break;case"V":i=m[T++],n.addData(v=u.L,t,i);break;case"C":n.addData(v=u.C,m[T++],m[T++],m[T++],m[T++],m[T++],m[T++]),t=m[T-2],i=m[T-1];break;case"c":n.addData(v=u.C,m[T++]+t,m[T++]+i,m[T++]+t,m[T++]+i,m[T++]+t,m[T++]+i),t+=m[T-2],i+=m[T-1];break;case"S":z=t,E=i,Le=n.len(),ke=n.data,l===u.C&&(z+=t-ke[Le-4],E+=i-ke[Le-3]),ze=m[T++],Ee=m[T++],t=m[T++],i=m[T++],n.addData(v=u.C,z,E,ze,Ee,t,i);break;case"s":z=t,E=i,Le=n.len(),ke=n.data,l===u.C&&(z+=t-ke[Le-4],E+=i-ke[Le-3]),ze=t+m[T++],Ee=i+m[T++],t+=m[T++],i+=m[T++],n.addData(v=u.C,z,E,ze,Ee,t,i);break;case"Q":ze=m[T++],Ee=m[T++],t=m[T++],i=m[T++],n.addData(v=u.Q,ze,Ee,t,i);break;case"q":ze=m[T++]+t,Ee=m[T++]+i,t+=m[T++],i+=m[T++],n.addData(v=u.Q,ze,Ee,t,i);break;case"T":z=t,E=i,Le=n.len(),ke=n.data,l===u.Q&&(z+=t-ke[Le-4],E+=i-ke[Le-3]),t=m[T++],i=m[T++],n.addData(v=u.Q,z,E,t,i);break;case"t":z=t,E=i,Le=n.len(),ke=n.data,l===u.Q&&(z+=t-ke[Le-4],E+=i-ke[Le-3]),t+=m[T++],i+=m[T++],n.addData(v=u.Q,z,E,t,i);break;case"A":N=m[T++],X=m[T++],ve=m[T++],ce=m[T++],_e=m[T++],Gw(ze=t,Ee=i,t=m[T++],i=m[T++],ce,_e,N,X,ve,v=u.A,n);break;case"a":N=m[T++],X=m[T++],ve=m[T++],ce=m[T++],_e=m[T++],Gw(ze=t,Ee=i,t+=m[T++],i+=m[T++],ce,_e,N,X,ve,v=u.A,n)}}("z"===p||"Z"===p)&&(n.addData(v=u.Z),t=a,i=o),l=v}return n.toStatic(),n}(r),i=Ge({},n);return i.buildPath=function(a){var o;Yw(a)?(a.setData(t.data),(o=a.getContext())&&a.rebuildPath(o,1)):t.rebuildPath(o=a,1)},i.applyTransform=function(a){Vw(t,a),this.dirtyShape()},i}function qw(r,n){return new Jw(Qw(r,n))}function jx(r,n){n=n||{};var t=new Fn;return r.shape&&t.setShape(r.shape),t.setStyle(r.style),n.bakeTransform?Vw(t.path,r.getComputedTransform()):n.toLocal?t.setLocalTransform(r.getComputedTransform()):t.copyTransform(r),t.buildPath=r.buildPath,t.applyTransform=t.applyTransform,t.z=r.z,t.z2=r.z2,t.zlevel=r.zlevel,t}var IR=function r(){this.cx=0,this.cy=0,this.r=0},Kw=function(r){function n(t){return r.call(this,t)||this}return or(n,r),n.prototype.getDefaultShape=function(){return new IR},n.prototype.buildPath=function(t,i){t.moveTo(i.cx+i.r,i.cy),t.arc(i.cx,i.cy,i.r,0,2*Math.PI)},n}(Fn);Kw.prototype.type="circle";const Cs=Kw;var kR=function r(){this.cx=0,this.cy=0,this.rx=0,this.ry=0},$w=function(r){function n(t){return r.call(this,t)||this}return or(n,r),n.prototype.getDefaultShape=function(){return new kR},n.prototype.buildPath=function(t,i){var a=.5522848,o=i.cx,l=i.cy,u=i.rx,c=i.ry,h=u*a,f=c*a;t.moveTo(o-u,l),t.bezierCurveTo(o-u,l-f,o-h,l-c,o,l-c),t.bezierCurveTo(o+h,l-c,o+u,l-f,o+u,l),t.bezierCurveTo(o+u,l+f,o+h,l+c,o,l+c),t.bezierCurveTo(o-h,l+c,o-u,l+f,o-u,l),t.closePath()},n}(Fn);$w.prototype.type="ellipse";const N_=$w;var jw=Math.PI,Xx=2*jw,qc=Math.sin,yd=Math.cos,LR=Math.acos,va=Math.atan2,Xw=Math.abs,Zp=Math.sqrt,Up=Math.max,al=Math.min,xs=1e-4;function F_(r,n,t,i,a,o,l){var u=r-t,c=n-i,h=(l?o:-o)/Zp(u*u+c*c),f=h*c,p=-h*u,v=r+f,m=n+p,y=t+f,C=i+p,T=(v+y)/2,z=(m+C)/2,E=y-v,N=C-m,X=E*E+N*N,ve=a-o,ce=v*C-y*m,_e=(N<0?-1:1)*Zp(Up(0,ve*ve*X-ce*ce)),ze=(ce*N-E*_e)/X,Ee=(-ce*E-N*_e)/X,Le=(ce*N+E*_e)/X,ke=(-ce*E+N*_e)/X,Ue=ze-T,He=Ee-z,Ke=Le-T,nt=ke-z;return Ue*Ue+He*He>Ke*Ke+nt*nt&&(ze=Le,Ee=ke),{cx:ze,cy:Ee,x0:-f,y0:-p,x1:ze*(a/ve-1),y1:Ee*(a/ve-1)}}var BR=function r(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.cornerRadius=0},eD=function(r){function n(t){return r.call(this,t)||this}return or(n,r),n.prototype.getDefaultShape=function(){return new BR},n.prototype.buildPath=function(t,i){!function FR(r,n){var t,i=Up(n.r,0),a=Up(n.r0||0,0),o=i>0;if(o||a>0){if(o||(i=a,a=0),a>i){var u=i;i=a,a=u}var c=n.startAngle,h=n.endAngle;if(!isNaN(c)&&!isNaN(h)){var f=n.cx,p=n.cy,v=!!n.clockwise,m=Xw(h-c),y=m>Xx&&m%Xx;if(y>xs&&(m=y),i>xs)if(m>Xx-xs)r.moveTo(f+i*yd(c),p+i*qc(c)),r.arc(f,p,i,c,h,!v),a>xs&&(r.moveTo(f+a*yd(h),p+a*qc(h)),r.arc(f,p,a,h,c,v));else{var C=void 0,T=void 0,z=void 0,E=void 0,N=void 0,X=void 0,ve=void 0,ce=void 0,_e=void 0,ze=void 0,Ee=void 0,Le=void 0,ke=void 0,Ue=void 0,He=void 0,Ke=void 0,nt=i*yd(c),lt=i*qc(c),St=a*yd(h),mt=a*qc(h),wt=m>xs;if(wt){var kt=n.cornerRadius;kt&&(t=function NR(r){var n;if(we(r)){var t=r.length;if(!t)return r;n=1===t?[r[0],r[0],0,0]:2===t?[r[0],r[0],r[1],r[1]]:3===t?r.concat(r[2]):r}else n=[r,r,r,r];return n}(kt),C=t[0],T=t[1],z=t[2],E=t[3]);var Yt=Xw(i-a)/2;if(N=al(Yt,z),X=al(Yt,E),ve=al(Yt,C),ce=al(Yt,T),Ee=_e=Up(N,X),Le=ze=Up(ve,ce),(_e>xs||ze>xs)&&(ke=i*yd(h),Ue=i*qc(h),He=a*yd(c),Ke=a*qc(c),m<jw)){var Xt=function RR(r,n,t,i,a,o,l,u){var c=t-r,h=i-n,f=l-a,p=u-o,v=p*c-f*h;if(!(v*v<xs))return[r+(v=(f*(n-o)-p*(r-a))/v)*c,n+v*h]}(nt,lt,He,Ke,ke,Ue,St,mt);if(Xt){var pn=nt-Xt[0],Bn=lt-Xt[1],Ar=ke-Xt[0],br=Ue-Xt[1],Un=1/qc(LR((pn*Ar+Bn*br)/(Zp(pn*pn+Bn*Bn)*Zp(Ar*Ar+br*br)))/2),vn=Zp(Xt[0]*Xt[0]+Xt[1]*Xt[1]);Ee=al(_e,(i-vn)/(Un+1)),Le=al(ze,(a-vn)/(Un-1))}}}if(wt)if(Ee>xs){var Hn=al(z,Ee),kn=al(E,Ee),rn=F_(He,Ke,nt,lt,i,Hn,v),On=F_(ke,Ue,St,mt,i,kn,v);r.moveTo(f+rn.cx+rn.x0,p+rn.cy+rn.y0),Ee<_e&&Hn===kn?r.arc(f+rn.cx,p+rn.cy,Ee,va(rn.y0,rn.x0),va(On.y0,On.x0),!v):(Hn>0&&r.arc(f+rn.cx,p+rn.cy,Hn,va(rn.y0,rn.x0),va(rn.y1,rn.x1),!v),r.arc(f,p,i,va(rn.cy+rn.y1,rn.cx+rn.x1),va(On.cy+On.y1,On.cx+On.x1),!v),kn>0&&r.arc(f+On.cx,p+On.cy,kn,va(On.y1,On.x1),va(On.y0,On.x0),!v))}else r.moveTo(f+nt,p+lt),r.arc(f,p,i,c,h,!v);else r.moveTo(f+nt,p+lt);a>xs&&wt?Le>xs?(Hn=al(C,Le),rn=F_(St,mt,ke,Ue,a,-(kn=al(T,Le)),v),On=F_(nt,lt,He,Ke,a,-Hn,v),r.lineTo(f+rn.cx+rn.x0,p+rn.cy+rn.y0),Le<ze&&Hn===kn?r.arc(f+rn.cx,p+rn.cy,Le,va(rn.y0,rn.x0),va(On.y0,On.x0),!v):(kn>0&&r.arc(f+rn.cx,p+rn.cy,kn,va(rn.y0,rn.x0),va(rn.y1,rn.x1),!v),r.arc(f,p,a,va(rn.cy+rn.y1,rn.cx+rn.x1),va(On.cy+On.y1,On.cx+On.x1),v),Hn>0&&r.arc(f+On.cx,p+On.cy,Hn,va(On.y1,On.x1),va(On.y0,On.x0),!v))):(r.lineTo(f+St,p+mt),r.arc(f,p,a,h,c,v)):r.lineTo(f+St,p+mt)}else r.moveTo(f,p);r.closePath()}}}(t,i)},n.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},n}(Fn);eD.prototype.type="sector";const Oa=eD;var ZR=function r(){this.cx=0,this.cy=0,this.r=0,this.r0=0},tD=function(r){function n(t){return r.call(this,t)||this}return or(n,r),n.prototype.getDefaultShape=function(){return new ZR},n.prototype.buildPath=function(t,i){var a=i.cx,o=i.cy,l=2*Math.PI;t.moveTo(a+i.r,o),t.arc(a,o,i.r,0,l,!1),t.moveTo(a+i.r0,o),t.arc(a,o,i.r0,0,l,!0)},n}(Fn);tD.prototype.type="ring";const Vp=tD;function nD(r,n,t){var i=n.smooth,a=n.points;if(a&&a.length>=2){if(i){var o=function UR(r,n,t,i){var c,h,f,p,a=[],o=[],l=[],u=[];if(i){f=[1/0,1/0],p=[-1/0,-1/0];for(var v=0,m=r.length;v<m;v++)vi(f,f,r[v]),ta(p,p,r[v]);vi(f,f,i[0]),ta(p,p,i[1])}for(v=0,m=r.length;v<m;v++){var y=r[v];if(t)c=r[v?v-1:m-1],h=r[(v+1)%m];else{if(0===v||v===m-1){a.push(Rn(r[v]));continue}c=r[v-1],h=r[v+1]}Mi(o,h,c),si(o,o,n);var C=co(y,c),T=co(y,h),z=C+T;0!==z&&(C/=z,T/=z),si(l,o,-C),si(u,o,T);var E=xa([],y,l),N=xa([],y,u);i&&(ta(E,E,f),vi(E,E,p),ta(N,N,f),vi(N,N,p)),a.push(E),a.push(N)}return t&&a.push(a.shift()),a}(a,i,t,n.smoothConstraint);r.moveTo(a[0][0],a[0][1]);for(var l=a.length,u=0;u<(t?l:l-1);u++){var c=o[2*u],h=o[2*u+1],f=a[(u+1)%l];r.bezierCurveTo(c[0],c[1],h[0],h[1],f[0],f[1])}}else{r.moveTo(a[0][0],a[0][1]),u=1;for(var p=a.length;u<p;u++)r.lineTo(a[u][0],a[u][1])}t&&r.closePath()}}var VR=function r(){this.points=null,this.smooth=0,this.smoothConstraint=null},rD=function(r){function n(t){return r.call(this,t)||this}return or(n,r),n.prototype.getDefaultShape=function(){return new VR},n.prototype.buildPath=function(t,i){nD(t,i,!0)},n}(Fn);rD.prototype.type="polygon";const Pa=rD;var HR=function r(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null},iD=function(r){function n(t){return r.call(this,t)||this}return or(n,r),n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new HR},n.prototype.buildPath=function(t,i){nD(t,i,!1)},n}(Fn);iD.prototype.type="polyline";const Ia=iD;var WR={},GR=function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1},aD=function(r){function n(t){return r.call(this,t)||this}return or(n,r),n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new GR},n.prototype.buildPath=function(t,i){var a,o,l,u;if(this.subPixelOptimize){var c=am(WR,i,this.style);a=c.x1,o=c.y1,l=c.x2,u=c.y2}else a=i.x1,o=i.y1,l=i.x2,u=i.y2;var h=i.percent;0!==h&&(t.moveTo(a,o),h<1&&(l=a*(1-h)+l*h,u=o*(1-h)+u*h),t.lineTo(l,u))},n.prototype.pointAt=function(t){var i=this.shape;return[i.x1*(1-t)+i.x2*t,i.y1*(1-t)+i.y2*t]},n}(Fn);aD.prototype.type="line";const Gi=aD;var no=[],JR=function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1};function oD(r,n,t){return null!=r.cpx2||null!=r.cpy2?[(t?zh:mi)(r.x1,r.cpx1,r.cpx2,r.x2,n),(t?zh:mi)(r.y1,r.cpy1,r.cpy2,r.y2,n)]:[(t?Bs:pi)(r.x1,r.cpx1,r.x2,n),(t?Bs:pi)(r.y1,r.cpy1,r.y2,n)]}var sD=function(r){function n(t){return r.call(this,t)||this}return or(n,r),n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new JR},n.prototype.buildPath=function(t,i){var a=i.x1,o=i.y1,l=i.x2,u=i.y2,c=i.cpx1,h=i.cpy1,f=i.cpx2,p=i.cpy2,v=i.percent;0!==v&&(t.moveTo(a,o),null==f||null==p?(v<1&&(us(a,c,l,v,no),c=no[1],l=no[2],us(o,h,u,v,no),h=no[1],u=no[2]),t.quadraticCurveTo(c,h,l,u)):(v<1&&(vo(a,c,f,l,v,no),c=no[1],f=no[2],l=no[3],vo(o,h,p,u,v,no),h=no[1],p=no[2],u=no[3]),t.bezierCurveTo(c,h,f,p,l,u)))},n.prototype.pointAt=function(t){return oD(this.shape,t,!1)},n.prototype.tangentAt=function(t){var i=oD(this.shape,t,!0);return er(i,i)},n}(Fn);sD.prototype.type="bezier-curve";const Hp=sD;var YR=function r(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},lD=function(r){function n(t){return r.call(this,t)||this}return or(n,r),n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new YR},n.prototype.buildPath=function(t,i){var a=i.cx,o=i.cy,l=Math.max(i.r,0),u=i.startAngle,c=i.endAngle,h=i.clockwise,f=Math.cos(u),p=Math.sin(u);t.moveTo(f*l+a,p*l+o),t.arc(a,o,l,u,c,!h)},n}(Fn);lD.prototype.type="arc";const B_=lD;var QR=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="compound",t}return or(n,r),n.prototype._updatePathDirty=function(){for(var t=this.shape.paths,i=this.shapeChanged(),a=0;a<t.length;a++)i=i||t[a].shapeChanged();i&&this.dirtyShape()},n.prototype.beforeBrush=function(){this._updatePathDirty();for(var t=this.shape.paths||[],i=this.getGlobalScale(),a=0;a<t.length;a++)t[a].path||t[a].createPathProxy(),t[a].path.setScale(i[0],i[1],t[a].segmentIgnoreThreshold)},n.prototype.buildPath=function(t,i){for(var a=i.paths||[],o=0;o<a.length;o++)a[o].buildPath(t,a[o].shape,!0)},n.prototype.afterBrush=function(){for(var t=this.shape.paths||[],i=0;i<t.length;i++)t[i].pathUpdated()},n.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Fn.prototype.getBoundingRect.call(this)},n}(Fn);const Z_=QR;var qR=function(){function r(n){this.colorStops=n||[]}return r.prototype.addColorStop=function(n,t){this.colorStops.push({offset:n,color:t})},r}();const uD=qR;var KR=function(r){function n(t,i,a,o,l,u){var c=r.call(this,l)||this;return c.x=null==t?0:t,c.y=null==i?0:i,c.x2=null==a?1:a,c.y2=null==o?0:o,c.type="linear",c.global=u||!1,c}return or(n,r),n}(uD);const Cd=KR;var $R=function(r){function n(t,i,a,o,l){var u=r.call(this,o)||this;return u.x=null==t?.5:t,u.y=null==i?.5:i,u.r=null==a?.5:a,u.type="radial",u.global=l||!1,u}return or(n,r),n}(uD);const eT=$R;var Kc=[0,0],$c=[0,0],U_=new bn,V_=new bn,jR=function(){function r(n,t){this._corners=[],this._axes=[],this._origin=[0,0];for(var i=0;i<4;i++)this._corners[i]=new bn;for(i=0;i<2;i++)this._axes[i]=new bn;n&&this.fromBoundingRect(n,t)}return r.prototype.fromBoundingRect=function(n,t){var i=this._corners,a=this._axes,o=n.x,l=n.y,u=o+n.width,c=l+n.height;if(i[0].set(o,l),i[1].set(u,l),i[2].set(u,c),i[3].set(o,c),t)for(var h=0;h<4;h++)i[h].transform(t);for(bn.sub(a[0],i[1],i[0]),bn.sub(a[1],i[3],i[0]),a[0].normalize(),a[1].normalize(),h=0;h<2;h++)this._origin[h]=a[h].dot(i[0])},r.prototype.intersect=function(n,t){var i=!0,a=!t;return U_.set(1/0,1/0),V_.set(0,0),!this._intersectCheckOneSide(this,n,U_,V_,a,1)&&(i=!1,a)||!this._intersectCheckOneSide(n,this,U_,V_,a,-1)&&(i=!1,a)||a||bn.copy(t,i?U_:V_),i},r.prototype._intersectCheckOneSide=function(n,t,i,a,o,l){for(var u=!0,c=0;c<2;c++){var h=this._axes[c];if(this._getProjMinMaxOnAxis(c,n._corners,Kc),this._getProjMinMaxOnAxis(c,t._corners,$c),Kc[1]<$c[0]||Kc[0]>$c[1]){if(u=!1,o)return u;var f=Math.abs($c[0]-Kc[1]),p=Math.abs(Kc[0]-$c[1]);Math.min(f,p)>a.len()&&bn.scale(a,h,f<p?-f*l:p*l)}else i&&(f=Math.abs($c[0]-Kc[1]),p=Math.abs(Kc[0]-$c[1]),Math.min(f,p)<i.len()&&bn.scale(i,h,f<p?f*l:-p*l))}return u},r.prototype._getProjMinMaxOnAxis=function(n,t,i){for(var a=this._axes[n],o=this._origin,l=t[0].dot(a)+o[n],u=l,c=l,h=1;h<t.length;h++){var f=t[h].dot(a)+o[n];u=Math.min(f,u),c=Math.max(f,c)}i[0]=u,i[1]=c},r}();const H_=jR;var XR=[],e6=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.notClear=!0,t.incremental=!0,t._displayables=[],t._temporaryDisplayables=[],t._cursor=0,t}return or(n,r),n.prototype.traverse=function(t,i){t.call(i,this)},n.prototype.useStyle=function(){this.style={}},n.prototype.getCursor=function(){return this._cursor},n.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},n.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},n.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},n.prototype.addDisplayable=function(t,i){i?this._temporaryDisplayables.push(t):this._displayables.push(t),this.markRedraw()},n.prototype.addDisplayables=function(t,i){i=i||!1;for(var a=0;a<t.length;a++)this.addDisplayable(t[a],i)},n.prototype.getDisplayables=function(){return this._displayables},n.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},n.prototype.eachPendingDisplayable=function(t){for(var i=this._cursor;i<this._displayables.length;i++)t&&t(this._displayables[i]);for(i=0;i<this._temporaryDisplayables.length;i++)t&&t(this._temporaryDisplayables[i])},n.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++)(i=this._displayables[t]).parent=this,i.update(),i.parent=null;for(t=0;t<this._temporaryDisplayables.length;t++){var i;(i=this._temporaryDisplayables[t]).parent=this,i.update(),i.parent=null}},n.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new Mn(1/0,1/0,-1/0,-1/0),i=0;i<this._displayables.length;i++){var a=this._displayables[i],o=a.getBoundingRect().clone();a.needLocalTransform()&&o.applyTransform(a.getLocalTransform(XR)),t.union(o)}this._rect=t}return this._rect},n.prototype.contain=function(t,i){var a=this.transformCoordToLocal(t,i);if(this.getBoundingRect().contain(a[0],a[1]))for(var l=0;l<this._displayables.length;l++)if(this._displayables[l].contain(t,i))return!0;return!1},n}($a);const cD=e6;var W_=Math.max,G_=Math.min,tT={};function hD(r){return Fn.extend(r)}function dD(r,n){return function OR(r,n){var t=Qw(r,n);return function(a){function o(l){var u=a.call(this,l)||this;return u.applyTransform=t.applyTransform,u.buildPath=t.buildPath,u}return or(o,a),o}(Jw)}(r,n)}function Wo(r,n){tT[r]=n}function J_(r){if(tT.hasOwnProperty(r))return tT[r]}function Wp(r,n,t,i){var a=qw(r,n);return t&&("center"===i&&(t=fD(t,a.getBoundingRect())),rT(a,t)),a}function nT(r,n,t){var i=new ki({style:{image:r,x:n.x,y:n.y,width:n.width,height:n.height},onload:function(a){"center"===t&&i.setStyle(fD(n,{width:a.width,height:a.height}))}});return i}function fD(r,n){var a,t=n.width/n.height,i=r.height*t;return a=i<=r.width?r.height:(i=r.width)/t,{x:r.x+r.width/2-i/2,y:r.y+r.height/2-a/2,width:i,height:a}}var zo=function PR(r,n){for(var t=[],i=r.length,a=0;a<i;a++)t.push(r[a].getUpdatedPathProxy(!0));var l=new Fn(n);return l.createPathProxy(),l.buildPath=function(u){if(Yw(u)){u.appendPath(t);var c=u.getContext();c&&u.rebuildPath(c,1)}},l};function rT(r,n){if(r.applyTransform){var i=r.getBoundingRect().calculateTransform(n);r.applyTransform(i)}}function n6(r){return am(r.shape,r.shape,r.style),r}function r6(r){return om(r.shape,r.shape,r.style),r}var Y_=Hl;function Gu(r,n){for(var t=mu([]);r&&r!==n;)Mo(t,r.getLocalTransform(),t),r=r.parent;return t}function Ts(r,n,t){return n&&!zn(n)&&(n=ds.getLocalTransform(n)),t&&(n=zl([],n)),Hr([],r,n)}function Q_(r,n,t){var i=0===n[4]||0===n[5]||0===n[0]?1:Math.abs(2*n[4]/n[0]),a=0===n[4]||0===n[5]||0===n[2]?1:Math.abs(2*n[4]/n[2]),o=["left"===r?-i:"right"===r?i:0,"top"===r?-a:"bottom"===r?a:0];return o=Ts(o,n,t),Math.abs(o[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"}function pD(r){return!r.isGroup}function Gp(r,n,t){if(r&&n){var o=function i(l){var u={};return l.traverse(function(c){pD(c)&&c.anid&&(u[c.anid]=c)}),u}(r);n.traverse(function(l){if(pD(l)&&l.anid){var u=o[l.anid];if(u){var c=a(l);l.attr(a(u)),Kn(l,c,t,dn(l).dataIndex)}}})}function a(l){var u={x:l.x,y:l.y,rotation:l.rotation};return function a6(r){return null!=r.shape}(l)&&(u.shape=Ge({},l.shape)),u}}function iT(r,n){return _t(r,function(t){var i=t[0];i=W_(i,n.x),i=G_(i,n.x+n.width);var a=t[1];return a=W_(a,n.y),[i,a=G_(a,n.y+n.height)]})}function gD(r,n){var t=W_(r.x,n.x),i=G_(r.x+r.width,n.x+n.width),a=W_(r.y,n.y),o=G_(r.y+r.height,n.y+n.height);if(i>=t&&o>=a)return{x:t,y:a,width:i-t,height:o-a}}function xd(r,n,t){var i=Ge({rectHover:!0},n),a=i.style={strokeNoScale:!0};if(t=t||{x:-1,y:-1,width:2,height:2},r)return 0===r.indexOf("image://")?(a.image=r.slice(8),Dt(a,t),new ki(i)):Wp(r.replace("path://",""),i,t,"center")}function Jp(r,n,t,i,a){for(var o=0,l=a[a.length-1];o<a.length;o++){var u=a[o];if(vD(r,n,t,i,u[0],u[1],l[0],l[1]))return!0;l=u}}function vD(r,n,t,i,a,o,l,u){var c=t-r,h=i-n,f=l-a,p=u-o,v=aT(f,p,c,h);if(function o6(r){return r<=1e-6&&r>=-1e-6}(v))return!1;var m=r-a,y=n-o,C=aT(m,y,c,h)/v;if(C<0||C>1)return!1;var T=aT(m,y,f,p)/v;return!(T<0||T>1)}function aT(r,n,t,i){return r*i-t*n}function Td(r){var n=r.itemTooltipOption,t=r.componentModel,i=r.itemName,a=Qe(n)?{formatter:n}:n,o=t.mainType,l=t.componentIndex,u={componentType:o,name:i,$vars:["name"]};u[o+"Index"]=l;var c=r.formatterParamsExtra;c&&De(gn(c),function(f){qt(u,f)||(u[f]=c[f],u.$vars.push(f))});var h=dn(r.el);h.componentMainType=o,h.componentIndex=l,h.tooltipConfig={name:i,option:Dt({content:i,formatterParams:u},a)}}function mD(r,n){var t;r.isGroup&&(t=n(r)),t||r.traverse(n)}function Ju(r,n){if(r)if(we(r))for(var t=0;t<r.length;t++)mD(r[t],n);else mD(r,n)}Wo("circle",Cs),Wo("ellipse",N_),Wo("sector",Oa),Wo("ring",Vp),Wo("polygon",Pa),Wo("polyline",Ia),Wo("rect",Qn),Wo("line",Gi),Wo("bezierCurve",Hp),Wo("arc",B_);var _D=Xn(),s6=md(),oT=function(){function r(){this.group=new hn,this.uid=Eu("viewChart"),this.renderTask=Qc({plan:l6,reset:u6}),this.renderTask.context={view:this}}return r.prototype.init=function(n,t){},r.prototype.render=function(n,t,i,a){},r.prototype.highlight=function(n,t,i,a){var o=n.getData(a&&a.dataType);!o||CD(o,a,"emphasis")},r.prototype.downplay=function(n,t,i,a){var o=n.getData(a&&a.dataType);!o||CD(o,a,"normal")},r.prototype.remove=function(n,t){this.group.removeAll()},r.prototype.dispose=function(n,t){},r.prototype.updateView=function(n,t,i,a){this.render(n,t,i,a)},r.prototype.updateLayout=function(n,t,i,a){this.render(n,t,i,a)},r.prototype.updateVisual=function(n,t,i,a){this.render(n,t,i,a)},r.prototype.eachRendered=function(n){Ju(this.group,n)},r.markUpdateMethod=function(n,t){_D(n).updateMethod=t},r.protoInitialize=void(r.prototype.type="chart"),r}();function yD(r,n,t){r&&Nc(r)&&("emphasis"===n?gs:vs)(r,t)}function CD(r,n,t){var i=kl(r,n),a=n&&null!=n.highlightKey?function NC(r){var n=vm[r];return null==n&&Oc<=32&&(n=vm[r]=Oc++),n}(n.highlightKey):null;null!=i?De(Dr(i),function(o){yD(r.getItemGraphicEl(o),t,a)}):r.eachItemGraphicEl(function(o){yD(o,t,a)})}function l6(r){return s6(r.model)}function u6(r){var n=r.model,t=r.ecModel,i=r.api,a=r.payload,o=n.pipelineContext.progressiveRender,l=r.view,u=a&&_D(a).updateMethod,c=o?"incrementalPrepareRender":u&&l[u]?u:"render";return"render"!==c&&l[c](n,t,i,a),c6[c]}Lf(oT),Qh(oT);var c6={incrementalPrepareRender:{progress:function(r,n){n.view.incrementalRender(r,n.model,n.ecModel,n.api,n.payload)}},render:{forceFirstProgress:!0,progress:function(r,n){n.view.render(n.model,n.ecModel,n.api,n.payload)}}};const Vr=oT;var q_="\0__throttleOriginMethod",xD="\0__throttleRate",TD="\0__throttleType";function K_(r,n,t){var i,u,c,h,f,a=0,o=0,l=null;function p(){o=(new Date).getTime(),l=null,r.apply(c,h||[])}n=n||0;var v=function(){for(var m=[],y=0;y<arguments.length;y++)m[y]=arguments[y];i=(new Date).getTime(),c=this,h=m;var C=f||n,T=f||t;f=null,u=i-(T?a:o)-C,clearTimeout(l),T?l=setTimeout(p,C):u>=0?p():l=setTimeout(p,-u),a=i};return v.clear=function(){l&&(clearTimeout(l),l=null)},v.debounceNextCall=function(m){f=m},v}function bd(r,n,t,i){var a=r[n];if(a){var o=a[q_]||a;if(a[xD]!==t||a[TD]!==i){if(null==t||!i)return r[n]=o;(a=r[n]=K_(o,t,"debounce"===i))[q_]=o,a[TD]=i,a[xD]=t}return a}}function Yp(r,n){var t=r[n];t&&t[q_]&&(t.clear&&t.clear(),r[n]=t[q_])}var bD=Xn(),SD={itemStyle:Ll(Wm,!0),lineStyle:Ll(Hm,!0)},h6={lineStyle:"stroke",itemStyle:"fill"};function zD(r,n){return r.visualStyleMapper||SD[n]||(console.warn("Unkown style type '"+n+"'."),SD.itemStyle)}function wD(r,n){return r.visualDrawType||h6[n]||(console.warn("Unkown style type '"+n+"'."),"fill")}var d6={createOnAllSeries:!0,performRawSeries:!0,reset:function(r,n){var t=r.getData(),i=r.visualStyleAccessPath||"itemStyle",a=r.getModel(i),l=zD(r,i)(a),u=a.getShallow("decal");u&&(t.setVisual("decal",u),u.dirty=!0);var c=wD(r,i),h=l[c],f=Pe(h)?h:null;if(!l[c]||f||"auto"===l.fill||"auto"===l.stroke){var v=r.getColorFromPalette(r.name,null,n.getSeriesCount());l[c]||(l[c]=v,t.setVisual("colorFromPalette",!0)),l.fill="auto"===l.fill||Pe(l.fill)?v:l.fill,l.stroke="auto"===l.stroke||Pe(l.stroke)?v:l.stroke}if(t.setVisual("style",l),t.setVisual("drawType",c),!n.isSeriesFiltered(r)&&f)return t.setVisual("colorFromPalette",!1),{dataEach:function(m,y){var C=r.getDataParams(y),T=Ge({},l);T[c]=f(C),m.setItemVisual(y,"style",T)}}}},Qp=new Or,f6={createOnAllSeries:!0,performRawSeries:!0,reset:function(r,n){if(!r.ignoreStyleOnData&&!n.isSeriesFiltered(r)){var t=r.getData(),i=r.visualStyleAccessPath||"itemStyle",a=zD(r,i),o=t.getVisual("drawType");return{dataEach:t.hasItemOption?function(l,u){var c=l.getRawDataItem(u);if(c&&c[i]){Qp.option=c[i];var h=a(Qp);Ge(l.ensureUniqueItemVisual(u,"style"),h),Qp.option.decal&&(l.setItemVisual(u,"decal",Qp.option.decal),Qp.option.decal.dirty=!0),o in h&&l.setItemVisual(u,"colorFromPalette",!1)}}:null}}}},p6={performRawSeries:!0,overallReset:function(r){var n=Kt();r.eachSeries(function(t){var i=t.getColorBy();if(!t.isColorBySeries()){var a=t.type+"-"+i,o=n.get(a);o||n.set(a,o={}),bD(t).scope=o}}),r.eachSeries(function(t){if(!t.isColorBySeries()&&!r.isSeriesFiltered(t)){var i=t.getRawData(),a={},o=t.getData(),l=bD(t).scope,c=wD(t,t.visualStyleAccessPath||"itemStyle");o.each(function(h){var f=o.getRawIndex(h);a[f]=h}),i.each(function(h){var f=a[h];if(o.getItemVisual(f,"colorFromPalette")){var v=o.ensureUniqueItemVisual(f,"style"),m=i.getName(h)||h+"",y=i.count();v[c]=t.getColorFromPalette(m,l,y)}})}})}},$_=Math.PI,v6=function(){function r(n,t,i,a){this._stageTaskMap=Kt(),this.ecInstance=n,this.api=t,i=this._dataProcessorHandlers=i.slice(),a=this._visualHandlers=a.slice(),this._allHandlers=i.concat(a)}return r.prototype.restoreData=function(n,t){n.restoreData(t),this._stageTaskMap.each(function(i){var a=i.overallTask;a&&a.dirty()})},r.prototype.getPerformArgs=function(n,t){if(n.__pipeline){var i=this._pipelineMap.get(n.__pipeline.id),a=i.context,l=!t&&i.progressiveEnabled&&(!a||a.progressiveRender)&&n.__idxInPipeline>i.blockIndex?i.step:null,u=a&&a.modDataCount;return{step:l,modBy:null!=u?Math.ceil(u/l):null,modDataCount:u}}},r.prototype.getPipeline=function(n){return this._pipelineMap.get(n)},r.prototype.updateStreamModes=function(n,t){var i=this._pipelineMap.get(n.uid),o=n.getData().count(),l=i.progressiveEnabled&&t.incrementalPrepareRender&&o>=i.threshold,u=n.get("large")&&o>=n.get("largeThreshold"),c="mod"===n.get("progressiveChunkMode")?o:null;n.pipelineContext=i.context={progressiveRender:l,modDataCount:c,large:u}},r.prototype.restorePipelines=function(n){var t=this,i=t._pipelineMap=Kt();n.eachSeries(function(a){var o=a.getProgressive(),l=a.uid;i.set(l,{id:l,head:null,tail:null,threshold:a.getProgressiveThreshold(),progressiveEnabled:o&&!(a.preventIncremental&&a.preventIncremental()),blockIndex:-1,step:Math.round(o||700),count:0}),t._pipe(a,a.dataTask)})},r.prototype.prepareStageTasks=function(){var n=this._stageTaskMap,t=this.api.getModel(),i=this.api;De(this._allHandlers,function(a){var o=n.get(a.uid)||n.set(a.uid,{});ar(!(a.reset&&a.overallReset),""),a.reset&&this._createSeriesStageTask(a,o,t,i),a.overallReset&&this._createOverallStageTask(a,o,t,i)},this)},r.prototype.prepareView=function(n,t,i,a){var o=n.renderTask,l=o.context;l.model=t,l.ecModel=i,l.api=a,o.__block=!n.incrementalPrepareRender,this._pipe(t,o)},r.prototype.performDataProcessorTasks=function(n,t){this._performStageTasks(this._dataProcessorHandlers,n,t,{block:!0})},r.prototype.performVisualTasks=function(n,t,i){this._performStageTasks(this._visualHandlers,n,t,i)},r.prototype._performStageTasks=function(n,t,i,a){a=a||{};var o=!1,l=this;function u(c,h){return c.setDirty&&(!c.dirtyMap||c.dirtyMap.get(h.__pipeline.id))}De(n,function(c,h){if(!a.visualType||a.visualType===c.visualType){var f=l._stageTaskMap.get(c.uid),p=f.seriesTaskMap,v=f.overallTask;if(v){var m,y=v.agentStubMap;y.each(function(T){u(a,T)&&(T.dirty(),m=!0)}),m&&v.dirty(),l.updatePayload(v,i);var C=l.getPerformArgs(v,a.block);y.each(function(T){T.perform(C)}),v.perform(C)&&(o=!0)}else p&&p.each(function(T,z){u(a,T)&&T.dirty();var E=l.getPerformArgs(T,a.block);E.skip=!c.performRawSeries&&t.isSeriesFiltered(T.context.model),l.updatePayload(T,i),T.perform(E)&&(o=!0)})}}),this.unfinished=o||this.unfinished},r.prototype.performSeriesTasks=function(n){var t;n.eachSeries(function(i){t=i.dataTask.perform()||t}),this.unfinished=t||this.unfinished},r.prototype.plan=function(){this._pipelineMap.each(function(n){var t=n.tail;do{if(t.__block){n.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})},r.prototype.updatePayload=function(n,t){"remain"!==t&&(n.context.payload=t)},r.prototype._createSeriesStageTask=function(n,t,i,a){var o=this,l=t.seriesTaskMap,u=t.seriesTaskMap=Kt(),c=n.seriesType,h=n.getTargetSeries;function f(p){var v=p.uid,m=u.set(v,l&&l.get(v)||Qc({plan:x6,reset:T6,count:S6}));m.context={model:p,ecModel:i,api:a,useClearVisual:n.isVisual&&!n.isLayout,plan:n.plan,reset:n.reset,scheduler:o},o._pipe(p,m)}n.createOnAllSeries?i.eachRawSeries(f):c?i.eachRawSeriesByType(c,f):h&&h(i,a).each(f)},r.prototype._createOverallStageTask=function(n,t,i,a){var o=this,l=t.overallTask=t.overallTask||Qc({reset:m6});l.context={ecModel:i,api:a,overallReset:n.overallReset,scheduler:o};var u=l.agentStubMap,c=l.agentStubMap=Kt(),h=n.seriesType,f=n.getTargetSeries,p=!0,v=!1;function y(C){var T=C.uid,z=c.set(T,u&&u.get(T)||(v=!0,Qc({reset:_6,onDirty:C6})));z.context={model:C,overallProgress:p},z.agent=l,z.__block=p,o._pipe(C,z)}ar(!n.createOnAllSeries,""),h?i.eachRawSeriesByType(h,y):f?f(i,a).each(y):(p=!1,De(i.getSeries(),y)),v&&l.dirty()},r.prototype._pipe=function(n,t){var a=this._pipelineMap.get(n.uid);!a.head&&(a.head=t),a.tail&&a.tail.pipe(t),a.tail=t,t.__idxInPipeline=a.count++,t.__pipeline=a},r.wrapStageHandler=function(n,t){return Pe(n)&&(n={overallReset:n,seriesType:z6(n)}),n.uid=Eu("stageHandler"),t&&(n.visualType=t),n},r}();function m6(r){r.overallReset(r.ecModel,r.api,r.payload)}function _6(r){return r.overallProgress&&y6}function y6(){this.agent.dirty(),this.getDownstream().dirty()}function C6(){this.agent&&this.agent.dirty()}function x6(r){return r.plan?r.plan(r.model,r.ecModel,r.api,r.payload):null}function T6(r){r.useClearVisual&&r.data.clearAllVisual();var n=r.resetDefines=Dr(r.reset(r.model,r.ecModel,r.api,r.payload));return n.length>1?_t(n,function(t,i){return DD(i)}):b6}var b6=DD(0);function DD(r){return function(n,t){var i=t.data,a=t.resetDefines[r];if(a&&a.dataEach)for(var o=n.start;o<n.end;o++)a.dataEach(i,o);else a&&a.progress&&a.progress(n,i)}}function S6(r){return r.data.count()}function z6(r){j_=null;try{r(qp,AD)}catch(n){}return j_}var j_,qp={},AD={};function ED(r,n){for(var t in n.prototype)r[t]=kr}ED(qp,C_),ED(AD,xx),qp.eachSeriesByType=qp.eachRawSeriesByType=function(r){j_=r},qp.eachComponent=function(r){"series"===r.mainType&&r.subType&&(j_=r.subType)};const MD=v6;var OD=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const w6={color:OD,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],OD]};var ka="#B9B8CE",PD="#100C2A",X_=function(){return{axisLine:{lineStyle:{color:ka}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},ID=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],kD={darkMode:!0,color:ID,backgroundColor:PD,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:ka}},textStyle:{color:ka},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:ka}},dataZoom:{borderColor:"#71708A",textStyle:{color:ka},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:ka}},timeline:{lineStyle:{color:ka},label:{color:ka},controlStyle:{color:ka,borderColor:ka}},calendar:{itemStyle:{color:PD},dayLabel:{color:ka},monthLabel:{color:ka},yearLabel:{color:ka}},timeAxis:X_(),logAxis:X_(),valueAxis:X_(),categoryAxis:X_(),line:{symbol:"circle"},graph:{color:ID},gauge:{title:{color:ka},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:ka},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};kD.categoryAxis.splitLine.show=!1;const D6=kD;var A6=function(){function r(){}return r.prototype.normalizeQuery=function(n){var t={},i={},a={};if(Qe(n)){var o=ko(n);t.mainType=o.main||null,t.subType=o.sub||null}else{var l=["Index","Name","Id"],u={name:1,dataIndex:1,dataType:1};De(n,function(c,h){for(var f=!1,p=0;p<l.length;p++){var v=l[p],m=h.lastIndexOf(v);if(m>0&&m===h.length-v.length){var y=h.slice(0,m);"data"!==y&&(t.mainType=y,t[v.toLowerCase()]=c,f=!0)}}u.hasOwnProperty(h)&&(i[h]=c,f=!0),f||(a[h]=c)})}return{cptQuery:t,dataQuery:i,otherQuery:a}},r.prototype.filter=function(n,t){var i=this.eventInfo;if(!i)return!0;var a=i.targetEl,o=i.packedEvent,l=i.model,u=i.view;if(!l||!u)return!0;var c=t.cptQuery,h=t.dataQuery;return f(c,l,"mainType")&&f(c,l,"subType")&&f(c,l,"index","componentIndex")&&f(c,l,"name")&&f(c,l,"id")&&f(h,o,"name")&&f(h,o,"dataIndex")&&f(h,o,"dataType")&&(!u.filterForExposedEvent||u.filterForExposedEvent(n,t.otherQuery,a,o));function f(p,v,m,y){return null==p[m]||v[y||m]===p[m]}},r.prototype.afterTrigger=function(){this.eventInfo=null},r}(),sT=["symbol","symbolSize","symbolRotate","symbolOffset"],LD=sT.concat(["symbolKeepAspect"]),E6={createOnAllSeries:!0,performRawSeries:!0,reset:function(r,n){var t=r.getData();if(r.legendIcon&&t.setVisual("legendIcon",r.legendIcon),r.hasSymbolVisual){for(var i={},a={},o=!1,l=0;l<sT.length;l++){var u=sT[l],c=r.get(u);Pe(c)?(o=!0,a[u]=c):i[u]=c}if(i.symbol=i.symbol||r.defaultSymbol,t.setVisual(Ge({legendIcon:r.legendIcon||i.symbol,symbolKeepAspect:r.get("symbolKeepAspect")},i)),!n.isSeriesFiltered(r)){var h=gn(a);return{dataEach:o?function f(p,v){for(var m=r.getRawValue(v),y=r.getDataParams(v),C=0;C<h.length;C++){var T=h[C];p.setItemVisual(v,T,a[T](m,y))}}:null}}}}},M6={createOnAllSeries:!0,performRawSeries:!0,reset:function(r,n){if(r.hasSymbolVisual&&!n.isSeriesFiltered(r))return{dataEach:r.getData().hasItemOption?function i(a,o){for(var l=a.getItemModel(o),u=0;u<LD.length;u++){var c=LD[u],h=l.getShallow(c,!0);null!=h&&a.setItemVisual(o,c,h)}}:null}}};function lT(r,n,t){switch(t){case"color":return r.getItemVisual(n,"style")[r.getVisual("drawType")];case"opacity":return r.getItemVisual(n,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return r.getItemVisual(n,t)}}function Kp(r,n){switch(n){case"color":return r.getVisual("style")[r.getVisual("drawType")];case"opacity":return r.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return r.getVisual(n)}}function RD(r,n,t,i){switch(t){case"color":r.ensureUniqueItemVisual(n,"style")[r.getVisual("drawType")]=i,r.setItemVisual(n,"colorFromPalette",!1);break;case"opacity":r.ensureUniqueItemVisual(n,"style").opacity=i;break;case"symbol":case"symbolSize":case"liftZ":r.setItemVisual(n,t,i)}}function ND(r,n){function t(i,a){var o=[];return i.eachComponent({mainType:"series",subType:r,query:a},function(l){o.push(l.seriesIndex)}),o}De([[r+"ToggleSelect","toggleSelect"],[r+"Select","select"],[r+"UnSelect","unselect"]],function(i){n(i[0],function(a,o,l){a=Ge({},a),l.dispatchAction(Ge(a,{type:i[1],seriesIndex:t(o,a)}))})})}function Sd(r,n,t,i,a){var o=r+n;t.isSilent(o)||i.eachComponent({mainType:"series",subType:"pie"},function(l){for(var u=l.seriesIndex,c=l.option.selectedMap,h=a.selected,f=0;f<h.length;f++)if(h[f].seriesIndex===u){var p=l.getData(),v=kl(p,a.fromActionPayload);t.trigger(o,{type:o,seriesId:l.id,name:we(v)?p.getName(v[0]):p.getName(v),selected:Qe(c)?c:Ge({},c)})}})}function zd(r,n,t){for(var i;r&&(!n(r)||(i=r,!t));)r=r.__hostTarget||r.parent;return i}var P6=Math.round(9*Math.random()),I6="function"==typeof Object.defineProperty,k6=function(){function r(){this._id="__ec_inner_"+P6++}return r.prototype.get=function(n){return this._guard(n)[this._id]},r.prototype.set=function(n,t){var i=this._guard(n);return I6?Object.defineProperty(i,this._id,{value:t,enumerable:!1,configurable:!0}):i[this._id]=t,this},r.prototype.delete=function(n){return!!this.has(n)&&(delete this._guard(n)[this._id],!0)},r.prototype.has=function(n){return!!this._guard(n)[this._id]},r.prototype._guard=function(n){if(n!==Object(n))throw TypeError("Value of WeakMap is not a non-null object.");return n},r}();const L6=k6;var R6=Fn.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(r,n){var t=n.cx,i=n.cy,a=n.width/2,o=n.height/2;r.moveTo(t,i-o),r.lineTo(t+a,i+o),r.lineTo(t-a,i+o),r.closePath()}}),N6=Fn.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(r,n){var t=n.cx,i=n.cy,a=n.width/2,o=n.height/2;r.moveTo(t,i-o),r.lineTo(t+a,i),r.lineTo(t,i+o),r.lineTo(t-a,i),r.closePath()}}),F6=Fn.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(r,n){var t=n.x,i=n.y,a=n.width/5*3,o=Math.max(a,n.height),l=a/2,u=l*l/(o-l),c=i-o+l+u,h=Math.asin(u/l),f=Math.cos(h)*l,p=Math.sin(h),v=Math.cos(h),m=.6*l,y=.7*l;r.moveTo(t-f,c+u),r.arc(t,c,l,Math.PI-h,2*Math.PI+h),r.bezierCurveTo(t+f-p*m,c+u+v*m,t,i-y,t,i),r.bezierCurveTo(t,i-y,t-f+p*m,c+u+v*m,t-f,c+u),r.closePath()}}),B6=Fn.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(r,n){var t=n.height,a=n.x,o=n.y,l=n.width/3*2;r.moveTo(a,o),r.lineTo(a+l,o+t),r.lineTo(a,o+t/4*3),r.lineTo(a-l,o+t),r.lineTo(a,o),r.closePath()}}),U6={line:function(r,n,t,i,a){a.x1=r,a.y1=n+i/2,a.x2=r+t,a.y2=n+i/2},rect:function(r,n,t,i,a){a.x=r,a.y=n,a.width=t,a.height=i},roundRect:function(r,n,t,i,a){a.x=r,a.y=n,a.width=t,a.height=i,a.r=Math.min(t,i)/4},square:function(r,n,t,i,a){var o=Math.min(t,i);a.x=r,a.y=n,a.width=o,a.height=o},circle:function(r,n,t,i,a){a.cx=r+t/2,a.cy=n+i/2,a.r=Math.min(t,i)/2},diamond:function(r,n,t,i,a){a.cx=r+t/2,a.cy=n+i/2,a.width=t,a.height=i},pin:function(r,n,t,i,a){a.x=r+t/2,a.y=n+i/2,a.width=t,a.height=i},arrow:function(r,n,t,i,a){a.x=r+t/2,a.y=n+i/2,a.width=t,a.height=i},triangle:function(r,n,t,i,a){a.cx=r+t/2,a.cy=n+i/2,a.width=t,a.height=i}},e0={};De({line:Gi,rect:Qn,roundRect:Qn,square:Qn,circle:Cs,diamond:N6,pin:F6,arrow:B6,triangle:R6},function(r,n){e0[n]=new r});var V6=Fn.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(r,n,t){var i=Vh(r,n,t),a=this.shape;return a&&"pin"===a.symbolType&&"inside"===n.position&&(i.y=t.y+.4*t.height),i},buildPath:function(r,n,t){var i=n.symbolType;if("none"!==i){var a=e0[i];a||(a=e0[i="rect"]),U6[i](n.x,n.y,n.width,n.height,a.shape),a.buildPath(r,a.shape,t)}}});function H6(r,n){if("image"!==this.type){var t=this.style;this.__isEmptyBrush?(t.stroke=r,t.fill=n||"#fff",t.lineWidth=2):"line"===this.shape.symbolType?t.stroke=r:t.fill=r,this.markRedraw()}}function wi(r,n,t,i,a,o,l){var c,u=0===r.indexOf("empty");return u&&(r=r.substr(5,1).toLowerCase()+r.substr(6)),(c=0===r.indexOf("image://")?nT(r.slice(8),new Mn(n,t,i,a),l?"center":"cover"):0===r.indexOf("path://")?Wp(r.slice(7),{},new Mn(n,t,i,a),l?"center":"cover"):new V6({shape:{symbolType:r,x:n,y:t,width:i,height:a}})).__isEmptyBrush=u,c.setColor=H6,o&&c.setColor(o),c}function $p(r){return we(r)||(r=[+r,+r]),[r[0]||0,r[1]||0]}function wd(r,n){if(null!=r)return we(r)||(r=[r,r]),[Ht(r[0],n[0])||0,Ht($t(r[1],r[0]),n[1])||0]}function uT(r,n,t){for(var i="radial"===n.type?function G6(r,n,t){var i=t.width,a=t.height,o=Math.min(i,a),l=null==n.x?.5:n.x,u=null==n.y?.5:n.y,c=null==n.r?.5:n.r;return n.global||(l=l*i+t.x,u=u*a+t.y,c*=o),r.createRadialGradient(l,u,0,l,u,c)}(r,n,t):function W6(r,n,t){var i=null==n.x?0:n.x,a=null==n.x2?1:n.x2,o=null==n.y?0:n.y,l=null==n.y2?0:n.y2;return n.global||(i=i*t.width+t.x,a=a*t.width+t.x,o=o*t.height+t.y,l=l*t.height+t.y),i=isNaN(i)?0:i,a=isNaN(a)?1:a,o=isNaN(o)?0:o,l=isNaN(l)?0:l,r.createLinearGradient(i,o,a,l)}(r,n,t),a=n.colorStops,o=0;o<a.length;o++)i.addColorStop(a[o].offset,a[o].color);return i}function t0(r){return parseInt(r,10)}function Dd(r,n,t){var i=["width","height"][n],a=["clientWidth","clientHeight"][n],o=["paddingLeft","paddingTop"][n],l=["paddingRight","paddingBottom"][n];if(null!=t[i]&&"auto"!==t[i])return parseFloat(t[i]);var u=document.defaultView.getComputedStyle(r);return(r[a]||t0(u[i])||t0(r.style[i]))-(t0(u[o])||0)-(t0(u[l])||0)|0}function cT(r){var n=r.style,t=n.lineDash&&n.lineWidth>0&&function Y6(r,n){return r&&"solid"!==r&&n>0?"dashed"===r?[4*n,2*n]:"dotted"===r?[n]:Ve(r)?[r]:we(r)?r:null:null}(n.lineDash,n.lineWidth),i=n.lineDashOffset;if(t){var a=n.strokeNoScale&&r.getLineScale?r.getLineScale():1;a&&1!==a&&(t=_t(t,function(o){return o/a}),i/=a)}return[t,i]}var Q6=new Fo(!0);function n0(r){var n=r.stroke;return!(null==n||"none"===n||!(r.lineWidth>0))}function FD(r){return"string"==typeof r&&"none"!==r}function r0(r){var n=r.fill;return null!=n&&"none"!==n}function BD(r,n){if(null!=n.fillOpacity&&1!==n.fillOpacity){var t=r.globalAlpha;r.globalAlpha=n.fillOpacity*n.opacity,r.fill(),r.globalAlpha=t}else r.fill()}function ZD(r,n){if(null!=n.strokeOpacity&&1!==n.strokeOpacity){var t=r.globalAlpha;r.globalAlpha=n.strokeOpacity*n.opacity,r.stroke(),r.globalAlpha=t}else r.stroke()}function hT(r,n,t){var i=Nf(n.image,n.__image,t);if(qh(i)){var a=r.createPattern(i,n.repeat||"repeat");if("function"==typeof DOMMatrix&&a&&a.setTransform){var o=new DOMMatrix;o.translateSelf(n.x||0,n.y||0),o.rotateSelf(0,0,(n.rotation||0)*Ei),o.scaleSelf(n.scaleX||1,n.scaleY||1),a.setTransform(o)}return a}}var UD=["shadowBlur","shadowOffsetX","shadowOffsetY"],VD=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function HD(r,n,t,i,a){var o=!1;if(!i&&n===(t=t||{}))return!1;if(i||n.opacity!==t.opacity){ro(r,a),o=!0;var l=Math.max(Math.min(n.opacity,1),0);r.globalAlpha=isNaN(l)?Rl.opacity:l}(i||n.blend!==t.blend)&&(o||(ro(r,a),o=!0),r.globalCompositeOperation=n.blend||Rl.blend);for(var u=0;u<UD.length;u++){var c=UD[u];(i||n[c]!==t[c])&&(o||(ro(r,a),o=!0),r[c]=r.dpr*(n[c]||0))}return(i||n.shadowColor!==t.shadowColor)&&(o||(ro(r,a),o=!0),r.shadowColor=n.shadowColor||Rl.shadowColor),o}function WD(r,n,t,i,a){var o=jp(n,a.inHover),l=i?null:t&&jp(t,a.inHover)||{};if(o===l)return!1;var u=HD(r,o,l,i,a);if((i||o.fill!==l.fill)&&(u||(ro(r,a),u=!0),FD(o.fill)&&(r.fillStyle=o.fill)),(i||o.stroke!==l.stroke)&&(u||(ro(r,a),u=!0),FD(o.stroke)&&(r.strokeStyle=o.stroke)),(i||o.opacity!==l.opacity)&&(u||(ro(r,a),u=!0),r.globalAlpha=null==o.opacity?1:o.opacity),n.hasStroke()){var h=o.lineWidth/(o.strokeNoScale&&n.getLineScale?n.getLineScale():1);r.lineWidth!==h&&(u||(ro(r,a),u=!0),r.lineWidth=h)}for(var f=0;f<VD.length;f++){var p=VD[f],v=p[0];(i||o[v]!==l[v])&&(u||(ro(r,a),u=!0),r[v]=o[v]||p[1])}return u}function GD(r,n){var t=n.transform,i=r.dpr||1;t?r.setTransform(i*t[0],i*t[1],i*t[2],i*t[3],i*t[4],i*t[5]):r.setTransform(i,0,0,i,0,0)}function ro(r,n){n.batchFill&&r.fill(),n.batchStroke&&r.stroke(),n.batchFill="",n.batchStroke=""}function jp(r,n){return n&&r.__hoverStyle||r.style}function dT(r,n){jc(r,n,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function jc(r,n,t,i){var a=n.transform;if(!n.shouldBePainted(t.viewWidth,t.viewHeight,!1,!1))return n.__dirty&=-2,void(n.__isRendered=!1);var o=n.__clipPaths,l=t.prevElClipPaths,u=!1,c=!1;if((!l||function J6(r,n){if(r===n||!r&&!n)return!1;if(!r||!n||r.length!==n.length)return!0;for(var t=0;t<r.length;t++)if(r[t]!==n[t])return!0;return!1}(o,l))&&(l&&l.length&&(ro(r,t),r.restore(),c=u=!0,t.prevElClipPaths=null,t.allClipped=!1,t.prevEl=null),o&&o.length&&(ro(r,t),r.save(),function X6(r,n,t){for(var i=!1,a=0;a<r.length;a++){var o=r[a];i=i||o.isZeroArea(),GD(n,o),n.beginPath(),o.buildPath(n,o.shape),n.clip()}t.allClipped=i}(o,r,t),u=!0),t.prevElClipPaths=o),t.allClipped)n.__isRendered=!1;else{n.beforeBrush&&n.beforeBrush(),n.innerBeforeBrush();var h=t.prevEl;h||(c=u=!0);var f=n instanceof Fn&&n.autoBatch&&function tN(r){var n=r0(r),t=n0(r);return!(r.lineDash||!(+n^+t)||n&&"string"!=typeof r.fill||t&&"string"!=typeof r.stroke||r.strokePercent<1||r.strokeOpacity<1||r.fillOpacity<1)}(n.style);u||function eN(r,n){return r&&n?r[0]!==n[0]||r[1]!==n[1]||r[2]!==n[2]||r[3]!==n[3]||r[4]!==n[4]||r[5]!==n[5]:!(!r&&!n)}(a,h.transform)?(ro(r,t),GD(r,n)):f||ro(r,t);var p=jp(n,t.inHover);n instanceof Fn?(1!==t.lastDrawType&&(c=!0,t.lastDrawType=1),WD(r,n,h,c,t),(!f||!t.batchFill&&!t.batchStroke)&&r.beginPath(),function q6(r,n,t,i){var a,o=n0(t),l=r0(t),u=t.strokePercent,c=u<1,h=!n.path;(!n.silent||c)&&h&&n.createPathProxy();var f=n.path||Q6,p=n.__dirty;if(!i){var v=t.fill,m=t.stroke,y=l&&!!v.colorStops,C=o&&!!m.colorStops,T=l&&!!v.image,z=o&&!!m.image,E=void 0,N=void 0,X=void 0,ve=void 0,ce=void 0;(y||C)&&(ce=n.getBoundingRect()),y&&(E=p?uT(r,v,ce):n.__canvasFillGradient,n.__canvasFillGradient=E),C&&(N=p?uT(r,m,ce):n.__canvasStrokeGradient,n.__canvasStrokeGradient=N),T&&(X=p||!n.__canvasFillPattern?hT(r,v,n):n.__canvasFillPattern,n.__canvasFillPattern=X),z&&(ve=p||!n.__canvasStrokePattern?hT(r,m,n):n.__canvasStrokePattern,n.__canvasStrokePattern=X),y?r.fillStyle=E:T&&(X?r.fillStyle=X:l=!1),C?r.strokeStyle=N:z&&(ve?r.strokeStyle=ve:o=!1)}var ze,Ee,_e=n.getGlobalScale();f.setScale(_e[0],_e[1],n.segmentIgnoreThreshold),r.setLineDash&&t.lineDash&&(ze=(a=cT(n))[0],Ee=a[1]);var Le=!0;(h||4&p)&&(f.setDPR(r.dpr),c?f.setContext(null):(f.setContext(r),Le=!1),f.reset(),n.buildPath(f,n.shape,i),f.toStatic(),n.pathUpdated()),Le&&f.rebuildPath(r,c?u:1),ze&&(r.setLineDash(ze),r.lineDashOffset=Ee),i||(t.strokeFirst?(o&&ZD(r,t),l&&BD(r,t)):(l&&BD(r,t),o&&ZD(r,t))),ze&&r.setLineDash([])}(r,n,p,f),f&&(t.batchFill=p.fill||"",t.batchStroke=p.stroke||"")):n instanceof Dc?(3!==t.lastDrawType&&(c=!0,t.lastDrawType=3),WD(r,n,h,c,t),function $6(r,n,t){var i,a=t.text;if(null!=a&&(a+=""),a){r.font=t.font||Pt,r.textAlign=t.textAlign,r.textBaseline=t.textBaseline;var o=void 0,l=void 0;r.setLineDash&&t.lineDash&&(o=(i=cT(n))[0],l=i[1]),o&&(r.setLineDash(o),r.lineDashOffset=l),t.strokeFirst?(n0(t)&&r.strokeText(a,t.x,t.y),r0(t)&&r.fillText(a,t.x,t.y)):(r0(t)&&r.fillText(a,t.x,t.y),n0(t)&&r.strokeText(a,t.x,t.y)),o&&r.setLineDash([])}}(r,n,p)):n instanceof ki?(2!==t.lastDrawType&&(c=!0,t.lastDrawType=2),function j6(r,n,t,i,a){HD(r,jp(n,a.inHover),t&&jp(t,a.inHover),i,a)}(r,n,h,c,t),function K6(r,n,t){var i=n.__image=Nf(t.image,n.__image,n,n.onload);if(i&&qh(i)){var a=t.x||0,o=t.y||0,l=n.getWidth(),u=n.getHeight(),c=i.width/i.height;if(null==l&&null!=u?l=u*c:null==u&&null!=l?u=l/c:null==l&&null==u&&(l=i.width,u=i.height),t.sWidth&&t.sHeight)r.drawImage(i,h=t.sx||0,f=t.sy||0,t.sWidth,t.sHeight,a,o,l,u);else if(t.sx&&t.sy){var h,f;r.drawImage(i,h=t.sx,f=t.sy,l-h,u-f,a,o,l,u)}else r.drawImage(i,a,o,l,u)}}(r,n,p)):n.getTemporalDisplayables&&(4!==t.lastDrawType&&(c=!0,t.lastDrawType=4),function nN(r,n,t){var i=n.getDisplayables(),a=n.getTemporalDisplayables();r.save();var l,u,o={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:t.viewWidth,viewHeight:t.viewHeight,inHover:t.inHover};for(l=n.getCursor(),u=i.length;l<u;l++)(c=i[l]).beforeBrush&&c.beforeBrush(),c.innerBeforeBrush(),jc(r,c,o,l===u-1),c.innerAfterBrush(),c.afterBrush&&c.afterBrush(),o.prevEl=c;for(var h=0,f=a.length;h<f;h++){var c;(c=a[h]).beforeBrush&&c.beforeBrush(),c.innerBeforeBrush(),jc(r,c,o,h===f-1),c.innerAfterBrush(),c.afterBrush&&c.afterBrush(),o.prevEl=c}n.clearTemporalDisplayables(),n.notClear=!0,r.restore()}(r,n,t)),f&&i&&ro(r,t),n.innerAfterBrush(),n.afterBrush&&n.afterBrush(),t.prevEl=n,n.__dirty=0,n.__isRendered=!0}}var fT=new L6,KD=new Ct(100),$D=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function Xp(r,n){if("none"===r)return null;var t=n.getDevicePixelRatio(),i=n.getZr(),a="svg"===i.painter.type;r.dirty&&fT.delete(r);var o=fT.get(r);if(o)return o;var l=Dt(r,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});"none"===l.backgroundColor&&(l.backgroundColor=null);var u={repeat:"repeat"};return function c(h){for(var f=[t],p=!0,v=0;v<$D.length;++v){var m=l[$D[v]];if(null!=m&&!we(m)&&!Qe(m)&&!Ve(m)&&"boolean"!=typeof m){p=!1;break}f.push(m)}var y;if(p){y=f.join(",")+(a?"-svg":"");var C=KD.get(y);C&&(a?h.svgElement=C:h.image=C)}var ze,T=XD(l.dashArrayX),z=function rN(r){if(!r||"object"==typeof r&&0===r.length)return[0,0];if(Ve(r)){var n=Math.ceil(r);return[n,n]}var t=_t(r,function(i){return Math.ceil(i)});return r.length%2?t.concat(t):t}(l.dashArrayY),E=jD(l.symbol),N=function iN(r){return _t(r,function(n){return eA(n)})}(T),X=eA(z),ve=!a&&fn.createCanvas(),ce=a&&{tag:"g",attrs:{},key:"dcl",children:[]},_e=function Ee(){for(var ke=1,Ue=0,He=N.length;Ue<He;++Ue)ke=Ov(ke,N[Ue]);var Ke=1;for(Ue=0,He=E.length;Ue<He;++Ue)Ke=Ov(Ke,E[Ue].length);ke*=Ke;var nt=X*N.length*E.length;return{width:Math.max(1,Math.min(ke,l.maxTileWidth)),height:Math.max(1,Math.min(nt,l.maxTileHeight))}}();ve&&(ve.width=_e.width*t,ve.height=_e.height*t,ze=ve.getContext("2d")),function Le(){ze&&(ze.clearRect(0,0,ve.width,ve.height),l.backgroundColor&&(ze.fillStyle=l.backgroundColor,ze.fillRect(0,0,ve.width,ve.height)));for(var ke=0,Ue=0;Ue<z.length;++Ue)ke+=z[Ue];if(!(ke<=0))for(var He=-X,Ke=0,nt=0,lt=0;He<_e.height;){if(Ke%2==0){for(var St=nt/2%E.length,mt=0,wt=0,kt=0;mt<2*_e.width;){var Yt=0;for(Ue=0;Ue<T[lt].length;++Ue)Yt+=T[lt][Ue];if(Yt<=0)break;if(wt%2==0){var Xt=.5*(1-l.symbolSize);vn(mt+T[lt][wt]*Xt,He+z[Ke]*Xt,T[lt][wt]*l.symbolSize,z[Ke]*l.symbolSize,E[St][kt/2%E[St].length])}mt+=T[lt][wt],++kt,++wt===T[lt].length&&(wt=0)}++lt===T.length&&(lt=0)}He+=z[Ke],++nt,++Ke===z.length&&(Ke=0)}function vn(Hn,kn,rn,On,ci){var rr=a?1:t,Ci=wi(ci,Hn*rr,kn*rr,rn*rr,On*rr,l.color,l.symbolKeepAspect);if(a){var gi=i.painter.renderOneToVNode(Ci);gi&&ce.children.push(gi)}else dT(ze,Ci)}}(),p&&KD.put(y,ve||ce),h.image=ve,h.svgElement=ce,h.svgWidth=_e.width,h.svgHeight=_e.height}(u),u.rotation=l.rotation,u.scaleX=u.scaleY=a?1:1/t,fT.set(r,u),r.dirty=!1,u}function jD(r){if(!r||0===r.length)return[["rect"]];if(Qe(r))return[[r]];for(var n=!0,t=0;t<r.length;++t)if(!Qe(r[t])){n=!1;break}if(n)return jD([r]);var i=[];for(t=0;t<r.length;++t)Qe(r[t])?i.push([r[t]]):i.push(r[t]);return i}function XD(r){if(!r||0===r.length)return[[0,0]];if(Ve(r))return[[n=Math.ceil(r),n]];for(var t=!0,i=0;i<r.length;++i)if(!Ve(r[i])){t=!1;break}if(t)return XD([r]);var a=[];for(i=0;i<r.length;++i)if(Ve(r[i])){var n=Math.ceil(r[i]);a.push([n,n])}else n=_t(r[i],function(u){return Math.ceil(u)}),a.push(n.length%2==1?n.concat(n):n);return a}function eA(r){for(var n=0,t=0;t<r.length;++t)n+=r[t];return r.length%2==1?2*n:n}const bs=new Oi;var tA={};function nA(r){return tA[r]}var lN="undefined"!=typeof window,uN="5.3.2",cN={zrender:"5.3.1"},oA={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:2e3,CHART:3e3,POST_CHART_LAYOUT:4600,COMPONENT:4e3,BRUSH:5e3,CHART_ITEM:4500,ARIA:6e3,DECAL:7e3}},ma="__flagInMainProcess",io="__pendingUpdate",gT="__needsUpdateStatus",sA=/^[a-zA-Z0-9_]+$/,vT="__connectUpdateStatus";function uA(r){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(!this.isDisposed())return hA(this,r,n)}}function cA(r){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return hA(this,r,n)}}function hA(r,n,t){return t[0]=t[0]&&t[0].toLowerCase(),Oi.prototype[n].apply(r,t)}var dA=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return R(n,r),n}(Oi),fA=dA.prototype;fA.on=cA("on"),fA.off=cA("off");var Ad,mT,o0,Yu,_T,yT,CT,eg,tg,pA,gA,xT,vA,s0,mA,_A,Go,yA,l0=function(r){function n(t,i,a){var o=r.call(this,new A6)||this;o._chartsViews=[],o._chartsMap={},o._componentsViews=[],o._componentsMap={},o._pendingActions=[],a=a||{},Qe(i)&&(i=CA[i]),o._dom=t;var f=o._zr=wf(t,{renderer:a.renderer||"canvas",devicePixelRatio:a.devicePixelRatio,width:a.width,height:a.height,ssr:a.ssr,useDirtyRect:null!=a.useDirtyRect&&a.useDirtyRect});o._ssr=a.ssr,o._throttledZrFlush=K_(qe(f.flush,f),17),(i=Nt(i))&&Ip(i,!0),o._theme=i,o._locale=function jC(r){if(Qe(r)){var n=sd[r.toUpperCase()]||{};return"ZH"===r||"EN"===r?Nt(n):Zt(Nt(n),Nt(sd.EN),!1)}return Zt(Nt(r),Nt(sd.EN),!1)}(a.locale||Gm),o._coordSysMgr=new Fu;var p=o._api=mA(o);function v(m,y){return m.__prio-y.__prio}return An(c0,v),An(bT,v),o._scheduler=new MD(o,p,bT,c0),o._messageCenter=new dA,o._initEvents(),o.resize=qe(o.resize,o),f.animation.on("frame",o._onframe,o),pA(f,o),gA(f,o),Yi(o),o}return R(n,r),n.prototype._onframe=function(){if(!this._disposed){yA(this);var t=this._scheduler;if(this[io]){var i=this[io].silent;this[ma]=!0;try{Ad(this),Yu.update.call(this,null,this[io].updateParams)}catch(c){throw this[ma]=!1,this[io]=null,c}this._zr.flush(),this[ma]=!1,this[io]=null,eg.call(this,i),tg.call(this,i)}else if(t.unfinished){var a=1,o=this._model,l=this._api;t.unfinished=!1;do{var u=+new Date;t.performSeriesTasks(o),t.performDataProcessorTasks(o),yT(this,o),t.performVisualTasks(o),s0(this,this._model,l,"remain",{}),a-=+new Date-u}while(a>0&&t.unfinished);t.unfinished||this._zr.flush()}}},n.prototype.getDom=function(){return this._dom},n.prototype.getId=function(){return this.id},n.prototype.getZr=function(){return this._zr},n.prototype.isSSR=function(){return this._ssr},n.prototype.setOption=function(t,i,a){if(!this[ma]){if(this._disposed)return;var o,l,u;if(tt(i)&&(a=i.lazyUpdate,o=i.silent,l=i.replaceMerge,u=i.transition,i=i.notMerge),this[ma]=!0,!this._model||i){var c=new fw(this._api),h=this._theme,f=this._model=new C_;f.scheduler=this._scheduler,f.ssr=this._ssr,f.init(null,null,null,h,this._locale,c)}this._model.setOption(t,{replaceMerge:l},ST);var p={seriesTransition:u,optionChanged:!0};if(a)this[io]={silent:o,updateParams:p},this[ma]=!1,this.getZr().wakeUp();else{try{Ad(this),Yu.update.call(this,null,p)}catch(v){throw this[io]=null,this[ma]=!1,v}this._ssr||this._zr.flush(),this[io]=null,this[ma]=!1,eg.call(this,o),tg.call(this,o)}}},n.prototype.setTheme=function(){},n.prototype.getModel=function(){return this._model},n.prototype.getOption=function(){return this._model&&this._model.getOption()},n.prototype.getWidth=function(){return this._zr.getWidth()},n.prototype.getHeight=function(){return this._zr.getHeight()},n.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||lN&&window.devicePixelRatio||1},n.prototype.getRenderedCanvas=function(t){return this.renderToCanvas(t)},n.prototype.renderToCanvas=function(t){return this._zr.painter.getRenderedCanvas({backgroundColor:(t=t||{}).backgroundColor||this._model.get("backgroundColor"),pixelRatio:t.pixelRatio||this.getDevicePixelRatio()})},n.prototype.renderToSVGString=function(t){return this._zr.painter.renderToString({useViewBox:(t=t||{}).useViewBox})},n.prototype.getSvgDataURL=function(){if(gt.svgSupported){var t=this._zr;return De(t.storage.getDisplayList(),function(a){a.stopAnimation(null,!0)}),t.painter.toDataURL()}},n.prototype.getDataURL=function(t){if(!this._disposed){var a=this._model,o=[],l=this;De((t=t||{}).excludeComponents,function(c){a.eachComponent({mainType:c},function(h){var f=l._componentsMap[h.__viewId];f.group.ignore||(o.push(f),f.group.ignore=!0)})});var u="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.renderToCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return De(o,function(c){c.group.ignore=!1}),u}},n.prototype.getConnectedDataURL=function(t){if(!this._disposed){var i="svg"===t.type,a=this.group,o=Math.min,l=Math.max,u=1/0;if(h0[a]){var c=u,h=u,f=-u,p=-u,v=[],m=t&&t.pixelRatio||this.getDevicePixelRatio();De(Xc,function(N,X){if(N.group===a){var ve=i?N.getZr().painter.getSvgDom().innerHTML:N.renderToCanvas(Nt(t)),ce=N.getDom().getBoundingClientRect();c=o(ce.left,c),h=o(ce.top,h),f=l(ce.right,f),p=l(ce.bottom,p),v.push({dom:ve,left:ce.left,top:ce.top})}});var y=(f*=m)-(c*=m),C=(p*=m)-(h*=m),T=fn.createCanvas(),z=wf(T,{renderer:i?"svg":"canvas"});if(z.resize({width:y,height:C}),i){var E="";return De(v,function(N){E+='<g transform="translate('+(N.left-c)+","+(N.top-h)+')">'+N.dom+"</g>"}),z.painter.getSvgRoot().innerHTML=E,t.connectedBackgroundColor&&z.painter.setBackgroundColor(t.connectedBackgroundColor),z.refreshImmediately(),z.painter.toDataURL()}return t.connectedBackgroundColor&&z.add(new Qn({shape:{x:0,y:0,width:y,height:C},style:{fill:t.connectedBackgroundColor}})),De(v,function(N){var X=new ki({style:{x:N.left*m-c,y:N.top*m-h,image:N.dom}});z.add(X)}),z.refreshImmediately(),T.toDataURL("image/"+(t&&t.type||"png"))}return this.getDataURL(t)}},n.prototype.convertToPixel=function(t,i){return _T(this,"convertToPixel",t,i)},n.prototype.convertFromPixel=function(t,i){return _T(this,"convertFromPixel",t,i)},n.prototype.containPixel=function(t,i){var o;if(!this._disposed)return De(Tc(this._model,t),function(u,c){c.indexOf("Models")>=0&&De(u,function(h){var f=h.coordinateSystem;if(f&&f.containPoint)o=o||!!f.containPoint(i);else if("seriesModels"===c){var p=this._chartsMap[h.__viewId];p&&p.containPoint&&(o=o||p.containPoint(i,h))}},this)},this),!!o},n.prototype.getVisual=function(t,i){var o=Tc(this._model,t,{defaultMainType:"series"}),u=o.seriesModel.getData(),c=o.hasOwnProperty("dataIndexInside")?o.dataIndexInside:o.hasOwnProperty("dataIndex")?u.indexOfRawIndex(o.dataIndex):null;return null!=c?lT(u,c,i):Kp(u,i)},n.prototype.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},n.prototype.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]},n.prototype._initEvents=function(){var t=this;De(SN,function(i){var a=function(o){var c,l=t.getModel(),u=o.target;if("globalout"===i?c={}:u&&zd(u,function(y){var C=dn(y);if(C&&null!=C.dataIndex){var T=C.dataModel||l.getSeriesByIndex(C.seriesIndex);return c=T&&T.getDataParams(C.dataIndex,C.dataType)||{},!0}if(C.eventData)return c=Ge({},C.eventData),!0},!0),c){var f=c.componentType,p=c.componentIndex;("markLine"===f||"markPoint"===f||"markArea"===f)&&(f="series",p=c.seriesIndex);var v=f&&null!=p&&l.getComponent(f,p),m=v&&t["series"===v.mainType?"_chartsMap":"_componentsMap"][v.__viewId];c.event=o,c.type=i,t._$eventProcessor.eventInfo={targetEl:u,packedEvent:c,model:v,view:m},t.trigger(i,c)}};a.zrEventfulCallAtLast=!0,t._zr.on(i,a,t)}),De(ng,function(i,a){t._messageCenter.on(a,function(o){this.trigger(a,o)},t)}),De(["selectchanged"],function(i){t._messageCenter.on(i,function(a){this.trigger(i,a)},t)}),function O6(r,n,t){r.on("selectchanged",function(i){var a=t.getModel();i.isFromClick?(Sd("map","selectchanged",n,a,i),Sd("pie","selectchanged",n,a,i)):"select"===i.fromAction?(Sd("map","selected",n,a,i),Sd("pie","selected",n,a,i)):"unselect"===i.fromAction&&(Sd("map","unselected",n,a,i),Sd("pie","unselected",n,a,i))})}(this._messageCenter,this,this._api)},n.prototype.isDisposed=function(){return this._disposed},n.prototype.clear=function(){this._disposed||this.setOption({series:[]},!0)},n.prototype.dispose=function(){if(!this._disposed){this._disposed=!0,this.getDom()&&Bv(this.getDom(),wT,"");var i=this,a=i._api,o=i._model;De(i._componentsViews,function(l){l.dispose(o,a)}),De(i._chartsViews,function(l){l.dispose(o,a)}),i._zr.dispose(),i._dom=i._model=i._chartsMap=i._componentsMap=i._chartsViews=i._componentsViews=i._scheduler=i._api=i._zr=i._throttledZrFlush=i._theme=i._coordSysMgr=i._messageCenter=null,delete Xc[i.id]}},n.prototype.resize=function(t){if(!this[ma]){if(this._disposed)return;this._zr.resize(t);var i=this._model;if(this._loadingFX&&this._loadingFX.resize(),i){var a=i.resetOption("media"),o=t&&t.silent;this[io]&&(null==o&&(o=this[io].silent),a=!0,this[io]=null),this[ma]=!0;try{a&&Ad(this),Yu.update.call(this,{type:"resize",animation:Ge({duration:0},t&&t.animation)})}catch(l){throw this[ma]=!1,l}this[ma]=!1,eg.call(this,o),tg.call(this,o)}}},n.prototype.showLoading=function(t,i){if(!this._disposed&&(tt(t)&&(i=t,t=""),t=t||"default",this.hideLoading(),zT[t])){var a=zT[t](this._api,i),o=this._zr;this._loadingFX=a,o.add(a)}},n.prototype.hideLoading=function(){this._disposed||(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},n.prototype.makeActionFromEvent=function(t){var i=Ge({},t);return i.type=ng[t.type],i},n.prototype.dispatchAction=function(t,i){if(!this._disposed&&(tt(i)||(i={silent:!!i}),u0[t.type]&&this._model)){if(this[ma])return void this._pendingActions.push(t);var a=i.silent;CT.call(this,t,a);var o=i.flush;o?this._zr.flush():!1!==o&&gt.browser.weChat&&this._throttledZrFlush(),eg.call(this,a),tg.call(this,a)}},n.prototype.updateLabelLayout=function(){bs.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},n.prototype.appendData=function(t){if(!this._disposed){var i=t.seriesIndex;this.getModel().getSeriesByIndex(i).appendData(t),this._scheduler.unfinished=!0,this.getZr().wakeUp()}},n.internalField=function(){function t(p){p.clearColorPalette(),p.eachSeries(function(v){v.clearColorPalette()})}function a(p){for(var v=[],m=p.currentStates,y=0;y<m.length;y++){var C=m[y];"emphasis"===C||"blur"===C||"select"===C||v.push(C)}p.selected&&p.states.select&&v.push("select"),2===p.hoverState&&p.states.emphasis?v.push("emphasis"):1===p.hoverState&&p.states.blur&&v.push("blur"),p.useStates(v)}function u(p,v){if(!p.preventAutoZ){var m=p.get("z")||0,y=p.get("zlevel")||0;v.eachRendered(function(C){return c(C,m,y,-1/0),!0})}}function c(p,v,m,y){var C=p.getTextContent(),T=p.getTextGuideLine();if(p.isGroup)for(var E=p.childrenRef(),N=0;N<E.length;N++)y=Math.max(c(E[N],v,m,y),y);else p.z=v,p.zlevel=m,y=Math.max(p.z2,y);if(C&&(C.z=v,C.zlevel=m,isFinite(y)&&(C.z2=y+2)),T){var X=p.textGuideLineConfig;T.z=v,T.zlevel=m,isFinite(y)&&(T.z2=y+(X&&X.showAbove?1:-1))}return y}function h(p,v){v.eachRendered(function(m){if(!Du(m)){var y=m.getTextContent(),C=m.getTextGuideLine();m.stateTransition&&(m.stateTransition=null),y&&y.stateTransition&&(y.stateTransition=null),C&&C.stateTransition&&(C.stateTransition=null),m.hasState()?(m.prevStates=m.currentStates,m.clearStates()):m.prevStates&&(m.prevStates=null)}})}function f(p,v){var m=p.getModel("stateAnimation"),y=p.isAnimationEnabled(),C=m.get("duration"),T=C>0?{duration:C,delay:m.get("delay"),easing:m.get("easing")}:null;v.eachRendered(function(z){if(z.states&&z.states.emphasis){if(Du(z))return;if(z instanceof Fn&&function FC(r){var n=mm(r);n.normalFill=r.style.fill,n.normalStroke=r.style.stroke;var t=r.states.select||{};n.selectFill=t.style&&t.style.fill||null,n.selectStroke=t.style&&t.style.stroke||null}(z),z.__dirty){var E=z.prevStates;E&&z.useStates(E)}if(y){z.stateTransition=T;var N=z.getTextContent(),X=z.getTextGuideLine();N&&(N.stateTransition=T),X&&(X.stateTransition=T)}z.__dirty&&a(z)}})}Ad=function(p){var v=p._scheduler;v.restorePipelines(p._model),v.prepareStageTasks(),mT(p,!0),mT(p,!1),v.plan()},mT=function(p,v){for(var m=p._model,y=p._scheduler,C=v?p._componentsViews:p._chartsViews,T=v?p._componentsMap:p._chartsMap,z=p._zr,E=p._api,N=0;N<C.length;N++)C[N].__alive=!1;function X(ce){var _e=ce.__requireNewView;ce.__requireNewView=!1;var ze="_ec_"+ce.id+"_"+ce.type,Ee=!_e&&T[ze];if(!Ee){var Le=ko(ce.type);(Ee=new(v?oi.getClass(Le.main,Le.sub):Vr.getClass(Le.sub))).init(m,E),T[ze]=Ee,C.push(Ee),z.add(Ee.group)}ce.__viewId=Ee.__id=ze,Ee.__alive=!0,Ee.__model=ce,Ee.group.__ecComponentInfo={mainType:ce.mainType,index:ce.componentIndex},!v&&y.prepareView(Ee,ce,m,E)}for(v?m.eachComponent(function(ce,_e){"series"!==ce&&X(_e)}):m.eachSeries(X),N=0;N<C.length;){var ve=C[N];ve.__alive?N++:(!v&&ve.renderTask.dispose(),z.remove(ve.group),ve.dispose(m,E),C.splice(N,1),T[ve.__id]===ve&&delete T[ve.__id],ve.__id=ve.group.__ecComponentInfo=null)}},o0=function(p,v,m,y,C){var T=p._model;if(T.setUpdatePayload(m),y){var z={};z[y+"Id"]=m[y+"Id"],z[y+"Index"]=m[y+"Index"],z[y+"Name"]=m[y+"Name"];var E={mainType:y,query:z};C&&(E.subType=C);var X,N=m.excludeSeriesId;null!=N&&(X=Kt(),De(Dr(N),function(ce){var _e=Si(ce,null);null!=_e&&X.set(_e,!0)})),T&&T.eachComponent(E,function(ce){if(!X||null===X.get(ce.id))if(Mm(m))if(ce instanceof Xr)m.type===js&&!m.notBlur&&!ce.get(["emphasis","disabled"])&&function EC(r,n,t){var i=r.seriesIndex,a=r.getData(n.dataType);if(a){var o=kl(a,n);o=(we(o)?o[0]:o)||0;var l=a.getItemGraphicEl(o);if(!l)for(var u=a.count(),c=0;!l&&c<u;)l=a.getItemGraphicEl(c++);if(l){var h=dn(l);ap(i,h.focus,h.blurScope,t)}else{var f=r.get(["emphasis","focus"]),p=r.get(["emphasis","blurScope"]);null!=f&&ap(i,f,p,t)}}}(ce,m,p._api);else{var ze=sp(ce.mainType,ce.componentIndex,m.name,p._api),Le=ze.dispatchers;m.type===js&&ze.focusSelf&&!m.notBlur&&op(ce.mainType,ce.componentIndex,p._api),Le&&De(Le,function(ke){m.type===js?gs(ke):vs(ke)})}else up(m)&&ce instanceof Xr&&(function PC(r,n,t){if(up(n)){var i=n.dataType,o=kl(r.getData(i),n);we(o)||(o=[o]),r[n.type===bu?"toggleSelect":n.type===kc?"select":"unselect"](o,i)}}(ce,m),Am(ce),Go(p))},p),T&&T.eachComponent(E,function(ce){X&&null!==X.get(ce.id)||ve(p["series"===y?"_chartsMap":"_componentsMap"][ce.__viewId])},p)}else De([].concat(p._componentsViews).concat(p._chartsViews),ve);function ve(ce){ce&&ce.__alive&&ce[v]&&ce[v](ce.__model,T,p._api,m)}},Yu={prepareAndUpdate:function(p){Ad(this),Yu.update.call(this,p,{optionChanged:null!=p.newOption})},update:function(p,v){var m=this._model,y=this._api,C=this._zr,T=this._coordSysMgr,z=this._scheduler;if(m){m.setUpdatePayload(p),z.restoreData(m,p),z.performSeriesTasks(m),T.create(m,y),z.performDataProcessorTasks(m,p),yT(this,m),T.update(m,y),t(m),z.performVisualTasks(m,p),xT(this,m,y,p,v);var E=m.get("backgroundColor")||"transparent",N=m.get("darkMode");C.setBackgroundColor(E),null!=N&&"auto"!==N&&C.setDarkMode(N),bs.trigger("afterupdate",m,y)}},updateTransform:function(p){var v=this,m=this._model,y=this._api;if(m){m.setUpdatePayload(p);var C=[];m.eachComponent(function(z,E){if("series"!==z){var N=v.getViewOfComponentModel(E);if(N&&N.__alive)if(N.updateTransform){var X=N.updateTransform(E,m,y,p);X&&X.update&&C.push(N)}else C.push(N)}});var T=Kt();m.eachSeries(function(z){var E=v._chartsMap[z.__viewId];if(E.updateTransform){var N=E.updateTransform(z,m,y,p);N&&N.update&&T.set(z.uid,1)}else T.set(z.uid,1)}),t(m),this._scheduler.performVisualTasks(m,p,{setDirty:!0,dirtyMap:T}),s0(this,m,y,p,{},T),bs.trigger("afterupdate",m,y)}},updateView:function(p){var v=this._model;!v||(v.setUpdatePayload(p),Vr.markUpdateMethod(p,"updateView"),t(v),this._scheduler.performVisualTasks(v,p,{setDirty:!0}),xT(this,v,this._api,p,{}),bs.trigger("afterupdate",v,this._api))},updateVisual:function(p){var v=this,m=this._model;!m||(m.setUpdatePayload(p),m.eachSeries(function(y){y.getData().clearAllVisual()}),Vr.markUpdateMethod(p,"updateVisual"),t(m),this._scheduler.performVisualTasks(m,p,{visualType:"visual",setDirty:!0}),m.eachComponent(function(y,C){if("series"!==y){var T=v.getViewOfComponentModel(C);T&&T.__alive&&T.updateVisual(C,m,v._api,p)}}),m.eachSeries(function(y){v._chartsMap[y.__viewId].updateVisual(y,m,v._api,p)}),bs.trigger("afterupdate",m,this._api))},updateLayout:function(p){Yu.update.call(this,p)}},_T=function(p,v,m,y){if(!p._disposed)for(var z,C=p._model,T=p._coordSysMgr.getCoordinateSystems(),E=Tc(C,m),N=0;N<T.length;N++){var X=T[N];if(X[v]&&null!=(z=X[v](C,E,y)))return z}},yT=function(p,v){var m=p._chartsMap,y=p._scheduler;v.eachSeries(function(C){y.updateStreamModes(C,m[C.__viewId])})},CT=function(p,v){var m=this,y=this.getModel(),C=p.type,T=p.escapeConnect,z=u0[C],E=z.actionInfo,N=(E.update||"update").split(":"),X=N.pop(),ve=null!=N[0]&&ko(N[0]);this[ma]=!0;var ce=[p],_e=!1;p.batch&&(_e=!0,ce=_t(p.batch,function(Ke){return(Ke=Dt(Ge({},Ke),p)).batch=null,Ke}));var Ee,ze=[],Le=up(p),ke=Mm(p);if(ke&&Dm(this._api),De(ce,function(Ke){if((Ee=(Ee=z.action(Ke,m._model,m._api))||Ge({},Ke)).type=E.event||Ee.type,ze.push(Ee),ke){var nt=If(p),mt=nt.mainTypeSpecified?nt.queryOptionMap.keys()[0]:"series";o0(m,X,Ke,mt),Go(m)}else Le?(o0(m,X,Ke,"series"),Go(m)):ve&&o0(m,X,Ke,ve.main,ve.sub)}),"none"!==X&&!ke&&!Le&&!ve)try{this[io]?(Ad(this),Yu.update.call(this,p),this[io]=null):Yu[X].call(this,p)}catch(Ke){throw this[ma]=!1,Ke}if(Ee=_e?{type:E.event||C,escapeConnect:T,batch:ze}:ze[0],this[ma]=!1,!v){var Ue=this._messageCenter;if(Ue.trigger(Ee.type,Ee),Le){var He={type:"selectchanged",escapeConnect:T,selected:IC(y),isFromClick:p.isFromClick||!1,fromAction:p.type,fromActionPayload:p};Ue.trigger(He.type,He)}}},eg=function(p){for(var v=this._pendingActions;v.length;){var m=v.shift();CT.call(this,m,p)}},tg=function(p){!p&&this.trigger("updated")},pA=function(p,v){p.on("rendered",function(m){v.trigger("rendered",m),p.animation.isFinished()&&!v[io]&&!v._scheduler.unfinished&&!v._pendingActions.length&&v.trigger("finished")})},gA=function(p,v){p.on("mouseover",function(m){var C=zd(m.target,Nc);C&&(function MC(r,n,t){var i=dn(r),a=sp(i.componentMainType,i.componentIndex,i.componentHighDownName,t),o=a.dispatchers;o?(a.focusSelf&&op(i.componentMainType,i.componentIndex,t),De(o,function(u){return zu(u,n)})):(ap(i.seriesIndex,i.focus,i.blurScope,t),"self"===i.focus&&op(i.componentMainType,i.componentIndex,t),zu(r,n))}(C,m,v._api),Go(v))}).on("mouseout",function(m){var C=zd(m.target,Nc);C&&(function OC(r,n,t){Dm(t);var i=dn(r),a=sp(i.componentMainType,i.componentIndex,i.componentHighDownName,t).dispatchers;a?De(a,function(o){return Tm(o,n)}):Tm(r,n)}(C,m,v._api),Go(v))}).on("click",function(m){var C=zd(m.target,function(E){return null!=dn(E).dataIndex},!0);if(C){var T=C.selected?"unselect":"select",z=dn(C);v._api.dispatchAction({type:T,dataType:z.dataType,dataIndexInside:z.dataIndex,seriesIndex:z.seriesIndex,isFromClick:!0})}})},xT=function(p,v,m,y,C){(function i(p){var v=[],m=[],y=!1;if(p.eachComponent(function(E,N){var X=N.get("zlevel")||0,ve=N.get("z")||0,ce=N.getZLevelKey();y=y||!!ce,("series"===E?m:v).push({zlevel:X,z:ve,idx:N.componentIndex,type:E,key:ce})}),y){var T,z,C=v.concat(m);An(C,function(E,N){return E.zlevel===N.zlevel?E.z-N.z:E.zlevel-N.zlevel}),De(C,function(E){var N=p.getComponent(E.type,E.idx),X=E.zlevel,ve=E.key;null!=T&&(X=Math.max(T,X)),ve?(X===T&&ve!==z&&X++,z=ve):z&&(X===T&&X++,z=""),T=X,N.setZLevel(X)})}})(v),vA(p,v,m,y,C),De(p._chartsViews,function(T){T.__alive=!1}),s0(p,v,m,y,C),De(p._chartsViews,function(T){T.__alive||T.remove(v,m)})},vA=function(p,v,m,y,C,T){De(T||p._componentsViews,function(z){var E=z.__model;h(0,z),z.render(E,v,m,y),u(E,z),f(E,z)})},s0=function(p,v,m,y,C,T){var z=p._scheduler;C=Ge(C||{},{updatedSeries:v.getSeries()}),bs.trigger("series:beforeupdate",v,m,C);var E=!1;v.eachSeries(function(N){var X=p._chartsMap[N.__viewId];X.__alive=!0;var ve=X.renderTask;z.updatePayload(ve,y),h(0,X),T&&T.get(N.uid)&&ve.dirty(),ve.perform(z.getPerformArgs(ve))&&(E=!0),X.group.silent=!!N.get("silent"),function l(p,v){var m=p.get("blendMode")||null;v.eachRendered(function(y){y.isGroup||(y.style.blend=m)})}(N,X),Am(N)}),z.unfinished=E||z.unfinished,bs.trigger("series:layoutlabels",v,m,C),bs.trigger("series:transition",v,m,C),v.eachSeries(function(N){var X=p._chartsMap[N.__viewId];u(N,X),f(N,X)}),function o(p,v){var C=0;p._zr.storage.traverse(function(T){T.isGroup||C++}),C>v.get("hoverLayerThreshold")&&!gt.node&&!gt.worker&&v.eachSeries(function(T){if(!T.preventUsingHoverLayer){var z=p._chartsMap[T.__viewId];z.__alive&&z.eachRendered(function(E){E.states.emphasis&&(E.states.emphasis.hoverLayer=!0)})}})}(p,v),bs.trigger("series:afterupdate",v,m,C)},Go=function(p){p[gT]=!0,p.getZr().wakeUp()},yA=function(p){!p[gT]||(p.getZr().storage.traverse(function(v){Du(v)||a(v)}),p[gT]=!1)},mA=function(p){return new(function(v){function m(){return null!==v&&v.apply(this,arguments)||this}return R(m,v),m.prototype.getCoordinateSystems=function(){return p._coordSysMgr.getCoordinateSystems()},m.prototype.getComponentByElement=function(y){for(;y;){var C=y.__ecComponentInfo;if(null!=C)return p._model.getComponent(C.mainType,C.index);y=y.parent}},m.prototype.enterEmphasis=function(y,C){gs(y,C),Go(p)},m.prototype.leaveEmphasis=function(y,C){vs(y,C),Go(p)},m.prototype.enterBlur=function(y){bm(y),Go(p)},m.prototype.leaveBlur=function(y){ip(y),Go(p)},m.prototype.enterSelect=function(y){Sm(y),Go(p)},m.prototype.leaveSelect=function(y){zm(y),Go(p)},m.prototype.getModel=function(){return p.getModel()},m.prototype.getViewOfComponentModel=function(y){return p.getViewOfComponentModel(y)},m.prototype.getViewOfSeriesModel=function(y){return p.getViewOfSeriesModel(y)},m}(xx))(p)},_A=function(p){function v(m,y){for(var C=0;C<m.length;C++)m[C][vT]=y}De(ng,function(m,y){p._messageCenter.on(y,function(C){if(h0[p.group]&&0!==p[vT]){if(C&&C.escapeConnect)return;var T=p.makeActionFromEvent(C),z=[];De(Xc,function(E){E!==p&&E.group===p.group&&z.push(E)}),v(z,0),De(z,function(E){1!==E[vT]&&E.dispatchAction(T)}),v(z,2)}})})}}(),n}(Oi),TT=l0.prototype;TT.on=uA("on"),TT.off=uA("off"),TT.one=function(r,n,t){var i=this;this.on.call(this,r,function a(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];n&&n.apply&&n.apply(this,o),i.off(r,a)},t)};var SN=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"],u0={},ng={},bT=[],ST=[],c0=[],CA={},zT={},Xc={},h0={},zN=+new Date-0,wN=+new Date-0,wT="_echarts_instance_";function DN(r,n,t){var i=!(t&&t.ssr);if(i){var a=DT(r);if(a)return a}var o=new l0(r,n,t);return o.id="ec_"+zN++,Xc[o.id]=o,i&&Bv(r,wT,o.id),_A(o),bs.trigger("afterinit",o),o}function AN(r){if(we(r)){var n=r;r=null,De(n,function(t){null!=t.group&&(r=t.group)}),r=r||"g_"+wN++,De(n,function(t){t.group=r})}return h0[r]=!0,r}function xA(r){h0[r]=!1}var EN=xA;function MN(r){Qe(r)?r=Xc[r]:r instanceof l0||(r=DT(r)),r instanceof l0&&!r.isDisposed()&&r.dispose()}function DT(r){return Xc[function w1(r,n){return r.getAttribute?r.getAttribute(n):r[n]}(r,wT)]}function ON(r){return Xc[r]}function AT(r,n){CA[r]=n}function ET(r){Ye(ST,r)<0&&ST.push(r)}function MT(r,n){OT(bT,r,n,2e3)}function TA(r){d0("afterinit",r)}function bA(r){d0("afterupdate",r)}function d0(r,n){bs.on(r,n)}function Ss(r,n,t){Pe(n)&&(t=n,n="");var i=tt(r)?r.type:[r,r={event:n}][0];r.event=(r.event||i).toLowerCase(),!ng[n=r.event]&&(ar(sA.test(i)&&sA.test(n)),u0[i]||(u0[i]={action:t,actionInfo:r}),ng[n]=i)}function SA(r,n){Fu.register(r,n)}function PN(r){var n=Fu.get(r);if(n)return n.getDimensionsInfo?n.getDimensionsInfo():n.dimensions.slice()}function zA(r,n){OT(c0,r,n,1e3,"layout")}function Qu(r,n){OT(c0,r,n,3e3,"visual")}var wA=[];function OT(r,n,t,i,a){if((Pe(n)||tt(n))&&(t=n,n=i),!(Ye(wA,t)>=0)){wA.push(t);var o=MD.wrapStageHandler(t,a);o.__prio=n,o.__raw=t,r.push(o)}}function PT(r,n){zT[r]=n}function IN(r){$n({createCanvas:r})}function DA(r,n,t){var i=nA("registerMap");i&&i(r,n,t)}function kN(r){var n=nA("getMap");return n&&n(r)}var AA=function aR(r){var n=(r=Nt(r)).type;n||Tr("");var i=n.split(":");2!==i.length&&Tr("");var a=!1;"echarts"===i[0]&&(n=i[1],a=!0),r.__isBuiltIn=a,Tw.set(n,r)};Qu(2e3,d6),Qu(4500,f6),Qu(4500,p6),Qu(2e3,E6),Qu(4500,M6),Qu(7e3,function aN(r,n){r.eachRawSeries(function(t){if(!r.isSeriesFiltered(t)){var i=t.getData();i.hasItemVisual()&&i.each(function(l){var u=i.getItemVisual(l,"decal");u&&(i.ensureUniqueItemVisual(l,"style").decal=Xp(u,n))});var a=i.getVisual("decal");a&&(i.getVisual("style").decal=Xp(a,n))}})}),ET(Ip),MT(900,function kx(r){var n=Kt();r.eachSeries(function(t){var i=t.get("stack");if(i){var a=n.get(i)||n.set(i,[]),o=t.getData(),l={stackResultDimension:o.getCalculationInfo("stackResultDimension"),stackedOverDimension:o.getCalculationInfo("stackedOverDimension"),stackedDimension:o.getCalculationInfo("stackedDimension"),stackedByDimension:o.getCalculationInfo("stackedByDimension"),isStackedByIndex:o.getCalculationInfo("isStackedByIndex"),data:o,seriesModel:t};if(!l.stackedDimension||!l.isStackedByIndex&&!l.stackedByDimension)return;a.length&&o.setCalculationInfo("stackedOnSeries",a[a.length-1].seriesModel),a.push(l)}}),n.each(Lx)}),PT("default",function g6(r,n){Dt(n=n||{},{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var t=new hn,i=new Qn({style:{fill:n.maskColor},zlevel:n.zlevel,z:1e4});t.add(i);var l,a=new Gn({style:{text:n.text,fill:n.textColor,fontSize:n.fontSize,fontWeight:n.fontWeight,fontStyle:n.fontStyle,fontFamily:n.fontFamily},zlevel:n.zlevel,z:10001}),o=new Qn({style:{fill:"none"},textContent:a,textConfig:{position:"right",distance:10},zlevel:n.zlevel,z:10001});return t.add(o),n.showSpinner&&((l=new B_({shape:{startAngle:-$_/2,endAngle:-$_/2+.1,r:n.spinnerRadius},style:{stroke:n.color,lineCap:"round",lineWidth:n.lineWidth},zlevel:n.zlevel,z:10001})).animateShape(!0).when(1e3,{endAngle:3*$_/2}).start("circularInOut"),l.animateShape(!0).when(1e3,{startAngle:3*$_/2}).delay(300).start("circularInOut"),t.add(l)),t.resize=function(){var u=a.getBoundingRect().width,c=n.showSpinner?n.spinnerRadius:0,h=(r.getWidth()-2*c-(n.showSpinner&&u?10:0)-u)/2-(n.showSpinner&&u?0:5+u/2)+(n.showSpinner?0:u/2)+(u?0:c),f=r.getHeight()/2;n.showSpinner&&l.setShape({cx:h,cy:f}),o.setShape({x:h-c,y:f-c,width:2*c,height:2*c}),i.setShape({x:0,y:0,width:r.getWidth(),height:r.getHeight()})},t.resize(),t}),Ss({type:js,event:js,update:js},kr),Ss({type:Tu,event:Tu,update:Tu},kr),Ss({type:kc,event:kc,update:kc},kr),Ss({type:Lc,event:Lc,update:Lc},kr),Ss({type:bu,event:bu,update:bu},kr),AT("light",w6),AT("dark",D6);var LN={},EA=[],RN={registerPreprocessor:ET,registerProcessor:MT,registerPostInit:TA,registerPostUpdate:bA,registerUpdateLifecycle:d0,registerAction:Ss,registerCoordinateSystem:SA,registerLayout:zA,registerVisual:Qu,registerTransform:AA,registerLoading:PT,registerMap:DA,registerImpl:function sN(r,n){tA[r]=n},PRIORITY:oA,ComponentModel:Jn,ComponentView:oi,SeriesModel:Xr,ChartView:Vr,registerComponentModel:function(r){Jn.registerClass(r)},registerComponentView:function(r){oi.registerClass(r)},registerSeriesModel:function(r){Xr.registerClass(r)},registerChartView:function(r){Vr.registerClass(r)},registerSubTypeDefaulter:function(r,n){Jn.registerSubTypeDefaulter(r,n)},registerPainter:function(r,n){Sv(r,n)}};function Nn(r){we(r)?De(r,function(n){Nn(n)}):Ye(EA,r)>=0||(EA.push(r),Pe(r)&&(r={install:r}),r.install(RN))}function rg(r){return null==r?0:r.length||1}function MA(r){return r}var NN=function(){function r(n,t,i,a,o,l){this._old=n,this._new=t,this._oldKeyGetter=i||MA,this._newKeyGetter=a||MA,this.context=o,this._diffModeMultiple="multiple"===l}return r.prototype.add=function(n){return this._add=n,this},r.prototype.update=function(n){return this._update=n,this},r.prototype.updateManyToOne=function(n){return this._updateManyToOne=n,this},r.prototype.updateOneToMany=function(n){return this._updateOneToMany=n,this},r.prototype.updateManyToMany=function(n){return this._updateManyToMany=n,this},r.prototype.remove=function(n){return this._remove=n,this},r.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},r.prototype._executeOneToOne=function(){var n=this._old,t=this._new,i={},a=new Array(n.length),o=new Array(t.length);this._initIndexMap(n,null,a,"_oldKeyGetter"),this._initIndexMap(t,i,o,"_newKeyGetter");for(var l=0;l<n.length;l++){var u=a[l],c=i[u],h=rg(c);if(h>1){var f=c.shift();1===c.length&&(i[u]=c[0]),this._update&&this._update(f,l)}else 1===h?(i[u]=null,this._update&&this._update(c,l)):this._remove&&this._remove(l)}this._performRestAdd(o,i)},r.prototype._executeMultiple=function(){var t=this._new,i={},a={},o=[],l=[];this._initIndexMap(this._old,i,o,"_oldKeyGetter"),this._initIndexMap(t,a,l,"_newKeyGetter");for(var u=0;u<o.length;u++){var c=o[u],h=i[c],f=a[c],p=rg(h),v=rg(f);if(p>1&&1===v)this._updateManyToOne&&this._updateManyToOne(f,h),a[c]=null;else if(1===p&&v>1)this._updateOneToMany&&this._updateOneToMany(f,h),a[c]=null;else if(1===p&&1===v)this._update&&this._update(f,h),a[c]=null;else if(p>1&&v>1)this._updateManyToMany&&this._updateManyToMany(f,h),a[c]=null;else if(p>1)for(var m=0;m<p;m++)this._remove&&this._remove(h[m]);else this._remove&&this._remove(h)}this._performRestAdd(l,a)},r.prototype._performRestAdd=function(n,t){for(var i=0;i<n.length;i++){var a=n[i],o=t[a],l=rg(o);if(l>1)for(var u=0;u<l;u++)this._add&&this._add(o[u]);else 1===l&&this._add&&this._add(o);t[a]=null}},r.prototype._initIndexMap=function(n,t,i,a){for(var o=this._diffModeMultiple,l=0;l<n.length;l++){var u="_ec_"+this[a](n[l],l);if(o||(i[l]=u),t){var c=t[u],h=rg(c);0===h?(t[u]=l,o&&i.push(u)):1===h?t[u]=[c,l]:c.push(l)}}},r}();const Xl=NN;var FN=function(){function r(n,t){this._encode=n,this._schema=t}return r.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},r.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},r}();function IT(r,n){return r.hasOwnProperty(n)||(r[n]=[]),r[n]}function f0(r){return"category"===r?"ordinal":"time"===r?"time":"float"}const p0=function r(n){this.otherDims={},null!=n&&Ge(this,n)};var VN=Xn(),HN={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},OA=function(){function r(n){this.dimensions=n.dimensions,this._dimOmitted=n.dimensionOmitted,this.source=n.source,this._fullDimCount=n.fullDimensionCount,this._updateDimOmitted(n.dimensionOmitted)}return r.prototype.isDimensionOmitted=function(){return this._dimOmitted},r.prototype._updateDimOmitted=function(n){this._dimOmitted=n,n&&(this._dimNameMap||(this._dimNameMap=kA(this.source)))},r.prototype.getSourceDimensionIndex=function(n){return $t(this._dimNameMap.get(n),-1)},r.prototype.getSourceDimension=function(n){var t=this.source.dimensionsDefine;if(t)return t[n]},r.prototype.makeStoreSchema=function(){for(var n=this._fullDimCount,t=ft(this.source),i=!LA(n),a="",o=[],l=0,u=0;l<n;l++){var c=void 0,h=void 0,f=void 0,p=this.dimensions[u];if(p&&p.storeDimIndex===l)c=t?p.name:null,h=p.type,f=p.ordinalMeta,u++;else{var v=this.getSourceDimension(l);v&&(c=t?v.name:null,h=v.type)}o.push({property:c,type:h,ordinalMeta:f}),t&&null!=c&&(!p||!p.isCalculationCoord)&&(a+=i?c.replace(/\`/g,"`1").replace(/\$/g,"`2"):c),a+="$",a+=HN[h]||"f",f&&(a+=f.uid),a+="$"}var m=this.source;return{dimensions:o,hash:[m.seriesLayoutBy,m.startIndex,a].join("$$")}},r.prototype.makeOutputDimensionNames=function(){for(var n=[],t=0,i=0;t<this._fullDimCount;t++){var a=void 0,o=this.dimensions[i];if(o&&o.storeDimIndex===t)o.isCalculationCoord||(a=o.name),i++;else{var l=this.getSourceDimension(t);l&&(a=l.name)}n.push(a)}return n},r.prototype.appendCalculationDimension=function(n){this.dimensions.push(n),n.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},r}();function PA(r){return r instanceof OA}function IA(r){for(var n=Kt(),t=0;t<(r||[]).length;t++){var i=r[t],a=tt(i)?i.name:i;null!=a&&null==n.get(a)&&n.set(a,t)}return n}function kA(r){var n=VN(r);return n.dimNameMap||(n.dimNameMap=IA(r.dimensionsDefine))}function LA(r){return r>30}var NA,g0,ag,og,kT,v0,LT,ig=tt,qu=_t,WN="undefined"==typeof Int32Array?Array:Int32Array,JN=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],YN=["_approximateExtent"],QN=function(){function r(n,t){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var i,a=!1;PA(n)?(i=n.dimensions,this._dimOmitted=n.isDimensionOmitted(),this._schema=n):(a=!0,i=n),i=i||["x","y"];for(var o={},l=[],u={},c=!1,h={},f=0;f<i.length;f++){var p=i[f],v=Qe(p)?new p0({name:p}):p instanceof p0?p:new p0(p),m=v.name;v.type=v.type||"float",v.coordDim||(v.coordDim=m,v.coordDimIndex=0);var y=v.otherDims=v.otherDims||{};l.push(m),o[m]=v,null!=h[m]&&(c=!0),v.createInvertedIndices&&(u[m]=[]),0===y.itemName&&(this._nameDimIdx=f),0===y.itemId&&(this._idDimIdx=f),a&&(v.storeDimIndex=f)}if(this.dimensions=l,this._dimInfos=o,this._initGetDimensionInfo(c),this.hostModel=t,this._invertedIndicesMap=u,this._dimOmitted){var C=this._dimIdxToName=Kt();De(l,function(T){C.set(o[T].storeDimIndex,T)})}}return r.prototype.getDimension=function(n){var t=this._recognizeDimIndex(n);if(null==t)return n;if(t=n,!this._dimOmitted)return this.dimensions[t];var i=this._dimIdxToName.get(t);if(null!=i)return i;var a=this._schema.getSourceDimension(t);return a?a.name:void 0},r.prototype.getDimensionIndex=function(n){var t=this._recognizeDimIndex(n);if(null!=t)return t;if(null==n)return-1;var i=this._getDimInfo(n);return i?i.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(n):-1},r.prototype._recognizeDimIndex=function(n){if(Ve(n)||null!=n&&!isNaN(n)&&!this._getDimInfo(n)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(n)<0))return+n},r.prototype._getStoreDimIndex=function(n){return this.getDimensionIndex(n)},r.prototype.getDimensionInfo=function(n){return this._getDimInfo(this.getDimension(n))},r.prototype._initGetDimensionInfo=function(n){var t=this._dimInfos;this._getDimInfo=n?function(i){return t.hasOwnProperty(i)?t[i]:void 0}:function(i){return t[i]}},r.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},r.prototype.mapDimension=function(n,t){var i=this._dimSummary;if(null==t)return i.encodeFirstDimNotExtra[n];var a=i.encode[n];return a?a[t]:null},r.prototype.mapDimensionsAll=function(n){return(this._dimSummary.encode[n]||[]).slice()},r.prototype.getStore=function(){return this._store},r.prototype.initData=function(n,t,i){var o,a=this;if(n instanceof Wx&&(o=n),!o){var l=this.dimensions,u=g(n)||zn(n)?new Hi(n,l.length):n;o=new Wx;var c=qu(l,function(h){return{type:a._dimInfos[h].type,property:h}});o.initData(u,c,i)}this._store=o,this._nameList=(t||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,o.count()),this._dimSummary=function BN(r,n){var t={},i=t.encode={},a=Kt(),o=[],l=[],u={};De(r.dimensions,function(v){var m=r.getDimensionInfo(v),y=m.coordDim;if(y){var C=m.coordDimIndex;IT(i,y)[C]=v,m.isExtraCoord||(a.set(y,1),function ZN(r){return!("ordinal"===r||"time"===r)}(m.type)&&(o[0]=v),IT(u,y)[C]=r.getDimensionIndex(m.name)),m.defaultTooltip&&l.push(v)}s_.each(function(T,z){var E=IT(i,z),N=m.otherDims[z];null!=N&&!1!==N&&(E[N]=m.name)})});var c=[],h={};a.each(function(v,m){var y=i[m];h[m]=y[0],c=c.concat(y)}),t.dataDimsOnCoord=c,t.dataDimIndicesOnCoord=_t(c,function(v){return r.getDimensionInfo(v).storeDimIndex}),t.encodeFirstDimNotExtra=h;var f=i.label;f&&f.length&&(o=f.slice());var p=i.tooltip;return p&&p.length?l=p.slice():l.length||(l=o.slice()),i.defaultedLabel=o,i.defaultedTooltip=l,t.userOutput=new FN(u,n),t}(this,this._schema),this.userOutput=this._dimSummary.userOutput},r.prototype.appendData=function(n){var t=this._store.appendData(n);this._doInit(t[0],t[1])},r.prototype.appendValues=function(n,t){var i=this._store.appendValues(n,t.length),a=i.start,o=i.end,l=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),t)for(var u=a;u<o;u++)this._nameList[u]=t[u-a],l&&LT(this,u)},r.prototype._updateOrdinalMeta=function(){for(var n=this._store,t=this.dimensions,i=0;i<t.length;i++){var a=this._dimInfos[t[i]];a.ordinalMeta&&n.collectOrdinalMeta(a.storeDimIndex,a.ordinalMeta)}},r.prototype._shouldMakeIdFromName=function(){var n=this._store.getProvider();return null==this._idDimIdx&&n.getSource().sourceFormat!==_s&&!n.fillStorage},r.prototype._doInit=function(n,t){if(!(n>=t)){var a=this._store.getProvider();this._updateOrdinalMeta();var o=this._nameList,l=this._idList;if(a.getSource().sourceFormat===eo&&!a.pure)for(var h=[],f=n;f<t;f++){var p=a.getItem(f,h);if(!this.hasItemOption&&Rv(p)&&(this.hasItemOption=!0),p){var v=p.name;null==o[f]&&null!=v&&(o[f]=Si(v,null));var m=p.id;null==l[f]&&null!=m&&(l[f]=Si(m,null))}}if(this._shouldMakeIdFromName())for(f=n;f<t;f++)LT(this,f);NA(this)}},r.prototype.getApproximateExtent=function(n){return this._approximateExtent[n]||this._store.getDataExtent(this._getStoreDimIndex(n))},r.prototype.setApproximateExtent=function(n,t){t=this.getDimension(t),this._approximateExtent[t]=n.slice()},r.prototype.getCalculationInfo=function(n){return this._calculationInfo[n]},r.prototype.setCalculationInfo=function(n,t){ig(n)?Ge(this._calculationInfo,n):this._calculationInfo[n]=t},r.prototype.getName=function(n){var t=this.getRawIndex(n),i=this._nameList[t];return null==i&&null!=this._nameDimIdx&&(i=ag(this,this._nameDimIdx,t)),null==i&&(i=""),i},r.prototype._getCategory=function(n,t){var i=this._store.get(n,t),a=this._store.getOrdinalMeta(n);return a?a.categories[i]:i},r.prototype.getId=function(n){return g0(this,this.getRawIndex(n))},r.prototype.count=function(){return this._store.count()},r.prototype.get=function(n,t){var a=this._dimInfos[n];if(a)return this._store.get(a.storeDimIndex,t)},r.prototype.getByRawIndex=function(n,t){var a=this._dimInfos[n];if(a)return this._store.getByRawIndex(a.storeDimIndex,t)},r.prototype.getIndices=function(){return this._store.getIndices()},r.prototype.getDataExtent=function(n){return this._store.getDataExtent(this._getStoreDimIndex(n))},r.prototype.getSum=function(n){return this._store.getSum(this._getStoreDimIndex(n))},r.prototype.getMedian=function(n){return this._store.getMedian(this._getStoreDimIndex(n))},r.prototype.getValues=function(n,t){var i=this,a=this._store;return we(n)?a.getValues(qu(n,function(o){return i._getStoreDimIndex(o)}),t):a.getValues(n)},r.prototype.hasValue=function(n){for(var t=this._dimSummary.dataDimIndicesOnCoord,i=0,a=t.length;i<a;i++)if(isNaN(this._store.get(t[i],n)))return!1;return!0},r.prototype.indexOfName=function(n){for(var t=0,i=this._store.count();t<i;t++)if(this.getName(t)===n)return t;return-1},r.prototype.getRawIndex=function(n){return this._store.getRawIndex(n)},r.prototype.indexOfRawIndex=function(n){return this._store.indexOfRawIndex(n)},r.prototype.rawIndexOf=function(n,t){var a=(n&&this._invertedIndicesMap[n])[t];return null==a||isNaN(a)?-1:a},r.prototype.indicesOfNearest=function(n,t,i){return this._store.indicesOfNearest(this._getStoreDimIndex(n),t,i)},r.prototype.each=function(n,t,i){Pe(n)&&(i=t,t=n,n=[]);var a=i||this,o=qu(og(n),this._getStoreDimIndex,this);this._store.each(o,a?qe(t,a):t)},r.prototype.filterSelf=function(n,t,i){Pe(n)&&(i=t,t=n,n=[]);var a=i||this,o=qu(og(n),this._getStoreDimIndex,this);return this._store=this._store.filter(o,a?qe(t,a):t),this},r.prototype.selectRange=function(n){var t=this,i={},a=gn(n),o=[];return De(a,function(l){var u=t._getStoreDimIndex(l);i[u]=n[l],o.push(u)}),this._store=this._store.selectRange(i),this},r.prototype.mapArray=function(n,t,i){Pe(n)&&(i=t,t=n,n=[]);var a=[];return this.each(n,function(){a.push(t&&t.apply(this,arguments))},i=i||this),a},r.prototype.map=function(n,t,i,a){var o=i||a||this,l=qu(og(n),this._getStoreDimIndex,this),u=v0(this);return u._store=this._store.map(l,o?qe(t,o):t),u},r.prototype.modify=function(n,t,i,a){var l=i||a||this,u=qu(og(n),this._getStoreDimIndex,this);this._store.modify(u,l?qe(t,l):t)},r.prototype.downSample=function(n,t,i,a){var o=v0(this);return o._store=this._store.downSample(this._getStoreDimIndex(n),t,i,a),o},r.prototype.lttbDownSample=function(n,t){var i=v0(this);return i._store=this._store.lttbDownSample(this._getStoreDimIndex(n),t),i},r.prototype.getRawDataItem=function(n){return this._store.getRawDataItem(n)},r.prototype.getItemModel=function(n){var t=this.hostModel,i=this.getRawDataItem(n);return new Or(i,t,t&&t.ecModel)},r.prototype.diff=function(n){var t=this;return new Xl(n?n.getStore().getIndices():[],this.getStore().getIndices(),function(i){return g0(n,i)},function(i){return g0(t,i)})},r.prototype.getVisual=function(n){var t=this._visual;return t&&t[n]},r.prototype.setVisual=function(n,t){this._visual=this._visual||{},ig(n)?Ge(this._visual,n):this._visual[n]=t},r.prototype.getItemVisual=function(n,t){var i=this._itemVisuals[n],a=i&&i[t];return null==a?this.getVisual(t):a},r.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},r.prototype.ensureUniqueItemVisual=function(n,t){var i=this._itemVisuals,a=i[n];a||(a=i[n]={});var o=a[t];return null==o&&(we(o=this.getVisual(t))?o=o.slice():ig(o)&&(o=Ge({},o)),a[t]=o),o},r.prototype.setItemVisual=function(n,t,i){var a=this._itemVisuals[n]||{};this._itemVisuals[n]=a,ig(t)?Ge(a,t):a[t]=i},r.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},r.prototype.setLayout=function(n,t){ig(n)?Ge(this._layout,n):this._layout[n]=t},r.prototype.getLayout=function(n){return this._layout[n]},r.prototype.getItemLayout=function(n){return this._itemLayouts[n]},r.prototype.setItemLayout=function(n,t,i){this._itemLayouts[n]=i?Ge(this._itemLayouts[n]||{},t):t},r.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},r.prototype.setItemGraphicEl=function(n,t){Xf(this.hostModel&&this.hostModel.seriesIndex,this.dataType,n,t),this._graphicEls[n]=t},r.prototype.getItemGraphicEl=function(n){return this._graphicEls[n]},r.prototype.eachItemGraphicEl=function(n,t){De(this._graphicEls,function(i,a){i&&n&&n.call(t,i,a)})},r.prototype.cloneShallow=function(n){return n||(n=new r(this._schema?this._schema:qu(this.dimensions,this._getDimInfo,this),this.hostModel)),kT(n,this),n._store=this._store,n},r.prototype.wrapMethod=function(n,t){var i=this[n];!Pe(i)||(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(n),this[n]=function(){var a=i.apply(this,arguments);return t.apply(this,[a].concat(Ra(arguments)))})},r.internalField=(NA=function(n){var t=n._invertedIndicesMap;De(t,function(i,a){var o=n._dimInfos[a],l=o.ordinalMeta,u=n._store;if(l){i=t[a]=new WN(l.categories.length);for(var c=0;c<i.length;c++)i[c]=-1;for(c=0;c<u.count();c++)i[u.get(o.storeDimIndex,c)]=c}})},ag=function(n,t,i){return Si(n._getCategory(t,i),null)},g0=function(n,t){var i=n._idList[t];return null==i&&null!=n._idDimIdx&&(i=ag(n,n._idDimIdx,t)),null==i&&(i="e\0\0"+t),i},og=function(n){return we(n)||(n=null!=n?[n]:[]),n},v0=function(n){var t=new r(n._schema?n._schema:qu(n.dimensions,n._getDimInfo,n),n.hostModel);return kT(t,n),t},kT=function(n,t){De(JN.concat(t.__wrappedMethods||[]),function(i){t.hasOwnProperty(i)&&(n[i]=t[i])}),n.__wrappedMethods=t.__wrappedMethods,De(YN,function(i){n[i]=Nt(t[i])}),n._calculationInfo=Ge({},t._calculationInfo)},void(LT=function(n,t){var i=n._nameList,a=n._idList,o=n._nameDimIdx,l=n._idDimIdx,u=i[t],c=a[t];if(null==u&&null!=o&&(i[t]=u=ag(n,o,t)),null==c&&null!=l&&(a[t]=c=ag(n,l,t)),null==c&&null!=u){var h=n._nameRepeatCount,f=h[u]=(h[u]||0)+1;c=u,f>1&&(c+="__ec__"+f),a[t]=c}})),r}();const _a=QN;function qN(r,n){return Ed(r,n).dimensions}function Ed(r,n){g(r)||(r=s(r));var t=(n=n||{}).coordDimensions||[],i=n.dimensionsDefine||r.dimensionsDefine||[],a=Kt(),o=[],l=function $N(r,n,t,i){var a=Math.max(r.dimensionsDetectedCount||1,n.length,t.length,i||0);return De(n,function(o){var l;tt(o)&&(l=o.dimsDef)&&(a=Math.max(a,l.length))}),a}(r,t,i,n.dimensionsCount),u=n.canOmitUnusedDimensions&&LA(l),c=i===r.dimensionsDefine,h=c?kA(r):IA(i),f=n.encodeDefine;!f&&n.encodeDefaulter&&(f=n.encodeDefaulter(r,l));for(var p=Kt(f),v=new bw(l),m=0;m<v.length;m++)v[m]=-1;function y(Ee){var Le=v[Ee];if(Le<0){var ke=i[Ee],Ue=tt(ke)?ke:{name:ke},He=new p0,Ke=Ue.name;return null!=Ke&&null!=h.get(Ke)&&(He.name=He.displayName=Ke),null!=Ue.type&&(He.type=Ue.type),null!=Ue.displayName&&(He.displayName=Ue.displayName),v[Ee]=o.length,He.storeDimIndex=Ee,o.push(He),He}return o[Le]}if(!u)for(m=0;m<l;m++)y(m);p.each(function(Ee,Le){var ke=Dr(Ee).slice();if(1===ke.length&&!Qe(ke[0])&&ke[0]<0)p.set(Le,!1);else{var Ue=p.set(Le,[]);De(ke,function(He,Ke){var nt=Qe(He)?h.get(He):He;null!=nt&&nt<l&&(Ue[Ke]=nt,T(y(nt),Le,Ke))})}});var C=0;function T(Ee,Le,ke){null!=s_.get(Le)?Ee.otherDims[Le]=ke:(Ee.coordDim=Le,Ee.coordDimIndex=ke,a.set(Le,!0))}De(t,function(Ee){var Le,ke,Ue,He;if(Qe(Ee))Le=Ee,He={};else{Le=(He=Ee).name;var Ke=He.ordinalMeta;He.ordinalMeta=null,(He=Ge({},He)).ordinalMeta=Ke,ke=He.dimsDef,Ue=He.otherDims,He.name=He.coordDim=He.coordDimIndex=He.dimsDef=He.otherDims=null}var nt=p.get(Le);if(!1!==nt){if(!(nt=Dr(nt)).length)for(var lt=0;lt<(ke&&ke.length||1);lt++){for(;C<l&&null!=y(C).coordDim;)C++;C<l&&nt.push(C++)}De(nt,function(St,mt){var wt=y(St);if(c&&null!=He.type&&(wt.type=He.type),T(Dt(wt,He),Le,mt),null==wt.name&&ke){var kt=ke[mt];!tt(kt)&&(kt={name:kt}),wt.name=wt.displayName=kt.name,wt.defaultTooltip=kt.defaultTooltip}Ue&&Dt(wt.otherDims,Ue)})}});var z=n.generateCoord,E=n.generateCoordCount,N=null!=E;E=z?E||1:0;var X=z||"value";function ve(Ee){null==Ee.name&&(Ee.name=Ee.coordDim)}if(u)De(o,function(Ee){ve(Ee)}),o.sort(function(Ee,Le){return Ee.storeDimIndex-Le.storeDimIndex});else for(var ce=0;ce<l;ce++){var _e=y(ce);null==_e.coordDim&&(_e.coordDim=jN(X,a,N),_e.coordDimIndex=0,(!z||E<=0)&&(_e.isExtraCoord=!0),E--),ve(_e),null==_e.type&&(1===hx(r,ce)||_e.isExtraCoord&&(null!=_e.otherDims.itemName||null!=_e.otherDims.seriesName))&&(_e.type="ordinal")}return function KN(r){for(var n=Kt(),t=0;t<r.length;t++){var i=r[t],a=i.name,o=n.get(a)||0;o>0&&(i.name=a+(o-1)),o++,n.set(a,o)}}(o),new OA({source:r,dimensions:o,fullDimensionCount:l,dimensionOmitted:u})}function jN(r,n,t){var i=n.data;if(t||i.hasOwnProperty(r)){for(var a=0;i.hasOwnProperty(r+a);)a++;r+=a}return n.set(r,!0),r}var XN=function r(n){this.coordSysDims=[],this.axisMap=Kt(),this.categoryAxisMap=Kt(),this.coordSysName=n},t3={cartesian2d:function(r,n,t,i){var a=r.getReferringComponents("xAxis",_i).models[0],o=r.getReferringComponents("yAxis",_i).models[0];n.coordSysDims=["x","y"],t.set("x",a),t.set("y",o),Md(a)&&(i.set("x",a),n.firstCategoryDimIndex=0),Md(o)&&(i.set("y",o),null==n.firstCategoryDimIndex&&(n.firstCategoryDimIndex=1))},singleAxis:function(r,n,t,i){var a=r.getReferringComponents("singleAxis",_i).models[0];n.coordSysDims=["single"],t.set("single",a),Md(a)&&(i.set("single",a),n.firstCategoryDimIndex=0)},polar:function(r,n,t,i){var a=r.getReferringComponents("polar",_i).models[0],o=a.findAxisModel("radiusAxis"),l=a.findAxisModel("angleAxis");n.coordSysDims=["radius","angle"],t.set("radius",o),t.set("angle",l),Md(o)&&(i.set("radius",o),n.firstCategoryDimIndex=0),Md(l)&&(i.set("angle",l),null==n.firstCategoryDimIndex&&(n.firstCategoryDimIndex=1))},geo:function(r,n,t,i){n.coordSysDims=["lng","lat"]},parallel:function(r,n,t,i){var a=r.ecModel,o=a.getComponent("parallel",r.get("parallelIndex")),l=n.coordSysDims=o.dimensions.slice();De(o.parallelAxisIndex,function(u,c){var h=a.getComponent("parallelAxis",u),f=l[c];t.set(f,h),Md(h)&&(i.set(f,h),null==n.firstCategoryDimIndex&&(n.firstCategoryDimIndex=c))})}};function Md(r){return"category"===r.get("type")}function FA(r,n,t){var o,l,u,i=(t=t||{}).byIndex,a=t.stackedCoordDimension;!function n3(r){return!PA(r.schema)}(n)?(o=(l=n.schema).dimensions,u=n.store):o=n;var h,f,p,v,c=!(!r||!r.get("stack"));if(De(o,function(E,N){Qe(E)&&(o[N]=E={name:E}),c&&!E.isExtraCoord&&(!i&&!h&&E.ordinalMeta&&(h=E),!f&&"ordinal"!==E.type&&"time"!==E.type&&(!a||a===E.coordDim)&&(f=E))}),f&&!i&&!h&&(i=!0),f){p="__\0ecstackresult_"+r.id,v="__\0ecstackedover_"+r.id,h&&(h.createInvertedIndices=!0);var m=f.coordDim,y=f.type,C=0;De(o,function(E){E.coordDim===m&&C++});var T={name:p,coordDim:m,coordDimIndex:C,type:y,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length},z={name:v,coordDim:v,coordDimIndex:C+1,type:y,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length+1};l?(u&&(T.storeDimIndex=u.ensureCalculationDimension(v,y),z.storeDimIndex=u.ensureCalculationDimension(p,y)),l.appendCalculationDimension(T),l.appendCalculationDimension(z)):(o.push(T),o.push(z))}return{stackedDimension:f&&f.name,stackedByDimension:h&&h.name,isStackedByIndex:i,stackedOverDimension:v,stackResultDimension:p}}function eu(r,n){return!!n&&n===r.getCalculationInfo("stackedDimension")}function RT(r,n){return eu(r,n)?r.getCalculationInfo("stackResultDimension"):n}const ol=function o3(r,n,t){t=t||{};var a,i=n.getSourceManager(),o=!1;r?(o=!0,a=s(r)):o=(a=i.getSource()).sourceFormat===eo;var l=function e3(r){var n=r.get("coordinateSystem"),t=new XN(n),i=t3[n];if(i)return i(r,t,t.axisMap,t.categoryAxisMap),t}(n),u=function r3(r,n){var a,t=r.get("coordinateSystem"),i=Fu.get(t);return n&&n.coordSysDims&&(a=_t(n.coordSysDims,function(o){var l={name:o},u=n.axisMap.get(o);if(u){var c=u.get("type");l.type=f0(c)}return l})),a||(a=i&&(i.getDimensionsInfo?i.getDimensionsInfo():i.dimensions.slice())||["x","y"]),a}(n,l),c=t.useEncodeDefaulter,h=Pe(c)?c:c?yt(c_,u,n):null,p=Ed(a,{coordDimensions:u,generateCoord:t.generateCoord,encodeDefine:n.getEncode(),encodeDefaulter:h,canOmitUnusedDimensions:!o}),v=function a3(r,n,t){var i,a;return t&&De(r,function(o,l){var c=t.categoryAxisMap.get(o.coordDim);c&&(null==i&&(i=l),o.ordinalMeta=c.getOrdinalMeta(),n&&(o.createInvertedIndices=!0)),null!=o.otherDims.itemName&&(a=!0)}),!a&&null!=i&&(r[i].otherDims.itemName=0),i}(p.dimensions,t.createInvertedIndices,l),m=o?null:i.getSharedDataStore(p),y=FA(n,{schema:p,store:m}),C=new _a(p,n);C.setCalculationInfo(y);var T=null!=v&&function s3(r){if(r.sourceFormat===eo){var n=function l3(r){for(var n=0;n<r.length&&null==r[n];)n++;return r[n]}(r.data||[]);return!we(Bi(n))}}(a)?function(z,E,N,X){return X===v?N:this.defaultDimValueGetter(z,E,N,X)}:null;return C.hasItemOption=!1,C.initData(o?a:m,null,T),C};var BA=function(){function r(n){this._setting=n||{},this._extent=[1/0,-1/0]}return r.prototype.getSetting=function(n){return this._setting[n]},r.prototype.unionExtent=function(n){var t=this._extent;n[0]<t[0]&&(t[0]=n[0]),n[1]>t[1]&&(t[1]=n[1])},r.prototype.unionExtentFromData=function(n,t){this.unionExtent(n.getApproximateExtent(t))},r.prototype.getExtent=function(){return this._extent.slice()},r.prototype.setExtent=function(n,t){var i=this._extent;isNaN(n)||(i[0]=n),isNaN(t)||(i[1]=t)},r.prototype.isInExtentRange=function(n){return this._extent[0]<=n&&this._extent[1]>=n},r.prototype.isBlank=function(){return this._isBlank},r.prototype.setBlank=function(n){this._isBlank=n},r}();Qh(BA);const tu=BA;var u3=0,c3=function(){function r(n){this.categories=n.categories||[],this._needCollect=n.needCollect,this._deduplication=n.deduplication,this.uid=++u3}return r.createByAxisModel=function(n){var t=n.option,i=t.data,a=i&&_t(i,h3);return new r({categories:a,needCollect:!a,deduplication:!1!==t.dedplication})},r.prototype.getOrdinal=function(n){return this._getOrCreateMap().get(n)},r.prototype.parseAndCollect=function(n){var t,i=this._needCollect;if(!Qe(n)&&!i)return n;if(i&&!this._deduplication)return this.categories[t=this.categories.length]=n,t;var a=this._getOrCreateMap();return null==(t=a.get(n))&&(i?(this.categories[t=this.categories.length]=n,a.set(n,t)):t=NaN),t},r.prototype._getOrCreateMap=function(){return this._map||(this._map=Kt(this.categories))},r}();function h3(r){return tt(r)&&null!=r.value?r.value:r+""}const NT=c3;function FT(r){return"interval"===r.type||"log"===r.type}function BT(r){var n=Math.pow(10,Gh(r)),t=r/n;return t?2===t?t=3:3===t?t=5:t*=2:t=1,li(t*n)}function ZA(r){return To(r)+2}function UA(r,n,t){r[n]=Math.max(Math.min(r[n],t[1]),t[0])}function m0(r,n){return r>=n[0]&&r<=n[1]}function _0(r,n){return n[1]===n[0]?.5:(r-n[0])/(n[1]-n[0])}function y0(r,n){return r*(n[1]-n[0])+n[0]}var VA=function(r){function n(t){var i=r.call(this,t)||this;i.type="ordinal";var a=i.getSetting("ordinalMeta");return a||(a=new NT({})),we(a)&&(a=new NT({categories:_t(a,function(o){return tt(o)?o.value:o})})),i._ordinalMeta=a,i._extent=i.getSetting("extent")||[0,a.categories.length-1],i}return R(n,r),n.prototype.parse=function(t){return null==t?NaN:Qe(t)?this._ordinalMeta.getOrdinal(t):Math.round(t)},n.prototype.contain=function(t){return m0(t=this.parse(t),this._extent)&&null!=this._ordinalMeta.categories[t]},n.prototype.normalize=function(t){return _0(t=this._getTickNumber(this.parse(t)),this._extent)},n.prototype.scale=function(t){return t=Math.round(y0(t,this._extent)),this.getRawOrdinalNumber(t)},n.prototype.getTicks=function(){for(var t=[],i=this._extent,a=i[0];a<=i[1];)t.push({value:a}),a++;return t},n.prototype.getMinorTicks=function(t){},n.prototype.setSortInfo=function(t){if(null!=t){for(var i=t.ordinalNumbers,a=this._ordinalNumbersByTick=[],o=this._ticksByOrdinalNumber=[],l=0,u=this._ordinalMeta.categories.length,c=Math.min(u,i.length);l<c;++l){var h=i[l];a[l]=h,o[h]=l}for(var f=0;l<u;++l){for(;null!=o[f];)f++;a.push(f),o[f]=l}}else this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null},n.prototype._getTickNumber=function(t){var i=this._ticksByOrdinalNumber;return i&&t>=0&&t<i.length?i[t]:t},n.prototype.getRawOrdinalNumber=function(t){var i=this._ordinalNumbersByTick;return i&&t>=0&&t<i.length?i[t]:t},n.prototype.getLabel=function(t){if(!this.isBlank()){var i=this.getRawOrdinalNumber(t.value),a=this._ordinalMeta.categories[i];return null==a?"":a+""}},n.prototype.count=function(){return this._extent[1]-this._extent[0]+1},n.prototype.unionExtentFromData=function(t,i){this.unionExtent(t.getApproximateExtent(i))},n.prototype.isInExtentRange=function(t){return t=this._getTickNumber(t),this._extent[0]<=t&&this._extent[1]>=t},n.prototype.getOrdinalMeta=function(){return this._ordinalMeta},n.prototype.calcNiceTicks=function(){},n.prototype.calcNiceExtent=function(){},n.type="ordinal",n}(tu);tu.registerClass(VA);const ZT=VA;var eh=li,HA=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="interval",t._interval=0,t._intervalPrecision=2,t}return R(n,r),n.prototype.parse=function(t){return t},n.prototype.contain=function(t){return m0(t,this._extent)},n.prototype.normalize=function(t){return _0(t,this._extent)},n.prototype.scale=function(t){return y0(t,this._extent)},n.prototype.setExtent=function(t,i){var a=this._extent;isNaN(t)||(a[0]=parseFloat(t)),isNaN(i)||(a[1]=parseFloat(i))},n.prototype.unionExtent=function(t){var i=this._extent;t[0]<i[0]&&(i[0]=t[0]),t[1]>i[1]&&(i[1]=t[1]),this.setExtent(i[0],i[1])},n.prototype.getInterval=function(){return this._interval},n.prototype.setInterval=function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=ZA(t)},n.prototype.getTicks=function(t){var i=this._interval,a=this._extent,o=this._niceExtent,l=this._intervalPrecision,u=[];if(!i)return u;a[0]<o[0]&&u.push(t?{value:eh(o[0]-i,l)}:{value:a[0]});for(var h=o[0];h<=o[1]&&(u.push({value:h}),(h=eh(h+i,l))!==u[u.length-1].value);)if(u.length>1e4)return[];var f=u.length?u[u.length-1].value:o[1];return a[1]>f&&u.push(t?{value:eh(f+i,l)}:{value:a[1]}),u},n.prototype.getMinorTicks=function(t){for(var i=this.getTicks(!0),a=[],o=this.getExtent(),l=1;l<i.length;l++){for(var c=i[l-1],h=0,f=[],v=(i[l].value-c.value)/t;h<t-1;){var m=eh(c.value+(h+1)*v);m>o[0]&&m<o[1]&&f.push(m),h++}a.push(f)}return a},n.prototype.getLabel=function(t,i){if(null==t)return"";var a=i&&i.precision;return null==a?a=To(t.value)||0:"auto"===a&&(a=this._intervalPrecision),xp(eh(t.value,a,!0))},n.prototype.calcNiceTicks=function(t,i,a){t=t||5;var o=this._extent,l=o[1]-o[0];if(isFinite(l)){l<0&&(l=-l,o.reverse());var u=function d3(r,n,t,i){var a={},l=a.interval=Mf((r[1]-r[0])/n,!0);null!=t&&l<t&&(l=a.interval=t),null!=i&&l>i&&(l=a.interval=i);var u=a.intervalPrecision=ZA(l);return function f3(r,n){!isFinite(r[0])&&(r[0]=n[0]),!isFinite(r[1])&&(r[1]=n[1]),UA(r,0,n),UA(r,1,n),r[0]>r[1]&&(r[0]=r[1])}(a.niceTickExtent=[li(Math.ceil(r[0]/l)*l,u),li(Math.floor(r[1]/l)*l,u)],r),a}(o,t,i,a);this._intervalPrecision=u.intervalPrecision,this._interval=u.interval,this._niceExtent=u.niceTickExtent}},n.prototype.calcNiceExtent=function(t){var i=this._extent;if(i[0]===i[1])if(0!==i[0]){var a=i[0];t.fixMax||(i[1]+=a/2),i[0]-=a/2}else i[1]=1;isFinite(i[1]-i[0])||(i[0]=0,i[1]=1),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval);var l=this._interval;t.fixMin||(i[0]=eh(Math.floor(i[0]/l)*l)),t.fixMax||(i[1]=eh(Math.ceil(i[1]/l)*l))},n.prototype.setNiceExtent=function(t,i){this._niceExtent=[t,i]},n.type="interval",n}(tu);tu.registerClass(HA);const Ku=HA;var WA="undefined"!=typeof Float32Array,p3=WA?Float32Array:Array;function sl(r){return we(r)?WA?new Float32Array(r):r:new p3(r)}var UT="__ec_stack_";function VT(r){return r.get("stack")||UT+r.seriesIndex}function HT(r){return r.dim+r.index}function GA(r,n){var t=[];return n.eachSeriesByType(r,function(i){KA(i)&&t.push(i)}),t}function JA(r){var n=function v3(r){var n={};De(r,function(c){var f=c.coordinateSystem.getBaseAxis();if("time"===f.type||"value"===f.type)for(var p=c.getData(),v=f.dim+"_"+f.index,m=p.getDimensionIndex(p.mapDimension(f.dim)),y=p.getStore(),C=0,T=y.count();C<T;++C){var z=y.get(m,C);n[v]?n[v].push(z):n[v]=[z]}});var t={};for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];if(a){a.sort(function(c,h){return c-h});for(var o=null,l=1;l<a.length;++l){var u=a[l]-a[l-1];u>0&&(o=null===o?u:Math.min(o,u))}t[i]=o}}return t}(r),t=[];return De(r,function(i){var u,o=i.coordinateSystem.getBaseAxis(),l=o.getExtent();if("category"===o.type)u=o.getBandWidth();else if("value"===o.type||"time"===o.type){var h=n[o.dim+"_"+o.index],f=Math.abs(l[1]-l[0]),p=o.scale.getExtent(),v=Math.abs(p[1]-p[0]);u=h?f/v*h:f}else{var m=i.getData();u=Math.abs(l[1]-l[0])/m.count()}var y=Ht(i.get("barWidth"),u),C=Ht(i.get("barMaxWidth"),u),T=Ht(i.get("barMinWidth")||($A(i)?.5:1),u),z=i.get("barGap"),E=i.get("barCategoryGap");t.push({bandWidth:u,barWidth:y,barMaxWidth:C,barMinWidth:T,barGap:z,barCategoryGap:E,axisKey:HT(o),stackId:VT(i)})}),YA(t)}function YA(r){var n={};De(r,function(i,a){var o=i.axisKey,l=i.bandWidth,u=n[o]||{bandWidth:l,remainedWidth:l,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},c=u.stacks;n[o]=u;var h=i.stackId;c[h]||u.autoWidthCount++,c[h]=c[h]||{width:0,maxWidth:0};var f=i.barWidth;f&&!c[h].width&&(c[h].width=f,f=Math.min(u.remainedWidth,f),u.remainedWidth-=f);var p=i.barMaxWidth;p&&(c[h].maxWidth=p);var v=i.barMinWidth;v&&(c[h].minWidth=v);var m=i.barGap;null!=m&&(u.gap=m);var y=i.barCategoryGap;null!=y&&(u.categoryGap=y)});var t={};return De(n,function(i,a){t[a]={};var o=i.stacks,l=i.bandWidth,u=i.categoryGap;if(null==u){var c=gn(o).length;u=Math.max(35-4*c,15)+"%"}var h=Ht(u,l),f=Ht(i.gap,1),p=i.remainedWidth,v=i.autoWidthCount,m=(p-h)/(v+(v-1)*f);m=Math.max(m,0),De(o,function(z){var E=z.maxWidth,N=z.minWidth;if(z.width){var X=z.width;E&&(X=Math.min(X,E)),N&&(X=Math.max(X,N)),z.width=X,p-=X+f*X,v--}else X=m,E&&E<X&&(X=Math.min(E,p)),N&&N>X&&(X=N),X!==m&&(z.width=X,p-=X+f*X,v--)}),m=(p-h)/(v+(v-1)*f),m=Math.max(m,0);var C,y=0;De(o,function(z,E){z.width||(z.width=m),C=z,y+=z.width*(1+f)}),C&&(y-=C.width*f);var T=-y/2;De(o,function(z,E){t[a][E]=t[a][E]||{bandWidth:l,offset:T,width:z.width},T+=z.width*(1+f)})}),t}function QA(r,n){var t=GA(r,n),i=JA(t);De(t,function(a){var o=a.getData(),u=a.coordinateSystem.getBaseAxis(),c=VT(a),h=i[HT(u)][c];o.setLayout({bandWidth:h.bandWidth,offset:h.offset,size:h.width})})}function qA(r){return{seriesType:r,plan:md(),reset:function(n){if(KA(n)){var t=n.getData(),i=n.coordinateSystem,a=i.getBaseAxis(),o=i.getOtherAxis(a),l=t.getDimensionIndex(t.mapDimension(o.dim)),u=t.getDimensionIndex(t.mapDimension(a.dim)),c=n.get("showBackground",!0),h=t.mapDimension(o.dim),f=t.getCalculationInfo("stackResultDimension"),p=eu(t,h)&&!!t.getCalculationInfo("stackedOnSeries"),v=o.isHorizontal(),m=function _3(r,n){return n.toGlobalCoord(n.dataToCoord("log"===n.type?1:0))}(0,o),y=$A(n),C=n.get("barMinHeight")||0,T=f&&t.getDimensionIndex(f),z=t.getLayout("size"),E=t.getLayout("offset");return{progress:function(N,X){for(var ke,ve=N.count,ce=y&&sl(3*ve),_e=y&&c&&sl(3*ve),ze=y&&sl(ve),Ee=i.master.getRect(),Le=v?Ee.width:Ee.height,Ue=X.getStore(),He=0;null!=(ke=N.next());){var Ke=Ue.get(p?T:l,ke),nt=Ue.get(u,ke),lt=m,St=void 0;p&&(St=+Ke-Ue.get(l,ke));var mt=void 0,wt=void 0,kt=void 0,Yt=void 0;if(v){var Xt=i.dataToPoint([Ke,nt]);p&&(lt=i.dataToPoint([St,nt])[0]),mt=lt,wt=Xt[1]+E,kt=Xt[0]-lt,Yt=z,Math.abs(kt)<C&&(kt=(kt<0?-1:1)*C)}else Xt=i.dataToPoint([nt,Ke]),p&&(lt=i.dataToPoint([nt,St])[1]),mt=Xt[0]+E,wt=lt,kt=z,Yt=Xt[1]-lt,Math.abs(Yt)<C&&(Yt=(Yt<=0?-1:1)*C);y?(ce[He]=mt,ce[He+1]=wt,ce[He+2]=v?kt:Yt,_e&&(_e[He]=v?Ee.x:mt,_e[He+1]=v?wt:Ee.y,_e[He+2]=Le),ze[ke]=ke):X.setItemLayout(ke,{x:mt,y:wt,width:kt,height:Yt}),He+=3}y&&X.setLayout({largePoints:ce,largeDataIndices:ze,largeBackgroundPoints:_e,valueAxisHorizontal:v})}}}}}}function KA(r){return r.coordinateSystem&&"cartesian2d"===r.coordinateSystem.type}function $A(r){return r.pipelineContext&&r.pipelineContext.large}var jA=function(r){function n(t){var i=r.call(this,t)||this;return i.type="time",i}return R(n,r),n.prototype.getLabel=function(t){var i=this.getSetting("useUTC");return rl(t.value,Ym[function ms(r){switch(r){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}(Mu(this._minLevelUnit))]||Ym.second,i,this.getSetting("locale"))},n.prototype.getFormattedLabel=function(t,i,a){var o=this.getSetting("useUTC");return function Yl(r,n,t,i,a){var o=null;if(Qe(t))o=t;else if(Pe(t))o=t(r.value,n,{level:r.level});else{var l=Ge({},Uc);if(r.level>0)for(var u=0;u<yp.length;++u)l[yp[u]]="{primary|"+l[yp[u]]+"}";var c=t?!1===t.inherit?t:Dt(t,l):l,h=Ou(r.value,a);if(c[h])o=c[h];else if(c.inherit){for(u=Qm.indexOf(h)-1;u>=0;--u)if(c[h]){o=c[h];break}o=o||l.none}if(we(o)){var p=null==r.level?0:r.level>=0?r.level:o.length+r.level;o=o[p=Math.min(p,o.length-1)]}}return rl(new Date(r.value),o,a,i)}(t,i,a,this.getSetting("locale"),o)},n.prototype.getTicks=function(){var i=this._extent,a=[];if(!this._interval)return a;a.push({value:i[0],level:0});var o=this.getSetting("useUTC"),l=function w3(r,n,t,i){var o=Qm,l=0;function u(Le,ke,Ue,He,Ke,nt,lt){for(var St=new Date(ke),mt=ke,wt=St[He]();mt<Ue&&mt<=i[1];)lt.push({value:mt}),St[Ke](wt+=Le),mt=St.getTime();lt.push({value:mt,notAdd:!0})}function c(Le,ke,Ue){var He=[],Ke=!ke.length;if(!function C3(r,n,t,i){var a=Aa(n),o=Aa(t),l=function(y){return qm(a,y,i)===qm(o,y,i)},u=function(){return l("year")},c=function(){return u()&&l("month")},h=function(){return c()&&l("day")},f=function(){return h()&&l("hour")},p=function(){return f()&&l("minute")},v=function(){return p()&&l("second")};switch(r){case"year":return u();case"month":return c();case"day":return h();case"hour":return f();case"minute":return p();case"second":return v();case"millisecond":return v()&&l("millisecond")}}(Mu(Le),i[0],i[1],t)){Ke&&(ke=[{value:z3(new Date(i[0]),Le,t)},{value:i[1]}]);for(var nt=0;nt<ke.length-1;nt++){var lt=ke[nt].value,St=ke[nt+1].value;if(lt!==St){var mt=void 0,wt=void 0,kt=void 0;switch(Le){case"year":mt=Math.max(1,Math.round(n/Xa/365)),wt=Cp(t),kt=ex(t);break;case"half-year":case"quarter":case"month":mt=T3(n),wt=Pu(t),kt=Km(t);break;case"week":case"half-week":case"day":mt=x3(n),wt=ud(t),kt=$m(t),!0;break;case"half-day":case"quarter-day":case"hour":mt=b3(n),wt=Iu(t),kt=jm(t);break;case"minute":mt=XA(n,!0),wt=Vc(t),kt=Xm(t);break;case"second":mt=XA(n,!1),wt=ku(t),kt=e_(t);break;case"millisecond":mt=S3(n),wt=Hc(t),kt=t_(t)}u(mt,lt,St,wt,kt,0,He),"year"===Le&&Ue.length>1&&0===nt&&Ue.unshift({value:Ue[0].value-mt})}}for(nt=0;nt<He.length;nt++)Ue.push(He[nt]);return He}}for(var h=[],f=[],p=0,v=0,m=0;m<o.length&&l++<1e4;++m){var y=Mu(o[m]);if(Ui(o[m])&&(c(o[m],h[h.length-1]||[],f),y!==(o[m+1]?Mu(o[m+1]):null))){if(f.length){v=p,f.sort(function(Le,ke){return Le.value-ke.value});for(var T=[],z=0;z<f.length;++z){var E=f[z].value;(0===z||f[z-1].value!==E)&&(T.push(f[z]),E>=i[0]&&E<=i[1]&&p++)}var N=(i[1]-i[0])/n;if(p>1.5*N&&v>N/1.5||(h.push(T),p>N||r===o[m]))break}f=[]}}var X=_n(_t(h,function(Le){return _n(Le,function(ke){return ke.value>=i[0]&&ke.value<=i[1]&&!ke.notAdd})}),function(Le){return Le.length>0}),ve=[],ce=X.length-1;for(m=0;m<X.length;++m)for(var _e=X[m],ze=0;ze<_e.length;++ze)ve.push({value:_e[ze].value,level:ce-m});ve.sort(function(Le,ke){return Le.value-ke.value});var Ee=[];for(m=0;m<ve.length;++m)(0===m||ve[m].value!==ve[m-1].value)&&Ee.push(ve[m]);return Ee}(this._minLevelUnit,this._approxInterval,o,i);return(a=a.concat(l)).push({value:i[1],level:0}),a},n.prototype.calcNiceExtent=function(t){var i=this._extent;if(i[0]===i[1]&&(i[0]-=Xa,i[1]+=Xa),i[1]===-1/0&&i[0]===1/0){var a=new Date;i[1]=+new Date(a.getFullYear(),a.getMonth(),a.getDate()),i[0]=i[1]-Xa}this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval)},n.prototype.calcNiceTicks=function(t,i,a){var o=this._extent;this._approxInterval=(o[1]-o[0])/(t=t||10),null!=i&&this._approxInterval<i&&(this._approxInterval=i),null!=a&&this._approxInterval>a&&(this._approxInterval=a);var u=C0.length,c=Math.min(function(r,n,t,i){for(;t<i;){var a=t+i>>>1;r[a][1]<n?t=a+1:i=a}return t}(C0,this._approxInterval,0,u),u-1);this._interval=C0[c][1],this._minLevelUnit=C0[Math.max(c-1,0)][0]},n.prototype.parse=function(t){return Ve(t)?t:+Aa(t)},n.prototype.contain=function(t){return m0(this.parse(t),this._extent)},n.prototype.normalize=function(t){return _0(this.parse(t),this._extent)},n.prototype.scale=function(t){return y0(t,this._extent)},n.type="time",n}(Ku),C0=[["second",1e3],["minute",6e4],["hour",Zc],["quarter-day",6*Zc],["half-day",12*Zc],["day",1.2*Xa],["half-week",3.5*Xa],["week",7*Xa],["month",31*Xa],["quarter",95*Xa],["half-year",Jm/2],["year",Jm]];function x3(r,n){return(r/=Xa)>16?16:r>7.5?7:r>3.5?4:r>1.5?2:1}function T3(r){return(r/=2592e6)>6?6:r>3?3:r>2?2:1}function b3(r){return(r/=Zc)>12?12:r>6?6:r>3.5?4:r>2?2:1}function XA(r,n){return(r/=n?6e4:1e3)>30?30:r>20?20:r>15?15:r>10?10:r>5?5:r>2?2:1}function S3(r){return Mf(r,!0)}function z3(r,n,t){var i=new Date(r);switch(Mu(n)){case"year":case"month":i[Km(t)](0);case"day":i[$m(t)](1);case"hour":i[jm(t)](0);case"minute":i[Xm(t)](0);case"second":i[e_(t)](0),i[t_(t)](0)}return i.getTime()}tu.registerClass(jA);const eE=jA;var tE=tu.prototype,sg=Ku.prototype,D3=li,A3=Math.floor,E3=Math.ceil,x0=Math.pow,Jo=Math.log,WT=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="log",t.base=10,t._originalScale=new Ku,t._interval=0,t}return R(n,r),n.prototype.getTicks=function(t){var a=this._extent,o=this._originalScale.getExtent();return _t(sg.getTicks.call(this,t),function(u){var c=u.value,h=li(x0(this.base,c));return h=c===a[0]&&this._fixMin?T0(h,o[0]):h,{value:h=c===a[1]&&this._fixMax?T0(h,o[1]):h}},this)},n.prototype.setExtent=function(t,i){var a=this.base;t=Jo(t)/Jo(a),i=Jo(i)/Jo(a),sg.setExtent.call(this,t,i)},n.prototype.getExtent=function(){var t=this.base,i=tE.getExtent.call(this);i[0]=x0(t,i[0]),i[1]=x0(t,i[1]);var o=this._originalScale.getExtent();return this._fixMin&&(i[0]=T0(i[0],o[0])),this._fixMax&&(i[1]=T0(i[1],o[1])),i},n.prototype.unionExtent=function(t){this._originalScale.unionExtent(t);var i=this.base;t[0]=Jo(t[0])/Jo(i),t[1]=Jo(t[1])/Jo(i),tE.unionExtent.call(this,t)},n.prototype.unionExtentFromData=function(t,i){this.unionExtent(t.getApproximateExtent(i))},n.prototype.calcNiceTicks=function(t){t=t||10;var i=this._extent,a=i[1]-i[0];if(!(a===1/0||a<=0)){var o=Av(a);for(t/a*o<=.5&&(o*=10);!isNaN(o)&&Math.abs(o)<1&&Math.abs(o)>0;)o*=10;var u=[li(E3(i[0]/o)*o),li(A3(i[1]/o)*o)];this._interval=o,this._niceExtent=u}},n.prototype.calcNiceExtent=function(t){sg.calcNiceExtent.call(this,t),this._fixMin=t.fixMin,this._fixMax=t.fixMax},n.prototype.parse=function(t){return t},n.prototype.contain=function(t){return m0(t=Jo(t)/Jo(this.base),this._extent)},n.prototype.normalize=function(t){return _0(t=Jo(t)/Jo(this.base),this._extent)},n.prototype.scale=function(t){return t=y0(t,this._extent),x0(this.base,t)},n.type="log",n}(tu),nE=WT.prototype;function T0(r,n){return D3(r,To(n))}nE.getMinorTicks=sg.getMinorTicks,nE.getLabel=sg.getLabel,tu.registerClass(WT);const M3=WT;var O3=function(){function r(n,t,i){this._prepareParams(n,t,i)}return r.prototype._prepareParams=function(n,t,i){i[1]<i[0]&&(i=[NaN,NaN]),this._dataMin=i[0],this._dataMax=i[1];var a=this._isOrdinal="ordinal"===n.type;this._needCrossZero="interval"===n.type&&t.getNeedCrossZero&&t.getNeedCrossZero();var o=this._modelMinRaw=t.get("min",!0);Pe(o)?this._modelMinNum=b0(n,o({min:i[0],max:i[1]})):"dataMin"!==o&&(this._modelMinNum=b0(n,o));var l=this._modelMaxRaw=t.get("max",!0);if(Pe(l)?this._modelMaxNum=b0(n,l({min:i[0],max:i[1]})):"dataMax"!==l&&(this._modelMaxNum=b0(n,l)),a)this._axisDataLen=t.getCategories().length;else{var u=t.get("boundaryGap"),c=we(u)?u:[u||0,u||0];this._boundaryGapInner="boolean"==typeof c[0]||"boolean"==typeof c[1]?[0,0]:[xo(c[0],1),xo(c[1],1)]}},r.prototype.calculate=function(){var n=this._isOrdinal,t=this._dataMin,i=this._dataMax,a=this._axisDataLen,o=this._boundaryGapInner,l=n?null:i-t||Math.abs(t),u="dataMin"===this._modelMinRaw?t:this._modelMinNum,c="dataMax"===this._modelMaxRaw?i:this._modelMaxNum,h=null!=u,f=null!=c;null==u&&(u=n?a?0:NaN:t-o[0]*l),null==c&&(c=n?a?a-1:NaN:i+o[1]*l),(null==u||!isFinite(u))&&(u=NaN),(null==c||!isFinite(c))&&(c=NaN);var p=ni(u)||ni(c)||n&&!a;this._needCrossZero&&(u>0&&c>0&&!h&&(u=0),u<0&&c<0&&!f&&(c=0));var v=this._determinedMin,m=this._determinedMax;return null!=v&&(u=v,h=!0),null!=m&&(c=m,f=!0),{min:u,max:c,minFixed:h,maxFixed:f,isBlank:p}},r.prototype.modifyDataMinMax=function(n,t){this[I3[n]]=t},r.prototype.setDeterminedMinMax=function(n,t){this[P3[n]]=t},r.prototype.freeze=function(){this.frozen=!0},r}(),P3={min:"_determinedMin",max:"_determinedMax"},I3={min:"_dataMin",max:"_dataMax"};function rE(r,n,t){var i=r.rawExtentInfo;return i||(i=new O3(r,n,t),r.rawExtentInfo=i,i)}function b0(r,n){return null==n?null:ni(n)?NaN:r.parse(n)}function iE(r,n){var t=r.type,i=rE(r,n,r.getExtent()).calculate();r.setBlank(i.isBlank);var a=i.min,o=i.max,l=n.ecModel;if(l&&"time"===t){var u=GA("bar",l),c=!1;if(De(u,function(p){c=c||p.getBaseAxis()===n.axis}),c){var h=JA(u),f=function k3(r,n,t,i){var a=t.axis.getExtent(),o=a[1]-a[0],l=function m3(r,n,t){if(r&&n){var i=r[HT(n)];return null!=i&&null!=t?i[VT(t)]:i}}(i,t.axis);if(void 0===l)return{min:r,max:n};var u=1/0;De(l,function(m){u=Math.min(m.offset,u)});var c=-1/0;De(l,function(m){c=Math.max(m.offset+m.width,c)}),u=Math.abs(u),c=Math.abs(c);var h=u+c,f=n-r,v=f/(1-(u+c)/o)-f;return{min:r-=v*(u/h),max:n+=v*(c/h)}}(a,o,n,h);a=f.min,o=f.max}}return{extent:[a,o],fixMin:i.minFixed,fixMax:i.maxFixed}}function th(r,n){var t=n,i=iE(r,t),a=i.extent,o=t.get("splitNumber");r instanceof M3&&(r.base=t.get("logBase"));var l=r.type,u=t.get("interval"),c="interval"===l||"time"===l;r.setExtent(a[0],a[1]),r.calcNiceExtent({splitNumber:o,fixMin:i.fixMin,fixMax:i.fixMax,minInterval:c?t.get("minInterval"):null,maxInterval:c?t.get("maxInterval"):null}),null!=u&&r.setInterval&&r.setInterval(u)}function lg(r,n){if(n=n||r.get("type"))switch(n){case"category":return new ZT({ordinalMeta:r.getOrdinalMeta?r.getOrdinalMeta():r.getCategories(),extent:[1/0,-1/0]});case"time":return new eE({locale:r.ecModel.getLocaleModel(),useUTC:r.ecModel.get("useUTC")});default:return new(tu.getClass(n)||Ku)}}function ug(r){var i,n=r.getLabelModel().get("formatter"),t="category"===r.type?r.scale.getExtent()[0]:null;return"time"===r.scale.type?(i=n,function(a,o){return r.scale.getFormattedLabel(a,o,i)}):Qe(n)?function(i){return function(a){var o=r.scale.getLabel(a);return i.replace("{value}",null!=o?o:"")}}(n):Pe(n)?function(i){return function(a,o){return null!=t&&(o=a.value-t),i(GT(r,a),o,null!=a.level?{level:a.level}:null)}}(n):function(i){return r.scale.getLabel(i)}}function GT(r,n){return"category"===r.type?r.scale.getLabel(n):n.value}function N3(r,n){var t=n*Math.PI/180,i=r.width,a=r.height,o=i*Math.abs(Math.cos(t))+Math.abs(a*Math.sin(t)),l=i*Math.abs(Math.sin(t))+Math.abs(a*Math.cos(t));return new Mn(r.x,r.y,o,l)}function JT(r){var n=r.get("interval");return null==n?"auto":n}function aE(r){return"category"===r.type&&0===JT(r.getLabelModel())}function S0(r,n){var t={};return De(r.mapDimensionsAll(n),function(i){t[RT(r,i)]=!0}),gn(t)}var Od=function(){function r(){}return r.prototype.getNeedCrossZero=function(){return!this.option.scale},r.prototype.getCoordSysModel=function(){},r}();function B3(r){return ol(null,r)}var Z3={isDimensionStacked:eu,enableDataStack:FA,getStackedDimension:RT};function U3(r,n){var t=n;n instanceof Or||(t=new Or(n));var i=lg(t);return i.setExtent(r[0],r[1]),th(i,t),i}function V3(r){Qt(r,Od)}function H3(r,n){return $r(r,null,null,"normal"!==(n=n||{}).state)}function oE(r,n){return Math.abs(r-n)<1e-8}function nh(r,n,t){var i=0,a=r[0];if(!a)return!1;for(var o=1;o<r.length;o++){var l=r[o];i+=ps(a[0],a[1],l[0],l[1],n,t),a=l}var u=r[0];return(!oE(a[0],u[0])||!oE(a[1],u[1]))&&(i+=ps(a[0],a[1],u[0],u[1],n,t)),0!==i}var G3=[];function YT(r,n){for(var t=0;t<r.length;t++)Hr(r[t],r[t],n)}function sE(r,n,t,i){for(var a=0;a<r.length;a++){var o=r[a];i&&(o=i.project(o)),o&&isFinite(o[0])&&isFinite(o[1])&&(vi(n,n,o),ta(t,t,o))}}var lE=function(){function r(n){this.name=n}return r.prototype.setCenter=function(n){this._center=n},r.prototype.getCenter=function(){var n=this._center;return n||(n=this._center=this.calcCenter()),n},r}(),uE=function r(n,t){this.type="polygon",this.exterior=n,this.interiors=t},cE=function r(n){this.type="linestring",this.points=n},hE=function(r){function n(t,i,a){var o=r.call(this,t)||this;return o.type="geoJSON",o.geometries=i,o._center=a&&[a[0],a[1]],o}return R(n,r),n.prototype.calcCenter=function(){for(var i,t=this.geometries,a=0,o=0;o<t.length;o++){var l=t[o],u=l.exterior,c=u&&u.length;c>a&&(i=l,a=c)}if(i)return function J3(r){for(var n=0,t=0,i=0,a=r.length,o=r[a-1][0],l=r[a-1][1],u=0;u<a;u++){var c=r[u][0],h=r[u][1],f=o*h-c*l;n+=f,t+=(o+c)*f,i+=(l+h)*f,o=c,l=h}return n?[t/n/3,i/n/3,n]:[r[0][0]||0,r[0][1]||0]}(i.exterior);var h=this.getBoundingRect();return[h.x+h.width/2,h.y+h.height/2]},n.prototype.getBoundingRect=function(t){var i=this._rect;if(i&&!t)return i;var a=[1/0,1/0],o=[-1/0,-1/0];return De(this.geometries,function(u){"polygon"===u.type?sE(u.exterior,a,o,t):De(u.points,function(c){sE(c,a,o,t)})}),isFinite(a[0])&&isFinite(a[1])&&isFinite(o[0])&&isFinite(o[1])||(a[0]=a[1]=o[0]=o[1]=0),i=new Mn(a[0],a[1],o[0]-a[0],o[1]-a[1]),t||(this._rect=i),i},n.prototype.contain=function(t){var i=this.getBoundingRect(),a=this.geometries;if(!i.contain(t[0],t[1]))return!1;e:for(var o=0,l=a.length;o<l;o++){var u=a[o];if("polygon"===u.type){var h=u.interiors;if(nh(u.exterior,t[0],t[1])){for(var f=0;f<(h?h.length:0);f++)if(nh(h[f],t[0],t[1]))continue e;return!0}}}return!1},n.prototype.transformTo=function(t,i,a,o){var l=this.getBoundingRect(),u=l.width/l.height;a?o||(o=a/u):a=u*o;for(var c=new Mn(t,i,a,o),h=l.calculateTransform(c),f=this.geometries,p=0;p<f.length;p++){var v=f[p];"polygon"===v.type?(YT(v.exterior,h),De(v.interiors,function(m){YT(m,h)})):De(v.points,function(m){YT(m,h)})}(l=this._rect).copy(c),this._center=[l.x+l.width/2,l.y+l.height/2]},n.prototype.cloneShallow=function(t){null==t&&(t=this.name);var i=new n(t,this.geometries,this._center);return i._rect=this._rect,i.transformTo=null,i},n}(lE),Y3=function(r){function n(t,i){var a=r.call(this,t)||this;return a.type="geoSVG",a._elOnlyForCalculate=i,a}return R(n,r),n.prototype.calcCenter=function(){for(var t=this._elOnlyForCalculate,i=t.getBoundingRect(),a=[i.x+i.width/2,i.y+i.height/2],o=mu(G3),l=t;l&&!l.isGeoSVGGraphicRoot;)Mo(o,l.getLocalTransform(),o),l=l.parent;return zl(o,o),Hr(a,a,o),a},n}(lE);function QT(r,n,t){for(var i=0;i<r.length;i++)r[i]=dE(r[i],n[i],t)}function dE(r,n,t){for(var i=[],a=n[0],o=n[1],l=0;l<r.length;l+=2){var u=r.charCodeAt(l)-64,c=r.charCodeAt(l+1)-64;u=u>>1^-(1&u),c=c>>1^-(1&c),a=u+=a,o=c+=o,i.push([u/t,c/t])}return i}function qT(r,n){return r=function Q3(r){if(!r.UTF8Encoding)return r;var n=r,t=n.UTF8Scale;return null==t&&(t=1024),De(n.features,function(a){var o=a.geometry,l=o.encodeOffsets,u=o.coordinates;if(l)switch(o.type){case"LineString":o.coordinates=dE(u,l,t);break;case"Polygon":case"MultiLineString":QT(u,l,t);break;case"MultiPolygon":De(u,function(c,h){return QT(c,l[h],t)})}}),n.UTF8Encoding=!1,n}(r),_t(_n(r.features,function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0}),function(t){var i=t.properties,a=t.geometry,o=[];switch(a.type){case"Polygon":var l=a.coordinates;o.push(new uE(l[0],l.slice(1)));break;case"MultiPolygon":De(a.coordinates,function(c){c[0]&&o.push(new uE(c[0],c.slice(1)))});break;case"LineString":o.push(new cE([a.coordinates]));break;case"MultiLineString":o.push(new cE(a.coordinates))}var u=new hE(i[n||"name"],o,i.cp);return u.properties=i,u})}function q3(r,n,t,i,a,o,l,u){return new Gn({style:{text:r,font:n,align:t,verticalAlign:i,padding:a,rich:o,overflow:l?"truncate":null,lineHeight:u}}).getBoundingRect()}var cg=Xn();function fE(r,n){var o,l,t=pE(r,"labels"),i=JT(n);return gE(t,i)||(Pe(i)?o=_E(r,i):(l="auto"===i?function tF(r){var n=cg(r).autoInterval;return null!=n?n:cg(r).autoInterval=r.calculateCategoryInterval()}(r):i,o=mE(r,l)),vE(t,i,{labels:o,labelCategoryInterval:l}))}function pE(r,n){return cg(r)[n]||(cg(r)[n]=[])}function gE(r,n){for(var t=0;t<r.length;t++)if(r[t].key===n)return r[t].value}function vE(r,n,t){return r.push({key:n,value:t}),t}function mE(r,n,t){var i=ug(r),a=r.scale,o=a.getExtent(),l=r.getLabelModel(),u=[],c=Math.max((n||0)+1,1),h=o[0],f=a.count();0!==h&&c>1&&f/c>2&&(h=Math.round(Math.ceil(h/c)*c));var p=aE(r),v=l.get("showMinLabel")||p,m=l.get("showMaxLabel")||p;v&&h!==o[0]&&C(o[0]);for(var y=h;y<=o[1];y+=c)C(y);function C(T){var z={value:T};u.push(t?T:{formattedLabel:i(z),rawLabel:a.getLabel(z),tickValue:T})}return m&&y-c!==o[1]&&C(o[1]),u}function _E(r,n,t){var i=r.scale,a=ug(r),o=[];return De(i.getTicks(),function(l){var u=i.getLabel(l),c=l.value;n(l.value,u)&&o.push(t?c:{formattedLabel:a(l),rawLabel:u,tickValue:c})}),o}var yE=[0,1],iF=function(){function r(n,t,i){this.onBand=!1,this.inverse=!1,this.dim=n,this.scale=t,this._extent=i||[0,0]}return r.prototype.contain=function(n){var t=this._extent,i=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]);return n>=i&&n<=a},r.prototype.containData=function(n){return this.scale.contain(n)},r.prototype.getExtent=function(){return this._extent.slice()},r.prototype.getPixelPrecision=function(n){return Wh(n||this.scale.getExtent(),this._extent)},r.prototype.setExtent=function(n,t){var i=this._extent;i[0]=n,i[1]=t},r.prototype.dataToCoord=function(n,t){var i=this._extent,a=this.scale;return n=a.normalize(n),this.onBand&&"ordinal"===a.type&&CE(i=i.slice(),a.count()),mr(n,yE,i,t)},r.prototype.coordToData=function(n,t){var i=this._extent,a=this.scale;this.onBand&&"ordinal"===a.type&&CE(i=i.slice(),a.count());var o=mr(n,i,yE,t);return this.scale.scale(o)},r.prototype.pointToData=function(n,t){},r.prototype.getTicksCoords=function(n){var t=(n=n||{}).tickModel||this.getTickModel(),o=_t(function $3(r,n){return"category"===r.type?function X3(r,n){var o,l,t=pE(r,"ticks"),i=JT(n),a=gE(t,i);if(a)return a;if((!n.get("show")||r.scale.isBlank())&&(o=[]),Pe(i))o=_E(r,i,!0);else if("auto"===i){var u=fE(r,r.getLabelModel());l=u.labelCategoryInterval,o=_t(u.labels,function(c){return c.tickValue})}else o=mE(r,l=i,!0);return vE(t,i,{ticks:o,tickCategoryInterval:l})}(r,n):{ticks:_t(r.scale.getTicks(),function(t){return t.value})}}(this,t).ticks,function(u){return{coord:this.dataToCoord("ordinal"===this.scale.type?this.scale.getRawOrdinalNumber(u):u),tickValue:u}},this);return function aF(r,n,t,i){var a=n.length;if(r.onBand&&!t&&a){var l,o=r.getExtent();if(1===a)n[0].coord=o[0],l=n[1]={coord:o[0]};else{var h=(n[a-1].coord-n[0].coord)/(n[a-1].tickValue-n[0].tickValue);De(n,function(m){m.coord-=h/2});var f=r.scale.getExtent();n.push(l={coord:n[a-1].coord+h*(1+f[1]-n[a-1].tickValue)})}var p=o[0]>o[1];v(n[0].coord,o[0])&&(i?n[0].coord=o[0]:n.shift()),i&&v(o[0],n[0].coord)&&n.unshift({coord:o[0]}),v(o[1],l.coord)&&(i?l.coord=o[1]:n.pop()),i&&v(l.coord,o[1])&&n.push({coord:o[1]})}function v(m,y){return m=li(m),y=li(y),p?m>y:m<y}}(this,o,t.get("alignWithLabel"),n.clamp),o},r.prototype.getMinorTicksCoords=function(){if("ordinal"===this.scale.type)return[];var t=this.model.getModel("minorTick").get("splitNumber");return t>0&&t<100||(t=5),_t(this.scale.getMinorTicks(t),function(o){return _t(o,function(l){return{coord:this.dataToCoord(l),tickValue:l}},this)},this)},r.prototype.getViewLabels=function(){return function K3(r){return"category"===r.type?function j3(r){var n=r.getLabelModel(),t=fE(r,n);return!n.get("show")||r.scale.isBlank()?{labels:[],labelCategoryInterval:t.labelCategoryInterval}:t}(r):function eF(r){var n=r.scale.getTicks(),t=ug(r);return{labels:_t(n,function(i,a){return{level:i.level,formattedLabel:t(i,a),rawLabel:r.scale.getLabel(i),tickValue:i.value}})}}(r)}(this).labels},r.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},r.prototype.getTickModel=function(){return this.model.getModel("axisTick")},r.prototype.getBandWidth=function(){var n=this._extent,t=this.scale.getExtent(),i=t[1]-t[0]+(this.onBand?1:0);0===i&&(i=1);var a=Math.abs(n[1]-n[0]);return Math.abs(a)/i},r.prototype.calculateCategoryInterval=function(){return function nF(r){var n=function rF(r){var n=r.getLabelModel();return{axisRotate:r.getRotate?r.getRotate():r.isHorizontal&&!r.isHorizontal()?90:0,labelRotate:n.get("rotate")||0,font:n.getFont()}}(r),t=ug(r),i=(n.axisRotate-n.labelRotate)/180*Math.PI,a=r.scale,o=a.getExtent(),l=a.count();if(o[1]-o[0]<1)return 0;var u=1;l>40&&(u=Math.max(1,Math.floor(l/40)));for(var c=o[0],h=r.dataToCoord(c+1)-r.dataToCoord(c),f=Math.abs(h*Math.cos(i)),p=Math.abs(h*Math.sin(i)),v=0,m=0;c<=o[1];c+=u){var C,T=_c(t({value:c}),n.font,"center","top");C=1.3*T.height,v=Math.max(v,1.3*T.width,7),m=Math.max(m,C,7)}var z=v/f,E=m/p;isNaN(z)&&(z=1/0),isNaN(E)&&(E=1/0);var N=Math.max(0,Math.floor(Math.min(z,E))),X=cg(r.model),ve=r.getExtent(),ce=X.lastAutoInterval,_e=X.lastTickCount;return null!=ce&&null!=_e&&Math.abs(ce-N)<=1&&Math.abs(_e-l)<=1&&ce>N&&X.axisExtent0===ve[0]&&X.axisExtent1===ve[1]?N=ce:(X.lastTickCount=l,X.lastAutoInterval=N,X.axisExtent0=ve[0],X.axisExtent1=ve[1]),N}(this)},r}();function CE(r,n){var a=(r[1]-r[0])/n/2;r[0]+=a,r[1]-=a}const Yo=iF;function oF(r){var n=Jn.extend(r);return Jn.registerClass(n),n}function sF(r){var n=oi.extend(r);return oi.registerClass(n),n}function lF(r){var n=Xr.extend(r);return Xr.registerClass(n),n}function uF(r){var n=Vr.extend(r);return Vr.registerClass(n),n}var hg=2*Math.PI,rh=Fo.CMD,cF=["top","right","bottom","left"];function hF(r,n,t,i,a){var o=t.width,l=t.height;switch(r){case"top":i.set(t.x+o/2,t.y-n),a.set(0,-1);break;case"bottom":i.set(t.x+o/2,t.y+l+n),a.set(0,1);break;case"left":i.set(t.x-n,t.y+l/2),a.set(-1,0);break;case"right":i.set(t.x+o+n,t.y+l/2),a.set(1,0)}}function dF(r,n,t,i,a,o,l,u,c){l-=r,u-=n;var h=Math.sqrt(l*l+u*u),f=(l/=h)*t+r,p=(u/=h)*t+n;if(Math.abs(i-a)%hg<1e-4)return c[0]=f,c[1]=p,h-t;if(o){var v=i;i=Ks(a),a=Ks(v)}else i=Ks(i),a=Ks(a);i>a&&(a+=hg);var m=Math.atan2(u,l);if(m<0&&(m+=hg),m>=i&&m<=a||m+hg>=i&&m+hg<=a)return c[0]=f,c[1]=p,h-t;var y=t*Math.cos(i)+r,C=t*Math.sin(i)+n,T=t*Math.cos(a)+r,z=t*Math.sin(a)+n,E=(y-l)*(y-l)+(C-u)*(C-u),N=(T-l)*(T-l)+(z-u)*(z-u);return E<N?(c[0]=y,c[1]=C,Math.sqrt(E)):(c[0]=T,c[1]=z,Math.sqrt(N))}function z0(r,n,t,i,a,o,l,u){var c=a-r,h=o-n,f=t-r,p=i-n,v=Math.sqrt(f*f+p*p),y=(c*(f/=v)+h*(p/=v))/v;u&&(y=Math.min(Math.max(y,0),1));var C=l[0]=r+(y*=v)*f,T=l[1]=n+y*p;return Math.sqrt((C-a)*(C-a)+(T-o)*(T-o))}function xE(r,n,t,i,a,o,l){t<0&&(r+=t,t=-t),i<0&&(n+=i,i=-i);var u=r+t,c=n+i,h=l[0]=Math.min(Math.max(a,r),u),f=l[1]=Math.min(Math.max(o,n),c);return Math.sqrt((h-a)*(h-a)+(f-o)*(f-o))}var zs=[];function fF(r,n,t){var i=xE(n.x,n.y,n.width,n.height,r.x,r.y,zs);return t.set(zs[0],zs[1]),i}function pF(r,n,t){for(var u,c,i=0,a=0,o=0,l=0,h=1/0,f=n.data,p=r.x,v=r.y,m=0;m<f.length;){var y=f[m++];1===m&&(o=i=f[m],l=a=f[m+1]);var C=h;switch(y){case rh.M:i=o=f[m++],a=l=f[m++];break;case rh.L:C=z0(i,a,f[m],f[m+1],p,v,zs,!0),i=f[m++],a=f[m++];break;case rh.C:C=yl(i,a,f[m++],f[m++],f[m++],f[m++],f[m],f[m+1],p,v,zs),i=f[m++],a=f[m++];break;case rh.Q:C=Zs(i,a,f[m++],f[m++],f[m],f[m+1],p,v,zs),i=f[m++],a=f[m++];break;case rh.A:var T=f[m++],z=f[m++],E=f[m++],N=f[m++],X=f[m++],ve=f[m++];m+=1;var ce=!!(1-f[m++]);u=Math.cos(X)*E+T,c=Math.sin(X)*N+z,m<=1&&(o=u,l=c),C=dF(T,z,N,X,X+ve,ce,(p-T)*N/E+T,v,zs),i=Math.cos(X+ve)*E+T,a=Math.sin(X+ve)*N+z;break;case rh.R:C=xE(o=i=f[m++],l=a=f[m++],f[m++],f[m++],p,v,zs);break;case rh.Z:C=z0(i,a,o,l,p,v,zs,!0),i=o,a=l}C<h&&(h=C,t.set(zs[0],zs[1]))}return h}var ws=new bn,ei=new bn,Di=new bn,ll=new bn,ul=new bn;function TE(r,n){if(r){var t=r.getTextGuideLine(),i=r.getTextContent();if(i&&t){var a=r.textGuideLineConfig||{},o=[[0,0],[0,0],[0,0]],l=a.candidates||cF,u=i.getBoundingRect().clone();u.applyTransform(i.getComputedTransform());var c=1/0,h=a.anchor,f=r.getComputedTransform(),p=f&&zl([],f),v=n.get("length2")||0;h&&Di.copy(h);for(var m=0;m<l.length;m++){hF(l[m],0,u,ws,ll),bn.scaleAndAdd(ei,ws,ll,v),ei.transform(p);var C=r.getBoundingRect(),T=h?h.distance(ei):r instanceof Fn?pF(ei,r.path,Di):fF(ei,C,Di);T<c&&(c=T,ei.transform(f),Di.transform(f),Di.toArray(o[0]),ei.toArray(o[1]),ws.toArray(o[2]))}bE(o,n.get("minTurnAngle")),t.setShape({points:o})}}}var w0=[],La=new bn;function bE(r,n){if(n<=180&&n>0){n=n/180*Math.PI,ws.fromArray(r[0]),ei.fromArray(r[1]),Di.fromArray(r[2]),bn.sub(ll,ws,ei),bn.sub(ul,Di,ei);var t=ll.len(),i=ul.len();if(!(t<.001||i<.001)){ll.scale(1/t),ul.scale(1/i);var a=ll.dot(ul);if(Math.cos(n)<a){var l=z0(ei.x,ei.y,Di.x,Di.y,ws.x,ws.y,w0,!1);La.fromArray(w0),La.scaleAndAdd(ul,l/Math.tan(Math.PI-n));var u=Di.x!==ei.x?(La.x-ei.x)/(Di.x-ei.x):(La.y-ei.y)/(Di.y-ei.y);if(isNaN(u))return;u<0?bn.copy(La,ei):u>1&&bn.copy(La,Di),La.toArray(r[1])}}}}function gF(r,n,t){if(t<=180&&t>0){t=t/180*Math.PI,ws.fromArray(r[0]),ei.fromArray(r[1]),Di.fromArray(r[2]),bn.sub(ll,ei,ws),bn.sub(ul,Di,ei);var i=ll.len(),a=ul.len();if(!(i<.001||a<.001)&&(ll.scale(1/i),ul.scale(1/a),ll.dot(n)<Math.cos(t))){var u=z0(ei.x,ei.y,Di.x,Di.y,ws.x,ws.y,w0,!1);La.fromArray(w0);var c=Math.PI/2,f=c+Math.acos(ul.dot(n))-t;if(f>=c)bn.copy(La,Di);else{La.scaleAndAdd(ul,u/Math.tan(Math.PI/2-f));var p=Di.x!==ei.x?(La.x-ei.x)/(Di.x-ei.x):(La.y-ei.y)/(Di.y-ei.y);if(isNaN(p))return;p<0?bn.copy(La,ei):p>1&&bn.copy(La,Di)}La.toArray(r[1])}}}function SE(r,n,t,i){var a="normal"===t,o=a?r:r.ensureState(t);o.ignore=n;var l=i.get("smooth");l&&!0===l&&(l=.3),o.shape=o.shape||{},l>0&&(o.shape.smooth=l);var u=i.getModel("lineStyle").getLineStyle();a?r.useStyle(u):o.style=u}function vF(r,n){var t=n.smooth,i=n.points;if(i)if(r.moveTo(i[0][0],i[0][1]),t>0&&i.length>=3){var a=xi(i[0],i[1]),o=xi(i[1],i[2]);if(!a||!o)return r.lineTo(i[1][0],i[1][1]),void r.lineTo(i[2][0],i[2][1]);var l=Math.min(a,o)*t,u=Ni([],i[1],i[0],l/a),c=Ni([],i[1],i[2],l/o),h=Ni([],u,c,.5);r.bezierCurveTo(u[0],u[1],u[0],u[1],h[0],h[1]),r.bezierCurveTo(c[0],c[1],c[0],c[1],i[2][0],i[2][1])}else for(var f=1;f<i.length;f++)r.lineTo(i[f][0],i[f][1])}function KT(r,n,t){var i=r.getTextGuideLine(),a=r.getTextContent();if(a){for(var o=n.normal,l=o.get("show"),u=a.ignore,c=0;c<Ic.length;c++){var h=Ic[c],f=n[h],p="normal"===h;if(f){var v=f.get("show");if((p?u:$t(a.states[h]&&a.states[h].ignore,u))||!$t(v,l)){var y=p?i:i&&i.states[h];y&&(y.ignore=!0);continue}i||(i=new Ia,r.setTextGuideLine(i),!p&&(u||!l)&&SE(i,!0,"normal",n.normal),r.stateProxy&&(i.stateProxy=r.stateProxy)),SE(i,!1,h,f)}}if(i){Dt(i.style,t),i.style.fill=null;var C=o.get("showAbove");(r.textGuideLineConfig=r.textGuideLineConfig||{}).showAbove=C||!1,i.buildPath=vF}}else i&&r.removeTextGuideLine()}function $T(r,n){for(var t={normal:r.getModel(n=n||"labelLine")},i=0;i<oa.length;i++){var a=oa[i];t[a]=r.getModel([a,n])}return t}function zE(r){for(var n=[],t=0;t<r.length;t++){var i=r[t];if(!i.defaultAttr.ignore){var a=i.label,o=a.getComputedTransform(),l=a.getBoundingRect(),u=!o||o[1]<1e-5&&o[2]<1e-5,c=a.style.margin||0,h=l.clone();h.applyTransform(o),h.x-=c/2,h.y-=c/2,h.width+=c,h.height+=c;var f=u?new H_(l,o):null;n.push({label:a,labelLine:i.labelLine,rect:h,localRect:l,obb:f,priority:i.priority,defaultAttr:i.defaultAttr,layoutOption:i.computedLayoutOption,axisAligned:u,transform:o})}}return n}function wE(r,n,t,i,a,o){var l=r.length;if(!(l<2)){r.sort(function(Ee,Le){return Ee.rect[n]-Le.rect[n]});for(var c,u=0,h=!1,f=[],p=0,v=0;v<l;v++){var m=r[v],y=m.rect;(c=y[n]-u)<0&&(y[n]-=c,m.label[n]-=c,h=!0);var C=Math.max(-c,0);f.push(C),p+=C,u=y[n]+y[t]}p>0&&o&&ce(-p/l,0,l);var E,N,T=r[0],z=r[l-1];return X(),E<0&&_e(-E,.8),N<0&&_e(N,.8),X(),ve(E,N,1),ve(N,E,-1),X(),E<0&&ze(-E),N<0&&ze(N),h}function X(){E=T.rect[n]-i,N=a-z.rect[n]-z.rect[t]}function ve(Ee,Le,ke){if(Ee<0){var Ue=Math.min(Le,-Ee);if(Ue>0){ce(Ue*ke,0,l);var He=Ue+Ee;He<0&&_e(-He*ke,1)}else _e(-Ee*ke,1)}}function ce(Ee,Le,ke){0!==Ee&&(h=!0);for(var Ue=Le;Ue<ke;Ue++){var He=r[Ue];He.rect[n]+=Ee,He.label[n]+=Ee}}function _e(Ee,Le){for(var ke=[],Ue=0,He=1;He<l;He++){var Ke=r[He-1].rect,nt=Math.max(r[He].rect[n]-Ke[n]-Ke[t],0);ke.push(nt),Ue+=nt}if(Ue){var lt=Math.min(Math.abs(Ee)/Ue,Le);if(Ee>0)for(He=0;He<l-1;He++)ce(ke[He]*lt,0,He+1);else for(He=l-1;He>0;He--)ce(-ke[He-1]*lt,He,l)}}function ze(Ee){var Le=Ee<0?-1:1;Ee=Math.abs(Ee);for(var ke=Math.ceil(Ee/(l-1)),Ue=0;Ue<l-1;Ue++)if(Le>0?ce(ke,0,Ue+1):ce(-ke,l-Ue-1,l),(Ee-=ke)<=0)return}}function DE(r,n,t,i){return wE(r,"y","height",n,t,i)}function AE(r){var n=[];r.sort(function(C,T){return T.priority-C.priority});var t=new Mn(0,0,0,0);function i(C){if(!C.ignore){var T=C.ensureState("emphasis");null==T.ignore&&(T.ignore=!1)}C.ignore=!0}for(var a=0;a<r.length;a++){var o=r[a],l=o.axisAligned,u=o.localRect,c=o.transform,h=o.label,f=o.labelLine;t.copy(o.rect),t.width-=.1,t.height-=.1,t.x+=.05,t.y+=.05;for(var p=o.obb,v=!1,m=0;m<n.length;m++){var y=n[m];if(t.intersect(y.rect)){if(l&&y.axisAligned){v=!0;break}if(y.obb||(y.obb=new H_(y.localRect,y.transform)),p||(p=new H_(u,c)),p.intersect(y.obb)){v=!0;break}}}v?(i(h),f&&i(f)):(h.attr("ignore",o.defaultAttr.ignore),f&&f.attr("ignore",o.defaultAttr.labelGuideIgnore),n.push(o))}}function _F(r){if(r){for(var n=[],t=0;t<r.length;t++)n.push(r[t].slice());return n}}function yF(r,n){var t=r.label,i=n&&n.getTextGuideLine();return{dataIndex:r.dataIndex,dataType:r.dataType,seriesIndex:r.seriesModel.seriesIndex,text:r.label.style.text,rect:r.hostRect,labelRect:r.rect,align:t.style.align,verticalAlign:t.style.verticalAlign,labelLinePoints:_F(i&&i.shape.points)}}var EE=["align","verticalAlign","width","height","fontSize"],wo=new ds,jT=Xn(),CF=Xn();function D0(r,n,t){for(var i=0;i<t.length;i++){var a=t[i];null!=n[a]&&(r[a]=n[a])}}var A0=["x","y","rotation"],xF=function(){function r(){this._labelList=[],this._chartViewList=[]}return r.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},r.prototype._addLabel=function(n,t,i,a,o){var l=a.style,c=a.__hostTarget.textConfig||{},h=a.getComputedTransform(),f=a.getBoundingRect().plain();Mn.applyTransform(f,f,h),h?wo.setLocalTransform(h):(wo.x=wo.y=wo.rotation=wo.originX=wo.originY=0,wo.scaleX=wo.scaleY=1);var v,p=a.__hostTarget;if(p){v=p.getBoundingRect().plain();var m=p.getComputedTransform();Mn.applyTransform(v,v,m)}var y=v&&p.getTextGuideLine();this._labelList.push({label:a,labelLine:y,seriesModel:i,dataIndex:n,dataType:t,layoutOption:o,computedLayoutOption:null,rect:f,hostRect:v,priority:v?v.width*v.height:0,defaultAttr:{ignore:a.ignore,labelGuideIgnore:y&&y.ignore,x:wo.x,y:wo.y,scaleX:wo.scaleX,scaleY:wo.scaleY,rotation:wo.rotation,style:{x:l.x,y:l.y,align:l.align,verticalAlign:l.verticalAlign,width:l.width,height:l.height,fontSize:l.fontSize},cursor:a.cursor,attachedPos:c.position,attachedRot:c.rotation}})},r.prototype.addLabelsOfSeries=function(n){var t=this;this._chartViewList.push(n);var i=n.__model,a=i.get("labelLayout");!Pe(a)&&!gn(a).length||n.group.traverse(function(o){if(o.ignore)return!0;var l=o.getTextContent(),u=dn(o);l&&!l.disableLabelLayout&&t._addLabel(u.dataIndex,u.dataType,i,l,a)})},r.prototype.updateLayoutConfig=function(n){var t=n.getWidth(),i=n.getHeight();function a(N,X){return function(){TE(N,X)}}for(var o=0;o<this._labelList.length;o++){var l=this._labelList[o],u=l.label,c=u.__hostTarget,h=l.defaultAttr,f=void 0;f=Pe(l.layoutOption)?l.layoutOption(yF(l,c)):l.layoutOption,l.computedLayoutOption=f=f||{};var p=Math.PI/180;c&&c.setTextConfig({local:!1,position:null!=f.x||null!=f.y?null:h.attachedPos,rotation:null!=f.rotate?f.rotate*p:h.attachedRot,offset:[f.dx||0,f.dy||0]});var v=!1;if(null!=f.x?(u.x=Ht(f.x,t),u.setStyle("x",0),v=!0):(u.x=h.x,u.setStyle("x",h.style.x)),null!=f.y?(u.y=Ht(f.y,i),u.setStyle("y",0),v=!0):(u.y=h.y,u.setStyle("y",h.style.y)),f.labelLinePoints){var m=c.getTextGuideLine();m&&(m.setShape({points:f.labelLinePoints}),v=!1)}jT(u).needsUpdateLabelLine=v,u.rotation=null!=f.rotate?f.rotate*p:h.rotation,u.scaleX=h.scaleX,u.scaleY=h.scaleY;for(var C=0;C<EE.length;C++){var T=EE[C];u.setStyle(T,null!=f[T]?f[T]:h.style[T])}if(f.draggable){if(u.draggable=!0,u.cursor="move",c){var z=l.seriesModel;null!=l.dataIndex&&(z=l.seriesModel.getData(l.dataType).getItemModel(l.dataIndex)),u.on("drag",a(c,z.getModel("labelLine")))}}else u.off("drag"),u.cursor=h.cursor}},r.prototype.layout=function(n){var t=n.getWidth(),i=n.getHeight(),a=zE(this._labelList),o=_n(a,function(c){return"shiftX"===c.layoutOption.moveOverlap}),l=_n(a,function(c){return"shiftY"===c.layoutOption.moveOverlap});(function mF(r,n,t,i){wE(r,"x","width",n,t,i)})(o,0,t),DE(l,0,i),AE(_n(a,function(c){return c.layoutOption.hideOverlap}))},r.prototype.processLabelsOverall=function(){var n=this;De(this._chartViewList,function(t){var i=t.__model,a=t.ignoreLabelLineUpdate,o=i.isAnimationEnabled();t.group.traverse(function(l){if(l.ignore&&!l.forceLabelAnimation)return!0;var u=!a,c=l.getTextContent();!u&&c&&(u=jT(c).needsUpdateLabelLine),u&&n._updateLabelLine(l,i),o&&n._animateLabels(l,i)})})},r.prototype._updateLabelLine=function(n,t){var i=n.getTextContent(),a=dn(n),o=a.dataIndex;if(i&&null!=o){var l=t.getData(a.dataType),u=l.getItemModel(o),c={},h=l.getItemVisual(o,"style"),f=l.getVisual("drawType");c.stroke=h[f];var p=u.getModel("labelLine");KT(n,$T(u),c),TE(n,p)}},r.prototype._animateLabels=function(n,t){var i=n.getTextContent(),a=n.getTextGuideLine();if(i&&(n.forceLabelAnimation||!i.ignore&&!i.invisible&&!n.disableLabelAnimation&&!Du(n))){var l=(o=jT(i)).oldLayout,u=dn(n),c=u.dataIndex,h={x:i.x,y:i.y,rotation:i.rotation},f=t.getData(u.dataType);if(l){i.attr(l);var v=n.prevStates;v&&(Ye(v,"select")>=0&&i.attr(o.oldLayoutSelect),Ye(v,"emphasis")>=0&&i.attr(o.oldLayoutEmphasis)),Kn(i,h,t,c)}else if(i.attr(h),!Au(i).valueAnimation){var p=$t(i.style.opacity,1);i.style.opacity=0,Kr(i,{style:{opacity:p}},t,c)}if(o.oldLayout=h,i.states.select){var m=o.oldLayoutSelect={};D0(m,h,A0),D0(m,i.states.select,A0)}if(i.states.emphasis){var y=o.oldLayoutEmphasis={};D0(y,h,A0),D0(y,i.states.emphasis,A0)}Zm(i,c,f,t,t)}if(a&&!a.ignore&&!a.invisible){var o=CF(a),C={points:a.shape.points};(l=o.oldLayout)?(a.attr({shape:l}),Kn(a,{shape:C},t)):(a.setShape(C),a.style.strokePercent=0,Kr(a,{style:{strokePercent:1}},t)),o.oldLayout=C}},r}();const TF=xF;var XT=Xn();function ME(r){r.registerUpdateLifecycle("series:beforeupdate",function(n,t,i){var a=XT(t).labelManager;a||(a=XT(t).labelManager=new TF),a.clearLabels()}),r.registerUpdateLifecycle("series:layoutlabels",function(n,t,i){var a=XT(t).labelManager;i.updatedSeries.forEach(function(o){a.addLabelsOfSeries(t.getViewOfSeriesModel(o))}),a.updateLayoutConfig(t),a.layout(t),a.processLabelsOverall()})}function OE(r,n,t){var i=fn.createCanvas(),a=n.getWidth(),o=n.getHeight(),l=i.style;return l&&(l.position="absolute",l.left="0",l.top="0",l.width=a+"px",l.height=o+"px",i.setAttribute("data-zr-dom-id",r)),i.width=a*t,i.height=o*t,i}Nn(ME);var bF=function(r){function n(t,i,a){var l,o=r.call(this)||this;o.motionBlur=!1,o.lastFrameAlpha=.7,o.dpr=1,o.virtual=!1,o.config={},o.incremental=!1,o.zlevel=0,o.maxRepaintRectCount=5,o.__dirty=!0,o.__firstTimePaint=!0,o.__used=!1,o.__drawIndex=0,o.__startIndex=0,o.__endIndex=0,o.__prevStartIndex=null,o.__prevEndIndex=null,a=a||Lh,"string"==typeof t?l=OE(t,i,a):tt(t)&&(t=(l=t).id),o.id=t,o.dom=l;var u=l.style;return u&&(Va(l),l.onselectstart=function(){return!1},u.padding="0",u.margin="0",u.borderWidth="0"),o.painter=i,o.dpr=a,o}return or(n,r),n.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},n.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},n.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},n.prototype.setUnpainted=function(){this.__firstTimePaint=!0},n.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=OE("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!==t&&this.ctxBack.scale(t,t)},n.prototype.createRepaintRects=function(t,i,a,o){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var T,l=[],u=this.maxRepaintRectCount,c=!1,h=new Mn(0,0,0,0);function f(E){if(E.isFinite()&&!E.isZero())if(0===l.length)(N=new Mn(0,0,0,0)).copy(E),l.push(N);else{for(var X=!1,ve=1/0,ce=0,_e=0;_e<l.length;++_e){var ze=l[_e];if(ze.intersect(E)){var Ee=new Mn(0,0,0,0);Ee.copy(ze),Ee.union(E),l[_e]=Ee,X=!0;break}if(c){h.copy(E),h.union(ze);var He=h.width*h.height-E.width*E.height-ze.width*ze.height;He<ve&&(ve=He,ce=_e)}}var N;c&&(l[ce].union(E),X=!0),X||((N=new Mn(0,0,0,0)).copy(E),l.push(N)),c||(c=l.length>=u)}}for(var p=this.__startIndex;p<this.__endIndex;++p)if(v=t[p]){var m=v.shouldBePainted(a,o,!0,!0);(y=v.__isRendered&&(1&v.__dirty||!m)?v.getPrevPaintRect():null)&&f(y);var C=m&&(1&v.__dirty||!v.__isRendered)?v.getPaintRect():null;C&&f(C)}for(p=this.__prevStartIndex;p<this.__prevEndIndex;++p){var v,y;m=(v=i[p]).shouldBePainted(a,o,!0,!0),!v||m&&v.__zr||!v.__isRendered||(y=v.getPrevPaintRect())&&f(y)}do{for(T=!1,p=0;p<l.length;)if(l[p].isZero())l.splice(p,1);else{for(var z=p+1;z<l.length;)l[p].intersect(l[z])?(T=!0,l[p].union(l[z]),l.splice(z,1)):z++;p++}}while(T);return this._paintRects=l,l},n.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},n.prototype.resize=function(t,i){var a=this.dpr,o=this.dom,l=o.style,u=this.domBack;l&&(l.width=t+"px",l.height=i+"px"),o.width=t*a,o.height=i*a,u&&(u.width=t*a,u.height=i*a,1!==a&&this.ctxBack.scale(a,a))},n.prototype.clear=function(t,i,a){var o=this.dom,l=this.ctx,u=o.width,c=o.height;i=i||this.clearColor;var h=this.motionBlur&&!t,f=this.lastFrameAlpha,p=this.dpr,v=this;h&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(o,0,0,u/p,c/p));var m=this.domBack;function y(C,T,z,E){if(l.clearRect(C,T,z,E),i&&"transparent"!==i){var N=void 0;jn(i)?(N=i.__canvasGradient||uT(l,i,{x:0,y:0,width:z,height:E}),i.__canvasGradient=N):Nr(i)&&(N=hT(l,i,{dirty:function(){v.setUnpainted(),v.__painter.refresh()}})),l.save(),l.fillStyle=N||i,l.fillRect(C,T,z,E),l.restore()}h&&(l.save(),l.globalAlpha=f,l.drawImage(m,C,T,z,E),l.restore())}!a||h?y(0,0,u,c):a.length&&De(a,function(C){y(C.x*p,C.y*p,C.width*p,C.height*p)})},n}(Oi);const eb=bF;var ih=314159,DF=function(){function r(n,t,i,a){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var o=!n.nodeName||"CANVAS"===n.nodeName.toUpperCase();this._opts=i=Ge({},i||{}),this.dpr=i.devicePixelRatio||Lh,this._singleCanvas=o,this.root=n,n.style&&(Va(n),n.innerHTML=""),this.storage=t;var u=this._zlevelList;this._prevDisplayList=[];var c=this._layers;if(o){var f=n,p=f.width,v=f.height;null!=i.width&&(p=i.width),null!=i.height&&(v=i.height),this.dpr=i.devicePixelRatio||1,f.width=p*this.dpr,f.height=v*this.dpr,this._width=p,this._height=v;var m=new eb(f,this,this.dpr);m.__builtin__=!0,m.initContext(),c[ih]=m,m.zlevel=ih,u.push(ih),this._domRoot=n}else{this._width=Dd(n,0,i),this._height=Dd(n,1,i);var h=this._domRoot=function wF(r,n){var t=document.createElement("div");return t.style.cssText=["position:relative","width:"+r+"px","height:"+n+"px","padding:0","margin:0","border-width:0"].join(";")+";",t}(this._width,this._height);n.appendChild(h)}}return r.prototype.getType=function(){return"canvas"},r.prototype.isSingleCanvas=function(){return this._singleCanvas},r.prototype.getViewportRoot=function(){return this._domRoot},r.prototype.getViewportRootOffset=function(){var n=this.getViewportRoot();if(n)return{offsetLeft:n.offsetLeft||0,offsetTop:n.offsetTop||0}},r.prototype.refresh=function(n){var t=this.storage.getDisplayList(!0),i=this._prevDisplayList,a=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,i,n,this._redrawId);for(var o=0;o<a.length;o++){var u=this._layers[a[o]];!u.__builtin__&&u.refresh&&u.refresh(0===o?this._backgroundColor:null)}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},r.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},r.prototype._paintHoverList=function(n){var t=n.length,i=this._hoverlayer;if(i&&i.clear(),t){for(var o,a={inHover:!0,viewWidth:this._width,viewHeight:this._height},l=0;l<t;l++){var u=n[l];u.__inHover&&(i||(i=this._hoverlayer=this.getLayer(1e5)),o||(o=i.ctx).save(),jc(o,u,a,l===t-1))}o&&o.restore()}},r.prototype.getHoverLayer=function(){return this.getLayer(1e5)},r.prototype.paintOne=function(n,t){dT(n,t)},r.prototype._paintList=function(n,t,i,a){if(this._redrawId===a){i=i||!1,this._updateLayerStatus(n);var o=this._doPaintList(n,t,i),l=o.finished,u=o.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),u&&this._paintHoverList(n),l)this.eachLayer(function(h){h.afterBrush&&h.afterBrush()});else{var c=this;Rs(function(){c._paintList(n,t,i,a)})}}},r.prototype._compositeManually=function(){var n=this.getLayer(ih).ctx,t=this._domRoot.width,i=this._domRoot.height;n.clearRect(0,0,t,i),this.eachBuiltinLayer(function(a){a.virtual&&n.drawImage(a.dom,0,0,t,i)})},r.prototype._doPaintList=function(n,t,i){for(var a=this,o=[],l=this._opts.useDirtyRect,u=0;u<this._zlevelList.length;u++){var h=this._layers[this._zlevelList[u]];h.__builtin__&&h!==this._hoverlayer&&(h.__dirty||i)&&o.push(h)}for(var f=!0,p=!1,v=function(C){var T=o[C],z=T.ctx,E=l&&T.createRepaintRects(n,t,m._width,m._height),N=i?T.__startIndex:T.__drawIndex,X=!i&&T.incremental&&Date.now,ve=X&&Date.now(),ce=T.zlevel===m._zlevelList[0]?m._backgroundColor:null;if(T.__startIndex===T.__endIndex)T.clear(!1,ce,E);else if(N===T.__startIndex){var _e=n[N];(!_e.incremental||!_e.notClear||i)&&T.clear(!1,ce,E)}-1===N&&(console.error("For some unknown reason. drawIndex is -1"),N=T.__startIndex);var ze,Ee=function(He){var Ke={inHover:!1,allClipped:!1,prevEl:null,viewWidth:a._width,viewHeight:a._height};for(ze=N;ze<T.__endIndex;ze++){var nt=n[ze];if(nt.__inHover&&(p=!0),a._doPaintEl(nt,T,l,He,Ke,ze===T.__endIndex-1),X&&Date.now()-ve>15)break}Ke.prevElClipPaths&&z.restore()};if(E)if(0===E.length)ze=T.__endIndex;else for(var Le=m.dpr,ke=0;ke<E.length;++ke){var Ue=E[ke];z.save(),z.beginPath(),z.rect(Ue.x*Le,Ue.y*Le,Ue.width*Le,Ue.height*Le),z.clip(),Ee(Ue),z.restore()}else z.save(),Ee(),z.restore();T.__drawIndex=ze,T.__drawIndex<T.__endIndex&&(f=!1)},m=this,y=0;y<o.length;y++)v(y);return gt.wxa&&De(this._layers,function(C){C&&C.ctx&&C.ctx.draw&&C.ctx.draw()}),{finished:f,needsRefreshHover:p}},r.prototype._doPaintEl=function(n,t,i,a,o,l){var u=t.ctx;if(i){var c=n.getPaintRect();(!a||c&&c.intersect(a))&&(jc(u,n,o,l),n.setPrevPaintRect(c))}else jc(u,n,o,l)},r.prototype.getLayer=function(n,t){this._singleCanvas&&!this._needsManuallyCompositing&&(n=ih);var i=this._layers[n];return i||((i=new eb("zr_"+n,this,this.dpr)).zlevel=n,i.__builtin__=!0,this._layerConfig[n]?Zt(i,this._layerConfig[n],!0):this._layerConfig[n-.01]&&Zt(i,this._layerConfig[n-.01],!0),t&&(i.virtual=t),this.insertLayer(n,i),i.initContext()),i},r.prototype.insertLayer=function(n,t){var i=this._layers,a=this._zlevelList,o=a.length,l=this._domRoot,u=null,c=-1;if(!i[n]&&function zF(r){return!(!r||!r.__builtin__&&("function"!=typeof r.resize||"function"!=typeof r.refresh))}(t)){if(o>0&&n>a[0]){for(c=0;c<o-1&&!(a[c]<n&&a[c+1]>n);c++);u=i[a[c]]}if(a.splice(c+1,0,n),i[n]=t,!t.virtual)if(u){var h=u.dom;h.nextSibling?l.insertBefore(t.dom,h.nextSibling):l.appendChild(t.dom)}else l.firstChild?l.insertBefore(t.dom,l.firstChild):l.appendChild(t.dom);t.__painter=this}},r.prototype.eachLayer=function(n,t){for(var i=this._zlevelList,a=0;a<i.length;a++){var o=i[a];n.call(t,this._layers[o],o)}},r.prototype.eachBuiltinLayer=function(n,t){for(var i=this._zlevelList,a=0;a<i.length;a++){var o=i[a],l=this._layers[o];l.__builtin__&&n.call(t,l,o)}},r.prototype.eachOtherLayer=function(n,t){for(var i=this._zlevelList,a=0;a<i.length;a++){var o=i[a],l=this._layers[o];l.__builtin__||n.call(t,l,o)}},r.prototype.getLayers=function(){return this._layers},r.prototype._updateLayerStatus=function(n){function t(p){o&&(o.__endIndex!==p&&(o.__dirty=!0),o.__endIndex=p)}if(this.eachBuiltinLayer(function(p,v){p.__dirty=p.__used=!1}),this._singleCanvas)for(var i=1;i<n.length;i++)if((a=n[i]).zlevel!==n[i-1].zlevel||a.incremental){this._needsManuallyCompositing=!0;break}var u,c,o=null,l=0;for(c=0;c<n.length;c++){var a,h=(a=n[c]).zlevel,f=void 0;u!==h&&(u=h,l=0),a.incremental?((f=this.getLayer(h+.001,this._needsManuallyCompositing)).incremental=!0,l=1):f=this.getLayer(h+(l>0?.01:0),this._needsManuallyCompositing),f.__builtin__||Dn("ZLevel "+h+" has been used by unkown layer "+f.id),f!==o&&(f.__used=!0,f.__startIndex!==c&&(f.__dirty=!0),f.__startIndex=c,f.__drawIndex=f.incremental?-1:c,t(c),o=f),1&a.__dirty&&!a.__inHover&&(f.__dirty=!0,f.incremental&&f.__drawIndex<0&&(f.__drawIndex=c))}t(c),this.eachBuiltinLayer(function(p,v){!p.__used&&p.getElementCount()>0&&(p.__dirty=!0,p.__startIndex=p.__endIndex=p.__drawIndex=0),p.__dirty&&p.__drawIndex<0&&(p.__drawIndex=p.__startIndex)})},r.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},r.prototype._clearLayer=function(n){n.clear()},r.prototype.setBackgroundColor=function(n){this._backgroundColor=n,De(this._layers,function(t){t.setUnpainted()})},r.prototype.configLayer=function(n,t){if(t){var i=this._layerConfig;i[n]?Zt(i[n],t,!0):i[n]=t;for(var a=0;a<this._zlevelList.length;a++){var o=this._zlevelList[a];o!==n&&o!==n+.01||Zt(this._layers[o],i[n],!0)}}},r.prototype.delLayer=function(n){var t=this._layers,i=this._zlevelList,a=t[n];!a||(a.dom.parentNode.removeChild(a.dom),delete t[n],i.splice(Ye(i,n),1))},r.prototype.resize=function(n,t){if(this._domRoot.style){var i=this._domRoot;i.style.display="none";var a=this._opts,o=this.root;if(null!=n&&(a.width=n),null!=t&&(a.height=t),n=Dd(o,0,a),t=Dd(o,1,a),i.style.display="",this._width!==n||t!==this._height){for(var l in i.style.width=n+"px",i.style.height=t+"px",this._layers)this._layers.hasOwnProperty(l)&&this._layers[l].resize(n,t);this.refresh(!0)}this._width=n,this._height=t}else{if(null==n||null==t)return;this._width=n,this._height=t,this.getLayer(ih).resize(n,t)}return this},r.prototype.clearLayer=function(n){var t=this._layers[n];t&&t.clear()},r.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},r.prototype.getRenderedCanvas=function(n){if(this._singleCanvas&&!this._compositeManually)return this._layers[ih].dom;var t=new eb("image",this,(n=n||{}).pixelRatio||this.dpr);t.initContext(),t.clear(!1,n.backgroundColor||this._backgroundColor);var i=t.ctx;if(n.pixelRatio<=this.dpr){this.refresh();var a=t.dom.width,o=t.dom.height;this.eachLayer(function(p){p.__builtin__?i.drawImage(p.dom,0,0,a,o):p.renderToCanvas&&(i.save(),p.renderToCanvas(i),i.restore())})}else for(var l={inHover:!1,viewWidth:this._width,viewHeight:this._height},u=this.storage.getDisplayList(!0),c=0,h=u.length;c<h;c++)jc(i,u[c],l,c===h-1);return t.dom},r.prototype.getWidth=function(){return this._width},r.prototype.getHeight=function(){return this._height},r}();const AF=DF;var tb=Math.sin,nb=Math.cos,IE=Math.PI,ah=2*Math.PI,MF=180/IE,OF=function(){function r(){}return r.prototype.reset=function(n){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,n||4)},r.prototype.moveTo=function(n,t){this._add("M",n,t)},r.prototype.lineTo=function(n,t){this._add("L",n,t)},r.prototype.bezierCurveTo=function(n,t,i,a,o,l){this._add("C",n,t,i,a,o,l)},r.prototype.quadraticCurveTo=function(n,t,i,a){this._add("Q",n,t,i,a)},r.prototype.arc=function(n,t,i,a,o,l){this.ellipse(n,t,i,i,0,a,o,l)},r.prototype.ellipse=function(n,t,i,a,o,l,u,c){var y,h=u-l,f=!c,p=Math.abs(h),v=Hs(p-ah)||(f?h>=ah:-h>=ah),m=h>0?h%ah:h%ah+ah;y=!!v||!Hs(p)&&m>=IE==!!f;var C=n+i*nb(l),T=t+a*tb(l);this._start&&this._add("M",C,T);var z=Math.round(o*MF);if(v){var E=1/this._p,N=(f?1:-1)*(ah-E);this._add("A",i,a,z,1,+f,n+i*nb(l+N),t+a*tb(l+N)),E>.01&&this._add("A",i,a,z,0,+f,C,T)}else{var X=n+i*nb(u),ve=t+a*tb(u);this._add("A",i,a,z,+y,+f,X,ve)}},r.prototype.rect=function(n,t,i,a){this._add("M",n,t),this._add("l",i,0),this._add("l",0,a),this._add("l",-i,0),this._add("Z")},r.prototype.closePath=function(){this._d.length>0&&this._add("Z")},r.prototype._add=function(n,t,i,a,o,l,u,c,h){for(var f=[],p=this._p,v=1;v<arguments.length;v++){var m=arguments[v];if(isNaN(m))return void(this._invalid=!0);f.push(Math.round(m*p)/p)}this._d.push(n+f.join(" ")),this._start="Z"===n},r.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},r.prototype.getStr=function(){return this._str},r}();const kE=OF;var dg="none",PF=Math.round,rb=["lineCap","miterLimit","lineJoin"],LF=_t(rb,function(r){return"stroke-"+r.toLowerCase()});var LE="http://www.w3.org/2000/svg",RE="http://www.w3.org/1999/xlink";function NE(r){return document.createElementNS(LE,r)}function Ji(r,n,t,i,a){return{tag:r,attrs:t||{},children:i,text:a,key:n}}function ib(r,n){var t=(n=n||{}).newline?"\n":"";return function i(a){var o=a.children,l=a.tag;return function BF(r,n){var t=[];if(n)for(var i in n){var a=n[i],o=i;!1!==a&&(!0!==a&&null!=a&&(o+='="'+a+'"'),t.push(o))}return"<"+r+" "+t.join(" ")+">"}(l,a.attrs)+(a.text||"")+(o?""+t+_t(o,function(c){return i(c)}).join(t)+t:"")+function ZF(r){return"</"+r+">"}(l)}(r)}function ab(r){return{zrId:r,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssClassIdx:0,cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function FE(r,n,t,i){return Ji("svg","root",{width:r,height:n,xmlns:LE,"xmlns:xlink":RE,version:"1.1",baseProfile:"full",viewBox:!!i&&"0 0 "+r+" "+n},t)}var BE={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},oh="transform-origin";function VF(r,n,t){var i=Ge({},r.shape);Ge(i,n),r.buildPath(t,i);var a=new kE;return a.reset(tv(r)),t.rebuildPath(a,1),a.generateStr(),a.getStr()}function HF(r,n){var t=n.originX,i=n.originY;(t||i)&&(r[oh]=t+"px "+i+"px")}var WF={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function ZE(r,n){var t=n.zrId+"-ani-"+n.cssAnimIdx++;return n.cssAnims[t]=r,t}function UE(r){return Qe(r)?BE[r]?"cubic-bezier("+BE[r]+")":b(r)?r:"":""}function M0(r,n,t,i){var a=r.animators,o=a.length,l=[];if(r instanceof Z_){var u=function GF(r,n,t){var o,l,a={};if(De(r.shape.paths,function(c){var h=ab(t.zrId);h.animation=!0,M0(c,{},h,!0);var f=h.cssAnims,p=h.cssNodes,v=gn(f),m=v.length;if(m){var y=f[l=v[m-1]];for(var C in y){var T=y[C];a[C]=a[C]||{d:""},a[C].d+=T.d||""}for(var z in p){var E=p[z].animation;E.indexOf(l)>=0&&(o=E)}}}),o){n.d=!1;var u=ZE(a,t);return o.replace(l,u)}}(r,n,t);if(u)l.push(u);else if(!o)return}else if(!o)return;for(var c={},h=0;h<o;h++){var f=a[h],p=[f.getMaxTime()/1e3+"s"],v=UE(f.getClip().easing),m=f.getDelay();p.push(v||"linear"),m&&p.push(m/1e3+"s"),f.getLoop()&&p.push("infinite");var y=p.join(" ");c[y]=c[y]||[y,[]],c[y][1].push(f)}function C(E){var N=E[1],X=N.length,ve={},ce={},_e={},ze="animation-timing-function";function Ee(vn,Hn,kn){for(var rn=vn.getTracks(),On=vn.getMaxTime(),ci=0;ci<rn.length;ci++){var rr=rn[ci];if(rr.needsAnimate()){var Ci=rr.keyframes,gi=rr.propName;if(kn&&(gi=kn(gi)),gi)for(var ya=0;ya<Ci.length;ya++){var lu=Ci[ya],ao=Math.round(lu.time/On*100)+"%",Py=UE(lu.easing),uc=lu.rawValue;(Qe(uc)||Ve(uc))&&(Hn[ao]=Hn[ao]||{},Hn[ao][gi]=lu.rawValue,Py&&(Hn[ao][ze]=Py))}}}}for(var Le=0;Le<X;Le++)(Ue=(ke=N[Le]).targetName)?"shape"===Ue&&Ee(ke,ce):!i&&Ee(ke,ve);for(var He in ve){var Ke={};vv(Ke,r),Ge(Ke,ve[He]);var nt=nv(Ke),lt=ve[He][ze];_e[He]=nt?{transform:nt}:{},HF(_e[He],Ke),lt&&(_e[He][ze]=lt)}var St,mt=!0;for(var He in ce){_e[He]=_e[He]||{};var wt=!St;lt=ce[He][ze],wt&&(St=new Fo);var kt=St.len();St.reset(),_e[He].d=VF(r,ce[He],St);var Yt=St.len();if(!wt&&kt!==Yt){mt=!1;break}lt&&(_e[He][ze]=lt)}if(!mt)for(var He in _e)delete _e[He].d;if(!i)for(Le=0;Le<X;Le++){var ke,Ue;"style"===(Ue=(ke=N[Le]).targetName)&&Ee(ke,_e,function(rn){return WF[rn]})}var Bn,Xt=gn(_e),pn=!0;for(Le=1;Le<Xt.length;Le++){var Ar=Xt[Le-1];if(_e[Ar][oh]!==_e[Xt[Le]][oh]){pn=!1;break}Bn=_e[Ar][oh]}if(pn&&Bn){for(var He in _e)_e[He][oh]&&delete _e[He][oh];n[oh]=Bn}if(_n(Xt,function(vn){return gn(_e[vn]).length>0}).length)return ZE(_e,t)+" "+E[0]+" both"}for(var T in c)(u=C(c[T]))&&l.push(u);if(l.length){var z=t.zrId+"-cls-"+t.cssClassIdx++;t.cssNodes["."+z]={animation:l.join(",")},n.class=z}}var fg=Math.round;function VE(r){return r&&Qe(r.src)}function HE(r){return r&&Pe(r.toDataURL)}function ob(r,n,t,i){(function RF(r,n,t,i){var a=null==n.opacity?1:n.opacity;if(t instanceof ki)r("opacity",a);else{if(function IF(r){var n=r.fill;return null!=n&&n!==dg}(n)){var o=pu(n.fill);r("fill",o.color);var l=null!=n.fillOpacity?n.fillOpacity*o.opacity*a:o.opacity*a;(i||l<1)&&r("fill-opacity",l)}else r("fill",dg);if(function kF(r){var n=r.stroke;return null!=n&&n!==dg}(n)){var u=pu(n.stroke);r("stroke",u.color);var c=n.strokeNoScale?t.getLineScale():1,h=c?(n.lineWidth||0)/c:0,f=null!=n.strokeOpacity?n.strokeOpacity*u.opacity*a:u.opacity*a,p=n.strokeFirst;if((i||1!==h)&&r("stroke-width",h),(i||p)&&r("paint-order",p?"stroke":"fill"),(i||f<1)&&r("stroke-opacity",f),n.lineDash){var v=cT(t),m=v[0],y=v[1];m&&(y=PF(y||0),r("stroke-dasharray",m.join(",")),(y||i)&&r("stroke-dashoffset",y))}else i&&r("stroke-dasharray",dg);for(var C=0;C<rb.length;C++){var T=rb[C];if(i||n[T]!==wc[T]){var z=n[T]||wc[T];z&&r(LF[C],z)}}}else i&&r("stroke",dg)}})(function(a,o){var l="fill"===a||"stroke"===a;l&&function Ry(r){return r&&("linear"===r.type||"radial"===r.type)}(o)?function XF(r,n,t,i){var o,a=r[t],l={gradientUnits:a.global?"userSpaceOnUse":"objectBoundingBox"};if(nf(a))o="linearGradient",l.x1=a.x,l.y1=a.y,l.x2=a.x2,l.y2=a.y2;else{if(!rf(a))return;o="radialGradient",l.cx=$t(a.x,.5),l.cy=$t(a.y,.5),l.r=$t(a.r,.5)}for(var u=a.colorStops,c=[],h=0,f=u.length;h<f;++h){var p=100*Eh(u[h].offset)+"%",m=pu(u[h].color),C=m.opacity,T={offset:p};T["stop-color"]=m.color,C<1&&(T["stop-opacity"]=C),c.push(Ji("stop",h+"",T))}var E=ib(Ji(o,"",l,c)),N=i.gradientCache,X=N[E];X||(X=i.zrId+"-g"+i.gradientIdx++,N[E]=X,l.id=X,i.defs[X]=Ji(o,X,l,c)),n[t]=bl(X)}(n,r,a,i):l&&function Ly(r){return tf(r)||function ev(r){return r&&!!r.svgElement}(r)}(o)?function eB(r,n,t,i){var l,a=r.style[t],o={patternUnits:"userSpaceOnUse"};if(tf(a)){var u=a.imageWidth,c=a.imageHeight,h=void 0,f=a.image;if(Qe(f)?h=f:VE(f)?h=f.src:HE(f)&&(h=f.toDataURL()),"undefined"==typeof Image){var p="Image width/height must been given explictly in svg-ssr renderer.";ar(u,p),ar(c,p)}else if(null==u||null==c){var v=function(E,N){if(E){var X=E.elm,ve=E.attrs.width=u||N.width,ce=E.attrs.height=c||N.height;X&&(X.setAttribute("width",ve),X.setAttribute("height",ce))}},m=Nf(h,null,r,function(E){v(y,E),v(l,E)});m&&m.width&&m.height&&(u=u||m.width,c=c||m.height)}l=Ji("image","img",{href:h,width:u,height:c}),o.width=u,o.height=c}else a.svgElement&&(l=Nt(a.svgElement),o.width=a.svgWidth,o.height=a.svgHeight);if(l){o.patternTransform=nv(a);var y=Ji("pattern","",o,[l]),C=ib(y),T=i.patternCache,z=T[C];z||(z=i.zrId+"-p"+i.patternIdx++,T[C]=z,o.id=z,y=i.defs[z]=Ji("pattern",z,o,[l])),n[t]=bl(z)}}(t,r,a,i):r[a]=o},n,t,!1),function jF(r,n,t){var i=r.style;if(function $z(r){return r&&(r.shadowBlur||r.shadowOffsetX||r.shadowOffsetY)}(i)){var a=function jz(r){var n=r.style,t=r.getGlobalScale();return[n.shadowColor,(n.shadowBlur||0).toFixed(2),(n.shadowOffsetX||0).toFixed(2),(n.shadowOffsetY||0).toFixed(2),t[0],t[1]].join(",")}(r),o=t.shadowCache,l=o[a];if(!l){var u=r.getGlobalScale(),c=u[0],h=u[1];if(!c||!h)return;var f=i.shadowOffsetX||0,p=i.shadowOffsetY||0,v=i.shadowBlur,m=pu(i.shadowColor),y=m.opacity,C=m.color,E=v/2/c+" "+v/2/h;l=t.zrId+"-s"+t.shadowIdx++,t.defs[l]=Ji("filter",l,{id:l,x:"-100%",y:"-100%",width:"300%",height:"300%"},[Ji("feDropShadow","",{dx:f/c,dy:p/h,stdDeviation:E,"flood-color":C,"flood-opacity":y})]),o[a]=l}n.filter=bl(l)}}(t,r,i)}function WE(r){return Hs(r[0]-1)&&Hs(r[1])&&Hs(r[2])&&Hs(r[3]-1)}function sb(r,n,t){if(n&&(!function JF(r){return Hs(r[4])&&Hs(r[5])}(n)||!WE(n))){var i=t?10:1e4;r.transform=WE(n)?"translate("+fg(n[4]*i)/i+" "+fg(n[5]*i)/i+")":function jg(r){return"matrix("+Tl(r[0])+","+Tl(r[1])+","+Tl(r[2])+","+Tl(r[3])+","+Eh(r[4])+","+Eh(r[5])+")"}(n)}}function GE(r,n,t){for(var i=r.points,a=[],o=0;o<i.length;o++)a.push(fg(i[o][0]*t)/t),a.push(fg(i[o][1]*t)/t);n.points=a.join(" ")}function JE(r){return!r.smooth}var QF={circle:[function YF(r){var n=_t(r,function(t){return"string"==typeof t?[t,t]:t});return function(t,i,a){for(var o=0;o<n.length;o++){var l=n[o],u=t[l[0]];null!=u&&(i[l[1]]=fg(u*a)/a)}}}(["cx","cy","r"])],polyline:[GE,JE],polygon:[GE,JE]};function YE(r,n){var t=r.style,i=r.shape,a=QF[r.type],o={},l=n.animation,u="path",c=r.style.strokePercent,h=n.compress&&tv(r)||4;if(!a||n.willUpdate||a[1]&&!a[1](i)||l&&function qF(r){for(var n=r.animators,t=0;t<n.length;t++)if("shape"===n[t].targetName)return!0;return!1}(r)||c<1){r.path||r.createPathProxy();var p=r.path;r.shapeChanged()&&(p.beginPath(),r.buildPath(p,r.shape),r.pathUpdated());var v=p.getVersion(),m=r,y=m.__svgPathBuilder;(m.__svgPathVersion!==v||!y||c!==m.__svgPathStrokePercent)&&(y||(y=m.__svgPathBuilder=new kE),y.reset(h),p.rebuildPath(y,c),y.generateStr(),m.__svgPathVersion=v,m.__svgPathStrokePercent=c),o.d=y.getStr()}else{u=r.type;var f=Math.pow(10,h);a[0](i,o,f)}return sb(o,r.transform),ob(o,t,r,n),n.animation&&M0(r,o,n),Ji(u,r.id+"",o)}function QE(r,n){return r instanceof Fn?YE(r,n):r instanceof ki?function KF(r,n){var t=r.style,i=t.image;if(i&&!Qe(i)&&(VE(i)?i=i.src:HE(i)&&(i=i.toDataURL())),i){var a=t.x||0,o=t.y||0,c={href:i,width:t.width,height:t.height};return a&&(c.x=a),o&&(c.y=o),sb(c,r.transform),ob(c,t,r,n),n.animation&&M0(r,c,n),Ji("image",r.id+"",c)}}(r,n):r instanceof Dc?function $F(r,n){var t=r.style,i=t.text;if(null!=i&&(i+=""),i&&!isNaN(t.x)&&!isNaN(t.y)){var a=t.font||Pt,o=t.x||0,l=function ky(r,n,t){return"top"===t?r+=n/2:"bottom"===t&&(r-=n/2),r}(t.y||0,Uh(a),t.textBaseline),c={"dominant-baseline":"central","text-anchor":Xg[t.textAlign]||t.textAlign};if(Ac(t)){var h="",f=t.fontStyle,p=dm(t.fontSize);if(!parseFloat(p))return;var m=t.fontWeight;h+="font-size:"+p+";font-family:"+(t.fontFamily||zt)+";",f&&"normal"!==f&&(h+="font-style:"+f+";"),m&&"normal"!==m&&(h+="font-weight:"+m+";"),c.style=h}else c.style="font: "+a;return i.match(/\s/)&&(c["xml:space"]="preserve"),o&&(c.x=o),l&&(c.y=l),sb(c,r.transform),ob(c,t,r,n),n.animation&&M0(r,c,n),Ji("text",r.id+"",c,void 0,i)}}(r,n):void 0}function tB(r,n,t){var i=t.clipPathCache,a=t.defs,o=i[r.id];if(!o){var l={id:o=t.zrId+"-c"+t.clipPathIdx++};i[r.id]=o,a[o]=Ji("clipPath",o,l,[YE(r,t)])}n["clip-path"]=bl(o)}function qE(r){return document.createTextNode(r)}function sh(r,n,t){r.insertBefore(n,t)}function KE(r,n){r.removeChild(n)}function $E(r,n){r.appendChild(n)}function jE(r){return r.parentNode}function XE(r){return r.nextSibling}function lb(r,n){r.textContent=n}var rB=Ji("","");function ub(r){return void 0===r}function cl(r){return void 0!==r}function iB(r,n,t){for(var i={},a=n;a<=t;++a){var o=r[a].key;void 0!==o&&(i[o]=a)}return i}function pg(r,n){return r.tag===n.tag&&r.key===n.key}function gg(r){var n,t=r.children,i=r.tag;if(cl(i)){var a=r.elm=NE(i);if(cb(rB,r),we(t))for(n=0;n<t.length;++n){var o=t[n];null!=o&&$E(a,gg(o))}else cl(r.text)&&!tt(r.text)&&$E(a,qE(r.text))}else r.elm=qE(r.text);return r.elm}function t2(r,n,t,i,a){for(;i<=a;++i){var o=t[i];null!=o&&sh(r,gg(o),n)}}function O0(r,n,t,i){for(;t<=i;++t){var a=n[t];null!=a&&(cl(a.tag)?KE(jE(a.elm),a.elm):KE(r,a.elm))}}function cb(r,n){var t,i=n.elm,a=r&&r.attrs||{},o=n.attrs||{};if(a!==o){for(t in o){var l=o[t];a[t]!==l&&(!0===l?i.setAttribute(t,""):!1===l?i.removeAttribute(t):120!==t.charCodeAt(0)?i.setAttribute(t,l):"xmlns:xlink"===t||"xmlns"===t?i.setAttributeNS("http://www.w3.org/2000/xmlns/",t,l):58===t.charCodeAt(3)?i.setAttributeNS("http://www.w3.org/XML/1998/namespace",t,l):58===t.charCodeAt(5)?i.setAttributeNS(RE,t,l):i.setAttribute(t,l))}for(t in a)t in o||i.removeAttribute(t)}}function Pd(r,n){var t=n.elm=r.elm,i=r.children,a=n.children;r!==n&&(cb(r,n),ub(n.text)?cl(i)&&cl(a)?i!==a&&function aB(r,n,t){for(var p,v,m,i=0,a=0,o=n.length-1,l=n[0],u=n[o],c=t.length-1,h=t[0],f=t[c];i<=o&&a<=c;)null==l?l=n[++i]:null==u?u=n[--o]:null==h?h=t[++a]:null==f?f=t[--c]:pg(l,h)?(Pd(l,h),l=n[++i],h=t[++a]):pg(u,f)?(Pd(u,f),u=n[--o],f=t[--c]):pg(l,f)?(Pd(l,f),sh(r,l.elm,XE(u.elm)),l=n[++i],f=t[--c]):pg(u,h)?(Pd(u,h),sh(r,u.elm,l.elm),u=n[--o],h=t[++a]):(ub(p)&&(p=iB(n,i,o)),ub(v=p[h.key])||(m=n[v]).tag!==h.tag?sh(r,gg(h),l.elm):(Pd(m,h),n[v]=void 0,sh(r,m.elm,l.elm)),h=t[++a]);(i<=o||a<=c)&&(i>o?t2(r,null==t[c+1]?null:t[c+1].elm,t,a,c):O0(r,n,i,o))}(t,i,a):cl(a)?(cl(r.text)&&lb(t,""),t2(t,null,a,0,a.length-1)):cl(i)?O0(t,i,0,i.length-1):cl(r.text)&&lb(t,""):r.text!==n.text&&(cl(i)&&O0(t,i,0,i.length-1),lb(t,n.text)))}var sB=0,lB=function(){function r(n,t,i){if(this.type="svg",this.refreshHover=function(){},this.configLayer=function(){},this.storage=t,this._opts=i=Ge({},i),this.root=n,this._id="zr"+sB++,this._oldVNode=FE(i.width,i.height),n&&!i.ssr){var a=this._viewport=document.createElement("div");a.style.cssText="position:relative;overflow:hidden";var o=this._svgDom=this._oldVNode.elm=NE("svg");cb(null,this._oldVNode),a.appendChild(o),n.appendChild(a)}this.resize(i.width,i.height)}return r.prototype.getType=function(){return this.type},r.prototype.getViewportRoot=function(){return this._viewport},r.prototype.getViewportRootOffset=function(){var n=this.getViewportRoot();if(n)return{offsetLeft:n.offsetLeft||0,offsetTop:n.offsetTop||0}},r.prototype.getSvgDom=function(){return this._svgDom},r.prototype.refresh=function(){if(this.root){var n=this.renderToVNode({willUpdate:!0});n.attrs.style="position:absolute;left:0;top:0;user-select:none",function oB(r,n){if(pg(r,n))Pd(r,n);else{var t=r.elm,i=jE(t);gg(n),null!==i&&(sh(i,n.elm,XE(t)),O0(i,[r],0,0))}}(this._oldVNode,n),this._oldVNode=n}},r.prototype.renderOneToVNode=function(n){return QE(n,ab(this._id))},r.prototype.renderToVNode=function(n){n=n||{};var t=this.storage.getDisplayList(!0),i=this._backgroundColor,a=this._width,o=this._height,l=ab(this._id);l.animation=n.animation,l.willUpdate=n.willUpdate,l.compress=n.compress;var u=[];if(i&&"none"!==i){var c=pu(i);this._bgVNode=Ji("rect","bg",{width:a,height:o,x:"0",y:"0",id:"0",fill:c.color,"fill-opacity":c.opacity}),u.push(this._bgVNode)}else this._bgVNode=null;var p=n.compress?null:this._mainVNode=Ji("g","main",{},[]);this._paintList(t,l,p?p.children:u),p&&u.push(p);var v=_t(gn(l.defs),function(C){return l.defs[C]});if(v.length&&u.push(Ji("defs","defs",{},v)),n.animation){var m=function UF(r,n,t){var i=(t=t||{}).newline?"\n":"",a=" {"+i,o=i+"}",l=_t(gn(r),function(c){return c+a+_t(gn(r[c]),function(h){return h+":"+r[c][h]+";"}).join(i)+o}).join(i),u=_t(gn(n),function(c){return"@keyframes "+c+a+_t(gn(n[c]),function(h){return h+a+_t(gn(n[c][h]),function(f){var p=n[c][h][f];return"d"===f&&(p='path("'+p+'")'),f+":"+p+";"}).join(i)+o}).join(i)+o}).join(i);return l||u?["<![CDATA[",l,u,"]]>"].join(i):""}(l.cssNodes,l.cssAnims,{newline:!0});if(m){var y=Ji("style","stl",{},[],m);u.push(y)}}return FE(a,o,u,n.useViewBox)},r.prototype.renderToString=function(n){return ib(this.renderToVNode({animation:$t((n=n||{}).cssAnimation,!0),willUpdate:!1,compress:!0,useViewBox:$t(n.useViewBox,!0)}),{newline:!0})},r.prototype.setBackgroundColor=function(n){this._backgroundColor=n;var t=this._bgVNode;if(t&&t.elm){var i=pu(n),o=i.opacity;t.elm.setAttribute("fill",i.color),o<1&&t.elm.setAttribute("fill-opacity",o)}},r.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},r.prototype._paintList=function(n,t,i){for(var u,c,a=n.length,o=[],l=0,h=0,f=0;f<a;f++){var p=n[f];if(!p.invisible){var v=p.__clipPaths,m=v&&v.length||0,y=c&&c.length||0,C=void 0;for(C=Math.max(m-1,y-1);C>=0&&(!v||!c||v[C]!==c[C]);C--);for(var T=y-1;T>C;T--)u=o[--l-1];for(var z=C+1;z<m;z++){var E={};tB(v[z],E,t);var N=Ji("g","clip-g-"+h++,E,[]);(u?u.children:i).push(N),o[l++]=N,u=N}c=v;var X=QE(p,t);X&&(u?u.children:i).push(X)}}},r.prototype.resize=function(n,t){var i=this._opts,a=this.root,o=this._viewport;if(null!=n&&(i.width=n),null!=t&&(i.height=t),a&&o&&(o.style.display="none",n=Dd(a,0,i),t=Dd(a,1,i),o.style.display=""),this._width!==n||this._height!==t){if(this._width=n,this._height=t,o){var l=o.style;l.width=n+"px",l.height=t+"px"}var u=this._svgDom;u&&(u.setAttribute("width",n),u.setAttribute("height",t))}},r.prototype.getWidth=function(){return this._width},r.prototype.getHeight=function(){return this._height},r.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},r.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},r.prototype.toDataURL=function(n){var t=encodeURIComponent(this.renderToString()),i="data:image/svg+xml;";return n?(t=af(t))&&i+"base64,"+t:i+"charset=UTF-8,"+t},r}();const uB=lB;var hB=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.hasSymbolVisual=!0,t}return R(n,r),n.prototype.getInitialData=function(t){return ol(null,this,{useEncodeDefaulter:!0})},n.prototype.getLegendIcon=function(t){var i=new hn,a=wi("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);i.add(a),a.setStyle(t.lineStyle);var o=this.getData().getVisual("symbol"),l=this.getData().getVisual("symbolRotate"),u="none"===o?"circle":o,c=.8*t.itemHeight,h=wi(u,(t.itemWidth-c)/2,(t.itemHeight-c)/2,c,c,t.itemStyle.fill);return i.add(h),h.setStyle(t.itemStyle),h.rotation=("inherit"===t.iconRotate?l:t.iconRotate||0)*Math.PI/180,h.setOrigin([t.itemWidth/2,t.itemHeight/2]),u.indexOf("empty")>-1&&(h.style.stroke=h.style.fill,h.style.fill="#fff",h.style.lineWidth=2),i},n.type="series.line",n.dependencies=["grid","polar"],n.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},n}(Xr);const dB=hB;function Id(r,n){var t=r.mapDimensionsAll("defaultedLabel"),i=t.length;if(1===i){var a=Vu(r,n,t[0]);return null!=a?a+"":null}if(i){for(var o=[],l=0;l<t.length;l++)o.push(Vu(r,n,t[l]));return o.join(" ")}}function r2(r,n){var t=r.mapDimensionsAll("defaultedLabel");if(!we(n))return n+"";for(var i=[],a=0;a<t.length;a++){var o=r.getDimensionIndex(t[a]);o>=0&&i.push(n[o])}return i.join(" ")}var fB=function(r){function n(t,i,a,o){var l=r.call(this)||this;return l.updateData(t,i,a,o),l}return R(n,r),n.prototype._createSymbol=function(t,i,a,o,l){this.removeAll();var u=wi(t,-1,-1,2,2,null,l);u.attr({z2:100,culling:!0,scaleX:o[0]/2,scaleY:o[1]/2}),u.drift=pB,this._symbolType=t,this.add(u)},n.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},n.prototype.getSymbolType=function(){return this._symbolType},n.prototype.getSymbolPath=function(){return this.childAt(0)},n.prototype.highlight=function(){gs(this.childAt(0))},n.prototype.downplay=function(){vs(this.childAt(0))},n.prototype.setZ=function(t,i){var a=this.childAt(0);a.zlevel=t,a.z=i},n.prototype.setDraggable=function(t){var i=this.childAt(0);i.draggable=t,i.cursor=t?"move":i.cursor},n.prototype.updateData=function(t,i,a,o){this.silent=!1;var l=t.getItemVisual(i,"symbol")||"circle",u=t.hostModel,c=n.getSymbolSize(t,i),h=l!==this._symbolType,f=o&&o.disableAnimation;if(h){var p=t.getItemVisual(i,"symbolKeepAspect");this._createSymbol(l,t,i,c,p)}else{(v=this.childAt(0)).silent=!1;var m={scaleX:c[0]/2,scaleY:c[1]/2};f?v.attr(m):Kn(v,m,u,i),bo(v)}if(this._updateCommon(t,i,c,a,o),h){var v=this.childAt(0);f||(m={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:v.style.opacity}},v.scaleX=v.scaleY=0,v.style.opacity=0,Kr(v,m,u,i))}f&&this.childAt(0).stopAnimation("leave")},n.prototype._updateCommon=function(t,i,a,o,l){var h,f,p,v,m,y,C,T,z,u=this.childAt(0),c=t.hostModel;if(o&&(h=o.emphasisItemStyle,f=o.blurItemStyle,p=o.selectItemStyle,v=o.focus,m=o.blurScope,C=o.labelStatesModels,T=o.hoverScale,z=o.cursorStyle,y=o.emphasisDisabled),!o||t.hasItemOption){var E=o&&o.itemModel?o.itemModel:t.getItemModel(i),N=E.getModel("emphasis");h=N.getModel("itemStyle").getItemStyle(),p=E.getModel(["select","itemStyle"]).getItemStyle(),f=E.getModel(["blur","itemStyle"]).getItemStyle(),v=N.get("focus"),m=N.get("blurScope"),y=N.get("disabled"),C=Li(E),T=N.getShallow("scale"),z=E.getShallow("cursor")}var X=t.getItemVisual(i,"symbolRotate");u.attr("rotation",(X||0)*Math.PI/180||0);var ve=wd(t.getItemVisual(i,"symbolOffset"),a);ve&&(u.x=ve[0],u.y=ve[1]),z&&u.attr("cursor",z);var ce=t.getItemVisual(i,"style"),_e=ce.fill;if(u instanceof ki){var ze=u.style;u.useStyle(Ge({image:ze.image,x:ze.x,y:ze.y,width:ze.width,height:ze.height},ce))}else u.useStyle(u.__isEmptyBrush?Ge({},ce):ce),u.style.decal=null,u.setColor(_e,l&&l.symbolInnerColor),u.style.strokeNoScale=!0;var Ee=t.getItemVisual(i,"liftZ"),Le=this._z2;null!=Ee?null==Le&&(this._z2=u.z2,u.z2+=Ee):null!=Le&&(u.z2=Le,this._z2=null);var ke=l&&l.useNameLabel;Xi(u,C,{labelFetcher:c,labelDataIndex:i,defaultText:function Ue(nt){return ke?t.getName(nt):Id(t,nt)},inheritColor:_e,defaultOpacity:ce.opacity}),this._sizeX=a[0]/2,this._sizeY=a[1]/2;var He=u.ensureState("emphasis");if(He.style=h,u.ensureState("select").style=p,u.ensureState("blur").style=f,T){var Ke=Math.max(Ve(T)?T:1.1,3/this._sizeY);He.scaleX=this._sizeX*Ke,He.scaleY=this._sizeY*Ke}this.setSymbolScale(1),di(this,v,m,y)},n.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},n.prototype.fadeOut=function(t,i,a){var o=this.childAt(0),l=dn(this).dataIndex,u=a&&a.animation;if(this.silent=o.silent=!0,a&&a.fadeLabel){var c=o.getTextContent();c&&tl(c,{style:{opacity:0}},i,{dataIndex:l,removeOpt:u,cb:function(){o.removeTextContent()}})}else o.removeTextContent();tl(o,{style:{opacity:0},scaleX:0,scaleY:0},i,{dataIndex:l,cb:t,removeOpt:u})},n.getSymbolSize=function(t,i){return $p(t.getItemVisual(i,"symbolSize"))},n}(hn);function pB(r,n){this.parent.drift(r,n)}const vg=fB;function hb(r,n,t,i){return n&&!isNaN(n[0])&&!isNaN(n[1])&&!(i.isIgnore&&i.isIgnore(t))&&!(i.clipShape&&!i.clipShape.contain(n[0],n[1]))&&"none"!==r.getItemVisual(t,"symbol")}function a2(r){return null!=r&&!tt(r)&&(r={isIgnore:r}),r||{}}function o2(r){var n=r.hostModel,t=n.getModel("emphasis");return{emphasisItemStyle:t.getModel("itemStyle").getItemStyle(),blurItemStyle:n.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:n.getModel(["select","itemStyle"]).getItemStyle(),focus:t.get("focus"),blurScope:t.get("blurScope"),emphasisDisabled:t.get("disabled"),hoverScale:t.get("scale"),labelStatesModels:Li(n),cursorStyle:n.get("cursor")}}var gB=function(){function r(n){this.group=new hn,this._SymbolCtor=n||vg}return r.prototype.updateData=function(n,t){this._progressiveEls=null,t=a2(t);var i=this.group,a=n.hostModel,o=this._data,l=this._SymbolCtor,u=t.disableAnimation,c=o2(n),h={disableAnimation:u},f=t.getSymbolPoint||function(p){return n.getItemLayout(p)};o||i.removeAll(),n.diff(o).add(function(p){var v=f(p);if(hb(n,v,p,t)){var m=new l(n,p,c,h);m.setPosition(v),n.setItemGraphicEl(p,m),i.add(m)}}).update(function(p,v){var m=o.getItemGraphicEl(v),y=f(p);if(hb(n,y,p,t)){var C=n.getItemVisual(p,"symbol")||"circle",T=m&&m.getSymbolType&&m.getSymbolType();if(!m||T&&T!==C)i.remove(m),(m=new l(n,p,c,h)).setPosition(y);else{m.updateData(n,p,c,h);var z={x:y[0],y:y[1]};u?m.attr(z):Kn(m,z,a)}i.add(m),n.setItemGraphicEl(p,m)}else i.remove(m)}).remove(function(p){var v=o.getItemGraphicEl(p);v&&v.fadeOut(function(){i.remove(v)},a)}).execute(),this._getSymbolPoint=f,this._data=n},r.prototype.updateLayout=function(){var n=this,t=this._data;t&&t.eachItemGraphicEl(function(i,a){var o=n._getSymbolPoint(a);i.setPosition(o),i.markRedraw()})},r.prototype.incrementalPrepareUpdate=function(n){this._seriesScope=o2(n),this._data=null,this.group.removeAll()},r.prototype.incrementalUpdate=function(n,t,i){function a(c){c.isGroup||(c.incremental=!0,c.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[],i=a2(i);for(var o=n.start;o<n.end;o++){var l=t.getItemLayout(o);if(hb(t,l,o,i)){var u=new this._SymbolCtor(t,o,this._seriesScope);u.traverse(a),u.setPosition(l),this.group.add(u),t.setItemGraphicEl(o,u),this._progressiveEls.push(u)}}},r.prototype.eachRendered=function(n){Ju(this._progressiveEls||this.group,n)},r.prototype.remove=function(n){var t=this.group,i=this._data;i&&n?i.eachItemGraphicEl(function(a){a.fadeOut(function(){t.remove(a)},i.hostModel)}):t.removeAll()},r}();const mg=gB;function s2(r,n,t){var i=r.getBaseAxis(),a=r.getOtherAxis(i),o=function vB(r,n){var t=0,i=r.scale.getExtent();return"start"===n?t=i[0]:"end"===n?t=i[1]:Ve(n)&&!isNaN(n)?t=n:i[0]>0?t=i[0]:i[1]<0&&(t=i[1]),t}(a,t),l=i.dim,u=a.dim,c=n.mapDimension(u),h=n.mapDimension(l),f="x"===u||"radius"===u?1:0,p=_t(r.dimensions,function(y){return n.mapDimension(y)}),v=!1,m=n.getCalculationInfo("stackResultDimension");return eu(n,p[0])&&(v=!0,p[0]=m),eu(n,p[1])&&(v=!0,p[1]=m),{dataDimsForPoint:p,valueStart:o,valueAxisDim:u,baseAxisDim:l,stacked:!!v,valueDim:c,baseDim:h,baseDataOffset:f,stackedOverDimension:n.getCalculationInfo("stackedOverDimension")}}function l2(r,n,t,i){var a=NaN;r.stacked&&(a=t.get(t.getCalculationInfo("stackedOverDimension"),i)),isNaN(a)&&(a=r.valueStart);var o=r.baseDataOffset,l=[];return l[o]=t.get(r.baseDim,i),l[1-o]=a,n.dataToPoint(l)}var $u=Math.min,ju=Math.max;function lh(r,n){return isNaN(r)||isNaN(n)}function db(r,n,t,i,a,o,l,u,c){for(var h,f,p,v,m,y,C=t,T=0;T<i;T++){var z=n[2*C],E=n[2*C+1];if(C>=a||C<0)break;if(lh(z,E)){if(c){C+=o;continue}break}if(C===t)r[o>0?"moveTo":"lineTo"](z,E),p=z,v=E;else{var N=z-h,X=E-f;if(N*N+X*X<.5){C+=o;continue}if(l>0){for(var ve=C+o,ce=n[2*ve],_e=n[2*ve+1];ce===z&&_e===E&&T<i;)T++,ce=n[2*(ve+=o)],_e=n[2*ve+1],N=(z=n[2*(C+=o)])-h,X=(E=n[2*C+1])-f;var ze=T+1;if(c)for(;lh(ce,_e)&&ze<i;)ze++,ce=n[2*(ve+=o)],_e=n[2*ve+1];var Ee=.5,Le=0,ke=0,Ue=void 0,He=void 0;if(ze>=i||lh(ce,_e))m=z,y=E;else{Le=ce-h,ke=_e-f;var Ke=z-h,nt=ce-z,lt=E-f,St=_e-E,mt=void 0,wt=void 0;if("x"===u){var kt=Le>0?1:-1;m=z-kt*(mt=Math.abs(Ke))*l,y=E,Ue=z+kt*(wt=Math.abs(nt))*l,He=E}else if("y"===u){var Yt=ke>0?1:-1;m=z,y=E-Yt*(mt=Math.abs(lt))*l,Ue=z,He=E+Yt*(wt=Math.abs(St))*l}else mt=Math.sqrt(Ke*Ke+lt*lt),m=z-Le*l*(1-(Ee=(wt=Math.sqrt(nt*nt+St*St))/(wt+mt))),y=E-ke*l*(1-Ee),He=E+ke*l*Ee,Ue=$u(Ue=z+Le*l*Ee,ju(ce,z)),He=$u(He,ju(_e,E)),Ue=ju(Ue,$u(ce,z)),y=E-(ke=(He=ju(He,$u(_e,E)))-E)*mt/wt,m=$u(m=z-(Le=Ue-z)*mt/wt,ju(h,z)),y=$u(y,ju(f,E)),Ue=z+(Le=z-(m=ju(m,$u(h,z))))*wt/mt,He=E+(ke=E-(y=ju(y,$u(f,E))))*wt/mt}r.bezierCurveTo(p,v,m,y,z,E),p=Ue,v=He}else r.lineTo(z,E)}h=z,f=E,C+=o}return T}var u2=function r(){this.smooth=0,this.smoothConstraint=!0},yB=function(r){function n(t){var i=r.call(this,t)||this;return i.type="ec-polyline",i}return R(n,r),n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new u2},n.prototype.buildPath=function(t,i){var a=i.points,o=0,l=a.length/2;if(i.connectNulls){for(;l>0&&lh(a[2*l-2],a[2*l-1]);l--);for(;o<l&&lh(a[2*o],a[2*o+1]);o++);}for(;o<l;)o+=db(t,a,o,l,l,1,i.smooth,i.smoothMonotone,i.connectNulls)+1},n.prototype.getPointOn=function(t,i){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var u,c,o=this.path.data,l=Fo.CMD,h="x"===i,f=[],p=0;p<o.length;){var m=void 0,y=void 0,C=void 0,T=void 0,z=void 0,E=void 0,N=void 0;switch(o[p++]){case l.M:u=o[p++],c=o[p++];break;case l.L:if(m=o[p++],y=o[p++],(N=h?(t-u)/(m-u):(t-c)/(y-c))<=1&&N>=0){var X=h?(y-c)*N+c:(m-u)*N+u;return h?[t,X]:[X,t]}u=m,c=y;break;case l.C:m=o[p++],y=o[p++],C=o[p++],T=o[p++],z=o[p++],E=o[p++];var ve=h?du(u,m,C,z,t,f):du(c,y,T,E,t,f);if(ve>0)for(var ce=0;ce<ve;ce++){var _e=f[ce];if(_e<=1&&_e>=0)return X=h?mi(c,y,T,E,_e):mi(u,m,C,z,_e),h?[t,X]:[X,t]}u=z,c=E}}},n}(Fn),CB=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return R(n,r),n}(u2),c2=function(r){function n(t){var i=r.call(this,t)||this;return i.type="ec-polygon",i}return R(n,r),n.prototype.getDefaultShape=function(){return new CB},n.prototype.buildPath=function(t,i){var a=i.points,o=i.stackedOnPoints,l=0,u=a.length/2,c=i.smoothMonotone;if(i.connectNulls){for(;u>0&&lh(a[2*u-2],a[2*u-1]);u--);for(;l<u&&lh(a[2*l],a[2*l+1]);l++);}for(;l<u;){var h=db(t,a,l,u,u,1,i.smooth,c,i.connectNulls);db(t,o,l+h-1,h,u,-1,i.stackedOnSmooth,c,i.connectNulls),l+=h+1,t.closePath()}},n}(Fn);function h2(r,n,t,i,a){var o=r.getArea(),l=o.x,u=o.y,c=o.width,h=o.height,f=t.get(["lineStyle","width"])||2;l-=f/2,u-=f/2,c+=f,h+=f,l=Math.floor(l),c=Math.round(c);var p=new Qn({shape:{x:l,y:u,width:c,height:h}});if(n){var v=r.getBaseAxis(),m=v.isHorizontal(),y=v.inverse;m?(y&&(p.shape.x+=c),p.shape.width=0):(y||(p.shape.y+=h),p.shape.height=0);var C=Pe(a)?function(T){a(T,p)}:null;Kr(p,{shape:{width:c,height:h,x:l,y:u}},t,null,i,C)}return p}function d2(r,n,t){var i=r.getArea(),a=li(i.r0,1),o=li(i.r,1),l=new Oa({shape:{cx:li(r.cx,1),cy:li(r.cy,1),r0:a,r:o,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}});return n&&("angle"===r.getBaseAxis().dim?l.shape.endAngle=i.startAngle:l.shape.r=a,Kr(l,{shape:{endAngle:i.endAngle,r:o}},t)),l}function P0(r,n,t,i,a){return r?"polar"===r.type?d2(r,n,t):"cartesian2d"===r.type?h2(r,n,t,i,a):null:null}function uh(r,n){return r.type===n}function f2(r,n){if(r.length===n.length){for(var t=0;t<r.length;t++)if(r[t]!==n[t])return;return!0}}function p2(r){for(var n=1/0,t=1/0,i=-1/0,a=-1/0,o=0;o<r.length;){var l=r[o++],u=r[o++];isNaN(l)||(n=Math.min(l,n),i=Math.max(l,i)),isNaN(u)||(t=Math.min(u,t),a=Math.max(u,a))}return[[n,t],[i,a]]}function g2(r,n){var t=p2(r),i=t[0],a=t[1],o=p2(n),l=o[0],u=o[1];return Math.max(Math.abs(i[0]-l[0]),Math.abs(i[1]-l[1]),Math.abs(a[0]-u[0]),Math.abs(a[1]-u[1]))}function v2(r){return Ve(r)?r:r?.5:0}function Xu(r,n,t,i){var a=n.getBaseAxis(),o="x"===a.dim||"radius"===a.dim?0:1,l=[],u=0,c=[],h=[],f=[],p=[];if(i){for(u=0;u<r.length;u+=2)!isNaN(r[u])&&!isNaN(r[u+1])&&p.push(r[u],r[u+1]);r=p}for(u=0;u<r.length-2;u+=2)switch(f[0]=r[u+2],f[1]=r[u+3],h[0]=r[u],h[1]=r[u+1],l.push(h[0],h[1]),t){case"end":c[o]=f[o],c[1-o]=h[1-o],l.push(c[0],c[1]);break;case"middle":var m=[];c[o]=m[o]=(h[o]+f[o])/2,c[1-o]=h[1-o],m[1-o]=f[1-o],l.push(c[0],c[1]),l.push(m[0],m[1]);break;default:c[o]=h[o],c[1-o]=f[1-o],l.push(c[0],c[1])}return l.push(r[u++],r[u++]),l}function wB(r,n){return isNaN(r)||isNaN(n)}function m2(r,n){return[r[2*n],r[2*n+1]]}function _2(r){if(r.get(["endLabel","show"]))return!0;for(var n=0;n<oa.length;n++)if(r.get([oa[n],"endLabel","show"]))return!0;return!1}function fb(r,n,t,i){if(uh(n,"cartesian2d")){var a=i.getModel("endLabel"),o=a.get("valueAnimation"),l=i.getData(),u={lastFrameIndex:0},c=_2(i)?function(m,y){r._endLabelOnDuring(m,y,l,u,o,a,n)}:null,h=n.getBaseAxis().isHorizontal(),f=h2(n,t,i,function(){var m=r._endLabel;m&&t&&null!=u.originalX&&m.attr({x:u.originalX,y:u.originalY})},c);if(!i.get("clip",!0)){var p=f.shape,v=Math.max(p.width,p.height);h?(p.y-=v,p.height+=2*v):(p.x-=v,p.width+=2*v)}return c&&c(1,f),f}return d2(n,t,i)}var MB=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return R(n,r),n.prototype.init=function(){var t=new hn,i=new mg;this.group.add(i.group),this._symbolDraw=i,this._lineGroup=t},n.prototype.render=function(t,i,a){var o=this,l=t.coordinateSystem,u=this.group,c=t.getData(),h=t.getModel("lineStyle"),f=t.getModel("areaStyle"),p=c.getLayout("points")||[],v="polar"===l.type,m=this._coordSys,y=this._symbolDraw,C=this._polyline,T=this._polygon,z=this._lineGroup,E=t.get("animation"),N=!f.isEmpty(),X=f.get("origin"),ve=s2(l,c,X),ce=N&&function xB(r,n,t){if(!t.valueDim)return[];for(var i=n.count(),a=sl(2*i),o=0;o<i;o++){var l=l2(t,r,n,o);a[2*o]=l[0],a[2*o+1]=l[1]}return a}(l,c,ve),_e=t.get("showSymbol"),ze=t.get("connectNulls"),Ee=_e&&!v&&function SB(r,n,t){var i=r.get("showAllSymbol"),a="auto"===i;if(!i||a){var o=t.getAxesByScale("ordinal")[0];if(o&&(!a||!function zB(r,n){var t=r.getExtent(),i=Math.abs(t[1]-t[0])/r.scale.count();isNaN(i)&&(i=0);for(var a=n.count(),o=Math.max(1,Math.round(a/5)),l=0;l<a;l+=o)if(1.5*vg.getSymbolSize(n,l)[r.isHorizontal()?1:0]>i)return!1;return!0}(o,n))){var l=n.mapDimension(o.dim),u={};return De(o.getViewLabels(),function(c){var h=o.scale.getRawOrdinalNumber(c.tickValue);u[h]=1}),function(c){return!u.hasOwnProperty(n.get(l,c))}}}}(t,c,l),Le=this._data;Le&&Le.eachItemGraphicEl(function(br,Un){br.__temp&&(u.remove(br),Le.setItemGraphicEl(Un,null))}),_e||y.remove(),u.add(z);var Ue,ke=!v&&t.get("step");l&&l.getArea&&t.get("clip",!0)&&(null!=(Ue=l.getArea()).width?(Ue.x-=.1,Ue.y-=.1,Ue.width+=.2,Ue.height+=.2):Ue.r0&&(Ue.r0-=.5,Ue.r+=.5)),this._clipShapeForSymbol=Ue;var He=function bB(r,n,t){var i=r.getVisual("visualMeta");if(i&&i.length&&r.count()&&"cartesian2d"===n.type){for(var a,o,l=i.length-1;l>=0;l--){var u=r.getDimensionInfo(i[l].dimension);if("x"===(a=u&&u.coordDim)||"y"===a){o=i[l];break}}if(o){var c=n.getAxis(a),h=_t(o.stops,function(N){return{coord:c.toGlobalCoord(c.dataToCoord(N.value)),color:N.color}}),f=h.length,p=o.outerColors.slice();f&&h[0].coord>h[f-1].coord&&(h.reverse(),p.reverse());var v=function TB(r,n){var a,o,t=[],i=r.length;function l(f,p,v){var m=f.coord;return{coord:v,color:Dh((v-m)/(p.coord-m),[f.color,p.color])}}for(var u=0;u<i;u++){var c=r[u],h=c.coord;if(h<0)a=c;else{if(h>n){o?t.push(l(o,c,n)):a&&t.push(l(a,c,0),l(a,c,n));break}a&&(t.push(l(a,c,0)),a=null),t.push(c),o=c}}return t}(h,"x"===a?t.getWidth():t.getHeight()),m=v.length;if(!m&&f)return h[0].coord<0?p[1]?p[1]:h[f-1].color:p[0]?p[0]:h[0].color;var C=v[0].coord-10,T=v[m-1].coord+10,z=T-C;if(z<.001)return"transparent";De(v,function(N){N.offset=(N.coord-C)/z}),v.push({offset:m?v[m-1].offset:.5,color:p[1]||"transparent"}),v.unshift({offset:m?v[0].offset:.5,color:p[0]||"transparent"});var E=new Cd(0,0,0,0,v,!0);return E[a]=C,E[a+"2"]=T,E}}}(c,l,a)||c.getVisual("style")[c.getVisual("drawType")];if(C&&m.type===l.type&&ke===this._step){N&&!T?T=this._newPolygon(p,ce):T&&!N&&(z.remove(T),T=this._polygon=null),v||this._initOrUpdateEndLabel(t,l,ql(He));var Ke=z.getClipPath();Ke?Kr(Ke,{shape:fb(this,l,!1,t).shape},t):z.setClipPath(fb(this,l,!0,t)),_e&&y.updateData(c,{isIgnore:Ee,clipShape:Ue,disableAnimation:!0,getSymbolPoint:function(br){return[p[2*br],p[2*br+1]]}}),(!f2(this._stackedOnPoints,ce)||!f2(this._points,p))&&(E?this._doUpdateAnimation(c,ce,l,a,ke,X,ze):(ke&&(p=Xu(p,l,ke,ze),ce&&(ce=Xu(ce,l,ke,ze))),C.setShape({points:p}),T&&T.setShape({points:p,stackedOnPoints:ce})))}else _e&&y.updateData(c,{isIgnore:Ee,clipShape:Ue,disableAnimation:!0,getSymbolPoint:function(br){return[p[2*br],p[2*br+1]]}}),E&&this._initSymbolLabelAnimation(c,l,Ue),ke&&(p=Xu(p,l,ke,ze),ce&&(ce=Xu(ce,l,ke,ze))),C=this._newPolyline(p),N&&(T=this._newPolygon(p,ce)),v||this._initOrUpdateEndLabel(t,l,ql(He)),z.setClipPath(fb(this,l,!0,t));var lt=t.getModel("emphasis"),St=lt.get("focus"),mt=lt.get("blurScope"),wt=lt.get("disabled");C.useStyle(Dt(h.getLineStyle(),{fill:"none",stroke:He,lineJoin:"bevel"})),Zi(C,t,"lineStyle"),C.style.lineWidth>0&&"bolder"===t.get(["emphasis","lineStyle","width"])&&(C.getState("emphasis").style.lineWidth=+C.style.lineWidth+1),dn(C).seriesIndex=t.seriesIndex,di(C,St,mt,wt);var Yt=v2(t.get("smooth")),Xt=t.get("smoothMonotone");if(C.setShape({smooth:Yt,smoothMonotone:Xt,connectNulls:ze}),T){var pn=c.getCalculationInfo("stackedOnSeries"),Bn=0;T.useStyle(Dt(f.getAreaStyle(),{fill:He,opacity:.7,lineJoin:"bevel",decal:c.getVisual("style").decal})),pn&&(Bn=v2(pn.get("smooth"))),T.setShape({smooth:Yt,stackedOnSmooth:Bn,smoothMonotone:Xt,connectNulls:ze}),Zi(T,t,"areaStyle"),dn(T).seriesIndex=t.seriesIndex,di(T,St,mt,wt)}var Ar=function(br){o._changePolyState(br)};c.eachItemGraphicEl(function(br){br&&(br.onHoverStateChange=Ar)}),this._polyline.onHoverStateChange=Ar,this._data=c,this._coordSys=l,this._stackedOnPoints=ce,this._points=p,this._step=ke,this._valueOrigin=X,t.get("triggerLineEvent")&&(this.packEventData(t,C),T&&this.packEventData(t,T))},n.prototype.packEventData=function(t,i){dn(i).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},n.prototype.highlight=function(t,i,a,o){var l=t.getData(),u=kl(l,o);if(this._changePolyState("emphasis"),!(u instanceof Array)&&null!=u&&u>=0){var c=l.getLayout("points"),h=l.getItemGraphicEl(u);if(!h){var f=c[2*u],p=c[2*u+1];if(isNaN(f)||isNaN(p)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(f,p))return;var v=t.get("zlevel"),m=t.get("z");(h=new vg(l,u)).x=f,h.y=p,h.setZ(v,m);var y=h.getSymbolPath().getTextContent();y&&(y.zlevel=v,y.z=m,y.z2=this._polyline.z2+1),h.__temp=!0,l.setItemGraphicEl(u,h),h.stopSymbolAnimation(!0),this.group.add(h)}h.highlight()}else Vr.prototype.highlight.call(this,t,i,a,o)},n.prototype.downplay=function(t,i,a,o){var l=t.getData(),u=kl(l,o);if(this._changePolyState("normal"),null!=u&&u>=0){var c=l.getItemGraphicEl(u);c&&(c.__temp?(l.setItemGraphicEl(u,null),this.group.remove(c)):c.downplay())}else Vr.prototype.downplay.call(this,t,i,a,o)},n.prototype._changePolyState=function(t){var i=this._polygon;nd(this._polyline,t),i&&nd(i,t)},n.prototype._newPolyline=function(t){var i=this._polyline;return i&&this._lineGroup.remove(i),i=new yB({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(i),this._polyline=i,i},n.prototype._newPolygon=function(t,i){var a=this._polygon;return a&&this._lineGroup.remove(a),a=new c2({shape:{points:t,stackedOnPoints:i},segmentIgnoreThreshold:2}),this._lineGroup.add(a),this._polygon=a,a},n.prototype._initSymbolLabelAnimation=function(t,i,a){var o,l,u=i.getBaseAxis(),c=u.inverse;"cartesian2d"===i.type?(o=u.isHorizontal(),l=!1):"polar"===i.type&&(o="angle"===u.dim,l=!0);var h=t.hostModel,f=h.get("animationDuration");Pe(f)&&(f=f(null));var p=h.get("animationDelay")||0,v=Pe(p)?p(null):p;t.eachItemGraphicEl(function(m,y){var C=m;if(C){var z=void 0,E=void 0,N=void 0;if(a)if(l){var X=a,ve=i.pointToCoord([m.x,m.y]);o?(z=X.startAngle,E=X.endAngle,N=-ve[1]/180*Math.PI):(z=X.r0,E=X.r,N=ve[0])}else o?(z=a.x,E=a.x+a.width,N=m.x):(z=a.y+a.height,E=a.y,N=m.y);var _e=E===z?0:(N-z)/(E-z);c&&(_e=1-_e);var ze=Pe(p)?p(y):f*_e+v,Ee=C.getSymbolPath(),Le=Ee.getTextContent();C.attr({scaleX:0,scaleY:0}),C.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:ze}),Le&&Le.animateFrom({style:{opacity:0}},{duration:300,delay:ze}),Ee.disableLabelAnimation=!0}})},n.prototype._initOrUpdateEndLabel=function(t,i,a){var o=t.getModel("endLabel");if(_2(t)){var l=t.getData(),u=this._polyline,c=l.getLayout("points");if(!c)return u.removeTextContent(),void(this._endLabel=null);var h=this._endLabel;h||((h=this._endLabel=new Gn({z2:200})).ignoreClip=!0,u.setTextContent(this._endLabel),u.disableLabelAnimation=!0);var f=function DB(r){for(var n=r.length/2;n>0&&wB(r[2*n-2],r[2*n-1]);n--);return n-1}(c);f>=0&&(Xi(u,Li(t,"endLabel"),{inheritColor:a,labelFetcher:t,labelDataIndex:f,defaultText:function(p,v,m){return null!=m?r2(l,m):Id(l,p)},enableTextSetter:!0},function EB(r,n){var t=n.getBaseAxis(),i=t.isHorizontal(),a=t.inverse,o=i?a?"right":"left":"center",l=i?"middle":a?"top":"bottom";return{normal:{align:r.get("align")||o,verticalAlign:r.get("verticalAlign")||l}}}(o,i)),u.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},n.prototype._endLabelOnDuring=function(t,i,a,o,l,u,c){var h=this._endLabel,f=this._polyline;if(h){t<1&&null==o.originalX&&(o.originalX=h.x,o.originalY=h.y);var p=a.getLayout("points"),v=a.hostModel,m=v.get("connectNulls"),y=u.get("precision"),C=u.get("distance")||0,T=c.getBaseAxis(),z=T.isHorizontal(),E=T.inverse,N=i.shape,X=E?z?N.x:N.y+N.height:z?N.x+N.width:N.y,ve=(z?C:0)*(E?-1:1),ce=(z?0:-C)*(E?-1:1),_e=z?"x":"y",ze=function AB(r,n,t){for(var o,l,i=r.length/2,a="x"===t?0:1,u=0,c=-1,h=0;h<i;h++)if(l=r[2*h+a],!isNaN(l)&&!isNaN(r[2*h+1-a])){if(0===h){o=l;continue}if(o<=n&&l>=n||o>=n&&l<=n){c=h;break}u=h,o=l}return{range:[u,c],t:(n-o)/(l-o)}}(p,X,_e),Ee=ze.range,Le=Ee[1]-Ee[0],ke=void 0;if(Le>=1){if(Le>1&&!m){var Ue=m2(p,Ee[0]);h.attr({x:Ue[0]+ve,y:Ue[1]+ce}),l&&(ke=v.getRawValue(Ee[0]))}else{(Ue=f.getPointOn(X,_e))&&h.attr({x:Ue[0]+ve,y:Ue[1]+ce});var He=v.getRawValue(Ee[0]),Ke=v.getRawValue(Ee[1]);l&&(ke=Zv(a,y,He,Ke,ze.t))}o.lastFrameIndex=Ee[0]}else{var nt=1===t||o.lastFrameIndex>0?Ee[0]:0;Ue=m2(p,nt),l&&(ke=v.getRawValue(nt)),h.attr({x:Ue[0]+ve,y:Ue[1]+ce})}l&&Au(h).setLabelText(ke)}},n.prototype._doUpdateAnimation=function(t,i,a,o,l,u,c){var h=this._polyline,f=this._polygon,p=t.hostModel,v=function _B(r,n,t,i,a,o,l,u){for(var c=function mB(r,n){var t=[];return n.diff(r).add(function(i){t.push({cmd:"+",idx:i})}).update(function(i,a){t.push({cmd:"=",idx:a,idx1:i})}).remove(function(i){t.push({cmd:"-",idx:i})}).execute(),t}(r,n),h=[],f=[],p=[],v=[],m=[],y=[],C=[],T=s2(a,n,l),z=r.getLayout("points")||[],E=n.getLayout("points")||[],N=0;N<c.length;N++){var X=c[N],ve=!0,ce=void 0,_e=void 0;switch(X.cmd){case"=":var ze=z[ce=2*X.idx],Ee=z[ce+1],Le=E[_e=2*X.idx1],ke=E[_e+1];(isNaN(ze)||isNaN(Ee))&&(ze=Le,Ee=ke),h.push(ze,Ee),f.push(Le,ke),p.push(t[ce],t[ce+1]),v.push(i[_e],i[_e+1]),C.push(n.getRawIndex(X.idx1));break;case"+":var Ue=X.idx,He=T.dataDimsForPoint,Ke=a.dataToPoint([n.get(He[0],Ue),n.get(He[1],Ue)]);_e=2*Ue,h.push(Ke[0],Ke[1]),f.push(E[_e],E[_e+1]);var nt=l2(T,a,n,Ue);p.push(nt[0],nt[1]),v.push(i[_e],i[_e+1]),C.push(n.getRawIndex(Ue));break;case"-":ve=!1}ve&&(m.push(X),y.push(y.length))}y.sort(function(Ar,br){return C[Ar]-C[br]});var lt=h.length,St=sl(lt),mt=sl(lt),wt=sl(lt),kt=sl(lt),Yt=[];for(N=0;N<y.length;N++){var Xt=y[N],pn=2*N,Bn=2*Xt;St[pn]=h[Bn],St[pn+1]=h[Bn+1],mt[pn]=f[Bn],mt[pn+1]=f[Bn+1],wt[pn]=p[Bn],wt[pn+1]=p[Bn+1],kt[pn]=v[Bn],kt[pn+1]=v[Bn+1],Yt[N]=m[Xt]}return{current:St,next:mt,stackedOnCurrent:wt,stackedOnNext:kt,status:Yt}}(this._data,t,this._stackedOnPoints,i,this._coordSys,0,this._valueOrigin),m=v.current,y=v.stackedOnCurrent,C=v.next,T=v.stackedOnNext;if(l&&(m=Xu(v.current,a,l,c),y=Xu(v.stackedOnCurrent,a,l,c),C=Xu(v.next,a,l,c),T=Xu(v.stackedOnNext,a,l,c)),g2(m,C)>3e3||f&&g2(y,T)>3e3)return h.stopAnimation(),h.setShape({points:C}),void(f&&(f.stopAnimation(),f.setShape({points:C,stackedOnPoints:T})));h.shape.__points=v.current,h.shape.points=m;var z={shape:{points:C}};v.current!==m&&(z.shape.__points=v.next),h.stopAnimation(),Kn(h,z,p),f&&(f.setShape({points:m,stackedOnPoints:y}),f.stopAnimation(),Kn(f,{shape:{stackedOnPoints:T}},p),h.shape.points!==f.shape.points&&(f.shape.points=h.shape.points));for(var E=[],N=v.status,X=0;X<N.length;X++)if("="===N[X].cmd){var ce=t.getItemGraphicEl(N[X].idx1);ce&&E.push({el:ce,ptIdx:X})}h.animators&&h.animators.length&&h.animators[0].during(function(){f&&f.dirtyShape();for(var _e=h.shape.__points,ze=0;ze<E.length;ze++){var Ee=E[ze].el,Le=2*E[ze].ptIdx;Ee.x=_e[Le],Ee.y=_e[Le+1],Ee.markRedraw()}})},n.prototype.remove=function(t){var i=this.group,a=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),a&&a.eachItemGraphicEl(function(o,l){o.__temp&&(i.remove(o),a.setItemGraphicEl(l,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},n.type="line",n}(Vr);const OB=MB;function _g(r,n){return{seriesType:r,plan:md(),reset:function(t){var i=t.getData(),a=t.coordinateSystem,l=n||t.pipelineContext.large;if(a){var u=_t(a.dimensions,function(m){return i.mapDimension(m)}).slice(0,2),c=u.length,h=i.getCalculationInfo("stackResultDimension");eu(i,u[0])&&(u[0]=h),eu(i,u[1])&&(u[1]=h);var f=i.getStore(),p=i.getDimensionIndex(u[0]),v=i.getDimensionIndex(u[1]);return c&&{progress:function(m,y){for(var T=l&&sl((m.end-m.start)*c),z=[],E=[],N=m.start,X=0;N<m.end;N++){var ve=void 0;if(1===c){var ce=f.get(p,N);ve=a.dataToPoint(ce,null,E)}else z[0]=f.get(p,N),z[1]=f.get(v,N),ve=a.dataToPoint(z,null,E);l?(T[X++]=ve[0],T[X++]=ve[1]):y.setItemLayout(N,ve.slice())}l&&y.setLayout("points",T)}}}}}}var PB={average:function(r){for(var n=0,t=0,i=0;i<r.length;i++)isNaN(r[i])||(n+=r[i],t++);return 0===t?NaN:n/t},sum:function(r){for(var n=0,t=0;t<r.length;t++)n+=r[t]||0;return n},max:function(r){for(var n=-1/0,t=0;t<r.length;t++)r[t]>n&&(n=r[t]);return isFinite(n)?n:NaN},min:function(r){for(var n=1/0,t=0;t<r.length;t++)r[t]<n&&(n=r[t]);return isFinite(n)?n:NaN},nearest:function(r){return r[0]}},IB=function(r){return Math.round(r.length/2)};function y2(r){return{seriesType:r,reset:function(n,t,i){var a=n.getData(),o=n.get("sampling"),l=n.coordinateSystem,u=a.count();if(u>10&&"cartesian2d"===l.type&&o){var c=l.getBaseAxis(),h=l.getOtherAxis(c),f=c.getExtent(),p=i.getDevicePixelRatio(),v=Math.abs(f[1]-f[0])*(p||1),m=Math.round(u/v);if(isFinite(m)&&m>1){"lttb"===o&&n.setData(a.lttbDownSample(a.mapDimension(h.dim),1/m));var y=void 0;Qe(o)?y=PB[o]:Pe(o)&&(y=o),y&&n.setData(a.downSample(a.mapDimension(h.dim),1/m,y,IB))}}}}}var C2=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.getInitialData=function(t,i){return ol(null,this,{useEncodeDefaulter:!0})},n.prototype.getMarkerPosition=function(t){var i=this.coordinateSystem;if(i&&i.clampData){var a=i.dataToPoint(i.clampData(t)),o=this.getData(),l=o.getLayout("offset"),u=o.getLayout("size");return a[i.getBaseAxis().isHorizontal()?0:1]+=l+u/2,a}return[NaN,NaN]},n.type="series.__base_bar__",n.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},n}(Xr);Xr.registerClass(C2);const I0=C2;var LB=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.getInitialData=function(){return ol(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},n.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},n.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),i=this.get("largeThreshold");return i>t&&(t=i),t},n.prototype.brushSelector=function(t,i,a){return a.rect(i.getItemLayout(t))},n.type="series.bar",n.dependencies=["grid","polar"],n.defaultOption=nl(I0.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),n}(I0);const RB=LB;var NB=function r(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},FB=function(r){function n(t){var i=r.call(this,t)||this;return i.type="sausage",i}return R(n,r),n.prototype.getDefaultShape=function(){return new NB},n.prototype.buildPath=function(t,i){var a=i.cx,o=i.cy,l=Math.max(i.r0||0,0),u=Math.max(i.r,0),c=.5*(u-l),h=l+c,f=i.startAngle,p=i.endAngle,v=i.clockwise,m=2*Math.PI,y=v?p-f<m:f-p<m;y||(f=p-(v?m:-m));var C=Math.cos(f),T=Math.sin(f),z=Math.cos(p),E=Math.sin(p);y?(t.moveTo(C*l+a,T*l+o),t.arc(C*h+a,T*h+o,c,-Math.PI+f,f,!v)):t.moveTo(C*u+a,T*u+o),t.arc(a,o,u,f,p,!v),t.arc(z*h+a,E*h+o,c,p-2*Math.PI,p-Math.PI,!v),0!==l&&t.arc(a,o,l,p,f,v)},n}(Fn);const k0=FB;function L0(r,n,t){return n*Math.sin(r)*(t?-1:1)}function R0(r,n,t){return n*Math.cos(r)*(t?1:-1)}var pb=Math.max,gb=Math.min,VB=function(r){function n(){var t=r.call(this)||this;return t.type=n.type,t._isFirstFrame=!0,t}return R(n,r),n.prototype.render=function(t,i,a,o){this._model=t,this._removeOnRenderedListener(a),this._updateDrawMode(t);var l=t.get("coordinateSystem");("cartesian2d"===l||"polar"===l)&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(t,i,a):this._renderNormal(t,i,a,o))},n.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},n.prototype.incrementalRender=function(t,i){this._progressiveEls=[],this._incrementalRenderLarge(t,i)},n.prototype.eachRendered=function(t){Ju(this._progressiveEls||this.group,t)},n.prototype._updateDrawMode=function(t){var i=t.pipelineContext.large;(null==this._isLargeDraw||i!==this._isLargeDraw)&&(this._isLargeDraw=i,this._clear())},n.prototype._renderNormal=function(t,i,a,o){var p,l=this.group,u=t.getData(),c=this._data,h=t.coordinateSystem,f=h.getBaseAxis();"cartesian2d"===h.type?p=f.isHorizontal():"polar"===h.type&&(p="angle"===f.dim);var v=t.isAnimationEnabled()?t:null,m=function HB(r,n){var t=r.get("realtimeSort",!0),i=n.getBaseAxis();if(t&&"category"===i.type&&"cartesian2d"===n.type)return{baseAxis:i,otherAxis:n.getOtherAxis(i)}}(t,h);m&&this._enableRealtimeSort(m,u,a);var y=t.get("clip",!0)||m,C=function UB(r,n){var t=r.getArea&&r.getArea();if(uh(r,"cartesian2d")){var i=r.getBaseAxis();if("category"!==i.type||!i.onBand){var a=n.getLayout("bandWidth");i.isHorizontal()?(t.x-=a,t.width+=2*a):(t.y-=a,t.height+=2*a)}}return t}(h,u);l.removeClipPath();var T=t.get("roundCap",!0),z=t.get("showBackground",!0),E=t.getModel("backgroundStyle"),N=E.get("borderRadius")||0,X=[],ve=this._backgroundEls,ce=o&&o.isInitSort,_e=o&&"changeAxisOrder"===o.type;function ze(ke){var Ue=N0[h.type](u,ke),He=function KB(r,n,t){return new("polar"===r.type?Oa:Qn)({shape:O2(n,t,r),silent:!0,z2:0})}(h,p,Ue);return He.useStyle(E.getItemStyle()),"cartesian2d"===h.type&&He.setShape("r",N),X[ke]=He,He}u.diff(c).add(function(ke){var Ue=u.getItemModel(ke),He=N0[h.type](u,ke,Ue);if(z&&ze(ke),u.hasValue(ke)&&z2[h.type](He)){var Ke=!1;y&&(Ke=x2[h.type](C,He));var nt=T2[h.type](t,u,ke,He,p,v,f.model,!1,T);m&&(nt.forceLabelAnimation=!0),D2(nt,u,ke,Ue,He,t,p,"polar"===h.type),ce?nt.attr({shape:He}):m?b2(m,v,nt,He,ke,p,!1,!1):Kr(nt,{shape:He},t,ke),u.setItemGraphicEl(ke,nt),l.add(nt),nt.ignore=Ke}}).update(function(ke,Ue){var He=u.getItemModel(ke),Ke=N0[h.type](u,ke,He);if(z){var nt=void 0;0===ve.length?nt=ze(Ue):((nt=ve[Ue]).useStyle(E.getItemStyle()),"cartesian2d"===h.type&&nt.setShape("r",N),X[ke]=nt);var lt=N0[h.type](u,ke);Kn(nt,{shape:O2(p,lt,h)},v,ke)}var mt=c.getItemGraphicEl(Ue);if(u.hasValue(ke)&&z2[h.type](Ke)){var wt=!1;if(y&&(wt=x2[h.type](C,Ke))&&l.remove(mt),mt?bo(mt):mt=T2[h.type](t,u,ke,Ke,p,v,f.model,!!mt,T),m&&(mt.forceLabelAnimation=!0),_e){var kt=mt.getTextContent();if(kt){var Yt=Au(kt);null!=Yt.prevValue&&(Yt.prevValue=Yt.value)}}else D2(mt,u,ke,He,Ke,t,p,"polar"===h.type);ce?mt.attr({shape:Ke}):m?b2(m,v,mt,Ke,ke,p,!0,_e):Kn(mt,{shape:Ke},t,ke,null),u.setItemGraphicEl(ke,mt),mt.ignore=wt,l.add(mt)}else l.remove(mt)}).remove(function(ke){var Ue=c.getItemGraphicEl(ke);Ue&&Fc(Ue,t,ke)}).execute();var Ee=this._backgroundGroup||(this._backgroundGroup=new hn);Ee.removeAll();for(var Le=0;Le<X.length;++Le)Ee.add(X[Le]);l.add(Ee),this._backgroundEls=X,this._data=u},n.prototype._renderLarge=function(t,i,a){this._clear(),E2(t,this.group),this._updateLargeClip(t)},n.prototype._incrementalRenderLarge=function(t,i){this._removeBackground(),E2(i,this.group,this._progressiveEls,!0)},n.prototype._updateLargeClip=function(t){var i=t.get("clip",!0)&&P0(t.coordinateSystem,!1,t),a=this.group;i?a.setClipPath(i):a.removeClipPath()},n.prototype._enableRealtimeSort=function(t,i,a){var o=this;if(i.count()){var l=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(i,t,a),this._isFirstFrame=!1;else{var u=function(c){var h=i.getItemGraphicEl(c),f=h&&h.shape;return f&&Math.abs(l.isHorizontal()?f.height:f.width)||0};this._onRendered=function(){o._updateSortWithinSameData(i,u,l,a)},a.getZr().on("rendered",this._onRendered)}}},n.prototype._dataSort=function(t,i,a){var o=[];return t.each(t.mapDimension(i.dim),function(l,u){var c=a(u);o.push({dataIndex:u,mappedValue:c=null==c?NaN:c,ordinalNumber:l})}),o.sort(function(l,u){return u.mappedValue-l.mappedValue}),{ordinalNumbers:_t(o,function(l){return l.ordinalNumber})}},n.prototype._isOrderChangedWithinSameData=function(t,i,a){for(var o=a.scale,l=t.mapDimension(a.dim),u=Number.MAX_VALUE,c=0,h=o.getOrdinalMeta().categories.length;c<h;++c){var f=t.rawIndexOf(l,o.getRawOrdinalNumber(c)),p=f<0?Number.MIN_VALUE:i(t.indexOfRawIndex(f));if(p>u)return!0;u=p}return!1},n.prototype._isOrderDifferentInView=function(t,i){for(var a=i.scale,o=a.getExtent(),l=Math.max(0,o[0]),u=Math.min(o[1],a.getOrdinalMeta().categories.length-1);l<=u;++l)if(t.ordinalNumbers[l]!==a.getRawOrdinalNumber(l))return!0},n.prototype._updateSortWithinSameData=function(t,i,a,o){if(this._isOrderChangedWithinSameData(t,i,a)){var l=this._dataSort(t,a,i);this._isOrderDifferentInView(l,a)&&(this._removeOnRenderedListener(o),o.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",axisId:a.index,sortInfo:l}))}},n.prototype._dispatchInitSort=function(t,i,a){var o=i.baseAxis,l=this._dataSort(t,o,function(u){return t.get(t.mapDimension(i.otherAxis.dim),u)});a.dispatchAction({type:"changeAxisOrder",componentType:o.dim+"Axis",isInitSort:!0,axisId:o.index,sortInfo:l})},n.prototype.remove=function(t,i){this._clear(this._model),this._removeOnRenderedListener(i)},n.prototype.dispose=function(t,i){this._removeOnRenderedListener(i)},n.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},n.prototype._clear=function(t){var i=this.group,a=this._data;t&&t.isAnimationEnabled()&&a&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],a.eachItemGraphicEl(function(o){Fc(o,t,dn(o).dataIndex)})):i.removeAll(),this._data=null,this._isFirstFrame=!0},n.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},n.type="bar",n}(Vr),x2={cartesian2d:function(r,n){var t=n.width<0?-1:1,i=n.height<0?-1:1;t<0&&(n.x+=n.width,n.width=-n.width),i<0&&(n.y+=n.height,n.height=-n.height);var a=r.x+r.width,o=r.y+r.height,l=pb(n.x,r.x),u=gb(n.x+n.width,a),c=pb(n.y,r.y),h=gb(n.y+n.height,o),f=u<l,p=h<c;return n.x=f&&l>a?u:l,n.y=p&&c>o?h:c,n.width=f?0:u-l,n.height=p?0:h-c,t<0&&(n.x+=n.width,n.width=-n.width),i<0&&(n.y+=n.height,n.height=-n.height),f||p},polar:function(r,n){var t=n.r0<=n.r?1:-1;if(t<0){var i=n.r;n.r=n.r0,n.r0=i}var a=gb(n.r,r.r),o=pb(n.r0,r.r0);n.r=a,n.r0=o;var l=a-o<0;return t<0&&(i=n.r,n.r=n.r0,n.r0=i),l}},T2={cartesian2d:function(r,n,t,i,a,o,l,u,c){var h=new Qn({shape:Ge({},i),z2:1});return h.__dataIndex=t,h.name="item",o&&(h.shape[a?"height":"width"]=0),h},polar:function(r,n,t,i,a,o,l,u,c){var h=!a&&c?k0:Oa,f=new h({shape:i,z2:1});f.name="item";var p=w2(a);if(f.calculateTextPosition=function BB(r,n){var t=(n=n||{}).isRoundCap;return function(i,a,o){var l=a.position;if(!l||l instanceof Array)return Vh(i,a,o);var u=r(l),c=null!=a.distance?a.distance:5,h=this.shape,f=h.cx,p=h.cy,v=h.r,m=h.r0,y=(v+m)/2,C=h.startAngle,T=h.endAngle,z=(C+T)/2,E=t?Math.abs(v-m)/2:0,N=Math.cos,X=Math.sin,ve=f+v*N(C),ce=p+v*X(C),_e="left",ze="top";switch(u){case"startArc":ve=f+(m-c)*N(z),ce=p+(m-c)*X(z),_e="center",ze="top";break;case"insideStartArc":ve=f+(m+c)*N(z),ce=p+(m+c)*X(z),_e="center",ze="bottom";break;case"startAngle":ve=f+y*N(C)+L0(C,c+E,!1),ce=p+y*X(C)+R0(C,c+E,!1),_e="right",ze="middle";break;case"insideStartAngle":ve=f+y*N(C)+L0(C,-c+E,!1),ce=p+y*X(C)+R0(C,-c+E,!1),_e="left",ze="middle";break;case"middle":ve=f+y*N(z),ce=p+y*X(z),_e="center",ze="middle";break;case"endArc":ve=f+(v+c)*N(z),ce=p+(v+c)*X(z),_e="center",ze="bottom";break;case"insideEndArc":ve=f+(v-c)*N(z),ce=p+(v-c)*X(z),_e="center",ze="top";break;case"endAngle":ve=f+y*N(T)+L0(T,c+E,!0),ce=p+y*X(T)+R0(T,c+E,!0),_e="left",ze="middle";break;case"insideEndAngle":ve=f+y*N(T)+L0(T,-c+E,!0),ce=p+y*X(T)+R0(T,-c+E,!0),_e="right",ze="middle";break;default:return Vh(i,a,o)}return(i=i||{}).x=ve,i.y=ce,i.align=_e,i.verticalAlign=ze,i}}(p,{isRoundCap:h===k0}),o){var m=a?"r":"endAngle",y={};f.shape[m]=a?0:i.startAngle,y[m]=i[m],(u?Kn:Kr)(f,{shape:y},o)}return f}};function b2(r,n,t,i,a,o,l,u){var c,h;o?(h={x:i.x,width:i.width},c={y:i.y,height:i.height}):(h={y:i.y,height:i.height},c={x:i.x,width:i.width}),u||(l?Kn:Kr)(t,{shape:c},n,a,null),(l?Kn:Kr)(t,{shape:h},n?r.baseAxis.model:null,a)}function S2(r,n){for(var t=0;t<n.length;t++)if(!isFinite(r[n[t]]))return!0;return!1}var WB=["x","y","width","height"],GB=["cx","cy","r","startAngle","endAngle"],z2={cartesian2d:function(r){return!S2(r,WB)},polar:function(r){return!S2(r,GB)}},N0={cartesian2d:function(r,n,t){var i=r.getItemLayout(n),a=t?function YB(r,n){var t=r.get(["itemStyle","borderColor"]);if(!t||"none"===t)return 0;var i=r.get(["itemStyle","borderWidth"])||0,a=isNaN(n.width)?Number.MAX_VALUE:Math.abs(n.width),o=isNaN(n.height)?Number.MAX_VALUE:Math.abs(n.height);return Math.min(i,a,o)}(t,i):0,o=i.width>0?1:-1,l=i.height>0?1:-1;return{x:i.x+o*a/2,y:i.y+l*a/2,width:i.width-o*a,height:i.height-l*a}},polar:function(r,n,t){var i=r.getItemLayout(n);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}}};function w2(r){return function(n){var t=n?"Arc":"Angle";return function(i){switch(i){case"start":case"insideStart":case"end":case"insideEnd":return i+t;default:return i}}}(r)}function D2(r,n,t,i,a,o,l,u){var c=n.getItemVisual(t,"style");u||r.setShape("r",i.get(["itemStyle","borderRadius"])||0),r.useStyle(c);var h=i.getShallow("cursor");h&&r.attr("cursor",h);var f=u?l?a.r>=a.r0?"endArc":"startArc":a.endAngle>=a.startAngle?"endAngle":"startAngle":l?a.height>=0?"bottom":"top":a.width>=0?"right":"left",p=Li(i);Xi(r,p,{labelFetcher:o,labelDataIndex:t,defaultText:Id(o.getData(),t),inheritColor:c.fill,defaultOpacity:c.opacity,defaultOutsidePosition:f});var v=r.getTextContent();if(u&&v){var m=i.get(["label","position"]);r.textConfig.inside="middle"===m||null,function ZB(r,n,t,i){if(Ve(i))r.setTextConfig({rotation:i});else if(we(n))r.setTextConfig({rotation:0});else{var c,a=r.shape,o=a.clockwise?a.startAngle:a.endAngle,l=a.clockwise?a.endAngle:a.startAngle,u=(o+l)/2,h=t(n);switch(h){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":c=u;break;case"startAngle":case"insideStartAngle":c=o;break;case"endAngle":case"insideEndAngle":c=l;break;default:return void r.setTextConfig({rotation:0})}var f=1.5*Math.PI-c;"middle"===h&&f>Math.PI/2&&f<1.5*Math.PI&&(f-=Math.PI),r.setTextConfig({rotation:f})}}(r,"outside"===m?f:m,w2(l),i.get(["label","rotate"]))}Bm(v,p,o.getRawValue(t),function(C){return r2(n,C)});var y=i.getModel(["emphasis"]);di(r,y.get("focus"),y.get("blurScope"),y.get("disabled")),Zi(r,i),function JB(r){return null!=r.startAngle&&null!=r.endAngle&&r.startAngle===r.endAngle}(a)&&(r.style.fill="none",r.style.stroke="none",De(r.states,function(C){C.style&&(C.style.fill=C.style.stroke="none")}))}var QB=function r(){},A2=function(r){function n(t){var i=r.call(this,t)||this;return i.type="largeBar",i}return R(n,r),n.prototype.getDefaultShape=function(){return new QB},n.prototype.buildPath=function(t,i){for(var a=i.points,o=this.baseDimIdx,l=1-this.baseDimIdx,u=[],c=[],h=this.barWidth,f=0;f<a.length;f+=3)c[o]=h,c[l]=a[f+2],u[o]=a[f+o],u[l]=a[f+l],t.rect(u[0],u[1],c[0],c[1])},n}(Fn);function E2(r,n,t,i){var a=r.getData(),o=a.getLayout("valueAxisHorizontal")?1:0,l=a.getLayout("largeDataIndices"),u=a.getLayout("size"),c=r.getModel("backgroundStyle"),h=a.getLayout("largeBackgroundPoints");if(h){var f=new A2({shape:{points:h},incremental:!!i,silent:!0,z2:0});f.baseDimIdx=o,f.largeDataIndices=l,f.barWidth=u,f.useStyle(c.getItemStyle()),n.add(f),t&&t.push(f)}var p=new A2({shape:{points:a.getLayout("largePoints")},incremental:!!i,z2:1});p.baseDimIdx=o,p.largeDataIndices=l,p.barWidth=u,n.add(p),p.useStyle(a.getVisual("style")),dn(p).seriesIndex=r.seriesIndex,r.get("silent")||(p.on("mousedown",M2),p.on("mousemove",M2)),t&&t.push(p)}var M2=K_(function(r){var t=function qB(r,n,t){for(var i=r.baseDimIdx,a=1-i,o=r.shape.points,l=r.largeDataIndices,u=[],c=[],h=r.barWidth,f=0,p=o.length/3;f<p;f++){var v=3*f;if(c[i]=h,c[a]=o[v+2],u[i]=o[v+i],u[a]=o[v+a],c[a]<0&&(u[a]+=c[a],c[a]=-c[a]),n>=u[0]&&n<=u[0]+c[0]&&t>=u[1]&&t<=u[1]+c[1])return l[f]}return-1}(this,r.offsetX,r.offsetY);dn(this).dataIndex=t>=0?t:null},30,!1);function O2(r,n,t){if(uh(t,"cartesian2d")){var i=n,a=t.getArea();return{x:r?i.x:a.x,y:r?a.y:i.y,width:r?i.width:a.width,height:r?a.height:i.height}}return{cx:(a=t.getArea()).cx,cy:a.cy,r0:r?a.r0:n.r0,r:r?a.r:n.r,startAngle:r?n.startAngle:0,endAngle:r?n.endAngle:2*Math.PI}}const $B=VB;var F0=2*Math.PI,P2=Math.PI/180;function I2(r,n){return ui(r.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}function k2(r,n){var t=I2(r,n),i=r.get("center"),a=r.get("radius");we(a)||(a=[0,a]),we(i)||(i=[i,i]);var o=Ht(t.width,n.getWidth()),l=Ht(t.height,n.getHeight()),u=Math.min(o,l);return{cx:Ht(i[0],o)+t.x,cy:Ht(i[1],l)+t.y,r0:Ht(a[0],u/2),r:Ht(a[1],u/2)}}function XB(r,n,t){n.eachSeriesByType(r,function(i){var a=i.getData(),o=a.mapDimension("value"),l=I2(i,t),u=k2(i,t),c=u.cx,h=u.cy,f=u.r,p=u.r0,v=-i.get("startAngle")*P2,m=i.get("minAngle")*P2,y=0;a.each(o,function(Le){!isNaN(Le)&&y++});var C=a.getSum(o),T=Math.PI/(C||y)*2,z=i.get("clockwise"),E=i.get("roseType"),N=i.get("stillShowZeroSum"),X=a.getDataExtent(o);X[0]=0;var ve=F0,ce=0,_e=v,ze=z?1:-1;if(a.setLayout({viewRect:l,r:f}),a.each(o,function(Le,ke){var Ue;if(isNaN(Le))a.setItemLayout(ke,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:z,cx:c,cy:h,r0:p,r:E?NaN:f});else{(Ue="area"!==E?0===C&&N?T:Le*T:F0/y)<m?(Ue=m,ve-=m):ce+=Le;var He=_e+ze*Ue;a.setItemLayout(ke,{angle:Ue,startAngle:_e,endAngle:He,clockwise:z,cx:c,cy:h,r0:p,r:E?mr(Le,X,[p,f]):f}),_e=He}}),ve<F0&&y)if(ve<=.001){var Ee=F0/y;a.each(o,function(Le,ke){if(!isNaN(Le)){var Ue=a.getItemLayout(ke);Ue.angle=Ee,Ue.startAngle=v+ze*ke*Ee,Ue.endAngle=v+ze*(ke+1)*Ee}})}else T=ve/ce,_e=v,a.each(o,function(Le,ke){if(!isNaN(Le)){var Ue=a.getItemLayout(ke),He=Ue.angle===m?m:Le*T;Ue.startAngle=_e,Ue.endAngle=_e+ze*He,_e+=ze*He}})})}function yg(r){return{seriesType:r,reset:function(n,t){var i=t.findComponents({mainType:"legend"});if(i&&i.length){var a=n.getData();a.filterSelf(function(o){for(var l=a.getName(o),u=0;u<i.length;u++)if(!i[u].isSelected(l))return!1;return!0})}}}}var e5=Math.PI/180;function L2(r,n,t,i,a,o,l,u,c,h){if(!(r.length<2)){for(var v=r.length,m=0;m<v;m++)"outer"===r[m].position&&"labelLine"===r[m].labelAlignTo&&(r[m].linePoints[1][0]+=r[m].label.x-h,r[m].label.x=h);DE(r,c,c+l)&&function p(C){for(var T={list:[],maxY:0},z={list:[],maxY:0},E=0;E<C.length;E++)if("none"===C[E].labelAlignTo){var N=C[E],X=N.label.y>t?z:T,ve=Math.abs(N.label.y-t);if(ve>=X.maxY){var ce=N.label.x-n-N.len2*a,_e=i+N.len,ze=Math.abs(ce)<_e?Math.sqrt(ve*ve/(1-ce*ce/_e/_e)):_e;X.rB=ze,X.maxY=ve}X.list.push(N)}f(T),f(z)}(r)}function f(C){for(var T=C.rB,z=T*T,E=0;E<C.list.length;E++){var N=C.list[E],X=Math.abs(N.label.y-t),ve=i+N.len,ce=ve*ve,_e=Math.sqrt((1-Math.abs(X*X/z))*ce),ze=n+(_e+N.len2)*a;R2(N,N.targetTextWidth-(ze-N.label.x)*a,!0),N.label.x=ze}}}function R2(r,n,t){if(void 0===t&&(t=!1),null==r.labelStyleWidth){var i=r.label,a=i.style,o=r.rect,l=a.backgroundColor,u=a.padding,c=u?u[1]+u[3]:0,h=a.overflow,f=o.width+(l?0:c);if(n<f||t){var p=o.height;if(h&&h.match("break")){i.setStyle("backgroundColor",null),i.setStyle("width",n-c);var v=i.getBoundingRect();i.setStyle("width",Math.ceil(v.width)),i.setStyle("backgroundColor",l)}else{var m=n-c;i.setStyle("width",n<f?m:t?m>r.unconstrainedWidth?null:m:null)}var C=i.getBoundingRect();o.width=C.width,o.height=C.height+((i.style.margin||0)+2.1),o.y-=(o.height-p)/2}}}function vb(r){return"center"===r.position}function kd(r,n,t){var i=r.get("borderRadius");if(null==i)return t?{cornerRadius:0}:null;we(i)||(i=[i,i,i,i]);var a=Math.abs(n.r||0-n.r0||0);return{cornerRadius:_t(i,function(o){return xo(o,a)})}}var r5=function(r){function n(t,i,a){var o=r.call(this)||this;o.z2=2;var l=new Gn;return o.setTextContent(l),o.updateData(t,i,a,!0),o}return R(n,r),n.prototype.updateData=function(t,i,a,o){var l=this,u=t.hostModel,c=t.getItemModel(i),h=c.getModel("emphasis"),f=t.getItemLayout(i),p=Ge(kd(c.getModel("itemStyle"),f,!0),f);if(isNaN(p.startAngle))l.setShape(p);else{if(o){l.setShape(p);var v=u.getShallow("animationType");u.ecModel.ssr?(Kr(l,{scaleX:0,scaleY:0},u,{dataIndex:i,isFrom:!0}),l.originX=p.cx,l.originY=p.cy):"scale"===v?(l.shape.r=f.r0,Kr(l,{shape:{r:f.r}},u,i)):null!=a?(l.setShape({startAngle:a,endAngle:a}),Kr(l,{shape:{startAngle:f.startAngle,endAngle:f.endAngle}},u,i)):(l.shape.endAngle=f.startAngle,Kn(l,{shape:{endAngle:f.endAngle}},u,i))}else bo(l),Kn(l,{shape:p},u,i);l.useStyle(t.getItemVisual(i,"style")),Zi(l,c);var m=(f.startAngle+f.endAngle)/2,y=u.get("selectedOffset"),C=Math.cos(m)*y,T=Math.sin(m)*y,z=c.getShallow("cursor");z&&l.attr("cursor",z),this._updateLabel(u,t,i),l.ensureState("emphasis").shape=Ge({r:f.r+(h.get("scale")&&h.get("scaleSize")||0)},kd(h.getModel("itemStyle"),f)),Ge(l.ensureState("select"),{x:C,y:T,shape:kd(c.getModel(["select","itemStyle"]),f)}),Ge(l.ensureState("blur"),{shape:kd(c.getModel(["blur","itemStyle"]),f)});var E=l.getTextGuideLine(),N=l.getTextContent();E&&Ge(E.ensureState("select"),{x:C,y:T}),Ge(N.ensureState("select"),{x:C,y:T}),di(this,h.get("focus"),h.get("blurScope"),h.get("disabled"))}},n.prototype._updateLabel=function(t,i,a){var o=this,l=i.getItemModel(a),u=l.getModel("labelLine"),c=i.getItemVisual(a,"style"),h=c&&c.fill,f=c&&c.opacity;Xi(o,Li(l),{labelFetcher:i.hostModel,labelDataIndex:a,inheritColor:h,defaultOpacity:f,defaultText:t.getFormattedLabel(a,"normal")||i.getName(a)});var p=o.getTextContent();o.setTextConfig({position:null,rotation:null}),p.attr({z2:10});var v=t.get(["label","position"]);if("outside"!==v&&"outer"!==v)o.removeTextGuideLine();else{var m=this.getTextGuideLine();m||(m=new Ia,this.setTextGuideLine(m)),KT(this,$T(l),{stroke:h,opacity:ri(u.get(["lineStyle","opacity"]),f,1)})}},n}(Oa),a5=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return R(n,r),n.prototype.render=function(t,i,a,o){var h,l=t.getData(),u=this._data,c=this.group;if(!u&&l.count()>0){for(var f=l.getItemLayout(0),p=1;isNaN(f&&f.startAngle)&&p<l.count();++p)f=l.getItemLayout(p);f&&(h=f.startAngle)}if(this._emptyCircleSector&&c.remove(this._emptyCircleSector),0===l.count()&&t.get("showEmptyCircle")){var v=new Oa({shape:k2(t,a)});v.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=v,c.add(v)}l.diff(u).add(function(m){var y=new r5(l,m,h);l.setItemGraphicEl(m,y),c.add(y)}).update(function(m,y){var C=u.getItemGraphicEl(y);C.updateData(l,m,h),C.off("click"),c.add(C),l.setItemGraphicEl(m,C)}).remove(function(m){Fc(u.getItemGraphicEl(m),t,m)}).execute(),function n5(r){var i,a,n=r.getData(),t=[],o=!1,l=(r.get("minShowLabelAngle")||0)*e5,u=n.getLayout("viewRect"),c=n.getLayout("r"),h=u.width,f=u.x,p=u.y,v=u.height;function m(ce){ce.ignore=!0}n.each(function(ce){var _e=n.getItemGraphicEl(ce),ze=_e.shape,Ee=_e.getTextContent(),Le=_e.getTextGuideLine(),ke=n.getItemModel(ce),Ue=ke.getModel("label"),He=Ue.get("position")||ke.get(["emphasis","label","position"]),Ke=Ue.get("distanceToLabelLine"),nt=Ue.get("alignTo"),lt=Ht(Ue.get("edgeDistance"),h),St=Ue.get("bleedMargin"),mt=ke.getModel("labelLine"),wt=mt.get("length");wt=Ht(wt,h);var kt=mt.get("length2");if(kt=Ht(kt,h),Math.abs(ze.endAngle-ze.startAngle)<l)return De(Ee.states,m),void(Ee.ignore=!0);if(function y(ce){if(!ce.ignore)return!0;for(var _e in ce.states)if(!1===ce.states[_e].ignore)return!0;return!1}(Ee)){var Bn,Ar,br,Un,Yt=(ze.startAngle+ze.endAngle)/2,Xt=Math.cos(Yt),pn=Math.sin(Yt);i=ze.cx,a=ze.cy;var vn="inside"===He||"inner"===He;if("center"===He)Bn=ze.cx,Ar=ze.cy,Un="center";else{var Hn=(vn?(ze.r+ze.r0)/2*Xt:ze.r*Xt)+i,kn=(vn?(ze.r+ze.r0)/2*pn:ze.r*pn)+a;if(Bn=Hn+3*Xt,Ar=kn+3*pn,!vn){var rn=Hn+Xt*(wt+c-ze.r),On=kn+pn*(wt+c-ze.r),ci=rn+(Xt<0?-1:1)*kt;Bn="edge"===nt?Xt<0?f+lt:f+h-lt:ci+(Xt<0?-Ke:Ke),Ar=On,br=[[Hn,kn],[rn,On],[ci,On]]}Un=vn?"center":"edge"===nt?Xt>0?"right":"left":Xt>0?"left":"right"}var Ci=Math.PI,gi=0,ya=Ue.get("rotate");if(Ve(ya))gi=ya*(Ci/180);else if("center"===He)gi=0;else if("radial"===ya||!0===ya)gi=Xt<0?-Yt+Ci:-Yt;else if("tangential"===ya&&"outside"!==He&&"outer"!==He){var ao=Math.atan2(Xt,pn);ao<0&&(ao=2*Ci+ao),pn>0&&(ao=Ci+ao),gi=ao-Ci}if(o=!!gi,Ee.x=Bn,Ee.y=Ar,Ee.rotation=gi,Ee.setStyle({verticalAlign:"middle"}),vn){Ee.setStyle({align:Un});var Kz=Ee.states.select;Kz&&(Kz.x+=Ee.x,Kz.y+=Ee.y)}else{var uc=Ee.getBoundingRect().clone();uc.applyTransform(Ee.getComputedTransform());var WL=(Ee.style.margin||0)+2.1;uc.y-=WL/2,uc.height+=WL,t.push({label:Ee,labelLine:Le,position:He,len:wt,len2:kt,minTurnAngle:mt.get("minTurnAngle"),maxSurfaceAngle:mt.get("maxSurfaceAngle"),surfaceNormal:new bn(Xt,pn),linePoints:br,textAlign:Un,labelDistance:Ke,labelAlignTo:nt,edgeDistance:lt,bleedMargin:St,rect:uc,unconstrainedWidth:uc.width,labelStyleWidth:Ee.style.width})}_e.setTextConfig({inside:vn})}}),!o&&r.get("avoidLabelOverlap")&&function t5(r,n,t,i,a,o,l,u){for(var c=[],h=[],f=Number.MAX_VALUE,p=-Number.MAX_VALUE,v=0;v<r.length;v++){var m=r[v].label;vb(r[v])||(m.x<n?(f=Math.min(f,m.x),c.push(r[v])):(p=Math.max(p,m.x),h.push(r[v])))}for(v=0;v<r.length;v++)if(!vb(y=r[v])&&y.linePoints){if(null!=y.labelStyleWidth)continue;m=y.label;var T,C=y.linePoints;y.targetTextWidth=T="edge"===y.labelAlignTo?m.x<n?C[2][0]-y.labelDistance-l-y.edgeDistance:l+a-y.edgeDistance-C[2][0]-y.labelDistance:"labelLine"===y.labelAlignTo?m.x<n?f-l-y.bleedMargin:l+a-p-y.bleedMargin:m.x<n?m.x-l-y.bleedMargin:l+a-m.x-y.bleedMargin,R2(y,T)}for(L2(h,n,t,i,1,0,o,0,u,p),L2(c,n,t,i,-1,0,o,0,u,f),v=0;v<r.length;v++){var y;if(!vb(y=r[v])&&y.linePoints){var E=(m=y.label).style.padding,ve=y.rect.width+(m.style.backgroundColor?0:E?E[1]+E[3]:0),ce=(C=y.linePoints)[1][0]-C[2][0];"edge"===y.labelAlignTo?C[2][0]=m.x<n?l+y.edgeDistance+ve+y.labelDistance:l+a-y.edgeDistance-ve-y.labelDistance:(C[2][0]=m.x<n?m.x+y.labelDistance:m.x-y.labelDistance,C[1][0]=C[2][0]+ce),C[1][1]=C[2][1]=m.y}}}(t,i,a,c,h,v,f,p);for(var C=0;C<t.length;C++){var T=t[C],z=T.label,E=T.labelLine,N=isNaN(z.x)||isNaN(z.y);if(z){z.setStyle({align:T.textAlign}),N&&(De(z.states,m),z.ignore=!0);var X=z.states.select;X&&(X.x+=z.x,X.y+=z.y)}if(E){var ve=T.linePoints;N||!ve?(De(E.states,m),E.ignore=!0):(bE(ve,T.minTurnAngle),gF(ve,T.surfaceNormal,T.maxSurfaceAngle),E.setShape({points:ve}),z.__hostTarget.textGuideLineConfig={anchor:new bn(ve[0][0],ve[0][1])})}}}(t),"expansion"!==t.get("animationTypeUpdate")&&(this._data=l)},n.prototype.dispose=function(){},n.prototype.containPoint=function(t,i){var o=i.getData().getItemLayout(0);if(o){var l=t[0]-o.cx,u=t[1]-o.cy,c=Math.sqrt(l*l+u*u);return c<=o.r&&c>=o.r0}},n.type="pie",n}(Vr);const o5=a5;function Ld(r,n,t){n=we(n)&&{coordDimensions:n}||Ge({encodeDefine:r.getEncode()},n);var i=r.getSource(),a=Ed(i,n).dimensions,o=new _a(a,r);return o.initData(i,t),o}var s5=function(){function r(n,t){this._getDataWithEncodedVisual=n,this._getRawData=t}return r.prototype.getAllNames=function(){var n=this._getRawData();return n.mapArray(n.getName)},r.prototype.containName=function(n){return this._getRawData().indexOfName(n)>=0},r.prototype.indexOfName=function(n){return this._getDataWithEncodedVisual().indexOfName(n)},r.prototype.getItemVisual=function(n,t){return this._getDataWithEncodedVisual().getItemVisual(n,t)},r}();const Cg=s5;var l5=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return R(n,r),n.prototype.init=function(t){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new Cg(qe(this.getData,this),qe(this.getRawData,this)),this._defaultLabelLine(t)},n.prototype.mergeOption=function(){r.prototype.mergeOption.apply(this,arguments)},n.prototype.getInitialData=function(){return Ld(this,{coordDimensions:["value"],encodeDefaulter:yt(h_,this)})},n.prototype.getDataParams=function(t){var i=this.getData(),a=r.prototype.getDataParams.call(this,t),o=[];return i.each(i.mapDimension("value"),function(l){o.push(l)}),a.percent=Dv(o,t,i.hostModel.get("percentPrecision")),a.$vars.push("percent"),a},n.prototype._defaultLabelLine=function(t){Il(t,"labelLine",["show"]);var i=t.labelLine,a=t.emphasis.labelLine;i.show=i.show&&t.label.show,a.show=a.show&&t.emphasis.label.show},n.type="series.pie",n.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},n}(Xr);const u5=l5;var d5=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.hasSymbolVisual=!0,t}return R(n,r),n.prototype.getInitialData=function(t,i){return ol(null,this,{useEncodeDefaulter:!0})},n.prototype.getProgressive=function(){var t=this.option.progressive;return null==t?this.option.large?5e3:this.get("progressive"):t},n.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?1e4:this.get("progressiveThreshold"):t},n.prototype.brushSelector=function(t,i,a){return a.point(i.getItemLayout(t))},n.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},n.type="series.scatter",n.dependencies=["grid","polar","geo","singleAxis","calendar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},n}(Xr);const f5=d5;var p5=function r(){},g5=function(r){function n(t){var i=r.call(this,t)||this;return i._off=0,i.hoverDataIdx=-1,i}return R(n,r),n.prototype.getDefaultShape=function(){return new p5},n.prototype.reset=function(){this.notClear=!1,this._off=0},n.prototype.buildPath=function(t,i){var p,a=i.points,o=i.size,l=this.symbolProxy,u=l.shape,c=t.getContext?t.getContext():t,f=this.softClipShape;if(c&&o[0]<4)this._ctx=c;else{for(this._ctx=null,p=this._off;p<a.length;){var v=a[p++],m=a[p++];isNaN(v)||isNaN(m)||f&&!f.contain(v,m)||(u.x=v-o[0]/2,u.y=m-o[1]/2,u.width=o[0],u.height=o[1],l.buildPath(t,u,!0))}this.incremental&&(this._off=p,this.notClear=!0)}},n.prototype.afterBrush=function(){var u,t=this.shape,i=t.points,a=t.size,o=this._ctx,l=this.softClipShape;if(o){for(u=this._off;u<i.length;){var c=i[u++],h=i[u++];isNaN(c)||isNaN(h)||l&&!l.contain(c,h)||o.fillRect(c-a[0]/2,h-a[1]/2,a[0],a[1])}this.incremental&&(this._off=u,this.notClear=!0)}},n.prototype.findDataIndex=function(t,i){for(var a=this.shape,o=a.points,l=a.size,u=Math.max(l[0],4),c=Math.max(l[1],4),h=o.length/2-1;h>=0;h--){var f=2*h,p=o[f]-u/2,v=o[f+1]-c/2;if(t>=p&&i>=v&&t<=p+u&&i<=v+c)return h}return-1},n.prototype.contain=function(t,i){var a=this.transformCoordToLocal(t,i);return this.getBoundingRect().contain(t=a[0],i=a[1])?(this.hoverDataIdx=this.findDataIndex(t,i))>=0:(this.hoverDataIdx=-1,!1)},n.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var i=this.shape,a=i.points,o=i.size,l=o[0],u=o[1],c=1/0,h=1/0,f=-1/0,p=-1/0,v=0;v<a.length;){var m=a[v++],y=a[v++];c=Math.min(m,c),f=Math.max(m,f),h=Math.min(y,h),p=Math.max(y,p)}t=this._rect=new Mn(c-l/2,h-u/2,f-c+l,p-h+u)}return t},n}(Fn),v5=function(){function r(){this.group=new hn}return r.prototype.updateData=function(n,t){this._clear();var i=this._create();i.setShape({points:n.getLayout("points")}),this._setCommon(i,n,t)},r.prototype.updateLayout=function(n){var t=n.getLayout("points");this.group.eachChild(function(i){null!=i.startIndex&&(t=new Float32Array(t.buffer,4*i.startIndex*2,2*(i.endIndex-i.startIndex))),i.setShape("points",t),i.reset()})},r.prototype.incrementalPrepareUpdate=function(n){this._clear()},r.prototype.incrementalUpdate=function(n,t,i){var a=this._newAdded[0],o=t.getLayout("points"),l=a&&a.shape.points;if(l&&l.length<2e4){var u=l.length,c=new Float32Array(u+o.length);c.set(l),c.set(o,u),a.endIndex=n.end,a.setShape({points:c})}else{this._newAdded=[];var h=this._create();h.startIndex=n.start,h.endIndex=n.end,h.incremental=!0,h.setShape({points:o}),this._setCommon(h,t,i)}},r.prototype.eachRendered=function(n){this._newAdded[0]&&n(this._newAdded[0])},r.prototype._create=function(){var n=new g5({cursor:"default"});return this.group.add(n),this._newAdded.push(n),n},r.prototype._setCommon=function(n,t,i){var a=t.hostModel;i=i||{};var o=t.getVisual("symbolSize");n.setShape("size",o instanceof Array?o:[o,o]),n.softClipShape=i.clipShape||null,n.symbolProxy=wi(t.getVisual("symbol"),0,0,0,0),n.setColor=n.symbolProxy.setColor;var l=n.shape.size[0]<4;n.useStyle(a.getModel("itemStyle").getItemStyle(l?["color","shadowBlur","shadowColor"]:["color"]));var u=t.getVisual("style"),c=u&&u.fill;c&&n.setColor(c);var h=dn(n);h.seriesIndex=a.seriesIndex,n.on("mousemove",function(f){h.dataIndex=null;var p=n.hoverDataIdx;p>=0&&(h.dataIndex=p+(n.startIndex||0))})},r.prototype.remove=function(){this._clear()},r.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},r}();const m5=v5;var _5=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.render=function(t,i,a){var o=t.getData();this._updateSymbolDraw(o,t).updateData(o,{clipShape:this._getClipShape(t)}),this._finished=!0},n.prototype.incrementalPrepareRender=function(t,i,a){var o=t.getData();this._updateSymbolDraw(o,t).incrementalPrepareUpdate(o),this._finished=!1},n.prototype.incrementalRender=function(t,i,a){this._symbolDraw.incrementalUpdate(t,i.getData(),{clipShape:this._getClipShape(i)}),this._finished=t.end===i.getData().count()},n.prototype.updateTransform=function(t,i,a){var o=t.getData();if(this.group.dirty(),!this._finished||o.count()>1e4)return{update:!0};var l=_g("").reset(t,i,a);l.progress&&l.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout(o)},n.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},n.prototype._getClipShape=function(t){var i=t.coordinateSystem,a=i&&i.getArea&&i.getArea();return t.get("clip",!0)?a:null},n.prototype._updateSymbolDraw=function(t,i){var a=this._symbolDraw,l=i.pipelineContext.large;return(!a||l!==this._isLargeDraw)&&(a&&a.remove(),a=this._symbolDraw=l?new m5:new mg,this._isLargeDraw=l,this.group.removeAll()),this.group.add(a.group),a},n.prototype.remove=function(t,i){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},n.prototype.dispose=function(){},n.type="scatter",n}(Vr);const y5=_5;var C5=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return R(n,r),n.type="grid",n.dependencies=["xAxis","yAxis"],n.layoutMode="box",n.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},n}(Jn);const x5=C5;var mb=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return R(n,r),n.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",_i).models[0]},n.type="cartesian2dAxis",n}(Jn);Qt(mb,Od);var F2={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},T5=Zt({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},F2),_b=Zt({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},F2);const B2={category:T5,value:_b,time:Zt({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},_b),log:Dt({logBase:10},_b)};var z5={value:1,category:1,time:1,log:1};function Rd(r,n,t,i){De(z5,function(a,o){var l=Zt(Zt({},B2[o],!0),i,!0),u=function(c){function h(){var f=null!==c&&c.apply(this,arguments)||this;return f.type=n+"Axis."+o,f}return R(h,c),h.prototype.mergeDefaultAndTheme=function(f,p){var v=Wc(this),m=v?jl(f):{};Zt(f,p.getTheme().get(o+"Axis")),Zt(f,this.getDefaultOption()),f.type=Z2(f),v&&il(f,m,v)},h.prototype.optionUpdated=function(){"category"===this.option.type&&(this.__ordinalMeta=NT.createByAxisModel(this))},h.prototype.getCategories=function(f){var p=this.option;if("category"===p.type)return f?p.data:this.__ordinalMeta.categories},h.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},h.type=n+"Axis."+o,h.defaultOption=l,h}(t);r.registerComponentModel(u)}),r.registerSubTypeDefaulter(n+"Axis",Z2)}function Z2(r){return r.type||(r.data?"category":"value")}var w5=function(){function r(n){this.type="cartesian",this._dimList=[],this._axes={},this.name=n||""}return r.prototype.getAxis=function(n){return this._axes[n]},r.prototype.getAxes=function(){return _t(this._dimList,function(n){return this._axes[n]},this)},r.prototype.getAxesByScale=function(n){return n=n.toLowerCase(),_n(this.getAxes(),function(t){return t.scale.type===n})},r.prototype.addAxis=function(n){var t=n.dim;this._axes[t]=n,this._dimList.push(t)},r}(),yb=["x","y"];function U2(r){return"interval"===r.type||"time"===r.type}var A5=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="cartesian2d",t.dimensions=yb,t}return R(n,r),n.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,i=this.getAxis("y").scale;if(U2(t)&&U2(i)){var a=t.getExtent(),o=i.getExtent(),l=this.dataToPoint([a[0],o[0]]),u=this.dataToPoint([a[1],o[1]]),c=a[1]-a[0],h=o[1]-o[0];if(c&&h){var f=(u[0]-l[0])/c,p=(u[1]-l[1])/h,y=this._transform=[f,0,0,p,l[0]-a[0]*f,l[1]-o[0]*p];this._invTransform=zl([],y)}}},n.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},n.prototype.containPoint=function(t){var i=this.getAxis("x"),a=this.getAxis("y");return i.contain(i.toLocalCoord(t[0]))&&a.contain(a.toLocalCoord(t[1]))},n.prototype.containData=function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},n.prototype.dataToPoint=function(t,i,a){a=a||[];var o=t[0],l=t[1];if(this._transform&&null!=o&&isFinite(o)&&null!=l&&isFinite(l))return Hr(a,t,this._transform);var u=this.getAxis("x"),c=this.getAxis("y");return a[0]=u.toGlobalCoord(u.dataToCoord(o,i)),a[1]=c.toGlobalCoord(c.dataToCoord(l,i)),a},n.prototype.clampData=function(t,i){var a=this.getAxis("x").scale,o=this.getAxis("y").scale,l=a.getExtent(),u=o.getExtent(),c=a.parse(t[0]),h=o.parse(t[1]);return(i=i||[])[0]=Math.min(Math.max(Math.min(l[0],l[1]),c),Math.max(l[0],l[1])),i[1]=Math.min(Math.max(Math.min(u[0],u[1]),h),Math.max(u[0],u[1])),i},n.prototype.pointToData=function(t,i){var a=[];if(this._invTransform)return Hr(a,t,this._invTransform);var o=this.getAxis("x"),l=this.getAxis("y");return a[0]=o.coordToData(o.toLocalCoord(t[0]),i),a[1]=l.coordToData(l.toLocalCoord(t[1]),i),a},n.prototype.getOtherAxis=function(t){return this.getAxis("x"===t.dim?"y":"x")},n.prototype.getArea=function(){var t=this.getAxis("x").getGlobalExtent(),i=this.getAxis("y").getGlobalExtent(),a=Math.min(t[0],t[1]),o=Math.min(i[0],i[1]),l=Math.max(t[0],t[1])-a,u=Math.max(i[0],i[1])-o;return new Mn(a,o,l,u)},n}(w5);const E5=A5;var M5=function(r){function n(t,i,a,o,l){var u=r.call(this,t,i,a)||this;return u.index=0,u.type=o||"value",u.position=l||"bottom",u}return R(n,r),n.prototype.isHorizontal=function(){var t=this.position;return"top"===t||"bottom"===t},n.prototype.getGlobalExtent=function(t){var i=this.getExtent();return i[0]=this.toGlobalCoord(i[0]),i[1]=this.toGlobalCoord(i[1]),t&&i[0]>i[1]&&i.reverse(),i},n.prototype.pointToData=function(t,i){return this.coordToData(this.toLocalCoord(t["x"===this.dim?0:1]),i)},n.prototype.setCategorySortInfo=function(t){if("category"!==this.type)return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},n}(Yo);const O5=M5;function Cb(r,n,t){t=t||{};var i=r.coordinateSystem,a=n.axis,o={},l=a.getAxesOnZeroOf()[0],u=a.position,c=l?"onZero":u,h=a.dim,f=i.getRect(),p=[f.x,f.x+f.width,f.y,f.y+f.height],v={left:0,right:1,top:0,bottom:1,onZero:2},m=n.get("offset")||0,y="x"===h?[p[2]-m,p[3]+m]:[p[0]-m,p[1]+m];if(l){var C=l.toGlobalCoord(l.dataToCoord(0));y[v.onZero]=Math.max(Math.min(C,y[1]),y[0])}o.position=["y"===h?y[v[c]]:p[0],"x"===h?y[v[c]]:p[3]],o.rotation=Math.PI/2*("x"===h?0:1),o.labelDirection=o.tickDirection=o.nameDirection={top:-1,bottom:1,left:-1,right:1}[u],o.labelOffset=l?y[v[u]]-y[v.onZero]:0,n.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),Cr(t.labelInside,n.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var z=n.get(["axisLabel","rotate"]);return o.labelRotate="top"===c?-z:z,o.z2=1,o}function V2(r){return"cartesian2d"===r.get("coordinateSystem")}function H2(r){var n={xAxisModel:null,yAxisModel:null};return De(n,function(t,i){var a=i.replace(/Model$/,""),o=r.getReferringComponents(a,_i).models[0];n[i]=o}),n}var xb=Math.log;function W2(r,n,t){var i=Ku.prototype,a=i.getTicks.call(t),o=i.getTicks.call(t,!0),l=a.length-1,u=i.getInterval.call(t),c=iE(r,n),h=c.extent,f=c.fixMin,p=c.fixMax;if("log"===r.type){var v=xb(r.base);h=[xb(h[0])/v,xb(h[1])/v]}r.setExtent(h[0],h[1]),r.calcNiceExtent({splitNumber:l,fixMin:f,fixMax:p});var m=i.getExtent.call(r);f&&(h[0]=m[0]),p&&(h[1]=m[1]);var y=i.getInterval.call(r),C=h[0],T=h[1];if(f&&p)y=(T-C)/l;else if(f)for(T=h[0]+y*l;T<h[1]&&isFinite(T)&&isFinite(h[1]);)y=BT(y),T=h[0]+y*l;else if(p)for(C=h[1]-y*l;C>h[0]&&isFinite(C)&&isFinite(h[0]);)y=BT(y),C=h[1]-y*l;else{r.getTicks().length-1>l&&(y=BT(y));var E=y*l;(C=li((T=Math.ceil(h[1]/y)*y)-E))<0&&h[0]>=0?(C=0,T=li(E)):T>0&&h[1]<=0&&(T=0,C=-li(E))}var N=(a[0].value-o[0].value)/u,X=(a[l].value-o[l].value)/u;i.setExtent.call(r,C+y*N,T+y*X),i.setInterval.call(r,y),(N||X)&&i.setNiceExtent.call(r,C+y,T-y)}var P5=function(){function r(n,t,i){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=yb,this._initCartesian(n,t,i),this.model=n}return r.prototype.getRect=function(){return this._rect},r.prototype.update=function(n,t){var i=this._axesMap;function a(l){var u,c=gn(l),h=c.length;if(h){for(var f=[],p=h-1;p>=0;p--){var m=l[+c[p]],y=m.model,C=m.scale;FT(C)&&y.get("alignTicks")&&null==y.get("interval")?f.push(m):(th(C,y),FT(C)&&(u=m))}f.length&&(u||th((u=f.pop()).scale,u.model),De(f,function(T){W2(T.scale,T.model,u.scale)}))}}this._updateScale(n,this.model),a(i.x),a(i.y);var o={};De(i.x,function(l){G2(i,"y",l,o)}),De(i.y,function(l){G2(i,"x",l,o)}),this.resize(this.model,t)},r.prototype.resize=function(n,t,i){var a=n.getBoxLayoutParams(),o=!i&&n.get("containLabel"),l=ui(a,{width:t.getWidth(),height:t.getHeight()});this._rect=l;var u=this._axesList;function c(){De(u,function(h){var f=h.isHorizontal(),p=f?[0,l.width]:[0,l.height],v=h.inverse?1:0;h.setExtent(p[v],p[1-v]),function I5(r,n){var t=r.getExtent(),i=t[0]+t[1];r.toGlobalCoord="x"===r.dim?function(a){return a+n}:function(a){return i-a+n},r.toLocalCoord="x"===r.dim?function(a){return a-n}:function(a){return i-a+n}}(h,f?l.x:l.y)})}c(),o&&(De(u,function(h){if(!h.model.get(["axisLabel","inside"])){var f=function R3(r){var t=r.scale;if(r.model.get(["axisLabel","show"])&&!t.isBlank()){var i,a,o=t.getExtent();a=t instanceof ZT?t.count():(i=t.getTicks()).length;var c,l=r.getLabelModel(),u=ug(r),h=1;a>40&&(h=Math.ceil(a/40));for(var f=0;f<a;f+=h){var v=u(i?i[f]:{value:o[0]+f},f),y=N3(l.getTextRect(v),l.get("rotate")||0);c?c.union(y):c=y}return c}}(h);if(f){var p=h.isHorizontal()?"height":"width",v=h.model.get(["axisLabel","margin"]);l[p]-=f[p]+v,"top"===h.position?l.y+=f.height+v:"left"===h.position&&(l.x+=f.width+v)}}}),c()),De(this._coordsList,function(h){h.calcAffineTransform()})},r.prototype.getAxis=function(n,t){var i=this._axesMap[n];if(null!=i)return i[t||0]},r.prototype.getAxes=function(){return this._axesList.slice()},r.prototype.getCartesian=function(n,t){if(null!=n&&null!=t)return this._coordsMap["x"+n+"y"+t];tt(n)&&(t=n.yAxisIndex,n=n.xAxisIndex);for(var a=0,o=this._coordsList;a<o.length;a++)if(o[a].getAxis("x").index===n||o[a].getAxis("y").index===t)return o[a]},r.prototype.getCartesians=function(){return this._coordsList.slice()},r.prototype.convertToPixel=function(n,t,i){var a=this._findConvertTarget(t);return a.cartesian?a.cartesian.dataToPoint(i):a.axis?a.axis.toGlobalCoord(a.axis.dataToCoord(i)):null},r.prototype.convertFromPixel=function(n,t,i){var a=this._findConvertTarget(t);return a.cartesian?a.cartesian.pointToData(i):a.axis?a.axis.coordToData(a.axis.toLocalCoord(i)):null},r.prototype._findConvertTarget=function(n){var u,c,t=n.seriesModel,i=n.xAxisModel||t&&t.getReferringComponents("xAxis",_i).models[0],a=n.yAxisModel||t&&t.getReferringComponents("yAxis",_i).models[0],o=n.gridModel;return t?Ye(this._coordsList,u=t.coordinateSystem)<0&&(u=null):i&&a?u=this.getCartesian(i.componentIndex,a.componentIndex):i?c=this.getAxis("x",i.componentIndex):a?c=this.getAxis("y",a.componentIndex):o&&o.coordinateSystem===this&&(u=this._coordsList[0]),{cartesian:u,axis:c}},r.prototype.containPoint=function(n){var t=this._coordsList[0];if(t)return t.containPoint(n)},r.prototype._initCartesian=function(n,t,i){var a=this,o=this,l={left:!1,right:!1,top:!1,bottom:!1},u={x:{},y:{}},c={x:0,y:0};if(t.eachComponent("xAxis",h("x"),this),t.eachComponent("yAxis",h("y"),this),!c.x||!c.y)return this._axesMap={},void(this._axesList=[]);function h(f){return function(p,v){if(Tb(p,n)){var m=p.get("position");"x"===f?"top"!==m&&"bottom"!==m&&(m=l.bottom?"top":"bottom"):"left"!==m&&"right"!==m&&(m=l.left?"right":"left"),l[m]=!0;var y=new O5(f,lg(p),[0,0],p.get("type"),m);y.onBand="category"===y.type&&p.get("boundaryGap"),y.inverse=p.get("inverse"),p.axis=y,y.model=p,y.grid=o,y.index=v,o._axesList.push(y),u[f][v]=y,c[f]++}}}this._axesMap=u,De(u.x,function(f,p){De(u.y,function(v,m){var y="x"+p+"y"+m,C=new E5(y);C.master=a,C.model=n,a._coordsMap[y]=C,a._coordsList.push(C),C.addAxis(f),C.addAxis(v)})})},r.prototype._updateScale=function(n,t){function i(a,o){De(S0(a,o.dim),function(l){o.scale.unionExtentFromData(a,l)})}De(this._axesList,function(a){if(a.scale.setExtent(1/0,-1/0),"category"===a.type){var o=a.model.get("categorySortInfo");a.scale.setSortInfo(o)}}),n.eachSeries(function(a){if(V2(a)){var o=H2(a),l=o.xAxisModel,u=o.yAxisModel;if(!Tb(l,t)||!Tb(u,t))return;var c=this.getCartesian(l.componentIndex,u.componentIndex),h=a.getData(),f=c.getAxis("x"),p=c.getAxis("y");i(h,f),i(h,p)}},this)},r.prototype.getTooltipAxes=function(n){var t=[],i=[];return De(this.getCartesians(),function(a){var o=null!=n&&"auto"!==n?a.getAxis(n):a.getBaseAxis(),l=a.getOtherAxis(o);Ye(t,o)<0&&t.push(o),Ye(i,l)<0&&i.push(l)}),{baseAxes:t,otherAxes:i}},r.create=function(n,t){var i=[];return n.eachComponent("grid",function(a,o){var l=new r(a,n,t);l.name="grid_"+o,l.resize(a,t,!0),a.coordinateSystem=l,i.push(l)}),n.eachSeries(function(a){if(V2(a)){var o=H2(a),l=o.xAxisModel,u=o.yAxisModel,c=l.getCoordSysModel();a.coordinateSystem=c.coordinateSystem.getCartesian(l.componentIndex,u.componentIndex)}}),i},r.dimensions=yb,r}();function Tb(r,n){return r.getCoordSysModel()===n}function G2(r,n,t,i){t.getAxesOnZeroOf=function(){return o?[o]:[]};var o,a=r[n],l=t.model,u=l.get(["axisLine","onZero"]),c=l.get(["axisLine","onZeroAxisIndex"]);if(u){if(null!=c)J2(a[c])&&(o=a[c]);else for(var h in a)if(a.hasOwnProperty(h)&&J2(a[h])&&!i[f(a[h])]){o=a[h];break}o&&(i[f(o)]=!0)}function f(p){return p.dim+"_"+p.index}}function J2(r){return r&&"category"!==r.type&&"time"!==r.type&&function L3(r){var n=r.scale.getExtent(),t=n[0],i=n[1];return!(t>0&&i>0||t<0&&i<0)}(r)}const k5=P5;var ec=Math.PI,ch=function(){function r(n,t){this.group=new hn,this.opt=t,this.axisModel=n,Dt(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var i=new hn({x:t.position[0],y:t.position[1],rotation:t.rotation});i.updateTransform(),this._transformGroup=i}return r.prototype.hasBuilder=function(n){return!!Y2[n]},r.prototype.add=function(n){Y2[n](this.opt,this.axisModel,this.group,this._transformGroup)},r.prototype.getGroup=function(){return this.group},r.innerTextLayout=function(n,t,i){var o,l,a=Ef(t-n);return yu(a)?(l=i>0?"top":"bottom",o="center"):yu(a-ec)?(l=i>0?"bottom":"top",o="center"):(l="middle",o=a>0&&a<ec?i>0?"right":"left":i>0?"left":"right"),{rotation:a,textAlign:o,textVerticalAlign:l}},r.makeAxisEventDataBase=function(n){var t={componentType:n.mainType,componentIndex:n.componentIndex};return t[n.mainType+"Index"]=n.componentIndex,t},r.isLabelSilent=function(n){var t=n.get("tooltip");return n.get("silent")||!(n.get("triggerEvent")||t&&t.show)},r}(),Y2={axisLine:function(r,n,t,i){var a=n.get(["axisLine","show"]);if("auto"===a&&r.handleAutoShown&&(a=r.handleAutoShown("axisLine")),a){var o=n.axis.getExtent(),l=i.transform,u=[o[0],0],c=[o[1],0];l&&(Hr(u,u,l),Hr(c,c,l));var h=Ge({lineCap:"round"},n.getModel(["axisLine","lineStyle"]).getLineStyle()),f=new Gi({subPixelOptimize:!0,shape:{x1:u[0],y1:u[1],x2:c[0],y2:c[1]},style:h,strokeContainThreshold:r.strokeContainThreshold||5,silent:!0,z2:1});f.anid="line",t.add(f);var p=n.get(["axisLine","symbol"]);if(null!=p){var v=n.get(["axisLine","symbolSize"]);Qe(p)&&(p=[p,p]),(Qe(v)||Ve(v))&&(v=[v,v]);var m=wd(n.get(["axisLine","symbolOffset"])||0,v),y=v[0],C=v[1];De([{rotate:r.rotation+Math.PI/2,offset:m[0],r:0},{rotate:r.rotation-Math.PI/2,offset:m[1],r:Math.sqrt((u[0]-c[0])*(u[0]-c[0])+(u[1]-c[1])*(u[1]-c[1]))}],function(T,z){if("none"!==p[z]&&null!=p[z]){var E=wi(p[z],-y/2,-C/2,y,C,h.stroke,!0),N=T.r+T.offset;E.attr({rotation:T.rotate,x:u[0]+N*Math.cos(r.rotation),y:u[1]-N*Math.sin(r.rotation),silent:!0,z2:11}),t.add(E)}})}}},axisTickLabel:function(r,n,t,i){var a=function N5(r,n,t,i){var a=t.axis,o=t.getModel("axisTick"),l=o.get("show");if("auto"===l&&i.handleAutoShown&&(l=i.handleAutoShown("axisTick")),l&&!a.scale.isBlank()){for(var u=o.getModel("lineStyle"),c=i.tickDirection*o.get("length"),f=K2(a.getTicksCoords(),n.transform,c,Dt(u.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}),"ticks"),p=0;p<f.length;p++)r.add(f[p]);return f}}(t,i,n,r),o=function B5(r,n,t,i){var a=t.axis;if(Cr(i.axisLabelShow,t.get(["axisLabel","show"]))&&!a.scale.isBlank()){var l=t.getModel("axisLabel"),u=l.get("margin"),c=a.getViewLabels(),h=(Cr(i.labelRotate,l.get("rotate"))||0)*ec/180,f=ch.innerTextLayout(i.rotation,h,i.labelDirection),p=t.getCategories&&t.getCategories(!0),v=[],m=ch.isLabelSilent(t),y=t.get("triggerEvent");return De(c,function(C,T){var z="ordinal"===a.scale.type?a.scale.getRawOrdinalNumber(C.tickValue):C.tickValue,E=C.formattedLabel,N=C.rawLabel,X=l;if(p&&p[z]){var ve=p[z];tt(ve)&&ve.textStyle&&(X=new Or(ve.textStyle,l,t.ecModel))}var ce=X.getTextColor()||t.get(["axisLine","lineStyle","color"]),_e=a.dataToCoord(z),ze=new Gn({x:_e,y:i.labelOffset+i.labelDirection*u,rotation:f.rotation,silent:m,z2:10+(C.level||0),style:$r(X,{text:E,align:X.getShallow("align",!0)||f.textAlign,verticalAlign:X.getShallow("verticalAlign",!0)||X.getShallow("baseline",!0)||f.textVerticalAlign,fill:Pe(ce)?ce("category"===a.type?N:"value"===a.type?z+"":z,T):ce})});if(ze.anid="label_"+z,y){var Ee=ch.makeAxisEventDataBase(t);Ee.targetType="axisLabel",Ee.value=N,Ee.tickIndex=T,"category"===a.type&&(Ee.dataIndex=z),dn(ze).eventData=Ee}n.add(ze),ze.updateTransform(),v.push(ze),r.add(ze),ze.decomposeTransform()}),v}}(t,i,n,r);(function R5(r,n,t){if(!aE(r.axis)){var i=r.get(["axisLabel","showMinLabel"]),a=r.get(["axisLabel","showMaxLabel"]),o=(n=n||[])[0],l=n[1],u=n[n.length-1],c=n[n.length-2],h=(t=t||[])[0],f=t[1],p=t[t.length-1],v=t[t.length-2];!1===i?(Qo(o),Qo(h)):Q2(o,l)&&(i?(Qo(l),Qo(f)):(Qo(o),Qo(h))),!1===a?(Qo(u),Qo(p)):Q2(c,u)&&(a?(Qo(c),Qo(v)):(Qo(u),Qo(p)))}})(n,o,a),function F5(r,n,t,i){var a=t.axis,o=t.getModel("minorTick");if(o.get("show")&&!a.scale.isBlank()){var l=a.getMinorTicksCoords();if(l.length)for(var u=o.getModel("lineStyle"),c=i*o.get("length"),h=Dt(u.getLineStyle(),Dt(t.getModel("axisTick").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})),f=0;f<l.length;f++)for(var p=K2(l[f],n.transform,c,h,"minorticks_"+f),v=0;v<p.length;v++)r.add(p[v])}}(t,i,n,r.tickDirection),n.get(["axisLabel","hideOverlap"])&&AE(zE(_t(o,function(u){return{label:u,priority:u.z2,defaultAttr:{ignore:u.ignore}}})))},axisName:function(r,n,t,i){var a=Cr(r.axisName,n.get("name"));if(a){var v,y,o=n.get("nameLocation"),l=r.nameDirection,u=n.getModel("nameTextStyle"),c=n.get("nameGap")||0,h=n.axis.getExtent(),f=h[0]>h[1]?-1:1,p=["start"===o?h[0]-f*c:"end"===o?h[1]+f*c:(h[0]+h[1])/2,q2(o)?r.labelOffset+l*c:0],m=n.get("nameRotate");null!=m&&(m=m*ec/180),q2(o)?v=ch.innerTextLayout(r.rotation,null!=m?m:r.rotation,l):(v=function L5(r,n,t,i){var o,l,a=Ef(t-r),u=i[0]>i[1],c="start"===n&&!u||"start"!==n&&u;return yu(a-ec/2)?(l=c?"bottom":"top",o="center"):yu(a-1.5*ec)?(l=c?"top":"bottom",o="center"):(l="middle",o=a<1.5*ec&&a>ec/2?c?"left":"right":c?"right":"left"),{rotation:a,textAlign:o,textVerticalAlign:l}}(r.rotation,o,m||0,h),null!=(y=r.axisNameAvailableWidth)&&(y=Math.abs(y/Math.sin(v.rotation)),!isFinite(y)&&(y=null)));var C=u.getFont(),T=n.get("nameTruncate",!0)||{},z=T.ellipsis,E=Cr(r.nameTruncateMaxWidth,T.maxWidth,y),N=new Gn({x:p[0],y:p[1],rotation:v.rotation,silent:ch.isLabelSilent(n),style:$r(u,{text:a,font:C,overflow:"truncate",width:E,ellipsis:z,fill:u.getTextColor()||n.get(["axisLine","lineStyle","color"]),align:u.get("align")||v.textAlign,verticalAlign:u.get("verticalAlign")||v.textVerticalAlign}),z2:1});if(Td({el:N,componentModel:n,itemName:a}),N.__fullText=a,N.anid="name",n.get("triggerEvent")){var X=ch.makeAxisEventDataBase(n);X.targetType="axisName",X.name=a,dn(N).eventData=X}i.add(N),N.updateTransform(),t.add(N),N.decomposeTransform()}}};function Qo(r){r&&(r.ignore=!0)}function Q2(r,n){var t=r&&r.getBoundingRect().clone(),i=n&&n.getBoundingRect().clone();if(t&&i){var a=mu([]);return Ws(a,a,-r.rotation),t.applyTransform(Mo([],a,r.getLocalTransform())),i.applyTransform(Mo([],a,n.getLocalTransform())),t.intersect(i)}}function q2(r){return"middle"===r||"center"===r}function K2(r,n,t,i,a){for(var o=[],l=[],u=[],c=0;c<r.length;c++){var h=r[c].coord;l[0]=h,l[1]=0,u[0]=h,u[1]=t,n&&(Hr(l,l,n),Hr(u,u,n));var f=new Gi({subPixelOptimize:!0,shape:{x1:l[0],y1:l[1],x2:u[0],y2:u[1]},style:i,z2:2,autoBatch:!0,silent:!0});f.anid=a+"_"+r[c].tickValue,o.push(f)}return o}const nu=ch;function bb(r,n){return"all"===r||we(r)&&Ye(r,n)>=0||r===n}function G5(r){var n=Sb(r);if(n){var t=n.axisPointerModel,i=n.axis.scale,a=t.option,o=t.get("status"),l=t.get("value");null!=l&&(l=i.parse(l));var u=zb(t);null==o&&(a.status=u?"show":"hide");var c=i.getExtent().slice();c[0]>c[1]&&c.reverse(),(null==l||l>c[1])&&(l=c[1]),l<c[0]&&(l=c[0]),a.value=l,u&&(a.status=n.axis.scale.isBlank()?"hide":"show")}}function Sb(r){var n=(r.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return n&&n.axesInfo[xg(r)]}function zb(r){return!!r.get(["handle","show"])}function xg(r){return r.type+"||"+r.id}var $2={},Y5=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.render=function(t,i,a,o){this.axisPointerClass&&G5(t),r.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,a,!0)},n.prototype.updateAxisPointer=function(t,i,a,o){this._doUpdateAxisPointerClass(t,a,!1)},n.prototype.remove=function(t,i){var a=this._axisPointer;a&&a.remove(i)},n.prototype.dispose=function(t,i){this._disposeAxisPointer(i),r.prototype.dispose.apply(this,arguments)},n.prototype._doUpdateAxisPointerClass=function(t,i,a){var o=n.getAxisPointerClass(this.axisPointerClass);if(o){var l=function J5(r){var n=Sb(r);return n&&n.axisPointerModel}(t);l?(this._axisPointer||(this._axisPointer=new o)).render(t,l,i,a):this._disposeAxisPointer(i)}},n.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},n.registerAxisPointerClass=function(t,i){$2[t]=i},n.getAxisPointerClass=function(t){return t&&$2[t]},n.type="axis",n}(oi);const hh=Y5;var wb=Xn();function j2(r,n,t,i){var a=t.axis;if(!a.scale.isBlank()){var o=t.getModel("splitArea"),l=o.getModel("areaStyle"),u=l.get("color"),c=i.coordinateSystem.getRect(),h=a.getTicksCoords({tickModel:o,clamp:!0});if(h.length){var f=u.length,p=wb(r).splitAreaColors,v=Kt(),m=0;if(p)for(var y=0;y<h.length;y++){var C=p.get(h[y].tickValue);if(null!=C){m=(C+(f-1)*y)%f;break}}var T=a.toGlobalCoord(h[0].coord),z=l.getAreaStyle();for(u=we(u)?u:[u],y=1;y<h.length;y++){var E=a.toGlobalCoord(h[y].coord),N=void 0,X=void 0,ve=void 0,ce=void 0;a.isHorizontal()?(X=c.y,ce=c.height,T=(N=T)+(ve=E-N)):(N=c.x,ve=c.width,T=(X=T)+(ce=E-X));var _e=h[y-1].tickValue;null!=_e&&v.set(_e,m),n.add(new Qn({anid:null!=_e?"area_"+_e:null,shape:{x:N,y:X,width:ve,height:ce},style:Dt({fill:u[m]},z),autoBatch:!0,silent:!0})),m=(m+1)%f}wb(r).splitAreaColors=v}}}function X2(r){wb(r).splitAreaColors=null}var Q5=["axisLine","axisTickLabel","axisName"],q5=["splitArea","splitLine","minorSplitLine"],eM=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.axisPointerClass="CartesianAxisPointer",t}return R(n,r),n.prototype.render=function(t,i,a,o){this.group.removeAll();var l=this._axisGroup;if(this._axisGroup=new hn,this.group.add(this._axisGroup),t.get("show")){var u=t.getCoordSysModel(),c=Cb(u,t),h=new nu(t,Ge({handleAutoShown:function(p){for(var v=u.coordinateSystem.getCartesians(),m=0;m<v.length;m++)if(FT(v[m].getOtherAxis(t.axis).scale))return!0;return!1}},c));De(Q5,h.add,h),this._axisGroup.add(h.getGroup()),De(q5,function(p){t.get([p,"show"])&&K5[p](this,this._axisGroup,t,u)},this),o&&"changeAxisOrder"===o.type&&o.isInitSort||Gp(l,this._axisGroup,t),r.prototype.render.call(this,t,i,a,o)}},n.prototype.remove=function(){X2(this)},n.type="cartesianAxis",n}(hh),K5={splitLine:function(r,n,t,i){var a=t.axis;if(!a.scale.isBlank()){var o=t.getModel("splitLine"),l=o.getModel("lineStyle"),u=l.get("color");u=we(u)?u:[u];for(var c=i.coordinateSystem.getRect(),h=a.isHorizontal(),f=0,p=a.getTicksCoords({tickModel:o}),v=[],m=[],y=l.getLineStyle(),C=0;C<p.length;C++){var T=a.toGlobalCoord(p[C].coord);h?(v[0]=T,v[1]=c.y,m[0]=T,m[1]=c.y+c.height):(v[0]=c.x,v[1]=T,m[0]=c.x+c.width,m[1]=T);var z=f++%u.length;n.add(new Gi({anid:null!=p[C].tickValue?"line_"+p[C].tickValue:null,subPixelOptimize:!0,autoBatch:!0,shape:{x1:v[0],y1:v[1],x2:m[0],y2:m[1]},style:Dt({stroke:u[z]},y),silent:!0}))}}},minorSplitLine:function(r,n,t,i){var a=t.axis,l=t.getModel("minorSplitLine").getModel("lineStyle"),u=i.coordinateSystem.getRect(),c=a.isHorizontal(),h=a.getMinorTicksCoords();if(h.length)for(var f=[],p=[],v=l.getLineStyle(),m=0;m<h.length;m++)for(var y=0;y<h[m].length;y++){var C=a.toGlobalCoord(h[m][y].coord);c?(f[0]=C,f[1]=u.y,p[0]=C,p[1]=u.y+u.height):(f[0]=u.x,f[1]=C,p[0]=u.x+u.width,p[1]=C),n.add(new Gi({anid:"minor_line_"+h[m][y].tickValue,subPixelOptimize:!0,autoBatch:!0,shape:{x1:f[0],y1:f[1],x2:p[0],y2:p[1]},style:v,silent:!0}))}},splitArea:function(r,n,t,i){j2(r,n,t,i)}},tM=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.type="xAxis",n}(eM),$5=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=tM.type,t}return R(n,r),n.type="yAxis",n}(eM),j5=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="grid",t}return R(n,r),n.prototype.render=function(t,i){this.group.removeAll(),t.get("show")&&this.group.add(new Qn({shape:t.coordinateSystem.getRect(),style:Dt({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},n.type="grid",n}(oi),nM={offset:0};function rM(r){r.registerComponentView(j5),r.registerComponentModel(x5),r.registerCoordinateSystem("cartesian2d",k5),Rd(r,"x",mb,nM),Rd(r,"y",mb,nM),r.registerComponentView(tM),r.registerComponentView($5),r.registerPreprocessor(function(n){n.xAxis&&n.yAxis&&!n.grid&&(n.grid={})})}function eZ(r){r.eachSeriesByType("radar",function(n){var t=n.getData(),i=[],a=n.coordinateSystem;if(a){var o=a.getIndicatorAxes();De(o,function(l,u){t.each(t.mapDimension(o[u].dim),function(c,h){i[h]=i[h]||[];var f=a.dataToPoint(c,u);i[h][u]=iM(f)?f:aM(a)})}),t.each(function(l){var u=yn(i[l],function(c){return iM(c)})||aM(a);i[l].push(u.slice()),t.setItemLayout(l,i[l])})}})}function iM(r){return!isNaN(r[0])&&!isNaN(r[1])}function aM(r){return[r.cx,r.cy]}function tZ(r){var n=r.polar;if(n){we(n)||(n=[n]);var t=[];De(n,function(i,a){i.indicator?(i.type&&!i.shape&&(i.shape=i.type),r.radar=r.radar||[],we(r.radar)||(r.radar=[r.radar]),r.radar.push(i)):t.push(i)}),r.polar=t}De(r.series,function(i){i&&"radar"===i.type&&i.polarIndex&&(i.radarIndex=i.polarIndex)})}var nZ=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.render=function(t,i,a){var o=t.coordinateSystem,l=this.group,u=t.getData(),c=this._data;function h(v,m){var y=v.getItemVisual(m,"symbol")||"circle";if("none"!==y){var C=$p(v.getItemVisual(m,"symbolSize")),T=wi(y,-1,-1,2,2),z=v.getItemVisual(m,"symbolRotate")||0;return T.attr({style:{strokeNoScale:!0},z2:100,scaleX:C[0]/2,scaleY:C[1]/2,rotation:z*Math.PI/180||0}),T}}function f(v,m,y,C,T,z){y.removeAll();for(var E=0;E<m.length-1;E++){var N=h(C,T);N&&(N.__dimIdx=E,v[E]?(N.setPosition(v[E]),fe[z?"initProps":"updateProps"](N,{x:m[E][0],y:m[E][1]},t,T)):N.setPosition(m[E]),y.add(N))}}function p(v){return _t(v,function(m){return[o.cx,o.cy]})}u.diff(c).add(function(v){var m=u.getItemLayout(v);if(m){var y=new Pa,C=new Ia,T={shape:{points:m}};y.shape.points=p(m),C.shape.points=p(m),Kr(y,T,t,v),Kr(C,T,t,v);var z=new hn,E=new hn;z.add(C),z.add(y),z.add(E),f(C.shape.points,m,E,u,v,!0),u.setItemGraphicEl(v,z)}}).update(function(v,m){var y=c.getItemGraphicEl(m),C=y.childAt(0),T=y.childAt(1),z=y.childAt(2),E={shape:{points:u.getItemLayout(v)}};!E.shape.points||(f(C.shape.points,E.shape.points,z,u,v,!1),bo(T),bo(C),Kn(C,E,t),Kn(T,E,t),u.setItemGraphicEl(v,y))}).remove(function(v){l.remove(c.getItemGraphicEl(v))}).execute(),u.eachItemGraphicEl(function(v,m){var y=u.getItemModel(m),C=v.childAt(0),T=v.childAt(1),z=v.childAt(2),E=u.getItemVisual(m,"style"),N=E.fill;l.add(v),C.useStyle(Dt(y.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:N})),Zi(C,y,"lineStyle"),Zi(T,y,"areaStyle");var X=y.getModel("areaStyle"),ve=X.isEmpty()&&X.parentModel.isEmpty();T.ignore=ve,De(["emphasis","select","blur"],function(ze){var Ee=y.getModel([ze,"areaStyle"]),Le=Ee.isEmpty()&&Ee.parentModel.isEmpty();T.ensureState(ze).ignore=Le&&ve}),T.useStyle(Dt(X.getAreaStyle(),{fill:N,opacity:.7,decal:E.decal}));var ce=y.getModel("emphasis"),_e=ce.getModel("itemStyle").getItemStyle();z.eachChild(function(ze){if(ze instanceof ki){var Ee=ze.style;ze.useStyle(Ge({image:Ee.image,x:Ee.x,y:Ee.y,width:Ee.width,height:Ee.height},E))}else ze.useStyle(E),ze.setColor(N),ze.style.strokeNoScale=!0;ze.ensureState("emphasis").style=Nt(_e);var ke=u.getStore().get(u.getDimensionIndex(ze.__dimIdx),m);(null==ke||isNaN(ke))&&(ke=""),Xi(ze,Li(y),{labelFetcher:u.hostModel,labelDataIndex:m,labelDimIndex:ze.__dimIdx,defaultText:ke,inheritColor:N,defaultOpacity:E.opacity})}),di(v,ce.get("focus"),ce.get("blurScope"),ce.get("disabled"))}),this._data=u},n.prototype.remove=function(){this.group.removeAll(),this._data=null},n.type="radar",n}(Vr);const rZ=nZ;var iZ=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.hasSymbolVisual=!0,t}return R(n,r),n.prototype.init=function(t){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new Cg(qe(this.getData,this),qe(this.getRawData,this))},n.prototype.getInitialData=function(t,i){return Ld(this,{generateCoord:"indicator_",generateCoordCount:1/0})},n.prototype.formatTooltip=function(t,i,a){var o=this.getData(),u=this.coordinateSystem.getIndicatorAxes(),c=this.getData().getName(t),h=""===c?this.name:c,f=Rw(this,t);return Wi("section",{header:h,sortBlocks:!0,blocks:_t(u,function(p){var v=o.get(o.mapDimension(p.dim),t);return Wi("nameValue",{markerType:"subItem",markerColor:f,name:p.name,value:v,sortParam:v})})})},n.prototype.getTooltipPosition=function(t){if(null!=t)for(var i=this.getData(),a=this.coordinateSystem,o=i.getValues(_t(a.dimensions,function(h){return i.mapDimension(h)}),t),l=0,u=o.length;l<u;l++)if(!isNaN(o[l])){var c=a.getIndicatorAxes();return a.coordToPoint(c[l].dataToCoord(o[l]),l)}},n.type="series.radar",n.dependencies=["radar"],n.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},n}(Xr);const aZ=iZ;var Tg=B2.value;function B0(r,n){return Dt({show:n},r)}var oZ=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.optionUpdated=function(){var t=this.get("boundaryGap"),i=this.get("splitNumber"),a=this.get("scale"),o=this.get("axisLine"),l=this.get("axisTick"),u=this.get("axisLabel"),c=this.get("axisName"),h=this.get(["axisName","show"]),f=this.get(["axisName","formatter"]),p=this.get("axisNameGap"),v=this.get("triggerEvent"),m=_t(this.get("indicator")||[],function(y){null!=y.max&&y.max>0&&!y.min?y.min=0:null!=y.min&&y.min<0&&!y.max&&(y.max=0);var C=c;null!=y.color&&(C=Dt({color:y.color},c));var T=Zt(Nt(y),{boundaryGap:t,splitNumber:i,scale:a,axisLine:o,axisTick:l,axisLabel:u,name:y.text,showName:h,nameLocation:"end",nameGap:p,nameTextStyle:C,triggerEvent:v},!1);if(h||(T.name=""),Qe(f)){var z=T.name;T.name=f.replace("{value}",null!=z?z:"")}else Pe(f)&&(T.name=f(T.name,T));var E=new Or(T,null,this.ecModel);return Qt(E,Od.prototype),E.mainType="radar",E.componentIndex=this.componentIndex,E},this);this._indicatorModels=m},n.prototype.getIndicatorModels=function(){return this._indicatorModels},n.type="radar",n.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:Zt({lineStyle:{color:"#bbb"}},Tg.axisLine),axisLabel:B0(Tg.axisLabel,!1),axisTick:B0(Tg.axisTick,!1),splitLine:B0(Tg.splitLine,!0),splitArea:B0(Tg.splitArea,!0),indicator:[]},n}(Jn);const sZ=oZ;var lZ=["axisLine","axisTickLabel","axisName"],uZ=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.render=function(t,i,a){this.group.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},n.prototype._buildAxes=function(t){var i=t.coordinateSystem;De(_t(i.getIndicatorAxes(),function(l){var u=l.model.get("showName")?l.name:"";return new nu(l.model,{axisName:u,position:[i.cx,i.cy],rotation:l.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})}),function(l){De(lZ,l.add,l),this.group.add(l.getGroup())},this)},n.prototype._buildSplitLineAndArea=function(t){var i=t.coordinateSystem,a=i.getIndicatorAxes();if(a.length){var o=t.get("shape"),l=t.getModel("splitLine"),u=t.getModel("splitArea"),c=l.getModel("lineStyle"),h=u.getModel("areaStyle"),f=l.get("show"),p=u.get("show"),v=c.get("color"),m=h.get("color"),y=we(v)?v:[v],C=we(m)?m:[m],T=[],z=[];if("circle"===o)for(var N=a[0].getTicksCoords(),X=i.cx,ve=i.cy,ce=0;ce<N.length;ce++)f&&T[E(T,y,ce)].push(new Cs({shape:{cx:X,cy:ve,r:N[ce].coord}})),p&&ce<N.length-1&&z[E(z,C,ce)].push(new Vp({shape:{cx:X,cy:ve,r0:N[ce].coord,r:N[ce+1].coord}}));else{var ze,Ee=_t(a,function(nt,lt){var St=nt.getTicksCoords();return ze=null==ze?St.length-1:Math.min(St.length-1,ze),_t(St,function(mt){return i.coordToPoint(mt.coord,lt)})}),Le=[];for(ce=0;ce<=ze;ce++){for(var ke=[],Ue=0;Ue<a.length;Ue++)ke.push(Ee[Ue][ce]);ke[0]&&ke.push(ke[0].slice()),f&&T[E(T,y,ce)].push(new Ia({shape:{points:ke}})),p&&Le&&z[E(z,C,ce-1)].push(new Pa({shape:{points:ke.concat(Le)}})),Le=ke.slice().reverse()}}var He=c.getLineStyle(),Ke=h.getAreaStyle();De(z,function(nt,lt){this.group.add(zo(nt,{style:Dt({stroke:"none",fill:C[lt%C.length]},Ke),silent:!0}))},this),De(T,function(nt,lt){this.group.add(zo(nt,{style:Dt({fill:"none",stroke:y[lt%y.length]},He),silent:!0}))},this)}function E(nt,lt,St){var mt=St%lt.length;return nt[mt]=nt[mt]||[],mt}},n.type="radar",n}(oi);const cZ=uZ;var hZ=function(r){function n(t,i,a){var o=r.call(this,t,i,a)||this;return o.type="value",o.angle=0,o.name="",o}return R(n,r),n}(Yo);const dZ=hZ;var fZ=function(){function r(n,t,i){this.dimensions=[],this._model=n,this._indicatorAxes=_t(n.getIndicatorModels(),function(a,o){var l="indicator_"+o,u=new dZ(l,new Ku);return u.name=a.get("name"),u.model=a,a.axis=u,this.dimensions.push(l),u},this),this.resize(n,i)}return r.prototype.getIndicatorAxes=function(){return this._indicatorAxes},r.prototype.dataToPoint=function(n,t){return this.coordToPoint(this._indicatorAxes[t].dataToCoord(n),t)},r.prototype.coordToPoint=function(n,t){var a=this._indicatorAxes[t].angle;return[this.cx+n*Math.cos(a),this.cy-n*Math.sin(a)]},r.prototype.pointToData=function(n){var t=n[0]-this.cx,i=n[1]-this.cy,a=Math.sqrt(t*t+i*i);t/=a,i/=a;for(var u,o=Math.atan2(-i,t),l=1/0,c=-1,h=0;h<this._indicatorAxes.length;h++){var f=this._indicatorAxes[h],p=Math.abs(o-f.angle);p<l&&(u=f,c=h,l=p)}return[c,+(u&&u.coordToData(a))]},r.prototype.resize=function(n,t){var i=n.get("center"),a=t.getWidth(),o=t.getHeight(),l=Math.min(a,o)/2;this.cx=Ht(i[0],a),this.cy=Ht(i[1],o),this.startAngle=n.get("startAngle")*Math.PI/180;var u=n.get("radius");(Qe(u)||Ve(u))&&(u=[0,u]),this.r0=Ht(u[0],l),this.r=Ht(u[1],l),De(this._indicatorAxes,function(c,h){c.setExtent(this.r0,this.r);var f=this.startAngle+h*Math.PI*2/this._indicatorAxes.length;f=Math.atan2(Math.sin(f),Math.cos(f)),c.angle=f},this)},r.prototype.update=function(n,t){var i=this._indicatorAxes,a=this._model;De(i,function(u){u.scale.setExtent(1/0,-1/0)}),n.eachSeriesByType("radar",function(u,c){if("radar"===u.get("coordinateSystem")&&n.getComponent("radar",u.get("radarIndex"))===a){var h=u.getData();De(i,function(f){f.scale.unionExtentFromData(h,h.mapDimension(f.dim))})}},this);var o=a.get("splitNumber"),l=new Ku;l.setExtent(0,o),l.setInterval(1),De(i,function(u,c){W2(u.scale,u.model,l)})},r.prototype.convertToPixel=function(n,t,i){return console.warn("Not implemented."),null},r.prototype.convertFromPixel=function(n,t,i){return console.warn("Not implemented."),null},r.prototype.containPoint=function(n){return console.warn("Not implemented."),!1},r.create=function(n,t){var i=[];return n.eachComponent("radar",function(a){var o=new r(a,n,t);i.push(o),a.coordinateSystem=o}),n.eachSeriesByType("radar",function(a){"radar"===a.get("coordinateSystem")&&(a.coordinateSystem=i[a.get("radarIndex")||0])}),i},r.dimensions=[],r}();const pZ=fZ;function gZ(r){r.registerCoordinateSystem("radar",pZ),r.registerComponentModel(sZ),r.registerComponentView(cZ),r.registerVisual({seriesType:"radar",reset:function(n){var t=n.getData();t.each(function(i){t.setItemVisual(i,"legendIcon","roundRect")}),t.setVisual("legendIcon","roundRect")}})}var oM="\0_ec_interaction_mutex";function sM(r,n){return!!Db(r)[n]}function Db(r){return r[oM]||(r[oM]={})}Ss({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},kr);var yZ=function(r){function n(t){var i=r.call(this)||this;i._zr=t;var a=qe(i._mousedownHandler,i),o=qe(i._mousemoveHandler,i),l=qe(i._mouseupHandler,i),u=qe(i._mousewheelHandler,i),c=qe(i._pinchHandler,i);return i.enable=function(h,f){this.disable(),this._opt=Dt(Nt(f)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==h&&(h=!0),(!0===h||"move"===h||"pan"===h)&&(t.on("mousedown",a),t.on("mousemove",o),t.on("mouseup",l)),(!0===h||"scale"===h||"zoom"===h)&&(t.on("mousewheel",u),t.on("pinch",c))},i.disable=function(){t.off("mousedown",a),t.off("mousemove",o),t.off("mouseup",l),t.off("mousewheel",u),t.off("pinch",c)},i}return R(n,r),n.prototype.isDragging=function(){return this._dragging},n.prototype.isPinching=function(){return this._pinching},n.prototype.setPointerChecker=function(t){this.pointerChecker=t},n.prototype.dispose=function(){this.disable()},n.prototype._mousedownHandler=function(t){if(!(na(t)||t.target&&t.target.draggable)){var i=t.offsetX,a=t.offsetY;this.pointerChecker&&this.pointerChecker(t,i,a)&&(this._x=i,this._y=a,this._dragging=!0)}},n.prototype._mousemoveHandler=function(t){if(this._dragging&&Z0("moveOnMouseMove",t,this._opt)&&"pinch"!==t.gestureEvent&&!sM(this._zr,"globalPan")){var i=t.offsetX,a=t.offsetY,o=this._x,l=this._y,u=i-o,c=a-l;this._x=i,this._y=a,this._opt.preventDefaultMouseMove&&Zr(t.event),lM(this,"pan","moveOnMouseMove",t,{dx:u,dy:c,oldX:o,oldY:l,newX:i,newY:a,isAvailableBehavior:null})}},n.prototype._mouseupHandler=function(t){na(t)||(this._dragging=!1)},n.prototype._mousewheelHandler=function(t){var i=Z0("zoomOnMouseWheel",t,this._opt),a=Z0("moveOnMouseWheel",t,this._opt),o=t.wheelDelta,l=Math.abs(o),u=t.offsetX,c=t.offsetY;if(0!==o&&(i||a)){if(i){var h=l>3?1.4:l>1?1.2:1.1;Ab(this,"zoom","zoomOnMouseWheel",t,{scale:o>0?h:1/h,originX:u,originY:c,isAvailableBehavior:null})}if(a){var p=Math.abs(o);Ab(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:(o>0?1:-1)*(p>3?.4:p>1?.15:.05),originX:u,originY:c,isAvailableBehavior:null})}}},n.prototype._pinchHandler=function(t){sM(this._zr,"globalPan")||Ab(this,"zoom",null,t,{scale:t.pinchScale>1?1.1:1/1.1,originX:t.pinchX,originY:t.pinchY,isAvailableBehavior:null})},n}(Oi);function Ab(r,n,t,i,a){r.pointerChecker&&r.pointerChecker(i,a.originX,a.originY)&&(Zr(i.event),lM(r,n,t,i,a))}function lM(r,n,t,i,a){a.isAvailableBehavior=qe(Z0,null,t,i),r.trigger(n,a)}function Z0(r,n,t){var i=t[r];return!r||i&&(!Qe(i)||n.event[i+"Key"])}const bg=yZ;function Eb(r,n,t){var i=r.target;i.x+=n,i.y+=t,i.dirty()}function Mb(r,n,t,i){var a=r.target,o=r.zoomLimit,l=r.zoom=r.zoom||1;if(l*=n,o){var u=o.min||0;l=Math.max(Math.min(o.max||1/0,l),u)}var h=l/r.zoom;r.zoom=l,a.x-=(t-a.x)*(h-1),a.y-=(i-a.y)*(h-1),a.scaleX*=h,a.scaleY*=h,a.dirty()}var CZ={axisPointer:1,tooltip:1,brush:1};function U0(r,n,t){var i=n.getComponentByElement(r.topTarget),a=i&&i.coordinateSystem;return i&&i!==t&&!CZ.hasOwnProperty(i.mainType)&&a&&a.model!==t}function uM(r){Qe(r)&&(r=(new DOMParser).parseFromString(r,"text/xml"));var t=r;for(9===t.nodeType&&(t=t.firstChild);"svg"!==t.nodeName.toLowerCase()||1!==t.nodeType;)t=t.nextSibling;return t}var Ob,V0={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},cM=gn(V0),H0={"alignment-baseline":"textBaseline","stop-color":"stopColor"},hM=gn(H0),xZ=function(){function r(){this._defs={},this._root=null}return r.prototype.parse=function(n,t){t=t||{};var i=uM(n);this._defsUsePending=[];var a=new hn;this._root=a;var f,p,o=[],l=i.getAttribute("viewBox")||"",u=parseFloat(i.getAttribute("width")||t.width),c=parseFloat(i.getAttribute("height")||t.height);isNaN(u)&&(u=null),isNaN(c)&&(c=null),Do(i,a,null,!0,!1);for(var h=i.firstChild;h;)this._parseNode(h,a,o,null,!1,!1),h=h.nextSibling;if(function SZ(r,n){for(var t=0;t<n.length;t++){var i=n[t];i[0].style[i[1]]=r[i[2]]}}(this._defs,this._defsUsePending),this._defsUsePending=[],l){var v=W0(l);v.length>=4&&(f={x:parseFloat(v[0]||0),y:parseFloat(v[1]||0),width:parseFloat(v[2]),height:parseFloat(v[3])})}if(f&&null!=u&&null!=c&&(p=yM(f,{x:0,y:0,width:u,height:c}),!t.ignoreViewBox)){var m=a;(a=new hn).add(m),m.scaleX=m.scaleY=p.scale,m.x=p.x,m.y=p.y}return!t.ignoreRootClip&&null!=u&&null!=c&&a.setClipPath(new Qn({shape:{x:0,y:0,width:u,height:c}})),{root:a,width:u,height:c,viewBoxRect:f,viewBoxTransform:p,named:o}},r.prototype._parseNode=function(n,t,i,a,o,l){var c,u=n.nodeName.toLowerCase(),h=a;if("defs"===u&&(o=!0),"text"===u&&(l=!0),"defs"===u||"switch"===u)c=t;else{if(!o){var f=Ob[u];if(f&&qt(Ob,u)){c=f.call(this,n,t);var p=n.getAttribute("name");if(p){var v={name:p,namedFrom:null,svgNodeTagLower:u,el:c};i.push(v),"g"===u&&(h=v)}else a&&i.push({name:a.name,namedFrom:a,svgNodeTagLower:u,el:c});t.add(c)}}var m=dM[u];if(m&&qt(dM,u)){var y=m.call(this,n),C=n.getAttribute("id");C&&(this._defs[C]=y)}}if(c&&c.isGroup)for(var T=n.firstChild;T;)1===T.nodeType?this._parseNode(T,c,i,h,o,l):3===T.nodeType&&l&&this._parseText(T,c),T=T.nextSibling},r.prototype._parseText=function(n,t){var i=new Dc({style:{text:n.textContent},silent:!0,x:this._textX||0,y:this._textY||0});qo(t,i),Do(n,i,this._defsUsePending,!1,!1),function TZ(r,n){var t=n.__selfStyle;if(t){var i=t.textBaseline,a=i;i&&"auto"!==i&&"baseline"!==i?"before-edge"===i||"text-before-edge"===i?a="top":"after-edge"===i||"text-after-edge"===i?a="bottom":("central"===i||"mathematical"===i)&&(a="middle"):a="alphabetic",r.style.textBaseline=a}var o=n.__inheritedStyle;if(o){var l=o.textAlign,u=l;l&&("middle"===l&&(u="center"),r.style.textAlign=u)}}(i,t);var a=i.style,o=a.fontSize;o&&o<9&&(a.fontSize=9,i.scaleX*=o/9,i.scaleY*=o/9);var l=(a.fontSize||a.fontFamily)&&[a.fontStyle,a.fontWeight,(a.fontSize||12)+"px",a.fontFamily||"sans-serif"].join(" ");a.font=l;var u=i.getBoundingRect();return this._textX+=u.width,t.add(i),i},r.internalField=void(Ob={g:function(n,t){var i=new hn;return qo(t,i),Do(n,i,this._defsUsePending,!1,!1),i},rect:function(n,t){var i=new Qn;return qo(t,i),Do(n,i,this._defsUsePending,!1,!1),i.setShape({x:parseFloat(n.getAttribute("x")||"0"),y:parseFloat(n.getAttribute("y")||"0"),width:parseFloat(n.getAttribute("width")||"0"),height:parseFloat(n.getAttribute("height")||"0")}),i.silent=!0,i},circle:function(n,t){var i=new Cs;return qo(t,i),Do(n,i,this._defsUsePending,!1,!1),i.setShape({cx:parseFloat(n.getAttribute("cx")||"0"),cy:parseFloat(n.getAttribute("cy")||"0"),r:parseFloat(n.getAttribute("r")||"0")}),i.silent=!0,i},line:function(n,t){var i=new Gi;return qo(t,i),Do(n,i,this._defsUsePending,!1,!1),i.setShape({x1:parseFloat(n.getAttribute("x1")||"0"),y1:parseFloat(n.getAttribute("y1")||"0"),x2:parseFloat(n.getAttribute("x2")||"0"),y2:parseFloat(n.getAttribute("y2")||"0")}),i.silent=!0,i},ellipse:function(n,t){var i=new N_;return qo(t,i),Do(n,i,this._defsUsePending,!1,!1),i.setShape({cx:parseFloat(n.getAttribute("cx")||"0"),cy:parseFloat(n.getAttribute("cy")||"0"),rx:parseFloat(n.getAttribute("rx")||"0"),ry:parseFloat(n.getAttribute("ry")||"0")}),i.silent=!0,i},polygon:function(n,t){var a,i=n.getAttribute("points");i&&(a=gM(i));var o=new Pa({shape:{points:a||[]},silent:!0});return qo(t,o),Do(n,o,this._defsUsePending,!1,!1),o},polyline:function(n,t){var a,i=n.getAttribute("points");i&&(a=gM(i));var o=new Ia({shape:{points:a||[]},silent:!0});return qo(t,o),Do(n,o,this._defsUsePending,!1,!1),o},image:function(n,t){var i=new ki;return qo(t,i),Do(n,i,this._defsUsePending,!1,!1),i.setStyle({image:n.getAttribute("xlink:href")||n.getAttribute("href"),x:+n.getAttribute("x"),y:+n.getAttribute("y"),width:+n.getAttribute("width"),height:+n.getAttribute("height")}),i.silent=!0,i},text:function(n,t){var i=n.getAttribute("x")||"0",a=n.getAttribute("y")||"0",o=n.getAttribute("dx")||"0",l=n.getAttribute("dy")||"0";this._textX=parseFloat(i)+parseFloat(o),this._textY=parseFloat(a)+parseFloat(l);var u=new hn;return qo(t,u),Do(n,u,this._defsUsePending,!1,!0),u},tspan:function(n,t){var i=n.getAttribute("x"),a=n.getAttribute("y");null!=i&&(this._textX=parseFloat(i)),null!=a&&(this._textY=parseFloat(a));var o=n.getAttribute("dx")||"0",l=n.getAttribute("dy")||"0",u=new hn;return qo(t,u),Do(n,u,this._defsUsePending,!1,!0),this._textX+=parseFloat(o),this._textY+=parseFloat(l),u},path:function(n,t){var a=qw(n.getAttribute("d")||"");return qo(t,a),Do(n,a,this._defsUsePending,!1,!1),a.silent=!0,a}}),r}(),dM={lineargradient:function(r){var n=parseInt(r.getAttribute("x1")||"0",10),t=parseInt(r.getAttribute("y1")||"0",10),i=parseInt(r.getAttribute("x2")||"10",10),a=parseInt(r.getAttribute("y2")||"0",10),o=new Cd(n,t,i,a);return fM(r,o),pM(r,o),o},radialgradient:function(r){var n=parseInt(r.getAttribute("cx")||"0",10),t=parseInt(r.getAttribute("cy")||"0",10),i=parseInt(r.getAttribute("r")||"0",10),a=new eT(n,t,i);return fM(r,a),pM(r,a),a}};function fM(r,n){"userSpaceOnUse"===r.getAttribute("gradientUnits")&&(n.global=!0)}function pM(r,n){for(var t=r.firstChild;t;){if(1===t.nodeType&&"stop"===t.nodeName.toLocaleLowerCase()){var a,i=t.getAttribute("offset");a=i&&i.indexOf("%")>0?parseInt(i,10)/100:i?parseFloat(i):0;var o={};_M(t,o,o);var l=o.stopColor||t.getAttribute("stop-color")||"#000000";n.colorStops.push({offset:a,color:l})}t=t.nextSibling}}function qo(r,n){r&&r.__inheritedStyle&&(n.__inheritedStyle||(n.__inheritedStyle={}),Dt(n.__inheritedStyle,r.__inheritedStyle))}function gM(r){for(var n=W0(r),t=[],i=0;i<n.length;i+=2){var a=parseFloat(n[i]),o=parseFloat(n[i+1]);t.push([a,o])}return t}function Do(r,n,t,i,a){var o=n,l=o.__inheritedStyle=o.__inheritedStyle||{},u={};1===r.nodeType&&(function DZ(r,n){var t=r.getAttribute("transform");if(t){t=t.replace(/,/g," ");var i=[],a=null;t.replace(wZ,function(p,v,m){return i.push(v,m),""});for(var o=i.length-1;o>0;o-=2){var u=i[o-1],c=W0(i[o]);switch(a=a||[1,0,0,1,0,0],u){case"translate":Co(a,a,[parseFloat(c[0]),parseFloat(c[1]||"0")]);break;case"scale":Fh(a,a,[parseFloat(c[0]),parseFloat(c[1]||c[0])]);break;case"rotate":Ws(a,a,-parseFloat(c[0])*Pb);break;case"skewX":Mo(a,[1,0,Math.tan(parseFloat(c[0])*Pb),1,0,0],a);break;case"skewY":Mo(a,[1,Math.tan(parseFloat(c[0])*Pb),0,1,0,0],a);break;case"matrix":a[0]=parseFloat(c[0]),a[1]=parseFloat(c[1]),a[2]=parseFloat(c[2]),a[3]=parseFloat(c[3]),a[4]=parseFloat(c[4]),a[5]=parseFloat(c[5])}}n.setLocalTransform(a)}}(r,n),_M(r,l,u),i||function AZ(r,n,t){for(var i=0;i<cM.length;i++)null!=(o=r.getAttribute(a=cM[i]))&&(n[V0[a]]=o);for(i=0;i<hM.length;i++){var a,o;null!=(o=r.getAttribute(a=hM[i]))&&(t[H0[a]]=o)}}(r,l,u)),o.style=o.style||{},null!=l.fill&&(o.style.fill=vM(o,"fill",l.fill,t)),null!=l.stroke&&(o.style.stroke=vM(o,"stroke",l.stroke,t)),De(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(c){null!=l[c]&&(o.style[c]=parseFloat(l[c]))}),De(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(c){null!=l[c]&&(o.style[c]=l[c])}),a&&(o.__selfStyle=u),l.lineDash&&(o.style.lineDash=_t(W0(l.lineDash),function(c){return parseFloat(c)})),("hidden"===l.visibility||"collapse"===l.visibility)&&(o.invisible=!0),"none"===l.display&&(o.ignore=!0)}var bZ=/^url\(\s*#(.*?)\)/;function vM(r,n,t,i){var a=t&&t.match(bZ);if(!a)return"none"===t&&(t=null),t;var o=Ir(a[1]);i.push([r,n,o])}var zZ=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function W0(r){return r.match(zZ)||[]}var wZ=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,Pb=Math.PI/180,mM=/([^\s:;]+)\s*:\s*([^:;]+)/g;function _M(r,n,t){var i=r.getAttribute("style");if(i){mM.lastIndex=0;for(var a;null!=(a=mM.exec(i));){var o=a[1],l=qt(V0,o)?V0[o]:null;l&&(n[l]=a[2]);var u=qt(H0,o)?H0[o]:null;u&&(t[u]=a[2])}}}function yM(r,n){var a=Math.min(n.width/r.width,n.height/r.height);return{scale:a,x:-(r.x+r.width/2)*a+(n.x+n.width/2),y:-(r.y+r.height/2)*a+(n.y+n.height/2)}}for(var MZ=Kt(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),OZ=function(){function r(n,t){this.type="geoSVG",this._usedGraphicMap=Kt(),this._freedGraphics=[],this._mapName=n,this._parsedXML=uM(t)}return r.prototype.load=function(){var n=this._firstGraphic;if(!n){n=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(n),this._boundingRect=this._firstGraphic.boundingRect.clone();var t=function IZ(r){var n=[],t=Kt();return De(r,function(i){if(null==i.namedFrom){var a=new Y3(i.name,i.el);n.push(a),t.set(i.name,a)}}),{regions:n,regionsMap:t}}(n.named),a=t.regionsMap;this._regions=t.regions,this._regionsMap=a}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},r.prototype._buildGraphic=function(n){var t,i;try{t=n&&function EZ(r,n){return(new xZ).parse(r,n)}(n,{ignoreViewBox:!0,ignoreRootClip:!0})||{},ar(null!=(i=t.root))}catch(T){throw new Error("Invalid svg format\n"+T.message)}var a=new hn;a.add(i),a.isGeoSVGGraphicRoot=!0;var o=t.width,l=t.height,u=t.viewBoxRect,c=this._boundingRect;if(!c){var h=void 0,f=void 0,p=void 0,v=void 0;if(null!=o?(h=0,p=o):u&&(h=u.x,p=u.width),null!=l?(f=0,v=l):u&&(f=u.y,v=u.height),null==h||null==f){var m=i.getBoundingRect();null==h&&(h=m.x,p=m.width),null==f&&(f=m.y,v=m.height)}c=this._boundingRect=new Mn(h,f,p,v)}if(u){var y=yM(u,c);i.scaleX=i.scaleY=y.scale,i.x=y.x,i.y=y.y}a.setClipPath(new Qn({shape:c.plain()}));var C=[];return De(t.named,function(T){null!=MZ.get(T.svgNodeTagLower)&&(C.push(T),function PZ(r){r.silent=!1,r.isGroup&&r.traverse(function(n){n.silent=!1})}(T.el))}),{root:a,boundingRect:c,named:C}},r.prototype.useGraphic=function(n){var t=this._usedGraphicMap,i=t.get(n);return i||(i=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),t.set(n,i),i)},r.prototype.freeGraphic=function(n){var t=this._usedGraphicMap,i=t.get(n);i&&(t.removeKey(n),this._freedGraphics.push(i))},r}(),Ib=[126,25],dh=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],fh=0;fh<dh.length;fh++)for(var Nd=0;Nd<dh[fh].length;Nd++)dh[fh][Nd][0]/=10.5,dh[fh][Nd][1]/=-14,dh[fh][Nd][0]+=Ib[0],dh[fh][Nd][1]+=Ib[1];var LZ={\u5357\u6d77\u8bf8\u5c9b:[32,80],\u5e7f\u4e1c:[0,-10],\u9999\u6e2f:[10,5],\u6fb3\u95e8:[-10,10],\u5929\u6d25:[5,5]},NZ=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],ZZ=function(){function r(n,t,i){this.type="geoJSON",this._parsedMap=Kt(),this._mapName=n,this._specialAreas=i,this._geoJSON=function VZ(r){return Qe(r)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(r):new Function("return ("+r+");")():r}(t)}return r.prototype.load=function(n,t){var i=this._parsedMap.get(t=t||"name");if(!i){var a=this._parseToRegions(t);i=this._parsedMap.set(t,{regions:a,boundingRect:UZ(a)})}var o=Kt(),l=[];return De(i.regions,function(u){var c=u.name;n&&qt(n,c)&&(u=u.cloneShallow(c=n[c])),l.push(u),o.set(c,u)}),{regions:l,boundingRect:i.boundingRect||new Mn(0,0,0,0),regionsMap:o}},r.prototype._parseToRegions=function(n){var a,t=this._mapName,i=this._geoJSON;try{a=i?qT(i,n):[]}catch(o){throw new Error("Invalid geoJson format\n"+o.message)}return function kZ(r,n){if("china"===r){for(var t=0;t<n.length;t++)if("\u5357\u6d77\u8bf8\u5c9b"===n[t].name)return;n.push(new hE("\u5357\u6d77\u8bf8\u5c9b",_t(dh,function(i){return{type:"polygon",exterior:i}}),Ib))}}(t,a),De(a,function(o){var l=o.name;(function RZ(r,n){if("china"===r){var t=LZ[n.name];if(t){var i=n.getCenter();i[0]+=t[0]/10.5,i[1]+=-t[1]/14,n.setCenter(i)}}})(t,o),function FZ(r,n){"china"===r&&"\u53f0\u6e7e"===n.name&&n.geometries.push({type:"polygon",exterior:NZ[0]})}(t,o);var u=this._specialAreas&&this._specialAreas[l];u&&o.transformTo(u.left,u.top,u.width,u.height)},this),a},r.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},r}();function UZ(r){for(var n,t=0;t<r.length;t++){var i=r[t].getBoundingRect();(n=n||i.clone()).union(i)}return n}var Sg=Kt();const ru_getGeoResource=function(r){return Sg.get(r)},ru_load=function(r,n,t){var i=Sg.get(r);if(i)return i.load(n,t)};var kb=["rect","circle","line","ellipse","polygon","polyline","path"],HZ=Kt(kb),WZ=Kt(kb.concat(["g"])),GZ=Kt(kb.concat(["g"])),xM=Xn();function G0(r){var n=r.getItemStyle(),t=r.get("areaColor");return null!=t&&(n.fill=t),n}function TM(r){var n=r.style;n&&(n.stroke=n.stroke||n.fill,n.fill=null)}var JZ=function(){function r(n){var t=new hn;this.uid=Eu("ec_map_draw"),this._controller=new bg(n.getZr()),this._controllerHost={target:t},this.group=t,t.add(this._regionsGroup=new hn),t.add(this._svgGroup=new hn)}return r.prototype.draw=function(n,t,i,a,o){var l="geo"===n.mainType,u=n.getData&&n.getData();l&&t.eachComponent({mainType:"series",subType:"map"},function(z){!u&&z.getHostGeoModel()===n&&(u=z.getData())});var c=n.coordinateSystem,h=this._regionsGroup,f=this.group,p=c.getTransformInfo(),v=p.raw,m=p.roam;!h.childAt(0)||o?(f.x=m.x,f.y=m.y,f.scaleX=m.scaleX,f.scaleY=m.scaleY,f.dirty()):Kn(f,m,n);var C=u&&u.getVisual("visualMeta")&&u.getVisual("visualMeta").length>0,T={api:i,geo:c,mapOrGeoModel:n,data:u,isVisualEncodedByVisualMap:C,isGeo:l,transformInfoRaw:v};"geoJSON"===c.resourceType?this._buildGeoJSON(T):"geoSVG"===c.resourceType&&this._buildSVG(T),this._updateController(n,t,i),this._updateMapSelectHandler(n,h,i,a)},r.prototype._buildGeoJSON=function(n){var t=this._regionsGroupByName=Kt(),i=Kt(),a=this._regionsGroup,o=n.transformInfoRaw,l=n.mapOrGeoModel,u=n.data,c=n.geo.projection,h=c&&c.stream;function f(m,y){return y&&(m=y(m)),m&&[m[0]*o.scaleX+o.x,m[1]*o.scaleY+o.y]}function p(m){for(var y=[],C=!h&&c&&c.project,T=0;T<m.length;++T){var z=f(m[T],C);z&&y.push(z)}return y}function v(m){return{shape:{points:p(m)}}}a.removeAll(),De(n.geo.regions,function(m){var y=m.name,C=t.get(y),T=i.get(y)||{},z=T.dataIdx,E=T.regionModel;C||(C=t.set(y,new hn),a.add(C),z=u?u.indexOfName(y):null,E=n.isGeo?l.getRegionModel(y):u?u.getItemModel(z):null,i.set(y,{dataIdx:z,regionModel:E}));var N=[],X=[];De(m.geometries,function(_e){if("polygon"===_e.type){var ze=[_e.exterior].concat(_e.interiors||[]);h&&(ze=AM(ze,h)),De(ze,function(Le){N.push(new Pa(v(Le)))})}else{var Ee=_e.points;h&&(Ee=AM(Ee,h,!0)),De(Ee,function(Le){X.push(new Ia(v(Le)))})}});var ve=f(m.getCenter(),c&&c.project);function ce(_e,ze){if(_e.length){var Ee=new Z_({culling:!0,segmentIgnoreThreshold:1,shape:{paths:_e}});C.add(Ee),bM(n,Ee,z,E),SM(n,Ee,y,E,l,z,ve),ze&&(TM(Ee),De(Ee.states,TM))}}ce(N),ce(X,!0)}),t.each(function(m,y){var C=i.get(y),z=C.regionModel;zM(n,m,y,z,l,C.dataIdx),wM(n,m,y,z,l),DM(n,m,y,z,l)},this)},r.prototype._buildSVG=function(n){var t=n.geo.map,i=n.transformInfoRaw;this._svgGroup.x=i.x,this._svgGroup.y=i.y,this._svgGroup.scaleX=i.scaleX,this._svgGroup.scaleY=i.scaleY,this._svgResourceChanged(t)&&(this._freeSVG(),this._useSVG(t));var a=this._svgDispatcherMap=Kt(),o=!1;De(this._svgGraphicRecord.named,function(l){var u=l.name,c=n.mapOrGeoModel,h=n.data,f=l.svgNodeTagLower,p=l.el,v=h?h.indexOfName(u):null,m=c.getRegionModel(u);null!=HZ.get(f)&&p instanceof $a&&bM(n,p,v,m),p instanceof $a&&(p.culling=!0),p.z2EmphasisLift=0,l.namedFrom||(null!=GZ.get(f)&&SM(n,p,u,m,c,v,null),zM(n,p,u,m,c,v),wM(n,p,u,m,c),null==WZ.get(f))||("self"===DM(n,p,u,m,c)&&(o=!0),(a.get(u)||a.set(u,[])).push(p))},this),this._enableBlurEntireSVG(o,n)},r.prototype._enableBlurEntireSVG=function(n,t){if(n&&t.isGeo){var a=t.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle().opacity;this._svgGraphicRecord.root.traverse(function(o){if(!o.isGroup){Wl(o);var l=o.ensureState("blur").style||{};null==l.opacity&&null!=a&&(l.opacity=a),o.ensureState("emphasis")}})}},r.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},r.prototype.findHighDownDispatchers=function(n,t){if(null==n)return[];var i=t.coordinateSystem;if("geoJSON"===i.resourceType){var a=this._regionsGroupByName;if(a){var o=a.get(n);return o?[o]:[]}}else if("geoSVG"===i.resourceType)return this._svgDispatcherMap&&this._svgDispatcherMap.get(n)||[]},r.prototype._svgResourceChanged=function(n){return this._svgMapName!==n},r.prototype._useSVG=function(n){var t=ru_getGeoResource(n);if(t&&"geoSVG"===t.type){var i=t.useGraphic(this.uid);this._svgGroup.add(i.root),this._svgGraphicRecord=i,this._svgMapName=n}},r.prototype._freeSVG=function(){var n=this._svgMapName;if(null!=n){var t=ru_getGeoResource(n);t&&"geoSVG"===t.type&&t.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},r.prototype._updateController=function(n,t,i){var a=n.coordinateSystem,o=this._controller,l=this._controllerHost;l.zoomLimit=n.get("scaleLimit"),l.zoom=a.getZoom(),o.enable(n.get("roam")||!1);var u=n.mainType;function c(){var h={type:"geoRoam",componentType:u};return h[u+"Id"]=n.id,h}o.off("pan").on("pan",function(h){this._mouseDownFlag=!1,Eb(l,h.dx,h.dy),i.dispatchAction(Ge(c(),{dx:h.dx,dy:h.dy,animation:{duration:0}}))},this),o.off("zoom").on("zoom",function(h){this._mouseDownFlag=!1,Mb(l,h.scale,h.originX,h.originY),i.dispatchAction(Ge(c(),{zoom:h.scale,originX:h.originX,originY:h.originY,animation:{duration:0}}))},this),o.setPointerChecker(function(h,f,p){return a.containPoint([f,p])&&!U0(h,i,n)})},r.prototype.resetForLabelLayout=function(){this.group.traverse(function(n){var t=n.getTextContent();t&&(t.ignore=xM(t).ignore)})},r.prototype._updateMapSelectHandler=function(n,t,i,a){var o=this;t.off("mousedown"),t.off("click"),n.get("selectedMode")&&(t.on("mousedown",function(){o._mouseDownFlag=!0}),t.on("click",function(l){!o._mouseDownFlag||(o._mouseDownFlag=!1)}))},r}();function bM(r,n,t,i){var a=i.getModel("itemStyle"),o=i.getModel(["emphasis","itemStyle"]),l=i.getModel(["blur","itemStyle"]),u=i.getModel(["select","itemStyle"]),c=G0(a),h=G0(o),f=G0(u),p=G0(l),v=r.data;if(v){var m=v.getItemVisual(t,"style"),y=v.getItemVisual(t,"decal");r.isVisualEncodedByVisualMap&&m.fill&&(c.fill=m.fill),y&&(c.decal=Xp(y,r.api))}n.setStyle(c),n.style.strokeNoScale=!0,n.ensureState("emphasis").style=h,n.ensureState("select").style=f,n.ensureState("blur").style=p,Wl(n)}function SM(r,n,t,i,a,o,l){var u=r.data,c=r.isGeo,h=u&&isNaN(u.get(u.mapDimension("value"),o)),f=u&&u.getItemLayout(o);if(c||h||f&&f.showLabel){var p=c?t:o,v=void 0;(!u||o>=0)&&(v=a);var m=l?{normal:{align:"center",verticalAlign:"middle"}}:null;Xi(n,Li(i),{labelFetcher:v,labelDataIndex:p,defaultText:t},m);var y=n.getTextContent();if(y&&(xM(y).ignore=y.ignore,n.textConfig&&l)){var C=n.getBoundingRect().clone();n.textConfig.layoutRect=C,n.textConfig.position=[(l[0]-C.x)/C.width*100+"%",(l[1]-C.y)/C.height*100+"%"]}n.disableLabelAnimation=!0}else n.removeTextContent(),n.removeTextConfig(),n.disableLabelAnimation=null}function zM(r,n,t,i,a,o){r.data?r.data.setItemGraphicEl(o,n):dn(n).eventData={componentType:"geo",componentIndex:a.componentIndex,geoIndex:a.componentIndex,name:t,region:i&&i.option||{}}}function wM(r,n,t,i,a){r.data||Td({el:n,componentModel:a,itemName:t,itemTooltipOption:i.get("tooltip")})}function DM(r,n,t,i,a){n.highDownSilentOnTouch=!!a.get("selectedMode");var o=i.getModel("emphasis"),l=o.get("focus");return di(n,l,o.get("blurScope"),o.get("disabled")),r.isGeo&&function RC(r,n,t){var i=dn(r);i.componentMainType=n.mainType,i.componentIndex=n.componentIndex,i.componentHighDownName=t}(n,a,t),l}function AM(r,n,t){var a,i=[];function o(){a=[]}function l(){a.length&&(i.push(a),a=[])}var u=n({polygonStart:o,polygonEnd:l,lineStart:o,lineEnd:l,point:function(c,h){isFinite(c)&&isFinite(h)&&a.push([c,h])},sphere:function(){}});return!t&&u.polygonStart(),De(r,function(c){u.lineStart();for(var h=0;h<c.length;h++)u.point(c[h][0],c[h][1]);u.lineEnd()}),!t&&u.polygonEnd(),i}const EM=JZ;var YZ=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.render=function(t,i,a,o){if(!o||"mapToggleSelect"!==o.type||o.from!==this.uid){var l=this.group;if(l.removeAll(),!t.getHostGeoModel()){if(this._mapDraw&&o&&"geoRoam"===o.type&&this._mapDraw.resetForLabelLayout(),o&&"geoRoam"===o.type&&"series"===o.componentType&&o.seriesId===t.id)(u=this._mapDraw)&&l.add(u.group);else if(t.needsDrawMap){var u=this._mapDraw||new EM(a);l.add(u.group),u.draw(t,i,a,this,o),this._mapDraw=u}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&i.getComponent("legend")&&this._renderSymbols(t,i,a)}}},n.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},n.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},n.prototype._renderSymbols=function(t,i,a){var o=t.originalData,l=this.group;o.each(o.mapDimension("value"),function(u,c){if(!isNaN(u)){var h=o.getItemLayout(c);if(h&&h.point){var f=h.point,p=h.offset,v=new Cs({style:{fill:t.getData().getVisual("style").fill},shape:{cx:f[0]+9*p,cy:f[1],r:3},silent:!0,z2:8+(p?0:11)});if(!p){var m=t.mainSeries.getData(),y=o.getName(c),C=m.indexOfName(y),T=o.getItemModel(c),z=T.getModel("label"),E=m.getItemGraphicEl(C);Xi(v,Li(T),{labelFetcher:{getFormattedLabel:function(N,X){return t.getFormattedLabel(C,X)}},defaultText:y}),v.disableLabelAnimation=!0,z.get("position")||v.setTextConfig({position:"bottom"}),E.onHoverStateChange=function(N){nd(v,N)}}l.add(v)}}})},n.type="map",n}(Vr);const QZ=YZ;var qZ=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.needsDrawMap=!1,t.seriesGroup=[],t.getTooltipPosition=function(i){if(null!=i){var a=this.getData().getName(i),o=this.coordinateSystem,l=o.getRegion(a);return l&&o.dataToPoint(l.getCenter())}},t}return R(n,r),n.prototype.getInitialData=function(t){for(var i=Ld(this,{coordDimensions:["value"],encodeDefaulter:yt(h_,this)}),a=Kt(),o=[],l=0,u=i.count();l<u;l++){var c=i.getName(l);a.set(c,!0)}return De(ru_load(this.getMapType(),this.option.nameMap,this.option.nameProperty).regions,function(f){var p=f.name;a.get(p)||o.push(p)}),i.appendValues([],o),i},n.prototype.getHostGeoModel=function(){var t=this.option.geoIndex;return null!=t?this.ecModel.getComponent("geo",t):null},n.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},n.prototype.getRawValue=function(t){var i=this.getData();return i.get(i.mapDimension("value"),t)},n.prototype.getRegionModel=function(t){var i=this.getData();return i.getItemModel(i.indexOfName(t))},n.prototype.formatTooltip=function(t,i,a){for(var o=this.getData(),l=this.getRawValue(t),u=o.getName(t),c=this.seriesGroup,h=[],f=0;f<c.length;f++){var p=c[f].originalData.indexOfName(u),v=o.mapDimension("value");isNaN(c[f].originalData.get(v,p))||h.push(c[f].name)}return Wi("section",{header:h.join(", "),noHeader:!h.length,blocks:[Wi("nameValue",{name:u,value:l})]})},n.prototype.setZoom=function(t){this.option.zoom=t},n.prototype.setCenter=function(t){this.option.center=t},n.prototype.getLegendIcon=function(t){var i=t.icon||"roundRect",a=wi(i,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill);return a.setStyle(t.itemStyle),a.style.stroke="none",i.indexOf("empty")>-1&&(a.style.stroke=a.style.fill,a.style.fill="#fff",a.style.lineWidth=2),a},n.type="series.map",n.dependencies=["geo"],n.layoutMode="box",n.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},n}(Xr);const KZ=qZ;function jZ(r){var n={};r.eachSeriesByType("map",function(t){var i=t.getHostGeoModel(),a=i?"o"+i.id:"i"+t.getMapType();(n[a]=n[a]||[]).push(t)}),De(n,function(t,i){for(var a=function $Z(r,n){var t={};return De(r,function(i){i.each(i.mapDimension("value"),function(a,o){var l="ec-"+i.getName(o);t[l]=t[l]||[],isNaN(a)||t[l].push(a)})}),r[0].map(r[0].mapDimension("value"),function(i,a){for(var o="ec-"+r[0].getName(a),l=0,u=1/0,c=-1/0,h=t[o].length,f=0;f<h;f++)u=Math.min(u,t[o][f]),c=Math.max(c,t[o][f]),l+=t[o][f];return 0===h?NaN:"min"===n?u:"max"===n?c:"average"===n?l/h:l})}(_t(t,function(l){return l.getData()}),t[0].get("mapValueCalculation")),o=0;o<t.length;o++)t[o].originalData=t[o].getData();for(o=0;o<t.length;o++)t[o].seriesGroup=t,t[o].needsDrawMap=0===o&&!t[o].getHostGeoModel(),t[o].setData(a.cloneShallow()),t[o].mainSeries=t[0]})}function XZ(r){var n={};r.eachSeriesByType("map",function(t){var i=t.getMapType();if(!t.getHostGeoModel()&&!n[i]){var a={};De(t.seriesGroup,function(l){var u=l.coordinateSystem,c=l.originalData;l.get("showLegendSymbol")&&r.getComponent("legend")&&c.each(c.mapDimension("value"),function(h,f){var p=c.getName(f),v=u.getRegion(p);if(v&&!isNaN(h)){var m=a[p]||0,y=u.dataToPoint(v.getCenter());a[p]=m+1,c.setItemLayout(f,{point:y,offset:m})}})});var o=t.getData();o.each(function(l){var u=o.getName(l),c=o.getItemLayout(l)||{};c.showLabel=!a[u],o.setItemLayout(l,c)}),n[i]=!0}})}var MM=Hr,eU=function(r){function n(t){var i=r.call(this)||this;return i.type="view",i.dimensions=["x","y"],i._roamTransformable=new ds,i._rawTransformable=new ds,i.name=t,i}return R(n,r),n.prototype.setBoundingRect=function(t,i,a,o){return this._rect=new Mn(t,i,a,o),this._rect},n.prototype.getBoundingRect=function(){return this._rect},n.prototype.setViewRect=function(t,i,a,o){this._transformTo(t,i,a,o),this._viewRect=new Mn(t,i,a,o)},n.prototype._transformTo=function(t,i,a,o){var l=this.getBoundingRect(),u=this._rawTransformable;u.transform=l.calculateTransform(new Mn(t,i,a,o));var c=u.parent;u.parent=null,u.decomposeTransform(),u.parent=c,this._updateTransform()},n.prototype.setCenter=function(t){!t||(this._center=t,this._updateCenterAndZoom())},n.prototype.setZoom=function(t){t=t||1;var i=this.zoomLimit;i&&(null!=i.max&&(t=Math.min(i.max,t)),null!=i.min&&(t=Math.max(i.min,t))),this._zoom=t,this._updateCenterAndZoom()},n.prototype.getDefaultCenter=function(){var t=this.getBoundingRect();return[t.x+t.width/2,t.y+t.height/2]},n.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},n.prototype.getZoom=function(){return this._zoom||1},n.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},n.prototype._updateCenterAndZoom=function(){var t=this._rawTransformable.getLocalTransform(),i=this._roamTransformable,a=this.getDefaultCenter(),o=this.getCenter(),l=this.getZoom();o=Hr([],o,t),a=Hr([],a,t),i.originX=o[0],i.originY=o[1],i.x=a[0]-o[0],i.y=a[1]-o[1],i.scaleX=i.scaleY=l,this._updateTransform()},n.prototype._updateTransform=function(){var t=this._roamTransformable,i=this._rawTransformable;i.parent=t,t.updateTransform(),i.updateTransform(),Nh(this.transform||(this.transform=[]),i.transform||[1,0,0,1,0,0]),this._rawTransform=i.getLocalTransform(),this.invTransform=this.invTransform||[],zl(this.invTransform,this.transform),this.decomposeTransform()},n.prototype.getTransformInfo=function(){var t=this._rawTransformable,i=this._roamTransformable,a=new ds;return a.transform=i.transform,a.decomposeTransform(),{roam:{x:a.x,y:a.y,scaleX:a.scaleX,scaleY:a.scaleY},raw:{x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY}}},n.prototype.getViewRect=function(){return this._viewRect},n.prototype.getViewRectAfterRoam=function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},n.prototype.dataToPoint=function(t,i,a){var o=i?this._rawTransform:this.transform;return a=a||[],o?MM(a,t,o):Fr(a,t)},n.prototype.pointToData=function(t){var i=this.invTransform;return i?MM([],t,i):[t[0],t[1]]},n.prototype.convertToPixel=function(t,i,a){var o=OM(i);return o===this?o.dataToPoint(a):null},n.prototype.convertFromPixel=function(t,i,a){var o=OM(i);return o===this?o.pointToData(a):null},n.prototype.containPoint=function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])},n.dimensions=["x","y"],n}(ds);function OM(r){var n=r.seriesModel;return n?n.coordinateSystem:null}const zg=eU;var tU={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},PM=["lng","lat"],IM=function(r){function n(t,i,a){var o=r.call(this,t)||this;o.dimensions=PM,o.type="geo",o._nameCoordMap=Kt(),o.map=i;var v,l=a.projection,u=ru_load(i,a.nameMap,a.nameProperty),c=ru_getGeoResource(i),f=(o.resourceType=c?c.type:null,o.regions=u.regions),p=tU[c.type];if(o._regionsMap=u.regionsMap,o.regions=u.regions,o.projection=l,l)for(var m=0;m<f.length;m++){var y=f[m].getBoundingRect(l);(v=v||y.clone()).union(y)}else v=u.boundingRect;return o.setBoundingRect(v.x,v.y,v.width,v.height),o.aspectScale=l?1:$t(a.aspectScale,p.aspectScale),o._invertLongitute=!l&&p.invertLongitute,o}return R(n,r),n.prototype._transformTo=function(t,i,a,o){var l=this.getBoundingRect(),u=this._invertLongitute;l=l.clone(),u&&(l.y=-l.y-l.height);var c=this._rawTransformable;c.transform=l.calculateTransform(new Mn(t,i,a,o));var h=c.parent;c.parent=null,c.decomposeTransform(),c.parent=h,u&&(c.scaleY=-c.scaleY),this._updateTransform()},n.prototype.getRegion=function(t){return this._regionsMap.get(t)},n.prototype.getRegionByCoord=function(t){for(var i=this.regions,a=0;a<i.length;a++){var o=i[a];if("geoJSON"===o.type&&o.contain(t))return i[a]}},n.prototype.addGeoCoord=function(t,i){this._nameCoordMap.set(t,i)},n.prototype.getGeoCoord=function(t){var i=this._regionsMap.get(t);return this._nameCoordMap.get(t)||i&&i.getCenter()},n.prototype.dataToPoint=function(t,i,a){if(Qe(t)&&(t=this.getGeoCoord(t)),t){var o=this.projection;return o&&(t=o.project(t)),t&&this.projectedToPoint(t)}},n.prototype.pointToData=function(t){var i=this.projection;return i&&(t=i.unproject(t)),t&&this.pointToProjected(t)},n.prototype.pointToProjected=function(t){return r.prototype.pointToData.call(this,t)},n.prototype.projectedToPoint=function(t,i,a){return r.prototype.dataToPoint.call(this,t,i,a)},n.prototype.convertToPixel=function(t,i,a){var o=kM(i);return o===this?o.dataToPoint(a):null},n.prototype.convertFromPixel=function(t,i,a){var o=kM(i);return o===this?o.pointToData(a):null},n}(zg);function kM(r){var n=r.geoModel,t=r.seriesModel;return n?n.coordinateSystem:t?t.coordinateSystem||(t.getReferringComponents("geo",_i).models[0]||{}).coordinateSystem:null}Qt(IM,zg);const LM=IM;function RM(r,n){var t=r.get("boundingCoords");if(null!=t){var i=t[0],a=t[1];if(isFinite(i[0])&&isFinite(i[1])&&isFinite(a[0])&&isFinite(a[1])){var o=this.projection;if(o){var l=i[0],u=i[1],c=a[0],h=a[1];i=[1/0,1/0],a=[-1/0,-1/0];var f=function(ce,_e,ze,Ee){for(var Le=ze-ce,ke=Ee-_e,Ue=0;Ue<=100;Ue++){var He=Ue/100,Ke=o.project([ce+Le*He,_e+ke*He]);vi(i,i,Ke),ta(a,a,Ke)}};f(l,u,c,u),f(c,u,c,h),f(c,h,l,h),f(l,h,c,u)}this.setBoundingRect(i[0],i[1],a[0]-i[0],a[1]-i[1])}}var E,N,X,p=this.getBoundingRect(),v=r.get("layoutCenter"),m=r.get("layoutSize"),y=n.getWidth(),C=n.getHeight(),T=p.width/p.height*this.aspectScale,z=!1;if(v&&m&&(E=[Ht(v[0],y),Ht(v[1],C)],N=Ht(m,Math.min(y,C)),!isNaN(E[0])&&!isNaN(E[1])&&!isNaN(N)&&(z=!0)),z)X={},T>1?(X.width=N,X.height=N/T):(X.height=N,X.width=N*T),X.y=E[1]-X.height/2,X.x=E[0]-X.width/2;else{var ve=r.getBoxLayoutParams();ve.aspect=T,X=ui(ve,{width:y,height:C})}this.setViewRect(X.x,X.y,X.width,X.height),this.setCenter(r.get("center")),this.setZoom(r.get("zoom"))}var rU=function(){function r(){this.dimensions=PM}return r.prototype.create=function(n,t){var i=[];function a(l){return{nameProperty:l.get("nameProperty"),aspectScale:l.get("aspectScale"),projection:l.get("projection")}}n.eachComponent("geo",function(l,u){var c=l.get("map"),h=new LM(c+u,c,Ge({nameMap:l.get("nameMap")},a(l)));h.zoomLimit=l.get("scaleLimit"),i.push(h),l.coordinateSystem=h,h.model=l,h.resize=RM,h.resize(l,t)}),n.eachSeries(function(l){if("geo"===l.get("coordinateSystem")){var c=l.get("geoIndex")||0;l.coordinateSystem=i[c]}});var o={};return n.eachSeriesByType("map",function(l){if(!l.getHostGeoModel()){var u=l.getMapType();o[u]=o[u]||[],o[u].push(l)}}),De(o,function(l,u){var c=_t(l,function(f){return f.get("nameMap")}),h=new LM(u,u,Ge({nameMap:dr(c)},a(l[0])));h.zoomLimit=Cr.apply(null,_t(l,function(f){return f.get("scaleLimit")})),i.push(h),h.resize=RM,h.resize(l[0],t),De(l,function(f){f.coordinateSystem=h,function nU(r,n){De(n.get("geoCoord"),function(t,i){r.addGeoCoord(i,t)})}(h,f)})}),i},r.prototype.getFilledRegions=function(n,t,i,a){for(var o=(n||[]).slice(),l=Kt(),u=0;u<o.length;u++)l.set(o[u].name,o[u]);return De(ru_load(t,i,a).regions,function(h){var f=h.name;!l.get(f)&&o.push({name:f})}),o},r}();const NM=new rU;var aU=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.init=function(t,i,a){var o=ru_getGeoResource(t.map);if(o&&"geoJSON"===o.type){var l=t.itemStyle=t.itemStyle||{};"color"in l||(l.color="#eee")}this.mergeDefaultAndTheme(t,a),Il(t,"label",["show"])},n.prototype.optionUpdated=function(){var t=this,i=this.option;i.regions=NM.getFilledRegions(i.regions,i.map,i.nameMap,i.nameProperty);var a={};this._optionModelMap=cr(i.regions||[],function(o,l){var u=l.name;return u&&(o.set(u,new Or(l,t,t.ecModel)),l.selected&&(a[u]=!0)),o},Kt()),i.selectedMap||(i.selectedMap=a)},n.prototype.getRegionModel=function(t){return this._optionModelMap.get(t)||new Or(null,this,this.ecModel)},n.prototype.getFormattedLabel=function(t,i){var o=this.getRegionModel(t).get("normal"===i?["label","formatter"]:["emphasis","label","formatter"]),l={name:t};return Pe(o)?(l.status=i,o(l)):Qe(o)?o.replace("{a}",null!=t?t:""):void 0},n.prototype.setZoom=function(t){this.option.zoom=t},n.prototype.setCenter=function(t){this.option.center=t},n.prototype.select=function(t){var i=this.option,a=i.selectedMode;a&&("multiple"!==a&&(i.selectedMap=null),(i.selectedMap||(i.selectedMap={}))[t]=!0)},n.prototype.unSelect=function(t){var i=this.option.selectedMap;i&&(i[t]=!1)},n.prototype.toggleSelected=function(t){this[this.isSelected(t)?"unSelect":"select"](t)},n.prototype.isSelected=function(t){var i=this.option.selectedMap;return!(!i||!i[t])},n.type="geo",n.layoutMode="box",n.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},n}(Jn);const oU=aU;function FM(r,n){return r.pointToProjected?r.pointToProjected(n):r.pointToData(n)}function Lb(r,n,t){var i=r.getZoom(),a=r.getCenter(),o=n.zoom,l=r.projectedToPoint?r.projectedToPoint(a):r.dataToPoint(a);if(null!=n.dx&&null!=n.dy&&(l[0]-=n.dx,l[1]-=n.dy,r.setCenter(FM(r,l))),null!=o){if(t){var u=t.min||0;o=Math.max(Math.min(i*o,t.max||1/0),u)/i}r.scaleX*=o,r.scaleY*=o;var f=(n.originY-r.y)*(o-1);r.x-=(n.originX-r.x)*(o-1),r.y-=f,r.updateTransform(),r.setCenter(FM(r,l)),r.setZoom(o*i)}return{center:r.getCenter(),zoom:r.getZoom()}}var sU=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.focusBlurEnabled=!0,t}return R(n,r),n.prototype.init=function(t,i){this._api=i},n.prototype.render=function(t,i,a,o){if(this._model=t,!t.get("show"))return this._mapDraw&&this._mapDraw.remove(),void(this._mapDraw=null);this._mapDraw||(this._mapDraw=new EM(a));var l=this._mapDraw;l.draw(t,i,a,this,o),l.group.on("click",this._handleRegionClick,this),l.group.silent=t.get("silent"),this.group.add(l.group),this.updateSelectStatus(t,i,a)},n.prototype._handleRegionClick=function(t){var i;zd(t.target,function(a){return null!=(i=dn(a).eventData)},!0),i&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:i.name})},n.prototype.updateSelectStatus=function(t,i,a){var o=this;this._mapDraw.group.traverse(function(l){var u=dn(l).eventData;if(u)return o._model.isSelected(u.name)?a.enterSelect(l):a.leaveSelect(l),!0})},n.prototype.findHighDownDispatchers=function(t){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(t,this._model)},n.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},n.type="geo",n}(oi);const lU=sU;function uU(r,n,t){!function(r,n,t){if(n.svg){var i=new OZ(r,n.svg);Sg.set(r,i)}else{var a=n.geoJson||n.geoJSON;a&&!n.features?t=n.specialAreas:a=n,i=new ZZ(r,a,t),Sg.set(r,i)}}(r,n,t)}function BM(r){function n(t,i){i.update="geo:updateSelectStatus",r.registerAction(i,function(a,o){var l={},u=[];return o.eachComponent({mainType:"geo",query:a},function(c){c[t](a.name),De(c.coordinateSystem.regions,function(p){l[p.name]=c.isSelected(p.name)||!1});var f=[];De(l,function(p,v){l[v]&&f.push(v)}),u.push({geoIndex:c.componentIndex,name:f})}),{selected:l,allSelected:u,name:a.name}})}r.registerCoordinateSystem("geo",NM),r.registerComponentModel(oU),r.registerComponentView(lU),r.registerImpl("registerMap",uU),r.registerImpl("getMap",function(t){return function(r){var n=Sg.get(r);return n&&"geoJSON"===n.type&&n.getMapForUser()}(t)}),n("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),n("select",{type:"geoSelect",event:"geoselected"}),n("unSelect",{type:"geoUnSelect",event:"geounselected"}),r.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(t,i){var a=t.componentType||"series";i.eachComponent({mainType:a,query:t},function(o){var l=o.coordinateSystem;if("geo"===l.type){var u=Lb(l,t,o.get("scaleLimit"));o.setCenter&&o.setCenter(u.center),o.setZoom&&o.setZoom(u.zoom),"series"===a&&De(o.seriesGroup,function(c){c.setCenter(u.center),c.setZoom(u.zoom)})}})})}function dU(r,n){var t=r.isExpand?r.children:[],i=r.parentNode.children,a=r.hierNode.i?i[r.hierNode.i-1]:null;if(t.length){!function gU(r){for(var n=r.children,t=n.length,i=0,a=0;--t>=0;){var o=n[t];o.hierNode.prelim+=i,o.hierNode.modifier+=i,i+=o.hierNode.shift+(a+=o.hierNode.change)}}(r);var o=(t[0].hierNode.prelim+t[t.length-1].hierNode.prelim)/2;a?(r.hierNode.prelim=a.hierNode.prelim+n(r,a),r.hierNode.modifier=r.hierNode.prelim-o):r.hierNode.prelim=o}else a&&(r.hierNode.prelim=a.hierNode.prelim+n(r,a));r.parentNode.hierNode.defaultAncestor=function vU(r,n,t,i){if(n){for(var a=r,o=r,l=o.parentNode.children[0],u=n,c=a.hierNode.modifier,h=o.hierNode.modifier,f=l.hierNode.modifier,p=u.hierNode.modifier;u=Rb(u),o=Nb(o),u&&o;){a=Rb(a),l=Nb(l),a.hierNode.ancestor=r;var v=u.hierNode.prelim+p-o.hierNode.prelim-h+i(u,o);v>0&&(_U(mU(u,r,t),r,v),h+=v,c+=v),p+=u.hierNode.modifier,h+=o.hierNode.modifier,c+=a.hierNode.modifier,f+=l.hierNode.modifier}u&&!Rb(a)&&(a.hierNode.thread=u,a.hierNode.modifier+=p-c),o&&!Nb(l)&&(l.hierNode.thread=o,l.hierNode.modifier+=h-f,t=r)}return t}(r,a,r.parentNode.hierNode.defaultAncestor||i[0],n)}function fU(r){r.setLayout({x:r.hierNode.prelim+r.parentNode.hierNode.modifier},!0),r.hierNode.modifier+=r.parentNode.hierNode.modifier}function ZM(r){return arguments.length?r:yU}function wg(r,n){return r-=Math.PI/2,{x:n*Math.cos(r),y:n*Math.sin(r)}}function Rb(r){var n=r.children;return n.length&&r.isExpand?n[n.length-1]:r.hierNode.thread}function Nb(r){var n=r.children;return n.length&&r.isExpand?n[0]:r.hierNode.thread}function mU(r,n,t){return r.hierNode.ancestor.parentNode===n.parentNode?r.hierNode.ancestor:t}function _U(r,n,t){var i=t/(n.hierNode.i-r.hierNode.i);n.hierNode.change-=i,n.hierNode.shift+=t,n.hierNode.modifier+=t,n.hierNode.prelim+=t,r.hierNode.change+=i}function yU(r,n){return r.parentNode===n.parentNode?1:2}var CU=function r(){this.parentPoint=[],this.childPoints=[]},xU=function(r){function n(t){return r.call(this,t)||this}return R(n,r),n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new CU},n.prototype.buildPath=function(t,i){var a=i.childPoints,o=a.length,l=i.parentPoint,u=a[0],c=a[o-1];if(1===o)return t.moveTo(l[0],l[1]),void t.lineTo(u[0],u[1]);var h=i.orient,f="TB"===h||"BT"===h?0:1,p=1-f,v=Ht(i.forkPosition,1),m=[];m[f]=l[f],m[p]=l[p]+(c[p]-l[p])*v,t.moveTo(l[0],l[1]),t.lineTo(m[0],m[1]),t.moveTo(u[0],u[1]),m[f]=u[f],t.lineTo(m[0],m[1]),m[f]=c[f],t.lineTo(m[0],m[1]),t.lineTo(c[0],c[1]);for(var y=1;y<o-1;y++){var C=a[y];t.moveTo(C[0],C[1]),m[f]=C[f],t.lineTo(m[0],m[1])}},n}(Fn),TU=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t._mainGroup=new hn,t}return R(n,r),n.prototype.init=function(t,i){this._controller=new bg(i.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},n.prototype.render=function(t,i,a){var o=t.getData(),l=t.layoutInfo,u=this._mainGroup;"radial"===t.get("layout")?(u.x=l.x+l.width/2,u.y=l.y+l.height/2):(u.x=l.x,u.y=l.y),this._updateViewCoordSys(t),this._updateController(t,i,a);var h=this._data;o.diff(h).add(function(f){UM(o,f)&&VM(o,f,null,u,t)}).update(function(f,p){var v=h.getItemGraphicEl(p);UM(o,f)?VM(o,f,v,u,t):v&&GM(h,p,v,u,t)}).remove(function(f){var p=h.getItemGraphicEl(f);p&&GM(h,f,p,u,t)}).execute(),this._nodeScaleRatio=t.get("nodeScaleRatio"),this._updateNodeAndLinkScale(t),!0===t.get("expandAndCollapse")&&o.eachItemGraphicEl(function(f,p){f.off("click").on("click",function(){a.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:p})})}),this._data=o},n.prototype._updateViewCoordSys=function(t){var i=t.getData(),a=[];i.each(function(f){var p=i.getItemLayout(f);p&&!isNaN(p.x)&&!isNaN(p.y)&&a.push([+p.x,+p.y])});var o=[],l=[];ed(a,o,l);var u=this._min,c=this._max;l[0]-o[0]==0&&(o[0]=u?u[0]:o[0]-1,l[0]=c?c[0]:l[0]+1),l[1]-o[1]==0&&(o[1]=u?u[1]:o[1]-1,l[1]=c?c[1]:l[1]+1);var h=t.coordinateSystem=new zg;h.zoomLimit=t.get("scaleLimit"),h.setBoundingRect(o[0],o[1],l[0]-o[0],l[1]-o[1]),h.setCenter(t.get("center")),h.setZoom(t.get("zoom")),this.group.attr({x:h.x,y:h.y,scaleX:h.scaleX,scaleY:h.scaleY}),this._min=o,this._max=l},n.prototype._updateController=function(t,i,a){var o=this,l=this._controller,u=this._controllerHost,c=this.group;l.setPointerChecker(function(h,f,p){var v=c.getBoundingRect();return v.applyTransform(c.transform),v.contain(f,p)&&!U0(h,a,t)}),l.enable(t.get("roam")),u.zoomLimit=t.get("scaleLimit"),u.zoom=t.coordinateSystem.getZoom(),l.off("pan").off("zoom").on("pan",function(h){Eb(u,h.dx,h.dy),a.dispatchAction({seriesId:t.id,type:"treeRoam",dx:h.dx,dy:h.dy})}).on("zoom",function(h){Mb(u,h.scale,h.originX,h.originY),a.dispatchAction({seriesId:t.id,type:"treeRoam",zoom:h.scale,originX:h.originX,originY:h.originY}),o._updateNodeAndLinkScale(t),a.updateLabelLayout()})},n.prototype._updateNodeAndLinkScale=function(t){var i=t.getData(),a=this._getNodeGlobalScale(t);i.eachItemGraphicEl(function(o,l){o.setSymbolScale(a)})},n.prototype._getNodeGlobalScale=function(t){var i=t.coordinateSystem;if("view"!==i.type)return 1;var a=this._nodeScaleRatio,o=i.scaleX||1;return((i.getZoom()-1)*a+1)/o},n.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},n.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},n.type="tree",n}(Vr);function UM(r,n){var t=r.getItemLayout(n);return t&&!isNaN(t.x)&&!isNaN(t.y)}function VM(r,n,t,i,a){var o=!t,l=r.tree.getNodeByDataIndex(n),u=l.getModel(),c=l.getVisual("style").fill,h=!1===l.isExpand&&0!==l.children.length?c:"#fff",f=r.tree.root,p=l.parentNode===f?l:l.parentNode||l,v=r.getItemGraphicEl(p.dataIndex),m=p.getLayout(),y=v?{x:v.__oldX,y:v.__oldY,rawX:v.__radialOldRawX,rawY:v.__radialOldRawY}:m,C=l.getLayout();o?((t=new vg(r,n,null,{symbolInnerColor:h,useNameLabel:!0})).x=y.x,t.y=y.y):t.updateData(r,n,null,{symbolInnerColor:h,useNameLabel:!0}),t.__radialOldRawX=t.__radialRawX,t.__radialOldRawY=t.__radialRawY,t.__radialRawX=C.rawX,t.__radialRawY=C.rawY,i.add(t),r.setItemGraphicEl(n,t),t.__oldX=t.x,t.__oldY=t.y,Kn(t,{x:C.x,y:C.y},a);var T=t.getSymbolPath();if("radial"===a.get("layout")){var z=f.children[0],E=z.getLayout(),N=z.children.length,X=void 0,ve=void 0;if(C.x===E.x&&!0===l.isExpand){var ce={x:(z.children[0].getLayout().x+z.children[N-1].getLayout().x)/2,y:(z.children[0].getLayout().y+z.children[N-1].getLayout().y)/2};(X=Math.atan2(ce.y-E.y,ce.x-E.x))<0&&(X=2*Math.PI+X),(ve=ce.x<E.x)&&(X-=Math.PI)}else(X=Math.atan2(C.y-E.y,C.x-E.x))<0&&(X=2*Math.PI+X),0===l.children.length||0!==l.children.length&&!1===l.isExpand?(ve=C.x<E.x)&&(X-=Math.PI):(ve=C.x>E.x)||(X-=Math.PI);var _e=ve?"left":"right",ze=u.getModel("label"),Ee=ze.get("rotate"),Le=Ee*(Math.PI/180),ke=T.getTextContent();ke&&(T.setTextConfig({position:ze.get("position")||_e,rotation:null==Ee?-X:Le,origin:"center"}),ke.setStyle("verticalAlign","middle"))}var Ue=u.get(["emphasis","focus"]),He="ancestor"===Ue?l.getAncestorsIndices():"descendant"===Ue?l.getDescendantIndices():null;He&&(dn(t).focus=He),function bU(r,n,t,i,a,o,l,u){var c=n.getModel(),h=r.get("edgeShape"),f=r.get("layout"),p=r.getOrient(),v=r.get(["lineStyle","curveness"]),m=r.get("edgeForkPosition"),y=c.getModel("lineStyle").getLineStyle(),C=i.__edge;if("curve"===h)n.parentNode&&n.parentNode!==t&&(C||(C=i.__edge=new Hp({shape:Fb(f,p,v,a,a)})),Kn(C,{shape:Fb(f,p,v,o,l)},r));else if("polyline"===h&&"orthogonal"===f&&n!==t&&n.children&&0!==n.children.length&&!0===n.isExpand){for(var T=n.children,z=[],E=0;E<T.length;E++){var N=T[E].getLayout();z.push([N.x,N.y])}C||(C=i.__edge=new xU({shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]],orient:p,forkPosition:m}})),Kn(C,{shape:{parentPoint:[l.x,l.y],childPoints:z}},r)}C&&(C.useStyle(Dt({strokeNoScale:!0,fill:null},y)),Zi(C,c,"lineStyle"),Wl(C),u.add(C))}(a,l,f,t,y,m,C,i),t.__edge&&(t.onHoverStateChange=function(Ke){if("blur"!==Ke){var nt=l.parentNode&&r.getItemGraphicEl(l.parentNode.dataIndex);nt&&1===nt.hoverState||nd(t.__edge,Ke)}})}function HM(r,n,t,i,a){var l=WM(n.tree.root,r),u=l.source,c=l.sourceLayout,h=n.getItemGraphicEl(r.dataIndex);if(h){var f=n.getItemGraphicEl(u.dataIndex),v=h.__edge||(!1===u.isExpand||1===u.children.length?f.__edge:void 0),m=i.get("edgeShape"),y=i.get("layout"),C=i.get("orient"),T=i.get(["lineStyle","curveness"]);v&&("curve"===m?tl(v,{shape:Fb(y,C,T,c,c),style:{opacity:0}},i,{cb:function(){t.remove(v)},removeOpt:a}):"polyline"===m&&"orthogonal"===i.get("layout")&&tl(v,{shape:{parentPoint:[c.x,c.y],childPoints:[[c.x,c.y]]},style:{opacity:0}},i,{cb:function(){t.remove(v)},removeOpt:a}))}}function WM(r,n){for(var i,t=n.parentNode===r?n:n.parentNode||n;null==(i=t.getLayout());)t=t.parentNode===r?t:t.parentNode||t;return{source:t,sourceLayout:i}}function GM(r,n,t,i,a){var o=r.tree.getNodeByDataIndex(n),u=WM(r.tree.root,o).sourceLayout,c={duration:a.get("animationDurationUpdate"),easing:a.get("animationEasingUpdate")};tl(t,{x:u.x+1,y:u.y+1},a,{cb:function(){i.remove(t),r.setItemGraphicEl(n,null)},removeOpt:c}),t.fadeOut(null,r.hostModel,{fadeLabel:!0,animation:c}),o.children.forEach(function(h){HM(h,r,i,a,c)}),HM(o,r,i,a,c)}function Fb(r,n,t,i,a){var o,l,u,c,h,f,p,v;if("radial"===r){f=a.rawX,v=a.rawY;var m=wg(h=i.rawX,p=i.rawY),y=wg(h,p+(v-p)*t),C=wg(f,v+(p-v)*t),T=wg(f,v);return{x1:m.x||0,y1:m.y||0,x2:T.x||0,y2:T.y||0,cpx1:y.x||0,cpy1:y.y||0,cpx2:C.x||0,cpy2:C.y||0}}return h=i.x,p=i.y,f=a.x,v=a.y,("LR"===n||"RL"===n)&&(o=h+(f-h)*t,l=p,u=f+(h-f)*t,c=v),("TB"===n||"BT"===n)&&(o=h,l=p+(v-p)*t,u=f,c=v+(p-v)*t),{x1:h,y1:p,x2:f,y2:v,cpx1:o,cpy1:l,cpx2:u,cpy2:c}}const SU=TU;var Ko=Xn();function wU(r,n){if(function OU(r){return Ko(r).mainData===r}(this)){var t=Ge({},Ko(this).datas);t[this.dataType]=n,JM(n,t,r)}else Bb(n,this.dataType,Ko(this).mainData,r);return n}function DU(r,n){return r.struct&&r.struct.update(),n}function AU(r,n){return De(Ko(n).datas,function(t,i){t!==n&&Bb(t.cloneShallow(),i,n,r)}),n}function EU(r){var n=Ko(this).mainData;return null==r||null==n?n:Ko(n).datas[r]}function MU(){var r=Ko(this).mainData;return null==r?[{data:r}]:_t(gn(Ko(r).datas),function(n){return{type:n,data:Ko(r).datas[n]}})}function JM(r,n,t){Ko(r).datas={},De(n,function(i,a){Bb(i,a,r,t)})}function Bb(r,n,t,i){Ko(t).datas[n]=r,Ko(r).mainData=t,r.dataType=n,i.struct&&(r[i.structAttr]=i.struct,i.struct[i.datasAttr[n]]=r),r.getLinkedData=EU,r.getLinkedDataAll=MU}const YM=function zU(r){var n=r.mainData,t=r.datas;t||(t={main:n},r.datasAttr={main:"data"}),r.datas=r.mainData=null,JM(n,t,r),De(t,function(i){De(n.TRANSFERABLE_METHODS,function(a){i.wrapMethod(a,yt(wU,r))})}),n.wrapMethod("cloneShallow",yt(AU,r)),De(n.CHANGABLE_METHODS,function(i){n.wrapMethod(i,yt(DU,r))}),ar(t[n.dataType]===n)};var PU=function(){function r(n,t){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=n||"",this.hostTree=t}return r.prototype.isRemoved=function(){return this.dataIndex<0},r.prototype.eachNode=function(n,t,i){Pe(n)&&(i=t,t=n,n=null),Qe(n=n||{})&&(n={order:n});var l,a=n.order||"preorder",o=this[n.attr||"children"];"preorder"===a&&(l=t.call(i,this));for(var u=0;!l&&u<o.length;u++)o[u].eachNode(n,t,i);"postorder"===a&&t.call(i,this)},r.prototype.updateDepthAndHeight=function(n){var t=0;this.depth=n;for(var i=0;i<this.children.length;i++){var a=this.children[i];a.updateDepthAndHeight(n+1),a.height>t&&(t=a.height)}this.height=t+1},r.prototype.getNodeById=function(n){if(this.getId()===n)return this;for(var t=0,i=this.children,a=i.length;t<a;t++){var o=i[t].getNodeById(n);if(o)return o}},r.prototype.contains=function(n){if(n===this)return!0;for(var t=0,i=this.children,a=i.length;t<a;t++){var o=i[t].contains(n);if(o)return o}},r.prototype.getAncestors=function(n){for(var t=[],i=n?this:this.parentNode;i;)t.push(i),i=i.parentNode;return t.reverse(),t},r.prototype.getAncestorsIndices=function(){for(var n=[],t=this;t;)n.push(t.dataIndex),t=t.parentNode;return n.reverse(),n},r.prototype.getDescendantIndices=function(){var n=[];return this.eachNode(function(t){n.push(t.dataIndex)}),n},r.prototype.getValue=function(n){var t=this.hostTree.data;return t.getStore().get(t.getDimensionIndex(n||"value"),this.dataIndex)},r.prototype.setLayout=function(n,t){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,n,t)},r.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},r.prototype.getModel=function(n){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(n)},r.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},r.prototype.setVisual=function(n,t){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,n,t)},r.prototype.getVisual=function(n){return this.hostTree.data.getItemVisual(this.dataIndex,n)},r.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},r.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},r.prototype.getChildIndex=function(){if(this.parentNode){for(var n=this.parentNode.children,t=0;t<n.length;++t)if(n[t]===this)return t;return-1}return-1},r.prototype.isAncestorOf=function(n){for(var t=n.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},r.prototype.isDescendantOf=function(n){return n!==this&&n.isAncestorOf(this)},r}(),IU=function(){function r(n){this.type="tree",this._nodes=[],this.hostModel=n}return r.prototype.eachNode=function(n,t,i){this.root.eachNode(n,t,i)},r.prototype.getNodeByDataIndex=function(n){var t=this.data.getRawIndex(n);return this._nodes[t]},r.prototype.getNodeById=function(n){return this.root.getNodeById(n)},r.prototype.update=function(){for(var n=this.data,t=this._nodes,i=0,a=t.length;i<a;i++)t[i].dataIndex=-1;for(i=0,a=n.count();i<a;i++)t[n.getRawIndex(i)].dataIndex=i},r.prototype.clearLayouts=function(){this.data.clearItemLayouts()},r.createTree=function(n,t,i){var a=new r(t),o=[],l=1;!function u(f,p){var v=f.value;l=Math.max(l,we(v)?v.length:1),o.push(f);var m=new PU(Si(f.name,""),a);p?function kU(r,n){r.parentNode!==n&&(n.children.push(r),r.parentNode=n)}(m,p):a.root=m,a._nodes.push(m);var y=f.children;if(y)for(var C=0;C<y.length;C++)u(y[C],m)}(n),a.root.updateDepthAndHeight(0);var c=Ed(o,{coordDimensions:["value"],dimensionsCount:l}).dimensions,h=new _a(c,t);return h.initData(o),i&&i(h),YM({mainData:h,struct:a,structAttr:"tree"}),a.update(),a},r}();const Zb=IU;function Dg(r,n,t){if(r&&Ye(n,r.type)>=0){var i=t.getData().tree.root,a=r.targetNode;if(Qe(a)&&(a=i.getNodeById(a)),a&&i.contains(a))return{node:a};var o=r.targetNodeId;if(null!=o&&(a=i.getNodeById(o)))return{node:a}}}function QM(r){for(var n=[];r;)(r=r.parentNode)&&n.push(r);return n.reverse()}function Ub(r,n){return Ye(QM(r),n)>=0}function J0(r,n){for(var t=[];r;){var i=r.dataIndex;t.push({name:r.name,dataIndex:i,value:n.getRawValue(i)}),r=r.parentNode}return t.reverse(),t}var LU=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.hasSymbolVisual=!0,t.ignoreStyleOnData=!0,t}return R(n,r),n.prototype.getInitialData=function(t){var i={name:t.name,children:t.data},o=new Or(t.leaves||{},this,this.ecModel),l=Zb.createTree(i,this,function u(p){p.wrapMethod("getItemModel",function(v,m){var y=l.getNodeByDataIndex(m);return y&&y.children.length&&y.isExpand||(v.parentModel=o),v})}),c=0;l.eachNode("preorder",function(p){p.depth>c&&(c=p.depth)});var f=t.expandAndCollapse&&t.initialTreeDepth>=0?t.initialTreeDepth:c;return l.root.eachNode("preorder",function(p){var v=p.hostTree.data.getRawDataItem(p.dataIndex);p.isExpand=v&&null!=v.collapsed?!v.collapsed:p.depth<=f}),l.data},n.prototype.getOrient=function(){var t=this.get("orient");return"horizontal"===t?t="LR":"vertical"===t&&(t="TB"),t},n.prototype.setZoom=function(t){this.option.zoom=t},n.prototype.setCenter=function(t){this.option.center=t},n.prototype.formatTooltip=function(t,i,a){for(var o=this.getData().tree,l=o.root.children[0],u=o.getNodeByDataIndex(t),c=u.getValue(),h=u.name;u&&u!==l;)h=u.parentNode.name+"."+h,u=u.parentNode;return Wi("nameValue",{name:h,value:c,noValue:isNaN(c)||null==c})},n.prototype.getDataParams=function(t){var i=r.prototype.getDataParams.apply(this,arguments),a=this.getData().tree.getNodeByDataIndex(t);return i.treeAncestors=J0(a,this),i.collapsed=!a.isExpand,i},n.type="series.tree",n.layoutMode="box",n.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},n}(Xr);const RU=LU;function Ag(r,n){for(var i,t=[r];i=t.pop();)if(n(i),i.isExpand){var a=i.children;if(a.length)for(var o=a.length-1;o>=0;o--)t.push(a[o])}}function FU(r,n){r.eachSeriesByType("tree",function(t){!function BU(r,n){var t=function pU(r,n){return ui(r.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}(r,n);r.layoutInfo=t;var i=r.get("layout"),a=0,o=0,l=null;"radial"===i?(a=2*Math.PI,o=Math.min(t.height,t.width)/2,l=ZM(function(N,X){return(N.parentNode===X.parentNode?1:2)/N.depth})):(a=t.width,o=t.height,l=ZM());var u=r.getData().tree.root,c=u.children[0];if(c){(function hU(r){var n=r;n.hierNode={defaultAncestor:null,ancestor:n,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var i,a,t=[n];i=t.pop();)if(a=i.children,i.isExpand&&a.length)for(var l=a.length-1;l>=0;l--){var u=a[l];u.hierNode={defaultAncestor:null,ancestor:u,prelim:0,modifier:0,change:0,shift:0,i:l,thread:null},t.push(u)}})(u),function NU(r,n,t){for(var o,i=[r],a=[];o=i.pop();)if(a.push(o),o.isExpand){var l=o.children;if(l.length)for(var u=0;u<l.length;u++)i.push(l[u])}for(;o=a.pop();)n(o,t)}(c,dU,l),u.hierNode.modifier=-c.hierNode.prelim,Ag(c,fU);var h=c,f=c,p=c;Ag(c,function(N){var X=N.getLayout().x;X<h.getLayout().x&&(h=N),X>f.getLayout().x&&(f=N),N.depth>p.depth&&(p=N)});var v=h===f?1:l(h,f)/2,m=v-h.getLayout().x,y=0,C=0,T=0,z=0;if("radial"===i)y=a/(f.getLayout().x+v+m),C=o/(p.depth-1||1),Ag(c,function(N){var X=wg(T=(N.getLayout().x+m)*y,z=(N.depth-1)*C);N.setLayout({x:X.x,y:X.y,rawX:T,rawY:z},!0)});else{var E=r.getOrient();"RL"===E||"LR"===E?(C=o/(f.getLayout().x+v+m),y=a/(p.depth-1||1),Ag(c,function(N){z=(N.getLayout().x+m)*C,N.setLayout({x:T="LR"===E?(N.depth-1)*y:a-(N.depth-1)*y,y:z},!0)})):("TB"===E||"BT"===E)&&(y=a/(f.getLayout().x+v+m),C=o/(p.depth-1||1),Ag(c,function(N){T=(N.getLayout().x+m)*y,N.setLayout({x:T,y:z="TB"===E?(N.depth-1)*C:o-(N.depth-1)*C},!0)}))}}}(t,n)})}function ZU(r){r.eachSeriesByType("tree",function(n){var t=n.getData();t.tree.eachNode(function(a){var l=a.getModel().getModel("itemStyle").getItemStyle();Ge(t.ensureUniqueItemVisual(a.dataIndex,"style"),l)})})}var qM=["treemapZoomToNode","treemapRender","treemapMove"];function KM(r){var n=r.getData(),i={};n.tree.eachNode(function(a){for(var o=a;o&&o.depth>1;)o=o.parentNode;var l=v_(r.ecModel,o.name||o.dataIndex+"",i);a.setVisual("decal",l)})}var WU=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.preventUsingHoverLayer=!0,t}return R(n,r),n.prototype.getInitialData=function(t,i){var a={name:t.name,children:t.data};$M(a);var o=t.levels||[],l=this.designatedVisualItemStyle={},u=new Or({itemStyle:l},this,i);o=t.levels=function GU(r,n){var t=Dr(n.get("color")),i=Dr(n.get(["aria","decal","decals"]));if(t){var a,o;De(r=r||[],function(u){var c=new Or(u),h=c.get("color"),f=c.get("decal");(c.get(["itemStyle","color"])||h&&"none"!==h)&&(a=!0),(c.get(["itemStyle","decal"])||f&&"none"!==f)&&(o=!0)});var l=r[0]||(r[0]={});return a||(l.color=t.slice()),!o&&i&&(l.decal=i.slice()),r}}(o,i);var c=_t(o||[],function(p){return new Or(p,u,i)},this),h=Zb.createTree(a,this,function f(p){p.wrapMethod("getItemModel",function(v,m){var y=h.getNodeByDataIndex(m);return v.parentModel=(y?c[y.depth]:null)||u,v})});return h.data},n.prototype.optionUpdated=function(){this.resetViewRoot()},n.prototype.formatTooltip=function(t,i,a){var o=this.getData(),l=this.getRawValue(t);return Wi("nameValue",{name:o.getName(t),value:l})},n.prototype.getDataParams=function(t){var i=r.prototype.getDataParams.apply(this,arguments),a=this.getData().tree.getNodeByDataIndex(t);return i.treeAncestors=J0(a,this),i.treePathInfo=i.treeAncestors,i},n.prototype.setLayoutInfo=function(t){this.layoutInfo=this.layoutInfo||{},Ge(this.layoutInfo,t)},n.prototype.mapIdToIndex=function(t){var i=this._idIndexMap;i||(i=this._idIndexMap=Kt(),this._idIndexMapCount=0);var a=i.get(t);return null==a&&i.set(t,a=this._idIndexMapCount++),a},n.prototype.getViewRoot=function(){return this._viewRoot},n.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var i=this.getRawData().tree.root;(!t||t!==i&&!i.contains(t))&&(this._viewRoot=i)},n.prototype.enableAriaDecal=function(){KM(this)},n.type="series.treemap",n.layoutMode="box",n.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25b6",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},n}(Xr);function $M(r){var n=0;De(r.children,function(i){$M(i);var a=i.value;we(a)&&(a=a[0]),n+=a});var t=r.value;we(t)&&(t=t[0]),(null==t||isNaN(t))&&(t=n),t<0&&(t=0),we(r.value)?r.value[0]=t:r.value=t}const JU=WU;var QU=function(){function r(n){this.group=new hn,n.add(this.group)}return r.prototype.render=function(n,t,i,a){var o=n.getModel("breadcrumb"),l=this.group;if(l.removeAll(),o.get("show")&&i){var u=o.getModel("itemStyle"),c=u.getModel("textStyle"),h={pos:{left:o.get("left"),right:o.get("right"),top:o.get("top"),bottom:o.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:o.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(i,h,c),this._renderContent(n,h,u,c,a),dd(l,h.pos,h.box)}},r.prototype._prepare=function(n,t,i){for(var a=n;a;a=a.parentNode){var o=Si(a.getModel().get("name"),""),l=i.getTextRect(o),u=Math.max(l.width+16,t.emptyItemWidth);t.totalWidth+=u+8,t.renderList.push({node:a,text:o,width:u})}},r.prototype._renderContent=function(n,t,i,a,o){for(var l=0,u=t.emptyItemWidth,c=n.get(["breadcrumb","height"]),h=function ox(r,n,t){var i=n.width,a=n.height,o=Ht(r.left,i),l=Ht(r.top,a),u=Ht(r.right,i),c=Ht(r.bottom,a);return(isNaN(o)||isNaN(parseFloat(r.left)))&&(o=0),(isNaN(u)||isNaN(parseFloat(r.right)))&&(u=i),(isNaN(l)||isNaN(parseFloat(r.top)))&&(l=0),(isNaN(c)||isNaN(parseFloat(r.bottom)))&&(c=a),t=Ql(t||0),{width:Math.max(u-o-t[1]-t[3],0),height:Math.max(c-l-t[0]-t[2],0)}}(t.pos,t.box),f=t.totalWidth,p=t.renderList,v=p.length-1;v>=0;v--){var m=p[v],y=m.node,C=m.width,T=m.text;f>h.width&&(f-=C-u,C=u,T=null);var z=new Pa({shape:{points:qU(l,0,C,c,v===p.length-1,0===v)},style:Dt(i.getItemStyle(),{lineJoin:"bevel"}),textContent:new Gn({style:{text:T,fill:a.getTextColor(),font:a.getFont()}}),textConfig:{position:"inside"},z2:1e5,onclick:yt(o,y)});z.disableLabelAnimation=!0,this.group.add(z),KU(z,n,y),l+=C+8}},r.prototype.remove=function(){this.group.removeAll()},r}();function qU(r,n,t,i,a,o){var l=[[a?r:r-5,n],[r+t,n],[r+t,n+i],[a?r:r-5,n+i]];return!o&&l.splice(2,0,[r+t+5,n+i/2]),!a&&l.push([r,n+i/2]),l}function KU(r,n,t){dn(r).eventData={componentType:"series",componentSubType:"treemap",componentIndex:n.componentIndex,seriesIndex:n.seriesIndex,seriesName:n.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:t&&t.dataIndex,name:t&&t.name},treePathInfo:t&&J0(t,n)}}const $U=QU;var jU=function(){function r(){this._storage=[],this._elExistsMap={}}return r.prototype.add=function(n,t,i,a,o){return!this._elExistsMap[n.id]&&(this._elExistsMap[n.id]=!0,this._storage.push({el:n,target:t,duration:i,delay:a,easing:o}),!0)},r.prototype.finished=function(n){return this._finishedCallback=n,this},r.prototype.start=function(){for(var n=this,t=this._storage.length,i=function(){--t<=0&&(n._storage.length=0,n._elExistsMap={},n._finishedCallback&&n._finishedCallback())},a=0,o=this._storage.length;a<o;a++){var l=this._storage[a];l.el.animateTo(l.target,{duration:l.duration,delay:l.delay,easing:l.easing,setToFinal:!0,done:i,aborted:i})}return this},r}(),Hb=hn,XM=Qn,nO="upperLabel",ph=Ll([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),rO=function(r){var n=ph(r);return n.stroke=n.fill=n.lineWidth=null,n},Y0=Xn(),r4=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t._state="ready",t._storage={nodeGroup:[],background:[],content:[]},t}return R(n,r),n.prototype.render=function(t,i,a,o){if(!(Ye(i.findComponents({mainType:"series",subType:"treemap",query:o}),t)<0)){this.seriesModel=t,this.api=a,this.ecModel=i;var c=Dg(o,["treemapZoomToNode","treemapRootToNode"],t),h=o&&o.type,f=t.layoutInfo,p=!this._oldTree,v=this._storage,m="treemapRootToNode"===h&&c&&v?{rootNodeGroup:v.nodeGroup[c.node.getRawIndex()],direction:o.direction}:null,y=this._giveContainerGroup(f),C=t.get("animation"),T=this._doRender(y,t,m);!C||p||h&&"treemapZoomToNode"!==h&&"treemapRootToNode"!==h?T.renderFinally():this._doAnimation(y,T,t,m),this._resetController(a),this._renderBreadcrumb(t,a,c)}},n.prototype._giveContainerGroup=function(t){var i=this._containerGroup;return i||(i=this._containerGroup=new Hb,this._initEvents(i),this.group.add(i)),i.x=t.x,i.y=t.y,i},n.prototype._doRender=function(t,i,a){var o=i.getData().tree,l=this._oldTree,u={nodeGroup:[],background:[],content:[]},c={nodeGroup:[],background:[],content:[]},h=this._storage,f=[];function p(T,z,E,N){return function a4(r,n,t,i,a,o,l,u,c,h){if(l){var f=l.getLayout(),p=r.getData(),v=l.getModel();if(p.setItemGraphicEl(l.dataIndex,null),f&&f.isInView){var m=f.width,y=f.height,C=f.borderWidth,T=f.invisible,z=l.getRawIndex(),E=u&&u.getRawIndex(),N=l.viewChildren,X=f.upperHeight,ve=N&&N.length,ce=v.getModel("itemStyle"),_e=v.getModel(["emphasis","itemStyle"]),ze=v.getModel(["blur","itemStyle"]),Ee=v.getModel(["select","itemStyle"]),Le=ce.get("borderRadius")||0,ke=Bn("nodeGroup",Hb);if(ke){if(c.add(ke),ke.x=f.x||0,ke.y=f.y||0,ke.markRedraw(),Y0(ke).nodeWidth=m,Y0(ke).nodeHeight=y,f.isAboveViewRoot)return ke;var Ue=Bn("background",XM,h,20);Ue&&function wt(Un,vn,Hn){var kn=dn(vn);if(kn.dataIndex=l.dataIndex,kn.seriesIndex=r.seriesIndex,vn.setShape({x:0,y:0,width:m,height:y,r:Le}),T)Yt(vn);else{vn.invisible=!1;var rn=l.getVisual("style"),On=rn.stroke,ci=rO(ce);ci.fill=On;var rr=ph(_e);rr.fill=_e.get("borderColor");var Ci=ph(ze);Ci.fill=ze.get("borderColor");var gi=ph(Ee);gi.fill=Ee.get("borderColor"),Hn?Xt(vn,On,rn.opacity,{x:C,y:0,width:m-2*C,height:X}):vn.removeTextContent(),vn.setStyle(ci),vn.ensureState("emphasis").style=rr,vn.ensureState("blur").style=Ci,vn.ensureState("select").style=gi,Wl(vn)}Un.add(vn)}(ke,Ue,ve&&f.upperLabelHeight);var He=v.getModel("emphasis"),Ke=He.get("focus"),nt=He.get("blurScope"),lt=He.get("disabled"),St="ancestor"===Ke?l.getAncestorsIndices():"descendant"===Ke?l.getDescendantIndices():Ke;if(ve)Nc(ke)&&Gl(ke,!1),Ue&&(Gl(Ue,!lt),p.setItemGraphicEl(l.dataIndex,Ue),lp(Ue,St,nt));else{var mt=Bn("content",XM,h,30);mt&&function kt(Un,vn){var Hn=dn(vn);Hn.dataIndex=l.dataIndex,Hn.seriesIndex=r.seriesIndex;var kn=Math.max(m-2*C,0),rn=Math.max(y-2*C,0);if(vn.culling=!0,vn.setShape({x:C,y:C,width:kn,height:rn,r:Le}),T)Yt(vn);else{vn.invisible=!1;var On=l.getVisual("style"),ci=On.fill,rr=rO(ce);rr.fill=ci,rr.decal=On.decal;var Ci=ph(_e),gi=ph(ze),ya=ph(Ee);Xt(vn,ci,On.opacity,null),vn.setStyle(rr),vn.ensureState("emphasis").style=Ci,vn.ensureState("blur").style=gi,vn.ensureState("select").style=ya,Wl(vn)}Un.add(vn)}(ke,mt),Ue.disableMorphing=!0,Ue&&Nc(Ue)&&Gl(Ue,!1),Gl(ke,!lt),p.setItemGraphicEl(l.dataIndex,ke),lp(ke,St,nt)}return ke}}}function Yt(Un){!Un.invisible&&o.push(Un)}function Xt(Un,vn,Hn,kn){var rn=v.getModel(kn?nO:"label"),On=Si(v.get("name"),null),ci=rn.getShallow("show");Xi(Un,Li(v,kn?nO:"label"),{defaultText:ci?On:null,inheritColor:vn,defaultOpacity:Hn,labelFetcher:r,labelDataIndex:l.dataIndex});var rr=Un.getTextContent();if(rr){var Ci=rr.style,gi=Na(Ci.padding||0);kn&&(Un.setTextConfig({layoutRect:kn}),rr.disableLabelLayout=!0),rr.beforeUpdate=function(){var lu=Math.max((kn?kn.width:Un.shape.width)-gi[1]-gi[3],0),ao=Math.max((kn?kn.height:Un.shape.height)-gi[0]-gi[2],0);(Ci.width!==lu||Ci.height!==ao)&&rr.setStyle({width:lu,height:ao})},Ci.truncateMinChar=2,Ci.lineOverflow="truncate",pn(Ci,kn,f);var ya=rr.getState("emphasis");pn(ya?ya.style:null,kn,f)}}function pn(Un,vn,Hn){var kn=Un?Un.text:null;if(!vn&&Hn.isLeafRoot&&null!=kn){var rn=r.get("drillDownIcon",!0);Un.text=rn?rn+" "+kn:kn}}function Bn(Un,vn,Hn,kn){var rn=null!=E&&t[Un][E],On=a[Un];return rn?(t[Un][E]=null,function Ar(Un,vn){var Hn=Un[z]={};vn instanceof Hb?(Hn.oldX=vn.x,Hn.oldY=vn.y):Hn.oldShape=Ge({},vn.shape)}(On,rn)):T||((rn=new vn)instanceof $a&&(rn.z2=function o4(r,n){return 100*r+n}(Hn,kn)),function br(Un,vn){var Hn=Un[z]={},kn=l.parentNode,rn=vn instanceof hn;if(kn&&(!i||"drillDown"===i.direction)){var On=0,ci=0,rr=a.background[kn.getRawIndex()];!i&&rr&&rr.oldShape&&(On=rr.oldShape.width,ci=rr.oldShape.height),rn?(Hn.oldX=0,Hn.oldY=ci):Hn.oldShape={x:On,y:ci,width:0,height:0}}Hn.fadein=!rn}(On,rn)),n[Un][z]=rn}}(i,c,h,a,u,f,T,z,E,N)}!function m(T,z,E,N,X){function ve(_e){return _e.getId()}function ce(_e,ze){var Ee=null!=_e?T[_e]:null,Le=null!=ze?z[ze]:null,ke=p(Ee,Le,E,X);ke&&m(Ee&&Ee.viewChildren||[],Le&&Le.viewChildren||[],ke,N,X+1)}N?(z=T,De(T,function(_e,ze){!_e.isRemoved()&&ce(ze,ze)})):new Xl(z,T,ve,ve).add(ce).update(ce).remove(yt(ce,null)).execute()}(o.root?[o.root]:[],l&&l.root?[l.root]:[],t,o===l||!l,0);var v=function y(T){var z={nodeGroup:[],background:[],content:[]};return T&&De(T,function(E,N){var X=z[N];De(E,function(ve){ve&&(X.push(ve),Y0(ve).willDelete=!0)})}),z}(h);return this._oldTree=o,this._storage=c,{lastsForAnimation:u,willDeleteEls:v,renderFinally:function C(){De(v,function(T){De(T,function(z){z.parent&&z.parent.remove(z)})}),De(f,function(T){T.invisible=!0,T.dirty()})}}},n.prototype._doAnimation=function(t,i,a,o){var l=a.get("animationDurationUpdate"),u=a.get("animationEasing"),c=(Pe(l)?0:l)||0,h=(Pe(u)?null:u)||"cubicOut",f=function XU(){return new jU}();De(i.willDeleteEls,function(p,v){De(p,function(m,y){if(!m.invisible){var T,C=m.parent,z=Y0(C);if(o&&"drillDown"===o.direction)T=C===o.rootNodeGroup?{shape:{x:0,y:0,width:z.nodeWidth,height:z.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var E=0,N=0;z.willDelete||(E=z.nodeWidth/2,N=z.nodeHeight/2),T="nodeGroup"===v?{x:E,y:N,style:{opacity:0}}:{shape:{x:E,y:N,width:0,height:0},style:{opacity:0}}}T&&f.add(m,T,c,0,h)}})}),De(this._storage,function(p,v){De(p,function(m,y){var C=i.lastsForAnimation[v][y],T={};!C||(m instanceof hn?null!=C.oldX&&(T.x=m.x,T.y=m.y,m.x=C.oldX,m.y=C.oldY):(C.oldShape&&(T.shape=Ge({},m.shape),m.setShape(C.oldShape)),C.fadein?(m.setStyle("opacity",0),T.style={opacity:1}):1!==m.style.opacity&&(T.style={opacity:1})),f.add(m,T,c,0,h))})},this),this._state="animating",f.finished(qe(function(){this._state="ready",i.renderFinally()},this)).start()},n.prototype._resetController=function(t){var i=this._controller;i||((i=this._controller=new bg(t.getZr())).enable(this.seriesModel.get("roam")),i.on("pan",qe(this._onPan,this)),i.on("zoom",qe(this._onZoom,this)));var a=new Mn(0,0,t.getWidth(),t.getHeight());i.setPointerChecker(function(o,l,u){return a.contain(l,u)})},n.prototype._clearController=function(){var t=this._controller;t&&(t.dispose(),t=null)},n.prototype._onPan=function(t){if("animating"!==this._state&&(Math.abs(t.dx)>3||Math.abs(t.dy)>3)){var i=this.seriesModel.getData().tree.root;if(!i)return;var a=i.getLayout();if(!a)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:a.x+t.dx,y:a.y+t.dy,width:a.width,height:a.height}})}},n.prototype._onZoom=function(t){var i=t.originX,a=t.originY;if("animating"!==this._state){var o=this.seriesModel.getData().tree.root;if(!o)return;var l=o.getLayout();if(!l)return;var u=new Mn(l.x,l.y,l.width,l.height),c=this.seriesModel.layoutInfo,h=[1,0,0,1,0,0];Co(h,h,[-(i-=c.x),-(a-=c.y)]),Fh(h,h,[t.scale,t.scale]),Co(h,h,[i,a]),u.applyTransform(h),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:u.x,y:u.y,width:u.width,height:u.height}})}},n.prototype._initEvents=function(t){var i=this;t.on("click",function(a){if("ready"===i._state){var o=i.seriesModel.get("nodeClick",!0);if(o){var l=i.findTarget(a.offsetX,a.offsetY);if(l){var u=l.node;if(u.getLayout().isLeafRoot)i._rootToNode(l);else if("zoomToNode"===o)i._zoomToNode(l);else if("link"===o){var c=u.hostTree.data.getItemModel(u.dataIndex),h=c.get("link",!0),f=c.get("target",!0)||"blank";h&&cd(h,f)}}}}},this)},n.prototype._renderBreadcrumb=function(t,i,a){var o=this;a||(a=null!=t.get("leafDepth",!0)?{node:t.getViewRoot()}:this.findTarget(i.getWidth()/2,i.getHeight()/2))||(a={node:t.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new $U(this.group))).render(t,i,a.node,function(l){"animating"!==o._state&&(Ub(t.getViewRoot(),l)?o._rootToNode({node:l}):o._zoomToNode({node:l}))})},n.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},n.prototype.dispose=function(){this._clearController()},n.prototype._zoomToNode=function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},n.prototype._rootToNode=function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},n.prototype.findTarget=function(t,i){var a;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(l){var u=this._storage.background[l.getRawIndex()];if(u){var c=u.transformCoordToLocal(t,i),h=u.shape;if(!(h.x<=c[0]&&c[0]<=h.x+h.width&&h.y<=c[1]&&c[1]<=h.y+h.height))return!1;a={node:l,offsetX:c[0],offsetY:c[1]}}},this),a},n.type="treemap",n}(Vr);const s4=r4;var Mg=De,l4=tt,Wb=function(){function r(n){var t=n.mappingMethod,i=n.type,a=this.option=Nt(n);this.type=i,this.mappingMethod=t,this._normalizeData=h4[t];var o=r.visualHandlers[i];this.applyVisual=o.applyVisual,this.getColorMapper=o.getColorMapper,this._normalizedToVisual=o._normalizedToVisual[t],"piecewise"===t?(Gb(a),function u4(r){var n=r.pieceList;r.hasSpecialVisual=!1,De(n,function(t,i){t.originIndex=i,null!=t.visual&&(r.hasSpecialVisual=!0)})}(a)):"category"===t?a.categories?function c4(r){var n=r.categories,t=r.categoryMap={},i=r.visual;if(Mg(n,function(l,u){t[l]=u}),!we(i)){var a=[];tt(i)?Mg(i,function(l,u){var c=t[u];a[null!=c?c:-1]=l}):a[-1]=i,i=aO(r,a)}for(var o=n.length-1;o>=0;o--)null==i[o]&&(delete t[n[o]],n.pop())}(a):Gb(a,!0):(ar("linear"!==t||a.dataExtent),Gb(a))}return r.prototype.mapValueToVisual=function(n){var t=this._normalizeData(n);return this._normalizedToVisual(t,n)},r.prototype.getNormalizer=function(){return qe(this._normalizeData,this)},r.listVisualTypes=function(){return gn(r.visualHandlers)},r.isValidType=function(n){return r.visualHandlers.hasOwnProperty(n)},r.eachVisual=function(n,t,i){tt(n)?De(n,t,i):t.call(i,n)},r.mapVisual=function(n,t,i){var a,o=we(n)?[]:tt(n)?{}:(a=!0,null);return r.eachVisual(n,function(l,u){var c=t.call(i,l,u);a?o=c:o[u]=c}),o},r.retrieveVisuals=function(n){var i,t={};return n&&Mg(r.visualHandlers,function(a,o){n.hasOwnProperty(o)&&(t[o]=n[o],i=!0)}),i?t:null},r.prepareVisualTypes=function(n){if(we(n))n=n.slice();else{if(!l4(n))return[];var t=[];Mg(n,function(i,a){t.push(a)}),n=t}return n.sort(function(i,a){return"color"===a&&"color"!==i&&0===i.indexOf("color")?1:-1}),n},r.dependsOn=function(n,t){return"color"===t?!(!n||0!==n.indexOf(t)):n===t},r.findPieceIndex=function(n,t,i){for(var a,o=1/0,l=0,u=t.length;l<u;l++){var c=t[l].value;if(null!=c){if(c===n||Qe(c)&&c===n+"")return l;i&&v(c,l)}}for(l=0,u=t.length;l<u;l++){var h=t[l],f=h.interval,p=h.close;if(f){if(f[0]===-1/0){if(K0(p[1],n,f[1]))return l}else if(f[1]===1/0){if(K0(p[0],f[0],n))return l}else if(K0(p[0],f[0],n)&&K0(p[1],n,f[1]))return l;i&&v(f[0],l),i&&v(f[1],l)}}if(i)return n===1/0?t.length-1:n===-1/0?0:a;function v(m,y){var C=Math.abs(m-n);C<o&&(o=C,a=y)}},r.visualHandlers={color:{applyVisual:Og("color"),getColorMapper:function(){var n=this.option;return qe("category"===n.mappingMethod?function(t,i){return!i&&(t=this._normalizeData(t)),Pg.call(this,t)}:function(t,i,a){var o=!!a;return!i&&(t=this._normalizeData(t)),a=cs(t,n.parsedVisual,a),o?a:Ka(a,"rgba")},this)},_normalizedToVisual:{linear:function(n){return Ka(cs(n,this.option.parsedVisual),"rgba")},category:Pg,piecewise:function(n,t){var i=Yb.call(this,t);return null==i&&(i=Ka(cs(n,this.option.parsedVisual),"rgba")),i},fixed:gh}},colorHue:q0(function(n,t){return xl(n,t)}),colorSaturation:q0(function(n,t){return xl(n,null,t)}),colorLightness:q0(function(n,t){return xl(n,null,null,t)}),colorAlpha:q0(function(n,t){return hc(n,t)}),decal:{applyVisual:Og("decal"),_normalizedToVisual:{linear:null,category:Pg,piecewise:null,fixed:null}},opacity:{applyVisual:Og("opacity"),_normalizedToVisual:Jb([0,1])},liftZ:{applyVisual:Og("liftZ"),_normalizedToVisual:{linear:gh,category:gh,piecewise:gh,fixed:gh}},symbol:{applyVisual:function(n,t,i){i("symbol",this.mapValueToVisual(n))},_normalizedToVisual:{linear:iO,category:Pg,piecewise:function(n,t){var i=Yb.call(this,t);return null==i&&(i=iO.call(this,n)),i},fixed:gh}},symbolSize:{applyVisual:Og("symbolSize"),_normalizedToVisual:Jb([0,1])}},r}();function Gb(r,n){var t=r.visual,i=[];tt(t)?Mg(t,function(o){i.push(o)}):null!=t&&i.push(t),!n&&1===i.length&&!{color:1,symbol:1}.hasOwnProperty(r.type)&&(i[1]=i[0]),aO(r,i)}function q0(r){return{applyVisual:function(n,t,i){var a=this.mapValueToVisual(n);i("color",r(t("color"),a))},_normalizedToVisual:Jb([0,1])}}function iO(r){var n=this.option.visual;return n[Math.round(mr(r,[0,1],[0,n.length-1],!0))]||{}}function Og(r){return function(n,t,i){i(r,this.mapValueToVisual(n))}}function Pg(r){var n=this.option.visual;return n[this.option.loop&&-1!==r?r%n.length:r]}function gh(){return this.option.visual[0]}function Jb(r){return{linear:function(n){return mr(n,r,this.option.visual,!0)},category:Pg,piecewise:function(n,t){var i=Yb.call(this,t);return null==i&&(i=mr(n,r,this.option.visual,!0)),i},fixed:gh}}function Yb(r){var n=this.option,t=n.pieceList;if(n.hasSpecialVisual){var a=t[Wb.findPieceIndex(r,t)];if(a&&a.visual)return a.visual[this.type]}}function aO(r,n){return r.visual=n,"color"===r.type&&(r.parsedVisual=_t(n,function(t){return ai(t)||[0,0,0,1]})),n}var h4={linear:function(r){return mr(r,this.option.dataExtent,[0,1],!0)},piecewise:function(r){var n=this.option.pieceList,t=Wb.findPieceIndex(r,n,!0);if(null!=t)return mr(t,[0,n.length-1],[0,1],!0)},category:function(r){var n=this.option.categories?this.option.categoryMap[r]:r;return null==n?-1:n},fixed:kr};function K0(r,n,t){return r?n<=t:n<t}const la=Wb;var oO=Xn();const f4={seriesType:"treemap",reset:function(r){var t=r.getData().tree.root;t.isRemoved()||sO(t,{},r.getViewRoot().getAncestors(),r)}};function sO(r,n,t,i){var a=r.getModel(),o=r.getLayout(),l=r.hostTree.data;if(o&&!o.invisible&&o.isInView){var v,u=a.getModel("itemStyle"),c=function p4(r,n,t){var i=Ge({},n),a=t.designatedVisualItemStyle;return De(["color","colorAlpha","colorSaturation"],function(o){a[o]=n[o];var l=r.get(o);a[o]=null,null!=l&&(i[o]=l)}),i}(u,n,i),h=l.ensureUniqueItemVisual(r.dataIndex,"style"),f=u.get("borderColor"),p=u.get("borderColorSaturation");null!=p&&(f=function g4(r,n){return null!=n?xl(n,null,null,r):null}(p,v=lO(c))),h.stroke=f;var m=r.viewChildren;if(m&&m.length){var y=function v4(r,n,t,i,a,o){if(o&&o.length){var l=qb(n,"color")||null!=a.color&&"none"!==a.color&&(qb(n,"colorAlpha")||qb(n,"colorSaturation"));if(l){var u=n.get("visualMin"),c=n.get("visualMax"),h=t.dataExtent.slice();null!=u&&u<h[0]&&(h[0]=u),null!=c&&c>h[1]&&(h[1]=c);var f=n.get("colorMappingBy"),p={type:l.name,dataExtent:h,visual:l.range};"color"!==p.type||"index"!==f&&"id"!==f?p.mappingMethod="linear":(p.mappingMethod="category",p.loop=!0);var v=new la(p);return oO(v).drColorMappingBy=f,v}}}(0,a,o,0,c,m);De(m,function(C,T){if(C.depth>=t.length||C===t[C.depth]){var z=function m4(r,n,t,i,a,o){var l=Ge({},n);if(a){var u=a.type,c="color"===u&&oO(a).drColorMappingBy,h="index"===c?i:"id"===c?o.mapIdToIndex(t.getId()):t.getValue(r.get("visualDimension"));l[u]=a.mapValueToVisual(h)}return l}(a,c,C,T,y,i);sO(C,z,t,i)}})}else v=lO(c),h.fill=v}}function lO(r){var n=Qb(r,"color");if(n){var t=Qb(r,"colorAlpha"),i=Qb(r,"colorSaturation");return i&&(n=xl(n,null,null,i)),t&&(n=hc(n,t)),n}}function Qb(r,n){var t=r[n];if(null!=t&&"none"!==t)return t}function qb(r,n){var t=r.get(n);return we(t)&&t.length?{name:n,range:t}:null}var Ig=Math.max,$0=Math.min,uO=Cr,Kb=De,cO=["itemStyle","borderWidth"],_4=["itemStyle","gapWidth"],y4=["upperLabel","show"],C4=["upperLabel","height"];const x4={seriesType:"treemap",reset:function(r,n,t,i){var a=t.getWidth(),o=t.getHeight(),l=r.option,u=ui(r.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),c=l.size||[],h=Ht(uO(u.width,c[0]),a),f=Ht(uO(u.height,c[1]),o),p=i&&i.type,m=Dg(i,["treemapZoomToNode","treemapRootToNode"],r),y="treemapRender"===p||"treemapMove"===p?i.rootRect:null,C=r.getViewRoot(),T=QM(C);if("treemapMove"!==p){var z="treemapZoomToNode"===p?function D4(r,n,t,i,a){var o=(n||{}).node,l=[i,a];if(!o||o===t)return l;for(var u,c=i*a,h=c*r.option.zoomToNodeRatio;u=o.parentNode;){for(var f=0,p=u.children,v=0,m=p.length;v<m;v++)f+=p[v].getValue();var y=o.getValue();if(0===y)return l;h*=f/y;var C=u.getModel(),T=C.get(cO);(h+=4*T*T+(3*T+Math.max(T,pO(C)))*Math.pow(h,.5))>Af&&(h=Af),o=u}h<c&&(h=c);var E=Math.pow(h/c,.5);return[i*E,a*E]}(r,m,C,h,f):y?[y.width,y.height]:[h,f],E=l.sort;E&&"asc"!==E&&"desc"!==E&&(E="desc");var N={squareRatio:l.squareRatio,sort:E,leafDepth:l.leafDepth};C.hostTree.clearLayouts();var X={x:0,y:0,width:z[0],height:z[1],area:z[0]*z[1]};C.setLayout(X),hO(C,N,!1,0),X=C.getLayout(),Kb(T,function(ce,_e){var ze=(T[_e+1]||C).getValue();ce.setLayout(Ge({dataExtent:[ze,ze],borderWidth:0,upperHeight:0},X))})}var ve=r.getData().tree.root;ve.setLayout(function A4(r,n,t){if(n)return{x:n.x,y:n.y};var i={x:0,y:0};if(!t)return i;var a=t.node,o=a.getLayout();if(!o)return i;for(var l=[o.width/2,o.height/2],u=a;u;){var c=u.getLayout();l[0]+=c.x,l[1]+=c.y,u=u.parentNode}return{x:r.width/2-l[0],y:r.height/2-l[1]}}(u,y,m),!0),r.setLayoutInfo(u),fO(ve,new Mn(-u.x,-u.y,a,o),T,C,0)}};function hO(r,n,t,i){var a,o;if(!r.isRemoved()){var l=r.getLayout();a=l.width,o=l.height;var u=r.getModel(),c=u.get(cO),h=u.get(_4)/2,f=pO(u),p=Math.max(c,f),v=c-h,m=p-h;r.setLayout({borderWidth:c,upperHeight:p,upperLabelHeight:f},!0);var y=(a=Ig(a-2*v,0))*(o=Ig(o-v-m,0)),C=function T4(r,n,t,i,a,o){var l=r.children||[],u=i.sort;"asc"!==u&&"desc"!==u&&(u=null);var c=null!=i.leafDepth&&i.leafDepth<=o;if(a&&!c)return r.viewChildren=[];l=_n(l,function(m){return!m.isRemoved()}),function S4(r,n){n&&r.sort(function(t,i){var a="asc"===n?t.getValue()-i.getValue():i.getValue()-t.getValue();return 0===a?"asc"===n?t.dataIndex-i.dataIndex:i.dataIndex-t.dataIndex:a})}(l,u);var h=function z4(r,n,t){for(var i=0,a=0,o=n.length;a<o;a++)i+=n[a].getValue();var u,l=r.get("visualDimension");return n&&n.length?"value"===l&&t?(u=[n[n.length-1].getValue(),n[0].getValue()],"asc"===t&&u.reverse()):(u=[1/0,-1/0],Kb(n,function(c){var h=c.getValue(l);h<u[0]&&(u[0]=h),h>u[1]&&(u[1]=h)})):u=[NaN,NaN],{sum:i,dataExtent:u}}(n,l,u);if(0===h.sum)return r.viewChildren=[];if(h.sum=function b4(r,n,t,i,a){if(!i)return t;for(var o=r.get("visibleMin"),l=a.length,u=l,c=l-1;c>=0;c--){var h=a["asc"===i?l-c-1:c].getValue();h/t*n<o&&(u=c,t-=h)}return a.splice("asc"===i?0:u,l-u),t}(n,t,h.sum,u,l),0===h.sum)return r.viewChildren=[];for(var f=0,p=l.length;f<p;f++){var v=l[f].getValue()/h.sum*t;l[f].setLayout({area:v})}return c&&(l.length&&r.setLayout({isLeafRoot:!0},!0),l.length=0),r.viewChildren=l,r.setLayout({dataExtent:h.dataExtent},!0),l}(r,u,y,n,t,i);if(C.length){var T={x:v,y:m,width:a,height:o},z=$0(a,o),E=1/0,N=[];N.area=0;for(var X=0,ve=C.length;X<ve;){var ce=C[X];N.push(ce),N.area+=ce.getLayout().area;var _e=w4(N,z,n.squareRatio);_e<=E?(X++,E=_e):(N.area-=N.pop().getLayout().area,dO(N,z,T,h,!1),z=$0(T.width,T.height),N.length=N.area=0,E=1/0)}if(N.length&&dO(N,z,T,h,!0),!t){var ze=u.get("childrenVisibleMin");null!=ze&&y<ze&&(t=!0)}for(X=0,ve=C.length;X<ve;X++)hO(C[X],n,t,i+1)}}}function w4(r,n,t){for(var i=0,a=1/0,o=0,l=void 0,u=r.length;o<u;o++)(l=r[o].getLayout().area)&&(l<a&&(a=l),l>i&&(i=l));var c=r.area*r.area,h=n*n*t;return c?Ig(h*i/c,c/(h*a)):1/0}function dO(r,n,t,i,a){var o=n===t.width?0:1,l=1-o,u=["x","y"],c=["width","height"],h=t[u[o]],f=n?r.area/n:0;(a||f>t[c[l]])&&(f=t[c[l]]);for(var p=0,v=r.length;p<v;p++){var m=r[p],y={},C=f?m.getLayout().area/f:0,T=y[c[l]]=Ig(f-2*i,0),z=t[u[o]]+t[c[o]]-h,E=p===v-1||z<C?z:C,N=y[c[o]]=Ig(E-2*i,0);y[u[l]]=t[u[l]]+$0(i,T/2),y[u[o]]=h+$0(i,N/2),h+=E,m.setLayout(y,!0)}t[u[l]]+=f,t[c[l]]-=f}function fO(r,n,t,i,a){var o=r.getLayout(),l=t[a],u=l&&l===r;if(!(l&&!u||a===t.length&&r!==i)){r.setLayout({isInView:!0,invisible:!u&&!n.intersect(o),isAboveViewRoot:u},!0);var c=new Mn(n.x-o.x,n.y-o.y,n.width,n.height);Kb(r.viewChildren||[],function(h){fO(h,c,t,i,a+1)})}}function pO(r){return r.get(y4)?r.get(C4):0}function M4(r){var n=r.findComponents({mainType:"legend"});!n||!n.length||r.eachSeriesByType("graph",function(t){var i=t.getCategoriesData(),o=t.getGraph().data,l=i.mapArray(i.getName);o.filterSelf(function(u){var h=o.getItemModel(u).getShallow("category");if(null!=h){Ve(h)&&(h=l[h]);for(var f=0;f<n.length;f++)if(!n[f].isSelected(h))return!1}return!0})})}function O4(r){var n={};r.eachSeriesByType("graph",function(t){var i=t.getCategoriesData(),a=t.getData(),o={};i.each(function(l){var u=i.getName(l);o["ec-"+u]=l;var c=i.getItemModel(l),h=c.getModel("itemStyle").getItemStyle();h.fill||(h.fill=t.getColorFromPalette(u,n)),i.setItemVisual(l,"style",h);for(var f=["symbol","symbolSize","symbolKeepAspect"],p=0;p<f.length;p++){var v=c.getShallow(f[p],!0);null!=v&&i.setItemVisual(l,f[p],v)}}),i.count()&&a.each(function(l){var c=a.getItemModel(l).getShallow("category");if(null!=c){Qe(c)&&(c=o["ec-"+c]);var h=i.getItemVisual(c,"style");Ge(a.ensureUniqueItemVisual(l,"style"),h);for(var p=["symbol","symbolSize","symbolKeepAspect"],v=0;v<p.length;v++)a.setItemVisual(l,p[v],i.getItemVisual(c,p[v]))}})})}function j0(r){return r instanceof Array||(r=[r,r]),r}function P4(r){r.eachSeriesByType("graph",function(n){var t=n.getGraph(),i=n.getEdgeData(),a=j0(n.get("edgeSymbol")),o=j0(n.get("edgeSymbolSize"));i.setVisual("fromSymbol",a&&a[0]),i.setVisual("toSymbol",a&&a[1]),i.setVisual("fromSymbolSize",o&&o[0]),i.setVisual("toSymbolSize",o&&o[1]),i.setVisual("style",n.getModel("lineStyle").getLineStyle()),i.each(function(l){var u=i.getItemModel(l),c=t.getEdgeByIndex(l),h=j0(u.getShallow("symbol",!0)),f=j0(u.getShallow("symbolSize",!0)),p=u.getModel("lineStyle").getLineStyle(),v=i.ensureUniqueItemVisual(l,"style");switch(Ge(v,p),v.stroke){case"source":var m=c.node1.getVisual("style");v.stroke=m&&m.fill;break;case"target":m=c.node2.getVisual("style"),v.stroke=m&&m.fill}h[0]&&c.setVisual("fromSymbol",h[0]),h[1]&&c.setVisual("toSymbol",h[1]),f[0]&&c.setVisual("fromSymbolSize",f[0]),f[1]&&c.setVisual("toSymbolSize",f[1])})})}var X0=function(r){return r.get("autoCurveness")||null},gO=function(r,n){var t=X0(r),i=20,a=[];if(Ve(t))i=t;else if(we(t))return void(r.__curvenessList=t);n>i&&(i=n);var o=i%2?i+2:i+3;a=[];for(var l=0;l<o;l++)a.push((l%2?l+1:l)/10*(l%2?-1:1));r.__curvenessList=a},kg=function(r,n,t){var i=[r.id,r.dataIndex].join("."),a=[n.id,n.dataIndex].join(".");return[t.uid,i,a].join("--\x3e")},vO=function(r){var n=r.split("--\x3e");return[n[0],n[2],n[1]].join("--\x3e")},jb=function(r,n){var t=n.__edgeMap;return t[r]?t[r].length:0};function Xb(r,n,t,i){var a=X0(n),o=we(a);if(!a)return null;var l=function(r,n){var t=kg(r.node1,r.node2,n);return n.__edgeMap[t]}(r,n);if(!l)return null;for(var u=-1,c=0;c<l.length;c++)if(l[c]===t){u=c;break}var h=function(r,n){return jb(kg(r.node1,r.node2,n),n)+jb(kg(r.node2,r.node1,n),n)}(r,n);gO(n,h),r.lineStyle=r.lineStyle||{};var f=kg(r.node1,r.node2,n),p=n.__curvenessList,v=o||h%2?0:1;if(l.isForward)return p[v+u];var m=vO(f),y=jb(m,n),C=p[u+y+v];return i?o?a&&0===a[0]?(y+v)%2?C:-C:((y%2?0:1)+v)%2?C:-C:(y+v)%2?C:-C:p[u+y+v]}function mO(r){var n=r.coordinateSystem;if(!n||"view"===n.type){var t=r.getGraph();t.eachNode(function(i){var a=i.getModel();i.setLayout([+a.get("x"),+a.get("y")])}),_O(t,r)}}function _O(r,n){r.eachEdge(function(t,i){var a=ri(t.getModel().get(["lineStyle","curveness"]),-Xb(t,n,i,!0),0),o=Rn(t.node1.getLayout()),l=Rn(t.node2.getLayout()),u=[o,l];+a&&u.push([(o[0]+l[0])/2-(o[1]-l[1])*a,(o[1]+l[1])/2-(l[0]-o[0])*a]),t.setLayout(u)})}function N4(r,n){r.eachSeriesByType("graph",function(t){var i=t.get("layout"),a=t.coordinateSystem;if(a&&"view"!==a.type){var o=t.getData(),l=[];De(a.dimensions,function(v){l=l.concat(o.mapDimensionsAll(v))});for(var u=0;u<o.count();u++){for(var c=[],h=!1,f=0;f<l.length;f++){var p=o.get(l[f],u);isNaN(p)||(h=!0),c.push(p)}o.setItemLayout(u,h?a.dataToPoint(c):[NaN,NaN])}_O(o.graph,t)}else(!i||"none"===i)&&mO(t)})}function Lg(r){var n=r.coordinateSystem;if("view"!==n.type)return 1;var t=r.option.nodeScaleRatio,i=n.scaleX;return((n.getZoom()-1)*t+1)/i}function Rg(r){var n=r.getVisual("symbolSize");return n instanceof Array&&(n=(n[0]+n[1])/2),+n}var yO=Math.PI,eS=[];function CO(r,n){var t=r.coordinateSystem;if(!t||"view"===t.type){var i=t.getBoundingRect(),a=r.getData(),o=a.graph,l=i.width/2+i.x,u=i.height/2+i.y,c=Math.min(i.width,i.height)/2,h=a.count();a.setLayout({cx:l,cy:u}),h&&(F4[n](r,o,a,c,l,u,h),o.eachEdge(function(f,p){var C,v=ri(f.getModel().get(["lineStyle","curveness"]),Xb(f,r,p),0),m=Rn(f.node1.getLayout()),y=Rn(f.node2.getLayout());+v&&(C=[l*(v*=3)+(m[0]+y[0])/2*(1-v),u*v+(m[1]+y[1])/2*(1-v)]),f.setLayout([m,y,C])}))}}var F4={value:function(r,n,t,i,a,o,l){var u=0,c=t.getSum("value"),h=2*Math.PI/(c||l);n.eachNode(function(f){var p=f.getValue("value"),v=h*(c?p:1)/2;u+=v,f.setLayout([i*Math.cos(u)+a,i*Math.sin(u)+o]),u+=v})},symbolSize:function(r,n,t,i,a,o,l){var u=0;eS.length=l;var c=Lg(r);n.eachNode(function(p){var v=Rg(p);isNaN(v)&&(v=2),v<0&&(v=0),v*=c;var m=Math.asin(v/2/i);isNaN(m)&&(m=yO/2),eS[p.dataIndex]=m,u+=2*m});var h=(2*yO-u)/l/2,f=0;n.eachNode(function(p){var v=h+eS[p.dataIndex];f+=v,p.setLayout([i*Math.cos(f)+a,i*Math.sin(f)+o]),f+=v})}};function B4(r){r.eachSeriesByType("graph",function(n){"circular"===n.get("layout")&&CO(n,"symbolSize")})}var Fd=Wa;function U4(r){r.eachSeriesByType("graph",function(n){var t=n.coordinateSystem;if(!t||"view"===t.type)if("force"===n.get("layout")){var i=n.preservedPoints||{},a=n.getGraph(),o=a.data,l=a.edgeData,u=n.getModel("force"),c=u.get("initLayout");n.preservedPoints?o.each(function(N){var X=o.getId(N);o.setItemLayout(N,i[X]||[NaN,NaN])}):c&&"none"!==c?"circular"===c&&CO(n,"value"):mO(n);var h=o.getDataExtent("value"),f=l.getDataExtent("value"),p=u.get("repulsion"),v=u.get("edgeLength"),m=we(p)?p:[p,p],y=we(v)?v:[v,v];y=[y[1],y[0]];var C=o.mapArray("value",function(N,X){var ve=o.getItemLayout(X),ce=mr(N,h,m);return isNaN(ce)&&(ce=(m[0]+m[1])/2),{w:ce,rep:ce,fixed:o.getItemModel(X).get("fixed"),p:!ve||isNaN(ve[0])||isNaN(ve[1])?null:ve}}),T=l.mapArray("value",function(N,X){var ve=a.getEdgeByIndex(X),ce=mr(N,f,y);isNaN(ce)&&(ce=(y[0]+y[1])/2);var _e=ve.getModel(),ze=ri(ve.getModel().get(["lineStyle","curveness"]),-Xb(ve,n,X,!0),0);return{n1:C[ve.node1.dataIndex],n2:C[ve.node2.dataIndex],d:ce,curveness:ze,ignoreForceLayout:_e.get("ignoreForceLayout")}}),z=t.getBoundingRect(),E=function Z4(r,n,t){for(var i=r,a=n,o=t.rect,l=o.width,u=o.height,c=[o.x+l/2,o.y+u/2],h=null==t.gravity?.1:t.gravity,f=0;f<i.length;f++){var p=i[f];p.p||(p.p=xn(l*(Math.random()-.5)+c[0],u*(Math.random()-.5)+c[1])),p.pp=Rn(p.p),p.edges=null}var y,C,v=null==t.friction?.6:t.friction,m=v;return{warmUp:function(){m=.8*v},setFixed:function(T){i[T].fixed=!0},setUnfixed:function(T){i[T].fixed=!1},beforeStep:function(T){y=T},afterStep:function(T){C=T},step:function(T){y&&y(i,a);for(var z=[],E=i.length,N=0;N<a.length;N++){var X=a[N];if(!X.ignoreForceLayout){Mi(z,(ce=X.n2).p,(ve=X.n1).p);var _e=Ta(z)-X.d,ze=ce.w/(ve.w+ce.w);isNaN(ze)&&(ze=0),er(z,z),!ve.fixed&&Fd(ve.p,ve.p,z,ze*_e*m),!ce.fixed&&Fd(ce.p,ce.p,z,-(1-ze)*_e*m)}}for(N=0;N<E;N++)(Ee=i[N]).fixed||(Mi(z,c,Ee.p),Fd(Ee.p,Ee.p,z,h*m));for(N=0;N<E;N++)for(var ve=i[N],Le=N+1;Le<E;Le++){var ce;Mi(z,(ce=i[Le]).p,ve.p),0===(_e=Ta(z))&&(Br(z,Math.random()-.5,Math.random()-.5),_e=1);var ke=(ve.rep+ce.rep)/_e/_e;!ve.fixed&&Fd(ve.pp,ve.pp,z,ke),!ce.fixed&&Fd(ce.pp,ce.pp,z,-ke)}var Ue=[];for(N=0;N<E;N++){var Ee;(Ee=i[N]).fixed||(Mi(Ue,Ee.p,Ee.pp),Fd(Ee.p,Ee.p,Ue,m),Fr(Ee.pp,Ee.p))}var He=(m*=.992)<.01;C&&C(i,a,He),T&&T(He)}}}(C,T,{rect:z,gravity:u.get("gravity"),friction:u.get("friction")});E.beforeStep(function(N,X){for(var ve=0,ce=N.length;ve<ce;ve++)N[ve].fixed&&Fr(N[ve].p,a.getNodeByIndex(ve).getLayout())}),E.afterStep(function(N,X,ve){for(var ce=0,_e=N.length;ce<_e;ce++)N[ce].fixed||a.getNodeByIndex(ce).setLayout(N[ce].p),i[o.getId(ce)]=N[ce].p;for(ce=0,_e=X.length;ce<_e;ce++){var ze=X[ce],Ee=a.getEdgeByIndex(ce),Le=ze.n1.p,ke=ze.n2.p,Ue=Ee.getLayout();(Ue=Ue?Ue.slice():[])[0]=Ue[0]||[],Ue[1]=Ue[1]||[],Fr(Ue[0],Le),Fr(Ue[1],ke),+ze.curveness&&(Ue[2]=[(Le[0]+ke[0])/2-(Le[1]-ke[1])*ze.curveness,(Le[1]+ke[1])/2-(ke[0]-Le[0])*ze.curveness]),Ee.setLayout(Ue)}}),n.forceLayout=E,n.preservedPoints=i,E.step()}else n.forceLayout=null})}function H4(r,n){var t=[];return r.eachSeriesByType("graph",function(i){var a=i.get("coordinateSystem");if(!a||"view"===a){var o=i.getData(),u=[],c=[];ed(o.mapArray(function(T){var z=o.getItemModel(T);return[+z.get("x"),+z.get("y")]}),u,c),c[0]-u[0]==0&&(c[0]+=1,u[0]-=1),c[1]-u[1]==0&&(c[1]+=1,u[1]-=1);var h=(c[0]-u[0])/(c[1]-u[1]),f=function V4(r,n,t){return ui(Ge(r.getBoxLayoutParams(),{aspect:t}),{width:n.getWidth(),height:n.getHeight()})}(i,n,h);isNaN(h)&&(u=[f.x,f.y],c=[f.x+f.width,f.y+f.height]);var p=c[0]-u[0],v=c[1]-u[1],m=f.width,y=f.height,C=i.coordinateSystem=new zg;C.zoomLimit=i.get("scaleLimit"),C.setBoundingRect(u[0],u[1],p,v),C.setViewRect(f.x,f.y,m,y),C.setCenter(i.get("center")),C.setZoom(i.get("zoom")),t.push(C)}}),t}var xO=Gi.prototype,tS=Hp.prototype,TO=function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1};function nS(r){return isNaN(+r.cpx1)||isNaN(+r.cpy1)}!function(r){R(function n(){return null!==r&&r.apply(this,arguments)||this},r)}(TO);var W4=function(r){function n(t){var i=r.call(this,t)||this;return i.type="ec-line",i}return R(n,r),n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new TO},n.prototype.buildPath=function(t,i){nS(i)?xO.buildPath.call(this,t,i):tS.buildPath.call(this,t,i)},n.prototype.pointAt=function(t){return nS(this.shape)?xO.pointAt.call(this,t):tS.pointAt.call(this,t)},n.prototype.tangentAt=function(t){var i=this.shape,a=nS(i)?[i.x2-i.x1,i.y2-i.y1]:tS.tangentAt.call(this,t);return er(a,a)},n}(Fn);const G4=W4;var rS=["fromSymbol","toSymbol"];function bO(r){return"_"+r+"Type"}function SO(r,n,t){var i=n.getItemVisual(t,r);if(i&&"none"!==i){var a=n.getItemVisual(t,r+"Size"),o=n.getItemVisual(t,r+"Rotate"),l=n.getItemVisual(t,r+"Offset"),u=n.getItemVisual(t,r+"KeepAspect"),c=$p(a),h=wd(l||0,c),f=wi(i,-c[0]/2+h[0],-c[1]/2+h[1],c[0],c[1],null,u);return f.__specifiedRotation=null==o||isNaN(o)?void 0:+o*Math.PI/180||0,f.name=r,f}}function iS(r,n){r.x1=n[0][0],r.y1=n[0][1],r.x2=n[1][0],r.y2=n[1][1],r.percent=1;var t=n[2];t?(r.cpx1=t[0],r.cpy1=t[1]):(r.cpx1=NaN,r.cpy1=NaN)}var Y4=function(r){function n(t,i,a){var o=r.call(this)||this;return o._createLine(t,i,a),o}return R(n,r),n.prototype._createLine=function(t,i,a){var o=t.hostModel,u=function J4(r){var n=new G4({name:"line",subPixelOptimize:!0});return iS(n.shape,r),n}(t.getItemLayout(i));u.shape.percent=0,Kr(u,{shape:{percent:1}},o,i),this.add(u),De(rS,function(c){var h=SO(c,t,i);this.add(h),this[bO(c)]=t.getItemVisual(i,c)},this),this._updateCommonStl(t,i,a)},n.prototype.updateData=function(t,i,a){var o=t.hostModel,l=this.childOfName("line"),u=t.getItemLayout(i),c={shape:{}};iS(c.shape,u),Kn(l,c,o,i),De(rS,function(h){var f=t.getItemVisual(i,h),p=bO(h);if(this[p]!==f){this.remove(this.childOfName(h));var v=SO(h,t,i);this.add(v)}this[p]=f},this),this._updateCommonStl(t,i,a)},n.prototype.getLinePath=function(){return this.childAt(0)},n.prototype._updateCommonStl=function(t,i,a){var o=t.hostModel,l=this.childOfName("line"),u=a&&a.emphasisLineStyle,c=a&&a.blurLineStyle,h=a&&a.selectLineStyle,f=a&&a.labelStatesModels,p=a&&a.emphasisDisabled,v=a&&a.focus,m=a&&a.blurScope;if(!a||t.hasItemOption){var y=t.getItemModel(i),C=y.getModel("emphasis");u=C.getModel("lineStyle").getLineStyle(),c=y.getModel(["blur","lineStyle"]).getLineStyle(),h=y.getModel(["select","lineStyle"]).getLineStyle(),p=C.get("disabled"),v=C.get("focus"),m=C.get("blurScope"),f=Li(y)}var T=t.getItemVisual(i,"style"),z=T.stroke;l.useStyle(T),l.style.fill=null,l.style.strokeNoScale=!0,l.ensureState("emphasis").style=u,l.ensureState("blur").style=c,l.ensureState("select").style=h,De(rS,function(ce){var _e=this.childOfName(ce);if(_e){_e.setColor(z),_e.style.opacity=T.opacity;for(var ze=0;ze<oa.length;ze++){var Ee=oa[ze],Le=l.getState(Ee);if(Le){var ke=Le.style||{},Ue=_e.ensureState(Ee),He=Ue.style||(Ue.style={});null!=ke.stroke&&(He[_e.__isEmptyBrush?"stroke":"fill"]=ke.stroke),null!=ke.opacity&&(He.opacity=ke.opacity)}}_e.markRedraw()}},this);var E=o.getRawValue(i);Xi(this,f,{labelDataIndex:i,labelFetcher:{getFormattedLabel:function(ce,_e){return o.getFormattedLabel(ce,_e,t.dataType)}},inheritColor:z||"#000",defaultOpacity:T.opacity,defaultText:(null==E?t.getName(i):isFinite(E)?li(E):E)+""});var N=this.getTextContent();if(N){var X=f.normal;N.__align=N.style.align,N.__verticalAlign=N.style.verticalAlign,N.__position=X.get("position")||"middle";var ve=X.get("distance");we(ve)||(ve=[ve,ve]),N.__labelDistance=ve}this.setTextConfig({position:null,local:!0,inside:!1}),di(this,v,m,p)},n.prototype.highlight=function(){gs(this)},n.prototype.downplay=function(){vs(this)},n.prototype.updateLayout=function(t,i){this.setLinePoints(t.getItemLayout(i))},n.prototype.setLinePoints=function(t){var i=this.childOfName("line");iS(i.shape,t),i.dirty()},n.prototype.beforeUpdate=function(){var t=this,i=t.childOfName("fromSymbol"),a=t.childOfName("toSymbol"),o=t.getTextContent();if(i||a||o&&!o.ignore){for(var l=1,u=this.parent;u;)u.scaleX&&(l/=u.scaleX),u=u.parent;var c=t.childOfName("line");if(this.__dirty||c.__dirty){var h=c.shape.percent,f=c.pointAt(0),p=c.pointAt(h),v=Mi([],p,f);if(er(v,v),i&&(i.setPosition(f),m(i,0),i.scaleX=i.scaleY=l*h,i.markRedraw()),a&&(a.setPosition(p),m(a,1),a.scaleX=a.scaleY=l*h,a.markRedraw()),o&&!o.ignore){o.x=o.y=0,o.originX=o.originY=0;var y=void 0,C=void 0,T=o.__labelDistance,z=T[0]*l,E=T[1]*l,N=h/2,X=c.tangentAt(N),ve=[X[1],-X[0]],ce=c.pointAt(N);ve[1]>0&&(ve[0]=-ve[0],ve[1]=-ve[1]);var _e=X[0]<0?-1:1;if("start"!==o.__position&&"end"!==o.__position){var ze=-Math.atan2(X[1],X[0]);p[0]<f[0]&&(ze=Math.PI+ze),o.rotation=ze}var Ee=void 0;switch(o.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":Ee=-E,C="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":Ee=E,C="top";break;default:Ee=0,C="middle"}switch(o.__position){case"end":o.x=v[0]*z+p[0],o.y=v[1]*E+p[1],y=v[0]>.8?"left":v[0]<-.8?"right":"center",C=v[1]>.8?"top":v[1]<-.8?"bottom":"middle";break;case"start":o.x=-v[0]*z+f[0],o.y=-v[1]*E+f[1],y=v[0]>.8?"right":v[0]<-.8?"left":"center",C=v[1]>.8?"bottom":v[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":o.x=z*_e+f[0],o.y=f[1]+Ee,y=X[0]<0?"right":"left",o.originX=-z*_e,o.originY=-Ee;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":o.x=ce[0],o.y=ce[1]+Ee,y="center",o.originY=-Ee;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":o.x=-z*_e+p[0],o.y=p[1]+Ee,y=X[0]>=0?"right":"left",o.originX=z*_e,o.originY=-Ee}o.scaleX=o.scaleY=l,o.setStyle({verticalAlign:o.__verticalAlign||C,align:o.__align||y})}}}function m(Le,ke){var Ue=Le.__specifiedRotation;if(null==Ue){var He=c.tangentAt(ke);Le.attr("rotation",(1===ke?-1:1)*Math.PI/2-Math.atan2(He[1],He[0]))}else Le.attr("rotation",Ue)}},n}(hn);const aS=Y4;var Q4=function(){function r(n){this.group=new hn,this._LineCtor=n||aS}return r.prototype.updateData=function(n){var t=this;this._progressiveEls=null;var i=this,a=i.group,o=i._lineData;i._lineData=n,o||a.removeAll();var l=zO(n);n.diff(o).add(function(u){t._doAdd(n,u,l)}).update(function(u,c){t._doUpdate(o,n,c,u,l)}).remove(function(u){a.remove(o.getItemGraphicEl(u))}).execute()},r.prototype.updateLayout=function(){var n=this._lineData;!n||n.eachItemGraphicEl(function(t,i){t.updateLayout(n,i)},this)},r.prototype.incrementalPrepareUpdate=function(n){this._seriesScope=zO(n),this._lineData=null,this.group.removeAll()},r.prototype.incrementalUpdate=function(n,t){function i(u){!u.isGroup&&!function q4(r){return r.animators&&r.animators.length>0}(u)&&(u.incremental=!0,u.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[];for(var a=n.start;a<n.end;a++)if(oS(t.getItemLayout(a))){var l=new this._LineCtor(t,a,this._seriesScope);l.traverse(i),this.group.add(l),t.setItemGraphicEl(a,l),this._progressiveEls.push(l)}},r.prototype.remove=function(){this.group.removeAll()},r.prototype.eachRendered=function(n){Ju(this._progressiveEls||this.group,n)},r.prototype._doAdd=function(n,t,i){if(oS(n.getItemLayout(t))){var o=new this._LineCtor(n,t,i);n.setItemGraphicEl(t,o),this.group.add(o)}},r.prototype._doUpdate=function(n,t,i,a,o){var l=n.getItemGraphicEl(i);oS(t.getItemLayout(a))?(l?l.updateData(t,a,o):l=new this._LineCtor(t,a,o),t.setItemGraphicEl(a,l),this.group.add(l)):this.group.remove(l)},r}();function zO(r){var n=r.hostModel,t=n.getModel("emphasis");return{lineStyle:n.getModel("lineStyle").getLineStyle(),emphasisLineStyle:t.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:n.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:n.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:t.get("disabled"),blurScope:t.get("blurScope"),focus:t.get("focus"),labelStatesModels:Li(n)}}function wO(r){return isNaN(r[0])||isNaN(r[1])}function oS(r){return r&&!wO(r[0])&&!wO(r[1])}const sS=Q4;var lS=[],uS=[],cS=[],Bd=pi,hS=xr,DO=Math.abs;function AO(r,n,t){for(var u,i=r[0],a=r[1],o=r[2],l=1/0,c=t*t,h=.1,f=.1;f<=.9;f+=.1)lS[0]=Bd(i[0],a[0],o[0],f),lS[1]=Bd(i[1],a[1],o[1],f),(p=DO(hS(lS,n)-c))<l&&(l=p,u=f);for(var v=0;v<32;v++){var m=u+h;uS[0]=Bd(i[0],a[0],o[0],u),uS[1]=Bd(i[1],a[1],o[1],u),cS[0]=Bd(i[0],a[0],o[0],m),cS[1]=Bd(i[1],a[1],o[1],m);var p=hS(uS,n)-c;if(DO(p)<.01)break;var y=hS(cS,n)-c;h/=2,p<0?y>=0?u+=h:u-=h:y>=0?u-=h:u+=h}return u}function dS(r,n){var t=[],i=us,a=[[],[],[]],o=[[],[]],l=[];n/=2,r.eachEdge(function(u,c){var h=u.getLayout(),f=u.getVisual("fromSymbol"),p=u.getVisual("toSymbol");h.__original||(h.__original=[Rn(h[0]),Rn(h[1])],h[2]&&h.__original.push(Rn(h[2])));var v=h.__original;if(null!=h[2]){if(Fr(a[0],v[0]),Fr(a[1],v[2]),Fr(a[2],v[1]),f&&"none"!==f){var m=Rg(u.node1),y=AO(a,v[0],m*n);i(a[0][0],a[1][0],a[2][0],y,t),a[0][0]=t[3],a[1][0]=t[4],i(a[0][1],a[1][1],a[2][1],y,t),a[0][1]=t[3],a[1][1]=t[4]}p&&"none"!==p&&(m=Rg(u.node2),y=AO(a,v[1],m*n),i(a[0][0],a[1][0],a[2][0],y,t),a[1][0]=t[1],a[2][0]=t[2],i(a[0][1],a[1][1],a[2][1],y,t),a[1][1]=t[1],a[2][1]=t[2]),Fr(h[0],a[0]),Fr(h[1],a[2]),Fr(h[2],a[1])}else Fr(o[0],v[0]),Fr(o[1],v[1]),Mi(l,o[1],o[0]),er(l,l),f&&"none"!==f&&(m=Rg(u.node1),Wa(o[0],o[0],l,m*n)),p&&"none"!==p&&(m=Rg(u.node2),Wa(o[1],o[1],l,-m*n)),Fr(h[0],o[0]),Fr(h[1],o[1])})}function EO(r){return"view"===r.type}var K4=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.init=function(t,i){var a=new mg,o=new sS,l=this.group;this._controller=new bg(i.getZr()),this._controllerHost={target:l},l.add(a.group),l.add(o.group),this._symbolDraw=a,this._lineDraw=o,this._firstRender=!0},n.prototype.render=function(t,i,a){var o=this,l=t.coordinateSystem;this._model=t;var u=this._symbolDraw,c=this._lineDraw,h=this.group;if(EO(l)){var f={x:l.x,y:l.y,scaleX:l.scaleX,scaleY:l.scaleY};this._firstRender?h.attr(f):Kn(h,f,t)}dS(t.getGraph(),Lg(t));var p=t.getData();u.updateData(p);var v=t.getEdgeData();c.updateData(v),this._updateNodeAndLinkScale(),this._updateController(t,i,a),clearTimeout(this._layoutTimeout);var m=t.forceLayout,y=t.get(["force","layoutAnimation"]);m&&this._startForceLayoutIteration(m,y),p.graph.eachNode(function(E){var N=E.dataIndex,X=E.getGraphicEl(),ve=E.getModel();if(X){X.off("drag").off("dragend");var ce=ve.get("draggable");ce&&X.on("drag",function(){m&&(m.warmUp(),!o._layouting&&o._startForceLayoutIteration(m,y),m.setFixed(N),p.setItemLayout(N,[X.x,X.y]))}).on("dragend",function(){m&&m.setUnfixed(N)}),X.setDraggable(ce&&!!m),"adjacency"===ve.get(["emphasis","focus"])&&(dn(X).focus=E.getAdjacentDataIndices())}}),p.graph.eachEdge(function(E){var N=E.getGraphicEl(),X=E.getModel().get(["emphasis","focus"]);!N||"adjacency"===X&&(dn(N).focus={edge:[E.dataIndex],node:[E.node1.dataIndex,E.node2.dataIndex]})});var C="circular"===t.get("layout")&&t.get(["circular","rotateLabel"]),T=p.getLayout("cx"),z=p.getLayout("cy");p.eachItemGraphicEl(function(E,N){var ve=p.getItemModel(N).get(["label","rotate"])||0,ce=E.getSymbolPath();if(C){var _e=p.getItemLayout(N),ze=Math.atan2(_e[1]-z,_e[0]-T);ze<0&&(ze=2*Math.PI+ze);var Ee=_e[0]<T;Ee&&(ze-=Math.PI);var Le=Ee?"left":"right";ce.setTextConfig({rotation:-ze,position:Le,origin:"center"});var ke=ce.ensureState("emphasis");Ge(ke.textConfig||(ke.textConfig={}),{position:Le})}else ce.setTextConfig({rotation:ve*=Math.PI/180})}),this._firstRender=!1},n.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},n.prototype._startForceLayoutIteration=function(t,i){var a=this;!function o(){t.step(function(l){a.updateLayout(a._model),(a._layouting=!l)&&(i?a._layoutTimeout=setTimeout(o,16):o())})}()},n.prototype._updateController=function(t,i,a){var o=this,l=this._controller,u=this._controllerHost,c=this.group;l.setPointerChecker(function(h,f,p){var v=c.getBoundingRect();return v.applyTransform(c.transform),v.contain(f,p)&&!U0(h,a,t)}),EO(t.coordinateSystem)?(l.enable(t.get("roam")),u.zoomLimit=t.get("scaleLimit"),u.zoom=t.coordinateSystem.getZoom(),l.off("pan").off("zoom").on("pan",function(h){Eb(u,h.dx,h.dy),a.dispatchAction({seriesId:t.id,type:"graphRoam",dx:h.dx,dy:h.dy})}).on("zoom",function(h){Mb(u,h.scale,h.originX,h.originY),a.dispatchAction({seriesId:t.id,type:"graphRoam",zoom:h.scale,originX:h.originX,originY:h.originY}),o._updateNodeAndLinkScale(),dS(t.getGraph(),Lg(t)),o._lineDraw.updateLayout(),a.updateLabelLayout()})):l.disable()},n.prototype._updateNodeAndLinkScale=function(){var t=this._model,i=t.getData(),a=Lg(t);i.eachItemGraphicEl(function(o,l){o&&o.setSymbolScale(a)})},n.prototype.updateLayout=function(t){dS(t.getGraph(),Lg(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},n.prototype.remove=function(t,i){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},n.type="graph",n}(Vr);const $4=K4;function Zd(r){return"_EC_"+r}var j4=function(){function r(n){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=n||!1}return r.prototype.isDirected=function(){return this._directed},r.prototype.addNode=function(n,t){var i=this._nodesMap;if(!i[Zd(n=null==n?""+t:""+n)]){var a=new vh(n,t);return a.hostGraph=this,this.nodes.push(a),i[Zd(n)]=a,a}},r.prototype.getNodeByIndex=function(n){var t=this.data.getRawIndex(n);return this.nodes[t]},r.prototype.getNodeById=function(n){return this._nodesMap[Zd(n)]},r.prototype.addEdge=function(n,t,i){var a=this._nodesMap,o=this._edgesMap;if(Ve(n)&&(n=this.nodes[n]),Ve(t)&&(t=this.nodes[t]),n instanceof vh||(n=a[Zd(n)]),t instanceof vh||(t=a[Zd(t)]),n&&t){var l=n.id+"-"+t.id,u=new MO(n,t,i);return u.hostGraph=this,this._directed&&(n.outEdges.push(u),t.inEdges.push(u)),n.edges.push(u),n!==t&&t.edges.push(u),this.edges.push(u),o[l]=u,u}},r.prototype.getEdgeByIndex=function(n){var t=this.edgeData.getRawIndex(n);return this.edges[t]},r.prototype.getEdge=function(n,t){n instanceof vh&&(n=n.id),t instanceof vh&&(t=t.id);var i=this._edgesMap;return this._directed?i[n+"-"+t]:i[n+"-"+t]||i[t+"-"+n]},r.prototype.eachNode=function(n,t){for(var i=this.nodes,a=i.length,o=0;o<a;o++)i[o].dataIndex>=0&&n.call(t,i[o],o)},r.prototype.eachEdge=function(n,t){for(var i=this.edges,a=i.length,o=0;o<a;o++)i[o].dataIndex>=0&&i[o].node1.dataIndex>=0&&i[o].node2.dataIndex>=0&&n.call(t,i[o],o)},r.prototype.breadthFirstTraverse=function(n,t,i,a){if(t instanceof vh||(t=this._nodesMap[Zd(t)]),t){for(var o="out"===i?"outEdges":"in"===i?"inEdges":"edges",l=0;l<this.nodes.length;l++)this.nodes[l].__visited=!1;if(!n.call(a,t,null))for(var u=[t];u.length;){var c=u.shift(),h=c[o];for(l=0;l<h.length;l++){var f=h[l],p=f.node1===c?f.node2:f.node1;if(!p.__visited){if(n.call(a,p,c))return;u.push(p),p.__visited=!0}}}}},r.prototype.update=function(){for(var n=this.data,t=this.edgeData,i=this.nodes,a=this.edges,o=0,l=i.length;o<l;o++)i[o].dataIndex=-1;for(o=0,l=n.count();o<l;o++)i[n.getRawIndex(o)].dataIndex=o;for(t.filterSelf(function(u){var c=a[t.getRawIndex(u)];return c.node1.dataIndex>=0&&c.node2.dataIndex>=0}),o=0,l=a.length;o<l;o++)a[o].dataIndex=-1;for(o=0,l=t.count();o<l;o++)a[t.getRawIndex(o)].dataIndex=o},r.prototype.clone=function(){for(var n=new r(this._directed),t=this.nodes,i=this.edges,a=0;a<t.length;a++)n.addNode(t[a].id,t[a].dataIndex);for(a=0;a<i.length;a++){var o=i[a];n.addEdge(o.node1.id,o.node2.id,o.dataIndex)}return n},r}(),vh=function(){function r(n,t){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=null==n?"":n,this.dataIndex=null==t?-1:t}return r.prototype.degree=function(){return this.edges.length},r.prototype.inDegree=function(){return this.inEdges.length},r.prototype.outDegree=function(){return this.outEdges.length},r.prototype.getModel=function(n){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(n)},r.prototype.getAdjacentDataIndices=function(){for(var n={edge:[],node:[]},t=0;t<this.edges.length;t++){var i=this.edges[t];i.dataIndex<0||(n.edge.push(i.dataIndex),n.node.push(i.node1.dataIndex,i.node2.dataIndex))}return n},r}(),MO=function(){function r(n,t,i){this.dataIndex=-1,this.node1=n,this.node2=t,this.dataIndex=null==i?-1:i}return r.prototype.getModel=function(n){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(n)},r.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},r}();function OO(r,n){return{getValue:function(t){var i=this[r][n];return i.getStore().get(i.getDimensionIndex(t||"value"),this.dataIndex)},setVisual:function(t,i){this.dataIndex>=0&&this[r][n].setItemVisual(this.dataIndex,t,i)},getVisual:function(t){return this[r][n].getItemVisual(this.dataIndex,t)},setLayout:function(t,i){this.dataIndex>=0&&this[r][n].setItemLayout(this.dataIndex,t,i)},getLayout:function(){return this[r][n].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[r][n].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[r][n].getRawIndex(this.dataIndex)}}}Qt(vh,OO("hostGraph","data")),Qt(MO,OO("hostGraph","edgeData"));const X4=j4;function PO(r,n,t,i,a){for(var o=new X4(i),l=0;l<r.length;l++)o.addNode(Cr(r[l].id,r[l].name,l),l);var u=[],c=[],h=0;for(l=0;l<n.length;l++){var f=n[l],p=f.source,v=f.target;o.addEdge(p,v,h)&&(c.push(f),u.push(Cr(Si(f.id,null),p+" > "+v)),h++)}var y,m=t.get("coordinateSystem");if("cartesian2d"===m||"polar"===m)y=ol(r,t);else{var C=Fu.get(m),T=C&&C.dimensions||[];Ye(T,"value")<0&&T.concat(["value"]);var z=Ed(r,{coordDimensions:T,encodeDefine:t.getEncode()}).dimensions;(y=new _a(z,t)).initData(r)}var E=new _a(["value"],t);return E.initData(c,u),a&&a(y,E),YM({mainData:y,struct:o,structAttr:"graph",datas:{node:y,edge:E},datasAttr:{node:"data",edge:"edgeData"}}),o.update(),o}var e9=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.hasSymbolVisual=!0,t}return R(n,r),n.prototype.init=function(t){r.prototype.init.apply(this,arguments);var i=this;function a(){return i._categoriesData}this.legendVisualProvider=new Cg(a,a),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},n.prototype.mergeOption=function(t){r.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},n.prototype.mergeDefaultAndTheme=function(t){r.prototype.mergeDefaultAndTheme.apply(this,arguments),Il(t,"edgeLabel",["show"])},n.prototype.getInitialData=function(t,i){var a=t.edges||t.links||[],o=t.data||t.nodes||[],l=this;if(o&&a){!function L4(r){!X0(r)||(r.__curvenessList=[],r.__edgeMap={},gO(r))}(this);var u=PO(o,a,this,!0,function c(h,f){h.wrapMethod("getItemModel",function(y){var z=l._categoriesModels[y.getShallow("category")];return z&&(z.parentModel=y.parentModel,y.parentModel=z),y});var p=Or.prototype.getModel;function v(y,C){var T=p.call(this,y,C);return T.resolveParentPath=m,T}function m(y){if(y&&("label"===y[0]||"label"===y[1])){var C=y.slice();return"label"===y[0]?C[0]="edgeLabel":"label"===y[1]&&(C[1]="edgeLabel"),C}return y}f.wrapMethod("getItemModel",function(y){return y.resolveParentPath=m,y.getModel=v,y})});return De(u.edges,function(h){!function R4(r,n,t,i){if(X0(t)){var a=kg(r,n,t),o=t.__edgeMap,l=o[vO(a)];o[a]&&!l?o[a].isForward=!0:l&&o[a]&&(l.isForward=!0,o[a].isForward=!1),o[a]=o[a]||[],o[a].push(i)}}(h.node1,h.node2,this,h.dataIndex)},this),u.data}},n.prototype.getGraph=function(){return this.getData().graph},n.prototype.getEdgeData=function(){return this.getGraph().edgeData},n.prototype.getCategoriesData=function(){return this._categoriesData},n.prototype.formatTooltip=function(t,i,a){if("edge"===a){var o=this.getData(),l=this.getDataParams(t,a),u=o.graph.getEdgeByIndex(t),c=o.getName(u.node1.dataIndex),h=o.getName(u.node2.dataIndex),f=[];return null!=c&&f.push(c),null!=h&&f.push(h),Wi("nameValue",{name:f.join(" > "),value:l.value,noValue:null==l.value})}return Fw({series:this,dataIndex:t,multipleSeries:i})},n.prototype._updateCategoriesData=function(){var t=_t(this.option.categories||[],function(a){return null!=a.value?a:Ge({value:0},a)}),i=new _a(["value"],this);i.initData(t),this._categoriesData=i,this._categoriesModels=i.mapArray(function(a){return i.getItemModel(a)})},n.prototype.setZoom=function(t){this.option.zoom=t},n.prototype.setCenter=function(t){this.option.center=t},n.prototype.isAnimationEnabled=function(){return r.prototype.isAnimationEnabled.call(this)&&!("force"===this.get("layout")&&this.get(["force","layoutAnimation"]))},n.type="series.graph",n.dependencies=["grid","polar","geo","singleAxis","calendar"],n.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},n}(Xr);const t9=e9;var n9={type:"graphRoam",event:"graphRoam",update:"none"},a9=function r(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0},o9=function(r){function n(t){var i=r.call(this,t)||this;return i.type="pointer",i}return R(n,r),n.prototype.getDefaultShape=function(){return new a9},n.prototype.buildPath=function(t,i){var a=Math.cos,o=Math.sin,l=i.r,u=i.width,c=i.angle,h=i.x-a(c)*u*(u>=l/3?1:2),f=i.y-o(c)*u*(u>=l/3?1:2);c=i.angle-Math.PI/2,t.moveTo(h,f),t.lineTo(i.x+a(c)*u,i.y+o(c)*u),t.lineTo(i.x+a(i.angle)*l,i.y+o(i.angle)*l),t.lineTo(i.x-a(c)*u,i.y-o(c)*u),t.lineTo(h,f)},n}(Fn);const s9=o9;function ey(r,n){var t=null==r?"":r+"";return n&&(Qe(n)?t=n.replace("{value}",t):Pe(n)&&(t=n(r))),t}var u9=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.render=function(t,i,a){this.group.removeAll();var o=t.get(["axisLine","lineStyle","color"]),l=function l9(r,n){var t=r.get("center"),i=n.getWidth(),a=n.getHeight(),o=Math.min(i,a);return{cx:Ht(t[0],n.getWidth()),cy:Ht(t[1],n.getHeight()),r:Ht(r.get("radius"),o/2)}}(t,a);this._renderMain(t,i,a,o,l),this._data=t.getData()},n.prototype.dispose=function(){},n.prototype._renderMain=function(t,i,a,o,l){var u=this.group,c=t.get("clockwise"),h=-t.get("startAngle")/180*Math.PI,f=-t.get("endAngle")/180*Math.PI,p=t.getModel("axisLine"),m=p.get("roundCap")?k0:Oa,y=p.get("show"),C=p.getModel("lineStyle"),T=C.get("width"),z=[h,f];jv(z,!c);for(var E=(f=z[1])-(h=z[0]),N=h,X=0;y&&X<o.length;X++){var ce=new m({shape:{startAngle:N,endAngle:f=h+E*Math.min(Math.max(o[X][0],0),1),cx:l.cx,cy:l.cy,clockwise:c,r0:l.r-T,r:l.r},silent:!0});ce.setStyle({fill:o[X][1]}),ce.setStyle(C.getLineStyle(["color","width"])),u.add(ce),N=f}var _e=function(ze){if(ze<=0)return o[0][1];var Ee;for(Ee=0;Ee<o.length;Ee++)if(o[Ee][0]>=ze&&(0===Ee?0:o[Ee-1][0])<ze)return o[Ee][1];return o[Ee-1][1]};this._renderTicks(t,i,a,_e,l,h,f,c,T),this._renderTitleAndDetail(t,i,a,_e,l),this._renderAnchor(t,l),this._renderPointer(t,i,a,_e,l,h,f,c,T)},n.prototype._renderTicks=function(t,i,a,o,l,u,c,h,f){for(var Ke,nt,p=this.group,v=l.cx,m=l.cy,y=l.r,C=+t.get("min"),T=+t.get("max"),z=t.getModel("splitLine"),E=t.getModel("axisTick"),N=t.getModel("axisLabel"),X=t.get("splitNumber"),ve=E.get("splitNumber"),ce=Ht(z.get("length"),y),_e=Ht(E.get("length"),y),ze=u,Ee=(c-u)/X,Le=Ee/ve,ke=z.getModel("lineStyle").getLineStyle(),Ue=E.getModel("lineStyle").getLineStyle(),He=z.get("distance"),lt=0;lt<=X;lt++){if(Ke=Math.cos(ze),nt=Math.sin(ze),z.get("show")){var mt=new Gi({shape:{x1:Ke*(y-(St=He?He+f:f))+v,y1:nt*(y-St)+m,x2:Ke*(y-ce-St)+v,y2:nt*(y-ce-St)+m},style:ke,silent:!0});"auto"===ke.stroke&&mt.setStyle({stroke:o(lt/X)}),p.add(mt)}if(N.get("show")){var St=N.get("distance")+He,wt=ey(li(lt/X*(T-C)+C),N.get("formatter")),kt=o(lt/X);p.add(new Gn({style:$r(N,{text:wt,x:Ke*(y-ce-St)+v,y:nt*(y-ce-St)+m,verticalAlign:nt<-.8?"top":nt>.8?"bottom":"middle",align:Ke<-.4?"left":Ke>.4?"right":"center"},{inheritColor:kt}),silent:!0}))}if(E.get("show")&&lt!==X){St=(St=E.get("distance"))?St+f:f;for(var Yt=0;Yt<=ve;Yt++){Ke=Math.cos(ze),nt=Math.sin(ze);var Xt=new Gi({shape:{x1:Ke*(y-St)+v,y1:nt*(y-St)+m,x2:Ke*(y-_e-St)+v,y2:nt*(y-_e-St)+m},silent:!0,style:Ue});"auto"===Ue.stroke&&Xt.setStyle({stroke:o((lt+Yt/ve)/X)}),p.add(Xt),ze+=Le}ze-=Le}else ze+=Ee}},n.prototype._renderPointer=function(t,i,a,o,l,u,c,h,f){var p=this.group,v=this._data,m=this._progressEls,y=[],C=t.get(["pointer","show"]),T=t.getModel("progress"),z=T.get("show"),E=t.getData(),N=E.mapDimension("value"),X=+t.get("min"),ve=+t.get("max"),ce=[X,ve],_e=[u,c];function ze(Le,ke){var Yt,He=E.getItemModel(Le).getModel("pointer"),Ke=Ht(He.get("width"),l.r),nt=Ht(He.get("length"),l.r),lt=t.get(["pointer","icon"]),St=He.get("offsetCenter"),mt=Ht(St[0],l.r),wt=Ht(St[1],l.r),kt=He.get("keepAspect");return(Yt=lt?wi(lt,mt-Ke/2,wt-nt,Ke,nt,null,kt):new s9({shape:{angle:-Math.PI/2,width:Ke,r:nt,x:mt,y:wt}})).rotation=-(ke+Math.PI/2),Yt.x=l.cx,Yt.y=l.cy,Yt}function Ee(Le,ke){var He=T.get("roundCap")?k0:Oa,Ke=T.get("overlap"),nt=Ke?T.get("width"):f/E.count(),mt=new He({shape:{startAngle:u,endAngle:ke,cx:l.cx,cy:l.cy,clockwise:h,r0:Ke?l.r-nt:l.r-(Le+1)*nt,r:Ke?l.r:l.r-Le*nt}});return Ke&&(mt.z2=ve-E.get(N,Le)%ve),mt}(z||C)&&(E.diff(v).add(function(Le){var ke=E.get(N,Le);if(C){var Ue=ze(Le,u);Kr(Ue,{rotation:-((isNaN(+ke)?_e[0]:mr(ke,ce,_e,!0))+Math.PI/2)},t),p.add(Ue),E.setItemGraphicEl(Le,Ue)}if(z){var He=Ee(Le,u),Ke=T.get("clip");Kr(He,{shape:{endAngle:mr(ke,ce,_e,Ke)}},t),p.add(He),Xf(t.seriesIndex,E.dataType,Le,He),y[Le]=He}}).update(function(Le,ke){var Ue=E.get(N,Le);if(C){var He=v.getItemGraphicEl(ke),Ke=He?He.rotation:u,nt=ze(Le,Ke);nt.rotation=Ke,Kn(nt,{rotation:-((isNaN(+Ue)?_e[0]:mr(Ue,ce,_e,!0))+Math.PI/2)},t),p.add(nt),E.setItemGraphicEl(Le,nt)}if(z){var lt=m[ke],mt=Ee(Le,lt?lt.shape.endAngle:u),wt=T.get("clip");Kn(mt,{shape:{endAngle:mr(Ue,ce,_e,wt)}},t),p.add(mt),Xf(t.seriesIndex,E.dataType,Le,mt),y[Le]=mt}}).execute(),E.each(function(Le){var ke=E.getItemModel(Le),Ue=ke.getModel("emphasis"),He=Ue.get("focus"),Ke=Ue.get("blurScope"),nt=Ue.get("disabled");if(C){var lt=E.getItemGraphicEl(Le),St=E.getItemVisual(Le,"style"),mt=St.fill;if(lt instanceof ki){var wt=lt.style;lt.useStyle(Ge({image:wt.image,x:wt.x,y:wt.y,width:wt.width,height:wt.height},St))}else lt.useStyle(St),"pointer"!==lt.type&&lt.setColor(mt);lt.setStyle(ke.getModel(["pointer","itemStyle"]).getItemStyle()),"auto"===lt.style.fill&&lt.setStyle("fill",o(mr(E.get(N,Le),ce,[0,1],!0))),lt.z2EmphasisLift=0,Zi(lt,ke),di(lt,He,Ke,nt)}if(z){var kt=y[Le];kt.useStyle(E.getItemVisual(Le,"style")),kt.setStyle(ke.getModel(["progress","itemStyle"]).getItemStyle()),kt.z2EmphasisLift=0,Zi(kt,ke),di(kt,He,Ke,nt)}}),this._progressEls=y)},n.prototype._renderAnchor=function(t,i){var a=t.getModel("anchor");if(a.get("show")){var l=a.get("size"),u=a.get("icon"),c=a.get("offsetCenter"),h=a.get("keepAspect"),f=wi(u,i.cx-l/2+Ht(c[0],i.r),i.cy-l/2+Ht(c[1],i.r),l,l,null,h);f.z2=a.get("showAbove")?1:0,f.setStyle(a.getModel("itemStyle").getItemStyle()),this.group.add(f)}},n.prototype._renderTitleAndDetail=function(t,i,a,o,l){var u=this,c=t.getData(),h=c.mapDimension("value"),f=+t.get("min"),p=+t.get("max"),v=new hn,m=[],y=[],C=t.isAnimationEnabled(),T=t.get(["pointer","showAbove"]);c.diff(this._data).add(function(z){m[z]=new Gn({silent:!0}),y[z]=new Gn({silent:!0})}).update(function(z,E){m[z]=u._titleEls[E],y[z]=u._detailEls[E]}).execute(),c.each(function(z){var E=c.getItemModel(z),N=c.get(h,z),X=new hn,ve=o(mr(N,[f,p],[0,1],!0)),ce=E.getModel("title");if(ce.get("show")){var _e=ce.get("offsetCenter"),ze=l.cx+Ht(_e[0],l.r),Ee=l.cy+Ht(_e[1],l.r);(Le=m[z]).attr({z2:T?0:2,style:$r(ce,{x:ze,y:Ee,text:c.getName(z),align:"center",verticalAlign:"middle"},{inheritColor:ve})}),X.add(Le)}var ke=E.getModel("detail");if(ke.get("show")){var Ue=ke.get("offsetCenter"),He=l.cx+Ht(Ue[0],l.r),Ke=l.cy+Ht(Ue[1],l.r),nt=Ht(ke.get("width"),l.r),lt=Ht(ke.get("height"),l.r),St=t.get(["progress","show"])?c.getItemVisual(z,"style").fill:ve,Le=y[z],mt=ke.get("formatter");Le.attr({z2:T?0:2,style:$r(ke,{x:He,y:Ke,text:ey(N,mt),width:isNaN(nt)?null:nt,height:isNaN(lt)?null:lt,align:"center",verticalAlign:"middle"},{inheritColor:St})}),Bm(Le,{normal:ke},N,function(kt){return ey(kt,mt)}),C&&Zm(Le,z,c,t,{getFormattedLabel:function(kt,Yt,Xt,pn,Bn,Ar){return ey(Ar?Ar.interpolatedValue:N,mt)}}),X.add(Le)}v.add(X)}),this.group.add(v),this._titleEls=m,this._detailEls=y},n.type="gauge",n}(Vr);const c9=u9;var h9=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.visualStyleAccessPath="itemStyle",t}return R(n,r),n.prototype.getInitialData=function(t,i){return Ld(this,["value"])},n.type="series.gauge",n.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},n}(Xr);const d9=h9;var p9=["itemStyle","opacity"],g9=function(r){function n(t,i){var a=r.call(this)||this,o=a,l=new Ia,u=new Gn;return o.setTextContent(u),a.setTextGuideLine(l),a.updateData(t,i,!0),a}return R(n,r),n.prototype.updateData=function(t,i,a){var o=this,l=t.hostModel,u=t.getItemModel(i),c=t.getItemLayout(i),h=u.getModel("emphasis"),f=u.get(p9);f=null==f?1:f,a||bo(o),o.useStyle(t.getItemVisual(i,"style")),o.style.lineJoin="round",a?(o.setShape({points:c.points}),o.style.opacity=0,Kr(o,{style:{opacity:f}},l,i)):Kn(o,{style:{opacity:f},shape:{points:c.points}},l,i),Zi(o,u),this._updateLabel(t,i),di(this,h.get("focus"),h.get("blurScope"),h.get("disabled"))},n.prototype._updateLabel=function(t,i){var a=this,o=this.getTextGuideLine(),l=a.getTextContent(),u=t.hostModel,c=t.getItemModel(i),f=t.getItemLayout(i).label,p=t.getItemVisual(i,"style"),v=p.fill;Xi(l,Li(c),{labelFetcher:t.hostModel,labelDataIndex:i,defaultOpacity:p.opacity,defaultText:t.getName(i)},{normal:{align:f.textAlign,verticalAlign:f.verticalAlign}}),a.setTextConfig({local:!0,inside:!!f.inside,insideStroke:v,outsideFill:v});var m=f.linePoints;o.setShape({points:m}),a.textGuideLineConfig={anchor:m?new bn(m[0][0],m[0][1]):null},Kn(l,{style:{x:f.x,y:f.y}},u,i),l.attr({rotation:f.rotation,originX:f.x,originY:f.y,z2:10}),KT(a,$T(c),{stroke:v})},n}(Pa),v9=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.ignoreLabelLineUpdate=!0,t}return R(n,r),n.prototype.render=function(t,i,a){var o=t.getData(),l=this._data,u=this.group;o.diff(l).add(function(c){var h=new g9(o,c);o.setItemGraphicEl(c,h),u.add(h)}).update(function(c,h){var f=l.getItemGraphicEl(h);f.updateData(o,c),u.add(f),o.setItemGraphicEl(c,f)}).remove(function(c){Fc(l.getItemGraphicEl(c),t,c)}).execute(),this._data=o},n.prototype.remove=function(){this.group.removeAll(),this._data=null},n.prototype.dispose=function(){},n.type="funnel",n}(Vr);const m9=v9;var _9=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.init=function(t){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new Cg(qe(this.getData,this),qe(this.getRawData,this)),this._defaultLabelLine(t)},n.prototype.getInitialData=function(t,i){return Ld(this,{coordDimensions:["value"],encodeDefaulter:yt(h_,this)})},n.prototype._defaultLabelLine=function(t){Il(t,"labelLine",["show"]);var i=t.labelLine,a=t.emphasis.labelLine;i.show=i.show&&t.label.show,a.show=a.show&&t.emphasis.label.show},n.prototype.getDataParams=function(t){var i=this.getData(),a=r.prototype.getDataParams.call(this,t),o=i.mapDimension("value"),l=i.getSum(o);return a.percent=l?+(i.get(o,t)/l*100).toFixed(2):0,a.$vars.push("percent"),a},n.type="series.funnel",n.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},n}(Xr);const y9=_9;function b9(r,n){r.eachSeriesByType("funnel",function(t){var i=t.getData(),a=i.mapDimension("value"),o=t.get("sort"),l=function C9(r,n){return ui(r.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}(t,n),u=t.get("orient"),c=l.width,h=l.height,f=function x9(r,n){for(var t=r.mapDimension("value"),i=r.mapArray(t,function(c){return c}),a=[],o="ascending"===n,l=0,u=r.count();l<u;l++)a[l]=l;return Pe(n)?a.sort(n):"none"!==n&&a.sort(function(c,h){return o?i[c]-i[h]:i[h]-i[c]}),a}(i,o),p=l.x,v=l.y,m="horizontal"===u?[Ht(t.get("minSize"),h),Ht(t.get("maxSize"),h)]:[Ht(t.get("minSize"),c),Ht(t.get("maxSize"),c)],y=i.getDataExtent(a),C=t.get("min"),T=t.get("max");null==C&&(C=Math.min(y[0],0)),null==T&&(T=y[1]);var z=t.get("funnelAlign"),E=t.get("gap"),X=(("horizontal"===u?c:h)-E*(i.count()-1))/i.count(),ve=function(Ke,nt){if("horizontal"===u){var St=mr(i.get(a,Ke)||0,[C,T],m,!0),mt=void 0;switch(z){case"top":mt=v;break;case"center":mt=v+(h-St)/2;break;case"bottom":mt=v+(h-St)}return[[nt,mt],[nt,mt+St]]}var Yt,kt=mr(i.get(a,Ke)||0,[C,T],m,!0);switch(z){case"left":Yt=p;break;case"center":Yt=p+(c-kt)/2;break;case"right":Yt=p+c-kt}return[[Yt,nt],[Yt+kt,nt]]};"ascending"===o&&(X=-X,E=-E,"horizontal"===u?p+=c:v+=h,f=f.reverse());for(var ce=0;ce<f.length;ce++){var _e=f[ce],ze=f[ce+1],Ee=i.getItemModel(_e);if("horizontal"===u){var Le=Ee.get(["itemStyle","width"]);null==Le?Le=X:(Le=Ht(Le,c),"ascending"===o&&(Le=-Le));var ke=ve(_e,p),Ue=ve(ze,p+Le);p+=Le+E,i.setItemLayout(_e,{points:ke.concat(Ue.slice().reverse())})}else{var He=Ee.get(["itemStyle","height"]);null==He?He=X:(He=Ht(He,h),"ascending"===o&&(He=-He)),ke=ve(_e,v),Ue=ve(ze,v+He),v+=He+E,i.setItemLayout(_e,{points:ke.concat(Ue.slice().reverse())})}}!function T9(r){var t=r.hostModel.get("orient");r.each(function(i){var p,v,m,y,a=r.getItemModel(i),l=a.getModel("label").get("position"),u=a.getModel("labelLine"),c=r.getItemLayout(i),h=c.points,f="inner"===l||"inside"===l||"center"===l||"insideLeft"===l||"insideRight"===l;if(f)"insideLeft"===l?(v=(h[0][0]+h[3][0])/2+5,m=(h[0][1]+h[3][1])/2,p="left"):"insideRight"===l?(v=(h[1][0]+h[2][0])/2-5,m=(h[1][1]+h[2][1])/2,p="right"):(v=(h[0][0]+h[1][0]+h[2][0]+h[3][0])/4,m=(h[0][1]+h[1][1]+h[2][1]+h[3][1])/4,p="center"),y=[[v,m],[v,m]];else{var C=void 0,T=void 0,z=void 0,E=void 0,N=u.get("length");"left"===l?(T=(h[3][1]+h[0][1])/2,v=(z=(C=(h[3][0]+h[0][0])/2)-N)-5,p="right"):"right"===l?(T=(h[1][1]+h[2][1])/2,v=(z=(C=(h[1][0]+h[2][0])/2)+N)+5,p="left"):"top"===l?(C=(h[3][0]+h[0][0])/2,m=(E=(T=(h[3][1]+h[0][1])/2)-N)-5,p="center"):"bottom"===l?(C=(h[1][0]+h[2][0])/2,m=(E=(T=(h[1][1]+h[2][1])/2)+N)+5,p="center"):"rightTop"===l?(C="horizontal"===t?h[3][0]:h[1][0],T="horizontal"===t?h[3][1]:h[1][1],"horizontal"===t?(m=(E=T-N)-5,p="center"):(v=(z=C+N)+5,p="top")):"rightBottom"===l?(C=h[2][0],T=h[2][1],"horizontal"===t?(m=(E=T+N)+5,p="center"):(v=(z=C+N)+5,p="bottom")):"leftTop"===l?(C=h[0][0],T="horizontal"===t?h[0][1]:h[1][1],"horizontal"===t?(m=(E=T-N)-5,p="center"):(v=(z=C-N)-5,p="right")):"leftBottom"===l?(C="horizontal"===t?h[1][0]:h[3][0],T="horizontal"===t?h[1][1]:h[2][1],"horizontal"===t?(m=(E=T+N)+5,p="center"):(v=(z=C-N)-5,p="right")):(C=(h[1][0]+h[2][0])/2,T=(h[1][1]+h[2][1])/2,"horizontal"===t?(m=(E=T+N)+5,p="center"):(v=(z=C+N)+5,p="left")),"horizontal"===t?v=z=C:m=E=T,y=[[C,T],[z,E]]}c.label={linePoints:y,x:v,y:m,verticalAlign:"middle",textAlign:p,inside:f}})}(i)})}var w9=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t._dataGroup=new hn,t._initialized=!1,t}return R(n,r),n.prototype.init=function(){this.group.add(this._dataGroup)},n.prototype.render=function(t,i,a,o){this._progressiveEls=null;var l=this._dataGroup,u=t.getData(),c=this._data,h=t.coordinateSystem,f=h.dimensions,p=LO(t);if(u.diff(c).add(function v(T){fS(kO(u,l,T,f,h),u,T,p)}).update(function m(T,z){var E=c.getItemGraphicEl(z),N=IO(u,T,f,h);u.setItemGraphicEl(T,E),Kn(E,{shape:{points:N}},t,T),bo(E),fS(E,u,T,p)}).remove(function y(T){var z=c.getItemGraphicEl(T);l.remove(z)}).execute(),!this._initialized){this._initialized=!0;var C=function D9(r,n,t){var i=r.model,a=r.getRect(),o=new Qn({shape:{x:a.x,y:a.y,width:a.width,height:a.height}}),l="horizontal"===i.get("layout")?"width":"height";return o.setShape(l,0),Kr(o,{shape:{width:a.width,height:a.height}},n,t),o}(h,t,function(){setTimeout(function(){l.removeClipPath()})});l.setClipPath(C)}this._data=u},n.prototype.incrementalPrepareRender=function(t,i,a){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},n.prototype.incrementalRender=function(t,i,a){for(var o=i.getData(),l=i.coordinateSystem,u=l.dimensions,c=LO(i),h=this._progressiveEls=[],f=t.start;f<t.end;f++){var p=kO(o,this._dataGroup,f,u,l);p.incremental=!0,fS(p,o,f,c),h.push(p)}},n.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},n.type="parallel",n}(Vr);function IO(r,n,t,i){for(var a=[],o=0;o<t.length;o++){var l=t[o],u=r.get(r.mapDimension(l),n);A9(u,i.getAxis(l).type)||a.push(i.dataToPoint(u,l))}return a}function kO(r,n,t,i,a){var o=IO(r,t,i,a),l=new Ia({shape:{points:o},z2:10});return n.add(l),r.setItemGraphicEl(t,l),l}function LO(r){var n=r.get("smooth",!0);return!0===n&&(n=.3),ni(n=Io(n))&&(n=0),{smooth:n}}function fS(r,n,t,i){r.useStyle(n.getItemVisual(t,"style")),r.style.fill=null,r.setShape("smooth",i.smooth);var a=n.getItemModel(t),o=a.getModel("emphasis");Zi(r,a,"lineStyle"),di(r,o.get("focus"),o.get("blurScope"),o.get("disabled"))}function A9(r,n){return"category"===n?null==r:null==r||isNaN(r)}const E9=w9;var M9=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.visualStyleAccessPath="lineStyle",t.visualDrawType="stroke",t}return R(n,r),n.prototype.getInitialData=function(t,i){return ol(null,this,{useEncodeDefaulter:qe(O9,null,this)})},n.prototype.getRawIndicesByActiveState=function(t){var i=this.coordinateSystem,a=this.getData(),o=[];return i.eachActiveState(a,function(l,u){t===l&&o.push(a.getRawIndex(u))}),o},n.type="series.parallel",n.dependencies=["parallel"],n.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},n}(Xr);function O9(r){var n=r.ecModel.getComponent("parallel",r.get("parallelIndex"));if(n){var t={};return De(n.dimensions,function(i){var a=function P9(r){return+r.replace("dim","")}(i);t[i]=a}),t}}const I9=M9;var k9=["lineStyle","opacity"],L9={seriesType:"parallel",reset:function(r,n){var t=r.coordinateSystem,i={normal:r.get(["lineStyle","opacity"]),active:r.get("activeOpacity"),inactive:r.get("inactiveOpacity")};return{progress:function(a,o){t.eachActiveState(o,function(l,u){var c=i[l];if("normal"===l&&o.hasItemOption){var h=o.getItemModel(u).get(k9,!0);null!=h&&(c=h)}o.ensureUniqueItemVisual(u,"style").opacity=c},a.start,a.end)}}}};const R9=L9;function N9(r){(function F9(r){if(!r.parallel){var n=!1;De(r.series,function(t){t&&"parallel"===t.type&&(n=!0)}),n&&(r.parallel=[{}])}})(r),function B9(r){De(Dr(r.parallelAxis),function(t){if(tt(t)){var i=t.parallelIndex||0,a=Dr(r.parallel)[i];a&&a.parallelAxisDefault&&Zt(t,a.parallelAxisDefault,!1)}})}(r)}var U9=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.render=function(t,i,a){this._model=t,this._api=a,this._handlers||(this._handlers={},De(V9,function(o,l){a.getZr().on(l,this._handlers[l]=qe(o,this))},this)),bd(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},n.prototype.dispose=function(t,i){Yp(this,"_throttledDispatchExpand"),De(this._handlers,function(a,o){i.getZr().off(o,a)}),this._handlers=null},n.prototype._throttledDispatchExpand=function(t){this._dispatchExpand(t)},n.prototype._dispatchExpand=function(t){t&&this._api.dispatchAction(Ge({type:"parallelAxisExpand"},t))},n.type="parallel",n}(oi),V9={mousedown:function(r){pS(this,"click")&&(this._mouseDownPoint=[r.offsetX,r.offsetY])},mouseup:function(r){var n=this._mouseDownPoint;if(pS(this,"click")&&n){var t=[r.offsetX,r.offsetY];if(Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2)>5)return;var a=this._model.coordinateSystem.getSlidedAxisExpandWindow([r.offsetX,r.offsetY]);"none"!==a.behavior&&this._dispatchExpand({axisExpandWindow:a.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(r){if(!this._mouseDownPoint&&pS(this,"mousemove")){var n=this._model,t=n.coordinateSystem.getSlidedAxisExpandWindow([r.offsetX,r.offsetY]),i=t.behavior;"jump"===i&&this._throttledDispatchExpand.debounceNextCall(n.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===i?null:{axisExpandWindow:t.axisExpandWindow,animation:"jump"===i?null:{duration:0}})}}};function pS(r,n){var t=r._model;return t.get("axisExpandable")&&t.get("axisExpandTriggerOn")===n}const H9=U9;var W9=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.init=function(){r.prototype.init.apply(this,arguments),this.mergeOption({})},n.prototype.mergeOption=function(t){t&&Zt(this.option,t,!0),this._initDimensions()},n.prototype.contains=function(t,i){var a=t.get("parallelIndex");return null!=a&&i.getComponent("parallel",a)===this},n.prototype.setAxisExpand=function(t){De(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(i){t.hasOwnProperty(i)&&(this.option[i]=t[i])},this)},n.prototype._initDimensions=function(){var t=this.dimensions=[],i=this.parallelAxisIndex=[];De(_n(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(o){return(o.get("parallelIndex")||0)===this.componentIndex},this),function(o){t.push("dim"+o.get("dim")),i.push(o.componentIndex)})},n.type="parallel",n.dependencies=["parallelAxis"],n.layoutMode="box",n.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},n}(Jn);const G9=W9;var J9=function(r){function n(t,i,a,o,l){var u=r.call(this,t,i,a)||this;return u.type=o||"value",u.axisIndex=l,u}return R(n,r),n.prototype.isHorizontal=function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")},n}(Yo);const Y9=J9;function mh(r,n,t,i,a,o){r=r||0;var l=t[1]-t[0];if(null!=a&&(a=Ud(a,[0,l])),null!=o&&(o=Math.max(o,null!=a?a:0)),"all"===i){var u=Math.abs(n[1]-n[0]);u=Ud(u,[0,l]),a=o=Ud(u,[a,o]),i=0}n[0]=Ud(n[0],t),n[1]=Ud(n[1],t);var c=gS(n,i);n[i]+=r;var p,h=a||0,f=t.slice();return c.sign<0?f[0]+=h:f[1]-=h,n[i]=Ud(n[i],f),p=gS(n,i),null!=a&&(p.sign!==c.sign||p.span<a)&&(n[1-i]=n[i]+c.sign*a),p=gS(n,i),null!=o&&p.span>o&&(n[1-i]=n[i]+p.sign*o),n}function gS(r,n){var t=r[n]-r[1-n];return{span:Math.abs(t),sign:t>0?-1:t<0?1:n?-1:1}}function Ud(r,n){return Math.min(null!=n[1]?n[1]:1/0,Math.max(null!=n[0]?n[0]:-1/0,r))}var vS=De,RO=Math.min,NO=Math.max,FO=Math.floor,Q9=Math.ceil,BO=li,q9=Math.PI,K9=function(){function r(n,t,i){this.type="parallel",this._axesMap=Kt(),this._axesLayout={},this.dimensions=n.dimensions,this._model=n,this._init(n,t,i)}return r.prototype._init=function(n,t,i){var o=n.parallelAxisIndex;vS(n.dimensions,function(l,u){var c=o[u],h=t.getComponent("parallelAxis",c),f=this._axesMap.set(l,new Y9(l,lg(h),[0,0],h.get("type"),c));f.onBand="category"===f.type&&h.get("boundaryGap"),f.inverse=h.get("inverse"),h.axis=f,f.model=h,f.coordinateSystem=h.coordinateSystem=this},this)},r.prototype.update=function(n,t){this._updateAxesFromSeries(this._model,n)},r.prototype.containPoint=function(n){var t=this._makeLayoutInfo(),i=t.axisBase,a=t.layoutBase,o=t.pixelDimIndex,l=n[1-o],u=n[o];return l>=i&&l<=i+t.axisLength&&u>=a&&u<=a+t.layoutLength},r.prototype.getModel=function(){return this._model},r.prototype._updateAxesFromSeries=function(n,t){t.eachSeries(function(i){if(n.contains(i,t)){var a=i.getData();vS(this.dimensions,function(o){var l=this._axesMap.get(o);l.scale.unionExtentFromData(a,a.mapDimension(o)),th(l.scale,l.model)},this)}},this)},r.prototype.resize=function(n,t){this._rect=ui(n.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),this._layoutAxes()},r.prototype.getRect=function(){return this._rect},r.prototype._makeLayoutInfo=function(){var y,n=this._model,t=this._rect,i=["x","y"],a=["width","height"],o=n.get("layout"),l="horizontal"===o?0:1,u=t[a[l]],c=[0,u],h=this.dimensions.length,f=ty(n.get("axisExpandWidth"),c),p=ty(n.get("axisExpandCount")||0,[0,h]),v=n.get("axisExpandable")&&h>3&&h>p&&p>1&&f>0&&u>0,m=n.get("axisExpandWindow");m?(y=ty(m[1]-m[0],c),m[1]=m[0]+y):(y=ty(f*(p-1),c),(m=[f*(n.get("axisExpandCenter")||FO(h/2))-y/2])[1]=m[0]+y);var T=(u-y)/(h-p);T<3&&(T=0);var z=[FO(BO(m[0]/f,1))+1,Q9(BO(m[1]/f,1))-1];return{layout:o,pixelDimIndex:l,layoutBase:t[i[l]],layoutLength:u,axisBase:t[i[1-l]],axisLength:t[a[1-l]],axisExpandable:v,axisExpandWidth:f,axisCollapseWidth:T,axisExpandWindow:m,axisCount:h,winInnerIndices:z,axisExpandWindow0Pos:T/f*m[0]}},r.prototype._layoutAxes=function(){var n=this._rect,t=this._axesMap,i=this.dimensions,a=this._makeLayoutInfo(),o=a.layout;t.each(function(l){var u=[0,a.axisLength],c=l.inverse?1:0;l.setExtent(u[c],u[1-c])}),vS(i,function(l,u){var c=(a.axisExpandable?j9:$9)(u,a),h={horizontal:{x:c.position,y:a.axisLength},vertical:{x:0,y:c.position}},p=[h[o].x+n.x,h[o].y+n.y],v={horizontal:q9/2,vertical:0}[o],m=[1,0,0,1,0,0];Ws(m,m,v),Co(m,m,p),this._axesLayout[l]={position:p,rotation:v,transform:m,axisNameAvailableWidth:c.axisNameAvailableWidth,axisLabelShow:c.axisLabelShow,nameTruncateMaxWidth:c.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},r.prototype.getAxis=function(n){return this._axesMap.get(n)},r.prototype.dataToPoint=function(n,t){return this.axisCoordToPoint(this._axesMap.get(t).dataToCoord(n),t)},r.prototype.eachActiveState=function(n,t,i,a){null==i&&(i=0),null==a&&(a=n.count());var o=this._axesMap,l=this.dimensions,u=[],c=[];De(l,function(T){u.push(n.mapDimension(T)),c.push(o.get(T).model)});for(var h=this.hasAxisBrushed(),f=i;f<a;f++){var p=void 0;if(h){p="active";for(var v=n.getValues(u,f),m=0,y=l.length;m<y;m++)if("inactive"===c[m].getActiveState(v[m])){p="inactive";break}}else p="normal";t(p,f)}},r.prototype.hasAxisBrushed=function(){for(var n=this.dimensions,t=this._axesMap,i=!1,a=0,o=n.length;a<o;a++)"normal"!==t.get(n[a]).model.getActiveState()&&(i=!0);return i},r.prototype.axisCoordToPoint=function(n,t){return Ts([n,0],this._axesLayout[t].transform)},r.prototype.getAxisLayout=function(n){return Nt(this._axesLayout[n])},r.prototype.getSlidedAxisExpandWindow=function(n){var t=this._makeLayoutInfo(),i=t.pixelDimIndex,a=t.axisExpandWindow.slice(),o=a[1]-a[0],l=[0,t.axisExpandWidth*(t.axisCount-1)];if(!this.containPoint(n))return{behavior:"none",axisExpandWindow:a};var c,u=n[i]-t.layoutBase-t.axisExpandWindow0Pos,h="slide",f=t.axisCollapseWidth,p=this._model.get("axisExpandSlideTriggerArea"),v=null!=p[0];if(f)v&&f&&u<o*p[0]?(h="jump",c=u-o*p[2]):v&&f&&u>o*(1-p[0])?(h="jump",c=u-o*(1-p[2])):(c=u-o*p[1])>=0&&(c=u-o*(1-p[1]))<=0&&(c=0),(c*=t.axisExpandWidth/f)?mh(c,a,l,"all"):h="none";else{var m=a[1]-a[0];(a=[NO(0,l[1]*u/m-m/2)])[1]=RO(l[1],a[0]+m),a[0]=a[1]-m}return{axisExpandWindow:a,behavior:h}},r}();function ty(r,n){return RO(NO(r,n[0]),n[1])}function $9(r,n){var t=n.layoutLength/(n.axisCount-1);return{position:t*r,axisNameAvailableWidth:t,axisLabelShow:!0}}function j9(r,n){var u,f,i=n.axisExpandWidth,o=n.axisCollapseWidth,l=n.winInnerIndices,c=o,h=!1;return r<l[0]?(u=r*o,f=o):r<=l[1]?(u=n.axisExpandWindow0Pos+r*i-n.axisExpandWindow[0],c=i,h=!0):(u=n.layoutLength-(n.axisCount-1-r)*o,f=o),{position:u,axisNameAvailableWidth:c,axisLabelShow:h,nameTruncateMaxWidth:f}}const X9=K9;var tV={create:function eV(r,n){var t=[];return r.eachComponent("parallel",function(i,a){var o=new X9(i,r,n);o.name="parallel_"+a,o.resize(i,n),i.coordinateSystem=o,o.model=i,t.push(o)}),r.eachSeries(function(i){if("parallel"===i.get("coordinateSystem")){var a=i.getReferringComponents("parallel",_i).models[0];i.coordinateSystem=a.coordinateSystem}}),t}};const nV=tV;var ZO=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.activeIntervals=[],t}return R(n,r),n.prototype.getAreaSelectStyle=function(){return Ll([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},n.prototype.setActiveIntervals=function(t){var i=this.activeIntervals=Nt(t);if(i)for(var a=i.length-1;a>=0;a--)da(i[a])},n.prototype.getActiveState=function(t){var i=this.activeIntervals;if(!i.length)return"normal";if(null==t||isNaN(+t))return"inactive";if(1===i.length){var a=i[0];if(a[0]<=t&&t<=a[1])return"active"}else for(var o=0,l=i.length;o<l;o++)if(i[o][0]<=t&&t<=i[o][1])return"active";return"inactive"},n}(Jn);Qt(ZO,Od);const UO=ZO;var _h=!0,Ng=Math.min,Vd=Math.max,rV=Math.pow,VO="globalPan",sV={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},lV={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},HO={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},uV=0,cV=function(r){function n(t){var i=r.call(this)||this;return i._track=[],i._covers=[],i._handlers={},i._zr=t,i.group=new hn,i._uid="brushController_"+uV++,De(mV,function(a,o){this._handlers[o]=qe(a,this)},i),i}return R(n,r),n.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},n.prototype._doEnableBrush=function(t){var i=this._zr;this._enableGlobalPan||function mZ(r,n,t){Db(r)[n]=t}(i,VO,this._uid),De(this._handlers,function(a,o){i.on(o,a)}),this._brushType=t.brushType,this._brushOption=Zt(Nt(HO),t,!0)},n.prototype._doDisableBrush=function(){var t=this._zr;(function _Z(r,n,t){var i=Db(r);i[n]===t&&(i[n]=null)})(t,VO,this._uid),De(this._handlers,function(i,a){t.off(a,i)}),this._brushType=this._brushOption=null},n.prototype.setPanels=function(t){if(t&&t.length){var i=this._panels={};De(t,function(a){i[a.panelId]=Nt(a)})}else this._panels=null;return this},n.prototype.mount=function(t){this._enableGlobalPan=(t=t||{}).enableGlobalPan;var i=this.group;return this._zr.add(i),i.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=i.getLocalTransform(),this},n.prototype.updateCovers=function(t){t=_t(t,function(v){return Zt(Nt(HO),v,!0)});var a=this._covers,o=this._covers=[],l=this,u=this._creatingCover;return new Xl(a,t,function h(v,m){return c(v.__brushOption,m)},c).add(f).update(f).remove(function p(v){a[v]!==u&&l.group.remove(a[v])}).execute(),this;function c(v,m){return(null!=v.id?v.id:"\0-brush-index-"+m)+"-"+v.brushType}function f(v,m){var y=t[v];if(null!=m&&a[m]===u)o[v]=a[m];else{var C=o[v]=null!=m?(a[m].__brushOption=y,a[m]):GO(l,WO(l,y));mS(l,C)}}},n.prototype.unmount=function(){return this.enableBrush(!1),CS(this),this._zr.remove(this.group),this},n.prototype.dispose=function(){this.unmount(),this.off()},n}(Oi);function WO(r,n){var t=ny[n.brushType].createCover(r,n);return t.__brushOption=n,YO(t,n),r.group.add(t),t}function GO(r,n){var t=_S(n);return t.endCreating&&(t.endCreating(r,n),YO(n,n.__brushOption)),n}function JO(r,n){var t=n.__brushOption;_S(n).updateCoverShape(r,n,t.range,t)}function YO(r,n){var t=n.z;null==t&&(t=1e4),r.traverse(function(i){i.z=t,i.z2=t})}function mS(r,n){_S(n).updateCommon(r,n),JO(r,n)}function _S(r){return ny[r.__brushOption.brushType]}function yS(r,n,t){var i=r._panels;if(!i)return _h;var a,o=r._transform;return De(i,function(l){l.isTargetByCursor(n,t,o)&&(a=l)}),a}function QO(r,n){var t=r._panels;if(!t)return _h;var i=n.__brushOption.panelId;return null!=i?t[i]:_h}function CS(r){var n=r._covers,t=n.length;return De(n,function(i){r.group.remove(i)},r),n.length=0,!!t}function yh(r,n){var t=_t(r._covers,function(i){var a=i.__brushOption,o=Nt(a.range);return{brushType:a.brushType,panelId:a.panelId,range:o}});r.trigger("brush",{areas:t,isEnd:!!n.isEnd,removeOnClick:!!n.removeOnClick})}function qO(r){var n=r.length-1;return n<0&&(n=0),[r[0],r[n]]}function KO(r,n,t,i){var a=new hn;return a.add(new Qn({name:"main",style:TS(t),silent:!0,draggable:!0,cursor:"move",drift:yt(XO,r,n,a,["n","s","w","e"]),ondragend:yt(yh,n,{isEnd:!0})})),De(i,function(o){a.add(new Qn({name:o.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:yt(XO,r,n,a,o),ondragend:yt(yh,n,{isEnd:!0})}))}),a}function $O(r,n,t,i){var a=i.brushStyle.lineWidth||0,o=Vd(a,6),l=t[0][0],u=t[1][0],c=l-a/2,h=u-a/2,f=t[0][1],p=t[1][1],v=f-o+a/2,m=p-o+a/2,y=f-l,C=p-u,T=y+a,z=C+a;iu(r,n,"main",l,u,y,C),i.transformable&&(iu(r,n,"w",c,h,o,z),iu(r,n,"e",v,h,o,z),iu(r,n,"n",c,h,T,o),iu(r,n,"s",c,m,T,o),iu(r,n,"nw",c,h,o,o),iu(r,n,"ne",v,h,o,o),iu(r,n,"sw",c,m,o,o),iu(r,n,"se",v,m,o,o))}function xS(r,n){var t=n.__brushOption,i=t.transformable,a=n.childAt(0);a.useStyle(TS(t)),a.attr({silent:!i,cursor:i?"move":"default"}),De([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(o){var l=n.childOfName(o.join("")),u=1===o.length?bS(r,o[0]):function fV(r,n){var t=[bS(r,n[0]),bS(r,n[1])];return("e"===t[0]||"w"===t[0])&&t.reverse(),t.join("")}(r,o);l&&l.attr({silent:!i,invisible:!i,cursor:i?lV[u]+"-resize":null})})}function iu(r,n,t,i,a,o,l){var u=n.childOfName(t);u&&u.setShape(function gV(r){var n=Ng(r[0][0],r[1][0]),t=Ng(r[0][1],r[1][1]);return{x:n,y:t,width:Vd(r[0][0],r[1][0])-n,height:Vd(r[0][1],r[1][1])-t}}(SS(r,n,[[i,a],[i+o,a+l]])))}function TS(r){return Dt({strokeNoScale:!0},r.brushStyle)}function jO(r,n,t,i){var a=[Ng(r,t),Ng(n,i)],o=[Vd(r,t),Vd(n,i)];return[[a[0],o[0]],[a[1],o[1]]]}function bS(r,n){var a=Q_({w:"left",e:"right",n:"top",s:"bottom"}[n],function dV(r){return Gu(r.group)}(r));return{left:"w",right:"e",top:"n",bottom:"s"}[a]}function XO(r,n,t,i,a,o){var l=t.__brushOption,u=r.toRectRange(l.range),c=eP(n,a,o);De(i,function(h){var f=sV[h];u[f[0]][f[1]]+=c[f[0]]}),l.range=r.fromRectRange(jO(u[0][0],u[1][0],u[0][1],u[1][1])),mS(n,t),yh(n,{isEnd:!1})}function pV(r,n,t,i){var a=n.__brushOption.range,o=eP(r,t,i);De(a,function(l){l[0]+=o[0],l[1]+=o[1]}),mS(r,n),yh(r,{isEnd:!1})}function eP(r,n,t){var i=r.group,a=i.transformCoordToLocal(n,t),o=i.transformCoordToLocal(0,0);return[a[0]-o[0],a[1]-o[1]]}function SS(r,n,t){var i=QO(r,n);return i&&i!==_h?i.clipPath(t,r._transform):Nt(t)}function zS(r){var n=r.event;n.preventDefault&&n.preventDefault()}function wS(r,n,t){return r.childOfName("main").contain(n,t)}function tP(r,n,t,i){var u,a=r._creatingCover,o=r._creatingPanel,l=r._brushOption;if(r._track.push(t.slice()),function hV(r){var n=r._track;if(!n.length)return!1;var t=n[n.length-1],i=n[0],a=t[0]-i[0],o=t[1]-i[1];return rV(a*a+o*o,.5)>6}(r)||a){if(o&&!a){"single"===l.brushMode&&CS(r);var c=Nt(l);c.brushType=nP(c.brushType,o),c.panelId=o===_h?null:o.panelId,a=r._creatingCover=WO(r,c),r._covers.push(a)}if(a){var h=ny[nP(r._brushType,o)];a.__brushOption.range=h.getCreatingRange(SS(r,a,r._track)),i&&(GO(r,a),h.updateCommon(r,a)),JO(r,a),u={isEnd:i}}}else i&&"single"===l.brushMode&&l.removeOnClick&&yS(r,n,t)&&CS(r)&&(u={isEnd:i,removeOnClick:!0});return u}function nP(r,n){return"auto"===r?n.defaultBrushType:r}var mV={mousedown:function(r){if(this._dragging)rP(this,r);else if(!r.target||!r.target.draggable){zS(r);var n=this.group.transformCoordToLocal(r.offsetX,r.offsetY);this._creatingCover=null,(this._creatingPanel=yS(this,r,n))&&(this._dragging=!0,this._track=[n.slice()])}},mousemove:function(r){var i=this.group.transformCoordToLocal(r.offsetX,r.offsetY);if(function vV(r,n,t){if(r._brushType&&!function _V(r,n,t){var i=r._zr;return n<0||n>i.getWidth()||t<0||t>i.getHeight()}(r,n.offsetX,n.offsetY)){var i=r._zr,a=r._covers,o=yS(r,n,t);if(!r._dragging)for(var l=0;l<a.length;l++){var u=a[l].__brushOption;if(o&&(o===_h||u.panelId===o.panelId)&&ny[u.brushType].contain(a[l],t[0],t[1]))return}o&&i.setCursorStyle("crosshair")}}(this,r,i),this._dragging){zS(r);var a=tP(this,r,i,!1);a&&yh(this,a)}},mouseup:function(r){rP(this,r)}};function rP(r,n){if(r._dragging){zS(n);var a=r.group.transformCoordToLocal(n.offsetX,n.offsetY),o=tP(r,n,a,!0);r._dragging=!1,r._track=[],r._creatingCover=null,o&&yh(r,o)}}var ny={lineX:iP(0),lineY:iP(1),rect:{createCover:function(r,n){function t(i){return i}return KO({toRectRange:t,fromRectRange:t},r,n,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(r){var n=qO(r);return jO(n[1][0],n[1][1],n[0][0],n[0][1])},updateCoverShape:function(r,n,t,i){$O(r,n,t,i)},updateCommon:xS,contain:wS},polygon:{createCover:function(r,n){var t=new hn;return t.add(new Ia({name:"main",style:TS(n),silent:!0})),t},getCreatingRange:function(r){return r},endCreating:function(r,n){n.remove(n.childAt(0)),n.add(new Pa({name:"main",draggable:!0,drift:yt(pV,r,n),ondragend:yt(yh,r,{isEnd:!0})}))},updateCoverShape:function(r,n,t,i){n.childAt(0).setShape({points:SS(r,n,t)})},updateCommon:xS,contain:wS}};function iP(r){return{createCover:function(n,t){return KO({toRectRange:function(i){var a=[i,[0,100]];return r&&a.reverse(),a},fromRectRange:function(i){return i[r]}},n,t,[[["w"],["e"]],[["n"],["s"]]][r])},getCreatingRange:function(n){var t=qO(n);return[Ng(t[0][r],t[1][r]),Vd(t[0][r],t[1][r])]},updateCoverShape:function(n,t,i,a){var o,l=QO(n,t);if(l!==_h&&l.getLinearBrushOtherExtent)o=l.getLinearBrushOtherExtent(r);else{var u=n._zr;o=[0,[u.getWidth(),u.getHeight()][1-r]]}var c=[i,o];r&&c.reverse(),$O(n,t,c,a)},updateCommon:xS,contain:wS}}const DS=cV;function aP(r){return r=AS(r),function(n){return iT(n,r)}}function oP(r,n){return r=AS(r),function(t){var i=null!=n?n:t,o=i?r.x:r.y;return[o,o+((i?r.width:r.height)||0)]}}function sP(r,n,t){var i=AS(r);return function(a,o){return i.contain(o[0],o[1])&&!U0(a,n,t)}}function AS(r){return Mn.create(r)}var yV=["axisLine","axisTickLabel","axisName"],CV=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.init=function(t,i){r.prototype.init.apply(this,arguments),(this._brushController=new DS(i.getZr())).on("brush",qe(this._onBrush,this))},n.prototype.render=function(t,i,a,o){if(!function xV(r,n,t){return t&&"axisAreaSelect"===t.type&&n.findComponents({mainType:"parallelAxis",query:t})[0]===r}(t,i,o)){this.axisModel=t,this.api=a,this.group.removeAll();var l=this._axisGroup;if(this._axisGroup=new hn,this.group.add(this._axisGroup),t.get("show")){var u=function bV(r,n){return n.getComponent("parallel",r.get("parallelIndex"))}(t,i),c=u.coordinateSystem,h=t.getAreaSelectStyle(),f=h.width,m=Ge({strokeContainThreshold:f},c.getAxisLayout(t.axis.dim)),y=new nu(t,m);De(yV,y.add,y),this._axisGroup.add(y.getGroup()),this._refreshBrushController(m,h,t,u,f,a),Gp(l,this._axisGroup,t)}}},n.prototype._refreshBrushController=function(t,i,a,o,l,u){var c=a.axis.getExtent(),h=c[1]-c[0],f=Math.min(30,.1*Math.abs(h)),p=Mn.create({x:c[0],y:-l/2,width:h,height:l});p.x-=f,p.width+=2*f,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,x:t.position[0],y:t.position[1]}).setPanels([{panelId:"pl",clipPath:aP(p),isTargetByCursor:sP(p,u,o),getLinearBrushOtherExtent:oP(p,0)}]).enableBrush({brushType:"lineX",brushStyle:i,removeOnClick:!0}).updateCovers(function TV(r){var n=r.axis;return _t(r.activeIntervals,function(t){return{brushType:"lineX",panelId:"pl",range:[n.dataToCoord(t[0],!0),n.dataToCoord(t[1],!0)]}})}(a))},n.prototype._onBrush=function(t){var a=this.axisModel,o=a.axis,l=_t(t.areas,function(u){return[o.coordToData(u.range[0],!0),o.coordToData(u.range[1],!0)]});(!a.option.realtime===t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:a.id,intervals:l})},n.prototype.dispose=function(){this._brushController.dispose()},n.type="parallelAxis",n}(oi);const SV=CV;var zV={type:"axisAreaSelect",event:"axisAreaSelected"},DV={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function lP(r){r.registerComponentView(H9),r.registerComponentModel(G9),r.registerCoordinateSystem("parallel",nV),r.registerPreprocessor(N9),r.registerComponentModel(UO),r.registerComponentView(SV),Rd(r,"parallel",UO,DV),function wV(r){r.registerAction(zV,function(n,t){t.eachComponent({mainType:"parallelAxis",query:n},function(i){i.axis.model.setActiveIntervals(n.intervals)})}),r.registerAction("parallelAxisExpand",function(n,t){t.eachComponent({mainType:"parallel",query:n},function(i){i.setAxisExpand(n)})})}(r)}var EV=function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0},MV=function(r){function n(t){return r.call(this,t)||this}return R(n,r),n.prototype.getDefaultShape=function(){return new EV},n.prototype.buildPath=function(t,i){var a=i.extent;t.moveTo(i.x1,i.y1),t.bezierCurveTo(i.cpx1,i.cpy1,i.cpx2,i.cpy2,i.x2,i.y2),"vertical"===i.orient?(t.lineTo(i.x2+a,i.y2),t.bezierCurveTo(i.cpx2+a,i.cpy2,i.cpx1+a,i.cpy1,i.x1+a,i.y1)):(t.lineTo(i.x2,i.y2+a),t.bezierCurveTo(i.cpx2,i.cpy2+a,i.cpx1,i.cpy1+a,i.x1,i.y1+a)),t.closePath()},n.prototype.highlight=function(){gs(this)},n.prototype.downplay=function(){vs(this)},n}(Fn),OV=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t._focusAdjacencyDisabled=!1,t}return R(n,r),n.prototype.render=function(t,i,a){var o=this,l=t.getGraph(),u=this.group,c=t.layoutInfo,h=c.width,f=c.height,p=t.getData(),v=t.getData("edge"),m=t.get("orient");this._model=t,u.removeAll(),u.x=c.x,u.y=c.y,l.eachEdge(function(y){var C=new MV,T=dn(C);T.dataIndex=y.dataIndex,T.seriesIndex=t.seriesIndex,T.dataType="edge";var He,Ke,nt,lt,St,mt,wt,kt,z=y.getModel(),E=z.getModel("lineStyle"),N=E.get("curveness"),X=y.node1.getLayout(),ve=y.node1.getModel(),ce=ve.get("localX"),_e=ve.get("localY"),ze=y.node2.getLayout(),Ee=y.node2.getModel(),Le=Ee.get("localX"),ke=Ee.get("localY"),Ue=y.getLayout();switch(C.shape.extent=Math.max(1,Ue.dy),C.shape.orient=m,"vertical"===m?(St=He=(null!=ce?ce*h:X.x)+Ue.sy,mt=(Ke=(null!=_e?_e*f:X.y)+X.dy)*(1-N)+(lt=null!=ke?ke*f:ze.y)*N,wt=nt=(null!=Le?Le*h:ze.x)+Ue.ty,kt=Ke*N+lt*(1-N)):(St=(He=(null!=ce?ce*h:X.x)+X.dx)*(1-N)+(nt=null!=Le?Le*h:ze.x)*N,mt=Ke=(null!=_e?_e*f:X.y)+Ue.sy,wt=He*N+nt*(1-N),kt=lt=(null!=ke?ke*f:ze.y)+Ue.ty),C.setShape({x1:He,y1:Ke,x2:nt,y2:lt,cpx1:St,cpy1:mt,cpx2:wt,cpy2:kt}),C.useStyle(E.getItemStyle()),C.style.fill){case"source":C.style.fill=y.node1.getVisual("color"),C.style.decal=y.node1.getVisual("style").decal;break;case"target":C.style.fill=y.node2.getVisual("color"),C.style.decal=y.node2.getVisual("style").decal;break;case"gradient":var Yt=y.node1.getVisual("color"),Xt=y.node2.getVisual("color");Qe(Yt)&&Qe(Xt)&&(C.style.fill=new Cd(0,0,+("horizontal"===m),+("vertical"===m),[{color:Yt,offset:0},{color:Xt,offset:1}]))}var pn=z.getModel("emphasis");Zi(C,z,"lineStyle",function(Ar){return Ar.getItemStyle()}),u.add(C),v.setItemGraphicEl(y.dataIndex,C);var Bn=pn.get("focus");di(C,"adjacency"===Bn?y.getAdjacentDataIndices():Bn,pn.get("blurScope"),pn.get("disabled")),dn(C).dataType="edge"}),l.eachNode(function(y){var C=y.getLayout(),T=y.getModel(),z=T.get("localX"),E=T.get("localY"),N=T.getModel("emphasis"),X=new Qn({shape:{x:null!=z?z*h:C.x,y:null!=E?E*f:C.y,width:C.dx,height:C.dy},style:T.getModel("itemStyle").getItemStyle(),z2:10});Xi(X,Li(T),{labelFetcher:t,labelDataIndex:y.dataIndex,defaultText:y.id}),X.disableLabelAnimation=!0,X.setStyle("fill",y.getVisual("color")),X.setStyle("decal",y.getVisual("style").decal),Zi(X,T),u.add(X),p.setItemGraphicEl(y.dataIndex,X),dn(X).dataType="node";var ve=N.get("focus");di(X,"adjacency"===ve?y.getAdjacentDataIndices():ve,N.get("blurScope"),N.get("disabled"))}),p.eachItemGraphicEl(function(y,C){p.getItemModel(C).get("draggable")&&(y.drift=function(z,E){o._focusAdjacencyDisabled=!0,this.shape.x+=z,this.shape.y+=E,this.dirty(),a.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:p.getRawIndex(C),localX:this.shape.x/h,localY:this.shape.y/f})},y.ondragend=function(){o._focusAdjacencyDisabled=!1},y.draggable=!0,y.cursor="move")}),!this._data&&t.isAnimationEnabled()&&u.setClipPath(function PV(r,n,t){var i=new Qn({shape:{x:r.x-10,y:r.y-10,width:0,height:r.height+20}});return Kr(i,{shape:{width:r.width+20}},n,t),i}(u.getBoundingRect(),t,function(){u.removeClipPath()})),this._data=t.getData()},n.prototype.dispose=function(){},n.type="sankey",n}(Vr);const IV=OV;var kV=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.getInitialData=function(t,i){var a=t.edges||t.links,o=t.data||t.nodes,l=t.levels;this.levelModels=[];for(var u=this.levelModels,c=0;c<l.length;c++)null!=l[c].depth&&l[c].depth>=0&&(u[l[c].depth]=new Or(l[c],this,i));if(o&&a)return PO(o,a,this,!0,function f(p,v){p.wrapMethod("getItemModel",function(m,y){var C=m.parentModel,T=C.getData().getItemLayout(y);if(T){var E=C.levelModels[T.depth];E&&(m.parentModel=E)}return m}),v.wrapMethod("getItemModel",function(m,y){var C=m.parentModel,z=C.getGraph().getEdgeByIndex(y).node1.getLayout();if(z){var N=C.levelModels[z.depth];N&&(m.parentModel=N)}return m})}).data},n.prototype.setNodePosition=function(t,i){var o=(this.option.data||this.option.nodes)[t];o.localX=i[0],o.localY=i[1]},n.prototype.getGraph=function(){return this.getData().graph},n.prototype.getEdgeData=function(){return this.getGraph().edgeData},n.prototype.formatTooltip=function(t,i,a){function o(m){return isNaN(m)||null==m}if("edge"===a){var l=this.getDataParams(t,a),u=l.data,c=l.value;return Wi("nameValue",{name:u.source+" -- "+u.target,value:c,noValue:o(c)})}var p=this.getGraph().getNodeByIndex(t).getLayout().value,v=this.getDataParams(t,a).data.name;return Wi("nameValue",{name:null!=v?v+"":null,value:p,noValue:o(p)})},n.prototype.optionUpdated=function(){},n.prototype.getDataParams=function(t,i){var a=r.prototype.getDataParams.call(this,t,i);if(null==a.value&&"node"===i){var l=this.getGraph().getNodeByIndex(t).getLayout().value;a.value=l}return a},n.type="series.sankey",n.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},n}(Xr);const LV=kV;function RV(r,n){r.eachSeriesByType("sankey",function(t){var i=t.get("nodeWidth"),a=t.get("nodeGap"),o=function NV(r,n){return ui(r.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}(t,n);t.layoutInfo=o;var l=o.width,u=o.height,c=t.getGraph(),h=c.nodes,f=c.edges;!function BV(r){De(r,function(n){var t=nc(n.outEdges,ry),i=nc(n.inEdges,ry),a=n.getValue()||0,o=Math.max(t,i,a);n.setLayout({value:o},!0)})}(h),function FV(r,n,t,i,a,o,l,u,c){(function ZV(r,n,t,i,a,o,l){for(var u=[],c=[],h=[],f=[],p=0,v=0;v<n.length;v++)u[v]=1;for(v=0;v<r.length;v++)c[v]=r[v].inEdges.length,0===c[v]&&h.push(r[v]);for(var m=-1;h.length;){for(var y=0;y<h.length;y++){var C=h[y],T=C.hostGraph.data.getRawDataItem(C.dataIndex),z=null!=T.depth&&T.depth>=0;z&&T.depth>m&&(m=T.depth),C.setLayout({depth:z?T.depth:p},!0),C.setLayout("vertical"===o?{dy:t}:{dx:t},!0);for(var E=0;E<C.outEdges.length;E++){var N=C.outEdges[E];u[n.indexOf(N)]=0;var ve=N.node2;0==--c[r.indexOf(ve)]&&f.indexOf(ve)<0&&f.push(ve)}}++p,h=f,f=[]}for(v=0;v<u.length;v++)if(1===u[v])throw new Error("Sankey is a DAG, the original data has cycle!");var _e=m>p-1?m:p-1;l&&"left"!==l&&function UV(r,n,t,i){if("right"===n){for(var a=[],o=r,l=0;o.length;){for(var u=0;u<o.length;u++){var c=o[u];c.setLayout({skNodeHeight:l},!0);for(var h=0;h<c.inEdges.length;h++){var f=c.inEdges[h];a.indexOf(f.node1)<0&&a.push(f.node1)}}o=a,a=[],++l}De(r,function(p){uP(p)||p.setLayout({depth:Math.max(0,i-p.getLayout().skNodeHeight)},!0)})}else"justify"===n&&function VV(r,n){De(r,function(t){!uP(t)&&!t.outEdges.length&&t.setLayout({depth:n},!0)})}(r,i)}(r,l,0,_e),function HV(r,n,t){De(r,function(i){var a=i.getLayout().depth*n;i.setLayout("vertical"===t?{y:a}:{x:a},!0)})}(r,"vertical"===o?(a-t)/_e:(i-t)/_e,o)})(r,n,t,a,o,u,c),function WV(r,n,t,i,a,o,l){var u=function GV(r,n){var t=[],i="vertical"===n?"y":"x",a=kf(r,function(o){return o.getLayout()[i]});return a.keys.sort(function(o,l){return o-l}),De(a.keys,function(o){t.push(a.buckets.get(o))}),t}(r,l);(function JV(r,n,t,i,a,o){var l=1/0;De(r,function(u){var c=u.length,h=0;De(u,function(p){h+=p.getLayout().value});var f="vertical"===o?(i-(c-1)*a)/h:(t-(c-1)*a)/h;f<l&&(l=f)}),De(r,function(u){De(u,function(c,h){var f=c.getLayout().value*l;"vertical"===o?(c.setLayout({x:h},!0),c.setLayout({dx:f},!0)):(c.setLayout({y:h},!0),c.setLayout({dy:f},!0))})}),De(n,function(u){var c=+u.getValue()*l;u.setLayout({dy:c},!0)})})(u,n,t,i,a,l),ES(u,a,t,i,l);for(var c=1;o>0;o--)YV(u,c*=.99,l),ES(u,a,t,i,l),jV(u,c,l),ES(u,a,t,i,l)}(r,n,o,a,i,l,u),function XV(r,n){var t="vertical"===n?"x":"y";De(r,function(i){i.outEdges.sort(function(a,o){return a.node2.getLayout()[t]-o.node2.getLayout()[t]}),i.inEdges.sort(function(a,o){return a.node1.getLayout()[t]-o.node1.getLayout()[t]})}),De(r,function(i){var a=0,o=0;De(i.outEdges,function(l){l.setLayout({sy:a},!0),a+=l.getLayout().dy}),De(i.inEdges,function(l){l.setLayout({ty:o},!0),o+=l.getLayout().dy})})}(r,u)}(h,f,i,a,l,u,0!==_n(h,function(C){return 0===C.getLayout().value}).length?0:t.get("layoutIterations"),t.get("orient"),t.get("nodeAlign"))})}function uP(r){var n=r.hostGraph.data.getRawDataItem(r.dataIndex);return null!=n.depth&&n.depth>=0}function ES(r,n,t,i,a){var o="vertical"===a?"x":"y";De(r,function(l){l.sort(function(C,T){return C.getLayout()[o]-T.getLayout()[o]});for(var u,c,h,f=0,p=l.length,v="vertical"===a?"dx":"dy",m=0;m<p;m++)(h=f-(c=l[m]).getLayout()[o])>0&&(u=c.getLayout()[o]+h,c.setLayout("vertical"===a?{x:u}:{y:u},!0)),f=c.getLayout()[o]+c.getLayout()[v]+n;if((h=f-n-("vertical"===a?i:t))>0)for(u=c.getLayout()[o]-h,c.setLayout("vertical"===a?{x:u}:{y:u},!0),f=u,m=p-2;m>=0;--m)(h=(c=l[m]).getLayout()[o]+c.getLayout()[v]+n-f)>0&&(u=c.getLayout()[o]-h,c.setLayout("vertical"===a?{x:u}:{y:u},!0)),f=c.getLayout()[o]})}function YV(r,n,t){De(r.slice().reverse(),function(i){De(i,function(a){if(a.outEdges.length){var o=nc(a.outEdges,QV,t)/nc(a.outEdges,ry);if(isNaN(o)){var l=a.outEdges.length;o=l?nc(a.outEdges,qV,t)/l:0}if("vertical"===t){var u=a.getLayout().x+(o-tc(a,t))*n;a.setLayout({x:u},!0)}else{var c=a.getLayout().y+(o-tc(a,t))*n;a.setLayout({y:c},!0)}}})})}function QV(r,n){return tc(r.node2,n)*r.getValue()}function qV(r,n){return tc(r.node2,n)}function KV(r,n){return tc(r.node1,n)*r.getValue()}function $V(r,n){return tc(r.node1,n)}function tc(r,n){return"vertical"===n?r.getLayout().x+r.getLayout().dx/2:r.getLayout().y+r.getLayout().dy/2}function ry(r){return r.getValue()}function nc(r,n,t){for(var i=0,a=r.length,o=-1;++o<a;){var l=+n(r[o],t);isNaN(l)||(i+=l)}return i}function jV(r,n,t){De(r,function(i){De(i,function(a){if(a.inEdges.length){var o=nc(a.inEdges,KV,t)/nc(a.inEdges,ry);if(isNaN(o)){var l=a.inEdges.length;o=l?nc(a.inEdges,$V,t)/l:0}if("vertical"===t){var u=a.getLayout().x+(o-tc(a,t))*n;a.setLayout({x:u},!0)}else{var c=a.getLayout().y+(o-tc(a,t))*n;a.setLayout({y:c},!0)}}})})}function eH(r){r.eachSeriesByType("sankey",function(n){var i=n.getGraph().nodes;if(i.length){var a=1/0,o=-1/0;De(i,function(l){var u=l.getLayout().value;u<a&&(a=u),u>o&&(o=u)}),De(i,function(l){var c=new la({type:"color",mappingMethod:"linear",dataExtent:[a,o],visual:n.get("color")}).mapValueToVisual(l.getLayout().value),h=l.getModel().get(["itemStyle","color"]);null!=h?(l.setVisual("color",h),l.setVisual("style",{fill:h})):(l.setVisual("color",c),l.setVisual("style",{fill:c}))})}})}var cP=function(){function r(){}return r.prototype.getInitialData=function(n,t){var i,c,a=t.getComponent("xAxis",this.get("xAxisIndex")),o=t.getComponent("yAxis",this.get("yAxisIndex")),l=a.get("type"),u=o.get("type");"category"===l?(n.layout="horizontal",i=a.getOrdinalMeta(),c=!0):"category"===u?(n.layout="vertical",i=o.getOrdinalMeta(),c=!0):n.layout=n.layout||"horizontal";var h=["x","y"],f="horizontal"===n.layout?0:1,p=this._baseAxisDim=h[f],v=h[1-f],m=[a,o],y=m[f].get("type"),C=m[1-f].get("type"),T=n.data;if(T&&c){var z=[];De(T,function(X,ve){var ce;we(X)?(ce=X.slice(),X.unshift(ve)):we(X.value)?((ce=Ge({},X)).value=ce.value.slice(),X.value.unshift(ve)):ce=X,z.push(ce)}),n.data=z}var E=this.defaultValueDimensions,N=[{name:p,type:f0(y),ordinalMeta:i,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:v,type:f0(C),dimsDef:E.slice()}];return Ld(this,{coordDimensions:N,dimensionsCount:E.length+1,encodeDefaulter:yt(c_,N,this)})},r.prototype.getBaseAxis=function(){var n=this._baseAxisDim;return this.ecModel.getComponent(n+"Axis",this.get(n+"AxisIndex")).axis},r}(),hP=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],t.visualDrawType="stroke",t}return R(n,r),n.type="series.boxplot",n.dependencies=["xAxis","yAxis","grid"],n.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},n}(Xr);Qt(hP,cP,!0);const nH=hP;var rH=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.render=function(t,i,a){var o=t.getData(),l=this.group,u=this._data;this._data||l.removeAll();var c="horizontal"===t.get("layout")?1:0;o.diff(u).add(function(h){if(o.hasValue(h)){var p=dP(o.getItemLayout(h),o,h,c,!0);o.setItemGraphicEl(h,p),l.add(p)}}).update(function(h,f){var p=u.getItemGraphicEl(f);if(o.hasValue(h)){var v=o.getItemLayout(h);p?(bo(p),fP(v,p,o,h)):p=dP(v,o,h,c),l.add(p),o.setItemGraphicEl(h,p)}else l.remove(p)}).remove(function(h){var f=u.getItemGraphicEl(h);f&&l.remove(f)}).execute(),this._data=o},n.prototype.remove=function(t){var i=this.group,a=this._data;this._data=null,a&&a.eachItemGraphicEl(function(o){o&&i.remove(o)})},n.type="boxplot",n}(Vr),iH=function r(){},aH=function(r){function n(t){var i=r.call(this,t)||this;return i.type="boxplotBoxPath",i}return R(n,r),n.prototype.getDefaultShape=function(){return new iH},n.prototype.buildPath=function(t,i){var a=i.points,o=0;for(t.moveTo(a[o][0],a[o][1]),o++;o<4;o++)t.lineTo(a[o][0],a[o][1]);for(t.closePath();o<a.length;o++)t.moveTo(a[o][0],a[o][1]),o++,t.lineTo(a[o][0],a[o][1])},n}(Fn);function dP(r,n,t,i,a){var o=r.ends,l=new aH({shape:{points:a?oH(o,i,r):o}});return fP(r,l,n,t,a),l}function fP(r,n,t,i,a){(0,fe[a?"initProps":"updateProps"])(n,{shape:{points:r.ends}},t.hostModel,i),n.useStyle(t.getItemVisual(i,"style")),n.style.strokeNoScale=!0,n.z2=100;var u=t.getItemModel(i),c=u.getModel("emphasis");Zi(n,u),di(n,c.get("focus"),c.get("blurScope"),c.get("disabled"))}function oH(r,n,t){return _t(r,function(i){return(i=i.slice())[n]=t.initBaseline,i})}const sH=rH;function lH(r,n){}var Fg=De;function uH(r){var n=function cH(r){var n=[],t=[];return r.eachSeriesByType("boxplot",function(i){var a=i.getBaseAxis(),o=Ye(t,a);o<0&&(t[o=t.length]=a,n[o]={axis:a,seriesModels:[]}),n[o].seriesModels.push(i)}),n}(r);Fg(n,function(t){var i=t.seriesModels;!i.length||(function hH(r){var u,n=r.axis,t=r.seriesModels,i=t.length,a=r.boxWidthList=[],o=r.boxOffsetList=[],l=[];if("category"===n.type)u=n.getBandWidth();else{var c=0;Fg(t,function(y){c=Math.max(c,y.getData().count())});var h=n.getExtent();u=Math.abs(h[1]-h[0])/c}Fg(t,function(y){var C=y.get("boxWidth");we(C)||(C=[C,C]),l.push([Ht(C[0],u)||0,Ht(C[1],u)||0])});var f=.8*u-2,p=f/i*.3,v=(f-p*(i-1))/i,m=v/2-f/2;Fg(t,function(y,C){o.push(m),m+=p+v,a.push(Math.min(Math.max(v,l[C][0]),l[C][1]))})}(t),Fg(i,function(a,o){!function dH(r,n,t){var i=r.coordinateSystem,a=r.getData(),o=t/2,l="horizontal"===r.get("layout")?0:1,u=1-l,c=["x","y"],h=a.mapDimension(c[l]),f=a.mapDimensionsAll(c[u]);if(!(null==h||f.length<5))for(var p=0;p<a.count();p++){var v=a.get(h,p),m=N(v,f[2],p),y=N(v,f[0],p),C=N(v,f[1],p),T=N(v,f[3],p),z=N(v,f[4],p),E=[];X(E,C,!1),X(E,T,!0),E.push(y,C,z,T),ve(E,y),ve(E,z),ve(E,m),a.setItemLayout(p,{initBaseline:m[u],ends:E})}function N(ce,_e,ze){var ke,Ee=a.get(_e,ze),Le=[];return Le[l]=ce,Le[u]=Ee,isNaN(ce)||isNaN(Ee)?ke=[NaN,NaN]:(ke=i.dataToPoint(Le))[l]+=n,ke}function X(ce,_e,ze){var Ee=_e.slice(),Le=_e.slice();Ee[l]+=o,Le[l]-=o,ze?ce.push(Ee,Le):ce.push(Le,Ee)}function ve(ce,_e){var ze=_e.slice(),Ee=_e.slice();ze[l]-=o,Ee[l]+=o,ce.push(ze,Ee)}}(a,t.boxOffsetList[o],t.boxWidthList[o])}))})}var pH={type:"echarts:boxplot",transform:function(n){var t=n.upstream;t.sourceFormat!==ea&&Tr("");var a=function fH(r,n){for(var t=[],i=[],a=(n=n||{}).boundIQR,o="none"===a||0===a,l=0;l<r.length;l++){var u=da(r[l].slice()),c=Jh(u,.25),h=Jh(u,.5),f=Jh(u,.75),p=u[0],v=u[u.length-1],m=(null==a?1.5:a)*(f-c),y=o?p:Math.max(p,c-m),C=o?v:Math.min(v,f+m),T=n.itemNameFormatter,z=Pe(T)?T({value:l}):Qe(T)?T.replace("{value}",l+""):l+"";t.push([z,y,c,h,f,C]);for(var E=0;E<u.length;E++){var N=u[E];(N<y||N>C)&&i.push([z,N])}}return{boxData:t,outliers:i}}(t.getRawData(),n.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:a.boxData},{data:a.outliers}]}},vH=["color","borderColor"],mH=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.render=function(t,i,a){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},n.prototype.incrementalPrepareRender=function(t,i,a){this._clear(),this._updateDrawMode(t)},n.prototype.incrementalRender=function(t,i,a,o){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(t,i):this._incrementalRenderNormal(t,i)},n.prototype.eachRendered=function(t){Ju(this._progressiveEls||this.group,t)},n.prototype._updateDrawMode=function(t){var i=t.pipelineContext.large;(null==this._isLargeDraw||i!==this._isLargeDraw)&&(this._isLargeDraw=i,this._clear())},n.prototype._renderNormal=function(t){var i=t.getData(),a=this._data,o=this.group,l=i.getLayout("isSimpleBox"),u=t.get("clip",!0),c=t.coordinateSystem,h=c.getArea&&c.getArea();this._data||o.removeAll(),i.diff(a).add(function(f){if(i.hasValue(f)){var p=i.getItemLayout(f);if(u&&pP(h,p))return;var v=MS(p,0,!0);Kr(v,{shape:{points:p.ends}},t,f),OS(v,i,f,l),o.add(v),i.setItemGraphicEl(f,v)}}).update(function(f,p){var v=a.getItemGraphicEl(p);if(i.hasValue(f)){var m=i.getItemLayout(f);u&&pP(h,m)?o.remove(v):(v?(Kn(v,{shape:{points:m.ends}},t,f),bo(v)):v=MS(m),OS(v,i,f,l),o.add(v),i.setItemGraphicEl(f,v))}else o.remove(v)}).remove(function(f){var p=a.getItemGraphicEl(f);p&&o.remove(p)}).execute(),this._data=i},n.prototype._renderLarge=function(t){this._clear(),vP(t,this.group);var i=t.get("clip",!0)?P0(t.coordinateSystem,!1,t):null;i?this.group.setClipPath(i):this.group.removeClipPath()},n.prototype._incrementalRenderNormal=function(t,i){for(var l,a=i.getData(),o=a.getLayout("isSimpleBox");null!=(l=t.next());){var c=MS(a.getItemLayout(l));OS(c,a,l,o),c.incremental=!0,this.group.add(c),this._progressiveEls.push(c)}},n.prototype._incrementalRenderLarge=function(t,i){vP(i,this.group,this._progressiveEls,!0)},n.prototype.remove=function(t){this._clear()},n.prototype._clear=function(){this.group.removeAll(),this._data=null},n.type="candlestick",n}(Vr),_H=function r(){},yH=function(r){function n(t){var i=r.call(this,t)||this;return i.type="normalCandlestickBox",i}return R(n,r),n.prototype.getDefaultShape=function(){return new _H},n.prototype.buildPath=function(t,i){var a=i.points;this.__simpleBox?(t.moveTo(a[4][0],a[4][1]),t.lineTo(a[6][0],a[6][1])):(t.moveTo(a[0][0],a[0][1]),t.lineTo(a[1][0],a[1][1]),t.lineTo(a[2][0],a[2][1]),t.lineTo(a[3][0],a[3][1]),t.closePath(),t.moveTo(a[4][0],a[4][1]),t.lineTo(a[5][0],a[5][1]),t.moveTo(a[6][0],a[6][1]),t.lineTo(a[7][0],a[7][1]))},n}(Fn);function MS(r,n,t){var i=r.ends;return new yH({shape:{points:t?CH(i,r):i},z2:100})}function pP(r,n){for(var t=!0,i=0;i<n.ends.length;i++)if(r.contain(n.ends[i][0],n.ends[i][1])){t=!1;break}return t}function OS(r,n,t,i){var a=n.getItemModel(t);r.useStyle(n.getItemVisual(t,"style")),r.style.strokeNoScale=!0,r.__simpleBox=i,Zi(r,a)}function CH(r,n){return _t(r,function(t){return(t=t.slice())[1]=n.initBaseline,t})}var xH=function r(){},gP=function(r){function n(t){var i=r.call(this,t)||this;return i.type="largeCandlestickBox",i}return R(n,r),n.prototype.getDefaultShape=function(){return new xH},n.prototype.buildPath=function(t,i){for(var a=i.points,o=0;o<a.length;)if(this.__sign===a[o++]){var l=a[o++];t.moveTo(l,a[o++]),t.lineTo(l,a[o++])}else o+=3},n}(Fn);function vP(r,n,t,i){var a=r.getData(),o=a.getLayout("largePoints"),l=new gP({shape:{points:o},__sign:1});n.add(l);var u=new gP({shape:{points:o},__sign:-1});n.add(u),mP(1,l,r),mP(-1,u,r),i&&(l.incremental=!0,u.incremental=!0),t&&t.push(l,u)}function mP(r,n,t,i){var a=t.get(["itemStyle",r>0?"borderColor":"borderColor0"])||t.get(["itemStyle",r>0?"color":"color0"]),o=t.getModel("itemStyle").getItemStyle(vH);n.useStyle(o),n.style.fill=null,n.style.stroke=a}const TH=mH;var _P=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],t}return R(n,r),n.prototype.getShadowDim=function(){return"open"},n.prototype.brushSelector=function(t,i,a){var o=i.getItemLayout(t);return o&&a.rect(o.brushRect)},n.type="series.candlestick",n.dependencies=["xAxis","yAxis","grid"],n.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},n}(Xr);Qt(_P,cP,!0);const bH=_P;function SH(r){!r||!we(r.series)||De(r.series,function(n){tt(n)&&"k"===n.type&&(n.type="candlestick")})}var zH=["itemStyle","borderColor"],wH=["itemStyle","borderColor0"],DH=["itemStyle","color"],AH=["itemStyle","color0"],EH={seriesType:"candlestick",plan:md(),performRawSeries:!0,reset:function(r,n){function t(o,l){return l.get(o>0?DH:AH)}function i(o,l){return l.get(o>0?zH:wH)}if(!n.isSeriesFiltered(r))return!r.pipelineContext.large&&{progress:function(o,l){for(var u;null!=(u=o.next());){var c=l.getItemModel(u),h=l.getItemLayout(u).sign,f=c.getItemStyle();f.fill=t(h,c),f.stroke=i(h,c)||f.fill,Ge(l.ensureUniqueItemVisual(u,"style"),f)}}}}};const MH=EH;var OH={seriesType:"candlestick",plan:md(),reset:function(r){var n=r.coordinateSystem,t=r.getData(),i=function PH(r,n){var i,t=r.getBaseAxis(),a="category"===t.type?t.getBandWidth():(i=t.getExtent(),Math.abs(i[1]-i[0])/n.count()),o=Ht($t(r.get("barMaxWidth"),a),a),l=Ht($t(r.get("barMinWidth"),1),a),u=r.get("barWidth");return null!=u?Ht(u,a):Math.max(Math.min(a/2,o),l)}(r,t),l=["x","y"],u=t.getDimensionIndex(t.mapDimension(l[0])),c=_t(t.mapDimensionsAll(l[1]),t.getDimensionIndex,t),h=c[0],f=c[1],p=c[2],v=c[3];if(t.setLayout({candleWidth:i,isSimpleBox:i<=1.3}),!(u<0||c.length<4))return{progress:r.pipelineContext.large?function y(C,T){for(var N,ce,z=sl(4*C.count),E=0,X=[],ve=[],_e=T.getStore();null!=(ce=C.next());){var ze=_e.get(u,ce),Ee=_e.get(h,ce),Le=_e.get(f,ce),ke=_e.get(p,ce),Ue=_e.get(v,ce);isNaN(ze)||isNaN(ke)||isNaN(Ue)?(z[E++]=NaN,E+=3):(z[E++]=yP(_e,ce,Ee,Le,f),X[0]=ze,X[1]=ke,N=n.dataToPoint(X,null,ve),z[E++]=N?N[0]:NaN,z[E++]=N?N[1]:NaN,X[1]=Ue,N=n.dataToPoint(X,null,ve),z[E++]=N?N[1]:NaN)}T.setLayout("largePoints",z)}:function m(C,T){for(var z,E=T.getStore();null!=(z=C.next());){var N=E.get(u,z),X=E.get(h,z),ve=E.get(f,z),ce=E.get(p,z),_e=E.get(v,z),ze=Math.min(X,ve),Ee=Math.max(X,ve),Le=nt(ze,N),ke=nt(Ee,N),Ue=nt(ce,N),He=nt(_e,N),Ke=[];lt(Ke,ke,0),lt(Ke,Le,1),Ke.push(mt(He),mt(ke),mt(Ue),mt(Le)),T.setItemLayout(z,{sign:yP(E,z,X,ve,f),initBaseline:X>ve?ke[1]:Le[1],ends:Ke,brushRect:(wt=ce,kt=_e,Yt=N,Xt=void 0,pn=void 0,Xt=nt(wt,Yt),pn=nt(kt,Yt),Xt[0]-=i/2,pn[0]-=i/2,{x:Xt[0],y:Xt[1],width:i,height:pn[1]-Xt[1]})})}var wt,kt,Yt,Xt,pn;function nt(wt,kt){var Yt=[];return Yt[0]=kt,Yt[1]=wt,isNaN(kt)||isNaN(wt)?[NaN,NaN]:n.dataToPoint(Yt)}function lt(wt,kt,Yt){var Xt=kt.slice(),pn=kt.slice();Xt[0]=Y_(Xt[0]+i/2,1,!1),pn[0]=Y_(pn[0]-i/2,1,!0),Yt?wt.push(Xt,pn):wt.push(pn,Xt)}function mt(wt){return wt[0]=Y_(wt[0],1),wt}}}}};function yP(r,n,t,i,a){return t>i?-1:t<i?1:n>0?r.get(a,n-1)<=i?1:-1:1}const IH=OH;function CP(r,n){var t=n.rippleEffectColor||n.color;r.eachChild(function(i){i.attr({z:n.z,zlevel:n.zlevel,style:{stroke:"stroke"===n.brushType?t:null,fill:"fill"===n.brushType?t:null}})})}var LH=function(r){function n(t,i){var a=r.call(this)||this,o=new vg(t,i),l=new hn;return a.add(o),a.add(l),a.updateData(t,i),a}return R(n,r),n.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},n.prototype.startEffectAnimation=function(t){for(var i=t.symbolType,a=t.color,o=t.rippleNumber,l=this.childAt(1),u=0;u<o;u++){var c=wi(i,-1,-1,2,2,a);c.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var h=-u/o*t.period+t.effectOffset;c.animate("",!0).when(t.period,{scaleX:t.rippleScale/2,scaleY:t.rippleScale/2}).delay(h).start(),c.animateStyle(!0).when(t.period,{opacity:0}).delay(h).start(),l.add(c)}CP(l,t)},n.prototype.updateEffectAnimation=function(t){for(var i=this._effectCfg,a=this.childAt(1),o=["symbolType","period","rippleScale","rippleNumber"],l=0;l<o.length;l++){var u=o[l];if(i[u]!==t[u])return this.stopEffectAnimation(),void this.startEffectAnimation(t)}CP(a,t)},n.prototype.highlight=function(){gs(this)},n.prototype.downplay=function(){vs(this)},n.prototype.getSymbolType=function(){var t=this.childAt(0);return t&&t.getSymbolType()},n.prototype.updateData=function(t,i){var a=this,o=t.hostModel;this.childAt(0).updateData(t,i);var l=this.childAt(1),u=t.getItemModel(i),c=t.getItemVisual(i,"symbol"),h=$p(t.getItemVisual(i,"symbolSize")),f=t.getItemVisual(i,"style"),p=f&&f.fill,v=u.getModel("emphasis");l.setScale(h),l.traverse(function(T){T.setStyle("fill",p)});var m=wd(t.getItemVisual(i,"symbolOffset"),h);m&&(l.x=m[0],l.y=m[1]);var y=t.getItemVisual(i,"symbolRotate");l.rotation=(y||0)*Math.PI/180||0;var C={};C.showEffectOn=o.get("showEffectOn"),C.rippleScale=u.get(["rippleEffect","scale"]),C.brushType=u.get(["rippleEffect","brushType"]),C.period=1e3*u.get(["rippleEffect","period"]),C.effectOffset=i/t.count(),C.z=o.getShallow("z")||0,C.zlevel=o.getShallow("zlevel")||0,C.symbolType=c,C.color=p,C.rippleEffectColor=u.get(["rippleEffect","color"]),C.rippleNumber=u.get(["rippleEffect","number"]),"render"===C.showEffectOn?(this._effectCfg?this.updateEffectAnimation(C):this.startEffectAnimation(C),this._effectCfg=C):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(T){"emphasis"===T?"render"!==C.showEffectOn&&a.startEffectAnimation(C):"normal"===T&&"render"!==C.showEffectOn&&a.stopEffectAnimation()}),this._effectCfg=C,di(this,v.get("focus"),v.get("blurScope"),v.get("disabled"))},n.prototype.fadeOut=function(t){t&&t()},n}(hn);const RH=LH;var NH=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.init=function(){this._symbolDraw=new mg(RH)},n.prototype.render=function(t,i,a){var o=t.getData(),l=this._symbolDraw;l.updateData(o,{clipShape:this._getClipShape(t)}),this.group.add(l.group)},n.prototype._getClipShape=function(t){var i=t.coordinateSystem,a=i&&i.getArea&&i.getArea();return t.get("clip",!0)?a:null},n.prototype.updateTransform=function(t,i,a){var o=t.getData();this.group.dirty();var l=_g("").reset(t,i,a);l.progress&&l.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout()},n.prototype._updateGroupTransform=function(t){var i=t.coordinateSystem;i&&i.getRoamTransform&&(this.group.transform=pv(i.getRoamTransform()),this.group.decomposeTransform())},n.prototype.remove=function(t,i){this._symbolDraw&&this._symbolDraw.remove(!0)},n.type="effectScatter",n}(Vr);const FH=NH;var BH=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.hasSymbolVisual=!0,t}return R(n,r),n.prototype.getInitialData=function(t,i){return ol(null,this,{useEncodeDefaulter:!0})},n.prototype.brushSelector=function(t,i,a){return a.point(i.getItemLayout(t))},n.type="series.effectScatter",n.dependencies=["grid","polar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},n}(Xr);const ZH=BH;var VH=function(r){function n(t,i,a){var o=r.call(this)||this;return o.add(o.createLine(t,i,a)),o._updateEffectSymbol(t,i),o}return R(n,r),n.prototype.createLine=function(t,i,a){return new aS(t,i,a)},n.prototype._updateEffectSymbol=function(t,i){var o=t.getItemModel(i).getModel("effect"),l=o.get("symbolSize"),u=o.get("symbol");we(l)||(l=[l,l]);var c=t.getItemVisual(i,"style"),h=o.get("color")||c&&c.stroke,f=this.childAt(1);this._symbolType!==u&&(this.remove(f),(f=wi(u,-.5,-.5,1,1,h)).z2=100,f.culling=!0,this.add(f)),f&&(f.setStyle("shadowColor",h),f.setStyle(o.getItemStyle(["color"])),f.scaleX=l[0],f.scaleY=l[1],f.setColor(h),this._symbolType=u,this._symbolScale=l,this._updateEffectAnimation(t,o,i))},n.prototype._updateEffectAnimation=function(t,i,a){var o=this.childAt(1);if(o){var l=t.getItemLayout(a),u=1e3*i.get("period"),c=i.get("loop"),h=i.get("constantSpeed"),f=Cr(i.get("delay"),function(v){return v/t.count()*u/3});if(o.ignore=!0,this._updateAnimationPoints(o,l),h>0&&(u=this._getLineLength(o)/h*1e3),u!==this._period||c!==this._loop){o.stopAnimation();var p=void 0;p=Pe(f)?f(a):f,o.__t>0&&(p=-u*o.__t),this._animateSymbol(o,u,p,c)}this._period=u,this._loop=c}},n.prototype._animateSymbol=function(t,i,a,o){if(i>0){t.__t=0;var l=this,u=t.animate("",o).when(i,{__t:1}).delay(a).during(function(){l._updateSymbolPosition(t)});o||u.done(function(){l.remove(t)}),u.start()}},n.prototype._getLineLength=function(t){return xi(t.__p1,t.__cp1)+xi(t.__cp1,t.__p2)},n.prototype._updateAnimationPoints=function(t,i){t.__p1=i[0],t.__p2=i[1],t.__cp1=i[2]||[(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]},n.prototype.updateData=function(t,i,a){this.childAt(0).updateData(t,i,a),this._updateEffectSymbol(t,i)},n.prototype._updateSymbolPosition=function(t){var i=t.__p1,a=t.__p2,o=t.__cp1,l=t.__t,u=[t.x,t.y],c=u.slice(),h=pi,f=Bs;u[0]=h(i[0],o[0],a[0],l),u[1]=h(i[1],o[1],a[1],l);var p=f(i[0],o[0],a[0],l),v=f(i[1],o[1],a[1],l);t.rotation=-Math.atan2(v,p)-Math.PI/2,("line"===this._symbolType||"rect"===this._symbolType||"roundRect"===this._symbolType)&&(void 0!==t.__lastT&&t.__lastT<t.__t?(t.scaleY=1.05*xi(c,u),1===l&&(u[0]=c[0]+(u[0]-c[0])/2,u[1]=c[1]+(u[1]-c[1])/2)):t.scaleY=1===t.__lastT?2*xi(i,u):this._symbolScale[1]),t.__lastT=t.__t,t.ignore=!1,t.x=u[0],t.y=u[1]},n.prototype.updateLayout=function(t,i){this.childAt(0).updateLayout(t,i);var a=t.getItemModel(i).getModel("effect");this._updateEffectAnimation(t,a,i)},n}(hn);const xP=VH;var HH=function(r){function n(t,i,a){var o=r.call(this)||this;return o._createPolyline(t,i,a),o}return R(n,r),n.prototype._createPolyline=function(t,i,a){var o=t.getItemLayout(i),l=new Ia({shape:{points:o}});this.add(l),this._updateCommonStl(t,i,a)},n.prototype.updateData=function(t,i,a){var o=t.hostModel;Kn(this.childAt(0),{shape:{points:t.getItemLayout(i)}},o,i),this._updateCommonStl(t,i,a)},n.prototype._updateCommonStl=function(t,i,a){var o=this.childAt(0),l=t.getItemModel(i),u=a&&a.emphasisLineStyle,c=a&&a.focus,h=a&&a.blurScope,f=a&&a.emphasisDisabled;if(!a||t.hasItemOption){var p=l.getModel("emphasis");u=p.getModel("lineStyle").getLineStyle(),f=p.get("disabled"),c=p.get("focus"),h=p.get("blurScope")}o.useStyle(t.getItemVisual(i,"style")),o.style.fill=null,o.style.strokeNoScale=!0,o.ensureState("emphasis").style=u,di(this,c,h,f)},n.prototype.updateLayout=function(t,i){this.childAt(0).setShape("points",t.getItemLayout(i))},n}(hn);const TP=HH;var WH=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t._lastFrame=0,t._lastFramePercent=0,t}return R(n,r),n.prototype.createLine=function(t,i,a){return new TP(t,i,a)},n.prototype._updateAnimationPoints=function(t,i){this._points=i;for(var a=[0],o=0,l=1;l<i.length;l++)o+=xi(i[l-1],i[l]),a.push(o);if(0!==o){for(l=0;l<a.length;l++)a[l]/=o;this._offsets=a,this._length=o}else this._length=0},n.prototype._getLineLength=function(){return this._length},n.prototype._updateSymbolPosition=function(t){var i=t.__t,a=this._points,o=this._offsets,l=a.length;if(o){var c,u=this._lastFrame;if(i<this._lastFramePercent){for(c=Math.min(u+1,l-1);c>=0&&!(o[c]<=i);c--);c=Math.min(c,l-2)}else{for(c=u;c<l&&!(o[c]>i);c++);c=Math.min(c-1,l-2)}var f=(i-o[c])/(o[c+1]-o[c]),p=a[c],v=a[c+1];t.x=p[0]*(1-f)+f*v[0],t.y=p[1]*(1-f)+f*v[1],t.rotation=-Math.atan2(v[1]-p[1],v[0]-p[0])-Math.PI/2,this._lastFrame=c,this._lastFramePercent=i,t.ignore=!1}},n}(xP);const GH=WH;var JH=function r(){this.polyline=!1,this.curveness=0,this.segs=[]},YH=function(r){function n(t){var i=r.call(this,t)||this;return i._off=0,i.hoverDataIdx=-1,i}return R(n,r),n.prototype.reset=function(){this.notClear=!1,this._off=0},n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new JH},n.prototype.buildPath=function(t,i){var l,a=i.segs,o=i.curveness;if(i.polyline)for(l=this._off;l<a.length;){var u=a[l++];if(u>0){t.moveTo(a[l++],a[l++]);for(var c=1;c<u;c++)t.lineTo(a[l++],a[l++])}}else for(l=this._off;l<a.length;){var h=a[l++],f=a[l++],p=a[l++],v=a[l++];t.moveTo(h,f),o>0?t.quadraticCurveTo((h+p)/2-(f-v)*o,(f+v)/2-(p-h)*o,p,v):t.lineTo(p,v)}this.incremental&&(this._off=l,this.notClear=!0)},n.prototype.findDataIndex=function(t,i){var a=this.shape,o=a.segs,l=a.curveness,u=this.style.lineWidth;if(a.polyline)for(var c=0,h=0;h<o.length;){var f=o[h++];if(f>0)for(var p=o[h++],v=o[h++],m=1;m<f;m++)if(qs(p,v,y=o[h++],C=o[h++],u,t,i))return c;c++}else for(c=0,h=0;h<o.length;){p=o[h++],v=o[h++];var y=o[h++],C=o[h++];if(l>0){if(Xv(p,v,(p+y)/2-(v-C)*l,(v+C)/2-(y-p)*l,y,C,u,t,i))return c}else if(qs(p,v,y,C,u,t,i))return c;c++}return-1},n.prototype.contain=function(t,i){var a=this.transformCoordToLocal(t,i);return this.getBoundingRect().contain(t=a[0],i=a[1])?(this.hoverDataIdx=this.findDataIndex(t,i))>=0:(this.hoverDataIdx=-1,!1)},n.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var a=this.shape.segs,o=1/0,l=1/0,u=-1/0,c=-1/0,h=0;h<a.length;){var f=a[h++],p=a[h++];o=Math.min(f,o),u=Math.max(f,u),l=Math.min(p,l),c=Math.max(p,c)}t=this._rect=new Mn(o,l,u,c)}return t},n}(Fn),QH=function(){function r(){this.group=new hn}return r.prototype.updateData=function(n){this._clear();var t=this._create();t.setShape({segs:n.getLayout("linesPoints")}),this._setCommon(t,n)},r.prototype.incrementalPrepareUpdate=function(n){this.group.removeAll(),this._clear()},r.prototype.incrementalUpdate=function(n,t){var i=this._newAdded[0],a=t.getLayout("linesPoints"),o=i&&i.shape.segs;if(o&&o.length<2e4){var l=o.length,u=new Float32Array(l+a.length);u.set(o),u.set(a,l),i.setShape({segs:u})}else{this._newAdded=[];var c=this._create();c.incremental=!0,c.setShape({segs:a}),this._setCommon(c,t),c.__startIndex=n.start}},r.prototype.remove=function(){this._clear()},r.prototype.eachRendered=function(n){this._newAdded[0]&&n(this._newAdded[0])},r.prototype._create=function(){var n=new YH({cursor:"default"});return this._newAdded.push(n),this.group.add(n),n},r.prototype._setCommon=function(n,t,i){var a=t.hostModel;n.setShape({polyline:a.get("polyline"),curveness:a.get(["lineStyle","curveness"])}),n.useStyle(a.getModel("lineStyle").getLineStyle()),n.style.strokeNoScale=!0;var o=t.getVisual("style");o&&o.stroke&&n.setStyle("stroke",o.stroke),n.setStyle("fill",null);var l=dn(n);l.seriesIndex=a.seriesIndex,n.on("mousemove",function(u){l.dataIndex=null;var c=n.hoverDataIdx;c>0&&(l.dataIndex=c+n.__startIndex)})},r.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},r}();const qH=QH;var KH={seriesType:"lines",plan:md(),reset:function(r){var n=r.coordinateSystem;if(n){var t=r.get("polyline"),i=r.pipelineContext.large;return{progress:function(a,o){var l=[];if(i){var u=void 0,c=a.end-a.start;if(t){for(var h=0,f=a.start;f<a.end;f++)h+=r.getLineCoordsCount(f);u=new Float32Array(c+2*h)}else u=new Float32Array(4*c);var p=0,v=[];for(f=a.start;f<a.end;f++){var m=r.getLineCoords(f,l);t&&(u[p++]=m);for(var y=0;y<m;y++)v=n.dataToPoint(l[y],!1,v),u[p++]=v[0],u[p++]=v[1]}o.setLayout("linesPoints",u)}else for(f=a.start;f<a.end;f++){var C=o.getItemModel(f),T=(m=r.getLineCoords(f,l),[]);if(t)for(var z=0;z<m;z++)T.push(n.dataToPoint(l[z]));else{T[0]=n.dataToPoint(l[0]),T[1]=n.dataToPoint(l[1]);var E=C.get(["lineStyle","curveness"]);+E&&(T[2]=[(T[0][0]+T[1][0])/2-(T[0][1]-T[1][1])*E,(T[0][1]+T[1][1])/2-(T[1][0]-T[0][0])*E])}o.setItemLayout(f,T)}}}}}};const bP=KH;var $H=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.render=function(t,i,a){var o=t.getData(),l=this._updateLineDraw(o,t),u=t.get("zlevel"),c=t.get(["effect","trailLength"]),h=a.getZr(),f="svg"===h.painter.getType();f||h.painter.getLayer(u).clear(!0),null!=this._lastZlevel&&!f&&h.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&c>0&&(f||h.configLayer(u,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(c/10+.9,1),0)})),l.updateData(o);var p=t.get("clip",!0)&&P0(t.coordinateSystem,!1,t);p?this.group.setClipPath(p):this.group.removeClipPath(),this._lastZlevel=u,this._finished=!0},n.prototype.incrementalPrepareRender=function(t,i,a){var o=t.getData();this._updateLineDraw(o,t).incrementalPrepareUpdate(o),this._clearLayer(a),this._finished=!1},n.prototype.incrementalRender=function(t,i,a){this._lineDraw.incrementalUpdate(t,i.getData()),this._finished=t.end===i.getData().count()},n.prototype.eachRendered=function(t){this._lineDraw&&this._lineDraw.eachRendered(t)},n.prototype.updateTransform=function(t,i,a){var o=t.getData(),l=t.pipelineContext;if(!this._finished||l.large||l.progressiveRender)return{update:!0};var u=bP.reset(t,i,a);u.progress&&u.progress({start:0,end:o.count(),count:o.count()},o),this._lineDraw.updateLayout(),this._clearLayer(a)},n.prototype._updateLineDraw=function(t,i){var a=this._lineDraw,o=this._showEffect(i),l=!!i.get("polyline"),c=i.pipelineContext.large;return(!a||o!==this._hasEffet||l!==this._isPolyline||c!==this._isLargeDraw)&&(a&&a.remove(),a=this._lineDraw=c?new qH:new sS(l?o?GH:TP:o?xP:aS),this._hasEffet=o,this._isPolyline=l,this._isLargeDraw=c),this.group.add(a.group),a},n.prototype._showEffect=function(t){return!!t.get(["effect","show"])},n.prototype._clearLayer=function(t){var i=t.getZr();"svg"!==i.painter.getType()&&null!=this._lastZlevel&&i.painter.getLayer(this._lastZlevel).clear(!0)},n.prototype.remove=function(t,i){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(i)},n.prototype.dispose=function(t,i){this.remove(t,i)},n.type="lines",n}(Vr);const jH=$H;var XH="undefined"==typeof Uint32Array?Array:Uint32Array,e8="undefined"==typeof Float64Array?Array:Float64Array;function SP(r){var n=r.data;n&&n[0]&&n[0][0]&&n[0][0].coord&&(r.data=_t(n,function(t){var a={coords:[t[0].coord,t[1].coord]};return t[0].name&&(a.fromName=t[0].name),t[1].name&&(a.toName=t[1].name),dr([a,t[0],t[1]])}))}var t8=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.visualStyleAccessPath="lineStyle",t.visualDrawType="stroke",t}return R(n,r),n.prototype.init=function(t){t.data=t.data||[],SP(t);var i=this._processFlatCoordsArray(t.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(t.data=new Float32Array(i.count)),r.prototype.init.apply(this,arguments)},n.prototype.mergeOption=function(t){if(SP(t),t.data){var i=this._processFlatCoordsArray(t.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(t.data=new Float32Array(i.count))}r.prototype.mergeOption.apply(this,arguments)},n.prototype.appendData=function(t){var i=this._processFlatCoordsArray(t.data);i.flatCoords&&(this._flatCoords?(this._flatCoords=Za(this._flatCoords,i.flatCoords),this._flatCoordsOffset=Za(this._flatCoordsOffset,i.flatCoordsOffset)):(this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset),t.data=new Float32Array(i.count)),this.getRawData().appendData(t.data)},n.prototype._getCoordsFromItemModel=function(t){var i=this.getData().getItemModel(t);return i.option instanceof Array?i.option:i.getShallow("coords")},n.prototype.getLineCoordsCount=function(t){return this._flatCoordsOffset?this._flatCoordsOffset[2*t+1]:this._getCoordsFromItemModel(t).length},n.prototype.getLineCoords=function(t,i){if(this._flatCoordsOffset){for(var a=this._flatCoordsOffset[2*t],o=this._flatCoordsOffset[2*t+1],l=0;l<o;l++)i[l]=i[l]||[],i[l][0]=this._flatCoords[a+2*l],i[l][1]=this._flatCoords[a+2*l+1];return o}var u=this._getCoordsFromItemModel(t);for(l=0;l<u.length;l++)i[l]=i[l]||[],i[l][0]=u[l][0],i[l][1]=u[l][1];return u.length},n.prototype._processFlatCoordsArray=function(t){var i=0;if(this._flatCoords&&(i=this._flatCoords.length),Ve(t[0])){for(var a=t.length,o=new XH(a),l=new e8(a),u=0,c=0,h=0,f=0;f<a;){h++;var p=t[f++];o[c++]=u+i,o[c++]=p;for(var v=0;v<p;v++){var m=t[f++],y=t[f++];l[u++]=m,l[u++]=y}}return{flatCoordsOffset:new Uint32Array(o.buffer,0,c),flatCoords:l,count:h}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},n.prototype.getInitialData=function(t,i){var o=new _a(["value"],this);return o.hasItemOption=!1,o.initData(t.data,[],function(l,u,c,h){if(l instanceof Array)return NaN;o.hasItemOption=!0;var f=l.value;return null!=f?f instanceof Array?f[h]:f:void 0}),o},n.prototype.formatTooltip=function(t,i,a){var l=this.getData().getItemModel(t),u=l.get("name");if(u)return u;var c=l.get("fromName"),h=l.get("toName"),f=[];return null!=c&&f.push(c),null!=h&&f.push(h),Wi("nameValue",{name:f.join(" > ")})},n.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},n.prototype.getProgressive=function(){var t=this.option.progressive;return null==t?this.option.large?1e4:this.get("progressive"):t},n.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?2e4:this.get("progressiveThreshold"):t},n.prototype.getZLevelKey=function(){var t=this.getModel("effect"),i=t.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:t.get("show")&&i>0?i+"":""},n.type="series.lines",n.dependencies=["grid","polar","geo","calendar"],n.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},n}(Xr);const n8=t8;function iy(r){return r instanceof Array||(r=[r,r]),r}var r8={seriesType:"lines",reset:function(r){var n=iy(r.get("symbol")),t=iy(r.get("symbolSize")),i=r.getData();return i.setVisual("fromSymbol",n&&n[0]),i.setVisual("toSymbol",n&&n[1]),i.setVisual("fromSymbolSize",t&&t[0]),i.setVisual("toSymbolSize",t&&t[1]),{dataEach:i.hasItemOption?function a(o,l){var u=o.getItemModel(l),c=iy(u.getShallow("symbol",!0)),h=iy(u.getShallow("symbolSize",!0));c[0]&&o.setItemVisual(l,"fromSymbol",c[0]),c[1]&&o.setItemVisual(l,"toSymbol",c[1]),h[0]&&o.setItemVisual(l,"fromSymbolSize",h[0]),h[1]&&o.setItemVisual(l,"toSymbolSize",h[1])}:null}}};const a8=r8;var l8=function(){function r(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var n=fn.createCanvas();this.canvas=n}return r.prototype.update=function(n,t,i,a,o,l){var u=this._getBrush(),c=this._getGradient(o,"inRange"),h=this._getGradient(o,"outOfRange"),f=this.pointSize+this.blurSize,p=this.canvas,v=p.getContext("2d"),m=n.length;p.width=t,p.height=i;for(var y=0;y<m;++y){var C=n[y],T=C[0],z=C[1],N=a(C[2]);v.globalAlpha=N,v.drawImage(u,T-f,z-f)}if(!p.width||!p.height)return p;for(var X=v.getImageData(0,0,p.width,p.height),ve=X.data,ce=0,_e=ve.length,ze=this.minOpacity,Le=this.maxOpacity-ze;ce<_e;){N=ve[ce+3]/256;var ke=4*Math.floor(255*N);if(N>0){var Ue=l(N)?c:h;N>0&&(N=N*Le+ze),ve[ce++]=Ue[ke],ve[ce++]=Ue[ke+1],ve[ce++]=Ue[ke+2],ve[ce++]=Ue[ke+3]*N*256}else ce+=4}return v.putImageData(X,0,0),p},r.prototype._getBrush=function(){var n=this._brushCanvas||(this._brushCanvas=fn.createCanvas()),t=this.pointSize+this.blurSize,i=2*t;n.width=i,n.height=i;var a=n.getContext("2d");return a.clearRect(0,0,i,i),a.shadowOffsetX=i,a.shadowBlur=this.blurSize,a.shadowColor="#000",a.beginPath(),a.arc(-t,t,this.pointSize,0,2*Math.PI,!0),a.closePath(),a.fill(),n},r.prototype._getGradient=function(n,t){for(var i=this._gradientPixels,a=i[t]||(i[t]=new Uint8ClampedArray(1024)),o=[0,0,0,0],l=0,u=0;u<256;u++)n[t](u/255,!0,o),a[l++]=o[0],a[l++]=o[1],a[l++]=o[2],a[l++]=o[3];return a},r}();const u8=l8;function zP(r){var n=r.dimensions;return"lng"===n[0]&&"lat"===n[1]}var d8=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.render=function(t,i,a){var o;i.eachComponent("visualMap",function(u){u.eachTargetSeries(function(c){c===t&&(o=u)})}),this._progressiveEls=null,this.group.removeAll();var l=t.coordinateSystem;"cartesian2d"===l.type||"calendar"===l.type?this._renderOnCartesianAndCalendar(t,a,0,t.getData().count()):zP(l)&&this._renderOnGeo(l,t,o,a)},n.prototype.incrementalPrepareRender=function(t,i,a){this.group.removeAll()},n.prototype.incrementalRender=function(t,i,a,o){var l=i.coordinateSystem;l&&(zP(l)?this.render(i,a,o):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(i,o,t.start,t.end,!0)))},n.prototype.eachRendered=function(t){Ju(this._progressiveEls||this.group,t)},n.prototype._renderOnCartesianAndCalendar=function(t,i,a,o,l){var h,f,p,v,u=t.coordinateSystem,c=uh(u,"cartesian2d");if(c){var m=u.getAxis("x"),y=u.getAxis("y");h=m.getBandWidth()+.5,f=y.getBandWidth()+.5,p=m.scale.getExtent(),v=y.scale.getExtent()}for(var C=this.group,T=t.getData(),z=t.getModel(["emphasis","itemStyle"]).getItemStyle(),E=t.getModel(["blur","itemStyle"]).getItemStyle(),N=t.getModel(["select","itemStyle"]).getItemStyle(),X=t.get(["itemStyle","borderRadius"]),ve=Li(t),ce=t.getModel("emphasis"),_e=ce.get("focus"),ze=ce.get("blurScope"),Ee=ce.get("disabled"),Le=c?[T.mapDimension("x"),T.mapDimension("y"),T.mapDimension("value")]:[T.mapDimension("time"),T.mapDimension("value")],ke=a;ke<o;ke++){var Ue=void 0,He=T.getItemVisual(ke,"style");if(c){var Ke=T.get(Le[0],ke),nt=T.get(Le[1],ke);if(isNaN(T.get(Le[2],ke))||Ke<p[0]||Ke>p[1]||nt<v[0]||nt>v[1])continue;var lt=u.dataToPoint([Ke,nt]);Ue=new Qn({shape:{x:lt[0]-h/2,y:lt[1]-f/2,width:h,height:f},style:He})}else{if(isNaN(T.get(Le[1],ke)))continue;Ue=new Qn({z2:1,shape:u.dataToRect([T.get(Le[0],ke)]).contentShape,style:He})}if(T.hasItemOption){var St=T.getItemModel(ke),mt=St.getModel("emphasis");z=mt.getModel("itemStyle").getItemStyle(),E=St.getModel(["blur","itemStyle"]).getItemStyle(),N=St.getModel(["select","itemStyle"]).getItemStyle(),X=St.get(["itemStyle","borderRadius"]),_e=mt.get("focus"),ze=mt.get("blurScope"),Ee=mt.get("disabled"),ve=Li(St)}Ue.shape.r=X;var wt=t.getRawValue(ke),kt="-";wt&&null!=wt[2]&&(kt=wt[2]+""),Xi(Ue,ve,{labelFetcher:t,labelDataIndex:ke,defaultOpacity:He.opacity,defaultText:kt}),Ue.ensureState("emphasis").style=z,Ue.ensureState("blur").style=E,Ue.ensureState("select").style=N,di(Ue,_e,ze,Ee),Ue.incremental=l,l&&(Ue.states.emphasis.hoverLayer=!0),C.add(Ue),T.setItemGraphicEl(ke,Ue),this._progressiveEls&&this._progressiveEls.push(Ue)}},n.prototype._renderOnGeo=function(t,i,a,o){var l=a.targetVisuals.inRange,u=a.targetVisuals.outOfRange,c=i.getData(),h=this._hmLayer||this._hmLayer||new u8;h.blurSize=i.get("blurSize"),h.pointSize=i.get("pointSize"),h.minOpacity=i.get("minOpacity"),h.maxOpacity=i.get("maxOpacity");var f=t.getViewRect().clone(),p=t.getRoamTransform();f.applyTransform(p);var v=Math.max(f.x,0),m=Math.max(f.y,0),y=Math.min(f.width+f.x,o.getWidth()),C=Math.min(f.height+f.y,o.getHeight()),T=y-v,z=C-m,E=[c.mapDimension("lng"),c.mapDimension("lat"),c.mapDimension("value")],N=c.mapArray(E,function(_e,ze,Ee){var Le=t.dataToPoint([_e,ze]);return Le[0]-=v,Le[1]-=m,Le.push(Ee),Le}),X=a.getExtent(),ve="visualMap.continuous"===a.type?function h8(r,n){var t=r[1]-r[0];return n=[(n[0]-r[0])/t,(n[1]-r[0])/t],function(i){return i>=n[0]&&i<=n[1]}}(X,a.option.range):function c8(r,n,t){var i=r[1]-r[0],a=(n=_t(n,function(l){return{interval:[(l.interval[0]-r[0])/i,(l.interval[1]-r[0])/i]}})).length,o=0;return function(l){var u;for(u=o;u<a;u++)if((c=n[u].interval)[0]<=l&&l<=c[1]){o=u;break}if(u===a)for(u=o-1;u>=0;u--){var c;if((c=n[u].interval)[0]<=l&&l<=c[1]){o=u;break}}return u>=0&&u<a&&t[u]}}(X,a.getPieceList(),a.option.selected);h.update(N,T,z,l.color.getNormalizer(),{inRange:l.color.getColorMapper(),outOfRange:u.color.getColorMapper()},ve);var ce=new ki({style:{width:T,height:z,x:v,y:m,image:h.canvas},silent:!0});this.group.add(ce)},n.type="heatmap",n}(Vr);const f8=d8;var p8=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.getInitialData=function(t,i){return ol(null,this,{generateCoord:"value"})},n.prototype.preventIncremental=function(){var t=Fu.get(this.get("coordinateSystem"));if(t&&t.dimensions)return"lng"===t.dimensions[0]&&"lat"===t.dimensions[1]},n.type="series.heatmap",n.dependencies=["grid","geo","calendar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},n}(Xr);const g8=p8;var m8=["itemStyle","borderWidth"],wP=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],PS=new Cs,_8=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.render=function(t,i,a){var o=this.group,l=t.getData(),u=this._data,c=t.coordinateSystem,f=c.getBaseAxis().isHorizontal(),p=c.master.getRect(),v={ecSize:{width:a.getWidth(),height:a.getHeight()},seriesModel:t,coordSys:c,coordSysExtent:[[p.x,p.x+p.width],[p.y,p.y+p.height]],isHorizontal:f,valueDim:wP[+f],categoryDim:wP[1-+f]};return l.diff(u).add(function(m){if(l.hasValue(m)){var y=IP(l,m),C=DP(l,m,y,v),T=kP(l,v,C);l.setItemGraphicEl(m,T),o.add(T),NP(T,v,C)}}).update(function(m,y){var C=u.getItemGraphicEl(y);if(l.hasValue(m)){var T=IP(l,m),z=DP(l,m,T,v),E=RP(l,z);C&&E!==C.__pictorialShapeStr&&(o.remove(C),l.setItemGraphicEl(m,null),C=null),C?function z8(r,n,t){Kn(r.__pictorialBundle,{x:t.bundlePosition[0],y:t.bundlePosition[1]},t.animationModel,t.dataIndex),t.symbolRepeat?EP(r,n,t,!0):MP(r,0,t,!0),OP(r,t,!0),PP(r,n,t,!0)}(C,v,z):C=kP(l,v,z,!0),l.setItemGraphicEl(m,C),C.__pictorialSymbolMeta=z,o.add(C),NP(C,v,z)}else o.remove(C)}).remove(function(m){var y=u.getItemGraphicEl(m);y&&LP(u,m,y.__pictorialSymbolMeta.animationModel,y)}).execute(),this._data=l,this.group},n.prototype.remove=function(t,i){var a=this.group,o=this._data;t.get("animation")?o&&o.eachItemGraphicEl(function(l){LP(o,dn(l).dataIndex,t,l)}):a.removeAll()},n.type="pictorialBar",n}(Vr);function DP(r,n,t,i){var a=r.getItemLayout(n),o=t.get("symbolRepeat"),l=t.get("symbolClip"),u=t.get("symbolPosition")||"start",h=(t.get("symbolRotate")||0)*Math.PI/180||0,f=t.get("symbolPatternSize")||2,p=t.isAnimationEnabled(),v={dataIndex:n,layout:a,itemModel:t,symbolType:r.getItemVisual(n,"symbol")||"circle",style:r.getItemVisual(n,"style"),symbolClip:l,symbolRepeat:o,symbolRepeatDirection:t.get("symbolRepeatDirection"),symbolPatternSize:f,rotation:h,animationModel:p?t:null,hoverScale:p&&t.get(["emphasis","scale"]),z2:t.getShallow("z",!0)||0};(function y8(r,n,t,i,a){var f,o=i.valueDim,l=r.get("symbolBoundingData"),u=i.coordSys.getOtherAxis(i.coordSys.getBaseAxis()),c=u.toGlobalCoord(u.dataToCoord(0)),h=1-+(t[o.wh]<=0);if(we(l)){var p=[IS(u,l[0])-c,IS(u,l[1])-c];p[1]<p[0]&&p.reverse(),f=p[h]}else f=null!=l?IS(u,l)-c:n?i.coordSysExtent[o.index][h]-c:t[o.wh];a.boundingLength=f,n&&(a.repeatCutLength=t[o.wh]),a.pxSign=f>0?1:-1})(t,o,a,i,v),function C8(r,n,t,i,a,o,l,u,c,h){var y,f=c.valueDim,p=c.categoryDim,v=Math.abs(t[p.wh]),m=r.getItemVisual(n,"symbolSize");(y=we(m)?m.slice():null==m?["100%","100%"]:[m,m])[p.index]=Ht(y[p.index],v),y[f.index]=Ht(y[f.index],i?v:Math.abs(o)),h.symbolSize=y,(h.symbolScale=[y[0]/u,y[1]/u])[f.index]*=(c.isHorizontal?-1:1)*l}(r,n,a,o,0,v.boundingLength,v.pxSign,f,i,v),function x8(r,n,t,i,a){var o=r.get(m8)||0;o&&(PS.attr({scaleX:n[0],scaleY:n[1],rotation:t}),PS.updateTransform(),o/=PS.getLineScale(),o*=n[i.valueDim.index]),a.valueLineWidth=o||0}(t,v.symbolScale,h,i,v);var m=v.symbolSize,y=wd(t.get("symbolOffset"),m);return function T8(r,n,t,i,a,o,l,u,c,h,f,p){var v=f.categoryDim,m=f.valueDim,y=p.pxSign,C=Math.max(n[m.index]+u,0),T=C;if(i){var z=Math.abs(c),E=Cr(r.get("symbolMargin"),"15%")+"",N=!1;E.lastIndexOf("!")===E.length-1&&(N=!0,E=E.slice(0,E.length-1));var X=Ht(E,n[m.index]),ve=Math.max(C+2*X,0),ce=N?0:2*X,_e=Of(i),ze=_e?i:FP((z+ce)/ve);ve=C+2*(X=(z-ze*C)/2/(N?ze:Math.max(ze-1,1))),ce=N?0:2*X,!_e&&"fixed"!==i&&(ze=h?FP((Math.abs(h)+ce)/ve):0),T=ze*ve-ce,p.repeatTimes=ze,p.symbolMargin=X}var Le=y*(T/2),ke=p.pathPosition=[];ke[v.index]=t[v.wh]/2,ke[m.index]="start"===l?Le:"end"===l?c-Le:c/2,o&&(ke[0]+=o[0],ke[1]+=o[1]);var Ue=p.bundlePosition=[];Ue[v.index]=t[v.xy],Ue[m.index]=t[m.xy];var He=p.barRectShape=Ge({},t);He[m.wh]=y*Math.max(Math.abs(t[m.wh]),Math.abs(ke[m.index]+Le)),He[v.wh]=t[v.wh];var Ke=p.clipShape={};Ke[v.xy]=-t[v.xy],Ke[v.wh]=f.ecSize[v.wh],Ke[m.xy]=0,Ke[m.wh]=t[m.wh]}(t,m,a,o,0,y,u,v.valueLineWidth,v.boundingLength,v.repeatCutLength,i,v),v}function IS(r,n){return r.toGlobalCoord(r.dataToCoord(r.scale.parse(n)))}function AP(r){var n=r.symbolPatternSize,t=wi(r.symbolType,-n/2,-n/2,n,n);return t.attr({culling:!0}),"image"!==t.type&&t.setStyle({strokeNoScale:!0}),t}function EP(r,n,t,i){var a=r.__pictorialBundle,u=t.pathPosition,c=n.valueDim,h=t.repeatTimes||0,f=0,p=t.symbolSize[n.valueDim.index]+t.valueLineWidth+2*t.symbolMargin;for(kS(r,function(C){C.__pictorialAnimationIndex=f,C.__pictorialRepeatTimes=h,f<h?Hd(C,null,y(f),t,i):Hd(C,null,{scaleX:0,scaleY:0},t,i,function(){a.remove(C)}),f++});f<h;f++){var v=AP(t);v.__pictorialAnimationIndex=f,v.__pictorialRepeatTimes=h,a.add(v);var m=y(f);Hd(v,{x:m.x,y:m.y,scaleX:0,scaleY:0},{scaleX:m.scaleX,scaleY:m.scaleY,rotation:m.rotation},t,i)}function y(C){var T=u.slice(),z=t.pxSign,E=C;return("start"===t.symbolRepeatDirection?z>0:z<0)&&(E=h-1-C),T[c.index]=p*(E-h/2+.5)+u[c.index],{x:T[0],y:T[1],scaleX:t.symbolScale[0],scaleY:t.symbolScale[1],rotation:t.rotation}}}function MP(r,n,t,i){var a=r.__pictorialBundle,o=r.__pictorialMainPath;o?Hd(o,null,{x:t.pathPosition[0],y:t.pathPosition[1],scaleX:t.symbolScale[0],scaleY:t.symbolScale[1],rotation:t.rotation},t,i):(o=r.__pictorialMainPath=AP(t),a.add(o),Hd(o,{x:t.pathPosition[0],y:t.pathPosition[1],scaleX:0,scaleY:0,rotation:t.rotation},{scaleX:t.symbolScale[0],scaleY:t.symbolScale[1]},t,i))}function OP(r,n,t){var i=Ge({},n.barRectShape),a=r.__pictorialBarRect;a?Hd(a,null,{shape:i},n,t):((a=r.__pictorialBarRect=new Qn({z2:2,shape:i,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}})).disableMorphing=!0,r.add(a))}function PP(r,n,t,i){if(t.symbolClip){var a=r.__pictorialClipPath,o=Ge({},t.clipShape),l=n.valueDim,u=t.animationModel,c=t.dataIndex;if(a)Kn(a,{shape:o},u,c);else{o[l.wh]=0,a=new Qn({shape:o}),r.__pictorialBundle.setClipPath(a),r.__pictorialClipPath=a;var h={};h[l.wh]=t.clipShape[l.wh],fe[i?"updateProps":"initProps"](a,{shape:h},u,c)}}}function IP(r,n){var t=r.getItemModel(n);return t.getAnimationDelayParams=b8,t.isAnimationEnabled=S8,t}function b8(r){return{index:r.__pictorialAnimationIndex,count:r.__pictorialRepeatTimes}}function S8(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function kP(r,n,t,i){var a=new hn,o=new hn;return a.add(o),a.__pictorialBundle=o,o.x=t.bundlePosition[0],o.y=t.bundlePosition[1],t.symbolRepeat?EP(a,n,t):MP(a,0,t),OP(a,t,i),PP(a,n,t,i),a.__pictorialShapeStr=RP(r,t),a.__pictorialSymbolMeta=t,a}function LP(r,n,t,i){var a=i.__pictorialBarRect;a&&a.removeTextContent();var o=[];kS(i,function(l){o.push(l)}),i.__pictorialMainPath&&o.push(i.__pictorialMainPath),i.__pictorialClipPath&&(t=null),De(o,function(l){tl(l,{scaleX:0,scaleY:0},t,n,function(){i.parent&&i.parent.remove(i)})}),r.setItemGraphicEl(n,null)}function RP(r,n){return[r.getItemVisual(n.dataIndex,"symbol")||"none",!!n.symbolRepeat,!!n.symbolClip].join(":")}function kS(r,n,t){De(r.__pictorialBundle.children(),function(i){i!==r.__pictorialBarRect&&n.call(t,i)})}function Hd(r,n,t,i,a,o){n&&r.attr(n),i.symbolClip&&!a?t&&r.attr(t):t&&fe[a?"updateProps":"initProps"](r,t,i.animationModel,i.dataIndex,o)}function NP(r,n,t){var i=t.dataIndex,a=t.itemModel,o=a.getModel("emphasis"),l=o.getModel("itemStyle").getItemStyle(),u=a.getModel(["blur","itemStyle"]).getItemStyle(),c=a.getModel(["select","itemStyle"]).getItemStyle(),h=a.getShallow("cursor"),f=o.get("focus"),p=o.get("blurScope"),v=o.get("scale");kS(r,function(C){if(C instanceof ki){var T=C.style;C.useStyle(Ge({image:T.image,x:T.x,y:T.y,width:T.width,height:T.height},t.style))}else C.useStyle(t.style);var z=C.ensureState("emphasis");z.style=l,v&&(z.scaleX=1.1*C.scaleX,z.scaleY=1.1*C.scaleY),C.ensureState("blur").style=u,C.ensureState("select").style=c,h&&(C.cursor=h),C.z2=t.z2});var m=n.valueDim.posDesc[+(t.boundingLength>0)];Xi(r.__pictorialBarRect,Li(a),{labelFetcher:n.seriesModel,labelDataIndex:i,defaultText:Id(n.seriesModel.getData(),i),inheritColor:t.style.fill,defaultOpacity:t.style.opacity,defaultOutsidePosition:m}),di(r,f,p,o.get("disabled"))}function FP(r){var n=Math.round(r);return Math.abs(r-n)<1e-4?n:Math.ceil(r)}const w8=_8;var D8=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.hasSymbolVisual=!0,t.defaultSymbol="roundRect",t}return R(n,r),n.prototype.getInitialData=function(t){return t.stack=null,r.prototype.getInitialData.apply(this,arguments)},n.type="series.pictorialBar",n.dependencies=["grid"],n.defaultOption=nl(I0.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),n}(I0);const A8=D8;var M8=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t._layers=[],t}return R(n,r),n.prototype.render=function(t,i,a){var o=t.getData(),l=this,u=this.group,c=t.getLayerSeries(),h=o.getLayout("layoutInfo"),f=h.rect,p=h.boundaryGap;function v(T){return T.name}u.x=0,u.y=f.y+p[0];var m=new Xl(this._layersSeries||[],c,v,v),y=[];function C(T,z,E){var N=l._layers;if("remove"!==T){for(var ce,X=[],ve=[],_e=c[z].indices,ze=0;ze<_e.length;ze++){var Ee=o.getItemLayout(_e[ze]),Le=Ee.x,ke=Ee.y0,Ue=Ee.y;X.push(Le,ke),ve.push(Le,ke+Ue),ce=o.getItemVisual(_e[ze],"style")}var He,Ke=o.getItemLayout(_e[0]),lt=t.getModel("label").get("margin"),St=t.getModel("emphasis");if("add"===T){var mt=y[z]=new hn;He=new c2({shape:{points:X,stackedOnPoints:ve,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),mt.add(He),u.add(mt),t.isAnimationEnabled()&&He.setClipPath(function O8(r,n,t){var i=new Qn({shape:{x:r.x-10,y:r.y-10,width:0,height:r.height+20}});return Kr(i,{shape:{x:r.x-50,width:r.width+100,height:r.height+20}},n,t),i}(He.getBoundingRect(),t,function(){He.removeClipPath()}))}else He=(mt=N[E]).childAt(0),u.add(mt),y[z]=mt,Kn(He,{shape:{points:X,stackedOnPoints:ve}},t),bo(He);Xi(He,Li(t),{labelDataIndex:_e[ze-1],defaultText:o.getName(_e[ze-1]),inheritColor:ce.fill},{normal:{verticalAlign:"middle"}}),He.setTextConfig({position:null,local:!0});var wt=He.getTextContent();wt&&(wt.x=Ke.x-lt,wt.y=Ke.y0+Ke.y/2),He.useStyle(ce),o.setItemGraphicEl(z,He),Zi(He,t),di(He,St.get("focus"),St.get("blurScope"),St.get("disabled"))}else u.remove(N[z])}m.add(qe(C,this,"add")).update(qe(C,this,"update")).remove(qe(C,this,"remove")).execute(),this._layersSeries=c,this._layers=y},n.type="themeRiver",n}(Vr);const P8=M8;var I8=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.init=function(t){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new Cg(qe(this.getData,this),qe(this.getRawData,this))},n.prototype.fixData=function(t){var i=t.length,a={},o=kf(t,function(v){return a.hasOwnProperty(v[0]+"")||(a[v[0]+""]=-1),v[2]}),l=[];o.buckets.each(function(v,m){l.push({name:m,dataList:v})});for(var u=l.length,c=0;c<u;++c){for(var h=l[c].name,f=0;f<l[c].dataList.length;++f)a[p=l[c].dataList[f][0]+""]=c;for(var p in a)a.hasOwnProperty(p)&&a[p]!==c&&(a[p]=c,t[i]=[p,0,h],i++)}return t},n.prototype.getInitialData=function(t,i){for(var o=this.getReferringComponents("singleAxis",_i).models[0].get("type"),l=_n(t.data,function(y){return void 0!==y[2]}),u=this.fixData(l||[]),c=[],h=this.nameMap=Kt(),f=0,p=0;p<u.length;++p)c.push(u[p][2]),h.get(u[p][2])||(h.set(u[p][2],f),f++);var v=Ed(u,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:f0(o)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,m=new _a(v,this);return m.initData(u),m},n.prototype.getLayerSeries=function(){for(var t=this.getData(),i=t.count(),a=[],o=0;o<i;++o)a[o]=o;var l=t.mapDimension("single"),u=kf(a,function(h){return t.get("name",h)}),c=[];return u.buckets.each(function(h,f){h.sort(function(p,v){return t.get(l,p)-t.get(l,v)}),c.push({name:f,indices:h})}),c},n.prototype.getAxisTooltipData=function(t,i,a){we(t)||(t=t?[t]:[]);for(var h,o=this.getData(),l=this.getLayerSeries(),u=[],c=l.length,f=0;f<c;++f){for(var p=Number.MAX_VALUE,v=-1,m=l[f].indices.length,y=0;y<m;++y){var C=o.get(t[0],l[f].indices[y]),T=Math.abs(C-i);T<=p&&(h=C,p=T,v=l[f].indices[y])}u.push(v)}return{dataIndices:u,nestestValue:h}},n.prototype.formatTooltip=function(t,i,a){var o=this.getData();return Wi("nameValue",{name:o.getName(t),value:o.get(o.mapDimension("value"),t)})},n.type="series.themeRiver",n.dependencies=["singleAxis"],n.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},n}(Xr);const k8=I8;function L8(r,n){r.eachSeriesByType("themeRiver",function(t){var i=t.getData(),a=t.coordinateSystem,o={},l=a.getRect();o.rect=l;var u=t.get("boundaryGap"),c=a.getAxis();o.boundaryGap=u,"horizontal"===c.orient?(u[0]=Ht(u[0],l.height),u[1]=Ht(u[1],l.height),BP(i,t,l.height-u[0]-u[1])):(u[0]=Ht(u[0],l.width),u[1]=Ht(u[1],l.width),BP(i,t,l.width-u[0]-u[1])),i.setLayout("layoutInfo",o)})}function BP(r,n,t){if(r.count())for(var m,i=n.coordinateSystem,a=n.getLayerSeries(),o=r.mapDimension("single"),l=r.mapDimension("value"),u=_t(a,function(T){return _t(T.indices,function(z){var E=i.dataToPoint(r.get(o,z));return E[1]=r.get(l,z),E})}),c=function R8(r){for(var n=r.length,t=r[0].length,i=[],a=[],o=0,l=0;l<t;++l){for(var u=0,c=0;c<n;++c)u+=r[c][l][1];u>o&&(o=u),i.push(u)}for(var h=0;h<t;++h)a[h]=(o-i[h])/2;o=0;for(var f=0;f<t;++f){var p=i[f]+a[f];p>o&&(o=p)}return{y0:a,max:o}}(u),h=c.y0,f=t/c.max,p=a.length,v=a[0].indices.length,y=0;y<v;++y){r.setItemLayout(a[0].indices[y],{layerIndex:0,x:u[0][y][0],y0:m=h[y]*f,y:u[0][y][1]*f});for(var C=1;C<p;++C)r.setItemLayout(a[C].indices[y],{layerIndex:C,x:u[C][y][0],y0:m+=u[C-1][y][1]*f,y:u[C][y][1]*f})}}var Z8=function(r){function n(t,i,a,o){var l=r.call(this)||this;l.z2=2,l.textConfig={inside:!0},dn(l).seriesIndex=i.seriesIndex;var u=new Gn({z2:4,silent:t.getModel().get(["label","silent"])});return l.setTextContent(u),l.updateData(!0,t,i,a,o),l}return R(n,r),n.prototype.updateData=function(t,i,a,o,l){this.node=i,i.piece=this,a=a||this._seriesModel,o=o||this._ecModel;var u=this;dn(u).dataIndex=i.dataIndex;var c=i.getModel(),h=c.getModel("emphasis"),f=i.getLayout(),p=Ge({},f);p.label=null;var v=i.getVisual("style");v.lineJoin="bevel";var m=i.getVisual("decal");m&&(v.decal=Xp(m,l));var y=kd(c.getModel("itemStyle"),p,!0);Ge(p,y),De(oa,function(E){var N=u.ensureState(E),X=c.getModel([E,"itemStyle"]);N.style=X.getItemStyle();var ve=kd(X,p);ve&&(N.shape=ve)}),t?(u.setShape(p),u.shape.r=f.r0,Kn(u,{shape:{r:f.r}},a,i.dataIndex)):(Kn(u,{shape:p},a),bo(u)),u.useStyle(v),this._updateLabel(a);var C=c.getShallow("cursor");C&&u.attr("cursor",C),this._seriesModel=a||this._seriesModel,this._ecModel=o||this._ecModel;var T=h.get("focus");di(this,"ancestor"===T?i.getAncestorsIndices():"descendant"===T?i.getDescendantIndices():T,h.get("blurScope"),h.get("disabled"))},n.prototype._updateLabel=function(t){var i=this,a=this.node.getModel(),o=a.getModel("label"),l=this.node.getLayout(),u=l.endAngle-l.startAngle,c=(l.startAngle+l.endAngle)/2,h=Math.cos(c),f=Math.sin(c),p=this,v=p.getTextContent(),m=this.node.dataIndex,y=o.get("minAngle")/180*Math.PI,C=o.get("show")&&!(null!=y&&Math.abs(u)<y);function T(z,E){var N=z.get(E);return null==N?o.get(E):N}v.ignore=!C,De(Ic,function(z){var E=a.getModel("normal"===z?"label":[z,"label"]),N="normal"===z,X=N?v:v.ensureState(z),ve=t.getFormattedLabel(m,z);N&&(ve=ve||i.node.name),X.style=$r(E,{},null,"normal"!==z,!0),ve&&(X.style.text=ve);var ce=E.get("show");null!=ce&&!N&&(X.ignore=!ce);var _e=T(E,"position"),ze=N?p:p.states[z],Ee=ze.style.fill;ze.textConfig={outsideFill:"inherit"===E.get("color")?Ee:null,inside:"outside"!==_e};var Le,ke=T(E,"distance")||0,Ue=T(E,"align");"outside"===_e?(Le=l.r+ke,Ue=c>Math.PI/2?"right":"left"):Ue&&"center"!==Ue?"left"===Ue?(Le=l.r0+ke,c>Math.PI/2&&(Ue="right")):"right"===Ue&&(Le=l.r-ke,c>Math.PI/2&&(Ue="left")):(Le=u===2*Math.PI&&0===l.r0?0:(l.r+l.r0)/2,Ue="center"),X.style.align=Ue,X.style.verticalAlign=T(E,"verticalAlign")||"middle",X.x=Le*h+l.cx,X.y=Le*f+l.cy;var He=T(E,"rotate"),Ke=0;"radial"===He?(Ke=-c)<-Math.PI/2&&(Ke+=Math.PI):"tangential"===He?(Ke=Math.PI/2-c)>Math.PI/2?Ke-=Math.PI:Ke<-Math.PI/2&&(Ke+=Math.PI):Ve(He)&&(Ke=He*Math.PI/180),X.rotation=Ke}),v.dirtyStyle()},n}(Oa);const ZP=Z8;var RS="sunburstRootToNode",UP="sunburstHighlight",H8=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.render=function(t,i,a,o){var l=this;this.seriesModel=t,this.api=a,this.ecModel=i;var u=t.getData(),c=u.tree.root,h=t.getViewRoot(),f=this.group,p=t.get("renderLabelForZeroData"),v=[];h.eachNode(function(E){v.push(E)}),function y(E,N){function X(ce){return ce.getId()}function ve(ce,_e){!function C(E,N){if(!p&&E&&!E.getValue()&&(E=null),E!==c&&N!==c)if(N&&N.piece)E?(N.piece.updateData(!1,E,t,i,a),u.setItemGraphicEl(E.dataIndex,N.piece)):function T(E){!E||E.piece&&(f.remove(E.piece),E.piece=null)}(N);else if(E){var X=new ZP(E,t,i,a);f.add(X),u.setItemGraphicEl(E.dataIndex,X)}}(null==ce?null:E[ce],null==_e?null:N[_e])}0===E.length&&0===N.length||new Xl(N,E,X,X).add(ve).update(ve).remove(yt(ve,null)).execute()}(v,this._oldChildren||[]),function z(E,N){N.depth>0?(l.virtualPiece?l.virtualPiece.updateData(!1,E,t,i,a):(l.virtualPiece=new ZP(E,t,i,a),f.add(l.virtualPiece)),N.piece.off("click"),l.virtualPiece.on("click",function(X){l._rootToNode(N.parentNode)})):l.virtualPiece&&(f.remove(l.virtualPiece),l.virtualPiece=null)}(c,h),this._initEvents(),this._oldChildren=v},n.prototype._initEvents=function(){var t=this;this.group.off("click"),this.group.on("click",function(i){var a=!1;t.seriesModel.getViewRoot().eachNode(function(l){if(!a&&l.piece&&l.piece===i.target){var u=l.getModel().get("nodeClick");if("rootToNode"===u)t._rootToNode(l);else if("link"===u){var c=l.getModel(),h=c.get("link");h&&cd(h,c.get("target",!0)||"_blank")}a=!0}})})},n.prototype._rootToNode=function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:RS,from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},n.prototype.containPoint=function(t,i){var o=i.getData().getItemLayout(0);if(o){var l=t[0]-o.cx,u=t[1]-o.cy,c=Math.sqrt(l*l+u*u);return c<=o.r&&c>=o.r0}},n.type="sunburst",n}(Vr);const W8=H8;var G8=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.ignoreStyleOnData=!0,t}return R(n,r),n.prototype.getInitialData=function(t,i){var a={name:t.name,children:t.data};VP(a);var o=this._levelModels=_t(t.levels||[],function(c){return new Or(c,this,i)},this),l=Zb.createTree(a,this,function u(c){c.wrapMethod("getItemModel",function(h,f){var p=l.getNodeByDataIndex(f),v=o[p.depth];return v&&(h.parentModel=v),h})});return l.data},n.prototype.optionUpdated=function(){this.resetViewRoot()},n.prototype.getDataParams=function(t){var i=r.prototype.getDataParams.apply(this,arguments),a=this.getData().tree.getNodeByDataIndex(t);return i.treePathInfo=J0(a,this),i},n.prototype.getLevelModel=function(t){return this._levelModels&&this._levelModels[t.depth]},n.prototype.getViewRoot=function(){return this._viewRoot},n.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var i=this.getRawData().tree.root;(!t||t!==i&&!i.contains(t))&&(this._viewRoot=i)},n.prototype.enableAriaDecal=function(){KM(this)},n.type="series.sunburst",n.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},n}(Xr);function VP(r){var n=0;De(r.children,function(i){VP(i);var a=i.value;we(a)&&(a=a[0]),n+=a});var t=r.value;we(t)&&(t=t[0]),(null==t||isNaN(t))&&(t=n),t<0&&(t=0),we(r.value)?r.value[0]=t:r.value=t}const J8=G8;var HP=Math.PI/180;function Y8(r,n,t){n.eachSeriesByType(r,function(i){var a=i.get("center"),o=i.get("radius");we(o)||(o=[0,o]),we(a)||(a=[a,a]);var l=t.getWidth(),u=t.getHeight(),c=Math.min(l,u),h=Ht(a[0],l),f=Ht(a[1],u),p=Ht(o[0],c/2),v=Ht(o[1],c/2),m=-i.get("startAngle")*HP,y=i.get("minAngle")*HP,C=i.getData().tree.root,T=i.getViewRoot(),z=T.depth,E=i.get("sort");null!=E&&WP(T,E);var N=0;De(T.children,function(lt){!isNaN(lt.getValue())&&N++});var X=T.getValue(),ve=Math.PI/(X||N)*2,ce=T.depth>0,ze=(v-p)/(T.height-(ce?-1:1)||1),Ee=i.get("clockwise"),Le=i.get("stillShowZeroSum"),ke=Ee?1:-1,Ue=function(lt,St){if(lt){var mt=St;if(lt!==C){var wt=lt.getValue(),kt=0===X&&Le?ve:wt*ve;kt<y&&(kt=y),mt=St+ke*kt;var Yt=lt.depth-z-(ce?-1:1),Xt=p+ze*Yt,pn=p+ze*(Yt+1),Bn=i.getLevelModel(lt);if(Bn){var Ar=Bn.get("r0",!0),br=Bn.get("r",!0),Un=Bn.get("radius",!0);null!=Un&&(Ar=Un[0],br=Un[1]),null!=Ar&&(Xt=Ht(Ar,c/2)),null!=br&&(pn=Ht(br,c/2))}lt.setLayout({angle:kt,startAngle:St,endAngle:mt,clockwise:Ee,cx:h,cy:f,r0:Xt,r:pn})}if(lt.children&&lt.children.length){var vn=0;De(lt.children,function(Hn){vn+=Ue(Hn,St+vn)})}return mt-St}};if(ce){var nt=2*Math.PI;C.setLayout({angle:nt,startAngle:m,endAngle:m+nt,clockwise:Ee,cx:h,cy:f,r0:p,r:p+ze})}Ue(T,m)})}function WP(r,n){var t=r.children||[];r.children=function Q8(r,n){if(Pe(n)){var t=_t(r,function(a,o){var l=a.getValue();return{params:{depth:a.depth,height:a.height,dataIndex:a.dataIndex,getValue:function(){return l}},index:o}});return t.sort(function(a,o){return n(a.params,o.params)}),_t(t,function(a){return r[a.index]})}var i="asc"===n;return r.sort(function(a,o){var l=(a.getValue()-o.getValue())*(i?1:-1);return 0===l?(a.dataIndex-o.dataIndex)*(i?-1:1):l})}(t,n),t.length&&De(r.children,function(i){WP(i,n)})}function q8(r){var n={};r.eachSeriesByType("sunburst",function(i){var a=i.getData(),o=a.tree;o.eachNode(function(l){var c=l.getModel().getModel("itemStyle").getItemStyle();c.fill||(c.fill=function t(i,a,o){for(var l=i;l&&l.depth>1;)l=l.parentNode;var u=a.getColorFromPalette(l.name||l.dataIndex+"",n);return i.depth>1&&Qe(u)&&(u=_o(u,(i.depth-1)/(o-1)*.5)),u}(l,i,o.root.height)),Ge(a.ensureUniqueItemVisual(l.dataIndex,"style"),c)})})}var GP={color:"fill",borderColor:"stroke"},$8={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},au=Xn(),j8=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},n.prototype.getInitialData=function(t,i){return ol(null,this)},n.prototype.getDataParams=function(t,i,a){var o=r.prototype.getDataParams.call(this,t,i);return a&&(o.info=au(a).info),o},n.type="series.custom",n.dependencies=["grid","polar","geo","singleAxis","calendar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},n}(Xr);const X8=j8;function e7(r,n){return n=n||[0,0],_t(["x","y"],function(t,i){var a=this.getAxis(t),o=n[i],l=r[i]/2;return"category"===a.type?a.getBandWidth():Math.abs(a.dataToCoord(o-l)-a.dataToCoord(o+l))},this)}function n7(r,n){return n=n||[0,0],_t([0,1],function(t){var i=n[t],a=r[t]/2,o=[],l=[];return o[t]=i-a,l[t]=i+a,o[1-t]=l[1-t]=n[1-t],Math.abs(this.dataToPoint(o)[t]-this.dataToPoint(l)[t])},this)}function a7(r,n){var t=this.getAxis(),i=n instanceof Array?n[0]:n,a=(r instanceof Array?r[0]:r)/2;return"category"===t.type?t.getBandWidth():Math.abs(t.dataToCoord(i-a)-t.dataToCoord(i+a))}function s7(r,n){return n=n||[0,0],_t(["Radius","Angle"],function(t,i){var o=this["get"+t+"Axis"](),l=n[i],u=r[i]/2,c="category"===o.type?o.getBandWidth():Math.abs(o.dataToCoord(l-u)-o.dataToCoord(l+u));return"Angle"===t&&(c=c*Math.PI/180),c},this)}function JP(r,n,t,i){return r&&(r.legacy||!1!==r.legacy&&!t&&!i&&"tspan"!==n&&("text"===n||qt(r,"text")))}function YP(r,n,t){var a,o,l,i=r;if("text"===n)l=i;else{l={},qt(i,"text")&&(l.text=i.text),qt(i,"rich")&&(l.rich=i.rich),qt(i,"textFill")&&(l.fill=i.textFill),qt(i,"textStroke")&&(l.stroke=i.textStroke),qt(i,"fontFamily")&&(l.fontFamily=i.fontFamily),qt(i,"fontSize")&&(l.fontSize=i.fontSize),qt(i,"fontStyle")&&(l.fontStyle=i.fontStyle),qt(i,"fontWeight")&&(l.fontWeight=i.fontWeight),o={type:"text",style:l,silent:!0},a={};var u=qt(i,"textPosition");t?a.position=u?i.textPosition:"inside":u&&(a.position=i.textPosition),qt(i,"textPosition")&&(a.position=i.textPosition),qt(i,"textOffset")&&(a.offset=i.textOffset),qt(i,"textRotation")&&(a.rotation=i.textRotation),qt(i,"textDistance")&&(a.distance=i.textDistance)}return QP(l,r),De(l.rich,function(c){QP(c,c)}),{textConfig:a,textContent:o}}function QP(r,n){!n||(n.font=n.textFont||n.font,qt(n,"textStrokeWidth")&&(r.lineWidth=n.textStrokeWidth),qt(n,"textAlign")&&(r.align=n.textAlign),qt(n,"textVerticalAlign")&&(r.verticalAlign=n.textVerticalAlign),qt(n,"textLineHeight")&&(r.lineHeight=n.textLineHeight),qt(n,"textWidth")&&(r.width=n.textWidth),qt(n,"textHeight")&&(r.height=n.textHeight),qt(n,"textBackgroundColor")&&(r.backgroundColor=n.textBackgroundColor),qt(n,"textPadding")&&(r.padding=n.textPadding),qt(n,"textBorderColor")&&(r.borderColor=n.textBorderColor),qt(n,"textBorderWidth")&&(r.borderWidth=n.textBorderWidth),qt(n,"textBorderRadius")&&(r.borderRadius=n.textBorderRadius),qt(n,"textBoxShadowColor")&&(r.shadowColor=n.textBoxShadowColor),qt(n,"textBoxShadowBlur")&&(r.shadowBlur=n.textBoxShadowBlur),qt(n,"textBoxShadowOffsetX")&&(r.shadowOffsetX=n.textBoxShadowOffsetX),qt(n,"textBoxShadowOffsetY")&&(r.shadowOffsetY=n.textBoxShadowOffsetY))}function qP(r,n,t){var i=r;i.textPosition=i.textPosition||t.position||"inside",null!=t.offset&&(i.textOffset=t.offset),null!=t.rotation&&(i.textRotation=t.rotation),null!=t.distance&&(i.textDistance=t.distance);var a=i.textPosition.indexOf("inside")>=0,o=r.fill||"#000";KP(i,n);var l=null==i.textFill;return a?l&&(i.textFill=t.insideFill||"#fff",!i.textStroke&&t.insideStroke&&(i.textStroke=t.insideStroke),!i.textStroke&&(i.textStroke=o),null==i.textStrokeWidth&&(i.textStrokeWidth=2)):(l&&(i.textFill=r.fill||t.outsideFill||"#000"),!i.textStroke&&t.outsideStroke&&(i.textStroke=t.outsideStroke)),i.text=n.text,i.rich=n.rich,De(n.rich,function(u){KP(u,u)}),i}function KP(r,n){!n||(qt(n,"fill")&&(r.textFill=n.fill),qt(n,"stroke")&&(r.textStroke=n.fill),qt(n,"lineWidth")&&(r.textStrokeWidth=n.lineWidth),qt(n,"font")&&(r.font=n.font),qt(n,"fontStyle")&&(r.fontStyle=n.fontStyle),qt(n,"fontWeight")&&(r.fontWeight=n.fontWeight),qt(n,"fontSize")&&(r.fontSize=n.fontSize),qt(n,"fontFamily")&&(r.fontFamily=n.fontFamily),qt(n,"align")&&(r.textAlign=n.align),qt(n,"verticalAlign")&&(r.textVerticalAlign=n.verticalAlign),qt(n,"lineHeight")&&(r.textLineHeight=n.lineHeight),qt(n,"width")&&(r.textWidth=n.width),qt(n,"height")&&(r.textHeight=n.height),qt(n,"backgroundColor")&&(r.textBackgroundColor=n.backgroundColor),qt(n,"padding")&&(r.textPadding=n.padding),qt(n,"borderColor")&&(r.textBorderColor=n.borderColor),qt(n,"borderWidth")&&(r.textBorderWidth=n.borderWidth),qt(n,"borderRadius")&&(r.textBorderRadius=n.borderRadius),qt(n,"shadowColor")&&(r.textBoxShadowColor=n.shadowColor),qt(n,"shadowBlur")&&(r.textBoxShadowBlur=n.shadowBlur),qt(n,"shadowOffsetX")&&(r.textBoxShadowOffsetX=n.shadowOffsetX),qt(n,"shadowOffsetY")&&(r.textBoxShadowOffsetY=n.shadowOffsetY),qt(n,"textShadowColor")&&(r.textShadowColor=n.textShadowColor),qt(n,"textShadowBlur")&&(r.textShadowBlur=n.textShadowBlur),qt(n,"textShadowOffsetX")&&(r.textShadowOffsetX=n.textShadowOffsetX),qt(n,"textShadowOffsetY")&&(r.textShadowOffsetY=n.textShadowOffsetY))}var $P={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},jP=gn($P),ay=(cr(Oo,function(r,n){return r[n]=1,r},{}),Oo.join(", "),["","style","shape","extra"]),Wd=Xn();function NS(r,n,t,i,a){var o=r+"Animation",l=wu(r,i,a)||{},u=Wd(n).userDuring;return l.duration>0&&(l.during=u?qe(p7,{el:n,userDuring:u}):null,l.setToFinal=!0,l.scope=r),Ge(l,t[o]),l}function oy(r,n,t,i){var a=(i=i||{}).dataIndex,o=i.isInit,l=i.clearStyle,u=t.isAnimationEnabled(),c=Wd(r),h=n.style;c.userDuring=n.during;var f={},p={};if(function v7(r,n,t){for(var i=0;i<jP.length;i++){var a=jP[i],o=$P[a],l=n[a];l&&(t[o[0]]=l[0],t[o[1]]=l[1])}for(i=0;i<Oo.length;i++){var u=Oo[i];null!=n[u]&&(t[u]=n[u])}}(0,n,p),tI("shape",n,p),tI("extra",n,p),!o&&u&&(function g7(r,n,t){for(var i=n.transition,a=Ch(i)?Oo:Dr(i||[]),o=0;o<a.length;o++){var l=a[o];"style"!==l&&"shape"!==l&&"extra"!==l&&(t[l]=r[l])}}(r,n,f),eI("shape",r,n,f),eI("extra",r,n,f),function m7(r,n,t,i){if(t){var o,a=r.style;if(a){var l=t.transition,u=n.transition;if(l&&!Ch(l)){var c=Dr(l);!o&&(o=i.style={});for(var h=0;h<c.length;h++)o[f=c[h]]=a[f]}else if(r.getAnimationStyleProps&&(Ch(u)||Ch(l)||Ye(u,"style")>=0)){var v=r.getAnimationStyleProps(),m=v?v.style:null;if(m){!o&&(o=i.style={});var y=gn(t);for(h=0;h<y.length;h++){var f;m[f=y[h]]&&(o[f]=a[f])}}}}}}(r,n,h,f)),p.style=h,function c7(r,n,t){var i=n.style;if(!r.isGroup&&i){if(t){r.useStyle({});for(var a=r.animators,o=0;o<a.length;o++){var l=a[o];"style"===l.targetName&&l.changeTarget(r.style)}}r.setStyle(i)}n&&(n.style=null,n&&r.attr(n),n.style=i)}(r,p,l),function d7(r,n){qt(n,"silent")&&(r.silent=n.silent),qt(n,"ignore")&&(r.ignore=n.ignore),r instanceof $a&&qt(n,"invisible")&&(r.invisible=n.invisible),r instanceof Fn&&qt(n,"autoBatch")&&(r.autoBatch=n.autoBatch)}(r,n),u)if(o){var v={};De(ay,function(y){var C=y?n[y]:n;C&&C.enterFrom&&(y&&(v[y]=v[y]||{}),Ge(y?v[y]:v,C.enterFrom))});var m=NS("enter",r,n,t,a);m.duration>0&&r.animateFrom(v,m)}else!function h7(r,n,t,i,a){if(a){var o=NS("update",r,n,i,t);o.duration>0&&r.animateFrom(a,o)}}(r,n,a||0,t,f);XP(r,n),h?r.dirty():r.markRedraw()}function XP(r,n){for(var t=Wd(r).leaveToProps,i=0;i<ay.length;i++){var a=ay[i],o=a?n[a]:n;o&&o.leaveTo&&(t||(t=Wd(r).leaveToProps={}),a&&(t[a]=t[a]||{}),Ge(a?t[a]:t,o.leaveTo))}}function sy(r,n,t,i){if(r){var a=r.parent,o=Wd(r).leaveToProps;if(o){var l=NS("update",r,n,t,0);l.done=function(){a.remove(r),i&&i()},r.animateTo(o,l)}else a.remove(r),i&&i()}}function Ch(r){return"all"===r}var hl={},f7={setTransform:function(r,n){return hl.el[r]=n,this},getTransform:function(r){return hl.el[r]},setShape:function(r,n){var t=hl.el;return(t.shape||(t.shape={}))[r]=n,t.dirtyShape&&t.dirtyShape(),this},getShape:function(r){var n=hl.el.shape;if(n)return n[r]},setStyle:function(r,n){var t=hl.el,i=t.style;return i&&(i[r]=n,t.dirtyStyle&&t.dirtyStyle()),this},getStyle:function(r){var n=hl.el.style;if(n)return n[r]},setExtra:function(r,n){return(hl.el.extra||(hl.el.extra={}))[r]=n,this},getExtra:function(r){var n=hl.el.extra;if(n)return n[r]}};function p7(){var r=this,n=r.el;if(n){var t=Wd(n).userDuring,i=r.userDuring;if(t!==i)return void(r.el=r.userDuring=null);hl.el=n,i(f7)}}function eI(r,n,t,i){var a=t[r];if(a){var l,o=n[r];if(o){var u=t.transition,c=a.transition;if(c)if(!l&&(l=i[r]={}),Ch(c))Ge(l,o);else for(var h=Dr(c),f=0;f<h.length;f++)l[p=h[f]]=v=o[p];else if(Ch(u)||Ye(u,r)>=0){!l&&(l=i[r]={});var m=gn(o);for(f=0;f<m.length;f++){var p,v;_7(a[p=m[f]],v=o[p])&&(l[p]=v)}}}}}function tI(r,n,t){var i=n[r];if(i)for(var a=t[r]={},o=gn(i),l=0;l<o.length;l++){var u=o[l];a[u]=Sl(i[u])}}function _7(r,n){return zn(r)?r!==n:null!=r&&isFinite(r)}var nI=Xn(),y7=["percent","easing","shape","style","extra"];function rI(r){r.stopAnimation("keyframe"),r.attr(nI(r))}function ly(r,n,t){if(t.isAnimationEnabled()&&n){if(we(n))return void De(n,function(u){ly(r,u,t)});var i=n.keyframes,a=n.duration;if(t&&null==a){var o=wu("enter",t,0);a=o&&o.duration}if(i&&a){var l=nI(r);De(ay,function(u){var c;u&&!r[u]||(i.sort(function(f,p){return f.percent-p.percent}),De(i,function(f){var p=r.animators,v=u?f[u]:f;if(v){var m=gn(v);if(u||(m=_n(m,function(T){return Ye(y7,T)<0})),m.length){c||((c=r.animate(u,n.loop,!0)).scope="keyframe");for(var y=0;y<p.length;y++)p[y]!==c&&p[y].targetName===c.targetName&&p[y].stopTracks(m);u&&(l[u]=l[u]||{});var C=u?l[u]:l;De(m,function(T){C[T]=((u?r[u]:r)||{})[T]}),c.whenWithKeys(a*f.percent,v,m,f.easing)}}}),c&&c.delay(n.delay||0).duration(a).start(n.easing))})}}}var ou="emphasis",rc="normal",FS="blur",BS="select",ic=[rc,ou,FS,BS],ZS={normal:["itemStyle"],emphasis:[ou,"itemStyle"],blur:[FS,"itemStyle"],select:[BS,"itemStyle"]},US={normal:["label"],emphasis:[ou,"label"],blur:[FS,"label"],select:[BS,"label"]},C7=["x","y"],$o={normal:{},emphasis:{},blur:{},select:{}},T7={cartesian2d:function t7(r){var n=r.master.getRect();return{coordSys:{type:"cartesian2d",x:n.x,y:n.y,width:n.width,height:n.height},api:{coord:function(t){return r.dataToPoint(t)},size:qe(e7,r)}}},geo:function r7(r){var n=r.getBoundingRect();return{coordSys:{type:"geo",x:n.x,y:n.y,width:n.width,height:n.height,zoom:r.getZoom()},api:{coord:function(t){return r.dataToPoint(t)},size:qe(n7,r)}}},singleAxis:function o7(r){var n=r.getRect();return{coordSys:{type:"singleAxis",x:n.x,y:n.y,width:n.width,height:n.height},api:{coord:function(t){return r.dataToPoint(t)},size:qe(a7,r)}}},polar:function l7(r){var n=r.getRadiusAxis(),t=r.getAngleAxis(),i=n.getExtent();return i[0]>i[1]&&i.reverse(),{coordSys:{type:"polar",cx:r.cx,cy:r.cy,r:i[1],r0:i[0]},api:{coord:function(a){var o=n.dataToRadius(a[0]),l=t.dataToAngle(a[1]),u=r.coordToPoint([o,l]);return u.push(o,l*Math.PI/180),u},size:qe(s7,r)}}},calendar:function u7(r){var n=r.getRect(),t=r.getRangeInfo();return{coordSys:{type:"calendar",x:n.x,y:n.y,width:n.width,height:n.height,cellWidth:r.getCellWidth(),cellHeight:r.getCellHeight(),rangeInfo:{start:t.start,end:t.end,weeks:t.weeks,dayCount:t.allDay}},api:{coord:function(i,a){return r.dataToPoint(i,a)}}}}};function VS(r){return r instanceof Fn}function HS(r){return r instanceof $a}var S7=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.render=function(t,i,a,o){this._progressiveEls=null;var l=this._data,u=t.getData(),c=this.group,h=aI(t,u,i,a);l||c.removeAll(),u.diff(l).add(function(p){JS(a,null,p,h(p,o),t,c,u)}).remove(function(p){var v=l.getItemGraphicEl(p);sy(v,au(v).option,t)}).update(function(p,v){var m=l.getItemGraphicEl(v);JS(a,m,p,h(p,o),t,c,u)}).execute();var f=t.get("clip",!0)?P0(t.coordinateSystem,!1,t):null;f?c.setClipPath(f):c.removeClipPath(),this._data=u},n.prototype.incrementalPrepareRender=function(t,i,a){this.group.removeAll(),this._data=null},n.prototype.incrementalRender=function(t,i,a,o,l){var u=i.getData(),c=aI(i,u,a,o),h=this._progressiveEls=[];function f(m){m.isGroup||(m.incremental=!0,m.ensureState("emphasis").hoverLayer=!0)}for(var p=t.start;p<t.end;p++){var v=JS(null,null,p,c(p,l),i,this.group,u);v&&(v.traverse(f),h.push(v))}},n.prototype.eachRendered=function(t){Ju(this._progressiveEls||this.group,t)},n.prototype.filterForExposedEvent=function(t,i,a,o){var l=i.element;if(null==l||a.name===l)return!0;for(;(a=a.__hostTarget||a.parent)&&a!==this.group;)if(a.name===l)return!0;return!1},n.type="custom",n}(Vr);const z7=S7;function WS(r){var t,n=r.type;if("path"===n){var i=r.shape,a=null!=i.width&&null!=i.height?{x:i.x||0,y:i.y||0,width:i.width,height:i.height}:null,o=cI(i);t=Wp(o,null,a,i.layout||"center"),au(t).customPathData=o}else if("image"===n)t=new ki({}),au(t).customImagePath=r.style.image;else if("text"===n)t=new Gn({});else if("group"===n)t=new hn;else{if("compoundPath"===n)throw new Error('"compoundPath" is not supported yet.');var l=J_(n);l||Tr(""),t=new l}return au(t).customGraphicType=n,t.name=r.name,t.z2EmphasisLift=1,t.z2SelectLift=1,t}function GS(r,n,t,i,a,o,l){rI(n);var u=a&&a.normal.cfg;u&&n.setTextConfig(u),i&&null==i.transition&&(i.transition=C7);var c=i&&i.style;if(c){if("text"===n.type){var h=c;qt(h,"textFill")&&(h.fill=h.textFill),qt(h,"textStroke")&&(h.stroke=h.textStroke)}var f=void 0,p=VS(n)?c.decal:null;r&&p&&(p.dirty=!0,f=Xp(p,r)),c.__decalPattern=f}HS(n)&&c&&(f=c.__decalPattern)&&(c.decal=f),oy(n,i,o,{dataIndex:t,isInit:l,clearStyle:!0}),ly(n,i.keyframeAnimation,o)}function iI(r,n,t,i,a){var o=n.isGroup?null:n,l=a&&a[r].cfg;if(o){var u=o.ensureState(r);if(!1===i){var c=o.getState(r);c&&(c.style=null)}else u.style=i||null;l&&(u.textConfig=l),Wl(o)}}function D7(r,n,t){var i=t===rc,a=i?n:uy(n,t),o=a?a.z2:null;null!=o&&((i?r:r.ensureState(t)).z2=o||0)}function aI(r,n,t,i){var a=r.get("renderItem"),o=r.coordinateSystem,l={};o&&(l=o.prepareCustoms?o.prepareCustoms(o):T7[o.type](o));for(var h,f,u=Dt({getWidth:i.getWidth,getHeight:i.getHeight,getZr:i.getZr,getDevicePixelRatio:i.getDevicePixelRatio,value:function X(Ke,nt){return null==nt&&(nt=h),n.getStore().get(n.getDimensionIndex(Ke||0),nt)},style:function ce(Ke,nt){null==nt&&(nt=h);var lt=n.getItemVisual(nt,"style"),St=lt&&lt.fill,mt=lt&&lt.opacity,wt=E(nt,rc).getItemStyle();null!=St&&(wt.fill=St),null!=mt&&(wt.opacity=mt);var kt={inheritColor:Qe(St)?St:"#000"},Yt=N(nt,rc),Xt=$r(Yt,null,kt,!1,!0);Xt.text=Yt.getShallow("show")?$t(r.getFormattedLabel(nt,rc),Id(n,nt)):null;var pn=ad(Yt,kt,!1);return Ee(Ke,wt),wt=qP(wt,Xt,pn),Ke&&ze(wt,Ke),wt.legacy=!0,wt},ordinalRawValue:function ve(Ke,nt){null==nt&&(nt=h);var lt=n.getDimensionInfo(Ke=Ke||0);if(!lt){var St=n.getDimensionIndex(Ke);return St>=0?n.getStore().get(St,nt):void 0}var mt=n.get(lt.name,nt),wt=lt&&lt.ordinalMeta;return wt?wt.categories[mt]:mt},styleEmphasis:function _e(Ke,nt){null==nt&&(nt=h);var lt=E(nt,ou).getItemStyle(),St=N(nt,ou),mt=$r(St,null,null,!0,!0);mt.text=St.getShallow("show")?ri(r.getFormattedLabel(nt,ou),r.getFormattedLabel(nt,rc),Id(n,nt)):null;var wt=ad(St,null,!0);return Ee(Ke,lt),lt=qP(lt,mt,wt),Ke&&ze(lt,Ke),lt.legacy=!0,lt},visual:function Le(Ke,nt){if(null==nt&&(nt=h),qt(GP,Ke)){var lt=n.getItemVisual(nt,"style");return lt?lt[GP[Ke]]:null}if(qt($8,Ke))return n.getItemVisual(nt,Ke)},barLayout:function ke(Ke){if("cartesian2d"===o.type)return function g3(r){var n=[],t=r.axis,i="axis0";if("category"===t.type){for(var a=t.getBandWidth(),o=0;o<r.count;o++)n.push(Dt({bandWidth:a,axisKey:i,stackId:UT+o},r));var l=YA(n),u=[];for(o=0;o<r.count;o++){var c=l[i][UT+o];c.offsetCenter=c.offset+c.width/2,u.push(c)}return u}}(Dt({axis:o.getBaseAxis()},Ke))},currentSeriesIndices:function Ue(){return t.getCurrentSeriesIndices()},font:function He(Ke){return Fm(Ke,t)}},l.api||{}),c={context:{},seriesId:r.id,seriesName:r.name,seriesIndex:r.seriesIndex,coordSys:l.coordSys,dataInsideLength:n.count(),encode:A7(r.getData())},p={},v={},m={},y={},C=0;C<ic.length;C++){var T=ic[C];m[T]=r.getModel(ZS[T]),y[T]=r.getModel(US[T])}function z(Ke){return Ke===h?f||(f=n.getItemModel(Ke)):n.getItemModel(Ke)}function E(Ke,nt){return n.hasItemOption?Ke===h?p[nt]||(p[nt]=z(Ke).getModel(ZS[nt])):z(Ke).getModel(ZS[nt]):m[nt]}function N(Ke,nt){return n.hasItemOption?Ke===h?v[nt]||(v[nt]=z(Ke).getModel(US[nt])):z(Ke).getModel(US[nt]):y[nt]}return function(Ke,nt){return h=Ke,f=null,p={},v={},a&&a(Dt({dataIndexInside:Ke,dataIndex:n.getRawIndex(Ke),actionType:nt?nt.type:null},c),u)};function ze(Ke,nt){for(var lt in nt)qt(nt,lt)&&(Ke[lt]=nt[lt])}function Ee(Ke,nt){Ke&&(Ke.textFill&&(nt.textFill=Ke.textFill),Ke.textPosition&&(nt.textPosition=Ke.textPosition))}}function A7(r){var n={};return De(r.dimensions,function(t){var i=r.getDimensionInfo(t);if(!i.isExtraCoord){var a=i.coordDim;(n[a]=n[a]||[])[i.coordDimIndex]=r.getDimensionIndex(t)}}),n}function JS(r,n,t,i,a,o,l){if(i){var u=YS(r,n,t,i,a,o);return u&&l.setItemGraphicEl(t,u),u&&di(u,i.focus,i.blurScope,i.emphasisDisabled),u}o.remove(n)}function YS(r,n,t,i,a,o){var l=-1,u=n;n&&oI(n,i,a)&&(l=Ye(o.childrenRef(),n),n=null);var c=!n,h=n;h?h.clearStates():(h=WS(i),u&&function b7(r,n){n.copyTransform(r),HS(n)&&HS(r)&&(n.setStyle(r.style),n.z=r.z,n.z2=r.z2,n.zlevel=r.zlevel,n.invisible=r.invisible,n.ignore=r.ignore,VS(n)&&VS(r)&&n.setShape(r.shape))}(u,h)),!1===i.morph?h.disableMorphing=!0:h.disableMorphing&&(h.disableMorphing=!1),$o.normal.cfg=$o.normal.conOpt=$o.emphasis.cfg=$o.emphasis.conOpt=$o.blur.cfg=$o.blur.conOpt=$o.select.cfg=$o.select.conOpt=null,$o.isLegacy=!1,function M7(r,n,t,i,a,o){if(!r.isGroup){sI(t,null,o),sI(t,ou,o);var l=o.normal.conOpt;if(null!=l||null!=o.emphasis.conOpt||null!=o.select.conOpt||null!=o.blur.conOpt){var f=r.getTextContent();if(!1===l)f&&r.removeTextContent();else{l=o.normal.conOpt=l||{type:"text"},f?f.clearStates():(f=WS(l),r.setTextContent(f)),GS(null,f,n,l,null,i,a);for(var p=l&&l.style,v=0;v<ic.length;v++){var m=ic[v];if(m!==rc)iI(m,f,0,QS(l,o[m].conOpt,m),null)}p?f.dirty():f.markRedraw()}}}}(h,t,i,a,c,$o),function E7(r,n,t,i,a){var o=t.clipPath;if(!1===o)r&&r.getClipPath()&&r.removeClipPath();else if(o){var l=r.getClipPath();l&&oI(l,o,i)&&(l=null),l||(l=WS(o),r.setClipPath(l)),GS(null,l,n,o,null,i,a)}}(h,t,i,a,c),GS(r,h,t,i,$o,a,c),qt(i,"info")&&(au(h).info=i.info);for(var f=0;f<ic.length;f++){var p=ic[f];if(p!==rc)iI(p,h,0,QS(i,uy(i,p),p),$o)}return function w7(r,n,t){if(!r.isGroup){var i=r,o=t.currentZLevel;i.z=t.currentZ,i.zlevel=o;var l=n.z2;null!=l&&(i.z2=l||0);for(var u=0;u<ic.length;u++)D7(i,n,ic[u])}}(h,i,a),"group"===i.type&&function O7(r,n,t,i,a){var o=i.children,l=o?o.length:0,u=i.$mergeChildren,c="byName"===u||i.diffChildrenByName,h=!1===u;if(l||c||h){if(c)return void function P7(r){new Xl(r.oldChildren,r.newChildren,lI,lI,r).add(uI).update(uI).remove(I7).execute()}({api:r,oldChildren:n.children()||[],newChildren:o||[],dataIndex:t,seriesModel:a,group:n});h&&n.removeAll();for(var f=0;f<l;f++)o[f]&&YS(r,n.childAt(f),t,o[f],a,n);for(var p=n.childCount()-1;p>=f;p--)sy(n.childAt(p),au(n).option,a)}}(r,h,t,i,a),l>=0?o.replaceAt(h,l):o.add(h),h}function oI(r,n,t){var i=au(r),a=n.type,o=n.shape,l=n.style;return t.isUniversalTransitionEnabled()||null!=a&&a!==i.customGraphicType||"path"===a&&function k7(r){return r&&(qt(r,"pathData")||qt(r,"d"))}(o)&&cI(o)!==i.customPathData||"image"===a&&qt(l,"image")&&l.image!==i.customImagePath}function sI(r,n,t){var i=n?uy(r,n):r,a=n?QS(r,i,ou):r.style,o=r.type,l=i?i.textConfig:null,u=r.textContent,c=u?n?uy(u,n):u:null;if(a&&(t.isLegacy||JP(a,o,!!l,!!c))){t.isLegacy=!0;var h=YP(a,o,!n);!l&&h.textConfig&&(l=h.textConfig),!c&&h.textContent&&(c=h.textContent)}!n&&c&&!c.type&&(c.type="text");var p=n?t[n]:t.normal;p.cfg=l,p.conOpt=c}function uy(r,n){return n?r?r[n]:null:r}function QS(r,n,t){var i=n&&n.style;return null==i&&t===ou&&r&&(i=r.styleEmphasis),i}function lI(r,n){var t=r&&r.name;return null!=t?t:"e\0\0"+n}function uI(r,n){var t=this.context;YS(t.api,null!=n?t.oldChildren[n]:null,t.dataIndex,null!=r?t.newChildren[r]:null,t.seriesModel,t.group)}function I7(r){var n=this.context,t=n.oldChildren[r];sy(t,au(t).option,n.seriesModel)}function cI(r){return r&&(r.pathData||r.d)}var xh=Xn(),hI=Nt,qS=qe,R7=function(){function r(){this._dragging=!1,this.animationThreshold=15}return r.prototype.render=function(n,t,i,a){var o=t.get("value"),l=t.get("status");if(this._axisModel=n,this._axisPointerModel=t,this._api=i,a||this._lastValue!==o||this._lastStatus!==l){this._lastValue=o,this._lastStatus=l;var u=this._group,c=this._handle;if(!l||"hide"===l)return u&&u.hide(),void(c&&c.hide());u&&u.show(),c&&c.show();var h={};this.makeElOption(h,o,n,t,i);var f=h.graphicKey;f!==this._lastGraphicKey&&this.clear(i),this._lastGraphicKey=f;var p=this._moveAnimation=this.determineAnimation(n,t);if(u){var v=yt(dI,t,p);this.updatePointerEl(u,h,v),this.updateLabelEl(u,h,v,t)}else u=this._group=new hn,this.createPointerEl(u,h,n,t),this.createLabelEl(u,h,n,t),i.getZr().add(u);gI(u,t,!0),this._renderHandle(o)}},r.prototype.remove=function(n){this.clear(n)},r.prototype.dispose=function(n){this.clear(n)},r.prototype.determineAnimation=function(n,t){var i=t.get("animation"),a=n.axis,o="category"===a.type,l=t.get("snap");if(!l&&!o)return!1;if("auto"===i||null==i){var u=this.animationThreshold;if(o&&a.getBandWidth()>u)return!0;if(l){var c=Sb(n).seriesDataCount,h=a.getExtent();return Math.abs(h[0]-h[1])/c>u}return!1}return!0===i},r.prototype.makeElOption=function(n,t,i,a,o){},r.prototype.createPointerEl=function(n,t,i,a){var o=t.pointer;if(o){var l=xh(n).pointerEl=new fe[o.type](hI(t.pointer));n.add(l)}},r.prototype.createLabelEl=function(n,t,i,a){if(t.label){var o=xh(n).labelEl=new Gn(hI(t.label));n.add(o),pI(o,a)}},r.prototype.updatePointerEl=function(n,t,i){var a=xh(n).pointerEl;a&&t.pointer&&(a.setStyle(t.pointer.style),i(a,{shape:t.pointer.shape}))},r.prototype.updateLabelEl=function(n,t,i,a){var o=xh(n).labelEl;o&&(o.setStyle(t.label.style),i(o,{x:t.label.x,y:t.label.y}),pI(o,a))},r.prototype._renderHandle=function(n){if(!this._dragging&&this.updateHandleTransform){var u,t=this._axisPointerModel,i=this._api.getZr(),a=this._handle,o=t.getModel("handle"),l=t.get("status");if(!o.get("show")||!l||"hide"===l)return a&&i.remove(a),void(this._handle=null);this._handle||(u=!0,a=this._handle=xd(o.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(h){Zr(h.event)},onmousedown:qS(this._onHandleDragMove,this,0,0),drift:qS(this._onHandleDragMove,this),ondragend:qS(this._onHandleDragEnd,this)}),i.add(a)),gI(a,t,!1),a.setStyle(o.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var c=o.get("size");we(c)||(c=[c,c]),a.scaleX=c[0]/2,a.scaleY=c[1]/2,bd(this,"_doDispatchAxisPointer",o.get("throttle")||0,"fixRate"),this._moveHandleToValue(n,u)}},r.prototype._moveHandleToValue=function(n,t){dI(this._axisPointerModel,!t&&this._moveAnimation,this._handle,KS(this.getHandleTransform(n,this._axisModel,this._axisPointerModel)))},r.prototype._onHandleDragMove=function(n,t){var i=this._handle;if(i){this._dragging=!0;var a=this.updateHandleTransform(KS(i),[n,t],this._axisModel,this._axisPointerModel);this._payloadInfo=a,i.stopAnimation(),i.attr(KS(a)),xh(i).lastProp=null,this._doDispatchAxisPointer()}},r.prototype._doDispatchAxisPointer=function(){if(this._handle){var t=this._payloadInfo,i=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:i.axis.dim,axisIndex:i.componentIndex}]})}},r.prototype._onHandleDragEnd=function(){if(this._dragging=!1,this._handle){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},r.prototype.clear=function(n){this._lastValue=null,this._lastStatus=null;var t=n.getZr(),i=this._group,a=this._handle;t&&i&&(this._lastGraphicKey=null,i&&t.remove(i),a&&t.remove(a),this._group=null,this._handle=null,this._payloadInfo=null),Yp(this,"_doDispatchAxisPointer")},r.prototype.doClear=function(){},r.prototype.buildLabel=function(n,t,i){return{x:n[i=i||0],y:n[1-i],width:t[i],height:t[1-i]}},r}();function dI(r,n,t,i){fI(xh(t).lastProp,i)||(xh(t).lastProp=i,n?Kn(t,i,r):(t.stopAnimation(),t.attr(i)))}function fI(r,n){if(tt(r)&&tt(n)){var t=!0;return De(n,function(i,a){t=t&&fI(r[a],i)}),!!t}return r===n}function pI(r,n){r[n.get(["label","show"])?"show":"hide"]()}function KS(r){return{x:r.x||0,y:r.y||0,rotation:r.rotation||0}}function gI(r,n,t){var i=n.get("z"),a=n.get("zlevel");r&&r.traverse(function(o){"group"!==o.type&&(null!=i&&(o.z=i),null!=a&&(o.zlevel=a),o.silent=t)})}const $S=R7;function jS(r){var i,n=r.get("type"),t=r.getModel(n+"Style");return"line"===n?(i=t.getLineStyle()).fill=null:"shadow"===n&&((i=t.getAreaStyle()).stroke=null),i}function vI(r,n,t,i,a){var l=mI(t.get("value"),n.axis,n.ecModel,t.get("seriesDataIndices"),{precision:t.get(["label","precision"]),formatter:t.get(["label","formatter"])}),u=t.getModel("label"),c=Ql(u.get("padding")||0),h=u.getFont(),f=_c(l,h),p=a.position,v=f.width+c[1]+c[3],m=f.height+c[0]+c[2],y=a.align;"right"===y&&(p[0]-=v),"center"===y&&(p[0]-=v/2);var C=a.verticalAlign;"bottom"===C&&(p[1]-=m),"middle"===C&&(p[1]-=m/2),function N7(r,n,t,i){var a=i.getWidth(),o=i.getHeight();r[0]=Math.min(r[0]+n,a)-n,r[1]=Math.min(r[1]+t,o)-t,r[0]=Math.max(r[0],0),r[1]=Math.max(r[1],0)}(p,v,m,i);var T=u.get("backgroundColor");(!T||"auto"===T)&&(T=n.get(["axisLine","lineStyle","color"])),r.label={x:p[0],y:p[1],style:$r(u,{text:l,font:h,fill:u.getTextColor(),padding:c,backgroundColor:T}),z2:10}}function mI(r,n,t,i,a){r=n.scale.parse(r);var o=n.scale.getLabel({value:r},{precision:a.precision}),l=a.formatter;if(l){var u={value:GT(n,{value:r}),axisDimension:n.dim,axisIndex:n.index,seriesData:[]};De(i,function(c){var h=t.getSeriesByIndex(c.seriesIndex),p=h&&h.getDataParams(c.dataIndexInside);p&&u.seriesData.push(p)}),Qe(l)?o=l.replace("{value}",o):Pe(l)&&(o=l(u))}return o}function XS(r,n,t){var i=[1,0,0,1,0,0];return Ws(i,i,t.rotation),Co(i,i,t.position),Ts([r.dataToCoord(n),(t.labelOffset||0)+(t.labelDirection||1)*(t.labelMargin||0)],i)}function _I(r,n,t,i,a,o){var l=nu.innerTextLayout(t.rotation,0,t.labelDirection);t.labelMargin=a.get(["label","margin"]),vI(n,i,a,o,{position:XS(i.axis,r,t),align:l.textAlign,verticalAlign:l.textVerticalAlign})}function ez(r,n,t){return{x1:r[t=t||0],y1:r[1-t],x2:n[t],y2:n[1-t]}}function yI(r,n,t){return{x:r[t=t||0],y:r[1-t],width:n[t],height:n[1-t]}}function CI(r,n,t,i,a,o){return{cx:r,cy:n,r0:t,r:i,startAngle:a,endAngle:o,clockwise:!0}}var F7=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return R(n,r),n.prototype.makeElOption=function(t,i,a,o,l){var u=a.axis,c=u.grid,h=o.get("type"),f=xI(c,u).getOtherAxis(u).getGlobalExtent(),p=u.toGlobalCoord(u.dataToCoord(i,!0));if(h&&"none"!==h){var v=jS(o),m=B7[h](u,p,f);m.style=v,t.graphicKey=m.type,t.pointer=m}_I(i,t,Cb(c.model,a),a,o,l)},n.prototype.getHandleTransform=function(t,i,a){var o=Cb(i.axis.grid.model,i,{labelInside:!1});o.labelMargin=a.get(["handle","margin"]);var l=XS(i.axis,t,o);return{x:l[0],y:l[1],rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},n.prototype.updateHandleTransform=function(t,i,a,o){var l=a.axis,u=l.grid,c=l.getGlobalExtent(!0),h=xI(u,l).getOtherAxis(l).getGlobalExtent(),f="x"===l.dim?0:1,p=[t.x,t.y];p[f]+=i[f],p[f]=Math.min(c[1],p[f]),p[f]=Math.max(c[0],p[f]);var v=(h[1]+h[0])/2,m=[v,v];return m[f]=p[f],{x:p[0],y:p[1],rotation:t.rotation,cursorPoint:m,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][f]}},n}($S);function xI(r,n){var t={};return t[n.dim+"AxisIndex"]=n.index,r.getCartesian(t)}var B7={line:function(r,n,t){return{type:"Line",subPixelOptimize:!0,shape:ez([n,t[0]],[n,t[1]],TI(r))}},shadow:function(r,n,t){var i=Math.max(1,r.getBandWidth());return{type:"Rect",shape:yI([n-i/2,t[0]],[i,t[1]-t[0]],TI(r))}}};function TI(r){return"x"===r.dim?0:1}const Z7=F7;var U7=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.type="axisPointer",n.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},n}(Jn);const V7=U7;var su=Xn(),H7=De;function bI(r,n,t){if(!gt.node){var i=n.getZr();su(i).records||(su(i).records={}),function W7(r,n){function t(i,a){r.on(i,function(o){var l=function Y7(r){var n={showTip:[],hideTip:[]},t=function(i){var a=n[i.type];a?a.push(i):(i.dispatchAction=t,r.dispatchAction(i))};return{dispatchAction:t,pendings:n}}(n);H7(su(r).records,function(u){u&&a(u,o,l.dispatchAction)}),function G7(r,n){var a,t=r.showTip.length,i=r.hideTip.length;t?a=r.showTip[t-1]:i&&(a=r.hideTip[i-1]),a&&(a.dispatchAction=null,n.dispatchAction(a))}(l.pendings,n)})}su(r).initialized||(su(r).initialized=!0,t("click",yt(SI,"click")),t("mousemove",yt(SI,"mousemove")),t("globalout",J7))}(i,n),(su(i).records[r]||(su(i).records[r]={})).handler=t}}function J7(r,n,t){r.handler("leave",null,t)}function SI(r,n,t,i){n.handler(r,t,i)}function tz(r,n){if(!gt.node){var t=n.getZr();(su(t).records||{})[r]&&(su(t).records[r]=null)}}var Q7=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.render=function(t,i,a){var o=i.getComponent("tooltip"),l=t.get("triggerOn")||o&&o.get("triggerOn")||"mousemove|click";bI("axisPointer",a,function(u,c,h){"none"!==l&&("leave"===u||l.indexOf(u)>=0)&&h({type:"updateAxisPointer",currTrigger:u,x:c&&c.offsetX,y:c&&c.offsetY})})},n.prototype.remove=function(t,i){tz("axisPointer",i)},n.prototype.dispose=function(t,i){tz("axisPointer",i)},n.type="axisPointer",n}(oi);const q7=Q7;function zI(r,n){var a,t=[],i=r.seriesIndex;if(null==i||!(a=n.getSeriesByIndex(i)))return{point:[]};var o=a.getData(),l=kl(o,r);if(null==l||l<0||we(l))return{point:[]};var u=o.getItemGraphicEl(l),c=a.coordinateSystem;if(a.getTooltipPosition)t=a.getTooltipPosition(l)||[];else if(c&&c.dataToPoint)if(r.isStacked){var h=c.getBaseAxis(),p=c.getOtherAxis(h).dim,m="x"===p||"radius"===p?1:0,y=o.mapDimension(h.dim),C=[];C[m]=o.get(y,l),C[1-m]=o.get(o.getCalculationInfo("stackResultDimension"),l),t=c.dataToPoint(C)||[]}else t=c.dataToPoint(o.getValues(_t(c.dimensions,function(z){return o.mapDimension(z)}),l))||[];else if(u){var T=u.getBoundingRect().clone();T.applyTransform(u.transform),t=[T.x+T.width/2,T.y+T.height/2]}return{point:t,el:u}}var wI=Xn();function K7(r,n,t){var i=r.currTrigger,a=[r.x,r.y],o=r,l=r.dispatchAction||qe(t.dispatchAction,t),u=n.getComponent("axisPointer").coordSysAxesInfo;if(u){cy(a)&&(a=zI({seriesIndex:o.seriesIndex,dataIndex:o.dataIndex},n).point);var c=cy(a),h=o.axesInfo,f=u.axesInfo,p="leave"===i||cy(a),v={},m={},y={list:[],map:{}},C={showPointer:yt(j7,m),showTooltip:yt(X7,y)};De(u.coordSysMap,function(z,E){var N=c||z.containPoint(a);De(u.coordSysAxesInfo[E],function(X,ve){var ce=X.axis,_e=function rW(r,n){for(var t=0;t<(r||[]).length;t++){var i=r[t];if(n.axis.dim===i.axisDim&&n.axis.model.componentIndex===i.axisIndex)return i}}(h,X);if(!p&&N&&(!h||_e)){var ze=_e&&_e.value;null==ze&&!c&&(ze=ce.pointToData(a)),null!=ze&&DI(X,ze,C,!1,v)}})});var T={};return De(f,function(z,E){var N=z.linkGroup;N&&!m[E]&&De(N.axesInfo,function(X,ve){var ce=m[ve];if(X!==z&&ce){var _e=ce.value;N.mapper&&(_e=z.axis.scale.parse(N.mapper(_e,AI(X),AI(z)))),T[z.key]=_e}})}),De(T,function(z,E){DI(f[E],z,C,!0,v)}),function eW(r,n,t){var i=t.axesInfo=[];De(n,function(a,o){var l=a.axisPointerModel.option,u=r[o];u?(!a.useHandle&&(l.status="show"),l.value=u.value,l.seriesDataIndices=(u.payloadBatch||[]).slice()):!a.useHandle&&(l.status="hide"),"show"===l.status&&i.push({axisDim:a.axis.dim,axisIndex:a.axis.model.componentIndex,value:l.value})})}(m,f,v),function tW(r,n,t,i){if(!cy(n)&&r.list.length){var a=((r.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:!0,x:n[0],y:n[1],tooltipOption:t.tooltipOption,position:t.position,dataIndexInside:a.dataIndexInside,dataIndex:a.dataIndex,seriesIndex:a.seriesIndex,dataByCoordSys:r.list})}else i({type:"hideTip"})}(y,a,r,l),function nW(r,n,t){var i=t.getZr(),a="axisPointerLastHighlights",o=wI(i)[a]||{},l=wI(i)[a]={};De(r,function(h,f){var p=h.axisPointerModel.option;"show"===p.status&&De(p.seriesDataIndices,function(v){l[v.seriesIndex+" | "+v.dataIndex]=v})});var u=[],c=[];De(o,function(h,f){!l[f]&&c.push(h)}),De(l,function(h,f){!o[f]&&u.push(h)}),c.length&&t.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:c}),u.length&&t.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:u})}(f,0,t),v}}function DI(r,n,t,i,a){var o=r.axis;if(!o.scale.isBlank()&&o.containData(n)){if(!r.involveSeries)return void t.showPointer(r,n);var l=function $7(r,n){var t=n.axis,i=t.dim,a=r,o=[],l=Number.MAX_VALUE,u=-1;return De(n.seriesModels,function(c,h){var p,v,f=c.getData().mapDimensionsAll(i);if(c.getAxisTooltipData){var m=c.getAxisTooltipData(f,r,t);v=m.dataIndices,p=m.nestestValue}else{if(!(v=c.getData().indicesOfNearest(f[0],r,"category"===t.type?.5:null)).length)return;p=c.getData().get(f[0],v[0])}if(null!=p&&isFinite(p)){var y=r-p,C=Math.abs(y);C<=l&&((C<l||y>=0&&u<0)&&(l=C,u=y,a=p,o.length=0),De(v,function(T){o.push({seriesIndex:c.seriesIndex,dataIndexInside:T,dataIndex:c.getData().getRawIndex(T)})}))}}),{payloadBatch:o,snapToValue:a}}(n,r),u=l.payloadBatch,c=l.snapToValue;u[0]&&null==a.seriesIndex&&Ge(a,u[0]),!i&&r.snap&&o.containData(c)&&null!=c&&(n=c),t.showPointer(r,n,u),t.showTooltip(r,l,c)}}function j7(r,n,t,i){r[n.key]={value:t,payloadBatch:i}}function X7(r,n,t,i){var a=t.payloadBatch,o=n.axis,l=o.model,u=n.axisPointerModel;if(n.triggerTooltip&&a.length){var c=n.coordSys.model,h=xg(c),f=r.map[h];f||(f=r.map[h]={coordSysId:c.id,coordSysIndex:c.componentIndex,coordSysType:c.type,coordSysMainType:c.mainType,dataByAxis:[]},r.list.push(f)),f.dataByAxis.push({axisDim:o.dim,axisIndex:l.componentIndex,axisType:l.type,axisId:l.id,value:i,valueLabelOpt:{precision:u.get(["label","precision"]),formatter:u.get(["label","formatter"])},seriesDataIndices:a.slice()})}}function AI(r){var n=r.axis.model,t={},i=t.axisDim=r.axis.dim;return t.axisIndex=t[i+"AxisIndex"]=n.componentIndex,t.axisName=t[i+"AxisName"]=n.name,t.axisId=t[i+"AxisId"]=n.id,t}function cy(r){return!r||null==r[0]||isNaN(r[0])||null==r[1]||isNaN(r[1])}function Bg(r){hh.registerAxisPointerClass("CartesianAxisPointer",Z7),r.registerComponentModel(V7),r.registerComponentView(q7),r.registerPreprocessor(function(n){if(n){(!n.axisPointer||0===n.axisPointer.length)&&(n.axisPointer={});var t=n.axisPointer.link;t&&!we(t)&&(n.axisPointer.link=[t])}}),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,function(n,t){n.getComponent("axisPointer").coordSysAxesInfo=function Z5(r,n){var t={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function U5(r,n,t){var i=n.getComponent("tooltip"),a=n.getComponent("axisPointer"),o=a.get("link",!0)||[],l=[];De(t.getCoordinateSystems(),function(u){if(u.axisPointerEnabled){var c=xg(u.model),h=r.coordSysAxesInfo[c]={};r.coordSysMap[c]=u;var p=u.model.getModel("tooltip",i);if(De(u.getAxes(),yt(C,!1,null)),u.getTooltipAxes&&i&&p.get("show")){var v="axis"===p.get("trigger"),m="cross"===p.get(["axisPointer","type"]),y=u.getTooltipAxes(p.get(["axisPointer","axis"]));(v||m)&&De(y.baseAxes,yt(C,!m||"cross",v)),m&&De(y.otherAxes,yt(C,"cross",!1))}}function C(T,z,E){var N=E.model.getModel("axisPointer",a),X=N.get("show");if(X&&("auto"!==X||T||zb(N))){null==z&&(z=N.get("triggerTooltip")),N=T?function V5(r,n,t,i,a,o){var l=n.getModel("axisPointer"),c={};De(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(v){c[v]=Nt(l.get(v))}),c.snap="category"!==r.type&&!!o,"cross"===l.get("type")&&(c.type="line");var h=c.label||(c.label={});if(null==h.show&&(h.show=!1),"cross"===a){var f=l.get(["label","show"]);if(h.show=null==f||f,!o){var p=c.lineStyle=l.get("crossStyle");p&&Dt(h,p.textStyle)}}return r.model.getModel("axisPointer",new Or(c,t,i))}(E,p,a,n,T,z):N;var ve=N.get("snap"),ce=xg(E.model),_e=z||ve||"category"===E.type,ze=r.axesInfo[ce]={key:ce,axis:E,coordSys:u,axisPointerModel:N,triggerTooltip:z,involveSeries:_e,snap:ve,useHandle:zb(N),seriesModels:[],linkGroup:null};h[ce]=ze,r.seriesInvolved=r.seriesInvolved||_e;var Ee=function W5(r,n){for(var t=n.model,i=n.dim,a=0;a<r.length;a++){var o=r[a]||{};if(bb(o[i+"AxisId"],t.id)||bb(o[i+"AxisIndex"],t.componentIndex)||bb(o[i+"AxisName"],t.name))return a}}(o,E);if(null!=Ee){var Le=l[Ee]||(l[Ee]={axesInfo:{}});Le.axesInfo[ce]=ze,Le.mapper=o[Ee].mapper,ze.linkGroup=Le}}}})}(t,r,n),t.seriesInvolved&&function H5(r,n){n.eachSeries(function(t){var i=t.coordinateSystem,a=t.get(["tooltip","trigger"],!0),o=t.get(["tooltip","show"],!0);!i||"none"===a||!1===a||"item"===a||!1===o||!1===t.get(["axisPointer","show"],!0)||De(r.coordSysAxesInfo[xg(i.model)],function(l){var u=l.axis;i.getAxis(u.dim)===u&&(l.seriesModels.push(t),null==l.seriesDataCount&&(l.seriesDataCount=0),l.seriesDataCount+=t.getData().count())})})}(t,r),t}(n,t)}),r.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},K7)}var aW=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return R(n,r),n.prototype.makeElOption=function(t,i,a,o,l){var u=a.axis;"angle"===u.dim&&(this.animationThreshold=Math.PI/18);var c=u.polar,f=c.getOtherAxis(u).getExtent(),p=u.dataToCoord(i),v=o.get("type");if(v&&"none"!==v){var m=jS(o),y=sW[v](u,c,p,f);y.style=m,t.graphicKey=y.type,t.pointer=y}var T=function oW(r,n,t,i,a){var o=n.axis,l=o.dataToCoord(r),u=i.getAngleAxis().getExtent()[0];u=u/180*Math.PI;var h,f,p,c=i.getRadiusAxis().getExtent();if("radius"===o.dim){var v=[1,0,0,1,0,0];Ws(v,v,u),Co(v,v,[i.cx,i.cy]),h=Ts([l,-a],v);var m=n.getModel("axisLabel").get("rotate")||0,y=nu.innerTextLayout(u,m*Math.PI/180,-1);f=y.textAlign,p=y.textVerticalAlign}else{var C=c[1];h=i.coordToPoint([C+a,l]);var T=i.cx,z=i.cy;f=Math.abs(h[0]-T)/C<.3?"center":h[0]>T?"left":"right",p=Math.abs(h[1]-z)/C<.3?"middle":h[1]>z?"top":"bottom"}return{position:h,align:f,verticalAlign:p}}(i,a,0,c,o.get(["label","margin"]));vI(t,a,o,l,T)},n}($S),sW={line:function(r,n,t,i){return"angle"===r.dim?{type:"Line",shape:ez(n.coordToPoint([i[0],t]),n.coordToPoint([i[1],t]))}:{type:"Circle",shape:{cx:n.cx,cy:n.cy,r:t}}},shadow:function(r,n,t,i){var a=Math.max(1,r.getBandWidth()),o=Math.PI/180;return"angle"===r.dim?{type:"Sector",shape:CI(n.cx,n.cy,i[0],i[1],(-t-a/2)*o,(a/2-t)*o)}:{type:"Sector",shape:CI(n.cx,n.cy,t-a/2,t+a/2,0,2*Math.PI)}}};const lW=aW;var uW=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.findAxisModel=function(t){var i;return this.ecModel.eachComponent(t,function(o){o.getCoordSysModel()===this&&(i=o)},this),i},n.type="polar",n.dependencies=["radiusAxis","angleAxis"],n.defaultOption={z:0,center:["50%","50%"],radius:"80%"},n}(Jn);const cW=uW;var nz=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return R(n,r),n.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",_i).models[0]},n.type="polarAxis",n}(Jn);Qt(nz,Od);var hW=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.type="angleAxis",n}(nz),dW=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.type="radiusAxis",n}(nz),rz=function(r){function n(t,i){return r.call(this,"radius",t,i)||this}return R(n,r),n.prototype.pointToData=function(t,i){return this.polar.pointToData(t,i)["radius"===this.dim?0:1]},n}(Yo);rz.prototype.dataToRadius=Yo.prototype.dataToCoord,rz.prototype.radiusToData=Yo.prototype.coordToData;const fW=rz;var pW=Xn(),iz=function(r){function n(t,i){return r.call(this,"angle",t,i||[0,360])||this}return R(n,r),n.prototype.pointToData=function(t,i){return this.polar.pointToData(t,i)["radius"===this.dim?0:1]},n.prototype.calculateCategoryInterval=function(){var t=this,i=t.getLabelModel(),a=t.scale,o=a.getExtent(),l=a.count();if(o[1]-o[0]<1)return 0;var u=o[0],c=t.dataToCoord(u+1)-t.dataToCoord(u),h=Math.abs(c),f=_c(null==u?"":u+"",i.getFont(),"center","top"),v=Math.max(f.height,7)/h;isNaN(v)&&(v=1/0);var m=Math.max(0,Math.floor(v)),y=pW(t.model),C=y.lastAutoInterval,T=y.lastTickCount;return null!=C&&null!=T&&Math.abs(C-m)<=1&&Math.abs(T-l)<=1&&C>m?m=C:(y.lastTickCount=l,y.lastAutoInterval=m),m},n}(Yo);iz.prototype.dataToAngle=Yo.prototype.dataToCoord,iz.prototype.angleToData=Yo.prototype.coordToData;const gW=iz;var EI=["radius","angle"],vW=function(){function r(n){this.dimensions=EI,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new fW,this._angleAxis=new gW,this.axisPointerEnabled=!0,this.name=n||"",this._radiusAxis.polar=this._angleAxis.polar=this}return r.prototype.containPoint=function(n){var t=this.pointToCoord(n);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},r.prototype.containData=function(n){return this._radiusAxis.containData(n[0])&&this._angleAxis.containData(n[1])},r.prototype.getAxis=function(n){return this["_"+n+"Axis"]},r.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},r.prototype.getAxesByScale=function(n){var t=[],i=this._angleAxis,a=this._radiusAxis;return i.scale.type===n&&t.push(i),a.scale.type===n&&t.push(a),t},r.prototype.getAngleAxis=function(){return this._angleAxis},r.prototype.getRadiusAxis=function(){return this._radiusAxis},r.prototype.getOtherAxis=function(n){var t=this._angleAxis;return n===t?this._radiusAxis:t},r.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},r.prototype.getTooltipAxes=function(n){var t=null!=n&&"auto"!==n?this.getAxis(n):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},r.prototype.dataToPoint=function(n,t){return this.coordToPoint([this._radiusAxis.dataToRadius(n[0],t),this._angleAxis.dataToAngle(n[1],t)])},r.prototype.pointToData=function(n,t){var i=this.pointToCoord(n);return[this._radiusAxis.radiusToData(i[0],t),this._angleAxis.angleToData(i[1],t)]},r.prototype.pointToCoord=function(n){var t=n[0]-this.cx,i=n[1]-this.cy,a=this.getAngleAxis(),o=a.getExtent(),l=Math.min(o[0],o[1]),u=Math.max(o[0],o[1]);a.inverse?l=u-360:u=l+360;var c=Math.sqrt(t*t+i*i);t/=c,i/=c;for(var h=Math.atan2(-i,t)/Math.PI*180,f=h<l?1:-1;h<l||h>u;)h+=360*f;return[c,h]},r.prototype.coordToPoint=function(n){var t=n[0],i=n[1]/180*Math.PI;return[Math.cos(i)*t+this.cx,-Math.sin(i)*t+this.cy]},r.prototype.getArea=function(){var n=this.getAngleAxis(),i=this.getRadiusAxis().getExtent().slice();i[0]>i[1]&&i.reverse();var a=n.getExtent(),o=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:i[0],r:i[1],startAngle:-a[0]*o,endAngle:-a[1]*o,clockwise:n.inverse,contain:function(l,u){var c=l-this.cx,h=u-this.cy,f=c*c+h*h-1e-4,p=this.r,v=this.r0;return f<=p*p&&f>=v*v}}},r.prototype.convertToPixel=function(n,t,i){return MI(t)===this?this.dataToPoint(i):null},r.prototype.convertFromPixel=function(n,t,i){return MI(t)===this?this.pointToData(i):null},r}();function MI(r){var n=r.seriesModel,t=r.polarModel;return t&&t.coordinateSystem||n&&n.coordinateSystem}const mW=vW;function yW(r,n){var t=this,i=t.getAngleAxis(),a=t.getRadiusAxis();if(i.scale.setExtent(1/0,-1/0),a.scale.setExtent(1/0,-1/0),r.eachSeries(function(u){if(u.coordinateSystem===t){var c=u.getData();De(S0(c,"radius"),function(h){a.scale.unionExtentFromData(c,h)}),De(S0(c,"angle"),function(h){i.scale.unionExtentFromData(c,h)})}}),th(i.scale,i.model),th(a.scale,a.model),"category"===i.type&&!i.onBand){var o=i.getExtent(),l=360/i.scale.count();i.inverse?o[1]+=l:o[1]-=l,i.setExtent(o[0],o[1])}}function OI(r,n){if(r.type=n.get("type"),r.scale=lg(n),r.onBand=n.get("boundaryGap")&&"category"===r.type,r.inverse=n.get("inverse"),function CW(r){return"angleAxis"===r.mainType}(n)){r.inverse=r.inverse!==n.get("clockwise");var t=n.get("startAngle");r.setExtent(t,t+(r.inverse?-360:360))}n.axis=r,r.model=n}var xW={dimensions:EI,create:function(r,n){var t=[];return r.eachComponent("polar",function(i,a){var o=new mW(a+"");o.update=yW;var l=o.getRadiusAxis(),u=o.getAngleAxis(),c=i.findAxisModel("radiusAxis"),h=i.findAxisModel("angleAxis");OI(l,c),OI(u,h),function _W(r,n,t){var i=n.get("center"),a=t.getWidth(),o=t.getHeight();r.cx=Ht(i[0],a),r.cy=Ht(i[1],o);var l=r.getRadiusAxis(),u=Math.min(a,o)/2,c=n.get("radius");null==c?c=[0,"100%"]:we(c)||(c=[0,c]);var h=[Ht(c[0],u),Ht(c[1],u)];l.inverse?l.setExtent(h[1],h[0]):l.setExtent(h[0],h[1])}(o,i,n),t.push(o),i.coordinateSystem=o,o.model=i}),r.eachSeries(function(i){if("polar"===i.get("coordinateSystem")){var a=i.getReferringComponents("polar",_i).models[0];i.coordinateSystem=a.coordinateSystem}}),t}};const TW=xW;var bW=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function hy(r,n,t){n[1]>n[0]&&(n=n.slice().reverse());var i=r.coordToPoint([n[0],t]),a=r.coordToPoint([n[1],t]);return{x1:i[0],y1:i[1],x2:a[0],y2:a[1]}}function dy(r){return r.getRadiusAxis().inverse?0:1}function PI(r){var n=r[0],t=r[r.length-1];n&&t&&Math.abs(Math.abs(n.coord-t.coord)-360)<1e-4&&r.pop()}var SW=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.axisPointerClass="PolarAxisPointer",t}return R(n,r),n.prototype.render=function(t,i){if(this.group.removeAll(),t.get("show")){var a=t.axis,o=a.polar,l=o.getRadiusAxis().getExtent(),u=a.getTicksCoords(),c=a.getMinorTicksCoords(),h=_t(a.getViewLabels(),function(f){f=Nt(f);var p=a.scale,v="ordinal"===p.type?p.getRawOrdinalNumber(f.tickValue):f.tickValue;return f.coord=a.dataToCoord(v),f});PI(h),PI(u),De(bW,function(f){t.get([f,"show"])&&(!a.scale.isBlank()||"axisLine"===f)&&zW[f](this.group,t,o,u,c,l,h)},this)}},n.type="angleAxis",n}(hh),zW={axisLine:function(r,n,t,i,a,o){var h,l=n.getModel(["axisLine","lineStyle"]),u=dy(t),c=u?0:1;(h=0===o[c]?new Cs({shape:{cx:t.cx,cy:t.cy,r:o[u]},style:l.getLineStyle(),z2:1,silent:!0}):new Vp({shape:{cx:t.cx,cy:t.cy,r:o[u],r0:o[c]},style:l.getLineStyle(),z2:1,silent:!0})).style.fill=null,r.add(h)},axisTick:function(r,n,t,i,a,o){var l=n.getModel("axisTick"),u=(l.get("inside")?-1:1)*l.get("length"),c=o[dy(t)],h=_t(i,function(f){return new Gi({shape:hy(t,[c,c+u],f.coord)})});r.add(zo(h,{style:Dt(l.getModel("lineStyle").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})}))},minorTick:function(r,n,t,i,a,o){if(a.length){for(var l=n.getModel("axisTick"),u=n.getModel("minorTick"),c=(l.get("inside")?-1:1)*u.get("length"),h=o[dy(t)],f=[],p=0;p<a.length;p++)for(var v=0;v<a[p].length;v++)f.push(new Gi({shape:hy(t,[h,h+c],a[p][v].coord)}));r.add(zo(f,{style:Dt(u.getModel("lineStyle").getLineStyle(),Dt(l.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(r,n,t,i,a,o,l){var u=n.getCategories(!0),c=n.getModel("axisLabel"),h=c.get("margin"),f=n.get("triggerEvent");De(l,function(p,v){var m=c,y=p.tickValue,C=o[dy(t)],T=t.coordToPoint([C+h,p.coord]),z=t.cx,E=t.cy,N=Math.abs(T[0]-z)/C<.3?"center":T[0]>z?"left":"right",X=Math.abs(T[1]-E)/C<.3?"middle":T[1]>E?"top":"bottom";if(u&&u[y]){var ve=u[y];tt(ve)&&ve.textStyle&&(m=new Or(ve.textStyle,c,c.ecModel))}var ce=new Gn({silent:nu.isLabelSilent(n),style:$r(m,{x:T[0],y:T[1],fill:m.getTextColor()||n.get(["axisLine","lineStyle","color"]),text:p.formattedLabel,align:N,verticalAlign:X})});if(r.add(ce),f){var _e=nu.makeAxisEventDataBase(n);_e.targetType="axisLabel",_e.value=p.rawLabel,dn(ce).eventData=_e}},this)},splitLine:function(r,n,t,i,a,o){var u=n.getModel("splitLine").getModel("lineStyle"),c=u.get("color"),h=0;c=c instanceof Array?c:[c];for(var f=[],p=0;p<i.length;p++){var v=h++%c.length;f[v]=f[v]||[],f[v].push(new Gi({shape:hy(t,o,i[p].coord)}))}for(p=0;p<f.length;p++)r.add(zo(f[p],{style:Dt({stroke:c[p%c.length]},u.getLineStyle()),silent:!0,z:n.get("z")}))},minorSplitLine:function(r,n,t,i,a,o){if(a.length){for(var u=n.getModel("minorSplitLine").getModel("lineStyle"),c=[],h=0;h<a.length;h++)for(var f=0;f<a[h].length;f++)c.push(new Gi({shape:hy(t,o,a[h][f].coord)}));r.add(zo(c,{style:u.getLineStyle(),silent:!0,z:n.get("z")}))}},splitArea:function(r,n,t,i,a,o){if(i.length){var u=n.getModel("splitArea").getModel("areaStyle"),c=u.get("color"),h=0;c=c instanceof Array?c:[c];for(var f=[],p=Math.PI/180,v=-i[0].coord*p,m=Math.min(o[0],o[1]),y=Math.max(o[0],o[1]),C=n.get("clockwise"),T=1,z=i.length;T<=z;T++){var E=T===z?i[0].coord:i[T].coord,N=h++%c.length;f[N]=f[N]||[],f[N].push(new Oa({shape:{cx:t.cx,cy:t.cy,r0:m,r:y,startAngle:v,endAngle:-E*p,clockwise:C},silent:!0})),v=-E*p}for(T=0;T<f.length;T++)r.add(zo(f[T],{style:Dt({fill:c[T%c.length]},u.getAreaStyle()),silent:!0}))}}};const wW=SW;var DW=["axisLine","axisTickLabel","axisName"],AW=["splitLine","splitArea","minorSplitLine"],EW=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.axisPointerClass="PolarAxisPointer",t}return R(n,r),n.prototype.render=function(t,i){if(this.group.removeAll(),t.get("show")){var a=this._axisGroup,o=this._axisGroup=new hn;this.group.add(o);var l=t.axis,u=l.polar,c=u.getAngleAxis(),h=l.getTicksCoords(),f=l.getMinorTicksCoords(),p=c.getExtent()[0],v=l.getExtent(),m=function OW(r,n,t){return{position:[r.cx,r.cy],rotation:t/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:n.getModel("axisLabel").get("rotate"),z2:1}}(u,t,p),y=new nu(t,m);De(DW,y.add,y),o.add(y.getGroup()),Gp(a,o,t),De(AW,function(C){t.get([C,"show"])&&!l.scale.isBlank()&&MW[C](this.group,t,u,p,v,h,f)},this)}},n.type="radiusAxis",n}(hh),MW={splitLine:function(r,n,t,i,a,o){var u=n.getModel("splitLine").getModel("lineStyle"),c=u.get("color"),h=0;c=c instanceof Array?c:[c];for(var f=[],p=0;p<o.length;p++){var v=h++%c.length;f[v]=f[v]||[],f[v].push(new Cs({shape:{cx:t.cx,cy:t.cy,r:Math.max(o[p].coord,0)}}))}for(p=0;p<f.length;p++)r.add(zo(f[p],{style:Dt({stroke:c[p%c.length],fill:null},u.getLineStyle()),silent:!0}))},minorSplitLine:function(r,n,t,i,a,o,l){if(l.length){for(var c=n.getModel("minorSplitLine").getModel("lineStyle"),h=[],f=0;f<l.length;f++)for(var p=0;p<l[f].length;p++)h.push(new Cs({shape:{cx:t.cx,cy:t.cy,r:l[f][p].coord}}));r.add(zo(h,{style:Dt({fill:null},c.getLineStyle()),silent:!0}))}},splitArea:function(r,n,t,i,a,o){if(o.length){var u=n.getModel("splitArea").getModel("areaStyle"),c=u.get("color"),h=0;c=c instanceof Array?c:[c];for(var f=[],p=o[0].coord,v=1;v<o.length;v++){var m=h++%c.length;f[m]=f[m]||[],f[m].push(new Oa({shape:{cx:t.cx,cy:t.cy,r0:p,r:o[v].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),p=o[v].coord}for(v=0;v<f.length;v++)r.add(zo(f[v],{style:Dt({fill:c[v%c.length]},u.getAreaStyle()),silent:!0}))}}};const PW=EW;function II(r){return r.get("stack")||"__ec_stack_"+r.seriesIndex}function kI(r,n){return n.dim+r.model.componentIndex}const LW=function IW(r,n,t){var i={},a=function kW(r){var n={};De(r,function(i,a){var o=i.getData(),l=i.coordinateSystem,u=l.getBaseAxis(),c=kI(l,u),h=u.getExtent(),f="category"===u.type?u.getBandWidth():Math.abs(h[1]-h[0])/o.count(),p=n[c]||{bandWidth:f,remainedWidth:f,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},v=p.stacks;n[c]=p;var m=II(i);v[m]||p.autoWidthCount++,v[m]=v[m]||{width:0,maxWidth:0};var y=Ht(i.get("barWidth"),f),C=Ht(i.get("barMaxWidth"),f),T=i.get("barGap"),z=i.get("barCategoryGap");y&&!v[m].width&&(y=Math.min(p.remainedWidth,y),v[m].width=y,p.remainedWidth-=y),C&&(v[m].maxWidth=C),null!=T&&(p.gap=T),null!=z&&(p.categoryGap=z)});var t={};return De(n,function(i,a){t[a]={};var o=i.stacks,u=Ht(i.categoryGap,i.bandWidth),c=Ht(i.gap,1),h=i.remainedWidth,f=i.autoWidthCount,p=(h-u)/(f+(f-1)*c);p=Math.max(p,0),De(o,function(C,T){var z=C.maxWidth;z&&z<p&&(z=Math.min(z,h),C.width&&(z=Math.min(z,C.width)),h-=z,C.width=z,f--)}),p=(h-u)/(f+(f-1)*c),p=Math.max(p,0);var m,v=0;De(o,function(C,T){C.width||(C.width=p),m=C,v+=C.width*(1+c)}),m&&(v-=m.width*c);var y=-v/2;De(o,function(C,T){t[a][T]=t[a][T]||{offset:y,width:C.width},y+=C.width*(1+c)})}),t}(_n(n.getSeriesByType(r),function(o){return!n.isSeriesFiltered(o)&&o.coordinateSystem&&"polar"===o.coordinateSystem.type}));n.eachSeriesByType(r,function(o){if("polar"===o.coordinateSystem.type){var l=o.getData(),u=o.coordinateSystem,c=u.getBaseAxis(),h=kI(u,c),f=II(o),p=a[h][f],v=p.offset,m=p.width,y=u.getOtherAxis(c),C=o.coordinateSystem.cx,T=o.coordinateSystem.cy,z=o.get("barMinHeight")||0,E=o.get("barMinAngle")||0;i[f]=i[f]||[];for(var N=l.mapDimension(y.dim),X=l.mapDimension(c.dim),ve=eu(l,N),ce="radius"!==c.dim||!o.get("roundCap",!0),_e=y.dataToCoord(0),ze=0,Ee=l.count();ze<Ee;ze++){var Le=l.get(N,ze),ke=l.get(X,ze),Ue=Le>=0?"p":"n",He=_e;ve&&(i[f][ke]||(i[f][ke]={p:_e,n:_e}),He=i[f][ke][Ue]);var Ke=void 0,nt=void 0,lt=void 0,St=void 0;if("radius"===y.dim){var mt=y.dataToCoord(Le)-_e,wt=c.dataToCoord(ke);Math.abs(mt)<z&&(mt=(mt<0?-1:1)*z),Ke=He,nt=He+mt,St=(lt=wt-v)-m,ve&&(i[f][ke][Ue]=nt)}else{var kt=y.dataToCoord(Le,ce)-_e,Yt=c.dataToCoord(ke);Math.abs(kt)<E&&(kt=(kt<0?-1:1)*E),nt=(Ke=Yt+v)+m,lt=He,St=He+kt,ve&&(i[f][ke][Ue]=St)}l.setItemLayout(ze,{cx:C,cy:T,r0:Ke,r:nt,startAngle:-lt*Math.PI/180,endAngle:-St*Math.PI/180,clockwise:lt>=St})}}})};var RW={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},NW={splitNumber:5},FW=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.type="polar",n}(oi);function az(r,n){n=n||{};var i=r.axis,a={},o=i.position,l=i.orient,u=r.coordinateSystem.getRect(),c=[u.x,u.x+u.width,u.y,u.y+u.height],h={horizontal:{top:c[2],bottom:c[3]},vertical:{left:c[0],right:c[1]}};a.position=["vertical"===l?h.vertical[o]:c[0],"horizontal"===l?h.horizontal[o]:c[3]],a.rotation=Math.PI/2*{horizontal:0,vertical:1}[l],a.labelDirection=a.tickDirection=a.nameDirection={top:-1,bottom:1,right:1,left:-1}[o],r.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),Cr(n.labelInside,r.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var v=n.rotate;return null==v&&(v=r.get(["axisLabel","rotate"])),a.labelRotation="top"===o?-v:v,a.z2=1,a}var ZW=["axisLine","axisTickLabel","axisName"],UW=["splitArea","splitLine"],VW=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.axisPointerClass="SingleAxisPointer",t}return R(n,r),n.prototype.render=function(t,i,a,o){var l=this.group;l.removeAll();var u=this._axisGroup;this._axisGroup=new hn;var c=az(t),h=new nu(t,c);De(ZW,h.add,h),l.add(this._axisGroup),l.add(h.getGroup()),De(UW,function(f){t.get([f,"show"])&&HW[f](this,this.group,this._axisGroup,t)},this),Gp(u,this._axisGroup,t),r.prototype.render.call(this,t,i,a,o)},n.prototype.remove=function(){X2(this)},n.type="singleAxis",n}(hh),HW={splitLine:function(r,n,t,i){var a=i.axis;if(!a.scale.isBlank()){var o=i.getModel("splitLine"),l=o.getModel("lineStyle"),u=l.get("color");u=u instanceof Array?u:[u];for(var c=i.coordinateSystem.getRect(),h=a.isHorizontal(),f=[],p=0,v=a.getTicksCoords({tickModel:o}),m=[],y=[],C=0;C<v.length;++C){var T=a.toGlobalCoord(v[C].coord);h?(m[0]=T,m[1]=c.y,y[0]=T,y[1]=c.y+c.height):(m[0]=c.x,m[1]=T,y[0]=c.x+c.width,y[1]=T);var z=p++%u.length;f[z]=f[z]||[],f[z].push(new Gi({subPixelOptimize:!0,shape:{x1:m[0],y1:m[1],x2:y[0],y2:y[1]},silent:!0}))}var E=l.getLineStyle(["color"]);for(C=0;C<f.length;++C)n.add(zo(f[C],{style:Dt({stroke:u[C%u.length]},E),silent:!0}))}},splitArea:function(r,n,t,i){j2(r,t,i,i)}};const WW=VW;var LI=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.getCoordSysModel=function(){return this},n.type="singleAxis",n.layoutMode="box",n.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},n}(Jn);Qt(LI,Od.prototype);const oz=LI;var GW=function(r){function n(t,i,a,o,l){var u=r.call(this,t,i,a)||this;return u.type=o||"value",u.position=l||"bottom",u}return R(n,r),n.prototype.isHorizontal=function(){var t=this.position;return"top"===t||"bottom"===t},n.prototype.pointToData=function(t,i){return this.coordinateSystem.pointToData(t)[0]},n}(Yo);const JW=GW;var RI=["single"],YW=function(){function r(n,t,i){this.type="single",this.dimension="single",this.dimensions=RI,this.axisPointerEnabled=!0,this.model=n,this._init(n,t,i)}return r.prototype._init=function(n,t,i){var o=new JW(this.dimension,lg(n),[0,0],n.get("type"),n.get("position"));o.onBand="category"===o.type&&n.get("boundaryGap"),o.inverse=n.get("inverse"),o.orient=n.get("orient"),n.axis=o,o.model=n,o.coordinateSystem=this,this._axis=o},r.prototype.update=function(n,t){n.eachSeries(function(i){if(i.coordinateSystem===this){var a=i.getData();De(a.mapDimensionsAll(this.dimension),function(o){this._axis.scale.unionExtentFromData(a,o)},this),th(this._axis.scale,this._axis.model)}},this)},r.prototype.resize=function(n,t){this._rect=ui({left:n.get("left"),top:n.get("top"),right:n.get("right"),bottom:n.get("bottom"),width:n.get("width"),height:n.get("height")},{width:t.getWidth(),height:t.getHeight()}),this._adjustAxis()},r.prototype.getRect=function(){return this._rect},r.prototype._adjustAxis=function(){var n=this._rect,t=this._axis,i=t.isHorizontal(),a=i?[0,n.width]:[0,n.height],o=t.reverse?1:0;t.setExtent(a[o],a[1-o]),this._updateAxisTransform(t,i?n.x:n.y)},r.prototype._updateAxisTransform=function(n,t){var i=n.getExtent(),a=i[0]+i[1],o=n.isHorizontal();n.toGlobalCoord=o?function(l){return l+t}:function(l){return a-l+t},n.toLocalCoord=o?function(l){return l-t}:function(l){return a-l+t}},r.prototype.getAxis=function(){return this._axis},r.prototype.getBaseAxis=function(){return this._axis},r.prototype.getAxes=function(){return[this._axis]},r.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},r.prototype.containPoint=function(n){var t=this.getRect(),i=this.getAxis();return"horizontal"===i.orient?i.contain(i.toLocalCoord(n[0]))&&n[1]>=t.y&&n[1]<=t.y+t.height:i.contain(i.toLocalCoord(n[1]))&&n[0]>=t.y&&n[0]<=t.y+t.height},r.prototype.pointToData=function(n){var t=this.getAxis();return[t.coordToData(t.toLocalCoord(n["horizontal"===t.orient?0:1]))]},r.prototype.dataToPoint=function(n){var t=this.getAxis(),i=this.getRect(),a=[],o="horizontal"===t.orient?0:1;return n instanceof Array&&(n=n[0]),a[o]=t.toGlobalCoord(t.dataToCoord(+n)),a[1-o]=0===o?i.y+i.height/2:i.x+i.width/2,a},r.prototype.convertToPixel=function(n,t,i){return NI(t)===this?this.dataToPoint(i):null},r.prototype.convertFromPixel=function(n,t,i){return NI(t)===this?this.pointToData(i):null},r}();function NI(r){var n=r.seriesModel,t=r.singleAxisModel;return t&&t.coordinateSystem||n&&n.coordinateSystem}const QW=YW;var KW={create:function qW(r,n){var t=[];return r.eachComponent("singleAxis",function(i,a){var o=new QW(i,r,n);o.name="single_"+a,o.resize(i,n),i.coordinateSystem=o,t.push(o)}),r.eachSeries(function(i){if("singleAxis"===i.get("coordinateSystem")){var a=i.getReferringComponents("singleAxis",_i).models[0];i.coordinateSystem=a&&a.coordinateSystem}}),t},dimensions:RI};const $W=KW;var FI=["x","y"],jW=["width","height"],XW=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return R(n,r),n.prototype.makeElOption=function(t,i,a,o,l){var u=a.axis,c=u.coordinateSystem,h=sz(c,1-fy(u)),f=c.dataToPoint(i)[0],p=o.get("type");if(p&&"none"!==p){var v=jS(o),m=eG[p](u,f,h);m.style=v,t.graphicKey=m.type,t.pointer=m}_I(i,t,az(a),a,o,l)},n.prototype.getHandleTransform=function(t,i,a){var o=az(i,{labelInside:!1});o.labelMargin=a.get(["handle","margin"]);var l=XS(i.axis,t,o);return{x:l[0],y:l[1],rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},n.prototype.updateHandleTransform=function(t,i,a,o){var l=a.axis,u=l.coordinateSystem,c=fy(l),h=sz(u,c),f=[t.x,t.y];f[c]+=i[c],f[c]=Math.min(h[1],f[c]),f[c]=Math.max(h[0],f[c]);var p=sz(u,1-c),v=(p[1]+p[0])/2,m=[v,v];return m[c]=f[c],{x:f[0],y:f[1],rotation:t.rotation,cursorPoint:m,tooltipOption:{verticalAlign:"middle"}}},n}($S),eG={line:function(r,n,t){return{type:"Line",subPixelOptimize:!0,shape:ez([n,t[0]],[n,t[1]],fy(r))}},shadow:function(r,n,t){var i=r.getBandWidth();return{type:"Rect",shape:yI([n-i/2,t[0]],[i,t[1]-t[0]],fy(r))}}};function fy(r){return r.isHorizontal()?0:1}function sz(r,n){var t=r.getRect();return[t[FI[n]],t[FI[n]]+t[jW[n]]]}const tG=XW;var nG=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.type="single",n}(oi),iG=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.init=function(t,i,a){var o=jl(t);r.prototype.init.apply(this,arguments),BI(t,o)},n.prototype.mergeOption=function(t){r.prototype.mergeOption.apply(this,arguments),BI(this.option,t)},n.prototype.getCellSize=function(){return this.option.cellSize},n.type="calendar",n.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},n}(Jn);function BI(r,n){var i,t=r.cellSize;1===(i=we(t)?t:r.cellSize=[t,t]).length&&(i[1]=i[0]);var a=_t([0,1],function(o){return function sx(r,n){return null!=r[Kl[n][0]]||null!=r[Kl[n][1]]&&null!=r[Kl[n][2]]}(n,o)&&(i[o]="auto"),null!=i[o]&&"auto"!==i[o]});il(r,n,{type:"box",ignoreSize:a})}const aG=iG;var oG=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.render=function(t,i,a){var o=this.group;o.removeAll();var l=t.coordinateSystem,u=l.getRangeInfo(),c=l.getOrient(),h=i.getLocaleModel();this._renderDayRect(t,u,o),this._renderLines(t,u,c,o),this._renderYearText(t,u,c,o),this._renderMonthText(t,h,c,o),this._renderWeekText(t,h,u,c,o)},n.prototype._renderDayRect=function(t,i,a){for(var o=t.coordinateSystem,l=t.getModel("itemStyle").getItemStyle(),u=o.getCellWidth(),c=o.getCellHeight(),h=i.start.time;h<=i.end.time;h=o.getNextNDay(h,1).time){var f=o.dataToRect([h],!1).tl,p=new Qn({shape:{x:f[0],y:f[1],width:u,height:c},cursor:"default",style:l});a.add(p)}},n.prototype._renderLines=function(t,i,a,o){var l=this,u=t.coordinateSystem,c=t.getModel(["splitLine","lineStyle"]).getLineStyle(),h=t.get(["splitLine","show"]),f=c.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var p=i.start,v=0;p.time<=i.end.time;v++){y(p.formatedDate),0===v&&(p=u.getDateInfo(i.start.y+"-"+i.start.m));var m=p.date;m.setMonth(m.getMonth()+1),p=u.getDateInfo(m)}function y(C){l._firstDayOfMonth.push(u.getDateInfo(C)),l._firstDayPoints.push(u.dataToRect([C],!1).tl);var T=l._getLinePointsOfOneWeek(t,C,a);l._tlpoints.push(T[0]),l._blpoints.push(T[T.length-1]),h&&l._drawSplitline(T,c,o)}y(u.getNextNDay(i.end.time,1).formatedDate),h&&this._drawSplitline(l._getEdgesPoints(l._tlpoints,f,a),c,o),h&&this._drawSplitline(l._getEdgesPoints(l._blpoints,f,a),c,o)},n.prototype._getEdgesPoints=function(t,i,a){var o=[t[0].slice(),t[t.length-1].slice()],l="horizontal"===a?0:1;return o[0][l]=o[0][l]-i/2,o[1][l]=o[1][l]+i/2,o},n.prototype._drawSplitline=function(t,i,a){var o=new Ia({z2:20,shape:{points:t},style:i});a.add(o)},n.prototype._getLinePointsOfOneWeek=function(t,i,a){for(var o=t.coordinateSystem,l=o.getDateInfo(i),u=[],c=0;c<7;c++){var h=o.getNextNDay(l.time,c),f=o.dataToRect([h.time],!1);u[2*h.day]=f.tl,u[2*h.day+1]=f["horizontal"===a?"bl":"tr"]}return u},n.prototype._formatterLabel=function(t,i){return Qe(t)&&t?function rx(r,n,t){return De(n,function(i,a){r=r.replace("{"+a+"}",t?ga(i):i)}),r}(t,i):Pe(t)?t(i):i.nameMap},n.prototype._yearTextPositionControl=function(t,i,a,o,l){var u=i[0],c=i[1],h=["center","bottom"];"bottom"===o?(c+=l,h=["center","top"]):"left"===o?u-=l:"right"===o?(u+=l,h=["center","top"]):c-=l;var f=0;return("left"===o||"right"===o)&&(f=Math.PI/2),{rotation:f,x:u,y:c,style:{align:h[0],verticalAlign:h[1]}}},n.prototype._renderYearText=function(t,i,a,o){var l=t.getModel("yearLabel");if(l.get("show")){var u=l.get("margin"),c=l.get("position");c||(c="horizontal"!==a?"top":"left");var h=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],f=(h[0][0]+h[1][0])/2,p=(h[0][1]+h[1][1])/2,v="horizontal"===a?0:1,m={top:[f,h[v][1]],bottom:[f,h[1-v][1]],left:[h[1-v][0],p],right:[h[v][0],p]},y=i.start.y;+i.end.y>+i.start.y&&(y=y+"-"+i.end.y);var C=l.get("formatter"),z=this._formatterLabel(C,{start:i.start.y,end:i.end.y,nameMap:y}),E=new Gn({z2:30,style:$r(l,{text:z})});E.attr(this._yearTextPositionControl(E,m[c],a,c,u)),o.add(E)}},n.prototype._monthTextPositionControl=function(t,i,a,o,l){var u="left",c="top",h=t[0],f=t[1];return"horizontal"===a?(f+=l,i&&(u="center"),"start"===o&&(c="bottom")):(h+=l,i&&(c="middle"),"start"===o&&(u="right")),{x:h,y:f,align:u,verticalAlign:c}},n.prototype._renderMonthText=function(t,i,a,o){var l=t.getModel("monthLabel");if(l.get("show")){var u=l.get("nameMap"),c=l.get("margin"),h=l.get("position"),f=l.get("align"),p=[this._tlpoints,this._blpoints];(!u||Qe(u))&&(u&&(i=vp(u)||i),u=i.get(["time","monthAbbr"])||[]);var v="start"===h?0:1,m="horizontal"===a?0:1;c="start"===h?-c:c;for(var y="center"===f,C=0;C<p[v].length-1;C++){var T=p[v][C].slice(),z=this._firstDayOfMonth[C];y&&(T[m]=(this._firstDayPoints[C][m]+p[0][C+1][m])/2);var N=l.get("formatter"),X=u[+z.m-1],ve={yyyy:z.y,yy:(z.y+"").slice(2),MM:z.m,M:+z.m,nameMap:X},ce=this._formatterLabel(N,ve),_e=new Gn({z2:30,style:Ge($r(l,{text:ce}),this._monthTextPositionControl(T,y,a,h,c))});o.add(_e)}}},n.prototype._weekTextPositionControl=function(t,i,a,o,l){var u="center",c="middle",h=t[0],f=t[1],p="start"===a;return"horizontal"===i?(h=h+o+(p?1:-1)*l[0]/2,u=p?"right":"left"):(f=f+o+(p?1:-1)*l[1]/2,c=p?"bottom":"top"),{x:h,y:f,align:u,verticalAlign:c}},n.prototype._renderWeekText=function(t,i,a,o,l){var u=t.getModel("dayLabel");if(u.get("show")){var c=t.coordinateSystem,h=u.get("position"),f=u.get("nameMap"),p=u.get("margin"),v=c.getFirstDayOfWeek();f&&!Qe(f)||(f&&(i=vp(f)||i),f=i.get(["time","dayOfWeekShort"])||_t(i.get(["time","dayOfWeekAbbr"]),function(ve){return ve[0]}));var y=c.getNextNDay(a.end.time,7-a.lweek).time,C=[c.getCellWidth(),c.getCellHeight()];p=Ht(p,Math.min(C[1],C[0])),"start"===h&&(y=c.getNextNDay(a.start.time,-(7+a.fweek)).time,p=-p);for(var T=0;T<7;T++){var N,z=c.getNextNDay(y,T),E=c.dataToRect([z.time],!1).center;N=Math.abs((T+v)%7);var X=new Gn({z2:30,style:Ge($r(u,{text:f[N]}),this._weekTextPositionControl(E,o,h,p,C))});l.add(X)}}},n.type="calendar",n}(oi);const sG=oG;var lz=864e5,lG=function(){function r(n,t,i){this.type="calendar",this.dimensions=r.dimensions,this.getDimensionsInfo=r.getDimensionsInfo,this._model=n}return r.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},r.prototype.getRangeInfo=function(){return this._rangeInfo},r.prototype.getModel=function(){return this._model},r.prototype.getRect=function(){return this._rect},r.prototype.getCellWidth=function(){return this._sw},r.prototype.getCellHeight=function(){return this._sh},r.prototype.getOrient=function(){return this._orient},r.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},r.prototype.getDateInfo=function(n){var t=(n=Aa(n)).getFullYear(),i=n.getMonth()+1,a=i<10?"0"+i:""+i,o=n.getDate(),l=o<10?"0"+o:""+o,u=n.getDay();return{y:t+"",m:a,d:l,day:u=Math.abs((u+7-this.getFirstDayOfWeek())%7),time:n.getTime(),formatedDate:t+"-"+a+"-"+l,date:n}},r.prototype.getNextNDay=function(n,t){return 0===(t=t||0)||(n=new Date(this.getDateInfo(n).time)).setDate(n.getDate()+t),this.getDateInfo(n)},r.prototype.update=function(n,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var i=this._rangeInfo.weeks||1,a=["width","height"],o=this._model.getCellSize().slice(),l=this._model.getBoxLayoutParams(),u="horizontal"===this._orient?[i,7]:[7,i];De([0,1],function(p){f(o,p)&&(l[a[p]]=o[p]*u[p])});var c={width:t.getWidth(),height:t.getHeight()},h=this._rect=ui(l,c);function f(p,v){return null!=p[v]&&"auto"!==p[v]}De([0,1],function(p){f(o,p)||(o[p]=h[a[p]]/u[p])}),this._sw=o[0],this._sh=o[1]},r.prototype.dataToPoint=function(n,t){we(n)&&(n=n[0]),null==t&&(t=!0);var i=this.getDateInfo(n),a=this._rangeInfo;if(t&&!(i.time>=a.start.time&&i.time<a.end.time+lz))return[NaN,NaN];var l=i.day,u=this._getRangeInfo([a.start.time,i.formatedDate]).nthWeek;return"vertical"===this._orient?[this._rect.x+l*this._sw+this._sw/2,this._rect.y+u*this._sh+this._sh/2]:[this._rect.x+u*this._sw+this._sw/2,this._rect.y+l*this._sh+this._sh/2]},r.prototype.pointToData=function(n){var t=this.pointToDate(n);return t&&t.time},r.prototype.dataToRect=function(n,t){var i=this.dataToPoint(n,t);return{contentShape:{x:i[0]-(this._sw-this._lineWidth)/2,y:i[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:i,tl:[i[0]-this._sw/2,i[1]-this._sh/2],tr:[i[0]+this._sw/2,i[1]-this._sh/2],br:[i[0]+this._sw/2,i[1]+this._sh/2],bl:[i[0]-this._sw/2,i[1]+this._sh/2]}},r.prototype.pointToDate=function(n){var t=Math.floor((n[0]-this._rect.x)/this._sw)+1,i=Math.floor((n[1]-this._rect.y)/this._sh)+1,a=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(i,t-1,a):this._getDateByWeeksAndDay(t,i-1,a)},r.prototype.convertToPixel=function(n,t,i){var a=ZI(t);return a===this?a.dataToPoint(i):null},r.prototype.convertFromPixel=function(n,t,i){var a=ZI(t);return a===this?a.pointToData(i):null},r.prototype.containPoint=function(n){return console.warn("Not implemented."),!1},r.prototype._initRangeOption=function(){var t,n=this._model.get("range");if(we(n)&&1===n.length&&(n=n[0]),we(n))t=n;else{var i=n.toString();if(/^\d{4}$/.test(i)&&(t=[i+"-01-01",i+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(i)){var a=this.getDateInfo(i),o=a.date;o.setMonth(o.getMonth()+1);var l=this.getNextNDay(o,-1);t=[a.formatedDate,l.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(i)&&(t=[i,i])}if(!t)return n;var u=this._getRangeInfo(t);return u.start.time>u.end.time&&t.reverse(),t},r.prototype._getRangeInfo=function(n){var i,t=[this.getDateInfo(n[0]),this.getDateInfo(n[1])];t[0].time>t[1].time&&(i=!0,t.reverse());var a=Math.floor(t[1].time/lz)-Math.floor(t[0].time/lz)+1,o=new Date(t[0].time),l=o.getDate(),u=t[1].date.getDate();o.setDate(l+a-1);var c=o.getDate();if(c!==u)for(var h=o.getTime()-t[1].time>0?1:-1;(c=o.getDate())!==u&&(o.getTime()-t[1].time)*h>0;)a-=h,o.setDate(c-h);var f=Math.floor((a+t[0].day+6)/7),p=i?1-f:f-1;return i&&t.reverse(),{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:a,weeks:f,nthWeek:p,fweek:t[0].day,lweek:t[1].day}},r.prototype._getDateByWeeksAndDay=function(n,t,i){var a=this._getRangeInfo(i);if(n>a.weeks||0===n&&t<a.fweek||n===a.weeks&&t>a.lweek)return null;var o=7*(n-1)-a.fweek+t,l=new Date(a.start.time);return l.setDate(+a.start.d+o),this.getDateInfo(l)},r.create=function(n,t){var i=[];return n.eachComponent("calendar",function(a){var o=new r(a,n,t);i.push(o),a.coordinateSystem=o}),n.eachSeries(function(a){"calendar"===a.get("coordinateSystem")&&(a.coordinateSystem=i[a.get("calendarIndex")||0])}),i},r.dimensions=["time","value"],r}();function ZI(r){var n=r.calendarModel,t=r.seriesModel;return n?n.coordinateSystem:t?t.coordinateSystem:null}const uG=lG;function UI(r,n){var t;return De(n,function(i){null!=r[i]&&"auto"!==r[i]&&(t=!0)}),t}var VI=["transition","enterFrom","leaveTo"],fG=VI.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function py(r,n,t){if(t&&(!r[t]&&n[t]&&(r[t]={}),r=r[t],n=n[t]),r&&n)for(var i=t?VI:fG,a=0;a<i.length;a++){var o=i[a];null==r[o]&&null!=n[o]&&(r[o]=n[o])}}var gG=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.preventAutoZ=!0,t}return R(n,r),n.prototype.mergeOption=function(t,i){var a=this.option.elements;this.option.elements=null,r.prototype.mergeOption.call(this,t,i),this.option.elements=a},n.prototype.optionUpdated=function(t,i){var a=this.option,o=(i?a:t).elements,l=a.elements=i?[]:a.elements,u=[];this._flatten(o,u,null);var c=Nv(l,u,"normalMerge"),h=this._elOptionsToUpdate=[];De(c,function(f,p){var v=f.newOption;!v||(h.push(v),function hG(r,n){var t=r.existing;if(n.id=r.keyInfo.id,!n.type&&t&&(n.type=t.type),null==n.parentId){var i=n.parentOption;i?n.parentId=i.id:t&&(n.parentId=t.parentId)}n.parentOption=null}(f,v),function dG(r,n,t){var i=Ge({},t),a=r[n],o=t.$action||"merge";"merge"===o?a?(Zt(a,i,!0),il(a,i,{ignoreSize:!0}),a_(t,a),py(t,a),py(t,a,"shape"),py(t,a,"style"),py(t,a,"extra"),t.clipPath=a.clipPath):r[n]=i:"replace"===o?r[n]=i:"remove"===o&&a&&(r[n]=null)}(l,p,v),function pG(r,n){if(r&&(r.hv=n.hv=[UI(n,["left","right"]),UI(n,["top","bottom"])],"group"===r.type)){var t=r,i=n;null==t.width&&(t.width=i.width=0),null==t.height&&(t.height=i.height=0)}}(l[p],v))},this),a.elements=_n(l,function(f){return f&&delete f.$action,null!=f})},n.prototype._flatten=function(t,i,a){De(t,function(o){if(o){a&&(o.parentOption=a),i.push(o);var l=o.children;"group"===o.type&&l&&this._flatten(l,i,o),delete o.children}},this)},n.prototype.useElOptionsToUpdate=function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t},n.type="graphic",n.defaultOption={elements:[]},n}(Jn),HI={path:null,compoundPath:null,group:hn,image:ki,text:Gn},jo=Xn(),vG=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.init=function(){this._elMap=Kt()},n.prototype.render=function(t,i,a){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,a)},n.prototype._updateElements=function(t){var i=t.useElOptionsToUpdate();if(i){var a=this._elMap,o=this.group,l=t.get("z"),u=t.get("zlevel");De(i,function(c){var h=Si(c.id,null),f=null!=h?a.get(h):null,p=Si(c.parentId,null),v=null!=p?a.get(p):o,m=c.type,y=c.style;"text"===m&&y&&c.hv&&c.hv[1]&&(y.textVerticalAlign=y.textBaseline=y.verticalAlign=y.align=null);var C=c.textContent,T=c.textConfig;if(y&&JP(y,m,!!T,!!C)){var z=YP(y,m,!0);!T&&z.textConfig&&(T=c.textConfig=z.textConfig),!C&&z.textContent&&(C=z.textContent)}var E=function mG(r){return r=Ge({},r),De(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(i_),function(n){delete r[n]}),r}(c),N=c.$action||"merge",X="merge"===N,ve="replace"===N;if(X){var _e=f;(ce=!f)?_e=WI(h,v,c.type,a):(_e&&(jo(_e).isNew=!1),rI(_e)),_e&&(oy(_e,E,t,{isInit:ce}),GI(_e,c,l,u))}else if(ve){gy(f,c,a,t);var ze=WI(h,v,c.type,a);ze&&(oy(ze,E,t,{isInit:!0}),GI(ze,c,l,u))}else"remove"===N&&(XP(f,c),gy(f,c,a,t));var Ee=a.get(h);if(Ee&&C)if(X){var Le=Ee.getTextContent();Le?Le.attr(C):Ee.setTextContent(new Gn(C))}else ve&&Ee.setTextContent(new Gn(C));if(Ee){var ke=c.clipPath;if(ke){var Ue=ke.type,He=void 0,ce=!1;if(X){var Ke=Ee.getClipPath();He=(ce=!Ke||jo(Ke).type!==Ue)?uz(Ue):Ke}else ve&&(ce=!0,He=uz(Ue));Ee.setClipPath(He),oy(He,ke,t,{isInit:ce}),ly(He,ke.keyframeAnimation,t)}var nt=jo(Ee);Ee.setTextConfig(T),nt.option=c,function _G(r,n,t){var i=dn(r).eventData;!r.silent&&!r.ignore&&!i&&(i=dn(r).eventData={componentType:"graphic",componentIndex:n.componentIndex,name:r.name}),i&&(i.info=t.info)}(Ee,t,c),Td({el:Ee,componentModel:t,itemName:Ee.name,itemTooltipOption:c.tooltip}),ly(Ee,c.keyframeAnimation,t)}})}},n.prototype._relocate=function(t,i){for(var a=t.option.elements,o=this.group,l=this._elMap,u=i.getWidth(),c=i.getHeight(),h=["x","y"],f=0;f<a.length;f++)if((m=null!=(v=Si((p=a[f]).id,null))?l.get(v):null)&&m.isGroup){var C=(y=m.parent)===o,T=jo(m),z=jo(y);T.width=Ht(T.option.width,C?u:z.width)||0,T.height=Ht(T.option.height,C?c:z.height)||0}for(f=a.length-1;f>=0;f--){var p,v,m;if(m=null!=(v=Si((p=a[f]).id,null))?l.get(v):null){z=jo(y=m.parent);var y,N={},X=dd(m,p,y===o?{width:u,height:c}:{width:z.width,height:z.height},null,{hv:p.hv,boundingMode:p.bounding},N);if(!jo(m).isNew&&X){for(var ve=p.transition,ce={},_e=0;_e<h.length;_e++){var ze=h[_e],Ee=N[ze];ve&&(Ch(ve)||Ye(ve,ze)>=0)?ce[ze]=Ee:m[ze]=Ee}Kn(m,ce,t,0)}else m.attr(N)}}},n.prototype._clear=function(){var t=this,i=this._elMap;i.each(function(a){gy(a,jo(a).option,i,t._lastGraphicModel)}),this._elMap=Kt()},n.prototype.dispose=function(){this._clear()},n.type="graphic",n}(oi);function uz(r){var t=new(qt(HI,r)?HI[r]:J_(r))({});return jo(t).type=r,t}function WI(r,n,t,i){var a=uz(t);return n.add(a),i.set(r,a),jo(a).id=r,jo(a).isNew=!0,a}function gy(r,n,t,i){r&&r.parent&&("group"===r.type&&r.traverse(function(o){gy(o,n,t,i)}),sy(r,n,i),t.removeKey(jo(r).id))}function GI(r,n,t,i){if(!r.isGroup){var a=r;a.cursor=$t(n.cursor,$a.prototype.cursor),a.z=$t(n.z,t||0),a.zlevel=$t(n.zlevel,i||0);var o=n.z2;null!=o&&(a.z2=o||0)}De(gn(n),function(l){var u=n[l];0===l.indexOf("on")&&Pe(u)&&(r[l]=u)}),r.draggable=n.draggable,null!=n.name&&(r.name=n.name),null!=n.id&&(r.id=n.id)}var JI=["x","y","radius","angle","single"],CG=["cartesian2d","polar","singleAxis"];function ac(r){return r+"Axis"}function YI(r){var n=r.ecModel,t={infoList:[],infoMap:Kt()};return r.eachTargetAxis(function(i,a){var o=n.getComponent(ac(i),a);if(o){var l=o.getCoordSysModel();if(l){var u=l.uid,c=t.infoMap.get(u);c||(t.infoList.push(c={model:l,axisModels:[]}),t.infoMap.set(u,c)),c.axisModels.push(o)}}}),t}var cz=function(){function r(){this.indexList=[],this.indexMap=[]}return r.prototype.add=function(n){this.indexMap[n]||(this.indexList.push(n),this.indexMap[n]=!0)},r}(),bG=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t._autoThrottle=!0,t._noTarget=!0,t._rangePropMode=["percent","percent"],t}return R(n,r),n.prototype.init=function(t,i,a){var o=QI(t);this.settledOption=o,this.mergeDefaultAndTheme(t,a),this._doInit(o)},n.prototype.mergeOption=function(t){var i=QI(t);Zt(this.option,t,!0),Zt(this.settledOption,i,!0),this._doInit(i)},n.prototype._doInit=function(t){var i=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var a=this.settledOption;De([["start","startValue"],["end","endValue"]],function(o,l){"value"===this._rangePropMode[l]&&(i[o[0]]=a[o[0]]=null)},this),this._resetTarget()},n.prototype._resetTarget=function(){var t=this.get("orient",!0),i=this._targetAxisInfoMap=Kt();this._fillSpecifiedTargetAxis(i)?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(i,this._orient)),this._noTarget=!0,i.each(function(o){o.indexList.length&&(this._noTarget=!1)},this)},n.prototype._fillSpecifiedTargetAxis=function(t){var i=!1;return De(JI,function(a){var o=this.getReferringComponents(ac(a),z1);if(o.specified){i=!0;var l=new cz;De(o.models,function(u){l.add(u.componentIndex)}),t.set(a,l)}},this),i},n.prototype._fillAutoTargetAxisByOrient=function(t,i){var a=this.ecModel,o=!0;if(o){var l="vertical"===i?"y":"x";c(a.findComponents({mainType:l+"Axis"}),l)}function c(h,f){var p=h[0];if(p){var v=new cz;if(v.add(p.componentIndex),t.set(f,v),o=!1,"x"===f||"y"===f){var m=p.getReferringComponents("grid",_i).models[0];m&&De(h,function(y){p.componentIndex!==y.componentIndex&&m===y.getReferringComponents("grid",_i).models[0]&&v.add(y.componentIndex)})}}}o&&c(a.findComponents({mainType:"singleAxis",filter:function(f){return f.get("orient",!0)===i}}),"single"),o&&De(JI,function(h){if(o){var f=a.findComponents({mainType:ac(h),filter:function(v){return"category"===v.get("type",!0)}});if(f[0]){var p=new cz;p.add(f[0].componentIndex),t.set(h,p),o=!1}}},this)},n.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(i){!t&&(t=i)},this),"y"===t?"vertical":"horizontal"},n.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var i=this.ecModel.option;this.option.throttle=i.animation&&i.animationDurationUpdate>0?100:20}},n.prototype._updateRangeUse=function(t){var i=this._rangePropMode,a=this.get("rangeMode");De([["start","startValue"],["end","endValue"]],function(o,l){var u=null!=t[o[0]],c=null!=t[o[1]];u&&!c?i[l]="percent":!u&&c?i[l]="value":a?i[l]=a[l]:u&&(i[l]="percent")})},n.prototype.noTarget=function(){return this._noTarget},n.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(i,a){null==t&&(t=this.ecModel.getComponent(ac(i),a))},this),t},n.prototype.eachTargetAxis=function(t,i){this._targetAxisInfoMap.each(function(a,o){De(a.indexList,function(l){t.call(i,o,l)})})},n.prototype.getAxisProxy=function(t,i){var a=this.getAxisModel(t,i);if(a)return a.__dzAxisProxy},n.prototype.getAxisModel=function(t,i){var a=this._targetAxisInfoMap.get(t);if(a&&a.indexMap[i])return this.ecModel.getComponent(ac(t),i)},n.prototype.setRawRange=function(t){var i=this.option,a=this.settledOption;De([["start","startValue"],["end","endValue"]],function(o){(null!=t[o[0]]||null!=t[o[1]])&&(i[o[0]]=a[o[0]]=t[o[0]],i[o[1]]=a[o[1]]=t[o[1]])},this),this._updateRangeUse(t)},n.prototype.setCalculatedRange=function(t){var i=this.option;De(["start","startValue","end","endValue"],function(a){i[a]=t[a]})},n.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},n.prototype.getValueRange=function(t,i){if(null!=t||null!=i)return this.getAxisProxy(t,i).getDataValueWindow();var a=this.findRepresentativeAxisProxy();return a?a.getDataValueWindow():void 0},n.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var i,a=this._targetAxisInfoMap.keys(),o=0;o<a.length;o++)for(var l=a[o],u=this._targetAxisInfoMap.get(l),c=0;c<u.indexList.length;c++){var h=this.getAxisProxy(l,u.indexList[c]);if(h.hostedBy(this))return h;i||(i=h)}return i},n.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},n.prototype.getOrient=function(){return this._orient},n.type="dataZoom",n.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],n.defaultOption={z:4,filterMode:"filter",start:0,end:100},n}(Jn);function QI(r){var n={};return De(["start","end","startValue","endValue","throttle"],function(t){r.hasOwnProperty(t)&&(n[t]=r[t])}),n}const Zg=bG;var SG=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.type="dataZoom.select",n}(Zg);const zG=SG;var wG=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.render=function(t,i,a,o){this.dataZoomModel=t,this.ecModel=i,this.api=a},n.type="dataZoom",n}(oi);const hz=wG;var DG=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.type="dataZoom.select",n}(hz);const AG=DG;var Gd=De,qI=da,EG=function(){function r(n,t,i,a){this._dimName=n,this._axisIndex=t,this.ecModel=a,this._dataZoomModel=i}return r.prototype.hostedBy=function(n){return this._dataZoomModel===n},r.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},r.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},r.prototype.getTargetSeriesModels=function(){var n=[];return this.ecModel.eachSeries(function(t){if(function xG(r){var n=r.get("coordinateSystem");return Ye(CG,n)>=0}(t)){var i=ac(this._dimName),a=t.getReferringComponents(i,_i).models[0];a&&this._axisIndex===a.componentIndex&&n.push(t)}},this),n},r.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},r.prototype.getMinMaxSpan=function(){return Nt(this._minMaxSpan)},r.prototype.calculateDataWindow=function(n){var h,t=this._dataExtent,a=this.getAxisModel().axis.scale,o=this._dataZoomModel.getRangePropMode(),l=[0,100],u=[],c=[];Gd(["start","end"],function(v,m){var y=n[v],C=n[v+"Value"];"percent"===o[m]?(null==y&&(y=l[m]),C=a.parse(mr(y,l,t))):(h=!0,y=mr(C=null==C?t[m]:a.parse(C),t,l)),c[m]=C,u[m]=y}),qI(c),qI(u);var f=this._minMaxSpan;function p(v,m,y,C,T){var z=T?"Span":"ValueSpan";mh(0,v,y,"all",f["min"+z],f["max"+z]);for(var E=0;E<2;E++)m[E]=mr(v[E],y,C,!0),T&&(m[E]=a.parse(m[E]))}return h?p(c,u,t,l,!1):p(u,c,l,t,!0),{valueWindow:c,percentWindow:u}},r.prototype.reset=function(n){if(n===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=function MG(r,n,t){var i=[1/0,-1/0];Gd(t,function(l){!function F3(r,n,t){n&&De(S0(n,t),function(i){var a=n.getApproximateExtent(i);a[0]<r[0]&&(r[0]=a[0]),a[1]>r[1]&&(r[1]=a[1])})}(i,l.getData(),n)});var a=r.getAxisModel(),o=rE(a.axis.scale,a,i).calculate();return[o.min,o.max]}(this,this._dimName,t),this._updateMinMaxSpan();var i=this.calculateDataWindow(n.settledOption);this._valueWindow=i.valueWindow,this._percentWindow=i.percentWindow,this._setAxisModel()}},r.prototype.filterData=function(n,t){if(n===this._dataZoomModel){var i=this._dimName,a=this.getTargetSeriesModels(),o=n.get("filterMode"),l=this._valueWindow;"none"!==o&&Gd(a,function(c){var h=c.getData(),f=h.mapDimensionsAll(i);if(f.length){if("weakFilter"===o){var p=h.getStore(),v=_t(f,function(m){return h.getDimensionIndex(m)},h);h.filterSelf(function(m){for(var y,C,T,z=0;z<f.length;z++){var E=p.get(v[z],m),N=!isNaN(E),X=E<l[0],ve=E>l[1];if(N&&!X&&!ve)return!0;N&&(T=!0),X&&(y=!0),ve&&(C=!0)}return T&&y&&C})}else Gd(f,function(m){if("empty"===o)c.setData(h=h.map(m,function(C){return function u(c){return c>=l[0]&&c<=l[1]}(C)?C:NaN}));else{var y={};y[m]=l,h.selectRange(y)}});Gd(f,function(m){h.setApproximateExtent(l,m)})}})}},r.prototype._updateMinMaxSpan=function(){var n=this._minMaxSpan={},t=this._dataZoomModel,i=this._dataExtent;Gd(["min","max"],function(a){var o=t.get(a+"Span"),l=t.get(a+"ValueSpan");null!=l&&(l=this.getAxisModel().axis.scale.parse(l)),null!=l?o=mr(i[0]+l,i,[0,100],!0):null!=o&&(l=mr(o,[0,100],i,!0)-i[0]),n[a+"Span"]=o,n[a+"ValueSpan"]=l},this)},r.prototype._setAxisModel=function(){var n=this.getAxisModel(),t=this._percentWindow,i=this._valueWindow;if(t){var a=Wh(i,[0,500]);a=Math.min(a,20);var o=n.axis.scale.rawExtentInfo;0!==t[0]&&o.setDeterminedMinMax("min",+i[0].toFixed(a)),100!==t[1]&&o.setDeterminedMinMax("max",+i[1].toFixed(a)),o.freeze()}},r}();const OG=EG;var PG={getTargetSeries:function(r){function n(a){r.eachComponent("dataZoom",function(o){o.eachTargetAxis(function(l,u){var c=r.getComponent(ac(l),u);a(l,u,c,o)})})}n(function(a,o,l,u){l.__dzAxisProxy=null});var t=[];n(function(a,o,l,u){l.__dzAxisProxy||(l.__dzAxisProxy=new OG(a,o,u,r),t.push(l.__dzAxisProxy))});var i=Kt();return De(t,function(a){De(a.getTargetSeriesModels(),function(o){i.set(o.uid,o)})}),i},overallReset:function(r,n){r.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(i,a){t.getAxisProxy(i,a).reset(t)}),t.eachTargetAxis(function(i,a){t.getAxisProxy(i,a).filterData(t,n)})}),r.eachComponent("dataZoom",function(t){var i=t.findRepresentativeAxisProxy();if(i){var a=i.getDataPercentWindow(),o=i.getDataValueWindow();t.setCalculatedRange({start:a[0],end:a[1],startValue:o[0],endValue:o[1]})}})}};const IG=PG;var KI=!1;function dz(r){KI||(KI=!0,r.registerProcessor(r.PRIORITY.PROCESSOR.FILTER,IG),function kG(r){r.registerAction("dataZoom",function(n,t){De(function TG(r,n){var o,t=Kt(),i=[],a=Kt();r.eachComponent({mainType:"dataZoom",query:n},function(f){a.get(f.uid)||u(f)});do{o=!1,r.eachComponent("dataZoom",l)}while(o);function l(f){!a.get(f.uid)&&function c(f){var p=!1;return f.eachTargetAxis(function(v,m){var y=t.get(v);y&&y[m]&&(p=!0)}),p}(f)&&(u(f),o=!0)}function u(f){a.set(f.uid,!0),i.push(f),function h(f){f.eachTargetAxis(function(p,v){(t.get(p)||t.set(p,[]))[v]=!0})}(f)}return i}(t,n),function(a){a.setRawRange({start:n.start,end:n.end,startValue:n.startValue,endValue:n.endValue})})})}(r),r.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function LG(r){r.registerComponentModel(zG),r.registerComponentView(AG),dz(r)}var Xo=function r(){},$I={};function Jd(r,n){$I[r]=n}function jI(r){return $I[r]}var RG=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.optionUpdated=function(){r.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;De(this.option.feature,function(i,a){var o=jI(a);o&&(o.getDefaultOption&&(o.defaultOption=o.getDefaultOption(t)),Zt(i,o.defaultOption))})},n.type="toolbox",n.layoutMode={type:"box",ignoreSize:!0},n.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},n}(Jn);const NG=RG;function XI(r,n){var t=Ql(n.get("padding")),i=n.getItemStyle(["color","opacity"]);return i.fill=n.get("backgroundColor"),new Qn({shape:{x:r.x-t[3],y:r.y-t[0],width:r.width+t[1]+t[3],height:r.height+t[0]+t[2],r:n.get("borderRadius")},style:i,silent:!0,z2:-1})}var BG=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return R(n,r),n.prototype.render=function(t,i,a,o){var l=this.group;if(l.removeAll(),t.get("show")){var u=+t.get("itemSize"),c="vertical"===t.get("orient"),h=t.get("feature")||{},f=this._features||(this._features={}),p=[];De(h,function(y,C){p.push(C)}),new Xl(this._featureNames||[],p).add(v).update(v).remove(yt(v,null)).execute(),this._featureNames=p,function FG(r,n,t){var i=n.getBoxLayoutParams(),a=n.get("padding"),o={width:t.getWidth(),height:t.getHeight()},l=ui(i,o,a);$l(n.get("orient"),r,n.get("itemGap"),l.width,l.height),dd(r,i,o,a)}(l,t,a),l.add(XI(l.getBoundingRect(),t)),c||l.eachChild(function(y){var C=y.__title,T=y.ensureState("emphasis"),z=T.textConfig||(T.textConfig={}),E=y.getTextContent(),N=E&&E.ensureState("emphasis");if(N&&!Pe(N)&&C){var X=N.style||(N.style={}),ve=_c(C,Gn.makeFont(X)),ce=y.x+l.x,ze=!1;y.y+l.y+u+ve.height>a.getHeight()&&(z.position="top",ze=!0);var Ee=ze?-5-ve.height:u+10;ce+ve.width/2>a.getWidth()?(z.position=["100%",Ee],X.align="right"):ce-ve.width/2<0&&(z.position=[0,Ee],X.align="left")}})}function v(y,C){var X,T=p[y],z=p[C],E=h[T],N=new Or(E,t,t.ecModel);if(o&&null!=o.newTitle&&o.featureName===T&&(E.title=o.newTitle),T&&!z){if(function ZG(r){return 0===r.indexOf("my")}(T))X={onclick:N.option.onclick,featureName:T};else{var ve=jI(T);if(!ve)return;X=new ve}f[T]=X}else if(!(X=f[z]))return;X.uid=Eu("toolbox-feature"),X.model=N,X.ecModel=i,X.api=a;var ce=X instanceof Xo;T||!z?!N.get("show")||ce&&X.unusable?ce&&X.remove&&X.remove(i,a):(function m(y,C,T){var ve,ce,z=y.getModel("iconStyle"),E=y.getModel(["emphasis","iconStyle"]),N=C instanceof Xo&&C.getIcons?C.getIcons():y.get("icon"),X=y.get("title")||{};Qe(N)?(ve={})[T]=N:ve=N,Qe(X)?(ce={})[T]=X:ce=X;var _e=y.iconPaths={};De(ve,function(ze,Ee){var Le=xd(ze,{},{x:-u/2,y:-u/2,width:u,height:u});Le.setStyle(z.getItemStyle()),Le.ensureState("emphasis").style=E.getItemStyle();var Ue=new Gn({style:{text:ce[Ee],align:E.get("textAlign"),borderRadius:E.get("textBorderRadius"),padding:E.get("textPadding"),fill:null},ignore:!0});Le.setTextContent(Ue),Td({el:Le,componentModel:t,itemName:Ee,formatterParamsExtra:{title:ce[Ee]}}),Le.__title=ce[Ee],Le.on("mouseover",function(){var He=E.getItemStyle(),Ke=c?null==t.get("right")&&"right"!==t.get("left")?"right":"left":null==t.get("bottom")&&"bottom"!==t.get("top")?"bottom":"top";Ue.setStyle({fill:E.get("textFill")||He.fill||He.stroke||"#000",backgroundColor:E.get("textBackgroundColor")}),Le.setTextConfig({position:E.get("textPosition")||Ke}),Ue.ignore=!t.get("showTitle"),a.enterEmphasis(this)}).on("mouseout",function(){"emphasis"!==y.get(["iconStatus",Ee])&&a.leaveEmphasis(this),Ue.hide()}),("emphasis"===y.get(["iconStatus",Ee])?gs:vs)(Le),l.add(Le),Le.on("click",qe(C.onclick,C,i,a,Ee)),_e[Ee]=Le})}(N,X,T),N.setIconStatus=function(_e,ze){var Ee=this.option,Le=this.iconPaths;Ee.iconStatus=Ee.iconStatus||{},Ee.iconStatus[_e]=ze,Le[_e]&&("emphasis"===ze?gs:vs)(Le[_e])},X instanceof Xo&&X.render&&X.render(N,i,a,o)):ce&&X.dispose&&X.dispose(i,a)}},n.prototype.updateView=function(t,i,a,o){De(this._features,function(l){l instanceof Xo&&l.updateView&&l.updateView(l.model,i,a,o)})},n.prototype.remove=function(t,i){De(this._features,function(a){a instanceof Xo&&a.remove&&a.remove(t,i)}),this.group.removeAll()},n.prototype.dispose=function(t,i){De(this._features,function(a){a instanceof Xo&&a.dispose&&a.dispose(t,i)})},n.type="toolbox",n}(oi);const UG=BG;var VG=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return R(n,r),n.prototype.onclick=function(t,i){var a=this.model,o=a.get("name")||t.get("title.0.text")||"echarts",l="svg"===i.getZr().painter.getType(),u=l?"svg":a.get("type",!0)||"png",c=i.getConnectedDataURL({type:u,backgroundColor:a.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:a.get("connectedBackgroundColor"),excludeComponents:a.get("excludeComponents"),pixelRatio:a.get("pixelRatio")}),h=gt.browser;if(Pe(MouseEvent)&&(h.newEdge||!h.ie&&!h.edge)){var f=document.createElement("a");f.download=o+"."+u,f.target="_blank",f.href=c;var p=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});f.dispatchEvent(p)}else if(window.navigator.msSaveOrOpenBlob||l){var v=c.split(","),m=v[0].indexOf("base64")>-1,y=l?decodeURIComponent(v[1]):v[1];m&&(y=window.atob(y));var C=o+"."+u;if(window.navigator.msSaveOrOpenBlob){for(var T=y.length,z=new Uint8Array(T);T--;)z[T]=y.charCodeAt(T);var E=new Blob([z]);window.navigator.msSaveOrOpenBlob(E,C)}else{var N=document.createElement("iframe");document.body.appendChild(N);var X=N.contentWindow,ve=X.document;ve.open("image/svg+xml","replace"),ve.write(y),ve.close(),X.focus(),ve.execCommand("SaveAs",!0,C),document.body.removeChild(N)}}else{var ce=a.get("lang"),_e='<body style="margin:0;"><img src="'+c+'" style="max-width:100%;" title="'+(ce&&ce[0]||"")+'" /></body>',ze=window.open();ze.document.write(_e),ze.document.title=o}},n.getDefaultOption=function(t){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},n}(Xo);const HG=VG;var ek="__ec_magicType_stack__",WG=[["line","bar"],["stack"]],GG=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return R(n,r),n.prototype.getIcons=function(){var t=this.model,i=t.get("icon"),a={};return De(t.get("type"),function(o){i[o]&&(a[o]=i[o])}),a},n.getDefaultOption=function(t){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},n.prototype.onclick=function(t,i,a){var o=this.model,l=o.get(["seriesIndex",a]);if(tk[a]){var u={series:[]};De(WG,function(p){Ye(p,a)>=0&&De(p,function(v){o.setIconStatus(v,"normal")})}),o.setIconStatus(a,"emphasis"),t.eachComponent({mainType:"series",query:null==l?null:{seriesIndex:l}},function(p){var y=tk[a](p.subType,p.id,p,o);y&&(Dt(y,p.option),u.series.push(y));var C=p.coordinateSystem;if(C&&"cartesian2d"===C.type&&("line"===a||"bar"===a)){var T=C.getAxesByScale("ordinal")[0];if(T){var E=T.dim+"Axis",X=p.getReferringComponents(E,_i).models[0].componentIndex;u[E]=u[E]||[];for(var ve=0;ve<=X;ve++)u[E][X]=u[E][X]||{};u[E][X].boundaryGap="bar"===a}}});var h,f=a;"stack"===a&&(h=Zt({stack:o.option.title.tiled,tiled:o.option.title.stack},o.option.title),"emphasis"!==o.get(["iconStatus",a])&&(f="tiled")),i.dispatchAction({type:"changeMagicType",currentType:f,newOption:u,newTitle:h,featureName:"magicType"})}},n}(Xo),tk={line:function(r,n,t,i){if("bar"===r)return Zt({id:n,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},i.get(["option","line"])||{},!0)},bar:function(r,n,t,i){if("line"===r)return Zt({id:n,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},i.get(["option","bar"])||{},!0)},stack:function(r,n,t,i){var a=t.get("stack")===ek;if("line"===r||"bar"===r)return i.setIconStatus("stack",a?"normal":"emphasis"),Zt({id:n,stack:a?"":ek},i.get(["option","stack"])||{},!0)}};Ss({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(r,n){n.mergeOption(r.newOption)});const JG=GG;var vy=new Array(60).join("-");function QG(r){var n=[];return De(r,function(t,i){var a=t.categoryAxis,l=t.valueAxis.dim,u=[" "].concat(_t(t.series,function(m){return m.name})),c=[a.model.getCategories()];De(t.series,function(m){var y=m.getRawData();c.push(m.getRawData().mapArray(y.mapDimension(l),function(C){return C}))});for(var h=[u.join("\t")],f=0;f<c[0].length;f++){for(var p=[],v=0;v<c.length;v++)p.push(c[v][f]);h.push(p.join("\t"))}n.push(h.join("\n"))}),n.join("\n\n"+vy+"\n\n")}function qG(r){return _t(r,function(n){var t=n.getRawData(),i=[n.name],a=[];return t.each(t.dimensions,function(){for(var o=arguments.length,l=arguments[o-1],u=t.getName(l),c=0;c<o-1;c++)a[c]=arguments[c];i.push((u?u+"\t":"")+a.join("\t"))}),i.join("\n")}).join("\n\n"+vy+"\n\n")}function my(r){return r.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var fz=new RegExp("[\t]+","g");var tJ=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return R(n,r),n.prototype.onclick=function(t,i){setTimeout(function(){i.dispatchAction({type:"hideTip"})});var a=i.getDom(),o=this.model;this._dom&&a.removeChild(this._dom);var l=document.createElement("div");l.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",l.style.backgroundColor=o.get("backgroundColor")||"#fff";var u=document.createElement("h4"),c=o.get("lang")||[];u.innerHTML=c[0]||o.get("title"),u.style.cssText="margin:10px 20px",u.style.color=o.get("textColor");var h=document.createElement("div"),f=document.createElement("textarea");h.style.cssText="overflow:auto";var p=o.get("optionToContent"),v=o.get("contentToOption"),m=function KG(r){var n=function YG(r){var n={},t=[],i=[];return r.eachRawSeries(function(a){var o=a.coordinateSystem;if(!o||"cartesian2d"!==o.type&&"polar"!==o.type)t.push(a);else{var l=o.getBaseAxis();if("category"===l.type){var u=l.dim+"_"+l.index;n[u]||(n[u]={categoryAxis:l,valueAxis:o.getOtherAxis(l),series:[]},i.push({axisDim:l.dim,axisIndex:l.index})),n[u].series.push(a)}else t.push(a)}}),{seriesGroupByCategoryAxis:n,other:t,meta:i}}(r);return{value:_n([QG(n.seriesGroupByCategoryAxis),qG(n.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join("\n\n"+vy+"\n\n"),meta:n.meta}}(t);if(Pe(p)){var y=p(i.getOption());Qe(y)?h.innerHTML=y:Ft(y)&&h.appendChild(y)}else{f.readOnly=o.get("readOnly");var C=f.style;C.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",C.color=o.get("textColor"),C.borderColor=o.get("textareaBorderColor"),C.backgroundColor=o.get("textareaColor"),f.value=m.value,h.appendChild(f)}var T=m.meta,z=document.createElement("div");z.style.cssText="position:absolute;bottom:5px;left:0;right:0";var E="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",N=document.createElement("div"),X=document.createElement("div");E+=";background-color:"+o.get("buttonColor"),E+=";color:"+o.get("buttonTextColor");var ve=this;function ce(){a.removeChild(l),ve._dom=null}pr(N,"click",ce),pr(X,"click",function(){if(null==v&&null!=p||null!=v&&null==p)ce();else{var _e;try{_e=Pe(v)?v(h,i.getOption()):function eJ(r,n){var t=r.split(new RegExp("\n*"+vy+"\n*","g")),i={series:[]};return De(t,function(a,o){if(function $G(r){if(r.slice(0,r.indexOf("\n")).indexOf("\t")>=0)return!0}(a)){var l=function jG(r){for(var n=r.split(/\n+/g),i=[],a=_t(my(n.shift()).split(fz),function(c){return{name:c,data:[]}}),o=0;o<n.length;o++){var l=my(n[o]).split(fz);i.push(l.shift());for(var u=0;u<l.length;u++)a[u]&&(a[u].data[o]=l[u])}return{series:a,categories:i}}(a),u=n[o],c=u.axisDim+"Axis";u&&(i[c]=i[c]||[],i[c][u.axisIndex]={data:l.categories},i.series=i.series.concat(l.series))}else l=function XG(r){for(var n=r.split(/\n+/g),t=my(n.shift()),i=[],a=0;a<n.length;a++){var o=my(n[a]);if(o){var l=o.split(fz),u="",c=void 0,h=!1;isNaN(l[0])?(h=!0,u=l[0],l=l.slice(1),i[a]={name:u,value:[]},c=i[a].value):c=i[a]=[];for(var f=0;f<l.length;f++)c.push(+l[f]);1===c.length&&(h?i[a].value=c[0]:i[a]=c[0])}}return{name:t,data:i}}(a),i.series.push(l)}),i}(f.value,T)}catch(ze){throw ce(),new Error("Data view format error "+ze)}_e&&i.dispatchAction({type:"changeDataView",newOption:_e}),ce()}}),N.innerHTML=c[1],X.innerHTML=c[2],X.style.cssText=N.style.cssText=E,!o.get("readOnly")&&z.appendChild(X),z.appendChild(N),l.appendChild(u),l.appendChild(h),l.appendChild(z),h.style.height=a.clientHeight-80+"px",a.appendChild(l),this._dom=l},n.prototype.remove=function(t,i){this._dom&&i.getDom().removeChild(this._dom)},n.prototype.dispose=function(t,i){this.remove(t,i)},n.getDefaultOption=function(t){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},n}(Xo);function nJ(r,n){return _t(r,function(t,i){var a=n&&n[i];if(tt(a)&&!we(a)){tt(t)&&!we(t)||(t={value:t});var l=null!=a.name&&null==t.name;return t=Dt(t,a),l&&delete t.name,t}return t})}Ss({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(r,n){var t=[];De(r.newOption.series,function(i){var a=n.getSeriesByName(i.name)[0];if(a){var o=a.get("data");t.push({name:i.name,data:nJ(i.data,o)})}else t.push(Ge({type:"scatter"},i))}),n.mergeOption(Dt({series:t},r.newOption))});const rJ=tJ;var nk=De,rk=Xn();function pz(r){var n=rk(r);return n.snapshots||(n.snapshots=[{}]),n.snapshots}var lJ=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return R(n,r),n.prototype.onclick=function(t,i){(function oJ(r){rk(r).snapshots=null})(t),i.dispatchAction({type:"restore",from:this.uid})},n.getDefaultOption=function(t){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])}},n}(Xo);Ss({type:"restore",event:"restore",update:"prepareAndUpdate"},function(r,n){n.resetOption("recreate")});const uJ=lJ;var cJ=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],hJ=function(){function r(n,t,i){var a=this;this._targetInfoList=[];var o=ik(t,n);De(dJ,function(l,u){(!i||!i.include||Ye(i.include,u)>=0)&&l(o,a._targetInfoList)})}return r.prototype.setOutputRanges=function(n,t){return this.matchOutputRanges(n,t,function(i,a,o){if((i.coordRanges||(i.coordRanges=[])).push(a),!i.coordRange){i.coordRange=a;var l=vz[i.brushType](0,o,a);i.__rangeOffset={offset:lk[i.brushType](l.values,i.range,[1,1]),xyMinMax:l.xyMinMax}}}),n},r.prototype.matchOutputRanges=function(n,t,i){De(n,function(a){var o=this.findTargetInfo(a,t);o&&!0!==o&&De(o.coordSyses,function(l){var u=vz[a.brushType](1,l,a.range,!0);i(a,u.values,l,t)})},this)},r.prototype.setInputRanges=function(n,t){De(n,function(i){var a=this.findTargetInfo(i,t);if(i.range=i.range||[],a&&!0!==a){i.panelId=a.panelId;var o=vz[i.brushType](0,a.coordSys,i.coordRange),l=i.__rangeOffset;i.range=l?lk[i.brushType](o.values,l.offset,function fJ(r,n){var t=ck(r),i=ck(n),a=[t[0]/i[0],t[1]/i[1]];return isNaN(a[0])&&(a[0]=1),isNaN(a[1])&&(a[1]=1),a}(o.xyMinMax,l.xyMinMax)):o.values}},this)},r.prototype.makePanelOpts=function(n,t){return _t(this._targetInfoList,function(i){var a=i.getPanelRect();return{panelId:i.panelId,defaultBrushType:t?t(i):null,clipPath:aP(a),isTargetByCursor:sP(a,n,i.coordSysModel),getLinearBrushOtherExtent:oP(a)}})},r.prototype.controlSeries=function(n,t,i){var a=this.findTargetInfo(n,i);return!0===a||a&&Ye(a.coordSyses,t.coordinateSystem)>=0},r.prototype.findTargetInfo=function(n,t){for(var i=this._targetInfoList,a=ik(t,n),o=0;o<i.length;o++){var l=i[o],u=n.panelId;if(u){if(l.panelId===u)return l}else for(var c=0;c<ak.length;c++)if(ak[c](a,l))return l}return!0},r}();function gz(r){return r[0]>r[1]&&r.reverse(),r}function ik(r,n){return Tc(r,n,{includeMainTypes:cJ})}var dJ={grid:function(r,n){var t=r.xAxisModels,i=r.yAxisModels,a=r.gridModels,o=Kt(),l={},u={};!t&&!i&&!a||(De(t,function(c){var h=c.axis.grid.model;o.set(h.id,h),l[h.id]=!0}),De(i,function(c){var h=c.axis.grid.model;o.set(h.id,h),u[h.id]=!0}),De(a,function(c){o.set(c.id,c),l[c.id]=!0,u[c.id]=!0}),o.each(function(c){var f=[];De(c.coordinateSystem.getCartesians(),function(p,v){(Ye(t,p.getAxis("x").model)>=0||Ye(i,p.getAxis("y").model)>=0)&&f.push(p)}),n.push({panelId:"grid--"+c.id,gridModel:c,coordSysModel:c,coordSys:f[0],coordSyses:f,getPanelRect:ok.grid,xAxisDeclared:l[c.id],yAxisDeclared:u[c.id]})}))},geo:function(r,n){De(r.geoModels,function(t){var i=t.coordinateSystem;n.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:i,coordSyses:[i],getPanelRect:ok.geo})})}},ak=[function(r,n){var t=r.xAxisModel,i=r.yAxisModel,a=r.gridModel;return!a&&t&&(a=t.axis.grid.model),!a&&i&&(a=i.axis.grid.model),a&&a===n.gridModel},function(r,n){var t=r.geoModel;return t&&t===n.geoModel}],ok={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var r=this.coordSys,n=r.getBoundingRect().clone();return n.applyTransform(Gu(r)),n}},vz={lineX:yt(sk,0),lineY:yt(sk,1),rect:function(r,n,t,i){var a=r?n.pointToData([t[0][0],t[1][0]],i):n.dataToPoint([t[0][0],t[1][0]],i),o=r?n.pointToData([t[0][1],t[1][1]],i):n.dataToPoint([t[0][1],t[1][1]],i),l=[gz([a[0],o[0]]),gz([a[1],o[1]])];return{values:l,xyMinMax:l}},polygon:function(r,n,t,i){var a=[[1/0,-1/0],[1/0,-1/0]];return{values:_t(t,function(l){var u=r?n.pointToData(l,i):n.dataToPoint(l,i);return a[0][0]=Math.min(a[0][0],u[0]),a[1][0]=Math.min(a[1][0],u[1]),a[0][1]=Math.max(a[0][1],u[0]),a[1][1]=Math.max(a[1][1],u[1]),u}),xyMinMax:a}}};function sk(r,n,t,i){var a=t.getAxis(["x","y"][r]),o=gz(_t([0,1],function(u){return n?a.coordToData(a.toLocalCoord(i[u]),!0):a.toGlobalCoord(a.dataToCoord(i[u]))})),l=[];return l[r]=o,l[1-r]=[NaN,NaN],{values:o,xyMinMax:l}}var lk={lineX:yt(uk,0),lineY:yt(uk,1),rect:function(r,n,t){return[[r[0][0]-t[0]*n[0][0],r[0][1]-t[0]*n[0][1]],[r[1][0]-t[1]*n[1][0],r[1][1]-t[1]*n[1][1]]]},polygon:function(r,n,t){return _t(r,function(i,a){return[i[0]-t[0]*n[a][0],i[1]-t[1]*n[a][1]]})}};function uk(r,n,t,i){return[n[0]-i[r]*t[0],n[1]-i[r]*t[1]]}function ck(r){return r?[r[0][1]-r[0][0],r[1][1]-r[1][0]]:[NaN,NaN]}const mz=hJ;var _z=De,pJ=function C1(r){return"\0_ec_\0"+r}("toolbox-dataZoom_"),gJ=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return R(n,r),n.prototype.render=function(t,i,a,o){this._brushController||(this._brushController=new DS(a.getZr()),this._brushController.on("brush",qe(this._onBrush,this)).mount()),function _J(r,n,t,i,a){var o=t._isZoomActive;i&&"takeGlobalCursor"===i.type&&(o="dataZoomSelect"===i.key&&i.dataZoomSelectActive),t._isZoomActive=o,r.setIconStatus("zoom",o?"emphasis":"normal");var u=new mz(yz(r),n,{include:["grid"]}).makePanelOpts(a,function(c){return c.xAxisDeclared&&!c.yAxisDeclared?"lineX":!c.xAxisDeclared&&c.yAxisDeclared?"lineY":"rect"});t._brushController.setPanels(u).enableBrush(!(!o||!u.length)&&{brushType:"auto",brushStyle:r.getModel("brushStyle").getItemStyle()})}(t,i,this,o,a),function mJ(r,n){r.setIconStatus("back",function sJ(r){return pz(r).length}(n)>1?"emphasis":"normal")}(t,i)},n.prototype.onclick=function(t,i,a){vJ[a].call(this)},n.prototype.remove=function(t,i){this._brushController&&this._brushController.unmount()},n.prototype.dispose=function(t,i){this._brushController&&this._brushController.dispose()},n.prototype._onBrush=function(t){var i=t.areas;if(t.isEnd&&i.length){var a={},o=this.ecModel;this._brushController.updateCovers([]),new mz(yz(this.model),o,{include:["grid"]}).matchOutputRanges(i,o,function(h,f,p){if("cartesian2d"===p.type){var v=h.brushType;"rect"===v?(u("x",p,f[0]),u("y",p,f[1])):u({lineX:"x",lineY:"y"}[v],p,f)}}),function iJ(r,n){var t=pz(r);nk(n,function(i,a){for(var o=t.length-1;o>=0&&!t[o][a];o--);if(o<0){var u=r.queryComponents({mainType:"dataZoom",subType:"select",id:a})[0];if(u){var c=u.getPercentRange();t[0][a]={dataZoomId:a,start:c[0],end:c[1]}}}}),t.push(n)}(o,a),this._dispatchZoomAction(a)}function u(h,f,p){var v=f.getAxis(h),m=v.model,y=function c(h,f,p){var v;return p.eachComponent({mainType:"dataZoom",subType:"select"},function(m){m.getAxisModel(h,f.componentIndex)&&(v=m)}),v}(h,m,o),C=y.findRepresentativeAxisProxy(m).getMinMaxSpan();(null!=C.minValueSpan||null!=C.maxValueSpan)&&(p=mh(0,p.slice(),v.scale.getExtent(),0,C.minValueSpan,C.maxValueSpan)),y&&(a[y.id]={dataZoomId:y.id,startValue:p[0],endValue:p[1]})}},n.prototype._dispatchZoomAction=function(t){var i=[];_z(t,function(a,o){i.push(Nt(a))}),i.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:i})},n.getDefaultOption=function(t){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},n}(Xo),vJ={zoom:function(){this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!this._isZoomActive})},back:function(){this._dispatchZoomAction(function aJ(r){var n=pz(r),t=n[n.length-1];n.length>1&&n.pop();var i={};return nk(t,function(a,o){for(var l=n.length-1;l>=0;l--)if(a=n[l][o]){i[o]=a;break}}),i}(this.ecModel))}};function yz(r){var n={xAxisIndex:r.get("xAxisIndex",!0),yAxisIndex:r.get("yAxisIndex",!0),xAxisId:r.get("xAxisId",!0),yAxisId:r.get("yAxisId",!0)};return null==n.xAxisIndex&&null==n.xAxisId&&(n.xAxisIndex="all"),null==n.yAxisIndex&&null==n.yAxisId&&(n.yAxisIndex="all"),n}!function aw(r,n){ar(null==f_.get(r)&&n),f_.set(r,n)}("dataZoom",function(r){var n=r.getComponent("toolbox",0),t=["feature","dataZoom"];if(n&&null!=n.get(t)){var i=n.getModel(t),a=[],l=Tc(r,yz(i));return _z(l.xAxisModels,function(c){return u(c,"xAxis","xAxisIndex")}),_z(l.yAxisModels,function(c){return u(c,"yAxis","yAxisIndex")}),a}function u(c,h,f){var p=c.componentIndex,v={type:"select",$fromToolbox:!0,filterMode:i.get("filterMode",!0)||"filter",id:pJ+h+p};v[f]=p,a.push(v)}});const yJ=gJ;var xJ=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.type="tooltip",n.dependencies=["axisPointer"],n.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},n}(Jn);const TJ=xJ;function hk(r){var n=r.get("confine");return null!=n?!!n:"richText"===r.get("renderMode")}function dk(r){if(gt.domSupported)for(var n=document.documentElement.style,t=0,i=r.length;t<i;t++)if(r[t]in n)return r[t]}var fk=dk(["transform","webkitTransform","OTransform","MozTransform","msTransform"]);function pk(r,n){if(!r)return n;n=Tp(n,!0);var t=r.indexOf(n);return(r=-1===t?n:"-"+r.slice(0,t)+"-"+n).toLowerCase()}var zJ=pk(dk(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),"transition"),Cz=pk(fk,"transform"),wJ="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(gt.transform3dSupported?"will-change:transform;":"");function gk(r,n,t){var i=r.toFixed(0)+"px",a=n.toFixed(0)+"px";if(!gt.transformSupported)return t?"top:"+a+";left:"+i+";":[["top",a],["left",i]];var o=gt.transform3dSupported,l="translate"+(o?"3d":"")+"("+i+","+a+(o?",0":"")+")";return t?"top:0;left:0;"+Cz+":"+l+";":[["top",0],["left",0],[fk,l]]}function vk(r,n,t,i,a){var o=n&&n.painter;if(t){var l=o&&o.getViewportRoot();l&&function os(r,n,t,i,a){ks(go,n,i,a,!0)&&ks(r,t,go[0],go[1])}(r,l,document.body,i,a)}else{r[0]=i,r[1]=a;var u=o&&o.getViewportRootOffset();u&&(r[0]+=u.offsetLeft,r[1]+=u.offsetTop)}r[2]=r[0]/n.getWidth(),r[3]=r[1]/n.getHeight()}var PJ=function(){function r(n,t,i){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,gt.wxa)return null;var a=document.createElement("div");a.domBelongToZr=!0,this.el=a;var o=this._zr=t.getZr(),l=this._appendToBody=i&&i.appendToBody;vk(this._styleCoord,o,l,t.getWidth()/2,t.getHeight()/2),l?document.body.appendChild(a):n.appendChild(a),this._container=n;var u=this;a.onmouseenter=function(){u._enterable&&(clearTimeout(u._hideTimeout),u._show=!0),u._inContent=!0},a.onmousemove=function(c){if(c=c||window.event,!u._enterable){var h=o.handler;nn(o.painter.getViewportRoot(),c,!0),h.dispatch("mousemove",c)}},a.onmouseleave=function(){u._inContent=!1,u._enterable&&u._show&&u.hideLater(u._hideDelay)}}return r.prototype.update=function(n){var t=this._container,i=function SJ(r,n){var t=r.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(r);return t?n?t[n]:t:null}(t,"position"),a=t.style;"absolute"!==a.position&&"absolute"!==i&&(a.position="relative"),n.get("alwaysShowContent")&&this._moveIfResized(),this.el.className=n.get("className")||""},r.prototype.show=function(n,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var i=this.el,a=i.style,o=this._styleCoord;i.innerHTML?a.cssText=wJ+function OJ(r,n,t){var i=[],a=r.get("transitionDuration"),o=r.get("backgroundColor"),l=r.get("shadowBlur"),u=r.get("shadowColor"),c=r.get("shadowOffsetX"),h=r.get("shadowOffsetY"),f=r.getModel("textStyle"),p=Nw(r,"html");return i.push("box-shadow:"+c+"px "+h+"px "+l+"px "+u),n&&a&&i.push(function EJ(r,n){var t="cubic-bezier(0.23,1,0.32,1)",i=" "+r/2+"s "+t,a="opacity"+i+",visibility"+i;return n||(i=" "+r+"s "+t,a+=gt.transformSupported?","+Cz+i:",left"+i+",top"+i),zJ+":"+a}(a,t)),o&&i.push("background-color:"+o),De(["width","color","radius"],function(m){var y="border-"+m,C=Tp(y),T=r.get(C);null!=T&&i.push(y+":"+T+("color"===m?"":"px"))}),i.push(function MJ(r){var n=[],t=r.get("fontSize"),i=r.getTextColor();i&&n.push("color:"+i),n.push("font:"+r.getFont()),t&&n.push("line-height:"+Math.round(3*t/2)+"px");var a=r.get("textShadowColor"),o=r.get("textShadowBlur")||0,l=r.get("textShadowOffsetX")||0,u=r.get("textShadowOffsetY")||0;return a&&o&&n.push("text-shadow:"+l+"px "+u+"px "+o+"px "+a),De(["decoration","align"],function(c){var h=r.get(c);h&&n.push("text-"+c+":"+h)}),n.join(";")}(f)),null!=p&&i.push("padding:"+Ql(p).join("px ")+"px"),i.join(";")+";"}(n,!this._firstShow,this._longHide)+gk(o[0],o[1],!0)+"border-color:"+ql(t)+";"+(n.get("extraCssText")||"")+";pointer-events:"+(this._enterable?"auto":"none"):a.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},r.prototype.setContent=function(n,t,i,a,o){var l=this.el;if(null!=n){var u="";if(Qe(o)&&"item"===i.get("trigger")&&!hk(i)&&(u=function AJ(r,n,t){if(!Qe(t)||"inside"===t)return"";var i=r.get("backgroundColor"),a=r.get("borderWidth");n=ql(n);var h,o=function DJ(r){return"left"===r?"right":"right"===r?"left":"top"===r?"bottom":"top"}(t),l=Math.max(1.5*Math.round(a),6),u="",c=Cz+":";Ye(["left","right"],o)>-1?(u+="top:50%",c+="translateY(-50%) rotate("+(h="left"===o?-225:-45)+"deg)"):(u+="left:50%",c+="translateX(-50%) rotate("+(h="top"===o?225:45)+"deg)");var f=h*Math.PI/180,p=l+a,v=p*Math.abs(Math.cos(f))+p*Math.abs(Math.sin(f)),y=n+" solid "+a+"px;";return'<div style="'+["position:absolute;width:"+l+"px;height:"+l+"px;",(u+=";"+o+":-"+Math.round(100*((v-Math.SQRT2*a)/2+Math.SQRT2*a-(v-p)/2))/100+"px")+";"+c+";","border-bottom:"+y,"border-right:"+y,"background-color:"+i+";"].join("")+'"></div>'}(i,a,o)),Qe(n))l.innerHTML=n+u;else if(n){l.innerHTML="",we(n)||(n=[n]);for(var c=0;c<n.length;c++)Ft(n[c])&&n[c].parentNode!==l&&l.appendChild(n[c]);if(u&&l.childNodes.length){var h=document.createElement("div");h.innerHTML=u,l.appendChild(h)}}}else l.innerHTML=""},r.prototype.setEnterable=function(n){this._enterable=n},r.prototype.getSize=function(){var n=this.el;return[n.offsetWidth,n.offsetHeight]},r.prototype.moveTo=function(n,t){var i=this._styleCoord;if(vk(i,this._zr,this._appendToBody,n,t),null!=i[0]&&null!=i[1]){var a=this.el.style;De(gk(i[0],i[1]),function(l){a[l[0]]=l[1]})}},r.prototype._moveIfResized=function(){var t=this._styleCoord[3];this.moveTo(this._styleCoord[2]*this._zr.getWidth(),t*this._zr.getHeight())},r.prototype.hide=function(){var n=this,t=this.el.style;t.visibility="hidden",t.opacity="0",gt.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return n._longHide=!0},500)},r.prototype.hideLater=function(n){this._show&&(!this._inContent||!this._enterable)&&(n?(this._hideDelay=n,this._show=!1,this._hideTimeout=setTimeout(qe(this.hide,this),n)):this.hide())},r.prototype.isShow=function(){return this._show},r.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},r}();const IJ=PJ;var kJ=function(){function r(n){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=n.getZr(),_k(this._styleCoord,this._zr,n.getWidth()/2,n.getHeight()/2)}return r.prototype.update=function(n){n.get("alwaysShowContent")&&this._moveIfResized()},r.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},r.prototype.setContent=function(n,t,i,a,o){var l=this;tt(n)&&Tr(""),this.el&&this._zr.remove(this.el);var u=i.getModel("textStyle");this.el=new Gn({style:{rich:t.richTextStyles,text:n,lineHeight:22,borderWidth:1,borderColor:a,textShadowColor:u.get("textShadowColor"),fill:i.get(["textStyle","color"]),padding:Nw(i,"richText"),verticalAlign:"top",align:"left"},z:i.get("z")}),De(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(h){l.el.style[h]=i.get(h)}),De(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(h){l.el.style[h]=u.get(h)||0}),this._zr.add(this.el);var c=this;this.el.on("mouseover",function(){c._enterable&&(clearTimeout(c._hideTimeout),c._show=!0),c._inContent=!0}),this.el.on("mouseout",function(){c._enterable&&c._show&&c.hideLater(c._hideDelay),c._inContent=!1})},r.prototype.setEnterable=function(n){this._enterable=n},r.prototype.getSize=function(){var n=this.el,t=this.el.getBoundingRect(),i=mk(n.style);return[t.width+i.left+i.right,t.height+i.top+i.bottom]},r.prototype.moveTo=function(n,t){var i=this.el;if(i){var a=this._styleCoord;_k(a,this._zr,n,t),n=a[0],t=a[1];var o=i.style,l=oc(o.borderWidth||0),u=mk(o);i.x=n+l+u.left,i.y=t+l+u.top,i.markRedraw()}},r.prototype._moveIfResized=function(){var t=this._styleCoord[3];this.moveTo(this._styleCoord[2]*this._zr.getWidth(),t*this._zr.getHeight())},r.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},r.prototype.hideLater=function(n){this._show&&(!this._inContent||!this._enterable)&&(n?(this._hideDelay=n,this._show=!1,this._hideTimeout=setTimeout(qe(this.hide,this),n)):this.hide())},r.prototype.isShow=function(){return this._show},r.prototype.dispose=function(){this._zr.remove(this.el)},r}();function oc(r){return Math.max(0,r)}function mk(r){var n=oc(r.shadowBlur||0),t=oc(r.shadowOffsetX||0),i=oc(r.shadowOffsetY||0);return{left:oc(n-t),right:oc(n+t),top:oc(n-i),bottom:oc(n+i)}}function _k(r,n,t,i){r[0]=t,r[1]=i,r[2]=r[0]/n.getWidth(),r[3]=r[1]/n.getHeight()}const LJ=kJ;var RJ=new Qn({shape:{x:-1,y:-1,width:2,height:2}}),NJ=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.init=function(t,i){if(!gt.node&&i.getDom()){var a=t.getComponent("tooltip"),o=this._renderMode=function D1(r){return"auto"===r?gt.domSupported?"html":"richText":r||"html"}(a.get("renderMode"));this._tooltipContent="richText"===o?new LJ(i):new IJ(i.getDom(),i,{appendToBody:a.get("appendToBody",!0)})}},n.prototype.render=function(t,i,a){if(!gt.node&&a.getDom()){this.group.removeAll(),this._tooltipModel=t,this._ecModel=i,this._api=a,this._alwaysShowContent=t.get("alwaysShowContent");var o=this._tooltipContent;o.update(t),o.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),"richText"!==this._renderMode&&t.get("transitionDuration")?bd(this,"_updatePosition",50,"fixRate"):Yp(this,"_updatePosition")}},n.prototype._initGlobalListener=function(){var i=this._tooltipModel.get("triggerOn");bI("itemTooltip",this._api,qe(function(a,o,l){"none"!==i&&(i.indexOf(a)>=0?this._tryShow(o,l):"leave"===a&&this._hide(l))},this))},n.prototype._keepShow=function(){var t=this._tooltipModel,i=this._ecModel,a=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==t.get("triggerOn")){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!a.isDisposed()&&o.manuallyShowTip(t,i,a,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},n.prototype.manuallyShowTip=function(t,i,a,o){if(o.from!==this.uid&&!gt.node&&a.getDom()){var l=yk(o,a);this._ticket="";var u=o.dataByCoordSys,c=function UJ(r,n,t){var i=If(r).queryOptionMap,a=i.keys()[0];if(a&&"series"!==a){var c,l=bc(n,a,i.get(a),{useDefault:!1,enableAll:!1,enableNone:!1}).models[0];if(l&&(t.getViewOfComponentModel(l).group.traverse(function(h){var f=dn(h).tooltipConfig;if(f&&f.name===r.name)return c=h,!0}),c))return{componentMainType:a,componentIndex:l.componentIndex,el:c}}}(o,i,a);if(c){var h=c.el.getBoundingRect().clone();h.applyTransform(c.el.transform),this._tryShow({offsetX:h.x+h.width/2,offsetY:h.y+h.height/2,target:c.el,position:o.position,positionDefault:"bottom"},l)}else if(o.tooltip&&null!=o.x&&null!=o.y){var f=RJ;f.x=o.x,f.y=o.y,f.update(),dn(f).tooltipConfig={name:null,option:o.tooltip},this._tryShow({offsetX:o.x,offsetY:o.y,target:f},l)}else if(u)this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,dataByCoordSys:u,tooltipOption:o.tooltipOption},l);else if(null!=o.seriesIndex){if(this._manuallyAxisShowTip(t,i,a,o))return;var p=zI(o,i),v=p.point[0],m=p.point[1];null!=v&&null!=m&&this._tryShow({offsetX:v,offsetY:m,target:p.el,position:o.position,positionDefault:"bottom"},l)}else null!=o.x&&null!=o.y&&(a.dispatchAction({type:"updateAxisPointer",x:o.x,y:o.y}),this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,target:a.getZr().findHover(o.x,o.y).target},l))}},n.prototype.manuallyHideTip=function(t,i,a,o){!this._alwaysShowContent&&this._tooltipModel&&this._tooltipContent.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,o.from!==this.uid&&this._hide(yk(o,a))},n.prototype._manuallyAxisShowTip=function(t,i,a,o){var l=o.seriesIndex,u=o.dataIndex,c=i.getComponent("axisPointer").coordSysAxesInfo;if(null!=l&&null!=u&&null!=c){var h=i.getSeriesByIndex(l);if(h&&"axis"===Ug([h.getData().getItemModel(u),h,(h.coordinateSystem||{}).model],this._tooltipModel).get("trigger"))return a.dispatchAction({type:"updateAxisPointer",seriesIndex:l,dataIndex:u,position:o.position}),!0}},n.prototype._tryShow=function(t,i){var a=t.target;if(this._tooltipModel){this._lastX=t.offsetX,this._lastY=t.offsetY;var l=t.dataByCoordSys;if(l&&l.length)this._showAxisTooltip(l,t);else if(a){var u,c;this._lastDataByCoordSys=null,zd(a,function(h){return null!=dn(h).dataIndex?(u=h,!0):null!=dn(h).tooltipConfig?(c=h,!0):void 0},!0),u?this._showSeriesItemTooltip(t,u,i):c?this._showComponentItemTooltip(t,c,i):this._hide(i)}else this._lastDataByCoordSys=null,this._hide(i)}},n.prototype._showOrMove=function(t,i){var a=t.get("showDelay");i=qe(i,this),clearTimeout(this._showTimout),a>0?this._showTimout=setTimeout(i,a):i()},n.prototype._showAxisTooltip=function(t,i){var a=this._ecModel,o=this._tooltipModel,l=[i.offsetX,i.offsetY],u=Ug([i.tooltipOption],o),c=this._renderMode,h=[],f=Wi("section",{blocks:[],noHeader:!0}),p=[],v=new Yx;De(t,function(E){De(E.dataByAxis,function(N){var X=a.getComponent(N.axisDim+"Axis",N.axisIndex),ve=N.value;if(X&&null!=ve){var ce=mI(ve,X.axis,a,N.seriesDataIndices,N.valueLabelOpt),_e=Wi("section",{header:ce,noHeader:!Ir(ce),sortBlocks:!0,blocks:[]});f.blocks.push(_e),De(N.seriesDataIndices,function(ze){var Ee=a.getSeriesByIndex(ze.seriesIndex),Le=ze.dataIndexInside,ke=Ee.getDataParams(Le);if(!(ke.dataIndex<0)){ke.axisDim=N.axisDim,ke.axisIndex=N.axisIndex,ke.axisType=N.axisType,ke.axisId=N.axisId,ke.axisValue=GT(X.axis,{value:ve}),ke.axisValueLabel=ce,ke.marker=v.makeTooltipMarker("item",ql(ke.color),c);var Ue=D_(Ee.formatTooltip(Le,!0,null)),He=Ue.frag;if(He){var Ke=Ug([Ee],o).get("valueFormatter");_e.blocks.push(Ke?Ge({valueFormatter:Ke},He):He)}Ue.text&&p.push(Ue.text),h.push(ke)}})}})}),f.blocks.reverse(),p.reverse();var m=i.position,y=u.get("order"),C=kw(f,v,c,y,a.get("useUTC"),u.get("textStyle"));C&&p.unshift(C);var z=p.join("richText"===c?"\n\n":"<br/>");this._showOrMove(u,function(){this._updateContentNotChangedOnAxis(t,h)?this._updatePosition(u,m,l[0],l[1],this._tooltipContent,h):this._showTooltipContent(u,z,h,Math.random()+"",l[0],l[1],m,null,v)})},n.prototype._showSeriesItemTooltip=function(t,i,a){var o=this._ecModel,l=dn(i),u=l.seriesIndex,c=o.getSeriesByIndex(u),h=l.dataModel||c,f=l.dataIndex,p=l.dataType,v=h.getData(p),m=this._renderMode,y=t.positionDefault,C=Ug([v.getItemModel(f),h,c&&(c.coordinateSystem||{}).model],this._tooltipModel,y?{position:y}:null),T=C.get("trigger");if(null==T||"item"===T){var z=h.getDataParams(f,p),E=new Yx;z.marker=E.makeTooltipMarker("item",ql(z.color),m);var N=D_(h.formatTooltip(f,!1,p)),X=C.get("order"),ve=C.get("valueFormatter"),ce=N.frag,_e=ce?kw(ve?Ge({valueFormatter:ve},ce):ce,E,m,X,o.get("useUTC"),C.get("textStyle")):N.text,ze="item_"+h.name+"_"+f;this._showOrMove(C,function(){this._showTooltipContent(C,_e,z,ze,t.offsetX,t.offsetY,t.position,t.target,E)}),a({type:"showTip",dataIndexInside:f,dataIndex:v.getRawIndex(f),seriesIndex:u,from:this.uid})}},n.prototype._showComponentItemTooltip=function(t,i,a){var o=dn(i),u=o.tooltipConfig.option||{};Qe(u)&&(u={content:u,formatter:u});var h=[u],f=this._ecModel.getComponent(o.componentMainType,o.componentIndex);f&&h.push(f),h.push({formatter:u.content});var p=t.positionDefault,v=Ug(h,this._tooltipModel,p?{position:p}:null),m=v.get("content"),y=Math.random()+"",C=new Yx;this._showOrMove(v,function(){var T=Nt(v.get("formatterParams")||{});this._showTooltipContent(v,m,T,y,t.offsetX,t.offsetY,t.position,i,C)}),a({type:"showTip",from:this.uid})},n.prototype._showTooltipContent=function(t,i,a,o,l,u,c,h,f){if(this._ticket="",t.get("showContent")&&t.get("show")){var p=this._tooltipContent;p.setEnterable(t.get("enterable"));var v=t.get("formatter");c=c||t.get("position");var m=i,C=this._getNearestPoint([l,u],a,t.get("trigger"),t.get("borderColor")).color;if(v)if(Qe(v)){var T=t.ecModel.get("useUTC"),z=we(a)?a[0]:a;m=v,z&&z.axisType&&z.axisType.indexOf("time")>=0&&(m=rl(z.axisValue,m,T)),m=zp(m,a,!0)}else if(Pe(v)){var N=qe(function(X,ve){X===this._ticket&&(p.setContent(ve,f,t,C,c),this._updatePosition(t,c,l,u,p,a,h))},this);this._ticket=o,m=v(a,o,N)}else m=v;p.setContent(m,f,t,C,c),p.show(t,C),this._updatePosition(t,c,l,u,p,a,h)}},n.prototype._getNearestPoint=function(t,i,a,o){return"axis"===a||we(i)?{color:o||("html"===this._renderMode?"#fff":"none")}:we(i)?void 0:{color:o||i.color||i.borderColor}},n.prototype._updatePosition=function(t,i,a,o,l,u,c){var h=this._api.getWidth(),f=this._api.getHeight();i=i||t.get("position");var p=l.getSize(),v=t.get("align"),m=t.get("verticalAlign"),y=c&&c.getBoundingRect().clone();if(c&&y.applyTransform(c.transform),Pe(i)&&(i=i([a,o],u,l.el,y,{viewSize:[h,f],contentSize:p.slice()})),we(i))a=Ht(i[0],h),o=Ht(i[1],f);else if(tt(i)){var C=i;C.width=p[0],C.height=p[1];var T=ui(C,{width:h,height:f});a=T.x,o=T.y,v=null,m=null}else if(Qe(i)&&c){var z=function ZJ(r,n,t,i){var a=t[0],o=t[1],l=Math.ceil(Math.SQRT2*i)+8,u=0,c=0,h=n.width,f=n.height;switch(r){case"inside":u=n.x+h/2-a/2,c=n.y+f/2-o/2;break;case"top":u=n.x+h/2-a/2,c=n.y-o-l;break;case"bottom":u=n.x+h/2-a/2,c=n.y+f+l;break;case"left":u=n.x-a-l,c=n.y+f/2-o/2;break;case"right":u=n.x+h+l,c=n.y+f/2-o/2}return[u,c]}(i,y,p,t.get("borderWidth"));a=z[0],o=z[1]}else z=function FJ(r,n,t,i,a,o,l){var u=t.getSize(),c=u[0],h=u[1];return null!=o&&(r+c+o+2>i?r-=c+o:r+=o),null!=l&&(n+h+l>a?n-=h+l:n+=l),[r,n]}(a,o,l,h,f,v?null:20,m?null:20),a=z[0],o=z[1];v&&(a-=Ck(v)?p[0]/2:"right"===v?p[0]:0),m&&(o-=Ck(m)?p[1]/2:"bottom"===m?p[1]:0),hk(t)&&(z=function BJ(r,n,t,i,a){var o=t.getSize(),l=o[0],u=o[1];return r=Math.min(r+l,i)-l,n=Math.min(n+u,a)-u,[r=Math.max(r,0),n=Math.max(n,0)]}(a,o,l,h,f),a=z[0],o=z[1]),l.moveTo(a,o)},n.prototype._updateContentNotChangedOnAxis=function(t,i){var a=this._lastDataByCoordSys,o=this._cbParamsList,l=!!a&&a.length===t.length;return l&&De(a,function(u,c){var h=u.dataByAxis||[],p=(t[c]||{}).dataByAxis||[];(l=l&&h.length===p.length)&&De(h,function(v,m){var y=p[m]||{},C=v.seriesDataIndices||[],T=y.seriesDataIndices||[];(l=l&&v.value===y.value&&v.axisType===y.axisType&&v.axisId===y.axisId&&C.length===T.length)&&De(C,function(z,E){var N=T[E];l=l&&z.seriesIndex===N.seriesIndex&&z.dataIndex===N.dataIndex}),o&&De(v.seriesDataIndices,function(z){var E=z.seriesIndex,N=i[E],X=o[E];N&&X&&X.data!==N.data&&(l=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=i,!!l},n.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},n.prototype.dispose=function(t,i){gt.node||!i.getDom()||(Yp(this,"_updatePosition"),this._tooltipContent.dispose(),tz("itemTooltip",i))},n.type="tooltip",n}(oi);function Ug(r,n,t){var a,i=n.ecModel;t?(a=new Or(t,i,i),a=new Or(n.option,a,i)):a=n;for(var o=r.length-1;o>=0;o--){var l=r[o];l&&(l instanceof Or&&(l=l.get("tooltip",!0)),Qe(l)&&(l={formatter:l}),l&&(a=new Or(l,a,i)))}return a}function yk(r,n){return r.dispatchAction||qe(n.dispatchAction,n)}function Ck(r){return"center"===r||"middle"===r}const VJ=NJ;var WJ=["rect","polygon","keep","clear"];function GJ(r,n){var t=Dr(r?r.brush:[]);if(t.length){var i=[];De(t,function(c){var h=c.hasOwnProperty("toolbox")?c.toolbox:[];h instanceof Array&&(i=i.concat(h))});var a=r&&r.toolbox;we(a)&&(a=a[0]),a||(r.toolbox=[a={feature:{}}]);var o=a.feature||(a.feature={}),l=o.brush||(o.brush={}),u=l.type||(l.type=[]);u.push.apply(u,i),function JJ(r){var n={};De(r,function(t){n[t]=1}),r.length=0,De(n,function(t,i){r.push(i)})}(u),n&&!u.length&&u.push.apply(u,WJ)}}var xk=De;function Tk(r){if(r)for(var n in r)if(r.hasOwnProperty(n))return!0}function xz(r,n,t){var i={};return xk(n,function(o){var l=i[o]=function a(){var o=function(){};return o.prototype.__hidden=o.prototype,new o}();xk(r[o],function(u,c){if(la.isValidType(c)){var h={type:c,visual:u};t&&t(h,o),l[c]=new la(h),"opacity"===c&&((h=Nt(h)).type="colorAlpha",l.__hidden.__alphaForOpacity=new la(h))}})}),i}function bk(r,n,t){var i;De(t,function(a){n.hasOwnProperty(a)&&Tk(n[a])&&(i=!0)}),i&&De(t,function(a){n.hasOwnProperty(a)&&Tk(n[a])?r[a]=Nt(n[a]):delete r[a]})}var Sk={lineX:zk(0),lineY:zk(1),rect:{point:function(r,n,t){return r&&t.boundingRect.contain(r[0],r[1])},rect:function(r,n,t){return r&&t.boundingRect.intersect(r)}},polygon:{point:function(r,n,t){return r&&t.boundingRect.contain(r[0],r[1])&&nh(t.range,r[0],r[1])},rect:function(r,n,t){var i=t.range;if(!r||i.length<=1)return!1;var a=r.x,o=r.y,l=r.width,u=r.height,c=i[0];return!!(nh(i,a,o)||nh(i,a+l,o)||nh(i,a,o+u)||nh(i,a+l,o+u)||Mn.create(r).contain(c[0],c[1])||Jp(a,o,a+l,o,i)||Jp(a,o,a,o+u,i)||Jp(a+l,o,a+l,o+u,i)||Jp(a,o+u,a+l,o+u,i))||void 0}}};function zk(r){var n=["x","y"],t=["width","height"];return{point:function(i,a,o){if(i)return Vg(i[r],o.range)},rect:function(i,a,o){if(i){var l=o.range,u=[i[n[r]],i[n[r]]+i[t[r]]];return u[1]<u[0]&&u.reverse(),Vg(u[0],l)||Vg(u[1],l)||Vg(l[0],u)||Vg(l[1],u)}}}}function Vg(r,n){return n[0]<=r&&r<=n[1]}var wk=["inBrush","outOfBrush"],Tz="__ecBrushSelect",bz="__ecInBrushSelectEvent";function Dk(r){r.eachComponent({mainType:"brush"},function(n){(n.brushTargetManager=new mz(n.option,r)).setInputRanges(n.areas,r)})}function KJ(r,n,t){var a,o,i=[];r.eachComponent({mainType:"brush"},function(l){t&&"takeGlobalCursor"===t.type&&l.setBrushOption("brush"===t.key?t.brushOption:{brushType:!1})}),Dk(r),r.eachComponent({mainType:"brush"},function(l,u){var c={brushId:l.id,brushIndex:u,brushName:l.name,areas:Nt(l.areas),selected:[]};i.push(c);var h=l.option,f=h.brushLink,p=[],v=[],m=[],y=!1;u||(a=h.throttleType,o=h.throttleDelay);var C=_t(l.areas,function(ve){var ce=eY[ve.brushType],_e=Dt({boundingRect:ce?ce(ve):void 0},ve);return _e.selectors=function qJ(r){var n=r.brushType,t={point:function(i){return Sk[n].point(i,t,r)},rect:function(i){return Sk[n].rect(i,t,r)}};return t}(_e),_e}),T=xz(l.option,wk,function(ve){ve.mappingMethod="fixed"});function z(ve){return"all"===f||!!p[ve]}function E(ve){return!!ve.length}we(f)&&De(f,function(ve){p[ve]=1}),r.eachSeries(function(ve,ce){var _e=m[ce]=[];"parallel"===ve.subType?function N(ve,ce){var _e=ve.coordinateSystem;y=y||_e.hasAxisBrushed(),z(ce)&&_e.eachActiveState(ve.getData(),function(ze,Ee){"active"===ze&&(v[Ee]=1)})}(ve,ce):function X(ve,ce,_e){if(ve.brushSelector&&!function XJ(r,n){var t=r.option.seriesIndex;return null!=t&&"all"!==t&&(we(t)?Ye(t,n)<0:n!==t)}(l,ce)&&(De(C,function(Ee){l.brushTargetManager.controlSeries(Ee,ve,r)&&_e.push(Ee),y=y||E(_e)}),z(ce)&&E(_e))){var ze=ve.getData();ze.each(function(Ee){Ak(ve,_e,ze,Ee)&&(v[Ee]=1)})}}(ve,ce,_e)}),r.eachSeries(function(ve,ce){var _e={seriesId:ve.id,seriesIndex:ce,seriesName:ve.name,dataIndex:[]};c.selected.push(_e);var ze=m[ce],Ee=ve.getData(),Le=z(ce)?function(ke){return v[ke]?(_e.dataIndex.push(Ee.getRawIndex(ke)),"inBrush"):"outOfBrush"}:function(ke){return Ak(ve,ze,Ee,ke)?(_e.dataIndex.push(Ee.getRawIndex(ke)),"inBrush"):"outOfBrush"};(z(ce)?y:E(ze))&&function YJ(r,n,t,i,a,o){var u,l={};function c(p){return lT(t,u,p)}function h(p,v){RD(t,u,p,v)}function f(p,v){var m=t.getRawDataItem(u=null==o?p:v);if(!m||!1!==m.visualMap)for(var y=i.call(a,p),C=n[y],T=l[y],z=0,E=T.length;z<E;z++){var N=T[z];C[N]&&C[N].applyVisual(p,c,h)}}De(r,function(p){var v=la.prepareVisualTypes(n[p]);l[p]=v}),null==o?t.each(f):t.each([o],f)}(wk,T,Ee,Le)})}),function $J(r,n,t,i,a){if(a){var o=r.getZr();o[bz]||(o[Tz]||(o[Tz]=jJ),bd(o,Tz,t,n)(r,i))}}(n,a,o,i,t)}function jJ(r,n){if(!r.isDisposed()){var t=r.getZr();t[bz]=!0,r.dispatchAction({type:"brushSelect",batch:n}),t[bz]=!1}}function Ak(r,n,t,i){for(var a=0,o=n.length;a<o;a++){var l=n[a];if(r.brushSelector(i,t,l.selectors,l))return!0}}var eY={rect:function(r){return Ek(r.range)},polygon:function(r){for(var n,t=r.range,i=0,a=t.length;i<a;i++){var o=t[i];o[0]<(n=n||[[1/0,-1/0],[1/0,-1/0]])[0][0]&&(n[0][0]=o[0]),o[0]>n[0][1]&&(n[0][1]=o[0]),o[1]<n[1][0]&&(n[1][0]=o[1]),o[1]>n[1][1]&&(n[1][1]=o[1])}return n&&Ek(n)}};function Ek(r){return new Mn(r[0][0],r[1][0],r[0][1]-r[0][0],r[1][1]-r[1][0])}var tY=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.init=function(t,i){this.ecModel=t,this.api=i,(this._brushController=new DS(i.getZr())).on("brush",qe(this._onBrush,this)).mount()},n.prototype.render=function(t,i,a,o){this.model=t,this._updateController(t,i,a,o)},n.prototype.updateTransform=function(t,i,a,o){Dk(i),this._updateController(t,i,a,o)},n.prototype.updateVisual=function(t,i,a,o){this.updateTransform(t,i,a,o)},n.prototype.updateView=function(t,i,a,o){this._updateController(t,i,a,o)},n.prototype._updateController=function(t,i,a,o){(!o||o.$from!==t.id)&&this._brushController.setPanels(t.brushTargetManager.makePanelOpts(a)).enableBrush(t.brushOption).updateCovers(t.areas.slice())},n.prototype.dispose=function(){this._brushController.dispose()},n.prototype._onBrush=function(t){var i=this.model.id,a=this.model.brushTargetManager.setOutputRanges(t.areas,this.ecModel);(!t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:i,areas:Nt(a),$from:i}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:i,areas:Nt(a),$from:i})},n.type="brush",n}(oi);const nY=tY;var iY=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.areas=[],t.brushOption={},t}return R(n,r),n.prototype.optionUpdated=function(t,i){var a=this.option;!i&&bk(a,t,["inBrush","outOfBrush"]);var o=a.inBrush=a.inBrush||{};a.outOfBrush=a.outOfBrush||{color:"#ddd"},o.hasOwnProperty("liftZ")||(o.liftZ=5)},n.prototype.setAreas=function(t){!t||(this.areas=_t(t,function(i){return Mk(this.option,i)},this))},n.prototype.setBrushOption=function(t){this.brushOption=Mk(this.option,t),this.brushType=this.brushOption.brushType},n.type="brush",n.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],n.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},n}(Jn);function Mk(r,n){return Zt({brushType:r.brushType,brushMode:r.brushMode,transformable:r.transformable,brushStyle:new Or(r.brushStyle).getItemStyle(),removeOnClick:r.removeOnClick,z:r.z},n,!0)}const aY=iY;var oY=["rect","polygon","lineX","lineY","keep","clear"],sY=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return R(n,r),n.prototype.render=function(t,i,a){var o,l,u;i.eachComponent({mainType:"brush"},function(c){o=c.brushType,l=c.brushOption.brushMode||"single",u=u||!!c.areas.length}),this._brushType=o,this._brushMode=l,De(t.get("type",!0),function(c){t.setIconStatus(c,("keep"===c?"multiple"===l:"clear"===c?u:c===o)?"emphasis":"normal")})},n.prototype.updateView=function(t,i,a){this.render(t,i,a)},n.prototype.getIcons=function(){var t=this.model,i=t.get("icon",!0),a={};return De(t.get("type",!0),function(o){i[o]&&(a[o]=i[o])}),a},n.prototype.onclick=function(t,i,a){var o=this._brushType,l=this._brushMode;"clear"===a?(i.dispatchAction({type:"axisAreaSelect",intervals:[]}),i.dispatchAction({type:"brush",command:"clear",areas:[]})):i.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===a?o:o!==a&&a,brushMode:"keep"===a?"multiple"===l?"single":"multiple":l}})},n.getDefaultOption=function(t){return{show:!0,type:oY.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:t.getLocaleModel().get(["toolbox","brush","title"])}},n}(Xo);const lY=sY;var cY=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.layoutMode={type:"box",ignoreSize:!0},t}return R(n,r),n.type="title",n.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},n}(Jn),hY=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.render=function(t,i,a){if(this.group.removeAll(),t.get("show")){var o=this.group,l=t.getModel("textStyle"),u=t.getModel("subtextStyle"),c=t.get("textAlign"),h=$t(t.get("textBaseline"),t.get("textVerticalAlign")),f=new Gn({style:$r(l,{text:t.get("text"),fill:l.getTextColor()},{disableBox:!0}),z2:10}),p=f.getBoundingRect(),v=t.get("subtext"),m=new Gn({style:$r(u,{text:v,fill:u.getTextColor(),y:p.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),y=t.get("link"),C=t.get("sublink"),T=t.get("triggerEvent",!0);f.silent=!y&&!T,m.silent=!C&&!T,y&&f.on("click",function(){cd(y,"_"+t.get("target"))}),C&&m.on("click",function(){cd(C,"_"+t.get("subtarget"))}),dn(f).eventData=dn(m).eventData=T?{componentType:"title",componentIndex:t.componentIndex}:null,o.add(f),v&&o.add(m);var z=o.getBoundingRect(),E=t.getBoxLayoutParams();E.width=z.width,E.height=z.height;var N=ui(E,{width:a.getWidth(),height:a.getHeight()},t.get("padding"));c||("middle"===(c=t.get("left")||t.get("right"))&&(c="center"),"right"===c?N.x+=N.width:"center"===c&&(N.x+=N.width/2)),h||("center"===(h=t.get("top")||t.get("bottom"))&&(h="middle"),"bottom"===h?N.y+=N.height:"middle"===h&&(N.y+=N.height/2),h=h||"top"),o.x=N.x,o.y=N.y,o.markRedraw();var X={align:c,verticalAlign:h};f.setStyle(X),m.setStyle(X),z=o.getBoundingRect();var ve=N.margin,ce=t.getItemStyle(["color","opacity"]);ce.fill=t.get("backgroundColor");var _e=new Qn({shape:{x:z.x-ve[3],y:z.y-ve[0],width:z.width+ve[1]+ve[3],height:z.height+ve[0]+ve[2],r:t.get("borderRadius")},style:ce,subPixelOptimize:!0,silent:!0});o.add(_e)}},n.type="title",n}(oi),fY=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.layoutMode="box",t}return R(n,r),n.prototype.init=function(t,i,a){this.mergeDefaultAndTheme(t,a),this._initData()},n.prototype.mergeOption=function(t){r.prototype.mergeOption.apply(this,arguments),this._initData()},n.prototype.setCurrentIndex=function(t){null==t&&(t=this.option.currentIndex);var i=this._data.count();this.option.loop?t=(t%i+i)%i:(t>=i&&(t=i-1),t<0&&(t=0)),this.option.currentIndex=t},n.prototype.getCurrentIndex=function(){return this.option.currentIndex},n.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},n.prototype.setPlayState=function(t){this.option.autoPlay=!!t},n.prototype.getPlayState=function(){return!!this.option.autoPlay},n.prototype._initData=function(){var l,t=this.option,i=t.data||[],a=t.axisType,o=this._names=[];"category"===a?(l=[],De(i,function(h,f){var v,p=Si(Bi(h),"");tt(h)?(v=Nt(h)).value=f:v=f,l.push(v),o.push(p)})):l=i,(this._data=new _a([{name:"value",type:{category:"ordinal",time:"time",value:"number"}[a]||"number"}],this)).initData(l,o)},n.prototype.getData=function(){return this._data},n.prototype.getCategories=function(){if("category"===this.get("axisType"))return this._names.slice()},n.type="timeline",n.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},n}(Jn);const Ok=fY;var Pk=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.type="timeline.slider",n.defaultOption=nl(Ok.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),n}(Ok);Qt(Pk,Rp.prototype);const pY=Pk;var gY=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.type="timeline",n}(oi);const vY=gY;var mY=function(r){function n(t,i,a,o){var l=r.call(this,t,i,a)||this;return l.type=o||"value",l}return R(n,r),n.prototype.getLabelModel=function(){return this.model.getModel("label")},n.prototype.isHorizontal=function(){return"horizontal"===this.model.get("orient")},n}(Yo);const _Y=mY;var Sz=Math.PI,Ik=Xn(),yY=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.init=function(t,i){this.api=i},n.prototype.render=function(t,i,a){if(this.model=t,this.api=a,this.ecModel=i,this.group.removeAll(),t.get("show",!0)){var o=this._layout(t,a),l=this._createGroup("_mainGroup"),u=this._createGroup("_labelGroup"),c=this._axis=this._createAxis(o,t);t.formatTooltip=function(h){return Wi("nameValue",{noName:!0,value:c.scale.getLabel({value:h})})},De(["AxisLine","AxisTick","Control","CurrentPointer"],function(h){this["_render"+h](o,l,c,t)},this),this._renderAxisLabel(o,u,c,t),this._position(o,t)}this._doPlayStop(),this._updateTicksStatus()},n.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},n.prototype.dispose=function(){this._clearTimer()},n.prototype._layout=function(t,i){var u,a=t.get(["label","position"]),o=t.get("orient"),l=function xY(r,n){return ui(r.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()},r.get("padding"))}(t,i),c={horizontal:"center",vertical:(u=null==a||"auto"===a?"horizontal"===o?l.y+l.height/2<i.getHeight()/2?"-":"+":l.x+l.width/2<i.getWidth()/2?"+":"-":Qe(a)?{horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[o][a]:a)>=0||"+"===u?"left":"right"},h={horizontal:u>=0||"+"===u?"top":"bottom",vertical:"middle"},f={horizontal:0,vertical:Sz/2},p="vertical"===o?l.height:l.width,v=t.getModel("controlStyle"),m=v.get("show",!0),y=m?v.get("itemSize"):0,C=m?v.get("itemGap"):0,T=y+C,z=t.get(["label","rotate"])||0;z=z*Sz/180;var E,N,X,ve=v.get("position",!0),ce=m&&v.get("showPlayBtn",!0),_e=m&&v.get("showPrevBtn",!0),ze=m&&v.get("showNextBtn",!0),Ee=0,Le=p;"left"===ve||"bottom"===ve?(ce&&(E=[0,0],Ee+=T),_e&&(N=[Ee,0],Ee+=T),ze&&(X=[Le-y,0],Le-=T)):(ce&&(E=[Le-y,0],Le-=T),_e&&(N=[0,0],Ee+=T),ze&&(X=[Le-y,0],Le-=T));var ke=[Ee,Le];return t.get("inverse")&&ke.reverse(),{viewRect:l,mainLength:p,orient:o,rotation:f[o],labelRotation:z,labelPosOpt:u,labelAlign:t.get(["label","align"])||c[o],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||h[o],playPosition:E,prevBtnPosition:N,nextBtnPosition:X,axisExtent:ke,controlSize:y,controlGap:C}},n.prototype._position=function(t,i){var a=this._mainGroup,o=this._labelGroup,l=t.viewRect;if("vertical"===t.orient){var u=[1,0,0,1,0,0],c=l.x,h=l.y+l.height;Co(u,u,[-c,-h]),Ws(u,u,-Sz/2),Co(u,u,[c,h]),(l=l.clone()).applyTransform(u)}var f=E(l),p=E(a.getBoundingRect()),v=E(o.getBoundingRect()),m=[a.x,a.y],y=[o.x,o.y];y[0]=m[0]=f[0][0];var T,C=t.labelPosOpt;function z(X){X.originX=f[0][0]-X.x,X.originY=f[1][0]-X.y}function E(X){return[[X.x,X.x+X.width],[X.y,X.y+X.height]]}function N(X,ve,ce,_e,ze){X[_e]+=ce[_e][ze]-ve[_e][ze]}null==C||Qe(C)?(N(m,p,f,1,T="+"===C?0:1),N(y,v,f,1,1-T)):(N(m,p,f,1,T=C>=0?0:1),y[1]=m[1]+C),a.setPosition(m),o.setPosition(y),a.rotation=o.rotation=t.rotation,z(a),z(o)},n.prototype._createAxis=function(t,i){var a=i.getData(),o=i.get("axisType"),l=function CY(r,n){if(n=n||r.get("type"))switch(n){case"category":return new ZT({ordinalMeta:r.getCategories(),extent:[1/0,-1/0]});case"time":return new eE({locale:r.ecModel.getLocaleModel(),useUTC:r.ecModel.get("useUTC")});default:return new Ku}}(i,o);l.getTicks=function(){return a.mapArray(["value"],function(h){return{value:h}})};var u=a.getDataExtent("value");l.setExtent(u[0],u[1]),l.calcNiceTicks();var c=new _Y("value",l,t.axisExtent,o);return c.model=i,c},n.prototype._createGroup=function(t){var i=this[t]=new hn;return this.group.add(i),i},n.prototype._renderAxisLine=function(t,i,a,o){var l=a.getExtent();if(o.get(["lineStyle","show"])){var u=new Gi({shape:{x1:l[0],y1:0,x2:l[1],y2:0},style:Ge({lineCap:"round"},o.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});i.add(u);var c=this._progressLine=new Gi({shape:{x1:l[0],x2:this._currentPointer?this._currentPointer.x:l[0],y1:0,y2:0},style:Dt({lineCap:"round",lineWidth:u.style.lineWidth},o.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});i.add(c)}},n.prototype._renderAxisTick=function(t,i,a,o){var l=this,u=o.getData(),c=a.scale.getTicks();this._tickSymbols=[],De(c,function(h){var f=a.dataToCoord(h.value),p=u.getItemModel(h.value),v=p.getModel("itemStyle"),m=p.getModel(["emphasis","itemStyle"]),y=p.getModel(["progress","itemStyle"]),C={x:f,y:0,onclick:qe(l._changeTimeline,l,h.value)},T=kk(p,v,i,C);T.ensureState("emphasis").style=m.getItemStyle(),T.ensureState("progress").style=y.getItemStyle(),el(T);var z=dn(T);p.get("tooltip")?(z.dataIndex=h.value,z.dataModel=o):z.dataIndex=z.dataModel=null,l._tickSymbols.push(T)})},n.prototype._renderAxisLabel=function(t,i,a,o){var l=this;if(a.getLabelModel().get("show")){var c=o.getData(),h=a.getViewLabels();this._tickLabels=[],De(h,function(f){var p=f.tickValue,v=c.getItemModel(p),m=v.getModel("label"),y=v.getModel(["emphasis","label"]),C=v.getModel(["progress","label"]),T=a.dataToCoord(f.tickValue),z=new Gn({x:T,y:0,rotation:t.labelRotation-t.rotation,onclick:qe(l._changeTimeline,l,p),silent:!1,style:$r(m,{text:f.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});z.ensureState("emphasis").style=$r(y),z.ensureState("progress").style=$r(C),i.add(z),el(z),Ik(z).dataIndex=p,l._tickLabels.push(z)})}},n.prototype._renderControl=function(t,i,a,o){var l=t.controlSize,u=t.rotation,c=o.getModel("controlStyle").getItemStyle(),h=o.getModel(["emphasis","controlStyle"]).getItemStyle(),f=o.getPlayState(),p=o.get("inverse",!0);function v(m,y,C,T){if(m){var z=xo($t(o.get(["controlStyle",y+"BtnSize"]),l),l),N=function TY(r,n,t,i){var a=i.style,o=xd(r.get(["controlStyle",n]),i||{},new Mn(t[0],t[1],t[2],t[3]));return a&&o.setStyle(a),o}(o,y+"Icon",[0,-z/2,z,z],{x:m[0],y:m[1],originX:l/2,originY:0,rotation:T?-u:0,rectHover:!0,style:c,onclick:C});N.ensureState("emphasis").style=h,i.add(N),el(N)}}v(t.nextBtnPosition,"next",qe(this._changeTimeline,this,p?"-":"+")),v(t.prevBtnPosition,"prev",qe(this._changeTimeline,this,p?"+":"-")),v(t.playPosition,f?"stop":"play",qe(this._handlePlayClick,this,!f),!0)},n.prototype._renderCurrentPointer=function(t,i,a,o){var l=o.getData(),u=o.getCurrentIndex(),c=l.getItemModel(u).getModel("checkpointStyle"),h=this;this._currentPointer=kk(c,c,this._mainGroup,{},this._currentPointer,{onCreate:function(p){p.draggable=!0,p.drift=qe(h._handlePointerDrag,h),p.ondragend=qe(h._handlePointerDragend,h),Lk(p,h._progressLine,u,a,o,!0)},onUpdate:function(p){Lk(p,h._progressLine,u,a,o)}})},n.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},n.prototype._handlePointerDrag=function(t,i,a){this._clearTimer(),this._pointerChangeTimeline([a.offsetX,a.offsetY])},n.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},n.prototype._pointerChangeTimeline=function(t,i){var a=this._toAxisCoord(t)[0],l=da(this._axis.getExtent().slice());a>l[1]&&(a=l[1]),a<l[0]&&(a=l[0]),this._currentPointer.x=a,this._currentPointer.markRedraw(),this._progressLine.shape.x2=a,this._progressLine.dirty();var u=this._findNearestTick(a),c=this.model;(i||u!==c.getCurrentIndex()&&c.get("realtime"))&&this._changeTimeline(u)},n.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var i=t.model;t._changeTimeline(i.getCurrentIndex()+(i.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},n.prototype._toAxisCoord=function(t){return Ts(t,this._mainGroup.getLocalTransform(),!0)},n.prototype._findNearestTick=function(t){var o,i=this.model.getData(),a=1/0,l=this._axis;return i.each(["value"],function(u,c){var h=l.dataToCoord(u),f=Math.abs(h-t);f<a&&(a=f,o=c)}),o},n.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},n.prototype._changeTimeline=function(t){var i=this.model.getCurrentIndex();"+"===t?t=i+1:"-"===t&&(t=i-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},n.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),i=this._tickSymbols,a=this._tickLabels;if(i)for(var o=0;o<i.length;o++)i&&i[o]&&i[o].toggleState("progress",o<t);if(a)for(o=0;o<a.length;o++)a&&a[o]&&a[o].toggleState("progress",Ik(a[o]).dataIndex<=t)},n.type="timeline.slider",n}(vY);function kk(r,n,t,i,a,o){var l=n.get("color");a?(a.setColor(l),t.add(a),o&&o.onUpdate(a)):((a=wi(r.get("symbol"),-1,-1,2,2,l)).setStyle("strokeNoScale",!0),t.add(a),o&&o.onCreate(a));var c=n.getItemStyle(["color"]);a.setStyle(c),i=Zt({rectHover:!0,z2:100},i,!0);var h=$p(r.get("symbolSize"));i.scaleX=h[0]/2,i.scaleY=h[1]/2;var f=wd(r.get("symbolOffset"),h);f&&(i.x=(i.x||0)+f[0],i.y=(i.y||0)+f[1]);var p=r.get("symbolRotate");return i.rotation=(p||0)*Math.PI/180||0,a.attr(i),a.updateTransform(),a}function Lk(r,n,t,i,a,o){if(!r.dragging){var l=a.getModel("checkpointStyle"),u=i.dataToCoord(a.getData().get("value",t));if(o||!l.get("animation",!0))r.attr({x:u,y:0}),n&&n.attr({shape:{x2:u}});else{var c={duration:l.get("animationDuration",!0),easing:l.get("animationEasing",!0)};r.stopAnimation(null,!0),r.animateTo({x:u,y:0},c),n&&n.animateTo({shape:{x2:u}},c)}}}const bY=yY;function zY(r){var n=r&&r.timeline;we(n)||(n=n?[n]:[]),De(n,function(t){!t||function wY(r){var n=r.type,t={number:"value",time:"time"};if(t[n]&&(r.axisType=t[n],delete r.type),Rk(r),Th(r,"controlPosition")){var i=r.controlStyle||(r.controlStyle={});Th(i,"position")||(i.position=r.controlPosition),"none"===i.position&&!Th(i,"show")&&(i.show=!1,delete i.position),delete r.controlPosition}De(r.data||[],function(a){tt(a)&&!we(a)&&(!Th(a,"value")&&Th(a,"name")&&(a.value=a.name),Rk(a))})}(t)})}function Rk(r){var n=r.itemStyle||(r.itemStyle={}),t=n.emphasis||(n.emphasis={}),i=r.label||r.label||{},a=i.normal||(i.normal={}),o={normal:1,emphasis:1};De(i,function(l,u){!o[u]&&!Th(a,u)&&(a[u]=l)}),t.label&&!Th(i,"emphasis")&&(i.emphasis=t.label,delete t.label)}function Th(r,n){return r.hasOwnProperty(n)}function zz(r,n){if(!r)return!1;for(var t=we(r)?r:[r],i=0;i<t.length;i++)if(t[i]&&t[i][n])return!0;return!1}function _y(r){Il(r,"label",["show"])}var yy=Xn(),Nk=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.createdBySelf=!1,t}return R(n,r),n.prototype.init=function(t,i,a){this.mergeDefaultAndTheme(t,a),this._mergeOption(t,a,!1,!0)},n.prototype.isAnimationEnabled=function(){if(gt.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},n.prototype.mergeOption=function(t,i){this._mergeOption(t,i,!1,!1)},n.prototype._mergeOption=function(t,i,a,o){var l=this.mainType;a||i.eachSeries(function(u){var c=u.get(this.mainType,!0),h=yy(u)[l];c&&c.data?(h?h._mergeOption(c,i,!0):(o&&_y(c),De(c.data,function(f){f instanceof Array?(_y(f[0]),_y(f[1])):_y(f)}),Ge(h=this.createMarkerModelFromSeries(c,this,i),{mainType:this.mainType,seriesIndex:u.seriesIndex,name:u.name,createdBySelf:!0}),h.__hostSeries=u),yy(u)[l]=h):yy(u)[l]=null},this)},n.prototype.formatTooltip=function(t,i,a){var o=this.getData(),l=this.getRawValue(t),u=o.getName(t);return Wi("section",{header:this.name,blocks:[Wi("nameValue",{name:u,value:l,noName:!u,noValue:null==l})]})},n.prototype.getData=function(){return this._data},n.prototype.setData=function(t){this._data=t},n.getMarkerModelFromSeries=function(t,i){return yy(t)[i]},n.type="marker",n.dependencies=["series","grid","polar","geo"],n}(Jn);Qt(Nk,Rp.prototype);const sc=Nk;var AY=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.createMarkerModelFromSeries=function(t,i,a){return new n(t,i,a)},n.type="markPoint",n.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},n}(sc);const EY=AY;function Cy(r,n,t,i,a,o){var l=[],c=eu(n,i)?n.getCalculationInfo("stackResultDimension"):i,h=Dz(n,c,r),f=n.indicesOfNearest(c,h)[0];l[a]=n.get(t,f),l[o]=n.get(c,f);var p=n.get(i,f),v=To(n.get(i,f));return(v=Math.min(v,20))>=0&&(l[o]=+l[o].toFixed(v)),[l,p]}var wz={min:yt(Cy,"min"),max:yt(Cy,"max"),average:yt(Cy,"average"),median:yt(Cy,"median")};function Hg(r,n){var t=r.getData(),i=r.coordinateSystem;if(n&&!function OY(r){return!isNaN(parseFloat(r.x))&&!isNaN(parseFloat(r.y))}(n)&&!we(n.coord)&&i){var a=i.dimensions,o=Fk(n,t,i,r);if((n=Nt(n)).type&&wz[n.type]&&o.baseAxis&&o.valueAxis){var l=Ye(a,o.baseAxis.dim),u=Ye(a,o.valueAxis.dim),c=wz[n.type](t,o.baseDataDim,o.valueDataDim,l,u);n.coord=c[0],n.value=c[1]}else{for(var h=[null!=n.xAxis?n.xAxis:n.radiusAxis,null!=n.yAxis?n.yAxis:n.angleAxis],f=0;f<2;f++)wz[h[f]]&&(h[f]=Dz(t,t.mapDimension(a[f]),h[f]));n.coord=h}}return n}function Fk(r,n,t,i){var a={};return null!=r.valueIndex||null!=r.valueDim?(a.valueDataDim=null!=r.valueIndex?n.getDimension(r.valueIndex):r.valueDim,a.valueAxis=t.getAxis(function PY(r,n){var t=r.getData().getDimensionInfo(n);return t&&t.coordDim}(i,a.valueDataDim)),a.baseAxis=t.getOtherAxis(a.valueAxis),a.baseDataDim=n.mapDimension(a.baseAxis.dim)):(a.baseAxis=i.getBaseAxis(),a.valueAxis=t.getOtherAxis(a.baseAxis),a.baseDataDim=n.mapDimension(a.baseAxis.dim),a.valueDataDim=n.mapDimension(a.valueAxis.dim)),a}function Wg(r,n){return!(r&&r.containData&&n.coord&&!function MY(r){return!(isNaN(parseFloat(r.x))&&isNaN(parseFloat(r.y)))}(n))||r.containData(n.coord)}function Bk(r,n){return r?function(t,i,a,o){return Hu(o<2?t.coord&&t.coord[o]:t.value,n[o])}:function(t,i,a,o){return Hu(t.value,n[o])}}function Dz(r,n,t){if("average"===t){var i=0,a=0;return r.each(n,function(o,l){isNaN(o)||(i+=o,a++)}),i/a}return"median"===t?r.getMedian(n):r.getDataExtent(n)["max"===t?1:0]}var Az=Xn(),IY=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.init=function(){this.markerGroupMap=Kt()},n.prototype.render=function(t,i,a){var o=this,l=this.markerGroupMap;l.each(function(u){Az(u).keep=!1}),i.eachSeries(function(u){var c=sc.getMarkerModelFromSeries(u,o.type);c&&o.renderSeries(u,c,i,a)}),l.each(function(u){!Az(u).keep&&o.group.remove(u.group)})},n.prototype.markKeep=function(t){Az(t).keep=!0},n.prototype.toggleBlurSeries=function(t,i){var a=this;De(t,function(o){var l=sc.getMarkerModelFromSeries(o,a.type);l&&l.getData().eachItemGraphicEl(function(c){c&&(i?bm(c):ip(c))})})},n.type="marker",n}(oi);const Ez=IY;function Zk(r,n,t){var i=n.coordinateSystem;r.each(function(a){var l,o=r.getItemModel(a),u=Ht(o.get("x"),t.getWidth()),c=Ht(o.get("y"),t.getHeight());if(isNaN(u)||isNaN(c)){if(n.getMarkerPosition)l=n.getMarkerPosition(r.getValues(r.dimensions,a));else if(i){var h=r.get(i.dimensions[0],a),f=r.get(i.dimensions[1],a);l=i.dataToPoint([h,f])}}else l=[u,c];isNaN(u)||(l[0]=u),isNaN(c)||(l[1]=c),r.setItemLayout(a,l)})}var kY=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.updateTransform=function(t,i,a){i.eachSeries(function(o){var l=sc.getMarkerModelFromSeries(o,"markPoint");l&&(Zk(l.getData(),o,a),this.markerGroupMap.get(o.id).updateLayout())},this)},n.prototype.renderSeries=function(t,i,a,o){var l=t.coordinateSystem,u=t.id,c=t.getData(),h=this.markerGroupMap,f=h.get(u)||h.set(u,new mg),p=function LY(r,n,t){var i;i=r?_t(r&&r.dimensions,function(u){return Ge(Ge({},n.getData().getDimensionInfo(n.getData().mapDimension(u))||{}),{name:u,ordinalMeta:null})}):[{name:"value",type:"float"}];var a=new _a(i,t),o=_t(t.get("data"),yt(Hg,n));r&&(o=_n(o,yt(Wg,r)));var l=Bk(!!r,i);return a.initData(o,null,l),a}(l,t,i);i.setData(p),Zk(i.getData(),t,o),p.each(function(v){var m=p.getItemModel(v),y=m.getShallow("symbol"),C=m.getShallow("symbolSize"),T=m.getShallow("symbolRotate"),z=m.getShallow("symbolOffset"),E=m.getShallow("symbolKeepAspect");if(Pe(y)||Pe(C)||Pe(T)||Pe(z)){var N=i.getRawValue(v),X=i.getDataParams(v);Pe(y)&&(y=y(N,X)),Pe(C)&&(C=C(N,X)),Pe(T)&&(T=T(N,X)),Pe(z)&&(z=z(N,X))}var ve=m.getModel("itemStyle").getItemStyle(),ce=Kp(c,"color");ve.fill||(ve.fill=ce),p.setItemVisual(v,{symbol:y,symbolSize:C,symbolRotate:T,symbolOffset:z,symbolKeepAspect:E,style:ve})}),f.updateData(p),this.group.add(f.group),p.eachItemGraphicEl(function(v){v.traverse(function(m){dn(m).dataModel=i})}),this.markKeep(f),f.group.silent=i.get("silent")||t.get("silent")},n.type="markPoint",n}(Ez);const RY=kY;var FY=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.createMarkerModelFromSeries=function(t,i,a){return new n(t,i,a)},n.type="markLine",n.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},n}(sc);const BY=FY;var xy=Xn(),ZY=function(r,n,t,i){var o,a=r.getData();if(we(i))o=i;else{var l=i.type;if("min"===l||"max"===l||"average"===l||"median"===l||null!=i.xAxis||null!=i.yAxis){var u=void 0,c=void 0;if(null!=i.yAxis||null!=i.xAxis)u=n.getAxis(null!=i.yAxis?"y":"x"),c=Cr(i.yAxis,i.xAxis);else{var h=Fk(i,a,n,r);u=h.valueAxis,c=Dz(a,RT(a,h.valueDataDim),l)}var p="x"===u.dim?0:1,v=1-p,m=Nt(i),y={coord:[]};m.type=null,m.coord=[],m.coord[v]=-1/0,y.coord[v]=1/0;var C=t.get("precision");C>=0&&Ve(c)&&(c=+c.toFixed(Math.min(C,20))),m.coord[p]=y.coord[p]=c,o=[m,y,{type:l,valueIndex:i.valueIndex,value:c}]}else o=[]}var T=[Hg(r,o[0]),Hg(r,o[1]),Ge({},o[2])];return T[2].type=T[2].type||null,Zt(T[2],T[0]),Zt(T[2],T[1]),T};function Ty(r){return!isNaN(r)&&!isFinite(r)}function Uk(r,n,t,i){var a=1-r,o=i.dimensions[r];return Ty(n[a])&&Ty(t[a])&&n[r]===t[r]&&i.getAxis(o).containData(n[r])}function UY(r,n){if("cartesian2d"===r.type){var t=n[0].coord,i=n[1].coord;if(t&&i&&(Uk(1,t,i,r)||Uk(0,t,i,r)))return!0}return Wg(r,n[0])&&Wg(r,n[1])}function Mz(r,n,t,i,a){var u,o=i.coordinateSystem,l=r.getItemModel(n),c=Ht(l.get("x"),a.getWidth()),h=Ht(l.get("y"),a.getHeight());if(isNaN(c)||isNaN(h)){if(i.getMarkerPosition)u=i.getMarkerPosition(r.getValues(r.dimensions,n));else{var p=r.get((f=o.dimensions)[0],n),v=r.get(f[1],n);u=o.dataToPoint([p,v])}if(uh(o,"cartesian2d")){var f,m=o.getAxis("x"),y=o.getAxis("y");Ty(r.get((f=o.dimensions)[0],n))?u[0]=m.toGlobalCoord(m.getExtent()[t?0:1]):Ty(r.get(f[1],n))&&(u[1]=y.toGlobalCoord(y.getExtent()[t?0:1]))}isNaN(c)||(u[0]=c),isNaN(h)||(u[1]=h)}else u=[c,h];r.setItemLayout(n,u)}var VY=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.updateTransform=function(t,i,a){i.eachSeries(function(o){var l=sc.getMarkerModelFromSeries(o,"markLine");if(l){var u=l.getData(),c=xy(l).from,h=xy(l).to;c.each(function(f){Mz(c,f,!0,o,a),Mz(h,f,!1,o,a)}),u.each(function(f){u.setItemLayout(f,[c.getItemLayout(f),h.getItemLayout(f)])}),this.markerGroupMap.get(o.id).updateLayout()}},this)},n.prototype.renderSeries=function(t,i,a,o){var l=t.coordinateSystem,u=t.id,c=t.getData(),h=this.markerGroupMap,f=h.get(u)||h.set(u,new sS);this.group.add(f.group);var p=function HY(r,n,t){var i;i=r?_t(r&&r.dimensions,function(h){return Ge(Ge({},n.getData().getDimensionInfo(n.getData().mapDimension(h))||{}),{name:h,ordinalMeta:null})}):[{name:"value",type:"float"}];var a=new _a(i,t),o=new _a(i,t),l=new _a([],t),u=_t(t.get("data"),yt(ZY,n,r,t));r&&(u=_n(u,yt(UY,r)));var c=Bk(!!r,i);return a.initData(_t(u,function(h){return h[0]}),null,c),o.initData(_t(u,function(h){return h[1]}),null,c),l.initData(_t(u,function(h){return h[2]})),l.hasItemOption=!0,{from:a,to:o,line:l}}(l,t,i),v=p.from,m=p.to,y=p.line;xy(i).from=v,xy(i).to=m,i.setData(y);var C=i.get("symbol"),T=i.get("symbolSize"),z=i.get("symbolRotate"),E=i.get("symbolOffset");function N(X,ve,ce){var _e=X.getItemModel(ve);Mz(X,ve,ce,t,o);var ze=_e.getModel("itemStyle").getItemStyle();null==ze.fill&&(ze.fill=Kp(c,"color")),X.setItemVisual(ve,{symbolKeepAspect:_e.get("symbolKeepAspect"),symbolOffset:$t(_e.get("symbolOffset",!0),E[ce?0:1]),symbolRotate:$t(_e.get("symbolRotate",!0),z[ce?0:1]),symbolSize:$t(_e.get("symbolSize"),T[ce?0:1]),symbol:$t(_e.get("symbol",!0),C[ce?0:1]),style:ze})}we(C)||(C=[C,C]),we(T)||(T=[T,T]),we(z)||(z=[z,z]),we(E)||(E=[E,E]),p.from.each(function(X){N(v,X,!0),N(m,X,!1)}),y.each(function(X){var ve=y.getItemModel(X).getModel("lineStyle").getLineStyle();y.setItemLayout(X,[v.getItemLayout(X),m.getItemLayout(X)]),null==ve.stroke&&(ve.stroke=v.getItemVisual(X,"style").fill),y.setItemVisual(X,{fromSymbolKeepAspect:v.getItemVisual(X,"symbolKeepAspect"),fromSymbolOffset:v.getItemVisual(X,"symbolOffset"),fromSymbolRotate:v.getItemVisual(X,"symbolRotate"),fromSymbolSize:v.getItemVisual(X,"symbolSize"),fromSymbol:v.getItemVisual(X,"symbol"),toSymbolKeepAspect:m.getItemVisual(X,"symbolKeepAspect"),toSymbolOffset:m.getItemVisual(X,"symbolOffset"),toSymbolRotate:m.getItemVisual(X,"symbolRotate"),toSymbolSize:m.getItemVisual(X,"symbolSize"),toSymbol:m.getItemVisual(X,"symbol"),style:ve})}),f.updateData(y),p.line.eachItemGraphicEl(function(X,ve){X.traverse(function(ce){dn(ce).dataModel=i})}),this.markKeep(f),f.group.silent=i.get("silent")||t.get("silent")},n.type="markLine",n}(Ez);const WY=VY;var JY=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.createMarkerModelFromSeries=function(t,i,a){return new n(t,i,a)},n.type="markArea",n.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},n}(sc);const YY=JY;var by=Xn(),QY=function(r,n,t,i){var a=Hg(r,i[0]),o=Hg(r,i[1]),l=a.coord,u=o.coord;l[0]=Cr(l[0],-1/0),l[1]=Cr(l[1],-1/0),u[0]=Cr(u[0],1/0),u[1]=Cr(u[1],1/0);var c=dr([{},a,o]);return c.coord=[a.coord,o.coord],c.x0=a.x,c.y0=a.y,c.x1=o.x,c.y1=o.y,c};function Sy(r){return!isNaN(r)&&!isFinite(r)}function Vk(r,n,t,i){var a=1-r;return Sy(n[a])&&Sy(t[a])}function qY(r,n){var t=n.coord[0],i=n.coord[1];return!!(uh(r,"cartesian2d")&&t&&i&&(Vk(1,t,i)||Vk(0,t,i)))||Wg(r,{coord:t,x:n.x0,y:n.y0})||Wg(r,{coord:i,x:n.x1,y:n.y1})}function Hk(r,n,t,i,a){var u,o=i.coordinateSystem,l=r.getItemModel(n),c=Ht(l.get(t[0]),a.getWidth()),h=Ht(l.get(t[1]),a.getHeight());if(isNaN(c)||isNaN(h)){if(i.getMarkerPosition)u=i.getMarkerPosition(r.getValues(t,n));else{var v=[f=r.get(t[0],n),p=r.get(t[1],n)];o.clampData&&o.clampData(v,v),u=o.dataToPoint(v,!0)}if(uh(o,"cartesian2d")){var m=o.getAxis("x"),y=o.getAxis("y"),f=r.get(t[0],n),p=r.get(t[1],n);Sy(f)?u[0]=m.toGlobalCoord(m.getExtent()["x0"===t[0]?0:1]):Sy(p)&&(u[1]=y.toGlobalCoord(y.getExtent()["y0"===t[1]?0:1]))}isNaN(c)||(u[0]=c),isNaN(h)||(u[1]=h)}else u=[c,h];return u}var Wk=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],KY=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.updateTransform=function(t,i,a){i.eachSeries(function(o){var l=sc.getMarkerModelFromSeries(o,"markArea");if(l){var u=l.getData();u.each(function(c){var h=_t(Wk,function(p){return Hk(u,c,p,o,a)});u.setItemLayout(c,h),u.getItemGraphicEl(c).setShape("points",h)})}},this)},n.prototype.renderSeries=function(t,i,a,o){var l=t.coordinateSystem,u=t.id,c=t.getData(),h=this.markerGroupMap,f=h.get(u)||h.set(u,{group:new hn});this.group.add(f.group),this.markKeep(f);var p=function $Y(r,n,t){var i,a;if(r){var l=_t(r&&r.dimensions,function(h){var f=n.getData();return Ge(Ge({},f.getDimensionInfo(f.mapDimension(h))||{}),{name:h,ordinalMeta:null})});a=_t(["x0","y0","x1","y1"],function(h,f){return{name:h,type:l[f%2].type}}),i=new _a(a,t)}else i=new _a(a=[{name:"value",type:"float"}],t);var u=_t(t.get("data"),yt(QY,n,r,t));r&&(u=_n(u,yt(qY,r)));var c=r?function(h,f,p,v){return Hu(h.coord[Math.floor(v/2)][v%2],a[v])}:function(h,f,p,v){return Hu(h.value,a[v])};return i.initData(u,null,c),i.hasItemOption=!0,i}(l,t,i);i.setData(p),p.each(function(v){var m=_t(Wk,function(ze){return Hk(p,v,ze,t,o)}),y=l.getAxis("x").scale,C=l.getAxis("y").scale,T=y.getExtent(),z=C.getExtent(),E=[y.parse(p.get("x0",v)),y.parse(p.get("x1",v))],N=[C.parse(p.get("y0",v)),C.parse(p.get("y1",v))];da(E),da(N),p.setItemLayout(v,{points:m,allClipped:!!(T[0]>E[1]||T[1]<E[0]||z[0]>N[1]||z[1]<N[0])});var ce=p.getItemModel(v).getModel("itemStyle").getItemStyle(),_e=Kp(c,"color");ce.fill||(ce.fill=_e,Qe(ce.fill)&&(ce.fill=hc(ce.fill,.4))),ce.stroke||(ce.stroke=_e),p.setItemVisual(v,"style",ce)}),p.diff(by(f).data).add(function(v){var m=p.getItemLayout(v);if(!m.allClipped){var y=new Pa({shape:{points:m.points}});p.setItemGraphicEl(v,y),f.group.add(y)}}).update(function(v,m){var y=by(f).data.getItemGraphicEl(m),C=p.getItemLayout(v);C.allClipped?y&&f.group.remove(y):(y?Kn(y,{shape:{points:C.points}},i,v):y=new Pa({shape:{points:C.points}}),p.setItemGraphicEl(v,y),f.group.add(y))}).remove(function(v){var m=by(f).data.getItemGraphicEl(v);f.group.remove(m)}).execute(),p.eachItemGraphicEl(function(v,m){var y=p.getItemModel(m),C=p.getItemVisual(m,"style");v.useStyle(p.getItemVisual(m,"style")),Xi(v,Li(y),{labelFetcher:i,labelDataIndex:m,defaultText:p.getName(m)||"",inheritColor:Qe(C.fill)?hc(C.fill,1):"#000"}),Zi(v,y),di(v,null,null,y.get(["emphasis","disabled"])),dn(v).dataModel=i}),by(f).data=p,f.group.silent=i.get("silent")||t.get("silent")},n.type="markArea",n}(Ez);const jY=KY;var tQ=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.layoutMode={type:"box",ignoreSize:!0},t}return R(n,r),n.prototype.init=function(t,i,a){this.mergeDefaultAndTheme(t,a),t.selected=t.selected||{},this._updateSelector(t)},n.prototype.mergeOption=function(t,i){r.prototype.mergeOption.call(this,t,i),this._updateSelector(t)},n.prototype._updateSelector=function(t){var i=t.selector,a=this.ecModel;!0===i&&(i=t.selector=["all","inverse"]),we(i)&&De(i,function(o,l){Qe(o)&&(o={type:o}),i[l]=Zt(o,function(r,n){return"all"===n?{type:"all",title:r.getLocaleModel().get(["legend","selector","all"])}:"inverse"===n?{type:"inverse",title:r.getLocaleModel().get(["legend","selector","inverse"])}:void 0}(a,o.type))})},n.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&"single"===this.get("selectedMode")){for(var i=!1,a=0;a<t.length;a++){var o=t[a].get("name");if(this.isSelected(o)){this.select(o),i=!0;break}}!i&&this.select(t[0].get("name"))}},n.prototype._updateData=function(t){var i=[],a=[];t.eachRawSeries(function(u){var h;if(a.push(u.name),u.legendVisualProvider){var p=u.legendVisualProvider.getAllNames();t.isSeriesFiltered(u)||(a=a.concat(p)),p.length?i=i.concat(p):h=!0}else h=!0;h&&Pf(u)&&i.push(u.name)}),this._availableNames=a;var l=_t(this.get("data")||i,function(u){return(Qe(u)||Ve(u))&&(u={name:u}),new Or(u,this,this.ecModel)},this);this._data=l},n.prototype.getData=function(){return this._data},n.prototype.select=function(t){var i=this.option.selected;"single"===this.get("selectedMode")&&De(this._data,function(l){i[l.get("name")]=!1}),i[t]=!0},n.prototype.unSelect=function(t){"single"!==this.get("selectedMode")&&(this.option.selected[t]=!1)},n.prototype.toggleSelected=function(t){var i=this.option.selected;i.hasOwnProperty(t)||(i[t]=!0),this[i[t]?"unSelect":"select"](t)},n.prototype.allSelect=function(){var i=this.option.selected;De(this._data,function(a){i[a.get("name",!0)]=!0})},n.prototype.inverseSelect=function(){var i=this.option.selected;De(this._data,function(a){var o=a.get("name",!0);i.hasOwnProperty(o)||(i[o]=!0),i[o]=!i[o]})},n.prototype.isSelected=function(t){var i=this.option.selected;return!(i.hasOwnProperty(t)&&!i[t])&&Ye(this._availableNames,t)>=0},n.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},n.type="legend.plain",n.dependencies=["series"],n.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},n}(Jn);const Oz=tQ;var Qd=yt,Pz=De,zy=hn,nQ=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.newlineDisabled=!1,t}return R(n,r),n.prototype.init=function(){this.group.add(this._contentGroup=new zy),this.group.add(this._selectorGroup=new zy),this._isFirstRender=!0},n.prototype.getContentGroup=function(){return this._contentGroup},n.prototype.getSelectorGroup=function(){return this._selectorGroup},n.prototype.render=function(t,i,a){var o=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),t.get("show",!0)){var l=t.get("align"),u=t.get("orient");(!l||"auto"===l)&&(l="right"===t.get("left")&&"vertical"===u?"right":"left");var c=t.get("selector",!0),h=t.get("selectorPosition",!0);c&&(!h||"auto"===h)&&(h="horizontal"===u?"end":"start"),this.renderInner(l,t,i,a,c,u,h);var f=t.getBoxLayoutParams(),p={width:a.getWidth(),height:a.getHeight()},v=t.get("padding"),m=ui(f,p,v),y=this.layoutInner(t,l,m,o,c,h),C=ui(Dt({width:y.width,height:y.height},f),p,v);this.group.x=C.x-y.x,this.group.y=C.y-y.y,this.group.markRedraw(),this.group.add(this._backgroundEl=XI(y,t))}},n.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},n.prototype.renderInner=function(t,i,a,o,l,u,c){var h=this.getContentGroup(),f=Kt(),p=i.get("selectedMode"),v=[];a.eachRawSeries(function(m){!m.get("legendHoverLink")&&v.push(m.id)}),Pz(i.getData(),function(m,y){var C=m.get("name");if(!this.newlineDisabled&&(""===C||"\n"===C)){var T=new zy;return T.newline=!0,void h.add(T)}var z=a.getSeriesByName(C)[0];if(!f.get(C))if(z){var E=z.getData(),N=E.getVisual("legendLineStyle")||{},X=E.getVisual("legendIcon"),ve=E.getVisual("style");this._createItem(z,C,y,m,i,t,N,ve,X,p).on("click",Qd(Gk,C,null,o,v)).on("mouseover",Qd(Iz,z.name,null,o,v)).on("mouseout",Qd(kz,z.name,null,o,v)),f.set(C,!0)}else a.eachRawSeries(function(_e){if(!f.get(C)&&_e.legendVisualProvider){var ze=_e.legendVisualProvider;if(!ze.containName(C))return;var Ee=ze.indexOfName(C),Le=ze.getItemVisual(Ee,"style"),ke=ze.getItemVisual(Ee,"legendIcon"),Ue=ai(Le.fill);Ue&&0===Ue[3]&&(Ue[3]=.2,Le=Ge(Ge({},Le),{fill:Ka(Ue,"rgba")})),this._createItem(_e,C,y,m,i,t,{},Le,ke,p).on("click",Qd(Gk,null,C,o,v)).on("mouseover",Qd(Iz,null,C,o,v)).on("mouseout",Qd(kz,null,C,o,v)),f.set(C,!0)}},this)},this),l&&this._createSelector(l,i,o,u,c)},n.prototype._createSelector=function(t,i,a,o,l){var u=this.getSelectorGroup();Pz(t,function(h){var f=h.type,p=new Gn({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){a.dispatchAction({type:"all"===f?"legendAllSelect":"legendInverseSelect"})}});u.add(p),Xi(p,{normal:i.getModel("selectorLabel"),emphasis:i.getModel(["emphasis","selectorLabel"])},{defaultText:h.title}),el(p)})},n.prototype._createItem=function(t,i,a,o,l,u,c,h,f,p){var v=t.visualDrawType,m=l.get("itemWidth"),y=l.get("itemHeight"),C=l.isSelected(i),T=o.get("symbolRotate"),z=o.get("symbolKeepAspect"),E=o.get("icon"),N=function rQ(r,n,t,i,a,o){function l(y,C){"auto"===y.lineWidth&&(y.lineWidth=C.lineWidth>0?2:0),Pz(y,function(T,z){"inherit"===y[z]&&(y[z]=C[z])})}var c=n.getModel("itemStyle").getItemStyle(),h=0===r.lastIndexOf("empty",0)?"fill":"stroke";c.decal=i.decal,"inherit"===c.fill&&(c.fill=i[a]),"inherit"===c.stroke&&(c.stroke=i[h]),"inherit"===c.opacity&&(c.opacity=("fill"===a?i:t).opacity),l(c,i);var f=n.getModel("lineStyle"),p=f.getLineStyle();if(l(p,t),"auto"===c.fill&&(c.fill=i.fill),"auto"===c.stroke&&(c.stroke=i.fill),"auto"===p.stroke&&(p.stroke=i.fill),!o){var v=n.get("inactiveBorderWidth");c.lineWidth="auto"===v?i.lineWidth>0&&c[h]?2:0:c.lineWidth,c.fill=n.get("inactiveColor"),c.stroke=n.get("inactiveBorderColor"),p.stroke=f.get("inactiveColor"),p.lineWidth=f.get("inactiveWidth")}return{itemStyle:c,lineStyle:p}}(f=E||f||"roundRect",o,c,h,v,C),X=new zy,ve=o.getModel("textStyle");if(!Pe(t.getLegendIcon)||E&&"inherit"!==E){var ce="inherit"===E&&t.getData().getVisual("symbol")?"inherit"===T?t.getData().getVisual("symbolRotate"):T:0;X.add(function iQ(r){var n=r.icon||"roundRect",t=wi(n,0,0,r.itemWidth,r.itemHeight,r.itemStyle.fill,r.symbolKeepAspect);return t.setStyle(r.itemStyle),t.rotation=(r.iconRotate||0)*Math.PI/180,t.setOrigin([r.itemWidth/2,r.itemHeight/2]),n.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill="#fff",t.style.lineWidth=2),t}({itemWidth:m,itemHeight:y,icon:f,iconRotate:ce,itemStyle:N.itemStyle,lineStyle:N.lineStyle,symbolKeepAspect:z}))}else X.add(t.getLegendIcon({itemWidth:m,itemHeight:y,icon:f,iconRotate:T,itemStyle:N.itemStyle,lineStyle:N.lineStyle,symbolKeepAspect:z}));var _e="left"===u?m+5:-5,ze=u,Ee=l.get("formatter"),Le=i;Qe(Ee)&&Ee?Le=Ee.replace("{name}",null!=i?i:""):Pe(Ee)&&(Le=Ee(i));var ke=o.get("inactiveColor");X.add(new Gn({style:$r(ve,{text:Le,x:_e,y:y/2,fill:C?ve.getTextColor():ke,align:ze,verticalAlign:"middle"})}));var Ue=new Qn({shape:X.getBoundingRect(),invisible:!0}),He=o.getModel("tooltip");return He.get("show")&&Td({el:Ue,componentModel:l,itemName:i,itemTooltipOption:He.option}),X.add(Ue),X.eachChild(function(Ke){Ke.silent=!0}),Ue.silent=!p,this.getContentGroup().add(X),el(X),X.__legendDataIndex=a,X},n.prototype.layoutInner=function(t,i,a,o,l,u){var c=this.getContentGroup(),h=this.getSelectorGroup();$l(t.get("orient"),c,t.get("itemGap"),a.width,a.height);var f=c.getBoundingRect(),p=[-f.x,-f.y];if(h.markRedraw(),c.markRedraw(),l){$l("horizontal",h,t.get("selectorItemGap",!0));var v=h.getBoundingRect(),m=[-v.x,-v.y],y=t.get("selectorButtonGap",!0),C=t.getOrient().index,T=0===C?"width":"height",z=0===C?"height":"width",E=0===C?"y":"x";"end"===u?m[C]+=f[T]+y:p[C]+=v[T]+y,m[1-C]+=f[z]/2-v[z]/2,h.x=m[0],h.y=m[1],c.x=p[0],c.y=p[1];var N={x:0,y:0};return N[T]=f[T]+y+v[T],N[z]=Math.max(f[z],v[z]),N[E]=Math.min(0,v[E]+m[1-C]),N}return c.x=p[0],c.y=p[1],this.group.getBoundingRect()},n.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},n.type="legend.plain",n}(oi);function Gk(r,n,t,i){kz(r,n,t,i),t.dispatchAction({type:"legendToggleSelect",name:null!=r?r:n}),Iz(r,n,t,i)}function Jk(r){for(var t,n=r.getZr().storage.getDisplayList(),i=0,a=n.length;i<a&&!(t=n[i].states.emphasis);)i++;return t&&t.hoverLayer}function Iz(r,n,t,i){Jk(t)||t.dispatchAction({type:"highlight",seriesName:r,name:n,excludeSeriesId:i})}function kz(r,n,t,i){Jk(t)||t.dispatchAction({type:"downplay",seriesName:r,name:n,excludeSeriesId:i})}const Yk=nQ;function aQ(r){var n=r.findComponents({mainType:"legend"});n&&n.length&&r.filterSeries(function(t){for(var i=0;i<n.length;i++)if(!n[i].isSelected(t.name))return!1;return!0})}function Gg(r,n,t){var o,i={},a="toggleSelected"===r;return t.eachComponent("legend",function(l){a&&null!=o?l[o?"select":"unSelect"](n.name):"allSelect"===r||"inverseSelect"===r?l[r]():(l[r](n.name),o=l.isSelected(n.name)),De(l.getData(),function(c){var h=c.get("name");if("\n"!==h&&""!==h){var f=l.isSelected(h);i[h]=i.hasOwnProperty(h)?i[h]&&f:f}})}),"allSelect"===r||"inverseSelect"===r?{selected:i}:{name:n.name,selected:i}}function Qk(r){r.registerComponentModel(Oz),r.registerComponentView(Yk),r.registerProcessor(r.PRIORITY.PROCESSOR.SERIES_FILTER,aQ),r.registerSubTypeDefaulter("legend",function(){return"plain"}),function oQ(r){r.registerAction("legendToggleSelect","legendselectchanged",yt(Gg,"toggleSelected")),r.registerAction("legendAllSelect","legendselectall",yt(Gg,"allSelect")),r.registerAction("legendInverseSelect","legendinverseselect",yt(Gg,"inverseSelect")),r.registerAction("legendSelect","legendselected",yt(Gg,"select")),r.registerAction("legendUnSelect","legendunselected",yt(Gg,"unSelect"))}(r)}var sQ=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},n.prototype.init=function(t,i,a){var o=jl(t);r.prototype.init.call(this,t,i,a),qk(this,t,o)},n.prototype.mergeOption=function(t,i){r.prototype.mergeOption.call(this,t,i),qk(this,this.option,t)},n.type="legend.scroll",n.defaultOption=nl(Oz.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),n}(Oz);function qk(r,n,t){var a=[1,1];a[r.getOrient().index]=0,il(n,t,{type:"box",ignoreSize:!!a})}const lQ=sQ;var Kk=hn,Lz=["width","height"],Rz=["x","y"],uQ=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.newlineDisabled=!0,t._currentIndex=0,t}return R(n,r),n.prototype.init=function(){r.prototype.init.call(this),this.group.add(this._containerGroup=new Kk),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Kk)},n.prototype.resetInner=function(){r.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},n.prototype.renderInner=function(t,i,a,o,l,u,c){var h=this;r.prototype.renderInner.call(this,t,i,a,o,l,u,c);var f=this._controllerGroup,p=i.get("pageIconSize",!0),v=we(p)?p:[p,p];y("pagePrev",0);var m=i.getModel("pageTextStyle");function y(C,T){var z=C+"DataIndex",E=xd(i.get("pageIcons",!0)[i.getOrient().name][T],{onclick:qe(h._pageGo,h,z,i,o)},{x:-v[0]/2,y:-v[1]/2,width:v[0],height:v[1]});E.name=C,f.add(E)}f.add(new Gn({name:"pageText",style:{text:"xx/xx",fill:m.getTextColor(),font:m.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),y("pageNext",1)},n.prototype.layoutInner=function(t,i,a,o,l,u){var c=this.getSelectorGroup(),h=t.getOrient().index,f=Lz[h],p=Rz[h],v=Lz[1-h],m=Rz[1-h];l&&$l("horizontal",c,t.get("selectorItemGap",!0));var y=t.get("selectorButtonGap",!0),C=c.getBoundingRect(),T=[-C.x,-C.y],z=Nt(a);l&&(z[f]=a[f]-C[f]-y);var E=this._layoutContentAndController(t,o,z,h,f,v,m,p);if(l){if("end"===u)T[h]+=E[f]+y;else{var N=C[f]+y;T[h]-=N,E[p]-=N}E[f]+=C[f]+y,T[1-h]+=E[m]+E[v]/2-C[v]/2,E[v]=Math.max(E[v],C[v]),E[m]=Math.min(E[m],C[m]+T[1-h]),c.x=T[0],c.y=T[1],c.markRedraw()}return E},n.prototype._layoutContentAndController=function(t,i,a,o,l,u,c,h){var f=this.getContentGroup(),p=this._containerGroup,v=this._controllerGroup;$l(t.get("orient"),f,t.get("itemGap"),o?a.width:null,o?null:a.height),$l("horizontal",v,t.get("pageButtonItemGap",!0));var m=f.getBoundingRect(),y=v.getBoundingRect(),C=this._showController=m[l]>a[l],T=[-m.x,-m.y];i||(T[o]=f[h]);var z=[0,0],E=[-y.x,-y.y],N=$t(t.get("pageButtonGap",!0),t.get("itemGap",!0));C&&("end"===t.get("pageButtonPosition",!0)?E[o]+=a[l]-y[l]:z[o]+=y[l]+N),E[1-o]+=m[u]/2-y[u]/2,f.setPosition(T),p.setPosition(z),v.setPosition(E);var ve={x:0,y:0};if(ve[l]=C?a[l]:m[l],ve[u]=Math.max(m[u],y[u]),ve[c]=Math.min(0,y[c]+E[1-o]),p.__rectSize=a[l],C){var ce={x:0,y:0};ce[l]=Math.max(a[l]-y[l]-N,0),ce[u]=ve[u],p.setClipPath(new Qn({shape:ce})),p.__rectSize=ce[l]}else v.eachChild(function(ze){ze.attr({invisible:!0,silent:!0})});var _e=this._getPageInfo(t);return null!=_e.pageIndex&&Kn(f,{x:_e.contentPosition[0],y:_e.contentPosition[1]},C?t:null),this._updatePageInfoView(t,_e),ve},n.prototype._pageGo=function(t,i,a){var o=this._getPageInfo(i)[t];null!=o&&a.dispatchAction({type:"legendScroll",scrollDataIndex:o,legendId:i.id})},n.prototype._updatePageInfoView=function(t,i){var a=this._controllerGroup;De(["pagePrev","pageNext"],function(f){var v=null!=i[f+"DataIndex"],m=a.childOfName(f);m&&(m.setStyle("fill",t.get(v?"pageIconColor":"pageIconInactiveColor",!0)),m.cursor=v?"pointer":"default")});var o=a.childOfName("pageText"),l=t.get("pageFormatter"),u=i.pageIndex,c=null!=u?u+1:0,h=i.pageCount;o&&l&&o.setStyle("text",Qe(l)?l.replace("{current}",null==c?"":c+"").replace("{total}",null==h?"":h+""):l({current:c,total:h}))},n.prototype._getPageInfo=function(t){var i=t.get("scrollDataIndex",!0),a=this.getContentGroup(),o=this._containerGroup.__rectSize,l=t.getOrient().index,u=Lz[l],c=Rz[l],h=this._findTargetItemIndex(i),f=a.children(),p=f[h],v=f.length,m=v?1:0,y={contentPosition:[a.x,a.y],pageCount:m,pageIndex:m-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!p)return y;var C=X(p);y.contentPosition[l]=-C.s;for(var T=h+1,z=C,E=C,N=null;T<=v;++T)(!(N=X(f[T]))&&E.e>z.s+o||N&&!ve(N,z.s))&&(z=E.i>z.i?E:N)&&(null==y.pageNextDataIndex&&(y.pageNextDataIndex=z.i),++y.pageCount),E=N;for(T=h-1,z=C,E=C,N=null;T>=-1;--T)(!(N=X(f[T]))||!ve(E,N.s))&&z.i<E.i&&(E=z,null==y.pagePrevDataIndex&&(y.pagePrevDataIndex=z.i),++y.pageCount,++y.pageIndex),z=N;return y;function X(ce){if(ce){var _e=ce.getBoundingRect(),ze=_e[c]+ce[c];return{s:ze,e:ze+_e[u],i:ce.__legendDataIndex}}}function ve(ce,_e){return ce.e>=_e&&ce.s<=_e+o}},n.prototype._findTargetItemIndex=function(t){return this._showController?(this.getContentGroup().eachChild(function(l,u){var c=l.__legendDataIndex;null==o&&null!=c&&(o=u),c===t&&(i=u)}),null!=i?i:o):0;var i,o},n.type="legend.scroll",n}(Yk);const cQ=uQ;function dQ(r){Nn(Qk),r.registerComponentModel(lQ),r.registerComponentView(cQ),function hQ(r){r.registerAction("legendScroll","legendscroll",function(n,t){var i=n.scrollDataIndex;null!=i&&t.eachComponent({mainType:"legend",subType:"scroll",query:n},function(a){a.setScrollDataIndex(i)})})}(r)}var pQ=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.type="dataZoom.inside",n.defaultOption=nl(Zg.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),n}(Zg);const gQ=pQ;var Nz=Xn();function vQ(r,n,t){Nz(r).coordSysRecordMap.each(function(i){var a=i.dataZoomInfoMap.get(n.uid);a&&(a.getRange=t)})}function $k(r,n){if(n){r.removeKey(n.model.uid);var t=n.controller;t&&t.dispose()}}function yQ(r,n){r.isDisposed()||r.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:n})}function CQ(r,n,t,i){return r.coordinateSystem.containPoint([t,i])}var bQ=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="dataZoom.inside",t}return R(n,r),n.prototype.render=function(t,i,a){r.prototype.render.apply(this,arguments),t.noTarget()?this._clear():(this.range=t.getPercentRange(),vQ(a,t,{pan:qe(Fz.pan,this),zoom:qe(Fz.zoom,this),scrollMove:qe(Fz.scrollMove,this)}))},n.prototype.dispose=function(){this._clear(),r.prototype.dispose.apply(this,arguments)},n.prototype._clear=function(){(function mQ(r,n){for(var t=Nz(r).coordSysRecordMap,i=t.keys(),a=0;a<i.length;a++){var l=t.get(i[a]),u=l.dataZoomInfoMap;if(u){var c=n.uid;u.get(c)&&(u.removeKey(c),u.keys().length||$k(t,l))}}})(this.api,this.dataZoomModel),this.range=null},n.type="dataZoom.inside",n}(hz),Fz={zoom:function(r,n,t,i){var a=this.range,o=a.slice(),l=r.axisModels[0];if(l){var u=Bz[n](null,[i.originX,i.originY],l,t,r),c=(u.signal>0?u.pixelStart+u.pixelLength-u.pixel:u.pixel-u.pixelStart)/u.pixelLength*(o[1]-o[0])+o[0],h=Math.max(1/i.scale,0);o[0]=(o[0]-c)*h+c,o[1]=(o[1]-c)*h+c;var f=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(mh(0,o,[0,100],0,f.minSpan,f.maxSpan),this.range=o,a[0]!==o[0]||a[1]!==o[1])return o}},pan:jk(function(r,n,t,i,a,o){var l=Bz[i]([o.oldX,o.oldY],[o.newX,o.newY],n,a,t);return l.signal*(r[1]-r[0])*l.pixel/l.pixelLength}),scrollMove:jk(function(r,n,t,i,a,o){return Bz[i]([0,0],[o.scrollDelta,o.scrollDelta],n,a,t).signal*(r[1]-r[0])*o.scrollDelta})};function jk(r){return function(n,t,i,a){var o=this.range,l=o.slice(),u=n.axisModels[0];if(u&&(mh(r(l,u,n,t,i,a),l,[0,100],"all"),this.range=l,o[0]!==l[0]||o[1]!==l[1]))return l}}var Bz={grid:function(r,n,t,i,a){var o=t.axis,l={},u=a.model.coordinateSystem.getRect();return r=r||[0,0],"x"===o.dim?(l.pixel=n[0]-r[0],l.pixelLength=u.width,l.pixelStart=u.x,l.signal=o.inverse?1:-1):(l.pixel=n[1]-r[1],l.pixelLength=u.height,l.pixelStart=u.y,l.signal=o.inverse?-1:1),l},polar:function(r,n,t,i,a){var o=t.axis,l={},u=a.model.coordinateSystem,c=u.getRadiusAxis().getExtent(),h=u.getAngleAxis().getExtent();return r=r?u.pointToCoord(r):[0,0],n=u.pointToCoord(n),"radiusAxis"===t.mainType?(l.pixel=n[0]-r[0],l.pixelLength=c[1]-c[0],l.pixelStart=c[0],l.signal=o.inverse?1:-1):(l.pixel=n[1]-r[1],l.pixelLength=h[1]-h[0],l.pixelStart=h[0],l.signal=o.inverse?-1:1),l},singleAxis:function(r,n,t,i,a){var o=t.axis,l=a.model.coordinateSystem.getRect(),u={};return r=r||[0,0],"horizontal"===o.orient?(u.pixel=n[0]-r[0],u.pixelLength=l.width,u.pixelStart=l.x,u.signal=o.inverse?1:-1):(u.pixel=n[1]-r[1],u.pixelLength=l.height,u.pixelStart=l.y,u.signal=o.inverse?-1:1),u}};const SQ=bQ;function Xk(r){dz(r),r.registerComponentModel(gQ),r.registerComponentView(SQ),function TQ(r){r.registerProcessor(r.PRIORITY.PROCESSOR.FILTER,function(n,t){var i=Nz(t),a=i.coordSysRecordMap||(i.coordSysRecordMap=Kt());a.each(function(o){o.dataZoomInfoMap=null}),n.eachComponent({mainType:"dataZoom",subType:"inside"},function(o){De(YI(o).infoList,function(u){var c=u.model.uid,h=a.get(c)||a.set(c,function _Q(r,n){var t={model:n,containsPoint:yt(CQ,n),dispatchAction:yt(yQ,r),dataZoomInfoMap:null,controller:null},i=t.controller=new bg(r.getZr());return De(["pan","zoom","scrollMove"],function(a){i.on(a,function(o){var l=[];t.dataZoomInfoMap.each(function(u){if(o.isAvailableBehavior(u.model.option)){var c=(u.getRange||{})[a],h=c&&c(u.dzReferCoordSysInfo,t.model.mainType,t.controller,o);!u.model.get("disabled",!0)&&h&&l.push({dataZoomId:u.model.id,start:h[0],end:h[1]})}}),l.length&&t.dispatchAction(l)})}),t}(t,u.model));(h.dataZoomInfoMap||(h.dataZoomInfoMap=Kt())).set(o.uid,{dzReferCoordSysInfo:u,model:o,getRange:null})})}),a.each(function(o){var u,l=o.controller,c=o.dataZoomInfoMap;if(c){var h=c.keys()[0];null!=h&&(u=c.get(h))}if(u){var f=function xQ(r){var n,t="type_",i={type_true:2,type_move:1,type_false:0,type_undefined:-1},a=!0;return r.each(function(o){var l=o.model,u=!l.get("disabled",!0)&&(!l.get("zoomLock",!0)||"move");i[t+u]>i[t+n]&&(n=u),a=a&&l.get("preventDefaultMouseMove",!0)}),{controlType:n,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!a}}}(c);l.enable(f.controlType,f.opt),l.setPointerChecker(o.containsPoint),bd(o,"dispatchAction",u.model.get("throttle",!0),"fixRate")}else $k(a,o)})})}(r)}var zQ=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.type="dataZoom.slider",n.layoutMode="box",n.defaultOption=nl(Zg.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),n}(Zg);const wQ=zQ;var Jg=Qn,Yg="horizontal",tL="vertical",MQ=["line","bar","candlestick","scatter"],OQ={easing:"cubicOut",duration:100,delay:0},PQ=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t._displayables={},t}return R(n,r),n.prototype.init=function(t,i){this.api=i,this._onBrush=qe(this._onBrush,this),this._onBrushEnd=qe(this._onBrushEnd,this)},n.prototype.render=function(t,i,a,o){if(r.prototype.render.apply(this,arguments),bd(this,"_dispatchZoomAction",t.get("throttle"),"fixRate"),this._orient=t.getOrient(),!1!==t.get("show"))return t.noTarget()?(this._clear(),void this.group.removeAll()):((!o||"dataZoom"!==o.type||o.from!==this.uid)&&this._buildView(),void this._updateView());this.group.removeAll()},n.prototype.dispose=function(){this._clear(),r.prototype.dispose.apply(this,arguments)},n.prototype._clear=function(){Yp(this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},n.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var i=this._displayables.sliderGroup=new hn;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(i),this._positionGroup()},n.prototype._resetLocation=function(){var t=this.dataZoomModel,i=this.api,o=t.get("brushSelect")?7:0,l=this._findCoordRect(),u={width:i.getWidth(),height:i.getHeight()},c=this._orient===Yg?{right:u.width-l.x-l.width,top:u.height-30-7-o,width:l.width,height:30}:{right:7,top:l.y,width:30,height:l.height},h=jl(t.option);De(["right","top","width","height"],function(p){"ph"===h[p]&&(h[p]=c[p])});var f=ui(h,u);this._location={x:f.x,y:f.y},this._size=[f.width,f.height],this._orient===tL&&this._size.reverse()},n.prototype._positionGroup=function(){var t=this.group,i=this._location,a=this._orient,o=this.dataZoomModel.getFirstTargetAxisModel(),l=o&&o.get("inverse"),u=this._displayables.sliderGroup,c=(this._dataShadowInfo||{}).otherAxisInverse;u.attr(a!==Yg||l?a===Yg&&l?{scaleY:c?1:-1,scaleX:-1}:a!==tL||l?{scaleY:c?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:c?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:c?1:-1,scaleX:1});var h=t.getBoundingRect([u]);t.x=i.x-h.x,t.y=i.y-h.y,t.markRedraw()},n.prototype._getViewExtent=function(){return[0,this._size[0]]},n.prototype._renderBackground=function(){var t=this.dataZoomModel,i=this._size,a=this._displayables.sliderGroup,o=t.get("brushSelect");a.add(new Jg({silent:!0,shape:{x:0,y:0,width:i[0],height:i[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var l=new Jg({shape:{x:0,y:0,width:i[0],height:i[1]},style:{fill:"transparent"},z2:0,onclick:qe(this._onClickPanel,this)}),u=this.api.getZr();o?(l.on("mousedown",this._onBrushStart,this),l.cursor="crosshair",u.on("mousemove",this._onBrush),u.on("mouseup",this._onBrushEnd)):(u.off("mousemove",this._onBrush),u.off("mouseup",this._onBrushEnd)),a.add(l)},n.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],t){var i=this._size,a=this._shadowSize||[],o=t.series,l=o.getRawData(),u=o.getShadowDim?o.getShadowDim():t.otherDim;if(null!=u){var c=this._shadowPolygonPts,h=this._shadowPolylinePts;if(l!==this._shadowData||u!==this._shadowDim||i[0]!==a[0]||i[1]!==a[1]){var f=l.getDataExtent(u),p=.3*(f[1]-f[0]);f=[f[0]-p,f[1]+p];var N,v=[0,i[1]],y=[[i[0],0],[0,0]],C=[],T=i[0]/(l.count()-1),z=0,E=Math.round(l.count()/i[0]);l.each([u],function(ze,Ee){if(E>0&&Ee%E)z+=T;else{var Le=null==ze||isNaN(ze)||""===ze,ke=Le?0:mr(ze,f,v,!0);Le&&!N&&Ee?(y.push([y[y.length-1][0],0]),C.push([C[C.length-1][0],0])):!Le&&N&&(y.push([z,0]),C.push([z,0])),y.push([z,ke]),C.push([z,ke]),z+=T,N=Le}}),c=this._shadowPolygonPts=y,h=this._shadowPolylinePts=C}this._shadowData=l,this._shadowDim=u,this._shadowSize=[i[0],i[1]];for(var Ee,Le,ke,Ue,X=this.dataZoomModel,ce=0;ce<3;ce++){var _e=(Ee=void 0,Le=void 0,void 0,void 0,Ee=X.getModel(1===ce?"selectedDataBackground":"dataBackground"),Le=new hn,ke=new Pa({shape:{points:c},segmentIgnoreThreshold:1,style:Ee.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),Ue=new Ia({shape:{points:h},segmentIgnoreThreshold:1,style:Ee.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19}),Le.add(ke),Le.add(Ue),Le);this._displayables.sliderGroup.add(_e),this._displayables.dataShadowSegs.push(_e)}}}},n.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,i=t.get("showDataShadow");if(!1!==i){var a,o=this.ecModel;return t.eachTargetAxis(function(l,u){De(t.getAxisProxy(l,u).getTargetSeriesModels(),function(h){if(!(a||!0!==i&&Ye(MQ,h.get("type"))<0)){var v,f=o.getComponent(ac(l),u).axis,p=function IQ(r){return{x:"y",y:"x",radius:"angle",angle:"radius"}[r]}(l),m=h.coordinateSystem;null!=p&&m.getOtherAxis&&(v=m.getOtherAxis(f).inverse),p=h.getData().mapDimension(p),a={thisAxis:f,series:h,thisDim:l,otherDim:p,otherAxisInverse:v}}},this)},this),a}},n.prototype._renderHandle=function(){var t=this.group,i=this._displayables,a=i.handles=[null,null],o=i.handleLabels=[null,null],l=this._displayables.sliderGroup,u=this._size,c=this.dataZoomModel,h=this.api,f=c.get("borderRadius")||0,p=c.get("brushSelect"),v=i.filler=new Jg({silent:p,style:{fill:c.get("fillerColor")},textConfig:{position:"inside"}});l.add(v),l.add(new Jg({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:u[0],height:u[1],r:f},style:{stroke:c.get("dataBackgroundColor")||c.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),De([0,1],function(N){var X=c.get("handleIcon");!e0[X]&&X.indexOf("path://")<0&&X.indexOf("image://")<0&&(X="path://"+X);var ve=wi(X,-1,0,2,2,null,!0);ve.attr({cursor:nL(this._orient),draggable:!0,drift:qe(this._onDragMove,this,N),ondragend:qe(this._onDragEnd,this),onmouseover:qe(this._showDataInfo,this,!0),onmouseout:qe(this._showDataInfo,this,!1),z2:5});var ce=ve.getBoundingRect(),_e=c.get("handleSize");this._handleHeight=Ht(_e,this._size[1]),this._handleWidth=ce.width/ce.height*this._handleHeight,ve.setStyle(c.getModel("handleStyle").getItemStyle()),ve.style.strokeNoScale=!0,ve.rectHover=!0,ve.ensureState("emphasis").style=c.getModel(["emphasis","handleStyle"]).getItemStyle(),el(ve);var ze=c.get("handleColor");null!=ze&&(ve.style.fill=ze),l.add(a[N]=ve);var Ee=c.getModel("textStyle");t.add(o[N]=new Gn({silent:!0,invisible:!0,style:$r(Ee,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:Ee.getTextColor(),font:Ee.getFont()}),z2:10}))},this);var m=v;if(p){var y=Ht(c.get("moveHandleSize"),u[1]),C=i.moveHandle=new Qn({style:c.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:u[1]-.5,height:y}}),T=.8*y,z=i.moveHandleIcon=wi(c.get("moveHandleIcon"),-T/2,-T/2,T,T,"#fff",!0);z.silent=!0,z.y=u[1]+y/2-.5,C.ensureState("emphasis").style=c.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var E=Math.min(u[1]/2,Math.max(y,10));(m=i.moveZone=new Qn({invisible:!0,shape:{y:u[1]-E,height:y+E}})).on("mouseover",function(){h.enterEmphasis(C)}).on("mouseout",function(){h.leaveEmphasis(C)}),l.add(C),l.add(z),l.add(m)}m.attr({draggable:!0,cursor:nL(this._orient),drift:qe(this._onDragMove,this,"all"),ondragstart:qe(this._showDataInfo,this,!0),ondragend:qe(this._onDragEnd,this),onmouseover:qe(this._showDataInfo,this,!0),onmouseout:qe(this._showDataInfo,this,!1)})},n.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),i=this._getViewExtent();this._handleEnds=[mr(t[0],[0,100],i,!0),mr(t[1],[0,100],i,!0)]},n.prototype._updateInterval=function(t,i){var a=this.dataZoomModel,o=this._handleEnds,l=this._getViewExtent(),u=a.findRepresentativeAxisProxy().getMinMaxSpan(),c=[0,100];mh(i,o,l,a.get("zoomLock")?"all":t,null!=u.minSpan?mr(u.minSpan,c,l,!0):null,null!=u.maxSpan?mr(u.maxSpan,c,l,!0):null);var h=this._range,f=this._range=da([mr(o[0],l,c,!0),mr(o[1],l,c,!0)]);return!h||h[0]!==f[0]||h[1]!==f[1]},n.prototype._updateView=function(t){var i=this._displayables,a=this._handleEnds,o=da(a.slice()),l=this._size;De([0,1],function(m){var C=this._handleHeight;i.handles[m].attr({scaleX:C/2,scaleY:C/2,x:a[m]+(m?-1:1),y:l[1]/2-C/2})},this),i.filler.setShape({x:o[0],y:0,width:o[1]-o[0],height:l[1]});var u={x:o[0],width:o[1]-o[0]};i.moveHandle&&(i.moveHandle.setShape(u),i.moveZone.setShape(u),i.moveZone.getBoundingRect(),i.moveHandleIcon&&i.moveHandleIcon.attr("x",u.x+u.width/2));for(var c=i.dataShadowSegs,h=[0,o[0],o[1],l[0]],f=0;f<c.length;f++){var p=c[f],v=p.getClipPath();v||(v=new Qn,p.setClipPath(v)),v.setShape({x:h[f],y:0,width:h[f+1]-h[f],height:l[1]})}this._updateDataInfo(t)},n.prototype._updateDataInfo=function(t){var i=this.dataZoomModel,a=this._displayables,o=a.handleLabels,l=this._orient,u=["",""];if(i.get("showDetail")){var c=i.findRepresentativeAxisProxy();if(c){var h=c.getAxisModel().axis,f=this._range,p=t?c.calculateDataWindow({start:f[0],end:f[1]}).valueWindow:c.getDataValueWindow();u=[this._formatLabel(p[0],h),this._formatLabel(p[1],h)]}}var v=da(this._handleEnds.slice());function m(y){var C=Gu(a.handles[y].parent,this.group),T=Q_(0===y?"right":"left",C),z=this._handleWidth/2+5,E=Ts([v[y]+(0===y?-z:z),this._size[1]/2],C);o[y].setStyle({x:E[0],y:E[1],verticalAlign:l===Yg?"middle":T,align:l===Yg?T:"center",text:u[y]})}m.call(this,0),m.call(this,1)},n.prototype._formatLabel=function(t,i){var a=this.dataZoomModel,o=a.get("labelFormatter"),l=a.get("labelPrecision");(null==l||"auto"===l)&&(l=i.getPixelPrecision());var u=null==t||isNaN(t)?"":"category"===i.type||"time"===i.type?i.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(l,20));return Pe(o)?o(t,u):Qe(o)?o.replace("{value}",u):u},n.prototype._showDataInfo=function(t){var i=this._displayables,a=i.handleLabels;a[0].attr("invisible",!(t=this._dragging||t)),a[1].attr("invisible",!t),i.moveHandle&&this.api[t?"enterEmphasis":"leaveEmphasis"](i.moveHandle,1)},n.prototype._onDragMove=function(t,i,a,o){this._dragging=!0,Zr(o.event);var u=Ts([i,a],this._displayables.sliderGroup.getLocalTransform(),!0),c=this._updateInterval(t,u[0]),h=this.dataZoomModel.get("realtime");this._updateView(!h),c&&h&&this._dispatchZoomAction(!0)},n.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction(!1)},n.prototype._onClickPanel=function(t){var i=this._size,a=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(a[0]<0||a[0]>i[0]||a[1]<0||a[1]>i[1])){var o=this._handleEnds,u=this._updateInterval("all",a[0]-(o[0]+o[1])/2);this._updateView(),u&&this._dispatchZoomAction(!1)}},n.prototype._onBrushStart=function(t){this._brushStart=new bn(t.offsetX,t.offsetY),this._brushing=!0,this._brushStartTime=+new Date},n.prototype._onBrushEnd=function(t){if(this._brushing){var i=this._displayables.brushRect;if(this._brushing=!1,i){i.attr("ignore",!0);var a=i.shape;if(!(+new Date-this._brushStartTime<200&&Math.abs(a.width)<5)){var l=this._getViewExtent(),u=[0,100];this._range=da([mr(a.x,l,u,!0),mr(a.x+a.width,l,u,!0)]),this._handleEnds=[a.x,a.x+a.width],this._updateView(),this._dispatchZoomAction(!1)}}}},n.prototype._onBrush=function(t){this._brushing&&(Zr(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},n.prototype._updateBrushRect=function(t,i){var a=this._displayables,l=a.brushRect;l||(l=a.brushRect=new Jg({silent:!0,style:this.dataZoomModel.getModel("brushStyle").getItemStyle()}),a.sliderGroup.add(l)),l.attr("ignore",!1);var u=this._brushStart,c=this._displayables.sliderGroup,h=c.transformCoordToLocal(t,i),f=c.transformCoordToLocal(u.x,u.y),p=this._size;h[0]=Math.max(Math.min(p[0],h[0]),0),l.setShape({x:f[0],y:0,width:h[0]-f[0],height:p[1]})},n.prototype._dispatchZoomAction=function(t){var i=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?OQ:null,start:i[0],end:i[1]})},n.prototype._findCoordRect=function(){var t,i=YI(this.dataZoomModel).infoList;if(!t&&i.length){var a=i[0].model.coordinateSystem;t=a.getRect&&a.getRect()}if(!t){var o=this.api.getWidth(),l=this.api.getHeight();t={x:.2*o,y:.2*l,width:.6*o,height:.6*l}}return t},n.type="dataZoom.slider",n}(hz);function nL(r){return"vertical"===r?"ns-resize":"ew-resize"}const kQ=PQ;function rL(r){r.registerComponentModel(wQ),r.registerComponentView(kQ),dz(r)}var RQ={get:function(r,n,t){var i=Nt((NQ[r]||{})[n]);return t&&we(i)?i[i.length-1]:i}},NQ={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};const iL=RQ;var aL=la.mapVisual,FQ=la.eachVisual,BQ=we,oL=De,ZQ=da,UQ=mr,VQ=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.stateList=["inRange","outOfRange"],t.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],t.layoutMode={type:"box",ignoreSize:!0},t.dataBound=[-1/0,1/0],t.targetVisuals={},t.controllerVisuals={},t}return R(n,r),n.prototype.init=function(t,i,a){this.mergeDefaultAndTheme(t,a)},n.prototype.optionUpdated=function(t,i){!i&&bk(this.option,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},n.prototype.resetVisual=function(t){var i=this.stateList;t=qe(t,this),this.controllerVisuals=xz(this.option.controller,i,t),this.targetVisuals=xz(this.option.target,i,t)},n.prototype.getItemSymbol=function(){return null},n.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesIndex,i=[];return null==t||"all"===t?this.ecModel.eachSeries(function(a,o){i.push(o)}):i=Dr(t),i},n.prototype.eachTargetSeries=function(t,i){De(this.getTargetSeriesIndices(),function(a){var o=this.ecModel.getSeriesByIndex(a);o&&t.call(i,o)},this)},n.prototype.isTargetSeries=function(t){var i=!1;return this.eachTargetSeries(function(a){a===t&&(i=!0)}),i},n.prototype.formatValueText=function(t,i,a){var h,o=this.option,l=o.precision,u=this.dataBound,c=o.formatter;a=a||["<",">"],we(t)&&(t=t.slice(),h=!0);var f=i?t:h?[p(t[0]),p(t[1])]:p(t);return Qe(c)?c.replace("{value}",h?f[0]:f).replace("{value2}",h?f[1]:f):Pe(c)?h?c(t[0],t[1]):c(t):h?t[0]===u[0]?a[0]+" "+f[1]:t[1]===u[1]?a[1]+" "+f[0]:f[0]+" - "+f[1]:f;function p(v){return v===u[0]?"min":v===u[1]?"max":(+v).toFixed(Math.min(l,20))}},n.prototype.resetExtent=function(){var t=this.option,i=ZQ([t.min,t.max]);this._dataExtent=i},n.prototype.getDataDimensionIndex=function(t){var i=this.option.dimension;if(null!=i)return t.getDimensionIndex(i);for(var a=t.dimensions,o=a.length-1;o>=0;o--){var u=t.getDimensionInfo(a[o]);if(!u.isCalculationCoord)return u.storeDimIndex}},n.prototype.getExtent=function(){return this._dataExtent.slice()},n.prototype.completeVisualOption=function(){var t=this.ecModel,i=this.option,a={inRange:i.inRange,outOfRange:i.outOfRange},o=i.target||(i.target={}),l=i.controller||(i.controller={});Zt(o,a),Zt(l,a);var u=this.isCategory();function c(p){BQ(i.color)&&!p.inRange&&(p.inRange={color:i.color.slice().reverse()}),p.inRange=p.inRange||{color:t.get("gradientColor")}}c.call(this,o),c.call(this,l),function h(p,v,m){var y=p[v],C=p[m];y&&!C&&(C=p[m]={},oL(y,function(T,z){if(la.isValidType(z)){var E=iL.get(z,"inactive",u);null!=E&&(C[z]=E,"color"===z&&!C.hasOwnProperty("opacity")&&!C.hasOwnProperty("colorAlpha")&&(C.opacity=[0,0]))}}))}.call(this,o,"inRange","outOfRange"),function f(p){var v=(p.inRange||{}).symbol||(p.outOfRange||{}).symbol,m=(p.inRange||{}).symbolSize||(p.outOfRange||{}).symbolSize,y=this.get("inactiveColor"),T=this.getItemSymbol()||"roundRect";oL(this.stateList,function(z){var E=this.itemSize,N=p[z];N||(N=p[z]={color:u?y:[y]}),null==N.symbol&&(N.symbol=v&&Nt(v)||(u?T:[T])),null==N.symbolSize&&(N.symbolSize=m&&Nt(m)||(u?E[0]:[E[0],E[0]])),N.symbol=aL(N.symbol,function(ce){return"none"===ce?T:ce});var X=N.symbolSize;if(null!=X){var ve=-1/0;FQ(X,function(ce){ce>ve&&(ve=ce)}),N.symbolSize=aL(X,function(ce){return UQ(ce,[0,ve],[0,E[0]],!0)})}},this)}.call(this,l)},n.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},n.prototype.isCategory=function(){return!!this.option.categories},n.prototype.setSelected=function(t){},n.prototype.getSelected=function(){return null},n.prototype.getValueState=function(t){return null},n.prototype.getVisualMeta=function(t){return null},n.type="visualMap",n.dependencies=["series"],n.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},n}(Jn);const wy=VQ;var sL=[20,140],HQ=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.optionUpdated=function(t,i){r.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(a){a.mappingMethod="linear",a.dataExtent=this.getExtent()}),this._resetRange()},n.prototype.resetItemSize=function(){r.prototype.resetItemSize.apply(this,arguments);var t=this.itemSize;(null==t[0]||isNaN(t[0]))&&(t[0]=sL[0]),(null==t[1]||isNaN(t[1]))&&(t[1]=sL[1])},n.prototype._resetRange=function(){var t=this.getExtent(),i=this.option.range;!i||i.auto?(t.auto=1,this.option.range=t):we(i)&&(i[0]>i[1]&&i.reverse(),i[0]=Math.max(i[0],t[0]),i[1]=Math.min(i[1],t[1]))},n.prototype.completeVisualOption=function(){r.prototype.completeVisualOption.apply(this,arguments),De(this.stateList,function(t){var i=this.option.controller[t].symbolSize;i&&i[0]!==i[1]&&(i[0]=i[1]/3)},this)},n.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},n.prototype.getSelected=function(){var t=this.getExtent(),i=da((this.get("range")||[]).slice());return i[0]>t[1]&&(i[0]=t[1]),i[1]>t[1]&&(i[1]=t[1]),i[0]<t[0]&&(i[0]=t[0]),i[1]<t[0]&&(i[1]=t[0]),i},n.prototype.getValueState=function(t){var i=this.option.range,a=this.getExtent();return(i[0]<=a[0]||i[0]<=t)&&(i[1]>=a[1]||t<=i[1])?"inRange":"outOfRange"},n.prototype.findTargetDataIndices=function(t){var i=[];return this.eachTargetSeries(function(a){var o=[],l=a.getData();l.each(this.getDataDimensionIndex(l),function(u,c){t[0]<=u&&u<=t[1]&&o.push(c)},this),i.push({seriesId:a.id,dataIndex:o})},this),i},n.prototype.getVisualMeta=function(t){var i=lL(0,0,this.getExtent()),a=lL(0,0,this.option.range.slice()),o=[];function l(m,y){o.push({value:m,color:t(m,y)})}for(var u=0,c=0,h=a.length,f=i.length;c<f&&(!a.length||i[c]<=a[0]);c++)i[c]<a[u]&&l(i[c],"outOfRange");for(var p=1;u<h;u++,p=0)p&&o.length&&l(a[u],"outOfRange"),l(a[u],"inRange");for(p=1;c<f;c++)(!a.length||a[a.length-1]<i[c])&&(p&&(o.length&&l(o[o.length-1].value,"outOfRange"),p=0),l(i[c],"outOfRange"));var v=o.length;return{stops:o,outerColors:[v?o[0].color:"transparent",v?o[v-1].color:"transparent"]}},n.type="visualMap.continuous",n.defaultOption=nl(wy.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),n}(wy);function lL(r,n,t){if(t[0]===t[1])return t.slice();for(var a=(t[1]-t[0])/200,o=t[0],l=[],u=0;u<=200&&o<t[1];u++)l.push(o),o+=a;return l.push(t[1]),l}const WQ=HQ;var GQ=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t.autoPositionValues={left:1,right:1,top:1,bottom:1},t}return R(n,r),n.prototype.init=function(t,i){this.ecModel=t,this.api=i},n.prototype.render=function(t,i,a,o){this.visualMapModel=t,!1!==t.get("show")?this.doRender(t,i,a,o):this.group.removeAll()},n.prototype.renderBackground=function(t){var i=this.visualMapModel,a=Ql(i.get("padding")||0),o=t.getBoundingRect();t.add(new Qn({z2:-1,silent:!0,shape:{x:o.x-a[3],y:o.y-a[0],width:o.width+a[3]+a[1],height:o.height+a[0]+a[2]},style:{fill:i.get("backgroundColor"),stroke:i.get("borderColor"),lineWidth:i.get("borderWidth")}}))},n.prototype.getControllerVisual=function(t,i,a){var o=(a=a||{}).forceState,l=this.visualMapModel,u={};if("color"===i){var c=l.get("contentColor");u.color=c}function h(m){return u[m]}function f(m,y){u[m]=y}var p=l.controllerVisuals[o||l.getValueState(t)];return De(la.prepareVisualTypes(p),function(m){var y=p[m];a.convertOpacityToAlpha&&"opacity"===m&&(m="colorAlpha",y=p.__alphaForOpacity),la.dependsOn(m,i)&&y&&y.applyVisual(t,h,f)}),u[i]},n.prototype.positionGroup=function(t){var a=this.api;dd(t,this.visualMapModel.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})},n.prototype.doRender=function(t,i,a,o){},n.type="visualMap",n}(oi);const uL=GQ;var cL=[["left","right","width"],["top","bottom","height"]];function hL(r,n,t){var i=r.option,a=i.align;if(null!=a&&"auto"!==a)return a;for(var o={width:n.getWidth(),height:n.getHeight()},l="horizontal"===i.orient?1:0,u=cL[l],c=[0,null,10],h={},f=0;f<3;f++)h[cL[1-l][f]]=c[f],h[u[f]]=2===f?t[0]:i[u[f]];var p=[["x","width",3],["y","height",0]][l],v=ui(h,o,i.padding);return u[(v.margin[p[2]]||0)+v[p[0]]+.5*v[p[1]]<.5*o[p[1]]?0:1]}function Dy(r,n){return De(r||[],function(t){null!=t.dataIndex&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(n?n.componentIndex:"")}),r}var dl=mr,JQ=De,dL=Math.min,Uz=Math.max,qQ=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t._shapes={},t._dataInterval=[],t._handleEnds=[],t._hoverLinkDataIndices=[],t}return R(n,r),n.prototype.doRender=function(t,i,a,o){this._api=a,(!o||"selectDataRange"!==o.type||o.from!==this.uid)&&this._buildView()},n.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,i=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(i);var a=t.get("text");this._renderEndsText(i,a,0),this._renderEndsText(i,a,1),this._updateView(!0),this.renderBackground(i),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(i)},n.prototype._renderEndsText=function(t,i,a){if(i){var o=i[1-a];o=null!=o?o+"":"";var l=this.visualMapModel,u=l.get("textGap"),c=l.itemSize,h=this._shapes.mainGroup,f=this._applyTransform([c[0]/2,0===a?-u:c[1]+u],h),p=this._applyTransform(0===a?"bottom":"top",h),v=this._orient;this.group.add(new Gn({style:$r(this.visualMapModel.textStyleModel,{x:f[0],y:f[1],verticalAlign:"horizontal"===v?"middle":p,align:"horizontal"===v?p:"center",text:o})}))}},n.prototype._renderBar=function(t){var i=this.visualMapModel,a=this._shapes,o=i.itemSize,l=this._orient,u=this._useHandle,c=hL(i,this.api,o),h=a.mainGroup=this._createBarGroup(c),f=new hn;h.add(f),f.add(a.outOfRange=fL()),f.add(a.inRange=fL(null,u?gL(this._orient):null,qe(this._dragHandle,this,"all",!1),qe(this._dragHandle,this,"all",!0))),f.setClipPath(new Qn({shape:{x:0,y:0,width:o[0],height:o[1],r:3}}));var p=i.textStyleModel.getTextRect("\u56fd"),v=Uz(p.width,p.height);u&&(a.handleThumbs=[],a.handleLabels=[],a.handleLabelPoints=[],this._createHandle(i,h,0,o,v,l),this._createHandle(i,h,1,o,v,l)),this._createIndicator(i,h,o,v,l),t.add(h)},n.prototype._createHandle=function(t,i,a,o,l,u){var c=qe(this._dragHandle,this,a,!1),h=qe(this._dragHandle,this,a,!0),f=xo(t.get("handleSize"),o[0]),p=wi(t.get("handleIcon"),-f/2,-f/2,f,f,null,!0),v=gL(this._orient);p.attr({cursor:v,draggable:!0,drift:c,ondragend:h,onmousemove:function(z){Zr(z.event)}}),p.x=o[0]/2,p.useStyle(t.getModel("handleStyle").getItemStyle()),p.setStyle({strokeNoScale:!0,strokeFirst:!0}),p.style.lineWidth*=2,p.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),Gl(p,!0),i.add(p);var y=new Gn({cursor:v,draggable:!0,drift:c,onmousemove:function(z){Zr(z.event)},ondragend:h,style:$r(this.visualMapModel.textStyleModel,{x:0,y:0,text:""})});y.ensureState("blur").style={opacity:.1},y.stateTransition={duration:200},this.group.add(y);var C=[f,0],T=this._shapes;T.handleThumbs[a]=p,T.handleLabelPoints[a]=C,T.handleLabels[a]=y},n.prototype._createIndicator=function(t,i,a,o,l){var u=xo(t.get("indicatorSize"),a[0]),c=wi(t.get("indicatorIcon"),-u/2,-u/2,u,u,null,!0);c.attr({cursor:"move",invisible:!0,silent:!0,x:a[0]/2});var h=t.getModel("indicatorStyle").getItemStyle();if(c instanceof ki){var f=c.style;c.useStyle(Ge({image:f.image,x:f.x,y:f.y,width:f.width,height:f.height},h))}else c.useStyle(h);i.add(c);var v=new Gn({silent:!0,invisible:!0,style:$r(this.visualMapModel.textStyleModel,{x:0,y:0,text:""})});this.group.add(v);var m=[("horizontal"===l?o/2:6)+a[0]/2,0],y=this._shapes;y.indicator=c,y.indicatorLabel=v,y.indicatorLabelPoint=m,this._firstShowIndicator=!0},n.prototype._dragHandle=function(t,i,a,o){if(this._useHandle){if(this._dragging=!i,!i){var l=this._applyTransform([a,o],this._shapes.mainGroup,!0);this._updateInterval(t,l[1]),this._hideIndicator(),this._updateView()}i===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),i?!this._hovering&&this._clearHoverLinkToSeries():pL(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},n.prototype._resetInterval=function(){var t=this.visualMapModel,i=this._dataInterval=t.getSelected(),a=t.getExtent(),o=[0,t.itemSize[1]];this._handleEnds=[dl(i[0],a,o,!0),dl(i[1],a,o,!0)]},n.prototype._updateInterval=function(t,i){var a=this.visualMapModel,o=this._handleEnds,l=[0,a.itemSize[1]];mh(i=i||0,o,l,t,0);var u=a.getExtent();this._dataInterval=[dl(o[0],l,u,!0),dl(o[1],l,u,!0)]},n.prototype._updateView=function(t){var i=this.visualMapModel,a=i.getExtent(),o=this._shapes,l=[0,i.itemSize[1]],u=t?l:this._handleEnds,c=this._createBarVisual(this._dataInterval,a,u,"inRange"),h=this._createBarVisual(a,a,l,"outOfRange");o.inRange.setStyle({fill:c.barColor}).setShape("points",c.barPoints),o.outOfRange.setStyle({fill:h.barColor}).setShape("points",h.barPoints),this._updateHandle(u,c)},n.prototype._createBarVisual=function(t,i,a,o){var l={forceState:o,convertOpacityToAlpha:!0},u=this._makeColorGradient(t,l),c=[this.getControllerVisual(t[0],"symbolSize",l),this.getControllerVisual(t[1],"symbolSize",l)],h=this._createBarPoints(a,c);return{barColor:new Cd(0,0,0,1,u),barPoints:h,handlesColor:[u[0].color,u[u.length-1].color]}},n.prototype._makeColorGradient=function(t,i){var o=[],l=(t[1]-t[0])/100;o.push({color:this.getControllerVisual(t[0],"color",i),offset:0});for(var u=1;u<100;u++){var c=t[0]+l*u;if(c>t[1])break;o.push({color:this.getControllerVisual(c,"color",i),offset:u/100})}return o.push({color:this.getControllerVisual(t[1],"color",i),offset:1}),o},n.prototype._createBarPoints=function(t,i){var a=this.visualMapModel.itemSize;return[[a[0]-i[0],t[0]],[a[0],t[0]],[a[0],t[1]],[a[0]-i[1],t[1]]]},n.prototype._createBarGroup=function(t){var i=this._orient,a=this.visualMapModel.get("inverse");return new hn("horizontal"!==i||a?"horizontal"===i&&a?{scaleX:"bottom"===t?-1:1,rotation:-Math.PI/2}:"vertical"!==i||a?{scaleX:"left"===t?1:-1}:{scaleX:"left"===t?1:-1,scaleY:-1}:{scaleX:"bottom"===t?1:-1,rotation:Math.PI/2})},n.prototype._updateHandle=function(t,i){if(this._useHandle){var a=this._shapes,o=this.visualMapModel,l=a.handleThumbs,u=a.handleLabels,c=o.itemSize,h=o.getExtent();JQ([0,1],function(f){var p=l[f];p.setStyle("fill",i.handlesColor[f]),p.y=t[f];var v=dl(t[f],[0,c[1]],h,!0),m=this.getControllerVisual(v,"symbolSize");p.scaleX=p.scaleY=m/c[0],p.x=c[0]-m/2;var y=Ts(a.handleLabelPoints[f],Gu(p,this.group));u[f].setStyle({x:y[0],y:y[1],text:o.formatValueText(this._dataInterval[f]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",a.mainGroup):"center"})},this)}},n.prototype._showIndicator=function(t,i,a,o){var l=this.visualMapModel,u=l.getExtent(),c=l.itemSize,h=[0,c[1]],f=this._shapes,p=f.indicator;if(p){p.attr("invisible",!1);var m=this.getControllerVisual(t,"color",{convertOpacityToAlpha:!0}),y=this.getControllerVisual(t,"symbolSize"),C=dl(t,u,h,!0),T=c[0]-y/2,z={x:p.x,y:p.y};p.y=C,p.x=T;var E=Ts(f.indicatorLabelPoint,Gu(p,this.group)),N=f.indicatorLabel;N.attr("invisible",!1);var X=this._applyTransform("left",f.mainGroup),ce="horizontal"===this._orient;N.setStyle({text:(a||"")+l.formatValueText(i),verticalAlign:ce?X:"middle",align:ce?"center":X});var _e={x:T,y:C,style:{fill:m}},ze={style:{x:E[0],y:E[1]}};if(l.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var Ee={duration:100,easing:"cubicInOut",additive:!0};p.x=z.x,p.y=z.y,p.animateTo(_e,Ee),N.animateTo(ze,Ee)}else p.attr(_e),N.attr(ze);this._firstShowIndicator=!1;var Le=this._shapes.handleLabels;if(Le)for(var ke=0;ke<Le.length;ke++)this._api.enterBlur(Le[ke])}},n.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",function(i){if(t._hovering=!0,!t._dragging){var a=t.visualMapModel.itemSize,o=t._applyTransform([i.offsetX,i.offsetY],t._shapes.mainGroup,!0,!0);o[1]=dL(Uz(0,o[1]),a[1]),t._doHoverLinkToSeries(o[1],0<=o[0]&&o[0]<=a[0])}}).on("mouseout",function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()})},n.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},n.prototype._doHoverLinkToSeries=function(t,i){var a=this.visualMapModel;if(a.option.hoverLink){var l=[0,a.itemSize[1]],u=a.getExtent();t=dL(Uz(l[0],t),l[1]);var c=function KQ(r,n,t){var i=6,a=r.get("hoverLinkDataSize");return a&&(i=dl(a,n,t,!0)/2),i}(a,u,l),h=[t-c,t+c],f=dl(t,l,u,!0),p=[dl(h[0],l,u,!0),dl(h[1],l,u,!0)];h[0]<l[0]&&(p[0]=-1/0),h[1]>l[1]&&(p[1]=1/0),i&&(p[0]===-1/0?this._showIndicator(f,p[1],"< ",c):p[1]===1/0?this._showIndicator(f,p[0],"> ",c):this._showIndicator(f,f,"\u2248 ",c));var v=this._hoverLinkDataIndices,m=[];(i||pL(a))&&(m=this._hoverLinkDataIndices=a.findTargetDataIndices(p));var y=function b1(r,n){var t={},i={};return a(r||[],t),a(n||[],i,t),[o(t),o(i)];function a(l,u,c){for(var h=0,f=l.length;h<f;h++){var p=Si(l[h].seriesId,null);if(null==p)return;for(var v=Dr(l[h].dataIndex),m=c&&c[p],y=0,C=v.length;y<C;y++){var T=v[y];m&&m[T]?m[T]=null:(u[p]||(u[p]={}))[T]=1}}}function o(l,u){var c=[];for(var h in l)if(l.hasOwnProperty(h)&&null!=l[h])if(u)c.push(+h);else{var f=o(l[h],!0);f.length&&c.push({seriesId:h,dataIndex:f})}return c}}(v,m);this._dispatchHighDown("downplay",Dy(y[0],a)),this._dispatchHighDown("highlight",Dy(y[1],a))}},n.prototype._hoverLinkFromSeriesMouseOver=function(t){var i=t.target,a=this.visualMapModel;if(i&&null!=dn(i).dataIndex){var o=dn(i),l=this.ecModel.getSeriesByIndex(o.seriesIndex);if(a.isTargetSeries(l)){var u=l.getData(o.dataType),c=u.getStore().get(a.getDataDimensionIndex(u),o.dataIndex);isNaN(c)||this._showIndicator(c,c)}}},n.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var i=this._shapes.handleLabels;if(i)for(var a=0;a<i.length;a++)this._api.leaveBlur(i[a])},n.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",Dy(t,this.visualMapModel)),t.length=0},n.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},n.prototype._applyTransform=function(t,i,a,o){var l=Gu(i,o?null:this.group);return we(t)?Ts(t,l,a):Q_(t,l,a)},n.prototype._dispatchHighDown=function(t,i){i&&i.length&&this.api.dispatchAction({type:t,batch:i})},n.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},n.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},n.type="visualMap.continuous",n}(uL);function fL(r,n,t,i){return new Pa({shape:{points:r},draggable:!!t,cursor:n,drift:t,onmousemove:function(a){Zr(a.event)},ondragend:i})}function pL(r){var n=r.get("hoverLinkOnHandle");return!!(null==n?r.get("realtime"):n)}function gL(r){return"vertical"===r?"ns-resize":"ew-resize"}const $Q=qQ;var jQ={type:"selectDataRange",event:"dataRangeSelected",update:"update"},XQ=function(r,n){n.eachComponent({mainType:"visualMap",query:r},function(t){t.setSelected(r.selected)})},eq=[{createOnAllSeries:!0,reset:function(r,n){var t=[];return n.eachComponent("visualMap",function(i){var a=r.pipelineContext;!i.isTargetSeries(r)||a&&a.large||t.push(function QJ(r,n,t,i){var a={};return De(r,function(o){var l=la.prepareVisualTypes(n[o]);a[o]=l}),{progress:function(l,u){var c;function h(ve){return lT(u,p,ve)}function f(ve,ce){RD(u,p,ve,ce)}null!=i&&(c=u.getDimensionIndex(i));for(var p,v=u.getStore();null!=(p=l.next());){var m=u.getRawDataItem(p);if(!m||!1!==m.visualMap)for(var y=null!=i?v.get(c,p):p,C=t(y),T=n[C],z=a[C],E=0,N=z.length;E<N;E++){var X=z[E];T[X]&&T[X].applyVisual(y,h,f)}}}}}(i.stateList,i.targetVisuals,qe(i.getValueState,i),i.getDataDimensionIndex(r.getData())))}),t}},{createOnAllSeries:!0,reset:function(r,n){var t=r.getData(),i=[];n.eachComponent("visualMap",function(a){if(a.isTargetSeries(r)){var o=a.getVisualMeta(qe(tq,null,r,a))||{stops:[],outerColors:[]},l=a.getDataDimensionIndex(t);l>=0&&(o.dimension=l,i.push(o))}}),r.getData().setVisual("visualMeta",i)}}];function tq(r,n,t,i){for(var a=n.targetVisuals[i],o=la.prepareVisualTypes(a),l={color:Kp(r.getData(),"color")},u=0,c=o.length;u<c;u++){var h=o[u],f=a["opacity"===h?"__alphaForOpacity":h];f&&f.applyVisual(t,p,v)}return l.color;function p(m){return l[m]}function v(m,y){l[m]=y}}var vL=De;function nq(r){var n=r&&r.visualMap;we(n)||(n=n?[n]:[]),vL(n,function(t){if(t){qd(t,"splitList")&&!qd(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var i=t.pieces;i&&we(i)&&vL(i,function(a){tt(a)&&(qd(a,"start")&&!qd(a,"min")&&(a.min=a.start),qd(a,"end")&&!qd(a,"max")&&(a.max=a.end))})}})}function qd(r,n){return r&&r.hasOwnProperty&&r.hasOwnProperty(n)}var mL=!1;function _L(r){mL||(mL=!0,r.registerSubTypeDefaulter("visualMap",function(n){return n.categories||(n.pieces?n.pieces.length>0:n.splitNumber>0)&&!n.calculable?"piecewise":"continuous"}),r.registerAction(jQ,XQ),De(eq,function(n){r.registerVisual(r.PRIORITY.VISUAL.COMPONENT,n)}),r.registerPreprocessor(nq))}function yL(r){r.registerComponentModel(WQ),r.registerComponentView($Q),_L(r)}var rq=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t._pieceList=[],t}return R(n,r),n.prototype.optionUpdated=function(t,i){r.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var a=this._mode=this._determineMode();this._pieceList=[],iq[this._mode].call(this,this._pieceList),this._resetSelected(t,i);var o=this.option.categories;this.resetVisual(function(l,u){"categories"===a?(l.mappingMethod="category",l.categories=Nt(o)):(l.dataExtent=this.getExtent(),l.mappingMethod="piecewise",l.pieceList=_t(this._pieceList,function(c){return c=Nt(c),"inRange"!==u&&(c.visual=null),c}))})},n.prototype.completeVisualOption=function(){var t=this.option,i={},a=la.listVisualTypes(),o=this.isCategory();function l(u,c,h){return u&&u[c]&&u[c].hasOwnProperty(h)}De(t.pieces,function(u){De(a,function(c){u.hasOwnProperty(c)&&(i[c]=1)})}),De(i,function(u,c){var h=!1;De(this.stateList,function(f){h=h||l(t,f,c)||l(t.target,f,c)},this),!h&&De(this.stateList,function(f){(t[f]||(t[f]={}))[c]=iL.get(c,"inRange"===f?"active":"inactive",o)})},this),r.prototype.completeVisualOption.apply(this,arguments)},n.prototype._resetSelected=function(t,i){var a=this.option,o=this._pieceList,l=(i?a:t).selected||{};if(a.selected=l,De(o,function(c,h){var f=this.getSelectedMapKey(c);l.hasOwnProperty(f)||(l[f]=!0)},this),"single"===a.selectedMode){var u=!1;De(o,function(c,h){var f=this.getSelectedMapKey(c);l[f]&&(u?l[f]=!1:u=!0)},this)}},n.prototype.getItemSymbol=function(){return this.get("itemSymbol")},n.prototype.getSelectedMapKey=function(t){return"categories"===this._mode?t.value+"":t.index+""},n.prototype.getPieceList=function(){return this._pieceList},n.prototype._determineMode=function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},n.prototype.setSelected=function(t){this.option.selected=Nt(t)},n.prototype.getValueState=function(t){var i=la.findPieceIndex(t,this._pieceList);return null!=i&&this.option.selected[this.getSelectedMapKey(this._pieceList[i])]?"inRange":"outOfRange"},n.prototype.findTargetDataIndices=function(t){var i=[],a=this._pieceList;return this.eachTargetSeries(function(o){var l=[],u=o.getData();u.each(this.getDataDimensionIndex(u),function(c,h){la.findPieceIndex(c,a)===t&&l.push(h)},this),i.push({seriesId:o.id,dataIndex:l})},this),i},n.prototype.getRepresentValue=function(t){var i;if(this.isCategory())i=t.value;else if(null!=t.value)i=t.value;else{var a=t.interval||[];i=a[0]===-1/0&&a[1]===1/0?0:(a[0]+a[1])/2}return i},n.prototype.getVisualMeta=function(t){if(!this.isCategory()){var i=[],a=["",""],o=this,u=this._pieceList.slice();if(u.length){var c=u[0].interval[0];c!==-1/0&&u.unshift({interval:[-1/0,c]}),(c=u[u.length-1].interval[1])!==1/0&&u.push({interval:[c,1/0]})}else u.push({interval:[-1/0,1/0]});var h=-1/0;return De(u,function(f){var p=f.interval;p&&(p[0]>h&&l([h,p[0]],"outOfRange"),l(p.slice()),h=p[1])},this),{stops:i,outerColors:a}}function l(f,p){var v=o.getRepresentValue({interval:f});p||(p=o.getValueState(v));var m=t(v,p);f[0]===-1/0?a[0]=m:f[1]===1/0?a[1]=m:i.push({value:f[0],color:m},{value:f[1],color:m})}},n.type="visualMap.piecewise",n.defaultOption=nl(wy.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),n}(wy),iq={splitNumber:function(r){var n=this.option,t=Math.min(n.precision,20),i=this.getExtent(),a=n.splitNumber;a=Math.max(parseInt(a,10),1),n.splitNumber=a;for(var o=(i[1]-i[0])/a;+o.toFixed(t)!==o&&t<5;)t++;n.precision=t,o=+o.toFixed(t),n.minOpen&&r.push({interval:[-1/0,i[0]],close:[0,0]});for(var l=0,u=i[0];l<a;u+=o,l++)r.push({interval:[u,l===a-1?i[1]:u+o],close:[1,1]});n.maxOpen&&r.push({interval:[i[1],1/0],close:[0,0]}),Yh(r),De(r,function(h,f){h.index=f,h.text=this.formatValueText(h.interval)},this)},categories:function(r){var n=this.option;De(n.categories,function(t){r.push({text:this.formatValueText(t,!0),value:t})},this),CL(n,r)},pieces:function(r){var n=this.option;De(n.pieces,function(t,i){tt(t)||(t={value:t});var a={text:"",index:i};if(null!=t.label&&(a.text=t.label),t.hasOwnProperty("value")){var o=a.value=t.value;a.interval=[o,o],a.close=[1,1]}else{for(var l=a.interval=[],u=a.close=[0,0],c=[1,0,1],h=[-1/0,1/0],f=[],p=0;p<2;p++){for(var v=[["gte","gt","min"],["lte","lt","max"]][p],m=0;m<3&&null==l[p];m++)l[p]=t[v[m]],u[p]=c[m],f[p]=2===m;null==l[p]&&(l[p]=h[p])}f[0]&&l[1]===1/0&&(u[0]=0),f[1]&&l[0]===-1/0&&(u[1]=0),l[0]===l[1]&&u[0]&&u[1]&&(a.value=l[0])}a.visual=la.retrieveVisuals(t),r.push(a)},this),CL(n,r),Yh(r),De(r,function(t){var i=t.close;t.text=t.text||this.formatValueText(null!=t.value?t.value:t.interval,!1,[["<","\u2264"][i[1]],[">","\u2265"][i[0]]])},this)}};function CL(r,n){var t=r.inverse;("vertical"===r.orient?!t:t)&&n.reverse()}const aq=rq;var oq=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type=n.type,t}return R(n,r),n.prototype.doRender=function(){var t=this.group;t.removeAll();var i=this.visualMapModel,a=i.get("textGap"),o=i.textStyleModel,l=o.getFont(),u=o.getTextColor(),c=this._getItemAlign(),h=i.itemSize,f=this._getViewData(),p=f.endsText,v=Cr(i.get("showLabel",!0),!p);p&&this._renderEndsText(t,p[0],h,v,c),De(f.viewPieceList,function(m){var y=m.piece,C=new hn;C.onclick=qe(this._onItemClick,this,y),this._enableHoverLink(C,m.indexInModelPieceList);var T=i.getRepresentValue(y);if(this._createItemSymbol(C,T,[0,0,h[0],h[1]]),v){var z=this.visualMapModel.getValueState(T);C.add(new Gn({style:{x:"right"===c?-a:h[0]+a,y:h[1]/2,text:y.text,verticalAlign:"middle",align:c,font:l,fill:u,opacity:"outOfRange"===z?.5:1}}))}t.add(C)},this),p&&this._renderEndsText(t,p[1],h,v,c),$l(i.get("orient"),t,i.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},n.prototype._enableHoverLink=function(t,i){var a=this;t.on("mouseover",function(){return o("highlight")}).on("mouseout",function(){return o("downplay")});var o=function(l){var u=a.visualMapModel;u.option.hoverLink&&a.api.dispatchAction({type:l,batch:Dy(u.findTargetDataIndices(i),u)})}},n.prototype._getItemAlign=function(){var t=this.visualMapModel,i=t.option;if("vertical"===i.orient)return hL(t,this.api,t.itemSize);var a=i.align;return(!a||"auto"===a)&&(a="left"),a},n.prototype._renderEndsText=function(t,i,a,o,l){if(i){var u=new hn;u.add(new Gn({style:$r(this.visualMapModel.textStyleModel,{x:o?"right"===l?a[0]:0:a[0]/2,y:a[1]/2,verticalAlign:"middle",align:o?l:"center",text:i})})),t.add(u)}},n.prototype._getViewData=function(){var t=this.visualMapModel,i=_t(t.getPieceList(),function(u,c){return{piece:u,indexInModelPieceList:c}}),a=t.get("text"),o=t.get("orient"),l=t.get("inverse");return("horizontal"===o?l:!l)?i.reverse():a&&(a=a.slice().reverse()),{viewPieceList:i,endsText:a}},n.prototype._createItemSymbol=function(t,i,a){t.add(wi(this.getControllerVisual(i,"symbol"),a[0],a[1],a[2],a[3],this.getControllerVisual(i,"color")))},n.prototype._onItemClick=function(t){var i=this.visualMapModel,a=i.option,o=Nt(a.selected),l=i.getSelectedMapKey(t);"single"===a.selectedMode?(o[l]=!0,De(o,function(u,c){o[c]=c===l})):o[l]=!o[l],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})},n.type="visualMap.piecewise",n}(uL);const sq=oq;function xL(r){r.registerComponentModel(aq),r.registerComponentView(sq),_L(r)}var uq={label:{enabled:!0},decal:{show:!1}},TL=Xn(),cq={};function hq(r,n){var t=r.getModel("aria");if(t.get("enabled")){var i=Nt(uq);Zt(i.label,r.getLocaleModel().get("aria"),!1),Zt(t.option,i,!1),function a(){if(t.getModel("decal").get("show")){var p=Kt();r.eachSeries(function(v){if(!v.isColorBySeries()){var m=p.get(v.type);m||p.set(v.type,m={}),TL(v).scope=m}}),r.eachRawSeries(function(v){if(!r.isSeriesFiltered(v))if(Pe(v.enableAriaDecal))v.enableAriaDecal();else{var m=v.getData();if(v.isColorBySeries()){var E=v_(v.ecModel,v.name,cq,r.getSeriesCount()),N=m.getVisual("decal");m.setVisual("decal",X(N,E))}else{var y=v.getRawData(),C={},T=TL(v).scope;m.each(function(ve){var ce=m.getRawIndex(ve);C[ce]=ve});var z=y.count();y.each(function(ve){var ce=C[ve],_e=y.getName(ve)||ve+"",ze=v_(v.ecModel,_e,T,z),Ee=m.getItemVisual(ce,"decal");m.setItemVisual(ce,"decal",X(Ee,ze))})}}function X(ve,ce){var _e=ve?Ge(Ge({},ce),ve):ce;return _e.dirty=!0,_e}})}}(),function o(){var h=r.getLocaleModel().get("aria"),f=t.getModel("label");if(f.option=Dt(f.option,h),f.get("enabled")){var p=n.getZr().dom;if(f.get("description"))return void p.setAttribute("aria-label",f.get("description"));var T,v=r.getSeriesCount(),m=f.get(["data","maxCount"])||10,y=f.get(["series","maxCount"])||10,C=Math.min(v,y);if(!(v<1)){var z=function u(){var h=r.get("title");return h&&h.length&&(h=h[0]),h&&h.text}();if(z)T=l(f.get(["general","withTitle"]),{title:z});else T=f.get(["general","withoutTitle"]);var N=[];T+=l(f.get(v>1?["series","multiple","prefix"]:["series","single","prefix"]),{seriesCount:v}),r.eachSeries(function(ze,Ee){if(Ee<C){var Le=void 0,Ue=ze.get("name")?"withName":"withoutName";Le=l(Le=f.get(v>1?["series","multiple",Ue]:["series","single",Ue]),{seriesId:ze.seriesIndex,seriesName:ze.get("name"),seriesType:c(ze.subType)});var He=ze.getData();He.count()>m?Le+=l(f.get(["data","partialData"]),{displayCnt:m}):Le+=f.get(["data","allData"]);for(var nt=f.get(["data","separator","middle"]),lt=f.get(["data","separator","end"]),St=[],mt=0;mt<He.count();mt++)if(mt<m){var wt=He.getName(mt),kt=He.getValues(mt),Yt=f.get(["data",wt?"withName":"withoutName"]);St.push(l(Yt,{name:wt,value:kt.join(nt)}))}Le+=St.join(nt)+lt,N.push(Le)}});var ve=f.getModel(["series","multiple","separator"]),ce=ve.get("middle"),_e=ve.get("end");T+=N.join(ce)+_e,p.setAttribute("aria-label",T)}}}()}function l(h,f){if(!Qe(h))return h;var p=h;return De(f,function(v,m){p=p.replace(new RegExp("\\{\\s*"+m+"\\s*\\}","g"),v)}),p}function c(h){return r.getLocaleModel().get(["series","typeNames"])[h]||"\u81ea\u5b9a\u4e49\u56fe"}}function dq(r){if(r&&r.aria){var n=r.aria;null!=n.show&&(n.enabled=n.show),n.label=n.label||{},De(["description","general","series","data"],function(t){null!=n[t]&&(n.label[t]=n[t])})}}var bL={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},pq=function(){function r(n){null==(this._condVal=Qe(n)?new RegExp(n):ti(n)?n:null)&&Tr("")}return r.prototype.evaluate=function(n){var t=typeof n;return Qe(t)?this._condVal.test(n):!!Ve(t)&&this._condVal.test(n+"")},r}(),gq=function(){function r(){}return r.prototype.evaluate=function(){return this.value},r}(),vq=function(){function r(){}return r.prototype.evaluate=function(){for(var n=this.children,t=0;t<n.length;t++)if(!n[t].evaluate())return!1;return!0},r}(),mq=function(){function r(){}return r.prototype.evaluate=function(){for(var n=this.children,t=0;t<n.length;t++)if(n[t].evaluate())return!0;return!1},r}(),_q=function(){function r(){}return r.prototype.evaluate=function(){return!this.child.evaluate()},r}(),yq=function(){function r(){}return r.prototype.evaluate=function(){for(var n=!!this.valueParser,i=(0,this.getValue)(this.valueGetterParam),a=n?this.valueParser(i):null,o=0;o<this.subCondList.length;o++)if(!this.subCondList[o].evaluate(n?a:i))return!1;return!0},r}();function Vz(r,n){if(!0===r||!1===r){var t=new gq;return t.value=r,t}return zL(r)||Tr(""),r.and?SL("and",r,n):r.or?SL("or",r,n):r.not?function Cq(r,n){var t=r.not;zL(t)||Tr("");var a=new _q;return a.child=Vz(t,n),a.child||Tr(""),a}(r,n):function xq(r,n){for(var i=n.prepareGetValue(r),a=[],o=gn(r),l=r.parser,u=l?yw(l):null,c=0;c<o.length;c++){var h=o[c];if("parser"!==h&&!n.valueGetterAttrMap.get(h)){var f=qt(bL,h)?bL[h]:h,p=r[h],v=u?u(p):p,m=jL(f,v)||"reg"===f&&new pq(v);m||Tr(""),a.push(m)}}a.length||Tr("");var y=new yq;return y.valueGetterParam=i,y.valueParser=u,y.getValue=n.getValue,y.subCondList=a,y}(r,n)}function SL(r,n,t){var i=n[r];we(i)||Tr(""),i.length||Tr("");var o="and"===r?new vq:new mq;return o.children=_t(i,function(l){return Vz(l,t)}),o.children.length||Tr(""),o}function zL(r){return tt(r)&&!zn(r)}var Tq=function(){function r(n,t){this._cond=Vz(n,t)}return r.prototype.evaluate=function(){return this._cond.evaluate()},r}(),Sq={type:"echarts:filter",transform:function(r){for(var t,n=r.upstream,i=function bq(r,n){return new Tq(r,n)}(r.config,{valueGetterAttrMap:Kt({dimension:!0}),prepareGetValue:function(u){var h=u.dimension;qt(u,"dimension")||Tr("");var f=n.getDimensionInfo(h);return f||Tr(""),{dimIdx:f.index}},getValue:function(u){return n.retrieveValueFromItem(t,u.dimIdx)}}),a=[],o=0,l=n.count();o<l;o++)t=n.getRawDataItem(o),i.evaluate()&&a.push(t);return{data:a}}},zq={type:"echarts:sort",transform:function(r){var n=r.upstream,i="",a=Dr(r.config);a.length||Tr(i);var o=[];De(a,function(f){var p=f.dimension,v=f.order,m=f.parser,y=f.incomparable;null==p&&Tr(i),"asc"!==v&&"desc"!==v&&Tr(i),y&&"min"!==y&&"max"!==y&&Tr(""),"asc"!==v&&"desc"!==v&&Tr("");var z=n.getDimensionInfo(p);z||Tr(i);var E=m?yw(m):null;m&&!E&&Tr(i),o.push({dimIdx:z.index,parser:E,comparator:new xw(v,y)})});var l=n.sourceFormat;l!==ea&&l!==to&&Tr(i);for(var u=[],c=0,h=n.count();c<h;c++)u.push(n.getRawDataItem(c));return u.sort(function(f,p){for(var v=0;v<o.length;v++){var m=o[v],y=n.retrieveValueFromItem(f,m.dimIdx),C=n.retrieveValueFromItem(p,m.dimIdx);m.parser&&(y=m.parser(y),C=m.parser(C));var T=m.comparator.evaluate(y,C);if(0!==T)return T}return 0}),{data:u}}},Dq=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="dataset",t}return R(n,r),n.prototype.init=function(t,i,a){r.prototype.init.call(this,t,i,a),this._sourceManager=new Dw(this),Aw(this)},n.prototype.mergeOption=function(t,i){r.prototype.mergeOption.call(this,t,i),Aw(this)},n.prototype.optionUpdated=function(){this._sourceManager.dirty()},n.prototype.getSourceManager=function(){return this._sourceManager},n.type="dataset",n.defaultOption={seriesLayoutBy:Vo},n}(Jn),Aq=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="dataset",t}return R(n,r),n.type="dataset",n}(oi),fl=Fo.CMD;function Kd(r,n){return Math.abs(r-n)<1e-5}function Hz(r){var a,He,Ke,nt,lt,St,mt,wt,kt,Yt,Xt,pn,Bn,Ar,vn,Hn,kn,rn,n=r.data,t=r.len(),i=[],o=0,l=0,u=0,c=0;function h(He,Ke){a&&a.length>2&&i.push(a),a=[He,Ke]}function f(He,Ke,nt,lt){Kd(He,nt)&&Kd(Ke,lt)||a.push(He,Ke,nt,lt,nt,lt)}for(var v,m,y,C,T=0;T<t;){var z=n[T++],E=1===T;switch(E&&(u=o=n[T],c=l=n[T+1],(z===fl.L||z===fl.C||z===fl.Q)&&(a=[u,c])),z){case fl.M:o=u=n[T++],l=c=n[T++],h(u,c);break;case fl.L:f(o,l,v=n[T++],m=n[T++]),o=v,l=m;break;case fl.C:a.push(n[T++],n[T++],n[T++],n[T++],o=n[T++],l=n[T++]);break;case fl.Q:v=n[T++],m=n[T++],y=n[T++],C=n[T++],a.push(o+2/3*(v-o),l+2/3*(m-l),y+2/3*(v-y),C+2/3*(m-C),y,C),o=y,l=C;break;case fl.A:var N=n[T++],X=n[T++],ve=n[T++],ce=n[T++],_e=n[T++],ze=n[T++]+_e;T+=1;var Ee=!n[T++];v=Math.cos(_e)*ve+N,m=Math.sin(_e)*ce+X,E?h(u=v,c=m):f(o,l,v,m),o=Math.cos(ze)*ve+N,l=Math.sin(ze)*ce+X;for(var Le=(Ee?-1:1)*Math.PI/2,ke=_e;Ee?ke>ze:ke<ze;ke+=Le){He=ke,Ke=Ee?Math.max(ke+Le,ze):Math.min(ke+Le,ze),nt=N,lt=X,St=ve,mt=ce,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,wt=Math.abs(Ke-He),kt=4*Math.tan(wt/4)/3,Yt=Ke<He?-1:1,Xt=Math.cos(He),pn=Math.sin(He),Bn=Math.cos(Ke),Ar=Math.sin(Ke),a.push(Xt*St+nt-(kn=St*kt*Yt)*pn,pn*mt+lt+(rn=mt*kt*Yt)*Xt,(vn=Bn*St+nt)+kn*Ar,(Hn=Ar*mt+lt)-rn*Bn,vn,Hn)}break;case fl.R:u=o=n[T++],c=l=n[T++],v=u+n[T++],m=c+n[T++],h(v,c),f(v,c,v,m),f(v,m,u,m),f(u,m,u,c),f(u,c,v,c);break;case fl.Z:a&&f(o,l,u,c),o=u,l=c}}return a&&a.length>2&&i.push(a),i}function Wz(r,n,t,i,a,o,l,u,c,h){if(Kd(r,t)&&Kd(n,i)&&Kd(a,l)&&Kd(o,u))c.push(l,u);else{var f=2/h,p=f*f,v=l-r,m=u-n,y=Math.sqrt(v*v+m*m);v/=y,m/=y;var C=t-r,T=i-n,z=a-l,E=o-u,N=C*C+T*T,X=z*z+E*E;if(N<p&&X<p)c.push(l,u);else{var ve=v*C+m*T,ce=-v*z-m*E;if(N-ve*ve<p&&ve>=0&&X-ce*ce<p&&ce>=0)c.push(l,u);else{var Ee=[],Le=[];vo(r,t,a,l,.5,Ee),vo(n,i,o,u,.5,Le),Wz(Ee[0],Le[0],Ee[1],Le[1],Ee[2],Le[2],Ee[3],Le[3],c,h),Wz(Ee[4],Le[4],Ee[5],Le[5],Ee[6],Le[6],Ee[7],Le[7],c,h)}}}}function wL(r,n,t){var o=Math.abs(r[n]/r[1-n]),l=Math.ceil(Math.sqrt(o*t)),u=Math.floor(t/l);0===u&&(u=1,l=t);for(var c=[],h=0;h<l;h++)c.push(u);var p=t-l*u;if(p>0)for(h=0;h<p;h++)c[h%l]+=1;return c}function DL(r,n,t){for(var i=r.r0,a=r.r,o=r.startAngle,u=Math.abs(r.endAngle-o),c=u*a,h=a-i,f=c>Math.abs(h),p=wL([c,h],f?0:1,n),v=(f?u:h)/p.length,m=0;m<p.length;m++)for(var y=(f?h:u)/p[m],C=0;C<p[m];C++){var T={};f?(T.startAngle=o+v*m,T.endAngle=o+v*(m+1),T.r0=i+y*C,T.r=i+y*(C+1)):(T.startAngle=o+y*C,T.endAngle=o+y*(C+1),T.r0=i+v*m,T.r=i+v*(m+1)),T.clockwise=r.clockwise,T.cx=r.cx,T.cy=r.cy,t.push(T)}}function AL(r,n,t,i){return r*i-t*n}function Pq(r,n,t,i,a,o,l,u){var c=t-r,h=i-n,f=l-a,p=u-o,v=AL(f,p,c,h);if(Math.abs(v)<1e-6)return null;var C=AL(r-a,n-o,f,p)/v;return C<0||C>1?null:new bn(C*c+r,C*h+n)}function Iq(r,n,t){var i=new bn;bn.sub(i,t,n),i.normalize();var a=new bn;return bn.sub(a,r,n),a.dot(i)}function $d(r,n){var t=r[r.length-1];t&&t[0]===n[0]&&t[1]===n[1]||r.push(n)}function EL(r){var n=r.points,t=[],i=[];ed(n,t,i);var a=new Mn(t[0],t[1],i[0]-t[0],i[1]-t[1]),o=a.width,l=a.height,u=a.x,c=a.y,h=new bn,f=new bn;return o>l?(h.x=f.x=u+o/2,h.y=c,f.y=c+l):(h.y=f.y=c+l/2,h.x=u,f.x=u+o),function kq(r,n,t){for(var i=r.length,a=[],o=0;o<i;o++){var l=r[o],u=r[(o+1)%i],c=Pq(l[0],l[1],u[0],u[1],n.x,n.y,t.x,t.y);c&&a.push({projPt:Iq(c,n,t),pt:c,idx:o})}if(a.length<2)return[{points:r},{points:r}];a.sort(function(T,z){return T.projPt-z.projPt});var h=a[0],f=a[a.length-1];if(f.idx<h.idx){var p=h;h=f,f=p}var v=[h.pt.x,h.pt.y],m=[f.pt.x,f.pt.y],y=[v],C=[m];for(o=h.idx+1;o<=f.idx;o++)$d(y,r[o].slice());for($d(y,m),$d(y,v),o=f.idx+1;o<=h.idx+i;o++)$d(C,r[o%i].slice());return $d(C,v),$d(C,m),[{points:y},{points:C}]}(n,h,f)}function Ay(r,n,t,i){if(1===t)i.push(n);else{var a=Math.floor(t/2),o=r(n);Ay(r,o[0],a,i),Ay(r,o[1],t-a,i)}return i}function Rq(r,n){n.setStyle(r.style),n.z=r.z,n.z2=r.z2,n.zlevel=r.zlevel}function Bq(r,n){var t=r.length,i=n.length;if(t===i)return[r,n];for(var a=[],o=[],l=t<i?r:n,u=Math.min(t,i),c=Math.abs(i-t)/6,f=Math.ceil(c/((u-2)/6))+1,p=[l[0],l[1]],v=c,m=2;m<u;){var y=l[m-2],C=l[m-1],T=l[m++],z=l[m++],E=l[m++],N=l[m++],X=l[m++],ve=l[m++];if(v<=0)p.push(T,z,E,N,X,ve);else{for(var ce=Math.min(v,f-1)+1,_e=1;_e<=ce;_e++){var ze=_e/ce;vo(y,T,E,X,ze,a),vo(C,z,N,ve,ze,o),p.push(a[1],o[1],a[2],o[2],y=a[3],C=o[3]),T=a[5],z=o[5],E=a[6],N=o[6]}v-=ce-1}}return l===r?[p,n]:[r,p]}function ML(r,n){for(var t=r.length,i=r[t-2],a=r[t-1],o=[],l=0;l<n.length;)o[l++]=i,o[l++]=a;return o}function OL(r){for(var n=0,t=0,i=0,a=r.length,o=0,l=a-2;o<a;l=o,o+=2){var u=r[l],c=r[l+1],h=r[o],f=r[o+1],p=u*f-h*c;n+=p,t+=(u+h)*p,i+=(c+f)*p}return 0===n?[r[0]||0,r[1]||0]:[t/n/3,i/n/3,n]}function Uq(r,n,t,i){for(var a=(r.length-2)/6,o=1/0,l=0,u=r.length,c=u-2,h=0;h<a;h++){for(var f=6*h,p=0,v=0;v<u;v+=2){var m=0===v?f:(f+v-2)%c+2,E=n[v]-i[0]-(r[m]-t[0]),N=n[v+1]-i[1]-(r[m+1]-t[1]);p+=E*E+N*N}p<o&&(o=p,l=h)}return l}function Vq(r){for(var n=[],t=r.length,i=0;i<t;i+=2)n[i]=r[t-i-2],n[i+1]=r[t-i-1];return n}function Ey(r){return r.__isCombineMorphing}var PL="__mOriginal_";function My(r,n,t){var i=PL+n,a=r[i]||r[n];r[i]||(r[i]=r[n]);var o=t.replace,l=t.after,u=t.before;r[n]=function(){var h,c=arguments;return u&&u.apply(this,c),h=o?o.apply(this,c):a.apply(this,c),l&&l.apply(this,c),h}}function Qg(r,n){var t=PL+n;r[t]&&(r[n]=r[t],r[t]=null)}function IL(r,n){for(var t=0;t<r.length;t++)for(var i=r[t],a=0;a<i.length;){var o=i[a],l=i[a+1];i[a++]=n[0]*o+n[2]*l+n[4],i[a++]=n[1]*o+n[3]*l+n[5]}}function kL(r,n){var t=r.getUpdatedPathProxy(),i=n.getUpdatedPathProxy(),a=function Zq(r,n){for(var t,i,a,o=[],l=[],u=0;u<Math.max(r.length,n.length);u++){var c=r[u],h=n[u],f=void 0,p=void 0;c?h?(i=f=(t=Bq(c,h))[0],a=p=t[1]):(p=ML(a||c,c),f=c):(f=ML(i||h,h),p=h),o.push(f),l.push(p)}return[o,l]}(Hz(t),Hz(i)),o=a[0],l=a[1],u=r.getComputedTransform(),c=n.getComputedTransform();u&&IL(o,u),c&&IL(l,c),My(n,"updateTransform",{replace:function h(){this.transform=null}}),n.transform=null;var f=function Hq(r,n,t,i){for(var o,a=[],l=0;l<r.length;l++){var u=r[l],c=n[l],h=OL(u),f=OL(c);null==o&&(o=h[2]<0!=f[2]<0);var p=[],v=[],m=0,y=1/0,C=[],T=u.length;o&&(u=Vq(u));for(var z=6*Uq(u,c,h,f),E=T-2,N=0;N<E;N+=2){var X=(z+N)%E+2;p[N+2]=u[X]-h[0],p[N+3]=u[X+1]-h[1]}if(p[0]=u[z]-h[0],p[1]=u[z+1]-h[1],t>0)for(var ve=i/t,ce=-i/2;ce<=i/2;ce+=ve){var _e=Math.sin(ce),ze=Math.cos(ce),Ee=0;for(N=0;N<u.length;N+=2){var Le=p[N],ke=p[N+1],Ue=c[N]-f[0],He=c[N+1]-f[1],Ke=Ue*ze-He*_e,nt=Ue*_e+He*ze;C[N]=Ke,C[N+1]=nt;var lt=Ke-Le,St=nt-ke;Ee+=lt*lt+St*St}if(Ee<y){y=Ee,m=ce;for(var mt=0;mt<C.length;mt++)v[mt]=C[mt]}}else for(var wt=0;wt<T;wt+=2)v[wt]=c[wt]-f[0],v[wt+1]=c[wt+1]-f[1];a.push({from:p,to:v,fromCp:h,toCp:f,rotation:-m})}return a}(o,l,10,Math.PI),p=[];My(n,"buildPath",{replace:function(v){for(var m=n.__morphT,y=1-m,C=[],T=0;T<f.length;T++){var z=f[T],E=z.from,N=z.to,X=z.rotation*m,ve=z.fromCp,ce=z.toCp,_e=Math.sin(X),ze=Math.cos(X);Ni(C,ve,ce,m);for(var Ee=0;Ee<E.length;Ee+=2){var Ke=E[Ee]*y+(Ue=N[Ee])*m,nt=E[Ee+1]*y+(He=N[Ee+1])*m;p[Ee]=Ke*ze-nt*_e+C[0],p[Ee+1]=Ke*_e+nt*ze+C[1]}var lt=p[0],St=p[1];for(v.moveTo(lt,St),Ee=2;Ee<E.length;){var Ue=p[Ee++],He=p[Ee++],mt=p[Ee++],wt=p[Ee++],kt=p[Ee++],Yt=p[Ee++];lt===Ue&&St===He&&mt===kt&&wt===Yt?v.lineTo(kt,Yt):v.bezierCurveTo(Ue,He,mt,wt,kt,Yt),lt=kt,St=Yt}}}})}function Gz(r,n,t){if(!r||!n)return n;var i=t.done,a=t.during;return kL(r,n),n.__morphT=0,n.animateTo({__morphT:1},Dt({during:function(l){n.dirtyShape(),a&&a(l)},done:function(){(function o(){Qg(n,"buildPath"),Qg(n,"updateTransform"),n.__morphT=-1,n.createPathProxy(),n.dirtyShape()})(),i&&i()}},t)),n}function Wq(r,n,t,i,a,o){r=a===t?0:Math.round(32767*(r-t)/(a-t)),n=o===i?0:Math.round(32767*(n-i)/(o-i));for(var c,u=0,h=32768;h>0;h/=2){var f=0,p=0;(r&h)>0&&(f=1),(n&h)>0&&(p=1),u+=h*h*(3*f^p),0===p&&(1===f&&(r=h-1-r,n=h-1-n),c=r,r=n,n=c)}return u}function Oy(r){var n=1/0,t=1/0,i=-1/0,a=-1/0,o=_t(r,function(u){var c=u.getBoundingRect(),h=u.getComputedTransform(),f=c.x+c.width/2+(h?h[4]:0),p=c.y+c.height/2+(h?h[5]:0);return n=Math.min(f,n),t=Math.min(p,t),i=Math.max(f,i),a=Math.max(p,a),[f,p]});return _t(o,function(u,c){return{cp:u,z:Wq(u[0],u[1],n,t,i,a),path:r[c]}}).sort(function(u,c){return u.z-c.z}).map(function(u){return u.path})}function LL(r){return function Fq(r,n){var a,t=[],i=r.shape;switch(r.type){case"rect":(function Oq(r,n,t){for(var i=r.width,a=r.height,o=i>a,l=wL([i,a],o?0:1,n),u=o?"width":"height",c=o?"height":"width",h=o?"x":"y",f=o?"y":"x",p=r[u]/l.length,v=0;v<l.length;v++)for(var m=r[c]/l[v],y=0;y<l[v];y++){var C={};C[h]=v*p,C[f]=y*m,C[u]=p,C[c]=m,C.x+=r.x,C.y+=r.y,t.push(C)}})(i,n,t),a=Qn;break;case"sector":DL(i,n,t),a=Oa;break;case"circle":DL({r0:0,r:i.r,startAngle:0,endAngle:2*Math.PI,cx:i.cx,cy:i.cy},n,t),a=Oa;break;default:var o=r.getComputedTransform(),l=o?Math.sqrt(Math.max(o[0]*o[0]+o[1]*o[1],o[2]*o[2]+o[3]*o[3])):1,u=_t(function Mq(r,n){var t=Hz(r),i=[];n=n||1;for(var a=0;a<t.length;a++){var o=t[a],l=[],u=o[0],c=o[1];l.push(u,c);for(var h=2;h<o.length;){var f=o[h++],p=o[h++],v=o[h++],m=o[h++],y=o[h++],C=o[h++];Wz(u,c,f,p,v,m,y,C,l,n),u=y,c=C}i.push(l)}return i}(r.getUpdatedPathProxy(),l),function(z){return function Nq(r){for(var n=[],t=0;t<r.length;)n.push([r[t++],r[t++]]);return n}(z)}),c=u.length;if(0===c)Ay(EL,{points:u[0]},n,t);else if(c===n)for(var h=0;h<c;h++)t.push({points:u[h]});else{var f=0,p=_t(u,function(z){var E=[],N=[];ed(z,E,N);var X=(N[1]-E[1])*(N[0]-E[0]);return f+=X,{poly:z,area:X}});p.sort(function(z,E){return E.area-z.area});var v=n;for(h=0;h<c;h++){var m=p[h];if(v<=0)break;var y=h===c-1?v:Math.ceil(m.area/f*n);y<0||(Ay(EL,{points:m.poly},y,t),v-=y)}}a=Pa}if(!a)return function Lq(r,n){for(var t=[],i=0;i<n;i++)t.push(jx(r));return t}(r,n);var C=[];for(h=0;h<t.length;h++){var T=new a;T.setShape(t[h]),Rq(r,T),C.push(T)}return C}(r.path,r.count)}function RL(r){return we(r[0])}function NL(r,n){for(var t=[],i=r.length,a=0;a<i;a++)t.push({one:r[a],many:[]});for(a=0;a<n.length;a++){var o=n[a].length,l=void 0;for(l=0;l<o;l++)t[l%i].many.push(n[a][l])}var u=0;for(a=i-1;a>=0;a--)if(!t[a].many.length){var c=t[u].many;if(c.length<=1){if(!u)return t;u=0}o=c.length;var h=Math.ceil(o/2);t[a].many=c.slice(h,o),t[u].many=c.slice(0,h),u++}return t}var Yq={clone:function(r){for(var n=[],t=1-Math.pow(1-r.path.style.opacity,1/r.count),i=0;i<r.count;i++){var a=jx(r.path);a.setStyle("opacity",t),n.push(a)}return n},split:null};function Yz(r,n,t,i,a,o){if(r.length&&n.length){var l=wu("update",i,a);if(l&&l.duration>0){var h,f,u=i.getModel("universalTransition").get("delay"),c=Object.assign({setToFinal:!0},l);RL(r)&&(h=r,f=n),RL(n)&&(h=n,f=r);for(var v=h?h===r:r.length>n.length,m=h?NL(f,h):NL(v?n:r,[v?r:n]),y=0,C=0;C<m.length;C++)y+=m[C].many.length;var T=0;for(C=0;C<m.length;C++)p(m[C],v,T,y),T+=m[C].many.length}}function p(z,E,N,X,ve){var ce=z.many,_e=z.one;if(1!==ce.length||ve)for(var ke=Dt({dividePath:Yq[t],individualDelay:u&&function(St,mt,wt,kt){return u(St+N,X)}},c),Ue=E?function Gq(r,n,t){var i=[];!function a(ve){for(var ce=0;ce<ve.length;ce++){var _e=ve[ce];Ey(_e)?a(_e.childrenRef()):_e instanceof Fn&&i.push(_e)}}(r);var o=i.length;if(!o)return{fromIndividuals:[],toIndividuals:[],count:0};var u=(t.dividePath||LL)({path:n,count:o});if(u.length!==o)return console.error("Invalid morphing: unmatched splitted path"),{fromIndividuals:[],toIndividuals:[],count:0};i=Oy(i),u=Oy(u);for(var c=t.done,h=t.during,f=t.individualDelay,p=new ds,v=0;v<o;v++){var m=i[v],y=u[v];y.parent=n,y.copyTransform(p),f||kL(m,y)}function C(ve){for(var ce=0;ce<u.length;ce++)u[ce].addSelfToZr(ve)}function T(){n.__isCombineMorphing=!1,n.__morphT=-1,n.childrenRef=null,Qg(n,"addSelfToZr"),Qg(n,"removeSelfFromZr")}n.__isCombineMorphing=!0,n.childrenRef=function(){return u},My(n,"addSelfToZr",{after:function(ve){C(ve)}}),My(n,"removeSelfFromZr",{after:function(ve){for(var ce=0;ce<u.length;ce++)u[ce].removeSelfFromZr(ve)}});var z=u.length;if(f){var E=z,N=function(){0==--E&&(T(),c&&c())};for(v=0;v<z;v++){var X=f?Dt({delay:(t.delay||0)+f(v,z,i[v],u[v]),done:N},t):t;Gz(i[v],u[v],X)}}else n.__morphT=0,n.animateTo({__morphT:1},Dt({during:function(ve){for(var ce=0;ce<z;ce++){var _e=u[ce];_e.__morphT=n.__morphT,_e.dirtyShape()}h&&h(ve)},done:function(){T();for(var ve=0;ve<r.length;ve++)Qg(r[ve],"updateTransform");c&&c()}},t));return n.__zr&&C(n.__zr),{fromIndividuals:i,toIndividuals:u,count:z}}(ce,_e,ke):function Jq(r,n,t){var i=n.length,a=[],o=t.dividePath||LL;if(Ey(r)){!function l(m){for(var y=0;y<m.length;y++){var C=m[y];Ey(C)?l(C.childrenRef()):C instanceof Fn&&a.push(C)}}(r.childrenRef());var u=a.length;if(u<i)for(var c=0,h=u;h<i;h++)a.push(jx(a[c++%u]));a.length=i}else{a=o({path:r,count:i});var f=r.getComputedTransform();for(h=0;h<a.length;h++)a[h].setLocalTransform(f);if(a.length!==i)return console.error("Invalid morphing: unmatched splitted path"),{fromIndividuals:[],toIndividuals:[],count:0}}a=Oy(a),n=Oy(n);var p=t.individualDelay;for(h=0;h<i;h++){var v=p?Dt({delay:(t.delay||0)+p(h,i,a[h],n[h])},t):t;Gz(a[h],n[h],v)}return{fromIndividuals:a,toIndividuals:n,count:n.length}}(_e,ce,ke),He=Ue.fromIndividuals,Ke=Ue.toIndividuals,nt=He.length,lt=0;lt<nt;lt++)Le=u?Dt({delay:u(lt,nt)},c):c,o(He[lt],Ke[lt],E?ce[lt]:z.one,E?z.one:ce[lt],Le);else{var Le,ze=E?ce[0]:_e,Ee=E?_e:ce[0];Ey(ze)?p({many:[ze],one:Ee},!0,N,X,!0):(Gz(ze,Ee,Le=u?Dt({delay:u(N,X)},c):c),o(ze,Ee,ze,Ee,Le))}}}function bh(r){if(!r)return[];if(we(r)){for(var n=[],t=0;t<r.length;t++)n.push(bh(r[t]));return n}var i=[];return r.traverse(function(a){a instanceof Fn&&!a.disableMorphing&&!a.invisible&&!a.ignore&&i.push(a)}),i}var Qq=Xn();function BL(r){var n=[];return De(r,function(t){var i=t.data;if(!(i.count()>1e4))for(var a=i.getIndices(),o=function qq(r){for(var n=r.dimensions,t=0;t<n.length;t++){var i=r.getDimensionInfo(n[t]);if(i&&0===i.otherDims.itemGroupId)return n[t]}}(i),l=0;l<a.length;l++)n.push({data:i,dim:t.dim||o,divide:t.divide,dataIndex:l})}),n}function Qz(r,n,t){r.traverse(function(i){i instanceof Fn&&Kr(i,{style:{opacity:0}},n,{dataIndex:t,isFrom:!0})})}function qz(r){if(r.parent){var n=r.getComputedTransform();r.setLocalTransform(n),r.parent.remove(r)}}function jd(r){r.stopAnimation(),r.isGroup&&r.traverse(function(n){n.stopAnimation()})}function ZL(r,n,t){var i=BL(r),a=BL(n);function o(z,E,N,X,ve){(N||z)&&E.animateFrom({style:N&&N!==z?Ge(Ge({},N.style),z.style):z.style},ve)}function l(z){for(var E=0;E<z.length;E++)if(z[E].dim)return z[E].dim}var u=l(i),c=l(a),h=!1;function f(z,E){return function(N){var X=N.data,ve=N.dataIndex;if(E)return X.getId(ve);var ce=X.hostModel&&X.hostModel.get("dataGroupId"),_e=z?u||c:c||u,ze=_e&&X.getDimensionInfo(_e),Ee=ze&&ze.ordinalMeta;if(ze){var Le=X.get(ze.name,ve);return Ee&&Ee.categories[Le]||Le+""}var ke=X.getRawDataItem(ve);return ke&&ke.groupId?ke.groupId+"":ce||X.getId(ve)}}var p=function $q(r,n){var t=r.length;if(t!==n.length)return!1;for(var i=0;i<t;i++){var a=r[i],o=n[i];if(a.data.getId(a.dataIndex)!==o.data.getId(o.dataIndex))return!1}return!0}(i,a),v={};if(!p)for(var m=0;m<a.length;m++){var y=a[m],C=y.data.getItemGraphicEl(y.dataIndex);C&&(v[C.id]=!0)}function T(z,E){var N=i[E],X=a[z],ve=X.data.hostModel,ce=N.data.getItemGraphicEl(N.dataIndex),_e=X.data.getItemGraphicEl(X.dataIndex);ce!==_e?ce&&v[ce.id]||_e&&(jd(_e),ce?(jd(ce),qz(ce),h=!0,Yz(bh(ce),bh(_e),X.divide,ve,z,o)):Qz(_e,ve,z)):_e&&function Kq(r,n,t){var i=wu("update",t,n);i&&r.traverse(function(a){if(a instanceof $a){var o=function BC(r){return Om(r).oldStyle}(a);o&&a.animateFrom({style:o},i)}})}(_e,X.dataIndex,ve)}new Xl(i,a,f(!0,p),f(!1,p),null,"multiple").update(T).updateManyToOne(function(z,E){var N=a[z],X=N.data,ve=X.hostModel,ce=X.getItemGraphicEl(N.dataIndex),_e=_n(_t(E,function(ze){return i[ze].data.getItemGraphicEl(i[ze].dataIndex)}),function(ze){return ze&&ze!==ce&&!v[ze.id]});ce&&(jd(ce),_e.length?(De(_e,function(ze){jd(ze),qz(ze)}),h=!0,Yz(bh(_e),bh(ce),N.divide,ve,z,o)):Qz(ce,ve,N.dataIndex))}).updateOneToMany(function(z,E){var N=i[E],X=N.data.getItemGraphicEl(N.dataIndex);if(!X||!v[X.id]){var ve=_n(_t(z,function(_e){return a[_e].data.getItemGraphicEl(a[_e].dataIndex)}),function(_e){return _e&&_e!==X}),ce=a[z[0]].data.hostModel;ve.length&&(De(ve,function(_e){return jd(_e)}),X?(jd(X),qz(X),h=!0,Yz(bh(X),bh(ve),N.divide,ce,z[0],o)):De(ve,function(_e){return Qz(_e,ce,z[0])}))}}).updateManyToMany(function(z,E){new Xl(E,z,function(N){return i[N].data.getId(i[N].dataIndex)},function(N){return a[N].data.getId(a[N].dataIndex)}).update(function(N,X){T(z[N],E[X])}).execute()}).execute(),h&&De(n,function(z){var N=z.data.hostModel,X=N&&t.getViewOfSeriesModel(N),ve=wu("update",N,0);X&&N.isAnimationEnabled()&&ve&&ve.duration>0&&X.group.traverse(function(ce){ce instanceof Fn&&!ce.animators.length&&ce.animateFrom({style:{opacity:0}},ve)})})}function UL(r){return r.getModel("universalTransition").get("seriesKey")||r.id}function VL(r){return we(r)?r.sort().join(","):r}function lc(r){if(r.hostModel)return r.hostModel.getModel("universalTransition").get("divideShape")}function HL(r,n){for(var t=0;t<r.length;t++)if(null!=n.seriesIndex&&n.seriesIndex===r[t].seriesIndex||null!=n.seriesId&&n.seriesId===r[t].id)return t}Nn([function EF(r){r.registerPainter("canvas",AF)}]),Nn([function cB(r){r.registerPainter("svg",uB)}]),Nn([function kB(r){r.registerChartView(OB),r.registerSeriesModel(dB),r.registerLayout(_g("line",!0)),r.registerVisual({seriesType:"line",reset:function(n){var t=n.getData(),i=n.getModel("lineStyle").getLineStyle();i&&!i.stroke&&(i.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",i)}}),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,y2("line"))},function jB(r){r.registerChartView($B),r.registerSeriesModel(RB),r.registerLayout(r.PRIORITY.VISUAL.LAYOUT,yt(QA,"bar")),r.registerLayout(r.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,qA("bar")),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,y2("bar")),r.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(n,t){t.eachComponent({mainType:n.componentType||"series",query:n},function(a){n.sortInfo&&a.axis.setCategorySortInfo(n.sortInfo)})})},function h5(r){r.registerChartView(o5),r.registerSeriesModel(u5),ND("pie",r.registerAction),r.registerLayout(yt(XB,"pie")),r.registerProcessor(yg("pie")),r.registerProcessor(function c5(r){return{seriesType:r,reset:function(n,t){var i=n.getData();i.filterSelf(function(a){var o=i.mapDimension("value"),l=i.get(o,a);return!(Ve(l)&&!isNaN(l)&&l<0)})}}}("pie"))},function X5(r){Nn(rM),r.registerSeriesModel(f5),r.registerChartView(y5),r.registerLayout(_g("scatter"))},function vZ(r){Nn(gZ),r.registerChartView(rZ),r.registerSeriesModel(aZ),r.registerLayout(eZ),r.registerProcessor(yg("radar")),r.registerPreprocessor(tZ)},function cU(r){Nn(BM),r.registerChartView(QZ),r.registerSeriesModel(KZ),r.registerLayout(XZ),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,jZ),ND("map",r.registerAction)},function VU(r){r.registerChartView(SU),r.registerSeriesModel(RU),r.registerLayout(FU),r.registerVisual(ZU),function UU(r){r.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(n,t){t.eachComponent({mainType:"series",subType:"tree",query:n},function(i){var a=n.dataIndex,l=i.getData().tree.getNodeByDataIndex(a);l.isExpand=!l.isExpand})}),r.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(n,t){t.eachComponent({mainType:"series",subType:"tree",query:n},function(i){var o=Lb(i.coordinateSystem,n);i.setCenter&&i.setCenter(o.center),i.setZoom&&i.setZoom(o.zoom)})})}(r)},function E4(r){r.registerSeriesModel(JU),r.registerChartView(s4),r.registerVisual(f4),r.registerLayout(x4),function HU(r){for(var n=0;n<qM.length;n++)r.registerAction({type:qM[n],update:"updateView"},kr);r.registerAction({type:"treemapRootToNode",update:"updateView"},function(t,i){i.eachComponent({mainType:"series",subType:"treemap",query:t},function a(o,l){var c=Dg(t,["treemapZoomToNode","treemapRootToNode"],o);if(c){var h=o.getViewRoot();h&&(t.direction=Ub(h,c.node)?"rollUp":"drillDown"),o.resetViewRoot(c.node)}})})}(r)},function r9(r){r.registerChartView($4),r.registerSeriesModel(t9),r.registerProcessor(M4),r.registerVisual(O4),r.registerVisual(P4),r.registerLayout(N4),r.registerLayout(r.PRIORITY.VISUAL.POST_CHART_LAYOUT,B4),r.registerLayout(U4),r.registerCoordinateSystem("graphView",{dimensions:zg.dimensions,create:H4}),r.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},kr),r.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},kr),r.registerAction(n9,function(n,t){t.eachComponent({mainType:"series",query:n},function(i){var o=Lb(i.coordinateSystem,n);i.setCenter&&i.setCenter(o.center),i.setZoom&&i.setZoom(o.zoom)})})},function f9(r){r.registerChartView(c9),r.registerSeriesModel(d9)},function S9(r){r.registerChartView(m9),r.registerSeriesModel(y9),r.registerLayout(b9),r.registerProcessor(yg("funnel"))},function AV(r){Nn(lP),r.registerChartView(E9),r.registerSeriesModel(I9),r.registerVisual(r.PRIORITY.VISUAL.BRUSH,R9)},function tH(r){r.registerChartView(IV),r.registerSeriesModel(LV),r.registerLayout(RV),r.registerVisual(eH),r.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(n,t){t.eachComponent({mainType:"series",subType:"sankey",query:n},function(i){i.setNodePosition(n.dataIndex,[n.localX,n.localY])})})},function gH(r){r.registerSeriesModel(nH),r.registerChartView(sH),r.registerVisual(lH),r.registerLayout(uH),r.registerTransform(pH)},function kH(r){r.registerChartView(TH),r.registerSeriesModel(bH),r.registerPreprocessor(SH),r.registerVisual(MH),r.registerLayout(IH)},function UH(r){r.registerChartView(FH),r.registerSeriesModel(ZH),r.registerLayout(_g("effectScatter"))},function o8(r){r.registerChartView(jH),r.registerSeriesModel(n8),r.registerLayout(bP),r.registerVisual(a8)},function v8(r){r.registerChartView(f8),r.registerSeriesModel(g8)},function E8(r){r.registerChartView(w8),r.registerSeriesModel(A8),r.registerLayout(r.PRIORITY.VISUAL.LAYOUT,yt(QA,"pictorialBar")),r.registerLayout(r.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,qA("pictorialBar"))},function N8(r){r.registerChartView(P8),r.registerSeriesModel(k8),r.registerLayout(L8),r.registerProcessor(yg("themeRiver"))},function K8(r){r.registerChartView(W8),r.registerSeriesModel(J8),r.registerLayout(yt(Y8,"sunburst")),r.registerProcessor(yt(yg,"sunburst")),r.registerVisual(q8),function V8(r){r.registerAction({type:RS,update:"updateView"},function(n,t){t.eachComponent({mainType:"series",subType:"sunburst",query:n},function i(a,o){var l=Dg(n,[RS],a);if(l){var u=a.getViewRoot();u&&(n.direction=Ub(u,l.node)?"rollUp":"drillDown"),a.resetViewRoot(l.node)}})}),r.registerAction({type:UP,update:"none"},function(n,t,i){n=Ge({},n),t.eachComponent({mainType:"series",subType:"sunburst",query:n},function a(o){var l=Dg(n,[UP],o);l&&(n.dataIndex=l.node.dataIndex)}),i.dispatchAction(Ge(n,{type:"highlight"}))}),r.registerAction({type:"sunburstUnhighlight",update:"updateView"},function(n,t,i){n=Ge({},n),i.dispatchAction(Ge(n,{type:"downplay"}))})}(r)},function L7(r){r.registerChartView(z7),r.registerSeriesModel(X8)}]),Nn(function iW(r){Nn(rM),Nn(Bg)}),Nn(function BW(r){Nn(Bg),hh.registerAxisPointerClass("PolarAxisPointer",lW),r.registerCoordinateSystem("polar",TW),r.registerComponentModel(cW),r.registerComponentView(FW),Rd(r,"angle",hW,RW),Rd(r,"radius",dW,NW),r.registerComponentView(wW),r.registerComponentView(PW),r.registerLayout(yt(LW,"bar"))}),Nn(BM),Nn(function rG(r){Nn(Bg),hh.registerAxisPointerClass("SingleAxisPointer",tG),r.registerComponentView(nG),r.registerComponentView(WW),r.registerComponentModel(oz),Rd(r,"single",oz,oz.defaultOption),r.registerCoordinateSystem("single",$W)}),Nn(lP),Nn(function cG(r){r.registerComponentModel(aG),r.registerComponentView(sG),r.registerCoordinateSystem("calendar",uG)}),Nn(function yG(r){r.registerComponentModel(gG),r.registerComponentView(vG),r.registerPreprocessor(function(n){var t=n.graphic;we(t)?n.graphic=t[0]&&t[0].elements?[n.graphic[0]]:[{elements:t}]:t&&!t.elements&&(n.graphic=[{elements:[t]}])})}),Nn(function CJ(r){r.registerComponentModel(NG),r.registerComponentView(UG),Jd("saveAsImage",HG),Jd("magicType",JG),Jd("dataView",rJ),Jd("dataZoom",yJ),Jd("restore",uJ),Nn(LG)}),Nn(function HJ(r){Nn(Bg),r.registerComponentModel(TJ),r.registerComponentView(VJ),r.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},kr),r.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},kr)}),Nn(Bg),Nn(function uY(r){r.registerComponentView(nY),r.registerComponentModel(aY),r.registerPreprocessor(GJ),r.registerVisual(r.PRIORITY.VISUAL.BRUSH,KJ),r.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(n,t){t.eachComponent({mainType:"brush",query:n},function(i){i.setAreas(n.areas)})}),r.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},kr),r.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},kr),Jd("brush",lY)}),Nn(function dY(r){r.registerComponentModel(cY),r.registerComponentView(hY)}),Nn(function DY(r){r.registerComponentModel(pY),r.registerComponentView(bY),r.registerSubTypeDefaulter("timeline",function(){return"slider"}),function SY(r){r.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(n,t,i){var a=t.getComponent("timeline");return a&&null!=n.currentIndex&&(a.setCurrentIndex(n.currentIndex),!a.get("loop",!0)&&a.isIndexMax()&&a.getPlayState()&&(a.setPlayState(!1),i.dispatchAction({type:"timelinePlayChange",playState:!1,from:n.from}))),t.resetOption("timeline",{replaceMerge:a.get("replaceMerge",!0)}),Dt({currentIndex:a.option.currentIndex},n)}),r.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(n,t){var i=t.getComponent("timeline");i&&null!=n.playState&&i.setPlayState(n.playState)})}(r),r.registerPreprocessor(zY)}),Nn(function NY(r){r.registerComponentModel(EY),r.registerComponentView(RY),r.registerPreprocessor(function(n){zz(n.series,"markPoint")&&(n.markPoint=n.markPoint||{})})}),Nn(function GY(r){r.registerComponentModel(BY),r.registerComponentView(WY),r.registerPreprocessor(function(n){zz(n.series,"markLine")&&(n.markLine=n.markLine||{})})}),Nn(function XY(r){r.registerComponentModel(YY),r.registerComponentView(jY),r.registerPreprocessor(function(n){zz(n.series,"markArea")&&(n.markArea=n.markArea||{})})}),Nn(function fQ(r){Nn(Qk),Nn(dQ)}),Nn(function LQ(r){Nn(Xk),Nn(rL)}),Nn(Xk),Nn(rL),Nn(function lq(r){Nn(yL),Nn(xL)}),Nn(yL),Nn(xL),Nn(function fq(r){r.registerPreprocessor(dq),r.registerVisual(r.PRIORITY.VISUAL.ARIA,hq)}),Nn(function wq(r){r.registerTransform(Sq),r.registerTransform(zq)}),Nn(function Eq(r){r.registerComponentModel(Dq),r.registerComponentView(Aq)}),Nn(function eK(r){r.registerUpdateLifecycle("series:beforeupdate",function(n,t,i){De(Dr(i.seriesTransition),function(a){De(Dr(a.to),function(o){for(var l=i.updatedSeries,u=0;u<l.length;u++)(null!=o.seriesIndex&&o.seriesIndex===l[u].seriesIndex||null!=o.seriesId&&o.seriesId===l[u].id)&&(l[u][I_]=!0)})})}),r.registerUpdateLifecycle("series:transition",function(n,t,i){var a=Qq(t);if(a.oldSeries&&i.updatedSeries&&i.optionChanged){var o=i.seriesTransition;if(o)De(Dr(o),function(v){!function Xq(r,n,t,i){var a=[],o=[];De(Dr(r.from),function(l){var u=HL(n.oldSeries,l);u>=0&&a.push({data:n.oldData[u],divide:lc(n.oldData[u]),dim:l.dimension})}),De(Dr(r.to),function(l){var u=HL(t.updatedSeries,l);if(u>=0){var c=t.updatedSeries[u].getData();o.push({data:c,divide:lc(c),dim:l.dimension})}}),a.length>0&&o.length>0&&ZL(a,o,i)}(v,a,i,t)});else{var l=function jq(r,n){var t=Kt(),i=Kt(),a=Kt();return De(r.oldSeries,function(l,u){var c=r.oldData[u],h=UL(l),f=VL(h);i.set(f,c),we(h)&&De(h,function(p){a.set(p,{data:c,key:f})})}),De(n.updatedSeries,function(l){if(l.isUniversalTransitionEnabled()&&l.isAnimationEnabled()){var u=l.getData(),c=UL(l),h=VL(c),f=i.get(h);if(f)t.set(h,{oldSeries:[{divide:lc(f),data:f}],newSeries:[{divide:lc(u),data:u}]});else if(we(c)){var p=[];De(c,function(y){var C=i.get(y);C&&p.push({divide:lc(C),data:C})}),p.length&&t.set(h,{oldSeries:p,newSeries:[{data:u,divide:lc(u)}]})}else{var v=a.get(c);if(v){var m=t.get(v.key);m||(m={oldSeries:[{data:v.data,divide:lc(v.data)}],newSeries:[]},t.set(v.key,m)),m.newSeries.push({data:u,divide:lc(u)})}}}}),t}(a,i);De(l.keys(),function(v){var m=l.get(v);ZL(m.oldSeries,m.newSeries,t)})}De(i.updatedSeries,function(v){v[I_]&&(v[I_]=!1)})}for(var u=n.getSeries(),c=a.oldSeries=[],h=a.oldData=[],f=0;f<u.length;f++){var p=u[f].getData();p.count()<1e4&&(c.push(u[f]),h.push(p))}})}),Nn(ME)},855:function(Gt){Gt.exports=function(){"use strict";var ht=/^(b|B)$/,J={iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},e={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]},O={floor:Math.floor,ceil:Math.ceil};function ee(j){var S,fe,he,se,k,K,ne,ie,re,R,V,A,P,I,H,Z,U,Y,B,q,W,L=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},D=[],F=0;if(isNaN(j))throw new TypeError("Invalid number");if(he=!0===L.bits,H=!0===L.unix,A=!0===L.pad,P=void 0!==L.round?L.round:H?1:2,ne=void 0!==L.locale?L.locale:"",ie=L.localeOptions||{},Z=void 0!==L.separator?L.separator:"",U=void 0!==L.spacer?L.spacer:H?"":" ",B=L.symbols||{},Y=2===(fe=L.base||10)?L.standard||"iec":"jedec",V=L.output||"string",k=!0===L.fullform,K=L.fullforms instanceof Array?L.fullforms:[],S=void 0!==L.exponent?L.exponent:-1,q=O[L.roundingMethod]||Math.round,re=(R=Number(j))<0,se=fe>2?1e3:1024,W=!1===isNaN(L.precision)?parseInt(L.precision,10):0,re&&(R=-R),(-1===S||isNaN(S))&&(S=Math.floor(Math.log(R)/Math.log(se)))<0&&(S=0),S>8&&(W>0&&(W+=8-S),S=8),"exponent"===V)return S;if(0===R)D[0]=0,I=D[1]=H?"":J[Y][he?"bits":"bytes"][S];else{F=R/(2===fe?Math.pow(2,10*S):Math.pow(1e3,S)),he&&(F*=8)>=se&&S<8&&(F/=se,S++);var $=Math.pow(10,S>0?P:0);D[0]=q(F*$)/$,D[0]===se&&S<8&&void 0===L.exponent&&(D[0]=1,S++),I=D[1]=10===fe&&1===S?he?"kbit":"kB":J[Y][he?"bits":"bytes"][S],H&&(D[1]=D[1].charAt(0),ht.test(D[1])&&(D[0]=Math.floor(D[0]),D[1]=""))}if(re&&(D[0]=-D[0]),W>0&&(D[0]=D[0].toPrecision(W)),D[1]=B[D[1]]||D[1],!0===ne?D[0]=D[0].toLocaleString():ne.length>0?D[0]=D[0].toLocaleString(ne,ie):Z.length>0&&(D[0]=D[0].toString().replace(".",Z)),A&&!1===Number.isInteger(D[0])&&P>0){var oe=Z||".",M=D[0].toString().split(oe),be=M[1]||"",Me=be.length,Ze=P-Me;D[0]="".concat(M[0]).concat(oe).concat(be.padEnd(Me+Ze,"0"))}return k&&(D[1]=K[S]?K[S]:e[Y][S]+(he?"bit":"byte")+(1===D[0]?"":"s")),"array"===V?D:"object"===V?{value:D[0],symbol:D[1],exponent:S,unit:I}:D.join(U)}return ee.partial=function(j){return function(S){return ee(S,j)}},ee}()},2070:function(Gt){"undefined"!=typeof window&&(Gt.exports=function(ht){var J={};function e(O){if(J[O])return J[O].exports;var ee=J[O]={i:O,l:!1,exports:{}};return ht[O].call(ee.exports,ee,ee.exports,e),ee.l=!0,ee.exports}return e.m=ht,e.c=J,e.d=function(O,ee,j){e.o(O,ee)||Object.defineProperty(O,ee,{enumerable:!0,get:j})},e.r=function(O){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(O,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(O,"__esModule",{value:!0})},e.t=function(O,ee){if(1&ee&&(O=e(O)),8&ee||4&ee&&"object"==typeof O&&O&&O.__esModule)return O;var j=Object.create(null);if(e.r(j),Object.defineProperty(j,"default",{enumerable:!0,value:O}),2&ee&&"string"!=typeof O)for(var S in O)e.d(j,S,function(fe){return O[fe]}.bind(null,S));return j},e.n=function(O){var ee=O&&O.__esModule?function(){return O.default}:function(){return O};return e.d(ee,"a",ee),ee},e.o=function(O,ee){return Object.prototype.hasOwnProperty.call(O,ee)},e.p="/dist/",e(e.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":function(ht,J,e){"use strict";var O=Object.prototype.hasOwnProperty,ee="~";function j(){}function S(k,K,ne){this.fn=k,this.context=K,this.once=ne||!1}function fe(k,K,ne,ie,re){if("function"!=typeof ne)throw new TypeError("The listener must be a function");var R=new S(ne,ie||k,re),V=ee?ee+K:K;return k._events[V]?k._events[V].fn?k._events[V]=[k._events[V],R]:k._events[V].push(R):(k._events[V]=R,k._eventsCount++),k}function he(k,K){0==--k._eventsCount?k._events=new j:delete k._events[K]}function se(){this._events=new j,this._eventsCount=0}Object.create&&(j.prototype=Object.create(null),(new j).__proto__||(ee=!1)),se.prototype.eventNames=function(){var ne,ie,K=[];if(0===this._eventsCount)return K;for(ie in ne=this._events)O.call(ne,ie)&&K.push(ee?ie.slice(1):ie);return Object.getOwnPropertySymbols?K.concat(Object.getOwnPropertySymbols(ne)):K},se.prototype.listeners=function(K){var ie=this._events[ee?ee+K:K];if(!ie)return[];if(ie.fn)return[ie.fn];for(var re=0,R=ie.length,V=new Array(R);re<R;re++)V[re]=ie[re].fn;return V},se.prototype.listenerCount=function(K){var ie=this._events[ee?ee+K:K];return ie?ie.fn?1:ie.length:0},se.prototype.emit=function(K,ne,ie,re,R,V){var A=ee?ee+K:K;if(!this._events[A])return!1;var H,Z,P=this._events[A],I=arguments.length;if(P.fn){switch(P.once&&this.removeListener(K,P.fn,void 0,!0),I){case 1:return P.fn.call(P.context),!0;case 2:return P.fn.call(P.context,ne),!0;case 3:return P.fn.call(P.context,ne,ie),!0;case 4:return P.fn.call(P.context,ne,ie,re),!0;case 5:return P.fn.call(P.context,ne,ie,re,R),!0;case 6:return P.fn.call(P.context,ne,ie,re,R,V),!0}for(Z=1,H=new Array(I-1);Z<I;Z++)H[Z-1]=arguments[Z];P.fn.apply(P.context,H)}else{var Y,U=P.length;for(Z=0;Z<U;Z++)switch(P[Z].once&&this.removeListener(K,P[Z].fn,void 0,!0),I){case 1:P[Z].fn.call(P[Z].context);break;case 2:P[Z].fn.call(P[Z].context,ne);break;case 3:P[Z].fn.call(P[Z].context,ne,ie);break;case 4:P[Z].fn.call(P[Z].context,ne,ie,re);break;default:if(!H)for(Y=1,H=new Array(I-1);Y<I;Y++)H[Y-1]=arguments[Y];P[Z].fn.apply(P[Z].context,H)}}return!0},se.prototype.on=function(K,ne,ie){return fe(this,K,ne,ie,!1)},se.prototype.once=function(K,ne,ie){return fe(this,K,ne,ie,!0)},se.prototype.removeListener=function(K,ne,ie,re){var R=ee?ee+K:K;if(!this._events[R])return this;if(!ne)return he(this,R),this;var V=this._events[R];if(V.fn)V.fn===ne&&(!re||V.once)&&(!ie||V.context===ie)&&he(this,R);else{for(var A=0,P=[],I=V.length;A<I;A++)(V[A].fn!==ne||re&&!V[A].once||ie&&V[A].context!==ie)&&P.push(V[A]);P.length?this._events[R]=1===P.length?P[0]:P:he(this,R)}return this},se.prototype.removeAllListeners=function(K){var ne;return K?this._events[ne=ee?ee+K:K]&&he(this,ne):(this._events=new j,this._eventsCount=0),this},se.prototype.off=se.prototype.removeListener,se.prototype.addListener=se.prototype.on,se.prefixed=ee,se.EventEmitter=se,ht.exports=se},"./node_modules/url-toolkit/src/url-toolkit.js":function(ht,J,e){var ee,j,S,fe,he;ee=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,j=/^([^\/?#]*)([^]*)$/,S=/(?:\/|^)\.(?=\/)/g,fe=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,ht.exports=he={buildAbsoluteURL:function(se,k,K){if(K=K||{},se=se.trim(),!(k=k.trim())){if(!K.alwaysNormalize)return se;var ne=he.parseURL(se);if(!ne)throw new Error("Error trying to parse base URL.");return ne.path=he.normalizePath(ne.path),he.buildURLFromParts(ne)}var ie=he.parseURL(k);if(!ie)throw new Error("Error trying to parse relative URL.");if(ie.scheme)return K.alwaysNormalize?(ie.path=he.normalizePath(ie.path),he.buildURLFromParts(ie)):k;var re=he.parseURL(se);if(!re)throw new Error("Error trying to parse base URL.");if(!re.netLoc&&re.path&&"/"!==re.path[0]){var R=j.exec(re.path);re.netLoc=R[1],re.path=R[2]}re.netLoc&&!re.path&&(re.path="/");var V={scheme:re.scheme,netLoc:ie.netLoc,path:null,params:ie.params,query:ie.query,fragment:ie.fragment};if(!ie.netLoc&&(V.netLoc=re.netLoc,"/"!==ie.path[0]))if(ie.path){var A=re.path,P=A.substring(0,A.lastIndexOf("/")+1)+ie.path;V.path=he.normalizePath(P)}else V.path=re.path,ie.params||(V.params=re.params,ie.query||(V.query=re.query));return null===V.path&&(V.path=K.alwaysNormalize?he.normalizePath(ie.path):ie.path),he.buildURLFromParts(V)},parseURL:function(se){var k=ee.exec(se);return k?{scheme:k[1]||"",netLoc:k[2]||"",path:k[3]||"",params:k[4]||"",query:k[5]||"",fragment:k[6]||""}:null},normalizePath:function(se){for(se=se.split("").reverse().join("").replace(S,"");se.length!==(se=se.replace(fe,"")).length;);return se.split("").reverse().join("")},buildURLFromParts:function(se){return se.scheme+se.netLoc+se.path+se.params+se.query+se.fragment}}},"./node_modules/webworkify-webpack/index.js":function(ht,J,e){function O(K){var ne={};function ie(R){if(ne[R])return ne[R].exports;var V=ne[R]={i:R,l:!1,exports:{}};return K[R].call(V.exports,V,V.exports,ie),V.l=!0,V.exports}ie.m=K,ie.c=ne,ie.i=function(R){return R},ie.d=function(R,V,A){ie.o(R,V)||Object.defineProperty(R,V,{configurable:!1,enumerable:!0,get:A})},ie.r=function(R){Object.defineProperty(R,"__esModule",{value:!0})},ie.n=function(R){var V=R&&R.__esModule?function(){return R.default}:function(){return R};return ie.d(V,"a",V),V},ie.o=function(R,V){return Object.prototype.hasOwnProperty.call(R,V)},ie.p="/",ie.oe=function(R){throw console.error(R),R};var re=ie(ie.s=ENTRY_MODULE);return re.default||re}var ee="[\\.|\\-|\\+|\\w|/|@]+",j="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+ee+").*?\\)";function S(K){return(K+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function fe(K){return!isNaN(1*K)}function he(K,ne,ie){var re={};re[ie]=[];var R=ne.toString(),V=R.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!V)return re;for(var I,A=V[1],P=new RegExp("(\\\\n|\\W)"+S(A)+j,"g");I=P.exec(R);)"dll-reference"!==I[3]&&re[ie].push(I[3]);for(P=new RegExp("\\("+S(A)+'\\("(dll-reference\\s('+ee+'))"\\)\\)'+j,"g");I=P.exec(R);)K[I[2]]||(re[ie].push(I[1]),K[I[2]]=e(I[1]).m),re[I[2]]=re[I[2]]||[],re[I[2]].push(I[4]);for(var H=Object.keys(re),Z=0;Z<H.length;Z++)for(var U=0;U<re[H[Z]].length;U++)fe(re[H[Z]][U])&&(re[H[Z]][U]=1*re[H[Z]][U]);return re}function se(K){return Object.keys(K).reduce(function(ie,re){return ie||K[re].length>0},!1)}ht.exports=function(K,ne){var ie={main:e.m},re=(ne=ne||{}).all?{main:Object.keys(ie.main)}:function k(K,ne){for(var ie={main:[ne]},re={main:[]},R={main:{}};se(ie);)for(var V=Object.keys(ie),A=0;A<V.length;A++){var P=V[A],H=ie[P].pop();if(R[P]=R[P]||{},!R[P][H]&&K[P][H]){R[P][H]=!0,re[P]=re[P]||[],re[P].push(H);for(var Z=he(K,K[P][H],P),U=Object.keys(Z),Y=0;Y<U.length;Y++)ie[U[Y]]=ie[U[Y]]||[],ie[U[Y]]=ie[U[Y]].concat(Z[U[Y]])}}return re}(ie,K),R="";Object.keys(re).filter(function(H){return"main"!==H}).forEach(function(H){for(var Z=0;re[H][Z];)Z++;re[H].push(Z),ie[H][Z]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",R=R+"var "+H+" = ("+O.toString().replace("ENTRY_MODULE",JSON.stringify(Z))+")({"+re[H].map(function(U){return JSON.stringify(U)+": "+ie[H][U].toString()}).join(",")+"});\n"}),R=R+"new (("+O.toString().replace("ENTRY_MODULE",JSON.stringify(K))+")({"+re.main.map(function(H){return JSON.stringify(H)+": "+ie.main[H].toString()}).join(",")+"}))(self);";var V=new window.Blob([R],{type:"text/javascript"});if(ne.bare)return V;var P=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(V),I=new window.Worker(P);return I.objectURL=P,I}},"./src/config.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"hlsDefaultConfig",function(){return Y}),e.d(J,"mergeConfig",function(){return q}),e.d(J,"enableStreamingMode",function(){return W});var O=e("./src/controller/abr-controller.ts"),ee=e("./src/controller/audio-stream-controller.ts"),j=e("./src/controller/audio-track-controller.ts"),S=e("./src/controller/subtitle-stream-controller.ts"),fe=e("./src/controller/subtitle-track-controller.ts"),he=e("./src/controller/buffer-controller.ts"),se=e("./src/controller/timeline-controller.ts"),k=e("./src/controller/cap-level-controller.ts"),K=e("./src/controller/fps-controller.ts"),ne=e("./src/controller/eme-controller.ts"),ie=e("./src/controller/cmcd-controller.ts"),re=e("./src/utils/xhr-loader.ts"),R=e("./src/utils/fetch-loader.ts"),V=e("./src/utils/cues.ts"),A=e("./src/utils/mediakeys-helper.ts"),P=e("./src/utils/logger.ts");function I(){return I=Object.assign||function(L){for(var D=1;D<arguments.length;D++){var F=arguments[D];for(var $ in F)Object.prototype.hasOwnProperty.call(F,$)&&(L[$]=F[$])}return L},I.apply(this,arguments)}function H(L,D){var F=Object.keys(L);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(L);D&&($=$.filter(function(oe){return Object.getOwnPropertyDescriptor(L,oe).enumerable})),F.push.apply(F,$)}return F}function Z(L){for(var D=1;D<arguments.length;D++){var F=null!=arguments[D]?arguments[D]:{};D%2?H(Object(F),!0).forEach(function($){U(L,$,F[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(F)):H(Object(F)).forEach(function($){Object.defineProperty(L,$,Object.getOwnPropertyDescriptor(F,$))})}return L}function U(L,D,F){return D in L?Object.defineProperty(L,D,{value:F,enumerable:!0,configurable:!0,writable:!0}):L[D]=F,L}var Y=Z(Z({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:re.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:O.default,bufferController:he.default,capLevelController:k.default,fpsController:K.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:A.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0},function B(){return{cueHandler:V.default,enableCEA708Captions:!0,enableWebVTT:!0,enableIMSC1:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}()),{},{subtitleStreamController:S.SubtitleStreamController,subtitleTrackController:fe.default,timelineController:se.TimelineController,audioStreamController:ee.default,audioTrackController:j.default,emeController:ne.default,cmcdController:ie.default});function q(L,D){if((D.liveSyncDurationCount||D.liveMaxLatencyDurationCount)&&(D.liveSyncDuration||D.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==D.liveMaxLatencyDurationCount&&(void 0===D.liveSyncDurationCount||D.liveMaxLatencyDurationCount<=D.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==D.liveMaxLatencyDuration&&(void 0===D.liveSyncDuration||D.liveMaxLatencyDuration<=D.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return I({},L,D)}function W(L){var D=L.loader;D!==R.default&&D!==re.default?(P.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),L.progressive=!1):Object(R.fetchSupported)()&&(L.loader=R.default,L.progressive=!0,L.enableSoftwareAES=!0,P.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}},"./src/controller/abr-controller.ts":function(ht,J,e){"use strict";e.r(J);var O=e("./src/polyfills/number.ts"),ee=e("./src/utils/ewma-bandwidth-estimator.ts"),j=e("./src/events.ts"),S=e("./src/utils/buffer-helper.ts"),fe=e("./src/errors.ts"),he=e("./src/types/loader.ts"),se=e("./src/utils/logger.ts");function k(ie,re){for(var R=0;R<re.length;R++){var V=re[R];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(ie,V.key,V)}}J.default=function(){function ie(R){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=R;var V=R.config;this.bwEstimator=new ee.default(V.abrEwmaSlowVoD,V.abrEwmaFastVoD,V.abrEwmaDefaultEstimate),this.registerListeners()}var re=ie.prototype;return re.registerListeners=function(){var V=this.hls;V.on(j.Events.FRAG_LOADING,this.onFragLoading,this),V.on(j.Events.FRAG_LOADED,this.onFragLoaded,this),V.on(j.Events.FRAG_BUFFERED,this.onFragBuffered,this),V.on(j.Events.LEVEL_LOADED,this.onLevelLoaded,this),V.on(j.Events.ERROR,this.onError,this)},re.unregisterListeners=function(){var V=this.hls;V.off(j.Events.FRAG_LOADING,this.onFragLoading,this),V.off(j.Events.FRAG_LOADED,this.onFragLoaded,this),V.off(j.Events.FRAG_BUFFERED,this.onFragBuffered,this),V.off(j.Events.LEVEL_LOADED,this.onLevelLoaded,this),V.off(j.Events.ERROR,this.onError,this)},re.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},re.onFragLoading=function(V,A){var I,P=A.frag;P.type!==he.PlaylistLevelType.MAIN||this.timer||(this.fragCurrent=P,this.partCurrent=null!=(I=A.part)?I:null,this.timer=self.setInterval(this.onCheck,100))},re.onLevelLoaded=function(V,A){var P=this.hls.config;A.details.live?this.bwEstimator.update(P.abrEwmaSlowLive,P.abrEwmaFastLive):this.bwEstimator.update(P.abrEwmaSlowVoD,P.abrEwmaFastVoD)},re._abandonRulesCheck=function(){var V=this.fragCurrent,A=this.partCurrent,P=this.hls,I=P.autoLevelEnabled,H=P.config,Z=P.media;if(V&&Z){var U=A?A.stats:V.stats,Y=A?A.duration:V.duration;if(U.aborted)return se.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);if(I&&!Z.paused&&Z.playbackRate&&Z.readyState){var B=performance.now()-U.loading.start,q=Math.abs(Z.playbackRate);if(!(B<=500*Y/q)){var W=P.levels,L=P.minAutoLevel,F=U.total||Math.max(U.loaded,Math.round(Y*W[V.level].maxBitrate/8)),$=Math.max(1,U.bwEstimate?U.bwEstimate/8:1e3*U.loaded/B),oe=(F-U.loaded)/$,M=Z.currentTime,be=(S.BufferHelper.bufferInfo(Z,M,H.maxBufferHole).end-M)/q;if(!(be>=2*Y/q||oe<=be)){var Ze,Me=Number.POSITIVE_INFINITY;for(Ze=V.level-1;Ze>L&&!((Me=Y*W[Ze].maxBitrate/(6.4*$))<be);Ze--);if(!(Me>=oe)){var je=this.bwEstimator.getEstimate();se.logger.warn("Fragment "+V.sn+(A?" part "+A.index:"")+" of level "+V.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+Ze+"\n      Current BW estimate: "+(Object(O.isFiniteNumber)(je)?(je/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+oe.toFixed(3)+" s\n      Estimated load time for the next fragment: "+Me.toFixed(3)+" s\n      Time to underbuffer: "+be.toFixed(3)+" s"),P.nextLoadLevel=Ze,this.bwEstimator.sample(B,U.loaded),this.clearTimer(),V.loader&&(this.fragCurrent=this.partCurrent=null,V.loader.abort()),P.trigger(j.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:V,part:A,stats:U})}}}}}},re.onFragLoaded=function(V,A){var P=A.frag,I=A.part;if(P.type===he.PlaylistLevelType.MAIN&&Object(O.isFiniteNumber)(P.sn)){var H=I?I.stats:P.stats,Z=I?I.duration:P.duration;if(this.clearTimer(),this.lastLoadedFragLevel=P.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var U=this.hls.levels[P.level],Y=(U.loaded?U.loaded.bytes:0)+H.loaded,B=(U.loaded?U.loaded.duration:0)+Z;U.loaded={bytes:Y,duration:B},U.realBitrate=Math.round(8*Y/B)}P.bitrateTest&&(this.onFragBuffered(j.Events.FRAG_BUFFERED,{stats:H,frag:P,part:I,id:P.type}),P.bitrateTest=!1)}},re.onFragBuffered=function(V,A){var P=A.frag,I=A.part,H=I?I.stats:P.stats;if(!H.aborted&&P.type===he.PlaylistLevelType.MAIN&&"initSegment"!==P.sn){var Z=H.parsing.end-H.loading.start;this.bwEstimator.sample(Z,H.loaded),H.bwEstimate=this.bwEstimator.getEstimate(),this.bitrateTestDelay=P.bitrateTest?Z/1e3:0}},re.onError=function(V,A){switch(A.details){case fe.ErrorDetails.FRAG_LOAD_ERROR:case fe.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},re.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},re.getNextABRAutoLevel=function(){var V=this.fragCurrent,A=this.partCurrent,P=this.hls,I=P.maxAutoLevel,H=P.config,Z=P.minAutoLevel,U=P.media,Y=A?A.duration:V?V.duration:0,B=U?U.currentTime:0,q=U&&0!==U.playbackRate?Math.abs(U.playbackRate):1,W=this.bwEstimator?this.bwEstimator.getEstimate():H.abrEwmaDefaultEstimate,L=(S.BufferHelper.bufferInfo(U,B,H.maxBufferHole).end-B)/q,D=this.findBestLevel(W,Z,I,L,H.abrBandWidthFactor,H.abrBandWidthUpFactor);if(D>=0)return D;se.logger.trace((L?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var F=Y?Math.min(Y,H.maxStarvationDelay):H.maxStarvationDelay,$=H.abrBandWidthFactor,oe=H.abrBandWidthUpFactor;if(!L){var M=this.bitrateTestDelay;M&&(F=(Y?Math.min(Y,H.maxLoadingDelay):H.maxLoadingDelay)-M,se.logger.trace("bitrate test took "+Math.round(1e3*M)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*F)+" ms"),$=oe=1)}return D=this.findBestLevel(W,Z,I,L+F,$,oe),Math.max(D,0)},re.findBestLevel=function(V,A,P,I,H,Z){for(var U,Y=this.fragCurrent,B=this.partCurrent,q=this.lastLoadedFragLevel,W=this.hls.levels,L=W[q],D=!(null==L||null===(U=L.details)||void 0===U||!U.live),F=null==L?void 0:L.codecSet,$=B?B.duration:Y?Y.duration:0,oe=P;oe>=A;oe--){var M=W[oe];if(M&&(!F||M.codecSet===F)){var Ze,be=M.details,Me=(B?null==be?void 0:be.partTarget:null==be?void 0:be.averagetargetduration)||$,Fe=W[oe].maxBitrate,je=Fe*Me/(Ze=oe<=q?H*V:Z*V);if(se.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+oe+"/"+Math.round(Ze)+"/"+Fe+"/"+Me+"/"+I+"/"+je),Ze>Fe&&(!je||D&&!this.bitrateTestDelay||je<I))return oe}}return-1},function K(ie,re,R){return re&&k(ie.prototype,re),R&&k(ie,R),ie}(ie,[{key:"nextAutoLevel",get:function(){var V=this._nextAutoLevel,A=this.bwEstimator;if(!(-1===V||A&&A.canEstimate()))return V;var P=this.getNextABRAutoLevel();return-1!==V&&(P=Math.min(V,P)),P},set:function(V){this._nextAutoLevel=V}}]),ie}()},"./src/controller/audio-stream-controller.ts":function(ht,J,e){"use strict";e.r(J);var O=e("./src/polyfills/number.ts"),ee=e("./src/controller/base-stream-controller.ts"),j=e("./src/events.ts"),S=e("./src/utils/buffer-helper.ts"),fe=e("./src/controller/fragment-tracker.ts"),he=e("./src/types/level.ts"),se=e("./src/types/loader.ts"),k=e("./src/loader/fragment.ts"),K=e("./src/demux/chunk-cache.ts"),ne=e("./src/demux/transmuxer-interface.ts"),ie=e("./src/types/transmuxer.ts"),re=e("./src/controller/fragment-finders.ts"),R=e("./src/utils/discontinuities.ts"),V=e("./src/errors.ts"),A=e("./src/utils/logger.ts");function P(){return P=Object.assign||function(Y){for(var B=1;B<arguments.length;B++){var q=arguments[B];for(var W in q)Object.prototype.hasOwnProperty.call(q,W)&&(Y[W]=q[W])}return Y},P.apply(this,arguments)}function I(Y,B){Y.prototype=Object.create(B.prototype),Y.prototype.constructor=Y,H(Y,B)}function H(Y,B){return(H=Object.setPrototypeOf||function(W,L){return W.__proto__=L,W})(Y,B)}J.default=function(Y){function B(W,L){var D;return(D=Y.call(this,W,L,"[audio-stream-controller]")||this).videoBuffer=null,D.videoTrackCC=-1,D.waitingVideoCC=-1,D.audioSwitch=!1,D.trackId=-1,D.waitingData=null,D.mainDetails=null,D.bufferFlushed=!1,D._registerListeners(),D}I(B,Y);var q=B.prototype;return q.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},q._registerListeners=function(){var L=this.hls;L.on(j.Events.MEDIA_ATTACHED,this.onMediaAttached,this),L.on(j.Events.MEDIA_DETACHING,this.onMediaDetaching,this),L.on(j.Events.MANIFEST_LOADING,this.onManifestLoading,this),L.on(j.Events.LEVEL_LOADED,this.onLevelLoaded,this),L.on(j.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),L.on(j.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),L.on(j.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),L.on(j.Events.ERROR,this.onError,this),L.on(j.Events.BUFFER_RESET,this.onBufferReset,this),L.on(j.Events.BUFFER_CREATED,this.onBufferCreated,this),L.on(j.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),L.on(j.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),L.on(j.Events.FRAG_BUFFERED,this.onFragBuffered,this)},q._unregisterListeners=function(){var L=this.hls;L.off(j.Events.MEDIA_ATTACHED,this.onMediaAttached,this),L.off(j.Events.MEDIA_DETACHING,this.onMediaDetaching,this),L.off(j.Events.MANIFEST_LOADING,this.onManifestLoading,this),L.off(j.Events.LEVEL_LOADED,this.onLevelLoaded,this),L.off(j.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),L.off(j.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),L.off(j.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),L.off(j.Events.ERROR,this.onError,this),L.off(j.Events.BUFFER_RESET,this.onBufferReset,this),L.off(j.Events.BUFFER_CREATED,this.onBufferCreated,this),L.off(j.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),L.off(j.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),L.off(j.Events.FRAG_BUFFERED,this.onFragBuffered,this)},q.onInitPtsFound=function(L,D){var F=D.frag,oe=D.initPTS;if("main"===D.id){var M=F.cc;this.initPTS[F.cc]=oe,this.log("InitPTS for cc: "+M+" found from main: "+oe),this.videoTrackCC=M,this.state===ee.State.WAITING_INIT_PTS&&this.tick()}},q.startLoad=function(L){if(!this.levels)return this.startPosition=L,void(this.state=ee.State.STOPPED);var D=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,D>0&&-1===L?(this.log("Override startPosition with lastCurrentTime @"+D.toFixed(3)),this.state=ee.State.IDLE):(this.loadedmetadata=!1,this.state=ee.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=L,this.tick()},q.doTick=function(){switch(this.state){case ee.State.IDLE:this.doTickIdle();break;case ee.State.WAITING_TRACK:var L,D=this.levels,$=null==D||null===(L=D[this.trackId])||void 0===L?void 0:L.details;if($){if(this.waitForCdnTuneIn($))break;this.state=ee.State.WAITING_INIT_PTS}break;case ee.State.FRAG_LOADING_WAITING_RETRY:var oe,M=performance.now(),be=this.retryDate;(!be||M>=be||null!==(oe=this.media)&&void 0!==oe&&oe.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.state=ee.State.IDLE);break;case ee.State.WAITING_INIT_PTS:var Me=this.waitingData;if(Me){var Ze=Me.frag,Fe=Me.part,je=Me.cache,Ce=Me.complete;if(void 0!==this.initPTS[Ze.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=ee.State.FRAG_LOADING;var rt={frag:Ze,part:Fe,payload:je.flush(),networkDetails:null};this._handleFragmentLoadProgress(rt),Ce&&Y.prototype._handleFragmentLoadComplete.call(this,rt)}else if(this.videoTrackCC!==this.waitingVideoCC)A.logger.log("Waiting fragment cc ("+Ze.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var ct=this.getLoadPosition(),Lt=S.BufferHelper.bufferInfo(this.mediaBuffer,ct,this.config.maxBufferHole);Object(re.fragmentWithinToleranceTest)(Lt.end,this.config.maxFragLookUpTolerance,Ze)<0&&(A.logger.log("Waiting fragment cc ("+Ze.cc+") @ "+Ze.start+" cancelled because another fragment at "+Lt.end+" is needed"),this.clearWaitingFragment())}}else this.state=ee.State.IDLE}this.onTickEnd()},q.clearWaitingFragment=function(){var L=this.waitingData;L&&(this.fragmentTracker.removeFragment(L.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=ee.State.IDLE)},q.onTickEnd=function(){var L=this.media;L&&L.readyState&&(!this.loadedmetadata&&(this.mediaBuffer?this.mediaBuffer:L).buffered.length&&(this.loadedmetadata=!0),this.lastCurrentTime=L.currentTime)},q.doTickIdle=function(){var L,D,F=this.hls,$=this.levels,oe=this.media,M=this.trackId;if($&&$[M]&&(oe||!this.startFragRequested&&F.config.startFragPrefetch)){var Ze=$[M].details;if(!Ze||Ze.live&&this.levelLastLoaded!==M||this.waitForCdnTuneIn(Ze))return void(this.state=ee.State.WAITING_TRACK);this.bufferFlushed&&(this.bufferFlushed=!1,this.afterBufferFlushed(this.mediaBuffer?this.mediaBuffer:this.media,k.ElementaryStreamTypes.AUDIO,se.PlaylistLevelType.AUDIO));var Fe=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,se.PlaylistLevelType.AUDIO);if(null!==Fe){var je=Fe.len,Ce=this.getMaxBufferLength(),Se=this.audioSwitch;if(!(je>=Ce)||Se){if(!Se&&this._streamEnded(Fe,Ze))return F.trigger(j.Events.BUFFER_EOS,{type:"audio"}),void(this.state=ee.State.ENDED);var ct=Ze.fragments[0].start,Lt=Fe.end;if(Se){var pt=this.getLoadPosition();Lt=pt,Ze.PTSKnown&&pt<ct&&(Fe.end>ct||Fe.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),oe.currentTime=ct+.05)}var gt=this.getNextFragment(Lt,Ze);if(!gt)return void(this.bufferFlushed=!0);"identity"!==(null===(L=gt.decryptdata)||void 0===L?void 0:L.keyFormat)||null!==(D=gt.decryptdata)&&void 0!==D&&D.key?this.loadFragment(gt,Ze,Lt):this.loadKey(gt,Ze)}}}},q.getMaxBufferLength=function(){var L=Y.prototype.getMaxBufferLength.call(this),D=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,se.PlaylistLevelType.MAIN);return null===D?L:Math.max(L,D.len)},q.onMediaDetaching=function(){this.videoBuffer=null,Y.prototype.onMediaDetaching.call(this)},q.onAudioTracksUpdated=function(L,D){var F=D.audioTracks;this.resetTransmuxer(),this.levels=F.map(function($){return new he.Level($)})},q.onAudioTrackSwitching=function(L,D){var F=!!D.url;this.trackId=D.id;var $=this.fragCurrent;null!=$&&$.loader&&$.loader.abort(),this.fragCurrent=null,this.clearWaitingFragment(),F?this.setInterval(100):this.resetTransmuxer(),F?(this.audioSwitch=!0,this.state=ee.State.IDLE):this.state=ee.State.STOPPED,this.tick()},q.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},q.onLevelLoaded=function(L,D){this.mainDetails=D.details},q.onAudioTrackLoaded=function(L,D){var F,$=this.levels,oe=D.details,M=D.id;if($){this.log("Track "+M+" loaded ["+oe.startSN+","+oe.endSN+"],duration:"+oe.totalduration);var be=$[M],Me=0;if(oe.live||null!==(F=be.details)&&void 0!==F&&F.live){var Ze=this.mainDetails;if(oe.fragments[0]||(oe.deltaUpdateFailed=!0),oe.deltaUpdateFailed||!Ze)return;!be.details&&oe.hasProgramDateTime&&Ze.hasProgramDateTime?(Object(R.alignMediaPlaylistByPDT)(oe,Ze),Me=oe.fragments[0].start):Me=this.alignPlaylists(oe,be.details)}be.details=oe,this.levelLastLoaded=M,!this.startFragRequested&&(this.mainDetails||!oe.live)&&this.setStartPosition(be.details,Me),this.state===ee.State.WAITING_TRACK&&!this.waitForCdnTuneIn(oe)&&(this.state=ee.State.IDLE),this.tick()}else this.warn("Audio tracks were reset while loading level "+M)},q._handleFragmentLoadProgress=function(L){var D,F=L.frag,$=L.part,oe=L.payload,M=this.config,be=this.trackId,Me=this.levels;if(Me){var Ze=Me[be];console.assert(Ze,"Audio track is defined on fragment load progress");var Fe=Ze.details;console.assert(Fe,"Audio track details are defined on fragment load progress");var je=M.defaultAudioCodec||Ze.audioCodec||"mp4a.40.2",Ce=this.transmuxer;Ce||(Ce=this.transmuxer=new ne.default(this.hls,se.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var Se=this.initPTS[F.cc],rt=null===(D=F.initSegment)||void 0===D?void 0:D.data;if(void 0!==Se){var Lt=$?$.index:-1,gt=new ie.ChunkMetadata(F.level,F.sn,F.stats.chunkCount,oe.byteLength,Lt,-1!==Lt);Ce.push(oe,rt,je,"",F,$,Fe.totalduration,!1,gt,Se)}else A.logger.log("Unknown video PTS for cc "+F.cc+", waiting for video PTS before demuxing audio frag "+F.sn+" of ["+Fe.startSN+" ,"+Fe.endSN+"],track "+be),(this.waitingData=this.waitingData||{frag:F,part:$,cache:new K.default,complete:!1}).cache.push(new Uint8Array(oe)),this.waitingVideoCC=this.videoTrackCC,this.state=ee.State.WAITING_INIT_PTS}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+F.sn+" of level "+F.level+" will not be buffered")},q._handleFragmentLoadComplete=function(L){this.waitingData?this.waitingData.complete=!0:Y.prototype._handleFragmentLoadComplete.call(this,L)},q.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},q.onBufferCreated=function(L,D){var F=D.tracks.audio;F&&(this.mediaBuffer=F.buffer),D.tracks.video&&(this.videoBuffer=D.tracks.video.buffer)},q.onFragBuffered=function(L,D){var F=D.frag,$=D.part;if(F.type===se.PlaylistLevelType.AUDIO){if(this.fragContextChanged(F))return void this.warn("Fragment "+F.sn+($?" p: "+$.index:"")+" of level "+F.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch);"initSegment"!==F.sn&&(this.fragPrevious=F,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(j.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(F,$)}},q.onError=function(L,D){switch(D.details){case V.ErrorDetails.FRAG_LOAD_ERROR:case V.ErrorDetails.FRAG_LOAD_TIMEOUT:case V.ErrorDetails.KEY_LOAD_ERROR:case V.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(se.PlaylistLevelType.AUDIO,D);break;case V.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case V.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==ee.State.ERROR&&this.state!==ee.State.STOPPED&&(this.state=D.fatal?ee.State.ERROR:ee.State.IDLE,this.warn(D.details+" while loading frag, switching to "+this.state+" state"));break;case V.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===D.parent&&(this.state===ee.State.PARSING||this.state===ee.State.PARSED)){var F=!0,$=this.getFwdBufferInfo(this.mediaBuffer,se.PlaylistLevelType.AUDIO);$&&$.len>.5&&(F=!this.reduceMaxBufferLength($.len)),F&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,Y.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}}},q.onBufferFlushed=function(L,D){D.type===k.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0)},q._handleTransmuxComplete=function(L){var D,F="audio",$=this.hls,oe=L.remuxResult,M=L.chunkMeta,be=this.getCurrentContext(M);if(!be)return this.warn("The loading context changed while buffering fragment "+M.sn+" of level "+M.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(M.level);var Me=be.frag,Ze=be.part,Fe=oe.audio,je=oe.text,Ce=oe.id3,Se=oe.initSegment;if(!this.fragContextChanged(Me)){if(this.state=ee.State.PARSING,this.audioSwitch&&Fe&&this.completeAudioSwitch(),null!=Se&&Se.tracks&&(this._bufferInitSegment(Se.tracks,Me,M),$.trigger(j.Events.FRAG_PARSING_INIT_SEGMENT,{frag:Me,id:F,tracks:Se.tracks})),Fe){var rt=Fe.startPTS,ct=Fe.endPTS,Lt=Fe.startDTS,pt=Fe.endDTS;Ze&&(Ze.elementaryStreams[k.ElementaryStreamTypes.AUDIO]={startPTS:rt,endPTS:ct,startDTS:Lt,endDTS:pt}),Me.setElementaryStreamInfo(k.ElementaryStreamTypes.AUDIO,rt,ct,Lt,pt),this.bufferFragmentData(Fe,Me,Ze,M)}if(null!=Ce&&null!==(D=Ce.samples)&&void 0!==D&&D.length){var gt=P({frag:Me,id:F},Ce);$.trigger(j.Events.FRAG_PARSING_METADATA,gt)}if(je){var st=P({frag:Me,id:F},je);$.trigger(j.Events.FRAG_PARSING_USERDATA,st)}}},q._bufferInitSegment=function(L,D,F){if(this.state===ee.State.PARSING){L.video&&delete L.video;var $=L.audio;if($){$.levelCodec=$.codec,$.id="audio",this.log("Init audio buffer, container:"+$.container+", codecs[parsed]=["+$.codec+"]"),this.hls.trigger(j.Events.BUFFER_CODECS,L);var oe=$.initSegment;null!=oe&&oe.byteLength&&this.hls.trigger(j.Events.BUFFER_APPENDING,{type:"audio",frag:D,part:null,chunkMeta:F,parent:D.type,data:oe}),this.tick()}}},q.loadFragment=function(L,D,F){var $=this.fragmentTracker.getState(L);this.fragCurrent=L,(this.audioSwitch||$===fe.FragmentState.NOT_LOADED||$===fe.FragmentState.PARTIAL)&&("initSegment"===L.sn?this._loadInitSegment(L):D.live&&!Object(O.isFiniteNumber)(this.initPTS[L.cc])?(this.log("Waiting for video PTS in continuity counter "+L.cc+" of live stream before loading audio fragment "+L.sn+" of level "+this.trackId),this.state=ee.State.WAITING_INIT_PTS):(this.startFragRequested=!0,Y.prototype.loadFragment.call(this,L,D,F)))},q.completeAudioSwitch=function(){var L=this.hls,F=this.trackId;this.media&&(this.log("Switching audio track : flushing all audio"),Y.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,L.trigger(j.Events.AUDIO_TRACK_SWITCHED,{id:F})},B}(ee.default)},"./src/controller/audio-track-controller.ts":function(ht,J,e){"use strict";e.r(J);var O=e("./src/events.ts"),ee=e("./src/errors.ts"),j=e("./src/controller/base-playlist-controller.ts"),S=e("./src/types/loader.ts");function fe(ne,ie){for(var re=0;re<ie.length;re++){var R=ie[re];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(ne,R.key,R)}}function se(ne,ie){ne.prototype=Object.create(ie.prototype),ne.prototype.constructor=ne,k(ne,ie)}function k(ne,ie){return(k=Object.setPrototypeOf||function(R,V){return R.__proto__=V,R})(ne,ie)}J.default=function(ne){function ie(R){var V;return(V=ne.call(this,R,"[audio-track-controller]")||this).tracks=[],V.groupId=null,V.tracksInGroup=[],V.trackId=-1,V.trackName="",V.selectDefaultTrack=!0,V.registerListeners(),V}se(ie,ne);var re=ie.prototype;return re.registerListeners=function(){var V=this.hls;V.on(O.Events.MANIFEST_LOADING,this.onManifestLoading,this),V.on(O.Events.MANIFEST_PARSED,this.onManifestParsed,this),V.on(O.Events.LEVEL_LOADING,this.onLevelLoading,this),V.on(O.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),V.on(O.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),V.on(O.Events.ERROR,this.onError,this)},re.unregisterListeners=function(){var V=this.hls;V.off(O.Events.MANIFEST_LOADING,this.onManifestLoading,this),V.off(O.Events.MANIFEST_PARSED,this.onManifestParsed,this),V.off(O.Events.LEVEL_LOADING,this.onLevelLoading,this),V.off(O.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),V.off(O.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),V.off(O.Events.ERROR,this.onError,this)},re.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,ne.prototype.destroy.call(this)},re.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},re.onManifestParsed=function(V,A){this.tracks=A.audioTracks||[]},re.onAudioTrackLoaded=function(V,A){var P=A.id,I=A.details,H=this.tracksInGroup[P];if(H){var Z=H.details;H.details=A.details,this.log("audioTrack "+P+" loaded ["+I.startSN+"-"+I.endSN+"]"),P===this.trackId&&(this.retryCount=0,this.playlistLoaded(P,A,Z))}else this.warn("Invalid audio track id "+P)},re.onLevelLoading=function(V,A){this.switchLevel(A.level)},re.onLevelSwitching=function(V,A){this.switchLevel(A.level)},re.switchLevel=function(V){var A=this.hls.levels[V];if(null!=A&&A.audioGroupIds){var P=A.audioGroupIds[A.urlId];if(this.groupId!==P){this.groupId=P;var I=this.tracks.filter(function(Z){return!P||Z.groupId===P});this.selectDefaultTrack&&!I.some(function(Z){return Z.default})&&(this.selectDefaultTrack=!1),this.tracksInGroup=I;var H={audioTracks:I};this.log("Updating audio tracks, "+I.length+' track(s) found in "'+P+'" group-id'),this.hls.trigger(O.Events.AUDIO_TRACKS_UPDATED,H),this.selectInitialTrack()}}},re.onError=function(V,A){ne.prototype.onError.call(this,V,A),!A.fatal&&A.context&&A.context.type===S.PlaylistContextType.AUDIO_TRACK&&A.context.id===this.trackId&&A.context.groupId===this.groupId&&this.retryLoadingOrFail(A)},re.setAudioTrack=function(V){var A=this.tracksInGroup;if(V<0||V>=A.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var P=A[this.trackId];this.log("Now switching to audio-track index "+V);var I=A[V],H=I.id,Z=I.groupId,U=void 0===Z?"":Z,Y=I.name,B=I.type,q=I.url;if(this.trackId=V,this.trackName=Y,this.selectDefaultTrack=!1,this.hls.trigger(O.Events.AUDIO_TRACK_SWITCHING,{id:H,groupId:U,name:Y,type:B,url:q}),!I.details||I.details.live){var W=this.switchParams(I.url,null==P?void 0:P.details);this.loadPlaylist(W)}}},re.selectInitialTrack=function(){console.assert(this.tracksInGroup.length,"Initial audio track should be selected when tracks are known");var P=this.findTrackId(this.trackName)||this.findTrackId();-1!==P?this.setAudioTrack(P):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(O.Events.ERROR,{type:ee.ErrorTypes.MEDIA_ERROR,details:ee.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},re.findTrackId=function(V){for(var A=this.tracksInGroup,P=0;P<A.length;P++){var I=A[P];if((!this.selectDefaultTrack||I.default)&&(!V||V===I.name))return I.id}return-1},re.loadPlaylist=function(V){var A=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(A)){var P=A.id,I=A.groupId,H=A.url;if(V)try{H=V.addDirectives(H)}catch(Z){this.warn("Could not construct new URL with HLS Delivery Directives: "+Z)}this.log("loading audio-track playlist for id: "+P),this.clearTimer(),this.hls.trigger(O.Events.AUDIO_TRACK_LOADING,{url:H,id:P,groupId:I,deliveryDirectives:V||null})}},function he(ne,ie,re){return ie&&fe(ne.prototype,ie),re&&fe(ne,re),ne}(ie,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(V){this.selectDefaultTrack=!1,this.setAudioTrack(V)}}]),ie}(j.default)},"./src/controller/base-playlist-controller.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"default",function(){return he});var O=e("./src/polyfills/number.ts"),ee=e("./src/types/level.ts"),j=e("./src/controller/level-helper.ts"),S=e("./src/utils/logger.ts"),fe=e("./src/errors.ts"),he=function(){function se(K,ne){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=S.logger.log.bind(S.logger,ne+":"),this.warn=S.logger.warn.bind(S.logger,ne+":"),this.hls=K}var k=se.prototype;return k.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},k.onError=function(ne,ie){ie.fatal&&ie.type===fe.ErrorTypes.NETWORK_ERROR&&this.clearTimer()},k.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},k.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},k.stopLoad=function(){this.canLoad=!1,this.clearTimer()},k.switchParams=function(ne,ie){var re=null==ie?void 0:ie.renditionReports;if(re)for(var R=0;R<re.length;R++){var V=re[R],A=""+V.URI;if(A===ne.substr(-A.length)){var P=parseInt(V["LAST-MSN"]),I=parseInt(V["LAST-PART"]);if(ie&&this.hls.config.lowLatencyMode){var H=Math.min(ie.age-ie.partTarget,ie.targetduration);void 0!==I&&H>ie.partTarget&&(I+=1)}if(Object(O.isFiniteNumber)(P))return new ee.HlsUrlParameters(P,Object(O.isFiniteNumber)(I)?I:void 0,ee.HlsSkip.No)}}},k.loadPlaylist=function(ne){},k.shouldLoadTrack=function(ne){return this.canLoad&&ne&&!!ne.url&&(!ne.details||ne.details.live)},k.playlistLoaded=function(ne,ie,re){var R=this,V=ie.details,A=ie.stats,P=A.loading.end?Math.max(0,self.performance.now()-A.loading.end):0;if(V.advancedDateTime=Date.now()-P,V.live||null!=re&&re.live){if(V.reloaded(re),re&&this.log("live playlist "+ne+" "+(V.advanced?"REFRESHED "+V.lastPartSn+"-"+V.lastPartIndex:"MISSED")),re&&V.fragments.length>0&&Object(j.mergeDetails)(re,V),!this.canLoad||!V.live)return;var I,H=void 0,Z=void 0;if(V.canBlockReload&&V.endSN&&V.advanced){var U=this.hls.config.lowLatencyMode,Y=V.lastPartSn,B=V.endSN,q=V.lastPartIndex,L=Y===B;-1!==q?(H=L?B+1:Y,Z=L?U?0:q:q+1):H=B+1;var F=V.age,oe=Math.min(F+V.ageHeader-V.partTarget,1.5*V.targetduration);if(oe>0){if(re&&oe>re.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+re.tuneInGoal+" to: "+oe+" with playlist age: "+V.age),oe=0;else{var M=Math.floor(oe/V.targetduration);H+=M,void 0!==Z&&(Z+=Math.round(oe%V.targetduration/V.partTarget)),this.log("CDN Tune-in age: "+V.ageHeader+"s last advanced "+F.toFixed(2)+"s goal: "+oe+" skip sn "+M+" to part "+Z)}V.tuneInGoal=oe}if(I=this.getDeliveryDirectives(V,ie.deliveryDirectives,H,Z),U||!L)return void this.loadPlaylist(I)}else I=this.getDeliveryDirectives(V,ie.deliveryDirectives,H,Z);var Me=Object(j.computeReloadInterval)(V,A);void 0!==H&&V.canBlockReload&&(Me-=V.partTarget||1),this.log("reload live playlist "+ne+" in "+Math.round(Me)+" ms"),this.timer=self.setTimeout(function(){return R.loadPlaylist(I)},Me)}else this.clearTimer()},k.getDeliveryDirectives=function(ne,ie,re,R){var V=Object(ee.getSkipValue)(ne,re);return null!=ie&&ie.skip&&ne.deltaUpdateFailed&&(re=ie.msn,R=ie.part,V=ee.HlsSkip.No),new ee.HlsUrlParameters(re,R,V)},k.retryLoadingOrFail=function(ne){var V,ie=this,re=this.hls.config,R=this.retryCount<re.levelLoadingMaxRetry;if(R)if(this.retryCount++,ne.details.indexOf("LoadTimeOut")>-1&&null!==(V=ne.context)&&void 0!==V&&V.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+ne.details+'"'),this.loadPlaylist();else{var A=Math.min(Math.pow(2,this.retryCount)*re.levelLoadingRetryDelay,re.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout(function(){return ie.loadPlaylist()},A),this.warn("retry playlist loading #"+this.retryCount+" in "+A+' ms after "'+ne.details+'"')}else this.warn('cannot recover from error "'+ne.details+'"'),this.clearTimer(),ne.fatal=!0;return R},se}()},"./src/controller/base-stream-controller.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"State",function(){return B}),e.d(J,"default",function(){return q});var O=e("./src/polyfills/number.ts"),ee=e("./src/task-loop.ts"),j=e("./src/controller/fragment-tracker.ts"),S=e("./src/utils/buffer-helper.ts"),fe=e("./src/utils/logger.ts"),he=e("./src/events.ts"),se=e("./src/errors.ts"),k=e("./src/types/transmuxer.ts"),K=e("./src/utils/mp4-tools.ts"),ne=e("./src/utils/discontinuities.ts"),ie=e("./src/controller/fragment-finders.ts"),re=e("./src/controller/level-helper.ts"),R=e("./src/loader/fragment-loader.ts"),V=e("./src/crypt/decrypter.ts"),A=e("./src/utils/time-ranges.ts"),P=e("./src/types/loader.ts");function I(W,L){for(var D=0;D<L.length;D++){var F=L[D];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(W,F.key,F)}}function U(W,L){W.prototype=Object.create(L.prototype),W.prototype.constructor=W,Y(W,L)}function Y(W,L){return(Y=Object.setPrototypeOf||function(F,$){return F.__proto__=$,F})(W,L)}var B={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BACKTRACKING:"BACKTRACKING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},q=function(W){function L(F,$,oe){var M;return(M=W.call(this)||this).hls=void 0,M.fragPrevious=null,M.fragCurrent=null,M.fragmentTracker=void 0,M.transmuxer=null,M._state=B.STOPPED,M.media=void 0,M.mediaBuffer=void 0,M.config=void 0,M.bitrateTest=!1,M.lastCurrentTime=0,M.nextLoadPosition=0,M.startPosition=0,M.loadedmetadata=!1,M.fragLoadError=0,M.retryDate=0,M.levels=null,M.fragmentLoader=void 0,M.levelLastLoaded=null,M.startFragRequested=!1,M.decrypter=void 0,M.initPTS=[],M.onvseeking=null,M.onvended=null,M.logPrefix="",M.log=void 0,M.warn=void 0,M.logPrefix=oe,M.log=fe.logger.log.bind(fe.logger,oe+":"),M.warn=fe.logger.warn.bind(fe.logger,oe+":"),M.hls=F,M.fragmentLoader=new R.default(F.config),M.fragmentTracker=$,M.config=F.config,M.decrypter=new V.default(F,F.config),F.on(he.Events.KEY_LOADED,M.onKeyLoaded,function Z(W){if(void 0===W)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W}(M)),M}U(L,W);var D=L.prototype;return D.doTick=function(){this.onTickEnd()},D.onTickEnd=function(){},D.startLoad=function($){},D.stopLoad=function(){this.fragmentLoader.abort();var $=this.fragCurrent;$&&this.fragmentTracker.removeFragment($),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=B.STOPPED},D._streamEnded=function($,oe){var M=this.fragCurrent,be=this.fragmentTracker;if(!oe.live&&M&&M.sn>=oe.endSN&&!$.nextStart){var Me=oe.partList;if(null!=Me&&Me.length){var Ze=Me[Me.length-1];return S.BufferHelper.isBuffered(this.media,Ze.start+Ze.duration/2)}var je=be.getState(M);return je===j.FragmentState.PARTIAL||je===j.FragmentState.OK}return!1},D.onMediaAttached=function($,oe){var M=this.media=this.mediaBuffer=oe.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),M.addEventListener("seeking",this.onvseeking),M.addEventListener("ended",this.onvended);var be=this.config;this.levels&&be.autoStartLoad&&this.state===B.STOPPED&&this.startLoad(be.startPosition)},D.onMediaDetaching=function(){var $=this.media;null!=$&&$.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),$&&($.removeEventListener("seeking",this.onvseeking),$.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},D.onMediaSeeking=function(){var $=this.config,oe=this.fragCurrent,M=this.media,Me=this.state,Ze=M?M.currentTime:0,Fe=S.BufferHelper.bufferInfo(this.mediaBuffer||M,Ze,$.maxBufferHole);if(this.log("media seeking to "+(Object(O.isFiniteNumber)(Ze)?Ze.toFixed(3):Ze)+", state: "+Me),Me===B.ENDED)this.resetLoadingState();else if(oe&&!Fe.len){var je=$.maxFragLookUpTolerance,rt=Ze>oe.start+oe.duration+je;(Ze<oe.start-je||rt)&&(rt&&oe.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),oe.loader.abort()),this.resetLoadingState())}M&&(this.lastCurrentTime=Ze),!this.loadedmetadata&&!Fe.len&&(this.nextLoadPosition=this.startPosition=Ze),this.tickImmediate()},D.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},D.onKeyLoaded=function($,oe){if(this.state===B.KEY_LOADING&&oe.frag===this.fragCurrent&&this.levels){this.state=B.IDLE;var M=this.levels[oe.frag.level].details;M&&this.loadFragment(oe.frag,M,oe.frag.start)}},D.onHandlerDestroying=function(){this.stopLoad(),W.prototype.onHandlerDestroying.call(this)},D.onHandlerDestroyed=function(){this.state=B.STOPPED,this.hls.off(he.Events.KEY_LOADED,this.onKeyLoaded,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,W.prototype.onHandlerDestroyed.call(this)},D.loadKey=function($,oe){this.log("Loading key for "+$.sn+" of ["+oe.startSN+"-"+oe.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+$.level),this.state=B.KEY_LOADING,this.fragCurrent=$,this.hls.trigger(he.Events.KEY_LOADING,{frag:$})},D.loadFragment=function($,oe,M){this._loadFragForPlayback($,oe,M)},D._loadFragForPlayback=function($,oe,M){var be=this;this._doFragLoad($,oe,M,function(Fe){if(be.fragContextChanged($))return be.warn("Fragment "+$.sn+(Fe.part?" p: "+Fe.part.index:"")+" of level "+$.level+" was dropped during download."),void be.fragmentTracker.removeFragment($);$.stats.chunkCount++,be._handleFragmentLoadProgress(Fe)}).then(function(Ze){if(Ze){be.fragLoadError=0;var Fe=be.state;if(be.fragContextChanged($))return void((Fe===B.FRAG_LOADING||Fe===B.BACKTRACKING||!be.fragCurrent&&Fe===B.PARSING)&&(be.fragmentTracker.removeFragment($),be.state=B.IDLE));if("payload"in Ze&&(be.log("Loaded fragment "+$.sn+" of level "+$.level),be.hls.trigger(he.Events.FRAG_LOADED,Ze),be.state===B.BACKTRACKING))return be.fragmentTracker.backtrack($,Ze),void be.resetFragmentLoading($);be._handleFragmentLoadComplete(Ze)}}).catch(function(Ze){be.warn(Ze),be.resetFragmentLoading($)})},D.flushMainBuffer=function($,oe,M){if(void 0===M&&(M=null),$-oe){var be={startOffset:$,endOffset:oe,type:M};this.fragLoadError=0,this.hls.trigger(he.Events.BUFFER_FLUSHING,be)}},D._loadInitSegment=function($){var oe=this;this._doFragLoad($).then(function(M){if(!M||oe.fragContextChanged($)||!oe.levels)throw new Error("init load aborted");return M}).then(function(M){var be=oe.hls,Me=M.payload,Ze=$.decryptdata;if(Me&&Me.byteLength>0&&Ze&&Ze.key&&Ze.iv&&"AES-128"===Ze.method){var Fe=self.performance.now();return oe.decrypter.webCryptoDecrypt(new Uint8Array(Me),Ze.key.buffer,Ze.iv.buffer).then(function(je){var Ce=self.performance.now();return be.trigger(he.Events.FRAG_DECRYPTED,{frag:$,payload:je,stats:{tstart:Fe,tdecrypt:Ce}}),M.payload=je,M})}return M}).then(function(M){var be=oe.fragCurrent,Me=oe.hls,Ze=oe.levels;if(!Ze)throw new Error("init load aborted, missing levels");console.assert(Ze[$.level].details,"Level details are defined when init segment is loaded");var je=$.stats;oe.state=B.IDLE,oe.fragLoadError=0,$.data=new Uint8Array(M.payload),je.parsing.start=je.buffering.start=self.performance.now(),je.parsing.end=je.buffering.end=self.performance.now(),M.frag===be&&Me.trigger(he.Events.FRAG_BUFFERED,{stats:je,frag:be,part:null,id:$.type}),oe.tick()}).catch(function(M){oe.warn(M),oe.resetFragmentLoading($)})},D.fragContextChanged=function($){var oe=this.fragCurrent;return!$||!oe||$.level!==oe.level||$.sn!==oe.sn||$.urlId!==oe.urlId},D.fragBufferedComplete=function($,oe){this.log("Buffered "+$.type+" sn: "+$.sn+(oe?" part: "+oe.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+$.level+" "+A.default.toString(S.BufferHelper.getBuffered(this.mediaBuffer?this.mediaBuffer:this.media))),this.state=B.IDLE,this.tick()},D._handleFragmentLoadComplete=function($){var oe=this.transmuxer;if(oe){var M=$.frag,be=$.part,Me=$.partsLoaded,Ze=!Me||0===Me.length||Me.some(function(je){return!je}),Fe=new k.ChunkMetadata(M.level,M.sn,M.stats.chunkCount+1,0,be?be.index:-1,!Ze);oe.flush(Fe)}},D._handleFragmentLoadProgress=function($){},D._doFragLoad=function($,oe,M,be){var Me=this;if(void 0===M&&(M=null),!this.levels)throw new Error("frag load aborted, missing levels");if(M=Math.max($.start,M||0),this.config.lowLatencyMode&&oe){var Ze=oe.partList;if(Ze&&be){M>$.end&&oe.fragmentHint&&($=oe.fragmentHint);var Fe=this.getNextPart(Ze,$,M);if(Fe>-1){var je=Ze[Fe];return this.log("Loading part sn: "+$.sn+" p: "+je.index+" cc: "+$.cc+" of playlist ["+oe.startSN+"-"+oe.endSN+"] parts [0-"+Fe+"-"+(Ze.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+$.level+", target: "+parseFloat(M.toFixed(3))),this.nextLoadPosition=je.start+je.duration,this.state=B.FRAG_LOADING,this.hls.trigger(he.Events.FRAG_LOADING,{frag:$,part:Ze[Fe],targetBufferTime:M}),this.doFragPartsLoad($,Ze,Fe,be).catch(function(Ce){return Me.handleFragLoadError(Ce)})}if(!$.url||this.loadedEndOfParts(Ze,M))return Promise.resolve(null)}}return this.log("Loading fragment "+$.sn+" cc: "+$.cc+" "+(oe?"of ["+oe.startSN+"-"+oe.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+$.level+", target: "+parseFloat(M.toFixed(3))),Object(O.isFiniteNumber)($.sn)&&!this.bitrateTest&&(this.nextLoadPosition=$.start+$.duration),this.state=B.FRAG_LOADING,this.hls.trigger(he.Events.FRAG_LOADING,{frag:$,targetBufferTime:M}),this.fragmentLoader.load($,be).catch(function(Ce){return Me.handleFragLoadError(Ce)})},D.doFragPartsLoad=function($,oe,M,be){var Me=this;return new Promise(function(Ze,Fe){var je=[];!function Se(rt){var ct=oe[rt];Me.fragmentLoader.loadPart($,ct,be).then(function(Lt){je[ct.index]=Lt;var pt=Lt.part;Me.hls.trigger(he.Events.FRAG_LOADED,Lt);var gt=oe[rt+1];if(!gt||gt.fragment!==$)return Ze({frag:$,part:pt,partsLoaded:je});Se(rt+1)}).catch(Fe)}(M)})},D.handleFragLoadError=function($){var oe=$.data;return oe&&oe.details===se.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(oe.frag,oe.part):this.hls.trigger(he.Events.ERROR,oe),null},D._handleTransmuxerFlush=function($){var oe=this.getCurrentContext($);if(oe&&this.state===B.PARSING){var M=oe.frag,be=oe.part,Me=oe.level,Ze=self.performance.now();M.stats.parsing.end=Ze,be&&(be.stats.parsing.end=Ze),this.updateLevelTiming(M,be,Me,$.partial)}else this.fragCurrent||(this.state=B.IDLE)},D.getCurrentContext=function($){var oe=this.levels,M=$.level,be=$.sn,Me=$.part;if(!oe||!oe[M])return this.warn("Levels object was unset while buffering fragment "+be+" of level "+M+". The current chunk will not be buffered."),null;var Ze=oe[M],Fe=Me>-1?Object(re.getPartWith)(Ze,be,Me):null,je=Fe?Fe.fragment:Object(re.getFragmentWithSN)(Ze,be,this.fragCurrent);return je?{frag:je,part:Fe,level:Ze}:null},D.bufferFragmentData=function($,oe,M,be){if($&&this.state===B.PARSING){var Me=$.data1,Ze=$.data2,Fe=Me;Me&&Ze&&(Fe=Object(K.appendUint8Array)(Me,Ze)),Fe&&Fe.length&&(this.hls.trigger(he.Events.BUFFER_APPENDING,{type:$.type,frag:oe,part:M,chunkMeta:be,parent:oe.type,data:Fe}),$.dropped&&$.independent&&!M&&this.flushBufferGap(oe))}},D.flushBufferGap=function($){var oe=this.media;if(oe){if(!S.BufferHelper.isBuffered(oe,oe.currentTime))return void this.flushMainBuffer(0,$.start);var M=oe.currentTime,be=S.BufferHelper.bufferInfo(oe,M,0),Ze=Math.min(2*this.config.maxFragLookUpTolerance,.25*$.duration),Fe=Math.max(Math.min($.start-Ze,be.end-Ze),M+Ze);$.start-Fe>Ze&&this.flushMainBuffer(Fe,$.start)}},D.getFwdBufferInfo=function($,oe){var M=this.config,be=this.getLoadPosition();if(!Object(O.isFiniteNumber)(be))return null;var Me=S.BufferHelper.bufferInfo($,be,M.maxBufferHole);if(0===Me.len&&void 0!==Me.nextStart){var Ze=this.fragmentTracker.getBufferedFrag(be,oe);if(Ze&&Me.nextStart<Ze.end)return S.BufferHelper.bufferInfo($,be,Math.max(Me.nextStart,M.maxBufferHole))}return Me},D.getMaxBufferLength=function($){var M,oe=this.config;return M=$?Math.max(8*oe.maxBufferSize/$,oe.maxBufferLength):oe.maxBufferLength,Math.min(M,oe.maxMaxBufferLength)},D.reduceMaxBufferLength=function($){var oe=this.config;return oe.maxMaxBufferLength>=($||oe.maxBufferLength)&&(oe.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+oe.maxMaxBufferLength+"s"),!0)},D.getNextFragment=function($,oe){var M,be,Me=oe.fragments,Ze=Me.length;if(!Ze)return null;var Ce,Fe=this.config,je=Me[0].start;if(oe.live){var Se=Fe.initialLiveManifestSize;if(Ze<Se)return this.warn("Not enough fragments to start playback (have: "+Ze+", need: "+Se+")"),null;!oe.PTSKnown&&!this.startFragRequested&&-1===this.startPosition&&(Ce=this.getInitialLiveFragment(oe,Me),this.startPosition=Ce?this.hls.liveSyncPosition||Ce.start:$)}else $<=je&&(Ce=Me[0]);return Ce||(Ce=this.getFragmentAtPosition($,Fe.lowLatencyMode?oe.partEnd:oe.fragmentEnd,oe)),null!==(M=Ce)&&void 0!==M&&M.initSegment&&!(null!==(be=Ce)&&void 0!==be&&be.initSegment.data)&&!this.bitrateTest&&(Ce=Ce.initSegment),Ce},D.getNextPart=function($,oe,M){for(var be=-1,Me=!1,Ze=!0,Fe=0,je=$.length;Fe<je;Fe++){var Ce=$[Fe];if(Ze=Ze&&!Ce.independent,be>-1&&M<Ce.start)break;var Se=Ce.loaded;!Se&&(Me||Ce.independent||Ze)&&Ce.fragment===oe&&(be=Fe),Me=Se}return be},D.loadedEndOfParts=function($,oe){var M=$[$.length-1];return M&&oe>M.start&&M.loaded},D.getInitialLiveFragment=function($,oe){var M=this.fragPrevious,be=null;if(M){if($.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+M.programDateTime),be=Object(ie.findFragmentByPDT)(oe,M.endProgramDateTime,this.config.maxFragLookUpTolerance)),!be){var Me=M.sn+1;if(Me>=$.startSN&&Me<=$.endSN){var Ze=oe[Me-$.startSN];M.cc===Ze.cc&&this.log("Live playlist, switching playlist, load frag with next SN: "+(be=Ze).sn)}be||(be=Object(ie.findFragWithCC)(oe,M.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+be.sn)}}else{var Fe=this.hls.liveSyncPosition;null!==Fe&&(be=this.getFragmentAtPosition(Fe,this.bitrateTest?$.fragmentEnd:$.edge,$))}return be},D.getFragmentAtPosition=function($,oe,M){var rt,be=this.config,Me=this.fragPrevious,Ze=M.fragments,Fe=M.endSN,je=M.fragmentHint,Ce=be.maxFragLookUpTolerance,Se=!!(be.lowLatencyMode&&M.partList&&je);if(Se&&je&&!this.bitrateTest&&(Ze=Ze.concat(je),Fe=je.sn),$<oe){var ct=$>oe-Ce?0:Ce;rt=Object(ie.findFragmentByPTS)(Me,Ze,$,ct)}else rt=Ze[Ze.length-1];if(rt){var Lt=rt.sn-M.startSN,pt=Me&&rt.level===Me.level,gt=Ze[Lt+1];if(this.fragmentTracker.getState(rt)===j.FragmentState.BACKTRACKED){rt=null;for(var zt=Lt;Ze[zt]&&this.fragmentTracker.getState(Ze[zt])===j.FragmentState.BACKTRACKED;)rt=Me?Ze[zt--]:Ze[--zt];rt||(rt=gt)}else Me&&rt.sn===Me.sn&&!Se&&pt&&(rt.sn<Fe&&this.fragmentTracker.getState(gt)!==j.FragmentState.OK?(this.log("SN "+rt.sn+" just loaded, load next one: "+gt.sn),rt=gt):rt=null)}return rt},D.synchronizeToLiveEdge=function($){var oe=this.config,M=this.media;if(M){var be=this.hls.liveSyncPosition,Me=M.currentTime,Fe=$.edge,je=Me>=$.fragments[0].start-oe.maxFragLookUpTolerance&&Me<=Fe;null!==be&&M.duration>be&&(Me<be||!je)&&(!je&&M.readyState<4||Me<Fe-(void 0!==oe.liveMaxLatencyDuration?oe.liveMaxLatencyDuration:oe.liveMaxLatencyDurationCount*$.targetduration))&&(this.loadedmetadata||(this.nextLoadPosition=be),M.readyState&&(this.warn("Playback: "+Me.toFixed(3)+" is located too far from the end of live sliding playlist: "+Fe+", reset currentTime to : "+be.toFixed(3)),M.currentTime=be))}},D.alignPlaylists=function($,oe){var be=this.levelLastLoaded,Me=this.fragPrevious,Ze=null!==be?this.levels[be]:null,Fe=$.fragments.length;if(!Fe)return this.warn("No fragments in live playlist"),0;var je=$.fragments[0].start,Ce=!oe,Se=$.alignedSliding&&Object(O.isFiniteNumber)(je);if(Ce||!Se&&!je){Object(ne.alignStream)(Me,Ze,$);var rt=$.fragments[0].start;return this.log("Live playlist sliding: "+rt.toFixed(2)+" start-sn: "+(oe?oe.startSN:"na")+"->"+$.startSN+" prev-sn: "+(Me?Me.sn:"na")+" fragments: "+Fe),rt}return je},D.waitForCdnTuneIn=function($){return $.live&&$.canBlockReload&&$.tuneInGoal>Math.max($.partHoldBack,3*$.partTarget)},D.setStartPosition=function($,oe){var M=this.startPosition;if(M<oe&&(M=-1),-1===M||-1===this.lastCurrentTime){var be=$.startTimeOffset;Object(O.isFiniteNumber)(be)?(M=oe+be,be<0&&(M+=$.totalduration),M=Math.min(Math.max(oe,M),oe+$.totalduration),this.log("Start time offset "+be+" found in playlist, adjust startPosition to "+M),this.startPosition=M):$.live?M=this.hls.liveSyncPosition||oe:this.startPosition=M=0,this.lastCurrentTime=M}this.nextLoadPosition=M},D.getLoadPosition=function(){var $=this.media,oe=0;return this.loadedmetadata&&$?oe=$.currentTime:this.nextLoadPosition&&(oe=this.nextLoadPosition),oe},D.handleFragLoadAborted=function($,oe){this.transmuxer&&"initSegment"!==$.sn&&$.stats.aborted&&(this.warn("Fragment "+$.sn+(oe?" part"+oe.index:"")+" of level "+$.level+" was aborted"),this.resetFragmentLoading($))},D.resetFragmentLoading=function($){(!this.fragCurrent||!this.fragContextChanged($))&&(this.state=B.IDLE)},D.onFragmentOrKeyLoadError=function($,oe){if(!oe.fatal){var M=oe.frag;if(M&&M.type===$){var be=this.fragCurrent;console.assert(be&&M.sn===be.sn&&M.level===be.level&&M.urlId===be.urlId,"Frag load error must match current frag to retry");var Me=this.config;if(this.fragLoadError+1<=Me.fragLoadingMaxRetry){if(this.resetLiveStartWhenNotLoaded(M.level))return;var Ze=Math.min(Math.pow(2,this.fragLoadError)*Me.fragLoadingRetryDelay,Me.fragLoadingMaxRetryTimeout);this.warn("Fragment "+M.sn+" of "+$+" "+M.level+" failed to load, retrying in "+Ze+"ms"),this.retryDate=self.performance.now()+Ze,this.fragLoadError++,this.state=B.FRAG_LOADING_WAITING_RETRY}else oe.levelRetry?($===P.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=B.IDLE):(fe.logger.error(oe.details+" reaches max retry, redispatch as fatal ..."),oe.fatal=!0,this.hls.stopLoad(),this.state=B.ERROR)}}},D.afterBufferFlushed=function($,oe,M){if($){var be=S.BufferHelper.getBuffered($);this.fragmentTracker.detectEvictedFragments(oe,be,M),this.state===B.ENDED&&this.resetLoadingState()}},D.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=B.IDLE},D.resetLiveStartWhenNotLoaded=function($){if(!this.loadedmetadata){this.startFragRequested=!1;var oe=this.levels?this.levels[$].details:null;if(null!=oe&&oe.live)return this.startPosition=-1,this.setStartPosition(oe,0),this.resetLoadingState(),!0;this.nextLoadPosition=this.startPosition}return!1},D.updateLevelTiming=function($,oe,M,be){var Me=this,Ze=M.details;console.assert(!!Ze,"level.details must be defined"),Object.keys($.elementaryStreams).reduce(function(je,Ce){var Se=$.elementaryStreams[Ce];if(Se){var rt=Se.endPTS-Se.startPTS;if(rt<=0)return Me.warn("Could not parse fragment "+$.sn+" "+Ce+" duration reliably ("+rt+") resetting transmuxer to fallback to playlist timing"),Me.resetTransmuxer(),je||!1;var ct=be?0:Object(re.updateFragPTSDTS)(Ze,$,Se.startPTS,Se.endPTS,Se.startDTS,Se.endDTS);return Me.hls.trigger(he.Events.LEVEL_PTS_UPDATED,{details:Ze,level:M,drift:ct,type:Ce,frag:$,start:Se.startPTS,end:Se.endPTS}),!0}return je},!1)?(this.state=B.PARSED,this.hls.trigger(he.Events.FRAG_PARSED,{frag:$,part:oe})):this.resetLoadingState()},D.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},function H(W,L,D){return L&&I(W.prototype,L),D&&I(W,D),W}(L,[{key:"state",get:function(){return this._state},set:function($){var oe=this._state;oe!==$&&(this._state=$,this.log(oe+"->"+$))}}]),L}(ee.default)},"./src/controller/buffer-controller.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"default",function(){return ie});var O=e("./src/polyfills/number.ts"),ee=e("./src/events.ts"),j=e("./src/utils/logger.ts"),S=e("./src/errors.ts"),fe=e("./src/utils/buffer-helper.ts"),he=e("./src/utils/mediasource-helper.ts"),se=e("./src/loader/fragment.ts"),k=e("./src/controller/buffer-operation-queue.ts"),K=Object(he.getMediaSource)(),ne=/([ha]vc.)(?:\.[^.,]+)+/,ie=function(){function re(V){var A=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var P=A.hls,I=A.media,H=A.mediaSource;j.logger.log("[buffer-controller]: Media source opened"),I&&(A.updateMediaElementDuration(),P.trigger(ee.Events.MEDIA_ATTACHED,{media:I})),H&&H.removeEventListener("sourceopen",A._onMediaSourceOpen),A.checkPendingTracks()},this._onMediaSourceClose=function(){j.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){j.logger.log("[buffer-controller]: Media source ended")},this.hls=V,this._initSourceBuffer(),this.registerListeners()}var R=re.prototype;return R.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},R.destroy=function(){this.unregisterListeners(),this.details=null},R.registerListeners=function(){var A=this.hls;A.on(ee.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),A.on(ee.Events.MEDIA_DETACHING,this.onMediaDetaching,this),A.on(ee.Events.MANIFEST_PARSED,this.onManifestParsed,this),A.on(ee.Events.BUFFER_RESET,this.onBufferReset,this),A.on(ee.Events.BUFFER_APPENDING,this.onBufferAppending,this),A.on(ee.Events.BUFFER_CODECS,this.onBufferCodecs,this),A.on(ee.Events.BUFFER_EOS,this.onBufferEos,this),A.on(ee.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),A.on(ee.Events.LEVEL_UPDATED,this.onLevelUpdated,this),A.on(ee.Events.FRAG_PARSED,this.onFragParsed,this),A.on(ee.Events.FRAG_CHANGED,this.onFragChanged,this)},R.unregisterListeners=function(){var A=this.hls;A.off(ee.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),A.off(ee.Events.MEDIA_DETACHING,this.onMediaDetaching,this),A.off(ee.Events.MANIFEST_PARSED,this.onManifestParsed,this),A.off(ee.Events.BUFFER_RESET,this.onBufferReset,this),A.off(ee.Events.BUFFER_APPENDING,this.onBufferAppending,this),A.off(ee.Events.BUFFER_CODECS,this.onBufferCodecs,this),A.off(ee.Events.BUFFER_EOS,this.onBufferEos,this),A.off(ee.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),A.off(ee.Events.LEVEL_UPDATED,this.onLevelUpdated,this),A.off(ee.Events.FRAG_PARSED,this.onFragParsed,this),A.off(ee.Events.FRAG_CHANGED,this.onFragChanged,this)},R._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new k.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},R.onManifestParsed=function(A,P){var I=2;(P.audio&&!P.video||!P.altAudio)&&(I=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=I,this.details=null,j.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},R.onMediaAttaching=function(A,P){var I=this.media=P.media;if(I&&K){var H=this.mediaSource=new K;H.addEventListener("sourceopen",this._onMediaSourceOpen),H.addEventListener("sourceended",this._onMediaSourceEnded),H.addEventListener("sourceclose",this._onMediaSourceClose),I.src=self.URL.createObjectURL(H),this._objectUrl=I.src}},R.onMediaDetaching=function(){var A=this.media,P=this.mediaSource,I=this._objectUrl;if(P){if(j.logger.log("[buffer-controller]: media source detaching"),"open"===P.readyState)try{P.endOfStream()}catch(H){j.logger.warn("[buffer-controller]: onMediaDetaching: "+H.message+" while calling endOfStream")}this.onBufferReset(),P.removeEventListener("sourceopen",this._onMediaSourceOpen),P.removeEventListener("sourceended",this._onMediaSourceEnded),P.removeEventListener("sourceclose",this._onMediaSourceClose),A&&(I&&self.URL.revokeObjectURL(I),A.src===I?(A.removeAttribute("src"),A.load()):j.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(ee.Events.MEDIA_DETACHED,void 0)},R.onBufferReset=function(){var A=this;this.getSourceBufferTypes().forEach(function(P){var I=A.sourceBuffer[P];try{I&&(A.removeBufferListeners(P),A.mediaSource&&A.mediaSource.removeSourceBuffer(I),A.sourceBuffer[P]=void 0)}catch(H){j.logger.warn("[buffer-controller]: Failed to reset the "+P+" buffer",H)}}),this._initSourceBuffer()},R.onBufferCodecs=function(A,P){var I=this,H=this.getSourceBufferTypes().length;Object.keys(P).forEach(function(Z){if(H){var U=I.tracks[Z];if(U&&"function"==typeof U.buffer.changeType){var Y=P[Z],B=Y.codec,q=Y.levelCodec,W=Y.container;(U.levelCodec||U.codec).replace(ne,"$1")!==(q||B).replace(ne,"$1")&&I.appendChangeType(Z,W+";codecs="+(q||B))}}else I.pendingTracks[Z]=P[Z]}),!H&&(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},R.appendChangeType=function(A,P){var I=this,H=this.operationQueue,Z={execute:function(){var Y=I.sourceBuffer[A];Y&&(j.logger.log("[buffer-controller]: changing "+A+" sourceBuffer type to "+P),Y.changeType(P)),H.shiftAndExecuteNext(A)},onStart:function(){},onComplete:function(){},onError:function(Y){j.logger.warn("[buffer-controller]: Failed to change "+A+" SourceBuffer type",Y)}};H.append(Z,A)},R.onBufferAppending=function(A,P){var I=this,H=this.hls,Z=this.operationQueue,U=this.tracks,Y=P.data,B=P.type,q=P.frag,W=P.part,L=P.chunkMeta,D=L.buffering[B],F=self.performance.now();D.start=F;var $=q.stats.buffering,oe=W?W.stats.buffering:null;0===$.start&&($.start=F),oe&&0===oe.start&&(oe.start=F);var M=U.audio,be="audio"===B&&1===L.id&&"audio/mpeg"===(null==M?void 0:M.container);Z.append({execute:function(){if(D.executeStart=self.performance.now(),be){var Fe=I.sourceBuffer[B];if(Fe){var je=q.start-Fe.timestampOffset;Math.abs(je)>=.1&&(j.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+q.start+" (delta: "+je+") sn: "+q.sn+")"),Fe.timestampOffset=q.start)}}I.appendExecutor(Y,B)},onStart:function(){},onComplete:function(){var Fe=self.performance.now();D.executeEnd=D.end=Fe,0===$.first&&($.first=Fe),oe&&0===oe.first&&(oe.first=Fe);var je=I.sourceBuffer,Ce={};for(var Se in je)Ce[Se]=fe.BufferHelper.getBuffered(je[Se]);I.appendError=0,I.hls.trigger(ee.Events.BUFFER_APPENDED,{type:B,frag:q,part:W,chunkMeta:L,parent:q.type,timeRanges:Ce})},onError:function(Fe){j.logger.error("[buffer-controller]: Error encountered while trying to append to the "+B+" SourceBuffer",Fe);var je={type:S.ErrorTypes.MEDIA_ERROR,parent:q.type,details:S.ErrorDetails.BUFFER_APPEND_ERROR,err:Fe,fatal:!1};Fe.code===DOMException.QUOTA_EXCEEDED_ERR?je.details=S.ErrorDetails.BUFFER_FULL_ERROR:(I.appendError++,je.details=S.ErrorDetails.BUFFER_APPEND_ERROR,I.appendError>H.config.appendErrorMaxRetry&&(j.logger.error("[buffer-controller]: Failed "+H.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),je.fatal=!0)),H.trigger(ee.Events.ERROR,je)}},B)},R.onBufferFlushing=function(A,P){var I=this,H=this.operationQueue,Z=function(Y){return{execute:I.removeExecutor.bind(I,Y,P.startOffset,P.endOffset),onStart:function(){},onComplete:function(){I.hls.trigger(ee.Events.BUFFER_FLUSHED,{type:Y})},onError:function(q){j.logger.warn("[buffer-controller]: Failed to remove from "+Y+" SourceBuffer",q)}}};P.type?H.append(Z(P.type),P.type):this.getSourceBufferTypes().forEach(function(U){H.append(Z(U),U)})},R.onFragParsed=function(A,P){var I=this,H=P.frag,Z=P.part,U=[],Y=Z?Z.elementaryStreams:H.elementaryStreams;Y[se.ElementaryStreamTypes.AUDIOVIDEO]?U.push("audiovideo"):(Y[se.ElementaryStreamTypes.AUDIO]&&U.push("audio"),Y[se.ElementaryStreamTypes.VIDEO]&&U.push("video"));0===U.length&&j.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+H.type+" level: "+H.level+" sn: "+H.sn),this.blockBuffers(function(){var W=self.performance.now();H.stats.buffering.end=W,Z&&(Z.stats.buffering.end=W),I.hls.trigger(ee.Events.FRAG_BUFFERED,{frag:H,part:Z,stats:Z?Z.stats:H.stats,id:H.type})},U)},R.onFragChanged=function(A,P){this.flushBackBuffer()},R.onBufferEos=function(A,P){var I=this;this.getSourceBufferTypes().reduce(function(Z,U){var Y=I.sourceBuffer[U];return(!P.type||P.type===U)&&Y&&!Y.ended&&(Y.ended=!0,j.logger.log("[buffer-controller]: "+U+" sourceBuffer now EOS")),Z&&!(Y&&!Y.ended)},!0)&&this.blockBuffers(function(){var Z=I.mediaSource;!Z||"open"!==Z.readyState||Z.endOfStream()})},R.onLevelUpdated=function(A,P){var I=P.details;!I.fragments.length||(this.details=I,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},R.flushBackBuffer=function(){var A=this.hls,P=this.details,I=this.media,H=this.sourceBuffer;if(I&&null!==P){var Z=this.getSourceBufferTypes();if(Z.length){var U=P.live&&null!==A.config.liveBackBufferLength?A.config.liveBackBufferLength:A.config.backBufferLength;if(Object(O.isFiniteNumber)(U)&&!(U<0)){var Y=I.currentTime,B=P.levelTargetDuration,q=Math.max(U,B),W=Math.floor(Y/B)*B-q;Z.forEach(function(L){var D=H[L];if(D){var F=fe.BufferHelper.getBuffered(D);F.length>0&&W>F.start(0)&&(A.trigger(ee.Events.BACK_BUFFER_REACHED,{bufferEnd:W}),P.live&&A.trigger(ee.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:W}),A.trigger(ee.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:W,type:L}))}})}}}},R.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var A=this.details,P=this.hls,H=this.mediaSource,Z=A.fragments[0].start+A.totalduration,U=this.media.duration,Y=Object(O.isFiniteNumber)(H.duration)?H.duration:0;A.live&&P.config.liveDurationInfinity?(j.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),H.duration=1/0,this.updateSeekableRange(A)):(Z>Y&&Z>U||!Object(O.isFiniteNumber)(U))&&(j.logger.log("[buffer-controller]: Updating Media Source duration to "+Z.toFixed(3)),H.duration=Z)}},R.updateSeekableRange=function(A){var P=this.mediaSource,I=A.fragments;if(I.length&&A.live&&null!=P&&P.setLiveSeekableRange){var Z=Math.max(0,I[0].start),U=Math.max(Z,Z+A.totalduration);P.setLiveSeekableRange(Z,U)}},R.checkPendingTracks=function(){var A=this.bufferCodecEventsExpected,P=this.operationQueue,I=this.pendingTracks,H=Object.keys(I).length;if(H&&!A||2===H){this.createSourceBuffers(I),this.pendingTracks={};var Z=this.getSourceBufferTypes();if(0===Z.length)return void this.hls.trigger(ee.Events.ERROR,{type:S.ErrorTypes.MEDIA_ERROR,details:S.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});Z.forEach(function(U){P.executeNext(U)})}},R.createSourceBuffers=function(A){var P=this.sourceBuffer,I=this.mediaSource;if(!I)throw Error("createSourceBuffers called when mediaSource was null");var H=0;for(var Z in A)if(!P[Z]){var U=A[Z];if(!U)throw Error("source buffer exists for track "+Z+", however track does not");var Y=U.levelCodec||U.codec,B=U.container+";codecs="+Y;j.logger.log("[buffer-controller]: creating sourceBuffer("+B+")");try{var q=P[Z]=I.addSourceBuffer(B),W=Z;this.addBufferListener(W,"updatestart",this._onSBUpdateStart),this.addBufferListener(W,"updateend",this._onSBUpdateEnd),this.addBufferListener(W,"error",this._onSBUpdateError),this.tracks[Z]={buffer:q,codec:Y,container:U.container,levelCodec:U.levelCodec,id:U.id},H++}catch(L){j.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+L.message),this.hls.trigger(ee.Events.ERROR,{type:S.ErrorTypes.MEDIA_ERROR,details:S.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:L,mimeType:B})}}H&&this.hls.trigger(ee.Events.BUFFER_CREATED,{tracks:this.tracks})},R._onSBUpdateStart=function(A){this.operationQueue.current(A).onStart()},R._onSBUpdateEnd=function(A){var P=this.operationQueue;P.current(A).onComplete(),P.shiftAndExecuteNext(A)},R._onSBUpdateError=function(A,P){j.logger.error("[buffer-controller]: "+A+" SourceBuffer error",P),this.hls.trigger(ee.Events.ERROR,{type:S.ErrorTypes.MEDIA_ERROR,details:S.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var I=this.operationQueue.current(A);I&&I.onError(P)},R.removeExecutor=function(A,P,I){var H=this.media,Z=this.mediaSource,U=this.operationQueue,B=this.sourceBuffer[A];if(!H||!Z||!B)return j.logger.warn("[buffer-controller]: Attempting to remove from the "+A+" SourceBuffer, but it does not exist"),void U.shiftAndExecuteNext(A);var q=Object(O.isFiniteNumber)(H.duration)?H.duration:1/0,W=Object(O.isFiniteNumber)(Z.duration)?Z.duration:1/0,L=Math.max(0,P),D=Math.min(I,q,W);D>L?(j.logger.log("[buffer-controller]: Removing ["+L+","+D+"] from the "+A+" SourceBuffer"),console.assert(!B.updating,A+" sourceBuffer must not be updating"),B.remove(L,D)):U.shiftAndExecuteNext(A)},R.appendExecutor=function(A,P){var I=this.operationQueue,Z=this.sourceBuffer[P];if(!Z)return j.logger.warn("[buffer-controller]: Attempting to append to the "+P+" SourceBuffer, but it does not exist"),void I.shiftAndExecuteNext(P);Z.ended=!1,console.assert(!Z.updating,P+" sourceBuffer must not be updating"),Z.appendBuffer(A)},R.blockBuffers=function(A,P){var I=this;if(void 0===P&&(P=this.getSourceBufferTypes()),!P.length)return j.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve(A);var H=this.operationQueue,Z=P.map(function(U){return H.appendBlocker(U)});Promise.all(Z).then(function(){A(),P.forEach(function(U){var Y=I.sourceBuffer[U];(!Y||!Y.updating)&&H.shiftAndExecuteNext(U)})})},R.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},R.addBufferListener=function(A,P,I){var H=this.sourceBuffer[A];if(H){var Z=I.bind(this,A);this.listeners[A].push({event:P,listener:Z}),H.addEventListener(P,Z)}},R.removeBufferListeners=function(A){var P=this.sourceBuffer[A];!P||this.listeners[A].forEach(function(I){P.removeEventListener(I.event,I.listener)})},re}()},"./src/controller/buffer-operation-queue.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"default",function(){return ee});var O=e("./src/utils/logger.ts"),ee=function(){function j(fe){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=fe}var S=j.prototype;return S.append=function(he,se){var k=this.queues[se];k.push(he),1===k.length&&this.buffers[se]&&this.executeNext(se)},S.insertAbort=function(he,se){this.queues[se].unshift(he),this.executeNext(se)},S.appendBlocker=function(he){var se,k=new Promise(function(ne){se=ne});return this.append({execute:se,onStart:function(){},onComplete:function(){},onError:function(){}},he),k},S.executeNext=function(he){var K=this.buffers[he],ne=this.queues[he];if(ne.length){var ie=ne[0];try{ie.execute()}catch(re){O.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),ie.onError(re),(!K||!K.updating)&&(ne.shift(),this.executeNext(he))}}},S.shiftAndExecuteNext=function(he){this.queues[he].shift(),this.executeNext(he)},S.current=function(he){return this.queues[he][0]},j}()},"./src/controller/cap-level-controller.ts":function(ht,J,e){"use strict";e.r(J);var O=e("./src/events.ts");function ee(fe,he){for(var se=0;se<he.length;se++){var k=he[se];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(fe,k.key,k)}}J.default=function(){function fe(se){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=se,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var he=fe.prototype;return he.setStreamController=function(k){this.streamController=k},he.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},he.registerListeners=function(){var k=this.hls;k.on(O.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),k.on(O.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),k.on(O.Events.MANIFEST_PARSED,this.onManifestParsed,this),k.on(O.Events.BUFFER_CODECS,this.onBufferCodecs,this),k.on(O.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},he.unregisterListener=function(){var k=this.hls;k.off(O.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),k.off(O.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),k.off(O.Events.MANIFEST_PARSED,this.onManifestParsed,this),k.off(O.Events.BUFFER_CODECS,this.onBufferCodecs,this),k.off(O.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},he.onFpsDropLevelCapping=function(k,K){fe.isLevelAllowed(K.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(K.droppedLevel)},he.onMediaAttaching=function(k,K){this.media=K.media instanceof HTMLVideoElement?K.media:null},he.onManifestParsed=function(k,K){var ne=this.hls;this.restrictedLevels=[],this.firstLevel=K.firstLevel,ne.config.capLevelToPlayerSize&&K.video&&this.startCapping()},he.onBufferCodecs=function(k,K){this.hls.config.capLevelToPlayerSize&&K.video&&this.startCapping()},he.onMediaDetaching=function(){this.stopCapping()},he.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var k=this.hls.levels;if(k.length){var K=this.hls;K.autoLevelCapping=this.getMaxLevel(k.length-1),K.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=K.autoLevelCapping}}},he.getMaxLevel=function(k){var K=this,ne=this.hls.levels;if(!ne.length)return-1;var ie=ne.filter(function(re,R){return fe.isLevelAllowed(R,K.restrictedLevels)&&R<=k});return this.clientRect=null,fe.getMaxLevelByMediaSize(ie,this.mediaWidth,this.mediaHeight)},he.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},he.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},he.getDimensions=function(){if(this.clientRect)return this.clientRect;var k=this.media,K={width:0,height:0};if(k){var ne=k.getBoundingClientRect();K.width=ne.width,K.height=ne.height,!K.width&&!K.height&&(K.width=ne.right-ne.left||k.width||0,K.height=ne.bottom-ne.top||k.height||0)}return this.clientRect=K,K},fe.isLevelAllowed=function(k,K){return void 0===K&&(K=[]),-1===K.indexOf(k)},fe.getMaxLevelByMediaSize=function(k,K,ne){if(!k||!k.length)return-1;for(var re=k.length-1,R=0;R<k.length;R+=1){var V=k[R];if((V.width>=K||V.height>=ne)&&(P=V,!(I=k[R+1])||P.width!==I.width||P.height!==I.height)){re=R;break}}var P,I;return re},function j(fe,he,se){return he&&ee(fe.prototype,he),se&&ee(fe,se),fe}(fe,[{key:"mediaWidth",get:function(){return this.getDimensions().width*fe.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*fe.contentScaleFactor}}],[{key:"contentScaleFactor",get:function(){var k=1;try{k=self.devicePixelRatio}catch(K){}return k}}]),fe}()},"./src/controller/cmcd-controller.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"default",function(){return ie});var O=e("./src/events.ts"),ee=e("./src/types/cmcd.ts"),j=e("./src/utils/buffer-helper.ts"),S=e("./src/utils/logger.ts");function fe(re,R){for(var V=0;V<R.length;V++){var A=R[V];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(re,A.key,A)}}function he(re,R,V){return R&&fe(re.prototype,R),V&&fe(re,V),re}function se(re,R){var V="undefined"!=typeof Symbol&&re[Symbol.iterator]||re["@@iterator"];if(V)return(V=V.call(re)).next.bind(V);if(Array.isArray(re)||(V=function k(re,R){if(re){if("string"==typeof re)return K(re,R);var V=Object.prototype.toString.call(re).slice(8,-1);if("Object"===V&&re.constructor&&(V=re.constructor.name),"Map"===V||"Set"===V)return Array.from(re);if("Arguments"===V||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V))return K(re,R)}}(re))||R&&re&&"number"==typeof re.length){V&&(re=V);var A=0;return function(){return A>=re.length?{done:!0}:{done:!1,value:re[A++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function K(re,R){(null==R||R>re.length)&&(R=re.length);for(var V=0,A=new Array(R);V<R;V++)A[V]=re[V];return A}function ne(){return ne=Object.assign||function(re){for(var R=1;R<arguments.length;R++){var V=arguments[R];for(var A in V)Object.prototype.hasOwnProperty.call(V,A)&&(re[A]=V[A])}return re},ne.apply(this,arguments)}var ie=function(){function re(V){var A=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){A.initialized&&(A.starved=!0),A.buffering=!0},this.onPlaying=function(){A.initialized||(A.initialized=!0),A.buffering=!1},this.applyPlaylistData=function(H){try{A.apply(H,{ot:ee.CMCDObjectType.MANIFEST,su:!A.initialized})}catch(Z){S.logger.warn("Could not generate manifest CMCD data.",Z)}},this.applyFragmentData=function(H){try{var Z=H.frag,U=A.hls.levels[Z.level],Y=A.getObjectType(Z),B={d:1e3*Z.duration,ot:Y};(Y===ee.CMCDObjectType.VIDEO||Y===ee.CMCDObjectType.AUDIO||Y==ee.CMCDObjectType.MUXED)&&(B.br=U.bitrate/1e3,B.tb=A.getTopBandwidth(Y)/1e3,B.bl=A.getBufferLength(Y)),A.apply(H,B)}catch(q){S.logger.warn("Could not generate segment CMCD data.",q)}},this.hls=V;var P=this.config=V.config,I=P.cmcd;null!=I&&(P.pLoader=this.createPlaylistLoader(),P.fLoader=this.createFragmentLoader(),this.sid=I.sessionId||re.uuid(),this.cid=I.contentId,this.useHeaders=!0===I.useHeaders,this.registerListeners())}var R=re.prototype;return R.registerListeners=function(){var A=this.hls;A.on(O.Events.MEDIA_ATTACHED,this.onMediaAttached,this),A.on(O.Events.MEDIA_DETACHED,this.onMediaDetached,this),A.on(O.Events.BUFFER_CREATED,this.onBufferCreated,this)},R.unregisterListeners=function(){var A=this.hls;A.off(O.Events.MEDIA_ATTACHED,this.onMediaAttached,this),A.off(O.Events.MEDIA_DETACHED,this.onMediaDetached,this),A.off(O.Events.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},R.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},R.onMediaAttached=function(A,P){this.media=P.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},R.onMediaDetached=function(){!this.media||(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},R.onBufferCreated=function(A,P){var I,H;this.audioBuffer=null===(I=P.tracks.audio)||void 0===I?void 0:I.buffer,this.videoBuffer=null===(H=P.tracks.video)||void 0===H?void 0:H.buffer},R.createData=function(){var A;return{v:ee.CMCDVersion,sf:ee.CMCDStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:null===(A=this.media)||void 0===A?void 0:A.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},R.apply=function(A,P){if(void 0===P&&(P={}),ne(P,this.createData()),this.starved&&(P.ot===ee.CMCDObjectType.INIT||P.ot===ee.CMCDObjectType.VIDEO||P.ot===ee.CMCDObjectType.MUXED)&&(P.bs=!0,P.su=!0,this.starved=!1),null==P.su&&(P.su=this.buffering),this.useHeaders){var H=re.toHeaders(P);if(!Object.keys(H).length)return;A.headers||(A.headers={}),ne(A.headers,H)}else{var Z=re.toQuery(P);if(!Z)return;A.url=re.appendQueryToUri(A.url,Z)}},R.getObjectType=function(A){var P=A.type;return"subtitle"===P?ee.CMCDObjectType.TIMED_TEXT:"initSegment"===A.sn?ee.CMCDObjectType.INIT:"audio"===P?ee.CMCDObjectType.AUDIO:"main"===P?this.hls.audioTracks.length?ee.CMCDObjectType.VIDEO:ee.CMCDObjectType.MUXED:void 0},R.getTopBandwidth=function(A){var I,P=0,H=this.hls;if(A===ee.CMCDObjectType.AUDIO)I=H.audioTracks;else{var Z=H.maxAutoLevel;I=H.levels.slice(0,Z>-1?Z+1:H.levels.length)}for(var B,Y=se(I);!(B=Y()).done;){var q=B.value;q.bitrate>P&&(P=q.bitrate)}return P>0?P:NaN},R.getBufferLength=function(A){var P=this.hls.media,I=A===ee.CMCDObjectType.AUDIO?this.audioBuffer:this.videoBuffer;return I&&P?1e3*j.BufferHelper.bufferInfo(I,P.currentTime,this.config.maxBufferHole).len:NaN},R.createPlaylistLoader=function(){var P=this.applyPlaylistData,I=this.config.pLoader||this.config.loader;return function(){function H(U){this.loader=void 0,this.loader=new I(U)}var Z=H.prototype;return Z.destroy=function(){this.loader.destroy()},Z.abort=function(){this.loader.abort()},Z.load=function(Y,B,q){P(Y),this.loader.load(Y,B,q)},he(H,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),H}()},R.createFragmentLoader=function(){var P=this.applyFragmentData,I=this.config.fLoader||this.config.loader;return function(){function H(U){this.loader=void 0,this.loader=new I(U)}var Z=H.prototype;return Z.destroy=function(){this.loader.destroy()},Z.abort=function(){this.loader.abort()},Z.load=function(Y,B,q){P(Y),this.loader.load(Y,B,q)},he(H,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),H}()},re.uuid=function(){var A=URL.createObjectURL(new Blob),P=A.toString();return URL.revokeObjectURL(A),P.substr(P.lastIndexOf("/")+1)},re.serialize=function(A){for(var W,P=[],H=function(be){return Math.round(be)},Z=function(be){return 100*H(be/100)},Y={br:H,d:H,bl:Z,dl:Z,mtp:Z,nor:function(be){return encodeURIComponent(be)},rtp:Z,tb:H},q=se(Object.keys(A||{}).sort());!(W=q()).done;){var L=W.value,D=A[L];if(!(be=D,Number.isNaN(be)||null==be||""===be||!1===be||"v"===L&&1===D||"pr"==L&&1===D)){var F=Y[L];F&&(D=F(D));var oe,$=typeof D;oe="ot"===L||"sf"===L||"st"===L?L+"="+D:"boolean"===$?L:"number"===$?L+"="+D:L+"="+JSON.stringify(D),P.push(oe)}}var be;return P.join(",")},re.toHeaders=function(A){for(var I={},H=["Object","Request","Session","Status"],Z=[{},{},{},{}],U={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},Y=0,B=Object.keys(A);Y<B.length;Y++){var q=B[Y];Z[null!=U[q]?U[q]:1][q]=A[q]}for(var L=0;L<Z.length;L++){var D=re.serialize(Z[L]);D&&(I["CMCD-"+H[L]]=D)}return I},re.toQuery=function(A){return"CMCD="+encodeURIComponent(re.serialize(A))},re.appendQueryToUri=function(A,P){if(!P)return A;var I=A.includes("?")?"&":"?";return""+A+I+P},re}()},"./src/controller/eme-controller.ts":function(ht,J,e){"use strict";e.r(J);var O=e("./src/events.ts"),ee=e("./src/errors.ts"),j=e("./src/utils/logger.ts"),S=e("./src/utils/mediakeys-helper.ts");function fe(ie,re){for(var R=0;R<re.length;R++){var V=re[R];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(ie,V.key,V)}}J.default=function(){function ie(R){this.hls=void 0,this._widevineLicenseUrl=void 0,this._licenseXhrSetup=void 0,this._licenseResponseCallback=void 0,this._emeEnabled=void 0,this._requestMediaKeySystemAccess=void 0,this._drmSystemOptions=void 0,this._config=void 0,this._mediaKeysList=[],this._media=null,this._hasSetMediaKeys=!1,this._requestLicenseFailureCount=0,this.mediaKeysPromise=null,this._onMediaEncrypted=this.onMediaEncrypted.bind(this),this.hls=R,this._config=R.config,this._widevineLicenseUrl=this._config.widevineLicenseUrl,this._licenseXhrSetup=this._config.licenseXhrSetup,this._licenseResponseCallback=this._config.licenseResponseCallback,this._emeEnabled=this._config.emeEnabled,this._requestMediaKeySystemAccess=this._config.requestMediaKeySystemAccessFunc,this._drmSystemOptions=this._config.drmSystemOptions,this._registerListeners()}var re=ie.prototype;return re.destroy=function(){this._unregisterListeners(),this.hls=this._onMediaEncrypted=null,this._requestMediaKeySystemAccess=null},re._registerListeners=function(){this.hls.on(O.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(O.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(O.Events.MANIFEST_PARSED,this.onManifestParsed,this)},re._unregisterListeners=function(){this.hls.off(O.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(O.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(O.Events.MANIFEST_PARSED,this.onManifestParsed,this)},re.getLicenseServerUrl=function(V){switch(V){case S.KeySystems.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+V+'"')},re._attemptKeySystemAccess=function(V,A,P){var I=this,H=function(re,R,V,A){if(re===S.KeySystems.WIDEVINE)return function(re,R,V){var A={audioCapabilities:[],videoCapabilities:[]};return re.forEach(function(P){A.audioCapabilities.push({contentType:'audio/mp4; codecs="'+P+'"',robustness:V.audioRobustness||""})}),R.forEach(function(P){A.videoCapabilities.push({contentType:'video/mp4; codecs="'+P+'"',robustness:V.videoRobustness||""})}),[A]}(R,V,A);throw new Error("Unknown key-system: "+re)}(V,A,P,this._drmSystemOptions);j.logger.log("Requesting encrypted media key-system access");var Z=this.requestMediaKeySystemAccess(V,H);this.mediaKeysPromise=Z.then(function(U){return I._onMediaKeySystemAccessObtained(V,U)}),Z.catch(function(U){j.logger.error('Failed to obtain key-system "'+V+'" access:',U)})},re._onMediaKeySystemAccessObtained=function(V,A){var P=this;j.logger.log('Access for key-system "'+V+'" obtained');var I={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:A,mediaKeySystemDomain:V};this._mediaKeysList.push(I);var H=Promise.resolve().then(function(){return A.createMediaKeys()}).then(function(Z){return I.mediaKeys=Z,j.logger.log('Media-keys created for key-system "'+V+'"'),P._onMediaKeysCreated(),Z});return H.catch(function(Z){j.logger.error("Failed to create media-keys:",Z)}),H},re._onMediaKeysCreated=function(){var V=this;this._mediaKeysList.forEach(function(A){A.mediaKeysSession||(A.mediaKeysSession=A.mediaKeys.createSession(),V._onNewMediaKeySession(A.mediaKeysSession))})},re._onNewMediaKeySession=function(V){var A=this;j.logger.log("New key-system session "+V.sessionId),V.addEventListener("message",function(P){A._onKeySessionMessage(V,P.message)},!1)},re._onKeySessionMessage=function(V,A){j.logger.log("Got EME message event, creating license request"),this._requestLicense(A,function(P){j.logger.log("Received license data (length: "+(P&&P.byteLength)+"), updating key-session"),V.update(P)})},re.onMediaEncrypted=function(V){var A=this;if(j.logger.log('Media is encrypted using "'+V.initDataType+'" init data type'),!this.mediaKeysPromise)return j.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void this.hls.trigger(O.Events.ERROR,{type:ee.ErrorTypes.KEY_SYSTEM_ERROR,details:ee.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});var P=function(H){!A._media||(A._attemptSetMediaKeys(H),A._generateRequestWithPreferredKeySession(V.initDataType,V.initData))};this.mediaKeysPromise.then(P).catch(P)},re._attemptSetMediaKeys=function(V){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var A=this._mediaKeysList[0];if(!A||!A.mediaKeys)return j.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(O.Events.ERROR,{type:ee.ErrorTypes.KEY_SYSTEM_ERROR,details:ee.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});j.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(A.mediaKeys),this._hasSetMediaKeys=!0}},re._generateRequestWithPreferredKeySession=function(V,A){var P=this,I=this._mediaKeysList[0];if(!I)return j.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(O.Events.ERROR,{type:ee.ErrorTypes.KEY_SYSTEM_ERROR,details:ee.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(!I.mediaKeysSessionInitialized){var H=I.mediaKeysSession;return H?A?(j.logger.log('Generating key-session request for "'+V+'" init data type'),I.mediaKeysSessionInitialized=!0,void H.generateRequest(V,A).then(function(){j.logger.debug("Key-session generation succeeded")}).catch(function(Z){j.logger.error("Error generating key-session request:",Z),P.hls.trigger(O.Events.ERROR,{type:ee.ErrorTypes.KEY_SYSTEM_ERROR,details:ee.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})):(j.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(O.Events.ERROR,{type:ee.ErrorTypes.KEY_SYSTEM_ERROR,details:ee.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0})):(j.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(O.Events.ERROR,{type:ee.ErrorTypes.KEY_SYSTEM_ERROR,details:ee.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0}))}j.logger.warn("Key-Session already initialized but requested again")},re._createLicenseXhr=function(V,A,P){var I=new XMLHttpRequest;I.responseType="arraybuffer",I.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,I,V,A,P);var H=this._licenseXhrSetup;if(H)try{H.call(this.hls,I,V),H=void 0}catch(Z){j.logger.error(Z)}try{I.readyState||I.open("POST",V,!0),H&&H.call(this.hls,I,V)}catch(Z){throw new Error("issue setting up KeySystem license XHR "+Z)}return I},re._onLicenseRequestReadyStageChange=function(V,A,P,I){if(4===V.readyState)if(200===V.status){this._requestLicenseFailureCount=0,j.logger.log("License request succeeded");var H=V.response,Z=this._licenseResponseCallback;if(Z)try{H=Z.call(this.hls,V,A)}catch(Y){j.logger.error(Y)}I(H)}else{if(j.logger.error("License Request XHR failed ("+A+"). Status: "+V.status+" ("+V.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(O.Events.ERROR,{type:ee.ErrorTypes.KEY_SYSTEM_ERROR,details:ee.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});j.logger.warn("Retrying license request, "+(3-this._requestLicenseFailureCount+1)+" attempts left"),this._requestLicense(P,I)}},re._generateLicenseRequestChallenge=function(V,A){if(V.mediaKeySystemDomain===S.KeySystems.WIDEVINE)return A;throw new Error("unsupported key-system: "+V.mediaKeySystemDomain)},re._requestLicense=function(V,A){j.logger.log("Requesting content license for key-system");var P=this._mediaKeysList[0];if(!P)return j.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(O.Events.ERROR,{type:ee.ErrorTypes.KEY_SYSTEM_ERROR,details:ee.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var I=this.getLicenseServerUrl(P.mediaKeySystemDomain),H=this._createLicenseXhr(I,V,A);j.logger.log("Sending license request to URL: "+I);var Z=this._generateLicenseRequestChallenge(P,V);H.send(Z)}catch(U){j.logger.error("Failure requesting DRM license: "+U),this.hls.trigger(O.Events.ERROR,{type:ee.ErrorTypes.KEY_SYSTEM_ERROR,details:ee.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},re.onMediaAttached=function(V,A){if(this._emeEnabled){var P=A.media;this._media=P,P.addEventListener("encrypted",this._onMediaEncrypted)}},re.onMediaDetached=function(){var V=this._media,A=this._mediaKeysList;!V||(V.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(A.map(function(P){if(P.mediaKeysSession)return P.mediaKeysSession.close().catch(function(){})})).then(function(){return V.setMediaKeys(null)}).catch(function(){}))},re.onManifestParsed=function(V,A){if(this._emeEnabled){var P=A.levels.map(function(H){return H.audioCodec}).filter(function(H){return!!H}),I=A.levels.map(function(H){return H.videoCodec}).filter(function(H){return!!H});this._attemptKeySystemAccess(S.KeySystems.WIDEVINE,P,I)}},function he(ie,re,R){return re&&fe(ie.prototype,re),R&&fe(ie,R),ie}(ie,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),ie}()},"./src/controller/fps-controller.ts":function(ht,J,e){"use strict";e.r(J);var O=e("./src/events.ts"),ee=e("./src/utils/logger.ts");J.default=function(){function S(he){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=he,this.registerListeners()}var fe=S.prototype;return fe.setStreamController=function(se){this.streamController=se},fe.registerListeners=function(){this.hls.on(O.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},fe.unregisterListeners=function(){this.hls.off(O.Events.MEDIA_ATTACHING,this.onMediaAttaching)},fe.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},fe.onMediaAttaching=function(se,k){var K=this.hls.config;if(K.capLevelOnFPSDrop){var ne=k.media instanceof self.HTMLVideoElement?k.media:null;this.media=ne,ne&&"function"==typeof ne.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),K.fpsDroppedMonitoringPeriod)}},fe.checkFPS=function(se,k,K){var ne=performance.now();if(k){if(this.lastTime){var re=K-this.lastDroppedFrames,R=k-this.lastDecodedFrames,V=1e3*re/(ne-this.lastTime),A=this.hls;if(A.trigger(O.Events.FPS_DROP,{currentDropped:re,currentDecoded:R,totalDroppedFrames:K}),V>0&&re>A.config.fpsDroppedMonitoringThreshold*R){var P=A.currentLevel;ee.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+P),P>0&&(-1===A.autoLevelCapping||A.autoLevelCapping>=P)&&(A.trigger(O.Events.FPS_DROP_LEVEL_CAPPING,{level:P-=1,droppedLevel:A.currentLevel}),A.autoLevelCapping=P,this.streamController.nextLevelSwitch())}}this.lastTime=ne,this.lastDroppedFrames=K,this.lastDecodedFrames=k}},fe.checkFPSInterval=function(){var se=this.media;if(se)if(this.isVideoPlaybackQualityAvailable){var k=se.getVideoPlaybackQuality();this.checkFPS(se,k.totalVideoFrames,k.droppedVideoFrames)}else this.checkFPS(se,se.webkitDecodedFrameCount,se.webkitDroppedFrameCount)},S}()},"./src/controller/fragment-finders.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"findFragmentByPDT",function(){return j}),e.d(J,"findFragmentByPTS",function(){return S}),e.d(J,"fragmentWithinToleranceTest",function(){return fe}),e.d(J,"pdtWithinToleranceTest",function(){return he}),e.d(J,"findFragWithCC",function(){return se});var O=e("./src/polyfills/number.ts"),ee=e("./src/utils/binary-search.ts");function j(k,K,ne){if(null===K||!Array.isArray(k)||!k.length||!Object(O.isFiniteNumber)(K))return null;if(K<(k[0].programDateTime||0))return null;if(K>=(k[k.length-1].endProgramDateTime||0))return null;ne=ne||0;for(var R=0;R<k.length;++R){var V=k[R];if(he(K,ne,V))return V}return null}function S(k,K,ne,ie){void 0===ne&&(ne=0),void 0===ie&&(ie=0);var re=null;return k?re=K[k.sn-K[0].sn+1]||null:0===ne&&0===K[0].start&&(re=K[0]),re&&0===fe(ne,ie,re)?re:ee.default.search(K,fe.bind(null,ne,ie))||re}function fe(k,K,ne){void 0===k&&(k=0),void 0===K&&(K=0);var ie=Math.min(K,ne.duration+(ne.deltaPTS?ne.deltaPTS:0));return ne.start+ne.duration-ie<=k?1:ne.start-ie>k&&ne.start?-1:0}function he(k,K,ne){var ie=1e3*Math.min(K,ne.duration+(ne.deltaPTS?ne.deltaPTS:0));return(ne.endProgramDateTime||0)-ie>k}function se(k,K){return ee.default.search(k,function(ne){return ne.cc<K?1:ne.cc>K?-1:0})}},"./src/controller/fragment-tracker.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"FragmentState",function(){return j}),e.d(J,"FragmentTracker",function(){return S});var O=e("./src/events.ts"),ee=e("./src/types/loader.ts"),j=(()=>{return(se=j||(j={})).NOT_LOADED="NOT_LOADED",se.BACKTRACKED="BACKTRACKED",se.APPENDING="APPENDING",se.PARTIAL="PARTIAL",se.OK="OK",j;var se})(),S=function(){function se(K){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=K,this._registerListeners()}var k=se.prototype;return k._registerListeners=function(){var ne=this.hls;ne.on(O.Events.BUFFER_APPENDED,this.onBufferAppended,this),ne.on(O.Events.FRAG_BUFFERED,this.onFragBuffered,this),ne.on(O.Events.FRAG_LOADED,this.onFragLoaded,this)},k._unregisterListeners=function(){var ne=this.hls;ne.off(O.Events.BUFFER_APPENDED,this.onBufferAppended,this),ne.off(O.Events.FRAG_BUFFERED,this.onFragBuffered,this),ne.off(O.Events.FRAG_LOADED,this.onFragLoaded,this)},k.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},k.getAppendedFrag=function(ne,ie){if(ie===ee.PlaylistLevelType.MAIN){var re=this.activeFragment,R=this.activeParts;if(!re)return null;if(R)for(var V=R.length;V--;){var A=R[V],P=A?A.end:re.appendedPTS;if(A.start<=ne&&void 0!==P&&ne<=P)return V>9&&(this.activeParts=R.slice(V-9)),A}else if(re.start<=ne&&void 0!==re.appendedPTS&&ne<=re.appendedPTS)return re}return this.getBufferedFrag(ne,ie)},k.getBufferedFrag=function(ne,ie){for(var re=this.fragments,R=Object.keys(re),V=R.length;V--;){var A=re[R[V]];if((null==A?void 0:A.body.type)===ie&&A.buffered){var P=A.body;if(P.start<=ne&&ne<=P.end)return P}}return null},k.detectEvictedFragments=function(ne,ie,re){var R=this;Object.keys(this.fragments).forEach(function(V){var A=R.fragments[V];if(A){if(!A.buffered)return void(A.body.type===re&&R.removeFragment(A.body));var P=A.range[ne];!P||P.time.some(function(I){var H=!R.isTimeBuffered(I.startPTS,I.endPTS,ie);return H&&R.removeFragment(A.body),H})}})},k.detectPartialFragments=function(ne){var ie=this,re=this.timeRanges,R=ne.frag,V=ne.part;if(re&&"initSegment"!==R.sn){var A=he(R),P=this.fragments[A];!P||(Object.keys(re).forEach(function(I){var H=R.elementaryStreams[I];H&&(P.range[I]=ie.getBufferedTimes(R,V,null!==V||!0===H.partial,re[I]))}),P.backtrack=P.loaded=null,Object.keys(P.range).length?P.buffered=!0:this.removeFragment(P.body))}},k.fragBuffered=function(ne){var ie=he(ne),re=this.fragments[ie];re&&(re.backtrack=re.loaded=null,re.buffered=!0)},k.getBufferedTimes=function(ne,ie,re,R){for(var V={time:[],partial:re},A=ie?ie.start:ne.start,P=ie?ie.end:ne.end,I=ne.minEndPTS||P,H=ne.maxStartPTS||A,Z=0;Z<R.length;Z++){var U=R.start(Z)-this.bufferPadding,Y=R.end(Z)+this.bufferPadding;if(H>=U&&I<=Y){V.time.push({startPTS:Math.max(A,R.start(Z)),endPTS:Math.min(P,R.end(Z))});break}if(A<Y&&P>U)V.partial=!0,V.time.push({startPTS:Math.max(A,R.start(Z)),endPTS:Math.min(P,R.end(Z))});else if(P<=U)break}return V},k.getPartialFragment=function(ne){var re,R,V,ie=null,A=0,P=this.bufferPadding,I=this.fragments;return Object.keys(I).forEach(function(H){var Z=I[H];!Z||fe(Z)&&(V=Z.body.end+P,ne>=(R=Z.body.start-P)&&ne<=V&&(re=Math.min(ne-R,V-ne),A<=re&&(ie=Z.body,A=re)))}),ie},k.getState=function(ne){var ie=he(ne),re=this.fragments[ie];return re?re.buffered?fe(re)?j.PARTIAL:j.OK:re.backtrack?j.BACKTRACKED:j.APPENDING:j.NOT_LOADED},k.backtrack=function(ne,ie){var re=he(ne),R=this.fragments[re];if(!R||R.backtrack)return null;var V=R.backtrack=ie||R.loaded;return R.loaded=null,V},k.getBacktrackData=function(ne){var ie=he(ne),re=this.fragments[ie];if(re){var R,V=re.backtrack;if(null!=V&&null!==(R=V.payload)&&void 0!==R&&R.byteLength)return V;this.removeFragment(ne)}return null},k.isTimeBuffered=function(ne,ie,re){for(var R,V,A=0;A<re.length;A++){if(R=re.start(A)-this.bufferPadding,V=re.end(A)+this.bufferPadding,ne>=R&&ie<=V)return!0;if(ie<=R)return!1}return!1},k.onFragLoaded=function(ne,ie){var re=ie.frag;if("initSegment"!==re.sn&&!re.bitrateTest&&!ie.part){var V=he(re);this.fragments[V]={body:re,loaded:ie,backtrack:null,buffered:!1,range:Object.create(null)}}},k.onBufferAppended=function(ne,ie){var re=this,R=ie.frag,V=ie.part,A=ie.timeRanges;if(R.type===ee.PlaylistLevelType.MAIN)if(this.activeFragment=R,V){var P=this.activeParts;P||(this.activeParts=P=[]),P.push(V)}else this.activeParts=null;this.timeRanges=A,Object.keys(A).forEach(function(I){var H=A[I];if(re.detectEvictedFragments(I,H),!V)for(var Z=0;Z<H.length;Z++)R.appendedPTS=Math.max(H.end(Z),R.appendedPTS||0)})},k.onFragBuffered=function(ne,ie){this.detectPartialFragments(ie)},k.hasFragment=function(ne){var ie=he(ne);return!!this.fragments[ie]},k.removeFragmentsInRange=function(ne,ie,re){var R=this;Object.keys(this.fragments).forEach(function(V){var A=R.fragments[V];if(A&&A.buffered){var P=A.body;P.type===re&&P.start<ie&&P.end>ne&&R.removeFragment(P)}})},k.removeFragment=function(ne){var ie=he(ne);ne.stats.loaded=0,ne.clearElementaryStreamInfo(),delete this.fragments[ie]},k.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},se}();function fe(se){var k,K;return se.buffered&&((null===(k=se.range.video)||void 0===k?void 0:k.partial)||(null===(K=se.range.audio)||void 0===K?void 0:K.partial))}function he(se){return se.type+"_"+se.level+"_"+se.urlId+"_"+se.sn}},"./src/controller/gap-controller.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"STALL_MINIMUM_DURATION_MS",function(){return fe}),e.d(J,"MAX_START_GAP_JUMP",function(){return he}),e.d(J,"SKIP_BUFFER_HOLE_STEP_SECONDS",function(){return se}),e.d(J,"SKIP_BUFFER_RANGE_START",function(){return k}),e.d(J,"default",function(){return K});var O=e("./src/utils/buffer-helper.ts"),ee=e("./src/errors.ts"),j=e("./src/events.ts"),S=e("./src/utils/logger.ts"),fe=250,he=2,se=.1,k=.05,K=function(){function ne(re,R,V,A){this.config=void 0,this.media=void 0,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=re,this.media=R,this.fragmentTracker=V,this.hls=A}var ie=ne.prototype;return ie.destroy=function(){this.hls=this.fragmentTracker=this.media=null},ie.poll=function(R){var V=this.config,A=this.media,P=this.stalled,I=A.currentTime,H=A.seeking,Z=this.seeking&&!H,U=!this.seeking&&H;if(this.seeking=H,I===R){if((U||Z)&&(this.stalled=null),!A.paused&&!A.ended&&0!==A.playbackRate&&O.BufferHelper.getBuffered(A).length){var B=O.BufferHelper.bufferInfo(A,I,0),W=B.nextStart||0;if(B.len>0||W){if(H){var L=B.len>he,D=!W||W-I>he&&!this.fragmentTracker.getPartialFragment(I);if(L||D)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var F,$=Math.max(W,B.start||0)-I,oe=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,M=null==oe||null===(F=oe.details)||void 0===F?void 0:F.live;if($>0&&$<=(M?2*oe.details.targetduration:he))return void this._trySkipBufferHole(null)}var Me=self.performance.now();if(null===P)return void(this.stalled=Me);var Ze=Me-P;!H&&Ze>=fe&&this._reportStall(B.len);var Fe=O.BufferHelper.bufferInfo(A,I,V.maxBufferHole);this._tryFixBufferStall(Fe,Ze)}}}else if(this.moved=!0,null!==P){if(this.stallReported){var Y=self.performance.now()-P;S.logger.warn("playback not stuck anymore @"+I+", after "+Math.round(Y)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},ie._tryFixBufferStall=function(R,V){var A=this.config,Z=this.fragmentTracker.getPartialFragment(this.media.currentTime);Z&&this._trySkipBufferHole(Z)||R.len>A.maxBufferHole&&V>1e3*A.highBufferWatchdogPeriod&&(S.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},ie._reportStall=function(R){var V=this.hls,A=this.media;this.stallReported||(this.stallReported=!0,S.logger.warn("Playback stalling at @"+A.currentTime+" due to low buffer (buffer="+R+")"),V.trigger(j.Events.ERROR,{type:ee.ErrorTypes.MEDIA_ERROR,details:ee.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:R}))},ie._trySkipBufferHole=function(R){for(var V=this.config,A=this.hls,P=this.media,I=P.currentTime,H=0,Z=O.BufferHelper.getBuffered(P),U=0;U<Z.length;U++){var Y=Z.start(U);if(I+V.maxBufferHole>=H&&I<Y){var B=Math.max(Y+k,P.currentTime+se);return S.logger.warn("skipping hole, adjusting currentTime from "+I+" to "+B),this.moved=!0,this.stalled=null,P.currentTime=B,R&&A.trigger(j.Events.ERROR,{type:ee.ErrorTypes.MEDIA_ERROR,details:ee.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+I+" to "+B,frag:R}),B}H=Z.end(U)}return 0},ie._tryNudgeBuffer=function(){var R=this.config,V=this.hls,A=this.media,P=A.currentTime,I=(this.nudgeRetry||0)+1;if(this.nudgeRetry=I,I<R.nudgeMaxRetry){var H=P+I*R.nudgeOffset;S.logger.warn("Nudging 'currentTime' from "+P+" to "+H),A.currentTime=H,V.trigger(j.Events.ERROR,{type:ee.ErrorTypes.MEDIA_ERROR,details:ee.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else S.logger.error("Playhead still not moving while enough data buffered @"+P+" after "+R.nudgeMaxRetry+" nudges"),V.trigger(j.Events.ERROR,{type:ee.ErrorTypes.MEDIA_ERROR,details:ee.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},ne}()},"./src/controller/id3-track-controller.ts":function(ht,J,e){"use strict";e.r(J);var O=e("./src/events.ts"),ee=e("./src/utils/texttrack-utils.ts"),j=e("./src/demux/id3.ts");J.default=function(){function he(k){this.hls=void 0,this.id3Track=null,this.media=null,this.hls=k,this._registerListeners()}var se=he.prototype;return se.destroy=function(){this._unregisterListeners()},se._registerListeners=function(){var K=this.hls;K.on(O.Events.MEDIA_ATTACHED,this.onMediaAttached,this),K.on(O.Events.MEDIA_DETACHING,this.onMediaDetaching,this),K.on(O.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),K.on(O.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},se._unregisterListeners=function(){var K=this.hls;K.off(O.Events.MEDIA_ATTACHED,this.onMediaAttached,this),K.off(O.Events.MEDIA_DETACHING,this.onMediaDetaching,this),K.off(O.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),K.off(O.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},se.onMediaAttached=function(K,ne){this.media=ne.media},se.onMediaDetaching=function(){!this.id3Track||(Object(ee.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null)},se.getID3Track=function(K){if(this.media){for(var ne=0;ne<K.length;ne++){var ie=K[ne];if("metadata"===ie.kind&&"id3"===ie.label)return Object(ee.sendAddTrackEvent)(ie,this.media),ie}return this.media.addTextTrack("metadata","id3")}},se.onFragParsingMetadata=function(K,ne){if(this.media){var ie=ne.frag,re=ne.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var R=self.WebKitDataCue||self.VTTCue||self.TextTrackCue,V=0;V<re.length;V++){var A=j.getID3Frames(re[V].data);if(A){var P=re[V].pts,I=V<re.length-1?re[V+1].pts:ie.end;I-P<=0&&(I=P+.25);for(var Z=0;Z<A.length;Z++){var U=A[Z];if(!j.isTimeStampFrame(U)){var Y=new R(P,I,"");Y.value=U,this.id3Track.addCue(Y)}}}}}},se.onBufferFlushing=function(K,ne){var ie=ne.startOffset,re=ne.endOffset,R=ne.type;if(!R||"audio"===R){var V=this.id3Track;V&&Object(ee.removeCuesInRange)(V,ie,re)}},he}()},"./src/controller/latency-controller.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"default",function(){return he});var O=e("./src/errors.ts"),ee=e("./src/events.ts"),j=e("./src/utils/logger.ts");function S(se,k){for(var K=0;K<k.length;K++){var ne=k[K];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(se,ne.key,ne)}}var he=function(){function se(K){var ne=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return ne.timeupdate()},this.hls=K,this.config=K.config,this.registerListeners()}var k=se.prototype;return k.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},k.registerListeners=function(){this.hls.on(ee.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(ee.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(ee.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(ee.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(ee.Events.ERROR,this.onError,this)},k.unregisterListeners=function(){this.hls.off(ee.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(ee.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(ee.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(ee.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(ee.Events.ERROR,this.onError)},k.onMediaAttached=function(ne,ie){this.media=ie.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},k.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},k.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},k.onLevelUpdated=function(ne,ie){var re=ie.details;this.levelDetails=re,re.advanced&&this.timeupdate(),!re.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},k.onError=function(ne,ie){ie.details===O.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,j.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},k.timeupdate=function(){var ne=this.media,ie=this.levelDetails;if(ne&&ie){this.currentTime=ne.currentTime;var re=this.computeLatency();if(null!==re){this._latency=re;var R=this.config,A=R.maxLiveSyncPlaybackRate;if(R.lowLatencyMode&&1!==A){var P=this.targetLatency;if(null!==P){var I=re-P,H=Math.min(this.maxLatency,P+ie.targetduration);if(ie.live&&I<H&&I>.05&&this.forwardBufferLength>1){var U=Math.min(2,Math.max(1,A)),Y=Math.round(2/(1+Math.exp(-.75*I-this.edgeStalled))*20)/20;ne.playbackRate=Math.min(U,Math.max(1,Y))}else 1!==ne.playbackRate&&0!==ne.playbackRate&&(ne.playbackRate=1)}}}}},k.estimateLiveEdge=function(){var ne=this.levelDetails;return null===ne?null:ne.edge+ne.age},k.computeLatency=function(){var ne=this.estimateLiveEdge();return null===ne?null:ne-this.currentTime},function fe(se,k,K){return k&&S(se.prototype,k),K&&S(se,K),se}(se,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var ne=this.config,ie=this.levelDetails;return void 0!==ne.liveMaxLatencyDuration?ne.liveMaxLatencyDuration:ie?ne.liveMaxLatencyDurationCount*ie.targetduration:0}},{key:"targetLatency",get:function(){var ne=this.levelDetails;if(null===ne)return null;var R=ne.targetduration,V=this.config,A=V.liveSyncDuration,H=this.hls.userConfig,Z=V.lowLatencyMode&&ne.partHoldBack||ne.holdBack;return(H.liveSyncDuration||H.liveSyncDurationCount||0===Z)&&(Z=void 0!==A?A:V.liveSyncDurationCount*R),Z+Math.min(1*this.stallCount,R)}},{key:"liveSyncPosition",get:function(){var ne=this.estimateLiveEdge(),ie=this.targetLatency,re=this.levelDetails;if(null===ne||null===ie||null===re)return null;var R=re.edge,P=R-(this.config.lowLatencyMode&&re.partTarget||re.targetduration);return Math.min(Math.max(R-re.totalduration,ne-ie-this.edgeStalled),P)}},{key:"drift",get:function(){var ne=this.levelDetails;return null===ne?1:ne.drift}},{key:"edgeStalled",get:function(){var ne=this.levelDetails;return null===ne?0:Math.max(ne.age-3*(this.config.lowLatencyMode&&ne.partTarget||ne.targetduration),0)}},{key:"forwardBufferLength",get:function(){var ne=this.media,ie=this.levelDetails;if(!ne||!ie)return 0;var re=ne.buffered.length;return re?ne.buffered.end(re-1):ie.edge-this.currentTime}}]),se}()},"./src/controller/level-controller.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"default",function(){return V});var O=e("./src/types/level.ts"),ee=e("./src/events.ts"),j=e("./src/errors.ts"),S=e("./src/utils/codecs.ts"),fe=e("./src/controller/level-helper.ts"),he=e("./src/controller/base-playlist-controller.ts"),se=e("./src/types/loader.ts");function k(){return k=Object.assign||function(A){for(var P=1;P<arguments.length;P++){var I=arguments[P];for(var H in I)Object.prototype.hasOwnProperty.call(I,H)&&(A[H]=I[H])}return A},k.apply(this,arguments)}function K(A,P){for(var I=0;I<P.length;I++){var H=P[I];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(A,H.key,H)}}function ie(A,P){A.prototype=Object.create(P.prototype),A.prototype.constructor=A,re(A,P)}function re(A,P){return(re=Object.setPrototypeOf||function(H,Z){return H.__proto__=Z,H})(A,P)}var R=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),V=function(A){function P(H){var Z;return(Z=A.call(this,H,"[level-controller]")||this)._levels=[],Z._firstLevel=-1,Z._startLevel=void 0,Z.currentLevelIndex=-1,Z.manualLevelIndex=-1,Z.onParsedComplete=void 0,Z._registerListeners(),Z}ie(P,A);var I=P.prototype;return I._registerListeners=function(){var Z=this.hls;Z.on(ee.Events.MANIFEST_LOADED,this.onManifestLoaded,this),Z.on(ee.Events.LEVEL_LOADED,this.onLevelLoaded,this),Z.on(ee.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),Z.on(ee.Events.FRAG_LOADED,this.onFragLoaded,this),Z.on(ee.Events.ERROR,this.onError,this)},I._unregisterListeners=function(){var Z=this.hls;Z.off(ee.Events.MANIFEST_LOADED,this.onManifestLoaded,this),Z.off(ee.Events.LEVEL_LOADED,this.onLevelLoaded,this),Z.off(ee.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),Z.off(ee.Events.FRAG_LOADED,this.onFragLoaded,this),Z.off(ee.Events.ERROR,this.onError,this)},I.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,A.prototype.destroy.call(this)},I.startLoad=function(){this._levels.forEach(function(U){U.loadError=0}),A.prototype.startLoad.call(this)},I.onManifestLoaded=function(Z,U){var W,D,Y=[],B=[],q=[],L={},F=!1,$=!1,oe=!1;if(U.levels.forEach(function(Ze){var Fe=Ze.attrs;F=F||!(!Ze.width||!Ze.height),$=$||!!Ze.videoCodec,oe=oe||!!Ze.audioCodec,R&&Ze.audioCodec&&-1!==Ze.audioCodec.indexOf("mp4a.40.34")&&(Ze.audioCodec=void 0);var je=Ze.bitrate+"-"+Ze.attrs.RESOLUTION+"-"+Ze.attrs.CODECS;(D=L[je])?D.url.push(Ze.url):(D=new O.Level(Ze),L[je]=D,Y.push(D)),Fe&&(Fe.AUDIO&&Object(fe.addGroupId)(D,"audio",Fe.AUDIO),Fe.SUBTITLES&&Object(fe.addGroupId)(D,"text",Fe.SUBTITLES))}),(F||$)&&oe&&(Y=Y.filter(function(Ze){return!!Ze.videoCodec||!(!Ze.width||!Ze.height)})),Y=Y.filter(function(Ze){var Fe=Ze.audioCodec,je=Ze.videoCodec;return(!Fe||Object(S.isCodecSupportedInMp4)(Fe,"audio"))&&(!je||Object(S.isCodecSupportedInMp4)(je,"video"))}),U.audioTracks&&(B=U.audioTracks.filter(function(Ze){return!Ze.audioCodec||Object(S.isCodecSupportedInMp4)(Ze.audioCodec,"audio")}),Object(fe.assignTrackIdsByGroup)(B)),U.subtitles&&(q=U.subtitles,Object(fe.assignTrackIdsByGroup)(q)),Y.length>0){W=Y[0].bitrate,Y.sort(function(Ze,Fe){return Ze.bitrate-Fe.bitrate}),this._levels=Y;for(var M=0;M<Y.length;M++)if(Y[M].bitrate===W){this._firstLevel=M,this.log("manifest loaded, "+Y.length+" level(s) found, first bitrate: "+W);break}var Me={levels:Y,audioTracks:B,subtitleTracks:q,firstLevel:this._firstLevel,stats:U.stats,audio:oe,video:$,altAudio:!(oe&&!$)&&B.some(function(Ze){return!!Ze.url})};this.hls.trigger(ee.Events.MANIFEST_PARSED,Me),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(ee.Events.ERROR,{type:j.ErrorTypes.MEDIA_ERROR,details:j.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:U.url,reason:"no level with compatible codecs found in manifest"})},I.onError=function(Z,U){if(A.prototype.onError.call(this,Z,U),!U.fatal){var Y=U.context,B=this._levels[this.currentLevelIndex];if(Y&&(Y.type===se.PlaylistContextType.AUDIO_TRACK&&B.audioGroupIds&&Y.groupId===B.audioGroupIds[B.urlId]||Y.type===se.PlaylistContextType.SUBTITLE_TRACK&&B.textGroupIds&&Y.groupId===B.textGroupIds[B.urlId]))return void this.redundantFailover(this.currentLevelIndex);var L,q=!1,W=!0;switch(U.details){case j.ErrorDetails.FRAG_LOAD_ERROR:case j.ErrorDetails.FRAG_LOAD_TIMEOUT:case j.ErrorDetails.KEY_LOAD_ERROR:case j.ErrorDetails.KEY_LOAD_TIMEOUT:if(U.frag){var D=this._levels[U.frag.level];D?(D.fragmentError++,D.fragmentError>this.hls.config.fragLoadingMaxRetry&&(L=U.frag.level)):L=U.frag.level}break;case j.ErrorDetails.LEVEL_LOAD_ERROR:case j.ErrorDetails.LEVEL_LOAD_TIMEOUT:Y&&(Y.deliveryDirectives&&(W=!1),L=Y.level),q=!0;break;case j.ErrorDetails.REMUX_ALLOC_ERROR:L=U.level,q=!0}void 0!==L&&this.recoverLevel(U,L,q,W)}},I.recoverLevel=function(Z,U,Y,B){var q=Z.details,W=this._levels[U];if(W.loadError++,Y){if(!this.retryLoadingOrFail(Z))return void(this.currentLevelIndex=-1);Z.levelRetry=!0}if(B){var D=W.url.length;if(D>1&&W.loadError<D)Z.levelRetry=!0,this.redundantFailover(U);else if(-1===this.manualLevelIndex){var F=0===U?this._levels.length-1:U-1;this.currentLevelIndex!==F&&0===this._levels[F].loadError&&(this.warn(q+": switch to "+F),Z.levelRetry=!0,this.hls.nextAutoLevel=F)}}},I.redundantFailover=function(Z){var U=this._levels[Z],Y=U.url.length;if(Y>1){var B=(U.urlId+1)%Y;this.warn("Switching to redundant URL-id "+B),this._levels.forEach(function(q){q.urlId=B}),this.level=Z}},I.onFragLoaded=function(Z,U){var Y=U.frag;if(void 0!==Y&&Y.type===se.PlaylistLevelType.MAIN){var B=this._levels[Y.level];void 0!==B&&(B.fragmentError=0,B.loadError=0)}},I.onLevelLoaded=function(Z,U){var Y,L,B=U.level,q=U.details,W=this._levels[B];if(!W)return this.warn("Invalid level index "+B),void(null!==(L=U.deliveryDirectives)&&void 0!==L&&L.skip&&(q.deltaUpdateFailed=!0));B===this.currentLevelIndex?(0===W.fragmentError&&(W.loadError=0,this.retryCount=0),this.playlistLoaded(B,U,W.details)):null!==(Y=U.deliveryDirectives)&&void 0!==Y&&Y.skip&&(q.deltaUpdateFailed=!0)},I.onAudioTrackSwitched=function(Z,U){var Y=this.hls.levels[this.currentLevelIndex];if(Y&&Y.audioGroupIds){for(var B=-1,q=this.hls.audioTracks[U.id].groupId,W=0;W<Y.audioGroupIds.length;W++)if(Y.audioGroupIds[W]===q){B=W;break}B!==Y.urlId&&(Y.urlId=B,this.startLoad())}},I.loadPlaylist=function(Z){var U=this.currentLevelIndex,Y=this._levels[U];if(this.canLoad&&Y&&Y.url.length>0){var B=Y.urlId,q=Y.url[B];if(Z)try{q=Z.addDirectives(q)}catch(W){this.warn("Could not construct new URL with HLS Delivery Directives: "+W)}this.log("Attempt loading level index "+U+(Z?" at sn "+Z.msn+" part "+Z.part:"")+" with URL-id "+B+" "+q),this.clearTimer(),this.hls.trigger(ee.Events.LEVEL_LOADING,{url:q,level:U,id:B,deliveryDirectives:Z||null})}},I.removeLevel=function(Z,U){var Y=function(W,L){return L!==U},B=this._levels.filter(function(q,W){return W!==Z||q.url.length>1&&void 0!==U&&(q.url=q.url.filter(Y),q.audioGroupIds&&(q.audioGroupIds=q.audioGroupIds.filter(Y)),q.textGroupIds&&(q.textGroupIds=q.textGroupIds.filter(Y)),q.urlId=0,!0)}).map(function(q,W){var L=q.details;return null!=L&&L.fragments&&L.fragments.forEach(function(D){D.level=W}),q});this._levels=B,this.hls.trigger(ee.Events.LEVELS_UPDATED,{levels:B})},function ne(A,P,I){return P&&K(A.prototype,P),I&&K(A,I),A}(P,[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(Z){var U,Y=this._levels;if(0!==Y.length&&(this.currentLevelIndex!==Z||null===(U=Y[Z])||void 0===U||!U.details)){if(Z<0||Z>=Y.length){var B=Z<0;if(this.hls.trigger(ee.Events.ERROR,{type:j.ErrorTypes.OTHER_ERROR,details:j.ErrorDetails.LEVEL_SWITCH_ERROR,level:Z,fatal:B,reason:"invalid level idx"}),B)return;Z=Math.min(Z,Y.length-1)}this.clearTimer();var q=this.currentLevelIndex,W=Y[q],L=Y[Z];this.log("switching to level "+Z+" from "+q),this.currentLevelIndex=Z;var D=k({},L,{level:Z,maxBitrate:L.maxBitrate,uri:L.uri,urlId:L.urlId});delete D._urlId,this.hls.trigger(ee.Events.LEVEL_SWITCHING,D);var F=L.details;if(!F||F.live){var $=this.switchParams(L.uri,null==W?void 0:W.details);this.loadPlaylist($)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(Z){this.manualLevelIndex=Z,void 0===this._startLevel&&(this._startLevel=Z),-1!==Z&&(this.level=Z)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(Z){this._firstLevel=Z}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var Z=this.hls.config.startLevel;return void 0!==Z?Z:this._firstLevel}return this._startLevel},set:function(Z){this._startLevel=Z}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(Z){this.level=Z,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=Z)}}]),P}(he.default)},"./src/controller/level-helper.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"addGroupId",function(){return j}),e.d(J,"assignTrackIdsByGroup",function(){return S}),e.d(J,"updatePTS",function(){return fe}),e.d(J,"updateFragPTSDTS",function(){return se}),e.d(J,"mergeDetails",function(){return k}),e.d(J,"mapPartIntersection",function(){return K}),e.d(J,"mapFragmentIntersection",function(){return ne}),e.d(J,"adjustSliding",function(){return ie}),e.d(J,"addSliding",function(){return re}),e.d(J,"computeReloadInterval",function(){return R}),e.d(J,"getFragmentWithSN",function(){return V}),e.d(J,"getPartWith",function(){return A});var O=e("./src/polyfills/number.ts"),ee=e("./src/utils/logger.ts");function j(P,I,H){switch(I){case"audio":P.audioGroupIds||(P.audioGroupIds=[]),P.audioGroupIds.push(H);break;case"text":P.textGroupIds||(P.textGroupIds=[]),P.textGroupIds.push(H)}}function S(P){var I={};P.forEach(function(H){var Z=H.groupId||"";H.id=I[Z]=I[Z]||0,I[Z]++})}function fe(P,I,H){he(P[I],P[H])}function he(P,I){var H=I.startPTS;if(Object(O.isFiniteNumber)(H)){var U,Z=0;I.sn>P.sn?(Z=H-P.start,U=P):(Z=P.start-H,U=I),U.duration!==Z&&(U.duration=Z)}else I.start=I.sn>P.sn?P.cc===I.cc&&P.minEndPTS?P.start+(P.minEndPTS-P.start):P.start+P.duration:Math.max(P.start-I.duration,0)}function se(P,I,H,Z,U,Y){Z-H<=0&&(ee.logger.warn("Fragment should have a positive duration",I),Z=H+I.duration,Y=U+I.duration);var q=H,W=Z,L=I.startPTS,D=I.endPTS;if(Object(O.isFiniteNumber)(L)){var F=Math.abs(L-H);I.deltaPTS=Object(O.isFiniteNumber)(I.deltaPTS)?Math.max(F,I.deltaPTS):F,q=Math.max(H,L),H=Math.min(H,L),U=Math.min(U,I.startDTS),W=Math.min(Z,D),Z=Math.max(Z,D),Y=Math.max(Y,I.endDTS)}I.duration=Z-H;var $=H-I.start;I.appendedPTS=Z,I.start=I.startPTS=H,I.maxStartPTS=q,I.startDTS=U,I.endPTS=Z,I.minEndPTS=W,I.endDTS=Y;var oe=I.sn;if(!P||oe<P.startSN||oe>P.endSN)return 0;var M,be=oe-P.startSN,Me=P.fragments;for(Me[be]=I,M=be;M>0;M--)he(Me[M],Me[M-1]);for(M=be;M<Me.length-1;M++)he(Me[M],Me[M+1]);return P.fragmentHint&&he(Me[Me.length-1],P.fragmentHint),P.PTSKnown=P.alignedSliding=!0,$}function k(P,I){for(var H=null,Z=P.fragments,U=Z.length-1;U>=0;U--){var Y=Z[U].initSegment;if(Y){H=Y;break}}P.fragmentHint&&delete P.fragmentHint.endPTS;var q,B=0;if(ne(P,I,function(M,be){M.relurl&&(B=M.cc-be.cc),Object(O.isFiniteNumber)(M.startPTS)&&Object(O.isFiniteNumber)(M.endPTS)&&(be.start=be.startPTS=M.startPTS,be.startDTS=M.startDTS,be.appendedPTS=M.appendedPTS,be.maxStartPTS=M.maxStartPTS,be.endPTS=M.endPTS,be.endDTS=M.endDTS,be.minEndPTS=M.minEndPTS,be.duration=M.endPTS-M.startPTS,be.duration&&(q=be),I.PTSKnown=I.alignedSliding=!0),be.elementaryStreams=M.elementaryStreams,be.loader=M.loader,be.stats=M.stats,be.urlId=M.urlId,M.initSegment&&(be.initSegment=M.initSegment,H=M.initSegment)}),H&&(I.fragmentHint?I.fragments.concat(I.fragmentHint):I.fragments).forEach(function(M){var be;(!M.initSegment||M.initSegment.relurl===(null===(be=H)||void 0===be?void 0:be.relurl))&&(M.initSegment=H)}),I.skippedSegments&&(I.deltaUpdateFailed=I.fragments.some(function(M){return!M}),I.deltaUpdateFailed)){ee.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var L=I.skippedSegments;L--;)I.fragments.shift();I.startSN=I.fragments[0].sn,I.startCC=I.fragments[0].cc}var D=I.fragments;if(B){ee.logger.warn("discontinuity sliding from playlist, take drift into account");for(var F=0;F<D.length;F++)D[F].cc+=B}I.skippedSegments&&(I.startCC=I.fragments[0].cc),K(P.partList,I.partList,function(M,be){be.elementaryStreams=M.elementaryStreams,be.stats=M.stats}),q?se(I,q,q.startPTS,q.endPTS,q.startDTS,q.endDTS):ie(P,I),D.length&&(I.totalduration=I.edge-D[0].start),I.driftStartTime=P.driftStartTime,I.driftStart=P.driftStart;var $=I.advancedDateTime;if(I.advanced&&$){var oe=I.edge;I.driftStart||(I.driftStartTime=$,I.driftStart=oe),I.driftEndTime=$,I.driftEnd=oe}else I.driftEndTime=P.driftEndTime,I.driftEnd=P.driftEnd,I.advancedDateTime=P.advancedDateTime}function K(P,I,H){if(P&&I)for(var Z=0,U=0,Y=P.length;U<=Y;U++){var B=P[U],q=I[U+Z];B&&q&&B.index===q.index&&B.fragment.sn===q.fragment.sn?H(B,q):Z--}}function ne(P,I,H){for(var Z=I.skippedSegments,U=Math.max(P.startSN,I.startSN)-I.startSN,Y=(P.fragmentHint?1:0)+(Z?I.endSN:Math.min(P.endSN,I.endSN))-I.startSN,B=I.startSN-P.startSN,q=I.fragmentHint?I.fragments.concat(I.fragmentHint):I.fragments,W=P.fragmentHint?P.fragments.concat(P.fragmentHint):P.fragments,L=U;L<=Y;L++){var D=W[B+L],F=q[L];Z&&!F&&L<Z&&(F=I.fragments[L]=D),D&&F&&H(D,F)}}function ie(P,I){var H=I.startSN+I.skippedSegments-P.startSN,Z=P.fragments;H<0||H>=Z.length||re(I,Z[H].start)}function re(P,I){if(I){for(var H=P.fragments,Z=P.skippedSegments;Z<H.length;Z++)H[Z].start+=I;P.fragmentHint&&(P.fragmentHint.start+=I)}}function R(P,I){var q,H=1e3*P.levelTargetDuration,Z=H/2,U=P.age,Y=U>0&&U<3*H,B=I.loading.end-I.loading.start,W=P.availabilityDelay;if(!1===P.updated)if(Y){var L=333*P.misses;q=Math.max(Math.min(Z,2*B),L),P.availabilityDelay=(P.availabilityDelay||0)+q}else q=Z;else Y?(W=Math.min(W||H/2,U),P.availabilityDelay=W,q=W+H-U):q=H-B;return Math.round(q)}function V(P,I,H){if(!P||!P.details)return null;var Z=P.details,U=Z.fragments[I-Z.startSN];return U||(U=Z.fragmentHint)&&U.sn===I?U:I<Z.startSN&&H&&H.sn===I?H:null}function A(P,I,H){if(!P||!P.details)return null;var Z=P.details.partList;if(Z)for(var U=Z.length;U--;){var Y=Z[U];if(Y.index===H&&Y.fragment.sn===I)return Y}return null}},"./src/controller/stream-controller.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"default",function(){return Z});var O=e("./src/polyfills/number.ts"),ee=e("./src/controller/base-stream-controller.ts"),j=e("./src/is-supported.ts"),S=e("./src/events.ts"),fe=e("./src/utils/buffer-helper.ts"),he=e("./src/controller/fragment-tracker.ts"),se=e("./src/types/loader.ts"),k=e("./src/loader/fragment.ts"),K=e("./src/demux/transmuxer-interface.ts"),ne=e("./src/types/transmuxer.ts"),ie=e("./src/controller/gap-controller.ts"),re=e("./src/errors.ts"),R=e("./src/utils/logger.ts");function V(U,Y){for(var B=0;B<Y.length;B++){var q=Y[B];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(U,q.key,q)}}function P(U,Y){U.prototype=Object.create(Y.prototype),U.prototype.constructor=U,I(U,Y)}function I(U,Y){return(I=Object.setPrototypeOf||function(q,W){return q.__proto__=W,q})(U,Y)}var Z=function(U){function Y(q,W){var L;return(L=U.call(this,q,W,"[stream-controller]")||this).audioCodecSwap=!1,L.gapController=null,L.level=-1,L._forceStartLoad=!1,L.altAudio=!1,L.audioOnly=!1,L.fragPlaying=null,L.onvplaying=null,L.onvseeked=null,L.fragLastKbps=0,L.stalled=!1,L.couldBacktrack=!1,L.audioCodecSwitch=!1,L.videoBuffer=null,L._registerListeners(),L}P(Y,U);var B=Y.prototype;return B._registerListeners=function(){var W=this.hls;W.on(S.Events.MEDIA_ATTACHED,this.onMediaAttached,this),W.on(S.Events.MEDIA_DETACHING,this.onMediaDetaching,this),W.on(S.Events.MANIFEST_LOADING,this.onManifestLoading,this),W.on(S.Events.MANIFEST_PARSED,this.onManifestParsed,this),W.on(S.Events.LEVEL_LOADING,this.onLevelLoading,this),W.on(S.Events.LEVEL_LOADED,this.onLevelLoaded,this),W.on(S.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),W.on(S.Events.ERROR,this.onError,this),W.on(S.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),W.on(S.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),W.on(S.Events.BUFFER_CREATED,this.onBufferCreated,this),W.on(S.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),W.on(S.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),W.on(S.Events.FRAG_BUFFERED,this.onFragBuffered,this)},B._unregisterListeners=function(){var W=this.hls;W.off(S.Events.MEDIA_ATTACHED,this.onMediaAttached,this),W.off(S.Events.MEDIA_DETACHING,this.onMediaDetaching,this),W.off(S.Events.MANIFEST_LOADING,this.onManifestLoading,this),W.off(S.Events.MANIFEST_PARSED,this.onManifestParsed,this),W.off(S.Events.LEVEL_LOADED,this.onLevelLoaded,this),W.off(S.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),W.off(S.Events.ERROR,this.onError,this),W.off(S.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),W.off(S.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),W.off(S.Events.BUFFER_CREATED,this.onBufferCreated,this),W.off(S.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),W.off(S.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),W.off(S.Events.FRAG_BUFFERED,this.onFragBuffered,this)},B.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},B.startLoad=function(W){if(this.levels){var L=this.lastCurrentTime,D=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var F=D.startLevel;-1===F&&(D.config.testBandwidth?(F=0,this.bitrateTest=!0):F=D.nextAutoLevel),this.level=D.nextLoadLevel=F,this.loadedmetadata=!1}L>0&&-1===W&&(this.log("Override startPosition with lastCurrentTime @"+L.toFixed(3)),W=L),this.state=ee.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=W,this.tick()}else this._forceStartLoad=!0,this.state=ee.State.STOPPED},B.stopLoad=function(){this._forceStartLoad=!1,U.prototype.stopLoad.call(this)},B.doTick=function(){switch(this.state){case ee.State.IDLE:this.doTickIdle();break;case ee.State.WAITING_LEVEL:var W,L=this.levels,F=null==L||null===(W=L[this.level])||void 0===W?void 0:W.details;if(F&&(!F.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(F))break;this.state=ee.State.IDLE;break}break;case ee.State.FRAG_LOADING_WAITING_RETRY:var $,oe=self.performance.now(),M=this.retryDate;(!M||oe>=M||null!==($=this.media)&&void 0!==$&&$.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.state=ee.State.IDLE)}this.onTickEnd()},B.onTickEnd=function(){U.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},B.doTickIdle=function(){var W,L,D=this.hls,$=this.levels,oe=this.media,be=D.nextLoadLevel;if(null!==this.levelLastLoaded&&(oe||!this.startFragRequested&&D.config.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&$&&$[be]){var Me=$[be];this.level=D.nextLoadLevel=be;var Ze=Me.details;if(!Ze||this.state===ee.State.WAITING_LEVEL||Ze.live&&this.levelLastLoaded!==be)return void(this.state=ee.State.WAITING_LEVEL);var Fe=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:oe,se.PlaylistLevelType.MAIN);if(null!==Fe&&!(Fe.len>=this.getMaxBufferLength(Me.maxBitrate))){if(this._streamEnded(Fe,Ze)){var Se={};return this.altAudio&&(Se.type="video"),this.hls.trigger(S.Events.BUFFER_EOS,Se),void(this.state=ee.State.ENDED)}var rt=Fe.end,ct=this.getNextFragment(rt,Ze);if(this.couldBacktrack&&!this.fragPrevious&&ct&&"initSegment"!==ct.sn){var Lt=ct.sn-Ze.startSN;Lt>1&&this.fragmentTracker.removeFragment(ct=Ze.fragments[Lt-1])}ct&&this.fragmentTracker.getState(ct)===he.FragmentState.OK&&this.nextLoadPosition>rt&&(this.afterBufferFlushed(oe,this.audioOnly&&!this.altAudio?k.ElementaryStreamTypes.AUDIO:k.ElementaryStreamTypes.VIDEO,se.PlaylistLevelType.MAIN),ct=this.getNextFragment(this.nextLoadPosition,Ze)),!ct||(ct.initSegment&&!ct.initSegment.data&&!this.bitrateTest&&(ct=ct.initSegment),"identity"!==(null===(W=ct.decryptdata)||void 0===W?void 0:W.keyFormat)||null!==(L=ct.decryptdata)&&void 0!==L&&L.key?this.loadFragment(ct,Ze,rt):this.loadKey(ct,Ze))}}},B.loadFragment=function(W,L,D){var F,$=this.fragmentTracker.getState(W);if(this.fragCurrent=W,$===he.FragmentState.BACKTRACKED){var oe=this.fragmentTracker.getBacktrackData(W);if(oe)return this._handleFragmentLoadProgress(oe),void this._handleFragmentLoadComplete(oe);$=he.FragmentState.NOT_LOADED}$===he.FragmentState.NOT_LOADED||$===he.FragmentState.PARTIAL?"initSegment"===W.sn?this._loadInitSegment(W):this.bitrateTest?(W.bitrateTest=!0,this.log("Fragment "+W.sn+" of level "+W.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(W)):(this.startFragRequested=!0,U.prototype.loadFragment.call(this,W,L,D)):$===he.FragmentState.APPENDING?this.reduceMaxBufferLength(W.duration)&&this.fragmentTracker.removeFragment(W):0===(null===(F=this.media)||void 0===F?void 0:F.buffered.length)&&this.fragmentTracker.removeAllFragments()},B.getAppendedFrag=function(W){var L=this.fragmentTracker.getAppendedFrag(W,se.PlaylistLevelType.MAIN);return L&&"fragment"in L?L.fragment:L},B.getBufferedFrag=function(W){return this.fragmentTracker.getBufferedFrag(W,se.PlaylistLevelType.MAIN)},B.followingBufferedFrag=function(W){return W?this.getBufferedFrag(W.end+.5):null},B.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},B.nextLevelSwitch=function(){var W=this.levels,L=this.media;if(null!=L&&L.readyState){var D,F=this.getAppendedFrag(L.currentTime);if(F&&F.start>1&&this.flushMainBuffer(0,F.start-1),!L.paused&&W){var M=this.fragLastKbps;D=M&&this.fragCurrent?this.fragCurrent.duration*W[this.hls.nextLoadLevel].maxBitrate/(1e3*M)+1:0}else D=0;var be=this.getBufferedFrag(L.currentTime+D);if(be){var Me=this.followingBufferedFrag(be);if(Me){this.abortCurrentFrag();var Fe=Me.duration,je=Math.max(be.end,(Me.maxStartPTS?Me.maxStartPTS:Me.start)+Math.min(Math.max(Fe-this.config.maxFragLookUpTolerance,.5*Fe),.75*Fe));this.flushMainBuffer(je,Number.POSITIVE_INFINITY)}}}},B.abortCurrentFrag=function(){var W=this.fragCurrent;this.fragCurrent=null,null!=W&&W.loader&&W.loader.abort(),this.state===ee.State.KEY_LOADING&&(this.state=ee.State.IDLE),this.nextLoadPosition=this.getLoadPosition()},B.flushMainBuffer=function(W,L){U.prototype.flushMainBuffer.call(this,W,L,this.altAudio?"video":null)},B.onMediaAttached=function(W,L){U.prototype.onMediaAttached.call(this,W,L);var D=L.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),D.addEventListener("playing",this.onvplaying),D.addEventListener("seeked",this.onvseeked),this.gapController=new ie.default(this.config,D,this.fragmentTracker,this.hls)},B.onMediaDetaching=function(){var W=this.media;W&&(W.removeEventListener("playing",this.onvplaying),W.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),U.prototype.onMediaDetaching.call(this)},B.onMediaPlaying=function(){this.tick()},B.onMediaSeeked=function(){var W=this.media,L=W?W.currentTime:null;Object(O.isFiniteNumber)(L)&&this.log("Media seeked to "+L.toFixed(3)),this.tick()},B.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(S.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=this.stalled=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null},B.onManifestParsed=function(W,L){var $,D=!1,F=!1;L.levels.forEach(function(oe){($=oe.audioCodec)&&(-1!==$.indexOf("mp4a.40.2")&&(D=!0),-1!==$.indexOf("mp4a.40.5")&&(F=!0))}),this.audioCodecSwitch=D&&F&&!Object(j.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=L.levels,this.startFragRequested=!1},B.onLevelLoading=function(W,L){var D=this.levels;if(D&&this.state===ee.State.IDLE){var F=D[L.level];(!F.details||F.details.live&&this.levelLastLoaded!==L.level||this.waitForCdnTuneIn(F.details))&&(this.state=ee.State.WAITING_LEVEL)}},B.onLevelLoaded=function(W,L){var D,F=this.levels,$=L.level,oe=L.details;if(F){this.log("Level "+$+" loaded ["+oe.startSN+","+oe.endSN+"], cc ["+oe.startCC+", "+oe.endCC+"] duration:"+oe.totalduration);var be=this.fragCurrent;be&&(this.state===ee.State.FRAG_LOADING||this.state===ee.State.FRAG_LOADING_WAITING_RETRY)&&be.level!==L.level&&be.loader&&(this.state=ee.State.IDLE,be.loader.abort());var Me=F[$],Ze=0;if(oe.live||null!==(D=Me.details)&&void 0!==D&&D.live){if(oe.fragments[0]||(oe.deltaUpdateFailed=!0),oe.deltaUpdateFailed)return;Ze=this.alignPlaylists(oe,Me.details)}if(Me.details=oe,this.levelLastLoaded=$,this.hls.trigger(S.Events.LEVEL_UPDATED,{details:oe,level:$}),this.state===ee.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(oe))return;this.state=ee.State.IDLE}this.startFragRequested?oe.live&&this.synchronizeToLiveEdge(oe):this.setStartPosition(oe,Ze),this.tick()}else this.warn("Levels were reset while loading level "+$)},B._handleFragmentLoadProgress=function(W){var L,D=W.frag,F=W.part,$=W.payload,oe=this.levels;if(oe){var M=oe[D.level],be=M.details;if(be){var Me=M.videoCodec,Ze=be.PTSKnown||!be.live,Fe=null===(L=D.initSegment)||void 0===L?void 0:L.data,je=this._getAudioCodec(M),Ce=this.transmuxer=this.transmuxer||new K.default(this.hls,se.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),Se=F?F.index:-1,ct=new ne.ChunkMetadata(D.level,D.sn,D.stats.chunkCount,$.byteLength,Se,-1!==Se);Ce.push($,Fe,je,Me,D,F,be.totalduration,Ze,ct,this.initPTS[D.cc])}else this.warn("Dropping fragment "+D.sn+" of level "+D.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+D.sn+" of level "+D.level+" will not be buffered")},B.onAudioTrackSwitching=function(W,L){var D=this.altAudio,$=L.id;if(!L.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var oe=this.fragCurrent;null!=oe&&oe.loader&&(this.log("Switching to main audio track, cancel main fragment load"),oe.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var M=this.hls;D&&M.trigger(S.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),M.trigger(S.Events.AUDIO_TRACK_SWITCHED,{id:$})}},B.onAudioTrackSwitched=function(W,L){var F=!!this.hls.audioTracks[L.id].url;if(F){var $=this.videoBuffer;$&&this.mediaBuffer!==$&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=$)}this.altAudio=F,this.tick()},B.onBufferCreated=function(W,L){var F,$,D=L.tracks,oe=!1;for(var M in D){var be=D[M];if("main"===be.id){if($=M,F=be,"video"===M){var Me=D[M];Me&&(this.videoBuffer=Me.buffer)}}else oe=!0}oe&&F?(this.log("Alternate track found, use "+$+".buffered to schedule main fragment loading"),this.mediaBuffer=F.buffer):this.mediaBuffer=this.media},B.onFragBuffered=function(W,L){var D=L.frag,F=L.part;if(!D||D.type===se.PlaylistLevelType.MAIN){if(this.fragContextChanged(D))return this.warn("Fragment "+D.sn+(F?" p: "+F.index:"")+" of level "+D.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===ee.State.PARSED&&(this.state=ee.State.IDLE));var $=F?F.stats:D.stats;this.fragLastKbps=Math.round(8*$.total/($.buffering.end-$.loading.first)),"initSegment"!==D.sn&&(this.fragPrevious=D),this.fragBufferedComplete(D,F)}},B.onError=function(W,L){switch(L.details){case re.ErrorDetails.FRAG_LOAD_ERROR:case re.ErrorDetails.FRAG_LOAD_TIMEOUT:case re.ErrorDetails.KEY_LOAD_ERROR:case re.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(se.PlaylistLevelType.MAIN,L);break;case re.ErrorDetails.LEVEL_LOAD_ERROR:case re.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==ee.State.ERROR&&(L.fatal?(this.warn(""+L.details),this.state=ee.State.ERROR):!L.levelRetry&&this.state===ee.State.WAITING_LEVEL&&(this.state=ee.State.IDLE));break;case re.ErrorDetails.BUFFER_FULL_ERROR:if("main"===L.parent&&(this.state===ee.State.PARSING||this.state===ee.State.PARSED)){var D=!0,F=this.getFwdBufferInfo(this.media,se.PlaylistLevelType.MAIN);F&&F.len>.5&&(D=!this.reduceMaxBufferLength(F.len)),D&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}},B.checkBuffer=function(){var W=this.media,L=this.gapController;if(W&&L&&W.readyState){var D=fe.BufferHelper.getBuffered(W);!this.loadedmetadata&&D.length?(this.loadedmetadata=!0,this.seekToStartPos()):L.poll(this.lastCurrentTime),this.lastCurrentTime=W.currentTime}},B.onFragLoadEmergencyAborted=function(){this.state=ee.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},B.onBufferFlushed=function(W,L){var D=L.type;(D!==k.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio)&&this.afterBufferFlushed((D===k.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media,D,se.PlaylistLevelType.MAIN)},B.onLevelsUpdated=function(W,L){this.levels=L.levels},B.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},B.seekToStartPos=function(){var W=this.media,L=W.currentTime,D=this.startPosition;if(D>=0&&L<D){if(W.seeking)return void R.logger.log("could not seek to "+D+", already seeking at "+L);var F=fe.BufferHelper.getBuffered(W),oe=(F.length?F.start(0):0)-D;oe>0&&(oe<this.config.maxBufferHole||oe<this.config.maxFragLookUpTolerance)&&(R.logger.log("adjusting start position by "+oe+" to match buffer start"),this.startPosition=D+=oe),this.log("seek to target start position "+D+" from current time "+L),W.currentTime=D}},B._getAudioCodec=function(W){var L=this.config.defaultAudioCodec||W.audioCodec;return this.audioCodecSwap&&L&&(this.log("Swapping audio codec"),L=-1!==L.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),L},B._loadBitrateTestFrag=function(W){var L=this;this._doFragLoad(W).then(function(D){var F=L.hls;if(D&&!F.nextLoadLevel&&!L.fragContextChanged(W)){L.fragLoadError=0,L.state=ee.State.IDLE,L.startFragRequested=!1,L.bitrateTest=!1;var $=W.stats;$.parsing.start=$.parsing.end=$.buffering.start=$.buffering.end=self.performance.now(),F.trigger(S.Events.FRAG_LOADED,D)}})},B._handleTransmuxComplete=function(W){var L,D="main",F=this.hls,$=W.remuxResult,oe=W.chunkMeta,M=this.getCurrentContext(oe);if(!M)return this.warn("The loading context changed while buffering fragment "+oe.sn+" of level "+oe.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(oe.level);var be=M.frag,Me=M.part,Ze=M.level,Fe=$.video,je=$.text,Ce=$.id3,Se=$.initSegment,rt=this.altAudio?void 0:$.audio;if(!this.fragContextChanged(be)){if(this.state=ee.State.PARSING,Se){Se.tracks&&(this._bufferInitSegment(Ze,Se.tracks,be,oe),F.trigger(S.Events.FRAG_PARSING_INIT_SEGMENT,{frag:be,id:D,tracks:Se.tracks}));var ct=Se.initPTS,Lt=Se.timescale;Object(O.isFiniteNumber)(ct)&&(this.initPTS[be.cc]=ct,F.trigger(S.Events.INIT_PTS_FOUND,{frag:be,id:D,initPTS:ct,timescale:Lt}))}if(Fe&&!1!==$.independent){if(Ze.details){var pt=Fe.startPTS,gt=Fe.endPTS,st=Fe.startDTS,zt=Fe.endDTS;if(Me)Me.elementaryStreams[Fe.type]={startPTS:pt,endPTS:gt,startDTS:st,endDTS:zt};else if(Fe.firstKeyFrame&&Fe.independent&&(this.couldBacktrack=!0),Fe.dropped&&Fe.independent){if(this.getLoadPosition()+this.config.maxBufferHole<pt)return void this.backtrack(be);be.setElementaryStreamInfo(Fe.type,be.start,gt,be.start,zt,!0)}be.setElementaryStreamInfo(Fe.type,pt,gt,st,zt),this.bufferFragmentData(Fe,be,Me,oe)}}else if(!1===$.independent)return void this.backtrack(be);if(rt){var Wt=rt.startPTS,sn=rt.endPTS,Vn=rt.startDTS,wn=rt.endDTS;Me&&(Me.elementaryStreams[k.ElementaryStreamTypes.AUDIO]={startPTS:Wt,endPTS:sn,startDTS:Vn,endDTS:wn}),be.setElementaryStreamInfo(k.ElementaryStreamTypes.AUDIO,Wt,sn,Vn,wn),this.bufferFragmentData(rt,be,Me,oe)}null!=Ce&&null!==(L=Ce.samples)&&void 0!==L&&L.length&&F.trigger(S.Events.FRAG_PARSING_METADATA,{frag:be,id:D,samples:Ce.samples}),je&&F.trigger(S.Events.FRAG_PARSING_USERDATA,{frag:be,id:D,samples:je.samples})}},B._bufferInitSegment=function(W,L,D,F){var $=this;if(this.state===ee.State.PARSING){this.audioOnly=!!L.audio&&!L.video,this.altAudio&&!this.audioOnly&&delete L.audio;var oe=L.audio,M=L.video,be=L.audiovideo;if(oe){var Me=W.audioCodec,Ze=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(Me&&(Me=-1!==Me.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==oe.metadata.channelCount&&-1===Ze.indexOf("firefox")&&(Me="mp4a.40.5")),-1!==Ze.indexOf("android")&&"audio/mpeg"!==oe.container&&this.log("Android: force audio codec to "+(Me="mp4a.40.2")),W.audioCodec&&W.audioCodec!==Me&&this.log('Swapping manifest audio codec "'+W.audioCodec+'" for "'+Me+'"'),oe.levelCodec=Me,oe.id="main",this.log("Init audio buffer, container:"+oe.container+", codecs[selected/level/parsed]=["+(Me||"")+"/"+(W.audioCodec||"")+"/"+oe.codec+"]")}M&&(M.levelCodec=W.videoCodec,M.id="main",this.log("Init video buffer, container:"+M.container+", codecs[level/parsed]=["+(W.videoCodec||"")+"/"+M.codec+"]")),be&&this.log("Init audiovideo buffer, container:"+be.container+", codecs[level/parsed]=["+(W.attrs.CODECS||"")+"/"+be.codec+"]"),this.hls.trigger(S.Events.BUFFER_CODECS,L),Object.keys(L).forEach(function(Fe){var Ce=L[Fe].initSegment;null!=Ce&&Ce.byteLength&&$.hls.trigger(S.Events.BUFFER_APPENDING,{type:Fe,data:Ce,frag:D,part:null,chunkMeta:F,parent:D.type})}),this.tick()}},B.backtrack=function(W){this.couldBacktrack=!0,this.resetTransmuxer(),this.flushBufferGap(W);var L=this.fragmentTracker.backtrack(W);this.fragPrevious=null,this.nextLoadPosition=W.start,L?this.resetFragmentLoading(W):this.state=ee.State.BACKTRACKING},B.checkFragmentChanged=function(){var W=this.media,L=null;if(W&&W.readyState>1&&!1===W.seeking){var D=W.currentTime;if(fe.BufferHelper.isBuffered(W,D)?L=this.getAppendedFrag(D):fe.BufferHelper.isBuffered(W,D+.1)&&(L=this.getAppendedFrag(D+.1)),L){var F=this.fragPlaying,$=L.level;(!F||L.sn!==F.sn||F.level!==$||L.urlId!==F.urlId)&&(this.hls.trigger(S.Events.FRAG_CHANGED,{frag:L}),(!F||F.level!==$)&&this.hls.trigger(S.Events.LEVEL_SWITCHED,{level:$}),this.fragPlaying=L)}}},function A(U,Y,B){return Y&&V(U.prototype,Y),B&&V(U,B),U}(Y,[{key:"nextLevel",get:function(){var W=this.nextBufferedFrag;return W?W.level:-1}},{key:"currentLevel",get:function(){var W=this.media;if(W){var L=this.getAppendedFrag(W.currentTime);if(L)return L.level}return-1}},{key:"nextBufferedFrag",get:function(){var W=this.media;if(W){var L=this.getAppendedFrag(W.currentTime);return this.followingBufferedFrag(L)}return null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),Y}(ee.default)},"./src/controller/subtitle-stream-controller.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"SubtitleStreamController",function(){return A});var O=e("./src/events.ts"),ee=e("./src/utils/buffer-helper.ts"),j=e("./src/controller/fragment-finders.ts"),S=e("./src/utils/discontinuities.ts"),fe=e("./src/controller/level-helper.ts"),he=e("./src/controller/fragment-tracker.ts"),se=e("./src/controller/base-stream-controller.ts"),k=e("./src/types/loader.ts"),K=e("./src/types/level.ts");function ne(P,I){for(var H=0;H<I.length;H++){var Z=I[H];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(P,Z.key,Z)}}function re(P,I){P.prototype=Object.create(I.prototype),P.prototype.constructor=P,R(P,I)}function R(P,I){return(R=Object.setPrototypeOf||function(Z,U){return Z.__proto__=U,Z})(P,I)}var A=function(P){function I(Z,U){var Y;return(Y=P.call(this,Z,U,"[subtitle-stream-controller]")||this).levels=[],Y.currentTrackId=-1,Y.tracksBuffered=[],Y.mainDetails=null,Y._registerListeners(),Y}re(I,P);var H=I.prototype;return H.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},H._registerListeners=function(){var U=this.hls;U.on(O.Events.MEDIA_ATTACHED,this.onMediaAttached,this),U.on(O.Events.MEDIA_DETACHING,this.onMediaDetaching,this),U.on(O.Events.MANIFEST_LOADING,this.onManifestLoading,this),U.on(O.Events.LEVEL_LOADED,this.onLevelLoaded,this),U.on(O.Events.ERROR,this.onError,this),U.on(O.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),U.on(O.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),U.on(O.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),U.on(O.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),U.on(O.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},H._unregisterListeners=function(){var U=this.hls;U.off(O.Events.MEDIA_ATTACHED,this.onMediaAttached,this),U.off(O.Events.MEDIA_DETACHING,this.onMediaDetaching,this),U.off(O.Events.MANIFEST_LOADING,this.onManifestLoading,this),U.off(O.Events.LEVEL_LOADED,this.onLevelLoaded,this),U.off(O.Events.ERROR,this.onError,this),U.off(O.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),U.off(O.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),U.off(O.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),U.off(O.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),U.off(O.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},H.startLoad=function(){this.stopLoad(),this.state=se.State.IDLE,this.setInterval(500),this.tick()},H.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},H.onLevelLoaded=function(U,Y){this.mainDetails=Y.details},H.onSubtitleFragProcessed=function(U,Y){var B=Y.frag,q=Y.success;if(this.fragPrevious=B,this.state=se.State.IDLE,q){var W=this.tracksBuffered[this.currentTrackId];if(W){for(var L,D=B.start,F=0;F<W.length;F++)if(D>=W[F].start&&D<=W[F].end){L=W[F];break}var $=B.start+B.duration;L?L.end=$:W.push(L={start:D,end:$}),this.fragmentTracker.fragBuffered(B)}}},H.onBufferFlushing=function(U,Y){var B=Y.startOffset,q=Y.endOffset;if(0===B&&q!==Number.POSITIVE_INFINITY){var W=this.currentTrackId,L=this.levels;if(!L.length||!L[W]||!L[W].details)return;var $=q-L[W].details.targetduration;if($<=0)return;Y.endOffsetSubtitles=Math.max(0,$),this.tracksBuffered.forEach(function(oe){for(var M=0;M<oe.length;)if(oe[M].end<=$)oe.shift();else{if(!(oe[M].start<$))break;oe[M].start=$,M++}}),this.fragmentTracker.removeFragmentsInRange(B,$,k.PlaylistLevelType.SUBTITLE)}},H.onError=function(U,Y){var B,q=Y.frag;!q||q.type!==k.PlaylistLevelType.SUBTITLE||(null!==(B=this.fragCurrent)&&void 0!==B&&B.loader&&this.fragCurrent.loader.abort(),this.state=se.State.IDLE)},H.onSubtitleTracksUpdated=function(U,Y){var B=this,q=Y.subtitleTracks;this.tracksBuffered=[],this.levels=q.map(function(W){return new K.Level(W)}),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach(function(W){B.tracksBuffered[W.id]=[]}),this.mediaBuffer=null},H.onSubtitleTrackSwitch=function(U,Y){if(this.currentTrackId=Y.id,this.levels.length&&-1!==this.currentTrackId){var B=this.levels[this.currentTrackId];this.mediaBuffer=null!=B&&B.details?this.mediaBufferTimeRanges:null,B&&this.setInterval(500)}else this.clearInterval()},H.onSubtitleTrackLoaded=function(U,Y){var B,q=Y.details,W=Y.id,L=this.currentTrackId,D=this.levels;if(D.length){var F=D[L];if(!(W>=D.length||W!==L)&&F){if(this.mediaBuffer=this.mediaBufferTimeRanges,q.live||null!==(B=F.details)&&void 0!==B&&B.live){var $=this.mainDetails;if(q.deltaUpdateFailed||!$)return;var oe=$.fragments[0];F.details?0===this.alignPlaylists(q,F.details)&&oe&&Object(fe.addSliding)(q,oe.start):q.hasProgramDateTime&&$.hasProgramDateTime?Object(S.alignMediaPlaylistByPDT)(q,$):oe&&Object(fe.addSliding)(q,oe.start)}F.details=q,this.levelLastLoaded=W,this.tick(),q.live&&!this.fragCurrent&&this.media&&this.state===se.State.IDLE&&(Object(j.findFragmentByPTS)(null,q.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),F.details=void 0))}}},H._handleFragmentLoadComplete=function(U){var Y=U.frag,B=U.payload,q=Y.decryptdata,W=this.hls;if(!this.fragContextChanged(Y)&&B&&B.byteLength>0&&q&&q.key&&q.iv&&"AES-128"===q.method){var L=performance.now();this.decrypter.webCryptoDecrypt(new Uint8Array(B),q.key.buffer,q.iv.buffer).then(function(D){var F=performance.now();W.trigger(O.Events.FRAG_DECRYPTED,{frag:Y,payload:D,stats:{tstart:L,tdecrypt:F}})})}},H.doTick=function(){if(this.media){if(this.state===se.State.IDLE){var U,Y=this.currentTrackId,B=this.levels;if(!B.length||!B[Y]||!B[Y].details)return;var q=B[Y].details,W=q.targetduration,L=this.config,F=ee.BufferHelper.bufferedInfo(this.mediaBufferTimeRanges,this.media.currentTime-W,L.maxBufferHole),$=F.end;if(F.len>this.getMaxBufferLength()+W)return;console.assert(q,"Subtitle track details are defined on idle subtitle stream controller tick");var Fe,be=q.fragments,Me=be.length,je=this.fragPrevious;if($<q.edge){var Ce=L.maxFragLookUpTolerance;!(Fe=Object(j.findFragmentByPTS)(je,be,$,Ce))&&je&&je.start<be[0].start&&(Fe=be[0])}else Fe=be[Me-1];null!==(U=Fe)&&void 0!==U&&U.encrypted?this.loadKey(Fe,q):Fe&&this.fragmentTracker.getState(Fe)===he.FragmentState.NOT_LOADED&&this.loadFragment(Fe,q,$)}}else this.state=se.State.IDLE},H.loadFragment=function(U,Y,B){this.fragCurrent=U,P.prototype.loadFragment.call(this,U,Y,B)},function ie(P,I,H){return I&&ne(P.prototype,I),H&&ne(P,H),P}(I,[{key:"mediaBufferTimeRanges",get:function(){return this.tracksBuffered[this.currentTrackId]||[]}}]),I}(se.default)},"./src/controller/subtitle-track-controller.ts":function(ht,J,e){"use strict";e.r(J);var O=e("./src/events.ts"),ee=e("./src/utils/texttrack-utils.ts"),j=e("./src/controller/base-playlist-controller.ts"),S=e("./src/types/loader.ts");function fe(ie,re){for(var R=0;R<re.length;R++){var V=re[R];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(ie,V.key,V)}}function se(ie,re){ie.prototype=Object.create(re.prototype),ie.prototype.constructor=ie,k(ie,re)}function k(ie,re){return(k=Object.setPrototypeOf||function(V,A){return V.__proto__=A,V})(ie,re)}function ne(ie){for(var re=[],R=0;R<ie.length;R++){var V=ie[R];"subtitles"===V.kind&&V.label&&re.push(ie[R])}return re}J.default=function(ie){function re(V){var A;return(A=ie.call(this,V,"[subtitle-track-controller]")||this).media=null,A.tracks=[],A.groupId=null,A.tracksInGroup=[],A.trackId=-1,A.selectDefaultTrack=!0,A.queuedDefaultTrack=-1,A.trackChangeListener=function(){return A.onTextTracksChanged()},A.asyncPollTrackChange=function(){return A.pollTrackChange(0)},A.useTextTrackPolling=!1,A.subtitlePollingInterval=-1,A.subtitleDisplay=!0,A.registerListeners(),A}se(re,ie);var R=re.prototype;return R.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,ie.prototype.destroy.call(this)},R.registerListeners=function(){var A=this.hls;A.on(O.Events.MEDIA_ATTACHED,this.onMediaAttached,this),A.on(O.Events.MEDIA_DETACHING,this.onMediaDetaching,this),A.on(O.Events.MANIFEST_LOADING,this.onManifestLoading,this),A.on(O.Events.MANIFEST_PARSED,this.onManifestParsed,this),A.on(O.Events.LEVEL_LOADING,this.onLevelLoading,this),A.on(O.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),A.on(O.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),A.on(O.Events.ERROR,this.onError,this)},R.unregisterListeners=function(){var A=this.hls;A.off(O.Events.MEDIA_ATTACHED,this.onMediaAttached,this),A.off(O.Events.MEDIA_DETACHING,this.onMediaDetaching,this),A.off(O.Events.MANIFEST_LOADING,this.onManifestLoading,this),A.off(O.Events.MANIFEST_PARSED,this.onManifestParsed,this),A.off(O.Events.LEVEL_LOADING,this.onLevelLoading,this),A.off(O.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),A.off(O.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),A.off(O.Events.ERROR,this.onError,this)},R.onMediaAttached=function(A,P){this.media=P.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},R.pollTrackChange=function(A){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,A)},R.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),ne(this.media.textTracks).forEach(function(P){Object(ee.clearCurrentCues)(P)}),this.subtitleTrack=-1,this.media=null)},R.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},R.onManifestParsed=function(A,P){this.tracks=P.subtitleTracks},R.onSubtitleTrackLoaded=function(A,P){var I=P.id,H=P.details,U=this.tracksInGroup[this.trackId];if(U){var Y=U.details;U.details=P.details,this.log("subtitle track "+I+" loaded ["+H.startSN+"-"+H.endSN+"]"),I===this.trackId&&(this.retryCount=0,this.playlistLoaded(I,P,Y))}else this.warn("Invalid subtitle track id "+I)},R.onLevelLoading=function(A,P){this.switchLevel(P.level)},R.onLevelSwitching=function(A,P){this.switchLevel(P.level)},R.switchLevel=function(A){var P=this.hls.levels[A];if(null!=P&&P.textGroupIds){var I=P.textGroupIds[P.urlId];if(this.groupId!==I){var H=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,Z=this.tracks.filter(function(B){return!I||B.groupId===I});this.tracksInGroup=Z;var U=this.findTrackId(null==H?void 0:H.name)||this.findTrackId();this.groupId=I;var Y={subtitleTracks:Z};this.log("Updating subtitle tracks, "+Z.length+' track(s) found in "'+I+'" group-id'),this.hls.trigger(O.Events.SUBTITLE_TRACKS_UPDATED,Y),-1!==U&&this.setSubtitleTrack(U,H)}}},R.findTrackId=function(A){for(var P=this.tracksInGroup,I=0;I<P.length;I++){var H=P[I];if((!this.selectDefaultTrack||H.default)&&(!A||A===H.name))return H.id}return-1},R.onError=function(A,P){ie.prototype.onError.call(this,A,P),!P.fatal&&P.context&&P.context.type===S.PlaylistContextType.SUBTITLE_TRACK&&P.context.id===this.trackId&&P.context.groupId===this.groupId&&this.retryLoadingOrFail(P)},R.loadPlaylist=function(A){var P=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(P)){var I=P.id,H=P.groupId,Z=P.url;if(A)try{Z=A.addDirectives(Z)}catch(U){this.warn("Could not construct new URL with HLS Delivery Directives: "+U)}this.log("Loading subtitle playlist for id "+I),this.hls.trigger(O.Events.SUBTITLE_TRACK_LOADING,{url:Z,id:I,groupId:H,deliveryDirectives:A||null})}},R.toggleTrackModes=function(A){var P=this,I=this.media,H=this.subtitleDisplay,Z=this.trackId;if(I){var U=ne(I.textTracks),Y=U.filter(function(W){return W.groupId===P.groupId});if(-1===A)[].slice.call(U).forEach(function(W){W.mode="disabled"});else{var B=Y[Z];B&&(B.mode="disabled")}var q=Y[A];q&&(q.mode=H?"showing":"hidden")}},R.setSubtitleTrack=function(A,P){var I,H=this.tracksInGroup;if(this.media){if(this.trackId!==A&&this.toggleTrackModes(A),!(this.trackId===A&&(-1===A||null!==(I=H[A])&&void 0!==I&&I.details)||A<-1||A>=H.length)){this.clearTimer();var Z=H[A];if(this.log("Switching to subtitle track "+A),this.trackId=A,Z){var Y=Z.groupId;this.hls.trigger(O.Events.SUBTITLE_TRACK_SWITCH,{id:Z.id,groupId:void 0===Y?"":Y,name:Z.name,type:Z.type,url:Z.url});var D=this.switchParams(Z.url,null==P?void 0:P.details);this.loadPlaylist(D)}else this.hls.trigger(O.Events.SUBTITLE_TRACK_SWITCH,{id:A})}}else this.queuedDefaultTrack=A},R.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var A=-1,P=ne(this.media.textTracks),I=0;I<P.length;I++)if("hidden"===P[I].mode)A=I;else if("showing"===P[I].mode){A=I;break}this.subtitleTrack!==A&&(this.subtitleTrack=A)}},function he(ie,re,R){return re&&fe(ie.prototype,re),R&&fe(ie,R),ie}(re,[{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(A){this.selectDefaultTrack=!1,this.setSubtitleTrack(A,this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0)}}]),re}(j.default)},"./src/controller/timeline-controller.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"TimelineController",function(){return ne});var O=e("./src/polyfills/number.ts"),ee=e("./src/events.ts"),j=e("./src/utils/cea-608-parser.ts"),S=e("./src/utils/output-filter.ts"),fe=e("./src/utils/webvtt-parser.ts"),he=e("./src/utils/texttrack-utils.ts"),se=e("./src/utils/imsc1-ttml-parser.ts"),k=e("./src/types/loader.ts"),K=e("./src/utils/logger.ts"),ne=function(){function V(P){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this.captionsProperties=void 0,this.hls=P,this.config=P.config,this.Cues=P.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var I=new S.default(this,"textTrack1"),H=new S.default(this,"textTrack2"),Z=new S.default(this,"textTrack3"),U=new S.default(this,"textTrack4");this.cea608Parser1=new j.default(1,I,H),this.cea608Parser2=new j.default(3,Z,U)}P.on(ee.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),P.on(ee.Events.MEDIA_DETACHING,this.onMediaDetaching,this),P.on(ee.Events.MANIFEST_LOADING,this.onManifestLoading,this),P.on(ee.Events.MANIFEST_LOADED,this.onManifestLoaded,this),P.on(ee.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),P.on(ee.Events.FRAG_LOADING,this.onFragLoading,this),P.on(ee.Events.FRAG_LOADED,this.onFragLoaded,this),P.on(ee.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),P.on(ee.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),P.on(ee.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),P.on(ee.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),P.on(ee.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var A=V.prototype;return A.destroy=function(){var I=this.hls;I.off(ee.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),I.off(ee.Events.MEDIA_DETACHING,this.onMediaDetaching,this),I.off(ee.Events.MANIFEST_LOADING,this.onManifestLoading,this),I.off(ee.Events.MANIFEST_LOADED,this.onManifestLoaded,this),I.off(ee.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),I.off(ee.Events.FRAG_LOADING,this.onFragLoading,this),I.off(ee.Events.FRAG_LOADED,this.onFragLoaded,this),I.off(ee.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),I.off(ee.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),I.off(ee.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),I.off(ee.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),I.off(ee.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},A.addCues=function(I,H,Z,U,Y){for(var B=!1,q=Y.length;q--;){var W=Y[q],L=re(W[0],W[1],H,Z);if(L>=0&&(W[0]=Math.min(W[0],H),W[1]=Math.max(W[1],Z),B=!0,L/(Z-H)>.5))return}if(B||Y.push([H,Z]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[I],H,Z,U);else{var F=this.Cues.newCue(null,H,Z,U);this.hls.trigger(ee.Events.CUES_PARSED,{type:"captions",cues:F,track:I})}},A.onInitPtsFound=function(I,H){var Z=this,U=H.frag,q=H.timescale,W=this.unparsedVttFrags;"main"===H.id&&(this.initPTS[U.cc]=H.initPTS,this.timescale[U.cc]=q),W.length&&(this.unparsedVttFrags=[],W.forEach(function(L){Z.onFragLoaded(ee.Events.FRAG_LOADED,L)}))},A.getExistingTrack=function(I){var H=this.media;if(H)for(var Z=0;Z<H.textTracks.length;Z++){var U=H.textTracks[Z];if(U[I])return U}return null},A.createCaptionsTrack=function(I){this.config.renderTextTracksNatively?this.createNativeTrack(I):this.createNonNativeTrack(I)},A.createNativeTrack=function(I){if(!this.captionsTracks[I]){var Z=this.captionsTracks,U=this.media,Y=this.captionsProperties[I],B=Y.label,q=Y.languageCode,W=this.getExistingTrack(I);if(W)Z[I]=W,Object(he.clearCurrentCues)(Z[I]),Object(he.sendAddTrackEvent)(Z[I],U);else{var L=this.createTextTrack("captions",B,q);L&&(L[I]=!0,Z[I]=L)}}},A.createNonNativeTrack=function(I){if(!this.nonNativeCaptionsTracks[I]){var H=this.captionsProperties[I];if(H){var U={_id:I,label:H.label,kind:"captions",default:!!H.media&&!!H.media.default,closedCaptions:H.media};this.nonNativeCaptionsTracks[I]=U,this.hls.trigger(ee.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[U]})}}},A.createTextTrack=function(I,H,Z){var U=this.media;if(U)return U.addTextTrack(I,H,Z)},A.onMediaAttaching=function(I,H){this.media=H.media,this._cleanTracks()},A.onMediaDetaching=function(){var I=this.captionsTracks;Object.keys(I).forEach(function(H){Object(he.clearCurrentCues)(I[H]),delete I[H]}),this.nonNativeCaptionsTracks={}},A.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},A._cleanTracks=function(){var I=this.media;if(I){var H=I.textTracks;if(H)for(var Z=0;Z<H.length;Z++)Object(he.clearCurrentCues)(H[Z])}},A.onSubtitleTracksUpdated=function(I,H){var Z=this;this.textTracks=[];var U=H.subtitleTracks||[],Y=U.some(function(L){return L.textCodec===se.IMSC1_CODEC});if(this.config.enableWebVTT||Y&&this.config.enableIMSC1){var B=this.tracks&&U&&this.tracks.length===U.length;if(this.tracks=U||[],this.config.renderTextTracksNatively){var q=this.media?this.media.textTracks:[];this.tracks.forEach(function(L,D){var F;if(D<q.length){for(var $=null,oe=0;oe<q.length;oe++)if(ie(q[oe],L)){$=q[oe];break}$&&(F=$)}F?Object(he.clearCurrentCues)(F):(F=Z.createTextTrack("subtitles",L.name,L.lang))&&(F.mode="disabled"),F&&(F.groupId=L.groupId,Z.textTracks.push(F))})}else if(!B&&this.tracks&&this.tracks.length){var W=this.tracks.map(function(L){return{label:L.name,kind:L.type.toLowerCase(),default:L.default,subtitleTrack:L}});this.hls.trigger(ee.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:W})}}},A.onManifestLoaded=function(I,H){var Z=this;this.config.enableCEA708Captions&&H.captions&&H.captions.forEach(function(U){var Y=/(?:CC|SERVICE)([1-4])/.exec(U.instreamId);if(Y){var q=Z.captionsProperties["textTrack"+Y[1]];!q||(q.label=U.name,U.lang&&(q.languageCode=U.lang),q.media=U)}})},A.onFragLoading=function(I,H){var Z=this.cea608Parser1,U=this.cea608Parser2,Y=this.lastSn;if(this.enabled&&Z&&U&&H.frag.type===k.PlaylistLevelType.MAIN){var q,W,L=H.frag.sn,D=null!=(q=null==H||null===(W=H.part)||void 0===W?void 0:W.index)?q:-1;L===Y+1||L===Y&&D===this.lastPartIndex+1||(Z.reset(),U.reset()),this.lastSn=L,this.lastPartIndex=D}},A.onFragLoaded=function(I,H){var Z=H.frag,U=H.payload,Y=this.initPTS,B=this.unparsedVttFrags;if(Z.type===k.PlaylistLevelType.SUBTITLE)if(U.byteLength){if(!Object(O.isFiniteNumber)(Y[Z.cc]))return B.push(H),void(Y.length&&this.hls.trigger(ee.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:Z,error:new Error("Missing initial subtitle PTS")}));var q=Z.decryptdata;if(null==q||null==q.key||"AES-128"!==q.method||"stats"in H){var L=this.tracks[Z.level],D=this.vttCCs;D[Z.cc]||(D[Z.cc]={start:Z.start,prevCC:this.prevCC,new:!0},this.prevCC=Z.cc),L&&L.textCodec===se.IMSC1_CODEC?this._parseIMSC1(Z,U):this._parseVTTs(Z,U,D)}}else this.hls.trigger(ee.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:Z,error:new Error("Empty subtitle payload")})},A._parseIMSC1=function(I,H){var Z=this,U=this.hls;Object(se.parseIMSC1)(H,this.initPTS[I.cc],this.timescale[I.cc],function(Y){Z._appendCues(Y,I.level),U.trigger(ee.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:I})},function(Y){K.logger.log("Failed to parse IMSC1: "+Y),U.trigger(ee.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:I,error:Y})})},A._parseVTTs=function(I,H,Z){var U=this,Y=this.hls;Object(fe.parseWebVTT)(H,this.initPTS[I.cc],this.timescale[I.cc],Z,I.cc,I.start,function(B){U._appendCues(B,I.level),Y.trigger(ee.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:I})},function(B){U._fallbackToIMSC1(I,H),K.logger.log("Failed to parse VTT cue: "+B),Y.trigger(ee.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:I,error:B})})},A._fallbackToIMSC1=function(I,H){var Z=this,U=this.tracks[I.level];U.textCodec||Object(se.parseIMSC1)(H,this.initPTS[I.cc],this.timescale[I.cc],function(){U.textCodec=se.IMSC1_CODEC,Z._parseIMSC1(I,H)},function(){U.textCodec="wvtt"})},A._appendCues=function(I,H){var Z=this.hls;if(this.config.renderTextTracksNatively){var U=this.textTracks[H];if("disabled"===U.mode)return;I.forEach(function(q){return Object(he.addCueToTrack)(U,q)})}else Z.trigger(ee.Events.CUES_PARSED,{type:"subtitles",cues:I,track:this.tracks[H].default?"default":"subtitles"+H})},A.onFragDecrypted=function(I,H){var Z=H.frag;if(Z.type===k.PlaylistLevelType.SUBTITLE){if(!Object(O.isFiniteNumber)(this.initPTS[Z.cc]))return void this.unparsedVttFrags.push(H);this.onFragLoaded(ee.Events.FRAG_LOADED,H)}},A.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},A.onFragParsingUserdata=function(I,H){var Z=this.cea608Parser1,U=this.cea608Parser2;if(this.enabled&&Z&&U)for(var Y=0;Y<H.samples.length;Y++){var B=H.samples[Y].bytes;if(B){var q=this.extractCea608Data(B);Z.addData(H.samples[Y].pts,q[0]),U.addData(H.samples[Y].pts,q[1])}}},A.onBufferFlushing=function(I,H){var Z=H.startOffset,U=H.endOffset,Y=H.endOffsetSubtitles,B=H.type,q=this.media;if(q&&!(q.currentTime<U)){if(!B||"video"===B){var W=this.captionsTracks;Object.keys(W).forEach(function(D){return Object(he.removeCuesInRange)(W[D],Z,U)})}if(this.config.renderTextTracksNatively&&0===Z&&void 0!==Y){var L=this.textTracks;Object.keys(L).forEach(function(D){return Object(he.removeCuesInRange)(L[D],Z,Y)})}}},A.extractCea608Data=function(I){for(var H=31&I[0],Z=2,U=[[],[]],Y=0;Y<H;Y++){var B=I[Z++],q=127&I[Z++],W=127&I[Z++],D=3&B;0===q&&0===W||0!=(4&B)&&(0===D||1===D)&&(U[D].push(q),U[D].push(W))}return U},V}();function ie(V,A){return V&&V.label===A.name&&!(V.textTrack1||V.textTrack2)}function re(V,A,P,I){return Math.min(A,I)-Math.max(V,P)}},"./src/crypt/aes-crypto.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"default",function(){return O});var O=function(){function ee(S,fe){this.subtle=void 0,this.aesIV=void 0,this.subtle=S,this.aesIV=fe}return ee.prototype.decrypt=function(fe,he){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},he,fe)},ee}()},"./src/crypt/aes-decryptor.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"removePadding",function(){return ee}),e.d(J,"default",function(){return j});var O=e("./src/utils/typed-array.ts");function ee(S){var fe=S.byteLength,he=fe&&new DataView(S.buffer).getUint8(fe-1);return he?Object(O.sliceUint8)(S,0,fe-he):S}var j=function(){function S(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var fe=S.prototype;return fe.uint8ArrayToUint32Array_=function(se){for(var k=new DataView(se),K=new Uint32Array(4),ne=0;ne<4;ne++)K[ne]=k.getUint32(4*ne);return K},fe.initTable=function(){var se=this.sBox,k=this.invSBox,K=this.subMix,ne=K[0],ie=K[1],re=K[2],R=K[3],V=this.invSubMix,A=V[0],P=V[1],I=V[2],H=V[3],Z=new Uint32Array(256),U=0,Y=0,B=0;for(B=0;B<256;B++)Z[B]=B<128?B<<1:B<<1^283;for(B=0;B<256;B++){var q=Y^Y<<1^Y<<2^Y<<3^Y<<4;se[U]=q=q>>>8^255&q^99,k[q]=U;var W=Z[U],L=Z[W],D=Z[L],F=257*Z[q]^16843008*q;ne[U]=F<<24|F>>>8,ie[U]=F<<16|F>>>16,re[U]=F<<8|F>>>24,R[U]=F,A[q]=(F=16843009*D^65537*L^257*W^16843008*U)<<24|F>>>8,P[q]=F<<16|F>>>16,I[q]=F<<8|F>>>24,H[q]=F,U?(U=W^Z[Z[Z[D^W]]],Y^=Z[Z[Y]]):U=Y=1}},fe.expandKey=function(se){for(var k=this.uint8ArrayToUint32Array_(se),K=!0,ne=0;ne<k.length&&K;)K=k[ne]===this.key[ne],ne++;if(!K){this.key=k;var ie=this.keySize=k.length;if(4!==ie&&6!==ie&&8!==ie)throw new Error("Invalid aes key size="+ie);var R,V,W,L,re=this.ksRows=4*(ie+6+1),A=this.keySchedule=new Uint32Array(re),P=this.invKeySchedule=new Uint32Array(re),I=this.sBox,H=this.rcon,Z=this.invSubMix,U=Z[0],Y=Z[1],B=Z[2],q=Z[3];for(R=0;R<re;R++)R<ie?W=A[R]=k[R]:(L=W,R%ie==0?(L=I[(L=L<<8|L>>>24)>>>24]<<24|I[L>>>16&255]<<16|I[L>>>8&255]<<8|I[255&L],L^=H[R/ie|0]<<24):ie>6&&R%ie==4&&(L=I[L>>>24]<<24|I[L>>>16&255]<<16|I[L>>>8&255]<<8|I[255&L]),A[R]=W=(A[R-ie]^L)>>>0);for(V=0;V<re;V++)R=re-V,L=3&V?A[R]:A[R-4],P[V]=V<4||R<=4?L:U[I[L>>>24]]^Y[I[L>>>16&255]]^B[I[L>>>8&255]]^q[I[255&L]],P[V]=P[V]>>>0}},fe.networkToHostOrderSwap=function(se){return se<<24|(65280&se)<<8|(16711680&se)>>8|se>>>24},fe.decrypt=function(se,k,K){for(var D,F,$,oe,M,be,Me,Ze,Fe,je,Ce,Se,rt,ne=this.keySize+6,ie=this.invKeySchedule,re=this.invSBox,R=this.invSubMix,V=R[0],A=R[1],P=R[2],I=R[3],H=this.uint8ArrayToUint32Array_(K),Z=H[0],U=H[1],Y=H[2],B=H[3],q=new Int32Array(se),W=new Int32Array(q.length),ct=this.networkToHostOrderSwap;k<q.length;){for(Ze=ct(q[k]),Fe=ct(q[k+1]),je=ct(q[k+2]),Ce=ct(q[k+3]),oe=Ze^ie[0],M=Ce^ie[1],be=je^ie[2],Me=Fe^ie[3],Se=4,rt=1;rt<ne;rt++)D=V[M>>>24]^A[be>>16&255]^P[Me>>8&255]^I[255&oe]^ie[Se+1],F=V[be>>>24]^A[Me>>16&255]^P[oe>>8&255]^I[255&M]^ie[Se+2],$=V[Me>>>24]^A[oe>>16&255]^P[M>>8&255]^I[255&be]^ie[Se+3],oe=V[oe>>>24]^A[M>>16&255]^P[be>>8&255]^I[255&Me]^ie[Se],M=D,be=F,Me=$,Se+=4;D=re[M>>>24]<<24^re[be>>16&255]<<16^re[Me>>8&255]<<8^re[255&oe]^ie[Se+1],F=re[be>>>24]<<24^re[Me>>16&255]<<16^re[oe>>8&255]<<8^re[255&M]^ie[Se+2],$=re[Me>>>24]<<24^re[oe>>16&255]<<16^re[M>>8&255]<<8^re[255&be]^ie[Se+3],W[k]=ct(re[oe>>>24]<<24^re[M>>16&255]<<16^re[be>>8&255]<<8^re[255&Me]^ie[Se]^Z),W[k+1]=ct($^U),W[k+2]=ct(F^Y),W[k+3]=ct(D^B),Z=Ze,U=Fe,Y=je,B=Ce,k+=4}return W.buffer},S}()},"./src/crypt/decrypter.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"default",function(){return k});var O=e("./src/crypt/aes-crypto.ts"),ee=e("./src/crypt/fast-aes-key.ts"),j=e("./src/crypt/aes-decryptor.ts"),S=e("./src/utils/logger.ts"),fe=e("./src/utils/mp4-tools.ts"),he=e("./src/utils/typed-array.ts"),k=function(){function K(ie,re,R){var A=(void 0===R?{}:R).removePKCS7Padding,P=void 0===A||A;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=ie,this.config=re,this.removePKCS7Padding=P,P)try{var I=self.crypto;I&&(this.subtle=I.subtle||I.webkitSubtle)}catch(H){}null===this.subtle&&(this.config.enableSoftwareAES=!0)}var ne=K.prototype;return ne.destroy=function(){this.observer=null},ne.isSync=function(){return this.config.enableSoftwareAES},ne.flush=function(){var re=this.currentResult;if(re){var R=new Uint8Array(re);return this.reset(),this.removePKCS7Padding?Object(j.removePadding)(R):R}this.reset()},ne.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},ne.decrypt=function(re,R,V,A){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(re),R,V);var P=this.flush();P&&A(P.buffer)}else this.webCryptoDecrypt(new Uint8Array(re),R,V).then(A)},ne.softwareDecrypt=function(re,R,V){var A=this.currentIV,P=this.currentResult,I=this.remainderData;this.logOnce("JS AES decrypt"),I&&(re=Object(fe.appendUint8Array)(I,re),this.remainderData=null);var H=this.getValidChunk(re);if(!H.length)return null;A&&(V=A);var Z=this.softwareDecrypter;Z||(Z=this.softwareDecrypter=new j.default),Z.expandKey(R);var U=P;return this.currentResult=Z.decrypt(H.buffer,0,V),this.currentIV=Object(he.sliceUint8)(H,-16).buffer,U||null},ne.webCryptoDecrypt=function(re,R,V){var A=this,P=this.subtle;return(this.key!==R||!this.fastAesKey)&&(this.key=R,this.fastAesKey=new ee.default(P,R)),this.fastAesKey.expandKey().then(function(I){return P?new O.default(P,V).decrypt(re.buffer,I):Promise.reject(new Error("web crypto not initialized"))}).catch(function(I){return A.onWebCryptoError(I,re,R,V)})},ne.onWebCryptoError=function(re,R,V,A){return S.logger.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",re),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(R,V,A)},ne.getValidChunk=function(re){var R=re,V=re.length-re.length%16;return V!==re.length&&(R=Object(he.sliceUint8)(re,0,V),this.remainderData=Object(he.sliceUint8)(re,V)),R},ne.logOnce=function(re){!this.logEnabled||(S.logger.log("[decrypter.ts]: "+re),this.logEnabled=!1)},K}()},"./src/crypt/fast-aes-key.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"default",function(){return O});var O=function(){function ee(S,fe){this.subtle=void 0,this.key=void 0,this.subtle=S,this.key=fe}return ee.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},ee}()},"./src/demux/aacdemuxer.ts":function(ht,J,e){"use strict";e.r(J);var O=e("./src/demux/base-audio-demuxer.ts"),ee=e("./src/demux/adts.ts"),j=e("./src/utils/logger.ts"),S=e("./src/demux/id3.ts");function fe(k,K){k.prototype=Object.create(K.prototype),k.prototype.constructor=k,he(k,K)}function he(k,K){return(he=Object.setPrototypeOf||function(ie,re){return ie.__proto__=re,ie})(k,K)}var se=function(k){function K(ie,re){var R;return(R=k.call(this)||this).observer=void 0,R.config=void 0,R.observer=ie,R.config=re,R}fe(K,k);var ne=K.prototype;return ne.resetInitSegment=function(re,R,V){k.prototype.resetInitSegment.call(this,re,R,V),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!0,samples:[],manifestCodec:re,duration:V,inputTimeScale:9e4,dropped:0}},K.probe=function(re){if(!re)return!1;for(var V=(S.getID3Data(re,0)||[]).length,A=re.length;V<A;V++)if(ee.probe(re,V))return j.logger.log("ADTS sync word found !"),!0;return!1},ne.canParse=function(re,R){return ee.canParse(re,R)},ne.appendFrame=function(re,R,V){ee.initTrackConfig(re,this.observer,R,V,re.manifestCodec);var A=ee.appendFrame(re,R,V,this.initPTS,this.frameIndex);if(A&&0===A.missing)return A},K}(O.default);se.minProbeByteLength=9,J.default=se},"./src/demux/adts.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"getAudioConfig",function(){return S}),e.d(J,"isHeaderPattern",function(){return fe}),e.d(J,"getHeaderLength",function(){return he}),e.d(J,"getFullFrameLength",function(){return se}),e.d(J,"canGetFrameLength",function(){return k}),e.d(J,"isHeader",function(){return K}),e.d(J,"canParse",function(){return ne}),e.d(J,"probe",function(){return ie}),e.d(J,"initTrackConfig",function(){return re}),e.d(J,"getFrameDuration",function(){return R}),e.d(J,"parseFrameHeader",function(){return V}),e.d(J,"appendFrame",function(){return A});var O=e("./src/utils/logger.ts"),ee=e("./src/errors.ts"),j=e("./src/events.ts");function S(P,I,H,Z){var U,Y,B,q,W=navigator.userAgent.toLowerCase(),L=Z,D=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];U=1+((192&I[H+2])>>>6);var F=(60&I[H+2])>>>2;if(!(F>D.length-1))return B=(1&I[H+2])<<2,B|=(192&I[H+3])>>>6,O.logger.log("manifest codec:"+Z+", ADTS type:"+U+", samplingIndex:"+F),/firefox/i.test(W)?F>=6?(U=5,q=new Array(4),Y=F-3):(U=2,q=new Array(2),Y=F):-1!==W.indexOf("android")?(U=2,q=new Array(2),Y=F):(U=5,q=new Array(4),Z&&(-1!==Z.indexOf("mp4a.40.29")||-1!==Z.indexOf("mp4a.40.5"))||!Z&&F>=6?Y=F-3:((Z&&-1!==Z.indexOf("mp4a.40.2")&&(F>=6&&1===B||/vivaldi/i.test(W))||!Z&&1===B)&&(U=2,q=new Array(2)),Y=F)),q[0]=U<<3,q[0]|=(14&F)>>1,q[1]|=(1&F)<<7,q[1]|=B<<3,5===U&&(q[1]|=(14&Y)>>1,q[2]=(1&Y)<<7,q[2]|=8,q[3]=0),{config:q,samplerate:D[F],channelCount:B,codec:"mp4a.40."+U,manifestCodec:L};P.trigger(j.Events.ERROR,{type:ee.ErrorTypes.MEDIA_ERROR,details:ee.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+F})}function fe(P,I){return 255===P[I]&&240==(246&P[I+1])}function he(P,I){return 1&P[I+1]?7:9}function se(P,I){return(3&P[I+3])<<11|P[I+4]<<3|(224&P[I+5])>>>5}function k(P,I){return I+5<P.length}function K(P,I){return I+1<P.length&&fe(P,I)}function ne(P,I){return k(P,I)&&fe(P,I)&&se(P,I)<=P.length-I}function ie(P,I){if(K(P,I)){var H=he(P,I);if(I+H>=P.length)return!1;var Z=se(P,I);if(Z<=H)return!1;var U=I+Z;return U===P.length||K(P,U)}return!1}function re(P,I,H,Z,U){if(!P.samplerate){var Y=S(I,H,Z,U);if(!Y)return;P.config=Y.config,P.samplerate=Y.samplerate,P.channelCount=Y.channelCount,P.codec=Y.codec,P.manifestCodec=Y.manifestCodec,O.logger.log("parsed codec:"+P.codec+", rate:"+Y.samplerate+", channels:"+Y.channelCount)}}function R(P){return 9216e4/P}function V(P,I,H,Z,U){var Y=he(P,I),B=se(P,I);if((B-=Y)>0)return{headerLength:Y,frameLength:B,stamp:H+Z*U}}function A(P,I,H,Z,U){var B=V(I,H,Z,U,R(P.samplerate));if(B){var $,W=B.headerLength,L=B.stamp,D=W+B.frameLength,F=Math.max(0,H+D-I.length);F?($=new Uint8Array(D-W)).set(I.subarray(H+W,I.length),0):$=I.subarray(H+W,H+D);var oe={unit:$,pts:L};return F||P.samples.push(oe),{sample:oe,length:D,missing:F}}}},"./src/demux/base-audio-demuxer.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"initPTSFn",function(){return se});var O=e("./src/polyfills/number.ts"),ee=e("./src/demux/id3.ts"),j=e("./src/demux/dummy-demuxed-track.ts"),S=e("./src/utils/mp4-tools.ts"),fe=e("./src/utils/typed-array.ts"),he=function(){function k(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.initPTS=null}var K=k.prototype;return K.resetInitSegment=function(ie,re,R){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},K.resetTimeStamp=function(){},K.resetContiguity=function(){},K.canParse=function(ie,re){return!1},K.appendFrame=function(ie,re,R){},K.demux=function(ie,re){this.cachedData&&(ie=Object(S.appendUint8Array)(this.cachedData,ie),this.cachedData=null);var A,P,R=ee.getID3Data(ie,0),V=R?R.length:0,I=this._audioTrack,H=this._id3Track,Z=R?ee.getTimeStamp(R):void 0,U=ie.length;for((0===this.frameIndex||null===this.initPTS)&&(this.initPTS=se(Z,re)),R&&R.length>0&&H.samples.push({pts:this.initPTS,dts:this.initPTS,data:R}),P=this.initPTS;V<U;){if(this.canParse(ie,V)){var Y=this.appendFrame(I,ie,V);Y?(this.frameIndex++,P=Y.sample.pts,A=V+=Y.length):V=U}else ee.canParse(ie,V)?(R=ee.getID3Data(ie,V),H.samples.push({pts:P,dts:P,data:R}),A=V+=R.length):V++;if(V===U&&A!==U){var B=Object(fe.sliceUint8)(ie,A);this.cachedData=this.cachedData?Object(S.appendUint8Array)(this.cachedData,B):B}}return{audioTrack:I,avcTrack:Object(j.dummyTrack)(),id3Track:H,textTrack:Object(j.dummyTrack)()}},K.demuxSampleAes=function(ie,re,R){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},K.flush=function(ie){var re=this.cachedData;return re&&(this.cachedData=null,this.demux(re,0)),this.frameIndex=0,{audioTrack:this._audioTrack,avcTrack:Object(j.dummyTrack)(),id3Track:this._id3Track,textTrack:Object(j.dummyTrack)()}},K.destroy=function(){},k}(),se=function(K,ne){return Object(O.isFiniteNumber)(K)?90*K:9e4*ne};J.default=he},"./src/demux/chunk-cache.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"default",function(){return O});var O=function(){function j(){this.chunks=[],this.dataLength=0}var S=j.prototype;return S.push=function(he){this.chunks.push(he),this.dataLength+=he.length},S.flush=function(){var k,he=this.chunks;return he.length?(k=1===he.length?he[0]:function ee(j,S){for(var fe=new Uint8Array(S),he=0,se=0;se<j.length;se++){var k=j[se];fe.set(k,he),he+=k.length}return fe}(he,this.dataLength),this.reset(),k):new Uint8Array(0)},S.reset=function(){this.chunks.length=0,this.dataLength=0},j}()},"./src/demux/dummy-demuxed-track.ts":function(ht,J,e){"use strict";function O(){return{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}e.r(J),e.d(J,"dummyTrack",function(){return O})},"./src/demux/exp-golomb.ts":function(ht,J,e){"use strict";e.r(J);var O=e("./src/utils/logger.ts");J.default=function(){function j(fe){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=fe,this.bytesAvailable=fe.byteLength,this.word=0,this.bitsAvailable=0}var S=j.prototype;return S.loadWord=function(){var he=this.data,se=this.bytesAvailable,k=he.byteLength-se,K=new Uint8Array(4),ne=Math.min(4,se);if(0===ne)throw new Error("no bytes available");K.set(he.subarray(k,k+ne)),this.word=new DataView(K.buffer).getUint32(0),this.bitsAvailable=8*ne,this.bytesAvailable-=ne},S.skipBits=function(he){var se;this.bitsAvailable>he?(this.word<<=he,this.bitsAvailable-=he):(he-=this.bitsAvailable,he-=(se=he>>3)>>3,this.bytesAvailable-=se,this.loadWord(),this.word<<=he,this.bitsAvailable-=he)},S.readBits=function(he){var se=Math.min(this.bitsAvailable,he),k=this.word>>>32-se;return he>32&&O.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=se,this.bitsAvailable>0?this.word<<=se:this.bytesAvailable>0&&this.loadWord(),(se=he-se)>0&&this.bitsAvailable?k<<se|this.readBits(se):k},S.skipLZ=function(){var he;for(he=0;he<this.bitsAvailable;++he)if(0!=(this.word&2147483648>>>he))return this.word<<=he,this.bitsAvailable-=he,he;return this.loadWord(),he+this.skipLZ()},S.skipUEG=function(){this.skipBits(1+this.skipLZ())},S.skipEG=function(){this.skipBits(1+this.skipLZ())},S.readUEG=function(){var he=this.skipLZ();return this.readBits(he+1)-1},S.readEG=function(){var he=this.readUEG();return 1&he?1+he>>>1:-1*(he>>>1)},S.readBoolean=function(){return 1===this.readBits(1)},S.readUByte=function(){return this.readBits(8)},S.readUShort=function(){return this.readBits(16)},S.readUInt=function(){return this.readBits(32)},S.skipScalingList=function(he){for(var se=8,k=8,ne=0;ne<he;ne++)0!==k&&(k=(se+this.readEG()+256)%256),se=0===k?se:k},S.readSPS=function(){var ne,ie,re,he=0,se=0,k=0,K=0,R=this.readUByte.bind(this),V=this.readBits.bind(this),A=this.readUEG.bind(this),P=this.readBoolean.bind(this),I=this.skipBits.bind(this),H=this.skipEG.bind(this),Z=this.skipUEG.bind(this),U=this.skipScalingList.bind(this);R();var Y=R();if(V(5),I(3),R(),Z(),100===Y||110===Y||122===Y||244===Y||44===Y||83===Y||86===Y||118===Y||128===Y){var B=A();if(3===B&&I(1),Z(),Z(),I(1),P())for(ie=3!==B?8:12,re=0;re<ie;re++)P()&&U(re<6?16:64)}Z();var q=A();if(0===q)A();else if(1===q)for(I(1),H(),H(),ne=A(),re=0;re<ne;re++)H();Z(),I(1);var W=A(),L=A(),D=V(1);0===D&&I(1),I(1),P()&&(he=A(),se=A(),k=A(),K=A());var F=[1,1];if(P()&&P())switch(R()){case 1:F=[1,1];break;case 2:F=[12,11];break;case 3:F=[10,11];break;case 4:F=[16,11];break;case 5:F=[40,33];break;case 6:F=[24,11];break;case 7:F=[20,11];break;case 8:F=[32,11];break;case 9:F=[80,33];break;case 10:F=[18,11];break;case 11:F=[15,11];break;case 12:F=[64,33];break;case 13:F=[160,99];break;case 14:F=[4,3];break;case 15:F=[3,2];break;case 16:F=[2,1];break;case 255:F=[R()<<8|R(),R()<<8|R()]}return{width:Math.ceil(16*(W+1)-2*he-2*se),height:(2-D)*(L+1)*16-(D?2:4)*(k+K),pixelRatio:F}},S.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},j}()},"./src/demux/id3.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"isHeader",function(){return O}),e.d(J,"isFooter",function(){return ee}),e.d(J,"getID3Data",function(){return j}),e.d(J,"canParse",function(){return fe}),e.d(J,"getTimeStamp",function(){return he}),e.d(J,"isTimeStampFrame",function(){return se}),e.d(J,"getID3Frames",function(){return K}),e.d(J,"decodeFrame",function(){return ne}),e.d(J,"utf8ArrayToStr",function(){return A}),e.d(J,"testables",function(){return P});var I,O=function(U,Y){return Y+10<=U.length&&73===U[Y]&&68===U[Y+1]&&51===U[Y+2]&&U[Y+3]<255&&U[Y+4]<255&&U[Y+6]<128&&U[Y+7]<128&&U[Y+8]<128&&U[Y+9]<128},ee=function(U,Y){return Y+10<=U.length&&51===U[Y]&&68===U[Y+1]&&73===U[Y+2]&&U[Y+3]<255&&U[Y+4]<255&&U[Y+6]<128&&U[Y+7]<128&&U[Y+8]<128&&U[Y+9]<128},j=function(U,Y){for(var B=Y,q=0;O(U,Y);)q+=10,q+=S(U,Y+6),ee(U,Y+10)&&(q+=10),Y+=q;if(q>0)return U.subarray(B,B+q)},S=function(U,Y){var B=0;return B=(127&U[Y])<<21,B|=(127&U[Y+1])<<14,(B|=(127&U[Y+2])<<7)|127&U[Y+3]},fe=function(U,Y){return O(U,Y)&&S(U,Y+6)+10<=U.length-Y},he=function(U){for(var Y=K(U),B=0;B<Y.length;B++){var q=Y[B];if(se(q))return V(q)}},se=function(U){return U&&"PRIV"===U.key&&"com.apple.streaming.transportStreamTimestamp"===U.info},k=function(U){var Y=String.fromCharCode(U[0],U[1],U[2],U[3]),B=S(U,4);return{type:Y,size:B,data:U.subarray(10,10+B)}},K=function(U){for(var Y=0,B=[];O(U,Y);){for(var q=S(U,Y+6),W=(Y+=10)+q;Y+8<W;){var L=k(U.subarray(Y)),D=ne(L);D&&B.push(D),Y+=L.size+10}ee(U,Y)&&(Y+=10)}return B},ne=function(U){return"PRIV"===U.type?ie(U):"W"===U.type[0]?R(U):re(U)},ie=function(U){if(!(U.size<2)){var Y=A(U.data,!0),B=new Uint8Array(U.data.subarray(Y.length+1));return{key:U.type,info:Y,data:B.buffer}}},re=function(U){if(!(U.size<2)){if("TXXX"===U.type){var Y=1,B=A(U.data.subarray(Y),!0),q=A(U.data.subarray(Y+=B.length+1));return{key:U.type,info:B,data:q}}var W=A(U.data.subarray(1));return{key:U.type,data:W}}},R=function(U){if("WXXX"===U.type){if(U.size<2)return;var Y=1,B=A(U.data.subarray(Y),!0),q=A(U.data.subarray(Y+=B.length+1));return{key:U.type,info:B,data:q}}var W=A(U.data);return{key:U.type,data:W}},V=function(U){if(8===U.data.byteLength){var Y=new Uint8Array(U.data),q=(Y[4]<<23)+(Y[5]<<15)+(Y[6]<<7)+Y[7];return q/=45,1&Y[3]&&(q+=47721858.84),Math.round(q)}},A=function(U,Y){void 0===Y&&(Y=!1);var B=function H(){return!I&&void 0!==self.TextDecoder&&(I=new self.TextDecoder("utf-8")),I}();if(B){var q=B.decode(U);if(Y){var W=q.indexOf("\0");return-1!==W?q.substring(0,W):q}return q.replace(/\0/g,"")}for(var D,F,$,L=U.length,oe="",M=0;M<L;){if(0===(D=U[M++])&&Y)return oe;if(0!==D&&3!==D)switch(D>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:oe+=String.fromCharCode(D);break;case 12:case 13:F=U[M++],oe+=String.fromCharCode((31&D)<<6|63&F);break;case 14:F=U[M++],$=U[M++],oe+=String.fromCharCode((15&D)<<12|(63&F)<<6|(63&$)<<0)}}return oe},P={decodeTextFrame:re}},"./src/demux/mp3demuxer.ts":function(ht,J,e){"use strict";e.r(J);var O=e("./src/demux/base-audio-demuxer.ts"),ee=e("./src/demux/id3.ts"),j=e("./src/utils/logger.ts"),S=e("./src/demux/mpegaudio.ts");function fe(k,K){k.prototype=Object.create(K.prototype),k.prototype.constructor=k,he(k,K)}function he(k,K){return(he=Object.setPrototypeOf||function(ie,re){return ie.__proto__=re,ie})(k,K)}var se=function(k){function K(){return k.apply(this,arguments)||this}fe(K,k);var ne=K.prototype;return ne.resetInitSegment=function(re,R,V){k.prototype.resetInitSegment.call(this,re,R,V),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!1,samples:[],manifestCodec:re,duration:V,inputTimeScale:9e4,dropped:0}},K.probe=function(re){if(!re)return!1;for(var V=(ee.getID3Data(re,0)||[]).length,A=re.length;V<A;V++)if(S.probe(re,V))return j.logger.log("MPEG Audio sync word found !"),!0;return!1},ne.canParse=function(re,R){return S.canParse(re,R)},ne.appendFrame=function(re,R,V){if(null!==this.initPTS)return S.appendFrame(re,R,V,this.initPTS,this.frameIndex)},K}(O.default);se.minProbeByteLength=4,J.default=se},"./src/demux/mp4demuxer.ts":function(ht,J,e){"use strict";e.r(J);var O=e("./src/utils/mp4-tools.ts"),ee=e("./src/demux/dummy-demuxed-track.ts"),j=function(){function S(he,se){this.remainderData=null,this.config=void 0,this.config=se}var fe=S.prototype;return fe.resetTimeStamp=function(){},fe.resetInitSegment=function(){},fe.resetContiguity=function(){},S.probe=function(se){return Object(O.findBox)({data:se,start:0,end:Math.min(se.length,16384)},["moof"]).length>0},fe.demux=function(se){var k=se,K=Object(ee.dummyTrack)();if(this.config.progressive){this.remainderData&&(k=Object(O.appendUint8Array)(this.remainderData,se));var ne=Object(O.segmentValidRange)(k);this.remainderData=ne.remainder,K.samples=ne.valid||new Uint8Array}else K.samples=k;return{audioTrack:Object(ee.dummyTrack)(),avcTrack:K,id3Track:Object(ee.dummyTrack)(),textTrack:Object(ee.dummyTrack)()}},fe.flush=function(){var se=Object(ee.dummyTrack)();return se.samples=this.remainderData||new Uint8Array,this.remainderData=null,{audioTrack:Object(ee.dummyTrack)(),avcTrack:se,id3Track:Object(ee.dummyTrack)(),textTrack:Object(ee.dummyTrack)()}},fe.demuxSampleAes=function(se,k,K){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},fe.destroy=function(){},S}();j.minProbeByteLength=1024,J.default=j},"./src/demux/mpegaudio.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"appendFrame",function(){return he}),e.d(J,"parseHeader",function(){return se}),e.d(J,"isHeaderPattern",function(){return k}),e.d(J,"isHeader",function(){return K}),e.d(J,"canParse",function(){return ne}),e.d(J,"probe",function(){return ie});var O=null,ee=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],j=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],S=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],fe=[0,1,1,4];function he(re,R,V,A,P){if(!(V+24>R.length)){var I=se(R,V);if(I&&V+I.frameLength<=R.length){var Z=A+P*(9e4*I.samplesPerFrame/I.sampleRate),U={unit:R.subarray(V,V+I.frameLength),pts:Z,dts:Z};return re.config=[],re.channelCount=I.channelCount,re.samplerate=I.sampleRate,re.samples.push(U),{sample:U,length:I.frameLength,missing:0}}}}function se(re,R){var V=re[R+1]>>3&3,A=re[R+1]>>1&3,P=re[R+2]>>4&15,I=re[R+2]>>2&3;if(1!==V&&0!==P&&15!==P&&3!==I){var Z=re[R+3]>>6,Y=1e3*ee[14*(3===V?3-A:3===A?3:4)+P-1],q=j[3*(3===V?0:2===V?1:2)+I],W=3===Z?1:2,L=S[V][A],D=fe[A],F=8*L*D,$=Math.floor(L*Y/q+(re[R+2]>>1&1))*D;if(null===O){var M=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);O=M?parseInt(M[1]):0}return!!O&&O<=87&&2===A&&Y>=224e3&&0===Z&&(re[R+3]=128|re[R+3]),{sampleRate:q,channelCount:W,frameLength:$,samplesPerFrame:F}}}function k(re,R){return 255===re[R]&&224==(224&re[R+1])&&0!=(6&re[R+1])}function K(re,R){return R+1<re.length&&k(re,R)}function ne(re,R){return k(re,R)&&4<=re.length-R}function ie(re,R){if(R+1<re.length&&k(re,R)){var A=se(re,R),P=4;null!=A&&A.frameLength&&(P=A.frameLength);var I=R+P;return I===re.length||K(re,I)}return!1}},"./src/demux/sample-aes.ts":function(ht,J,e){"use strict";e.r(J);var O=e("./src/crypt/decrypter.ts"),ee=e("./src/demux/tsdemuxer.ts");J.default=function(){function S(he,se,k){this.keyData=void 0,this.decrypter=void 0,this.keyData=k,this.decrypter=new O.default(he,se,{removePKCS7Padding:!1})}var fe=S.prototype;return fe.decryptBuffer=function(se,k){this.decrypter.decrypt(se,this.keyData.key.buffer,this.keyData.iv.buffer,k)},fe.decryptAacSample=function(se,k,K,ne){var ie=se[k].unit,re=ie.subarray(16,ie.length-ie.length%16),R=re.buffer.slice(re.byteOffset,re.byteOffset+re.length),V=this;this.decryptBuffer(R,function(A){var P=new Uint8Array(A);ie.set(P,16),ne||V.decryptAacSamples(se,k+1,K)})},fe.decryptAacSamples=function(se,k,K){for(;;k++){if(k>=se.length)return void K();if(!(se[k].unit.length<32)){var ne=this.decrypter.isSync();if(this.decryptAacSample(se,k,K,ne),!ne)return}}},fe.getAvcEncryptedData=function(se){for(var k=16*Math.floor((se.length-48)/160)+16,K=new Int8Array(k),ne=0,ie=32;ie<se.length-16;ie+=160,ne+=16)K.set(se.subarray(ie,ie+16),ne);return K},fe.getAvcDecryptedUnit=function(se,k){for(var K=new Uint8Array(k),ne=0,ie=32;ie<se.length-16;ie+=160,ne+=16)se.set(K.subarray(ne,ne+16),ie);return se},fe.decryptAvcSample=function(se,k,K,ne,ie,re){var R=Object(ee.discardEPB)(ie.data),V=this.getAvcEncryptedData(R),A=this;this.decryptBuffer(V.buffer,function(P){ie.data=A.getAvcDecryptedUnit(R,P),re||A.decryptAvcSamples(se,k,K+1,ne)})},fe.decryptAvcSamples=function(se,k,K,ne){if(se instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;k++,K=0){if(k>=se.length)return void ne();for(var ie=se[k].units;!(K>=ie.length);K++){var re=ie[K];if(!(re.data.length<=48||1!==re.type&&5!==re.type)){var R=this.decrypter.isSync();if(this.decryptAvcSample(se,k,K,ne,re,R),!R)return}}}},S}()},"./src/demux/transmuxer-interface.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"default",function(){return ie});var O=e("./node_modules/webworkify-webpack/index.js"),j=e("./src/events.ts"),S=e("./src/demux/transmuxer.ts"),fe=e("./src/utils/logger.ts"),he=e("./src/errors.ts"),se=e("./src/utils/mediasource-helper.ts"),k=e("./node_modules/eventemitter3/index.js"),ne=Object(se.getMediaSource)()||{isTypeSupported:function(){return!1}},ie=function(){function re(V,A,P,I){var H=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.hls=V,this.id=A,this.onTransmuxComplete=P,this.onFlush=I;var Z=V.config,U=function(L,D){(D=D||{}).frag=H.frag,D.id=H.id,V.trigger(L,D)};this.observer=new k.EventEmitter,this.observer.on(j.Events.FRAG_DECRYPTED,U),this.observer.on(j.Events.ERROR,U);var Y={mp4:ne.isTypeSupported("video/mp4"),mpeg:ne.isTypeSupported("audio/mpeg"),mp3:ne.isTypeSupported('audio/mp4; codecs="mp3"')},B=navigator.vendor;if(Z.enableWorker&&"undefined"!=typeof Worker){var q;fe.logger.log("demuxing in webworker");try{q=this.worker=O("./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),q.addEventListener("message",this.onwmsg),q.onerror=function(W){V.trigger(j.Events.ERROR,{type:he.ErrorTypes.OTHER_ERROR,details:he.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",error:new Error(W.message+"  ("+W.filename+":"+W.lineno+")")})},q.postMessage({cmd:"init",typeSupported:Y,vendor:B,id:A,config:JSON.stringify(Z)})}catch(W){fe.logger.warn("Error in worker:",W),fe.logger.error("Error while initializing DemuxerWorker, fallback to inline"),q&&self.URL.revokeObjectURL(q.objectURL),this.transmuxer=new S.default(this.observer,Y,Z,B,A),this.worker=null}}else this.transmuxer=new S.default(this.observer,Y,Z,B,A)}var R=re.prototype;return R.destroy=function(){var A=this.worker;if(A)A.removeEventListener("message",this.onwmsg),A.terminate(),this.worker=null;else{var P=this.transmuxer;P&&(P.destroy(),this.transmuxer=null)}var I=this.observer;I&&I.removeAllListeners(),this.observer=null},R.push=function(A,P,I,H,Z,U,Y,B,q,W){var L,D,F=this;q.transmuxing.start=self.performance.now();var $=this.transmuxer,oe=this.worker,M=U?U.start:Z.start,be=Z.decryptdata,Me=this.frag,Ze=!(Me&&Z.cc===Me.cc),Fe=!(Me&&q.level===Me.level),je=Me?q.sn-Me.sn:-1,Ce=this.part?q.part-this.part.index:1,Se=!Fe&&(1===je||0===je&&1===Ce),rt=self.performance.now();(Fe||je||0===Z.stats.parsing.start)&&(Z.stats.parsing.start=rt),U&&(Ce||!Se)&&(U.stats.parsing.start=rt);var ct=!(Me&&(null===(L=Z.initSegment)||void 0===L?void 0:L.url)===(null===(D=Me.initSegment)||void 0===D?void 0:D.url)),Lt=new S.TransmuxState(Ze,Se,B,Fe,M,ct);if(!Se||Ze||ct){fe.logger.log("[transmuxer-interface, "+Z.type+"]: Starting new transmux session for sn: "+q.sn+" p: "+q.part+" level: "+q.level+" id: "+q.id+"\n        discontinuity: "+Ze+"\n        trackSwitch: "+Fe+"\n        contiguous: "+Se+"\n        accurateTimeOffset: "+B+"\n        timeOffset: "+M+"\n        initSegmentChange: "+ct);var pt=new S.TransmuxConfig(I,H,P,Y,W);this.configureTransmuxer(pt)}if(this.frag=Z,this.part=U,oe)oe.postMessage({cmd:"demux",data:A,decryptdata:be,chunkMeta:q,state:Lt},A instanceof ArrayBuffer?[A]:[]);else if($){var gt=$.push(A,be,q,Lt);Object(S.isPromise)(gt)?gt.then(function(st){F.handleTransmuxComplete(st)}):this.handleTransmuxComplete(gt)}},R.flush=function(A){var P=this;A.transmuxing.start=self.performance.now();var I=this.transmuxer,H=this.worker;if(H)H.postMessage({cmd:"flush",chunkMeta:A});else if(I){var Z=I.flush(A);Object(S.isPromise)(Z)?Z.then(function(U){P.handleFlushResult(U,A)}):this.handleFlushResult(Z,A)}},R.handleFlushResult=function(A,P){var I=this;A.forEach(function(H){I.handleTransmuxComplete(H)}),this.onFlush(P)},R.onWorkerMessage=function(A){var P=A.data,I=this.hls;switch(P.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(P.data);break;case"flush":this.onFlush(P.data);break;default:P.data=P.data||{},P.data.frag=this.frag,P.data.id=this.id,I.trigger(P.event,P.data)}},R.configureTransmuxer=function(A){var P=this.worker,I=this.transmuxer;P?P.postMessage({cmd:"configure",config:A}):I&&I.configure(A)},R.handleTransmuxComplete=function(A){A.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(A)},re}()},"./src/demux/transmuxer-worker.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"default",function(){return he});var O=e("./src/demux/transmuxer.ts"),ee=e("./src/events.ts"),j=e("./src/utils/logger.ts"),S=e("./node_modules/eventemitter3/index.js");function he(ie){var re=new S.EventEmitter,R=function(A,P){ie.postMessage({event:A,data:P})};re.on(ee.Events.FRAG_DECRYPTED,R),re.on(ee.Events.ERROR,R),ie.addEventListener("message",function(V){var A=V.data;switch(A.cmd){case"init":var P=JSON.parse(A.config);ie.transmuxer=new O.default(re,A.typeSupported,P,A.vendor,A.id),Object(j.enableLogs)(P.debug),R("init",null);break;case"configure":ie.transmuxer.configure(A.config);break;case"demux":var I=ie.transmuxer.push(A.data,A.decryptdata,A.chunkMeta,A.state);Object(O.isPromise)(I)?I.then(function(U){se(ie,U)}):se(ie,I);break;case"flush":var H=A.chunkMeta,Z=ie.transmuxer.flush(H);Object(O.isPromise)(Z)?Z.then(function(U){K(ie,U,H)}):K(ie,Z,H)}})}function se(ie,re){if(!function ne(ie){return!(ie.audio||ie.video||ie.text||ie.id3||ie.initSegment)}(re.remuxResult)){var R=[],V=re.remuxResult,A=V.audio,P=V.video;A&&k(R,A),P&&k(R,P),ie.postMessage({event:"transmuxComplete",data:re},R)}}function k(ie,re){re.data1&&ie.push(re.data1.buffer),re.data2&&ie.push(re.data2.buffer)}function K(ie,re,R){re.forEach(function(V){se(ie,V)}),ie.postMessage({event:"flush",data:R})}},"./src/demux/transmuxer.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"default",function(){return P}),e.d(J,"isPromise",function(){return Z}),e.d(J,"TransmuxConfig",function(){return U}),e.d(J,"TransmuxState",function(){return Y});var R,O=e("./src/events.ts"),ee=e("./src/errors.ts"),j=e("./src/crypt/decrypter.ts"),S=e("./src/demux/aacdemuxer.ts"),fe=e("./src/demux/mp4demuxer.ts"),he=e("./src/demux/tsdemuxer.ts"),se=e("./src/demux/mp3demuxer.ts"),k=e("./src/remux/mp4-remuxer.ts"),K=e("./src/remux/passthrough-remuxer.ts"),ne=e("./src/demux/chunk-cache.ts"),ie=e("./src/utils/mp4-tools.ts"),re=e("./src/utils/logger.ts");try{R=self.performance.now.bind(self.performance)}catch(B){re.logger.debug("Unable to use Performance API on this environment"),R=self.Date.now}var V=[{demux:he.default,remux:k.default},{demux:fe.default,remux:K.default},{demux:S.default,remux:k.default},{demux:se.default,remux:k.default}],A=1024;V.forEach(function(B){A=Math.max(A,B.demux.minProbeByteLength)});var P=function(){function B(W,L,D,F,$){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.cache=new ne.default,this.observer=W,this.typeSupported=L,this.config=D,this.vendor=F,this.id=$}var q=B.prototype;return q.configure=function(L){this.transmuxConfig=L,this.decrypter&&this.decrypter.reset()},q.push=function(L,D,F,$){var oe=this,M=F.transmuxing;M.executeStart=R();var be=new Uint8Array(L),Me=this.cache,Ze=this.config,Fe=this.currentTransmuxState,je=this.transmuxConfig;$&&(this.currentTransmuxState=$);var Ce=function I(B,q){var W=null;return B.byteLength>0&&null!=q&&null!=q.key&&null!==q.iv&&null!=q.method&&(W=q),W}(be,D);if(Ce&&"AES-128"===Ce.method){var Se=this.getDecrypter();if(!Ze.enableSoftwareAES)return this.decryptionPromise=Se.webCryptoDecrypt(be,Ce.key.buffer,Ce.iv.buffer).then(function(Pn){var Yn=oe.push(Pn,null,F);return oe.decryptionPromise=null,Yn}),this.decryptionPromise;var rt=Se.softwareDecrypt(be,Ce.key.buffer,Ce.iv.buffer);if(!rt)return M.executeEnd=R(),H(F);be=new Uint8Array(rt)}var ct=$||Fe,Lt=ct.contiguous,pt=ct.discontinuity,gt=ct.trackSwitch,st=ct.accurateTimeOffset,zt=ct.timeOffset,Pt=ct.initSegmentChange,Vn=je.defaultInitPts;if((pt||gt||Pt)&&this.resetInitSegment(je.initSegmentData,je.audioCodec,je.videoCodec,je.duration),(pt||Pt)&&this.resetInitialTimestamp(Vn),Lt||this.resetContiguity(),this.needsProbing(be,pt,gt)){if(Me.dataLength){var fn=Me.flush();be=Object(ie.appendUint8Array)(fn,be)}this.configureTransmuxer(be,je)}var $n=this.transmux(be,Ce,zt,st,F),ur=this.currentTransmuxState;return ur.contiguous=!0,ur.discontinuity=!1,ur.trackSwitch=!1,M.executeEnd=R(),$n},q.flush=function(L){var D=this,F=L.transmuxing;F.executeStart=R();var $=this.decrypter,oe=this.cache,M=this.currentTransmuxState,be=this.decryptionPromise;if(be)return be.then(function(){return D.flush(L)});var Me=[],Ze=M.timeOffset;if($){var Fe=$.flush();Fe&&Me.push(this.push(Fe,null,L))}var je=oe.dataLength;oe.reset();var Ce=this.demuxer;if(!Ce||!this.remuxer)return je>=A&&this.observer.emit(O.Events.ERROR,O.Events.ERROR,{type:ee.ErrorTypes.MEDIA_ERROR,details:ee.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),F.executeEnd=R(),[H(L)];var rt=Ce.flush(Ze);return Z(rt)?rt.then(function(ct){return D.flushRemux(Me,ct,L),Me}):(this.flushRemux(Me,rt,L),Me)},q.flushRemux=function(L,D,F){var $=D.audioTrack,oe=D.avcTrack,M=D.id3Track,be=D.textTrack,Me=this.currentTransmuxState,Ze=Me.accurateTimeOffset,Fe=Me.timeOffset;re.logger.log("[transmuxer.ts]: Flushed fragment "+F.sn+(F.part>-1?" p: "+F.part:"")+" of level "+F.level);var je=this.remuxer.remux($,oe,M,be,Fe,Ze,!0,this.id);L.push({remuxResult:je,chunkMeta:F}),F.transmuxing.executeEnd=R()},q.resetInitialTimestamp=function(L){var D=this.demuxer,F=this.remuxer;!D||!F||(D.resetTimeStamp(L),F.resetTimeStamp(L))},q.resetContiguity=function(){var L=this.demuxer,D=this.remuxer;!L||!D||(L.resetContiguity(),D.resetNextTimestamp())},q.resetInitSegment=function(L,D,F,$){var oe=this.demuxer,M=this.remuxer;!oe||!M||(oe.resetInitSegment(D,F,$),M.resetInitSegment(L,D,F))},q.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},q.transmux=function(L,D,F,$,oe){return D&&"SAMPLE-AES"===D.method?this.transmuxSampleAes(L,D,F,$,oe):this.transmuxUnencrypted(L,F,$,oe)},q.transmuxUnencrypted=function(L,D,F,$){var oe=this.demuxer.demux(L,D,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(oe.audioTrack,oe.avcTrack,oe.id3Track,oe.textTrack,D,F,!1,this.id),chunkMeta:$}},q.transmuxSampleAes=function(L,D,F,$,oe){var M=this;return this.demuxer.demuxSampleAes(L,D,F).then(function(be){return{remuxResult:M.remuxer.remux(be.audioTrack,be.avcTrack,be.id3Track,be.textTrack,F,$,!1,M.id),chunkMeta:oe}})},q.configureTransmuxer=function(L,D){for(var Ce,F=this.config,$=this.observer,oe=this.typeSupported,M=this.vendor,be=D.audioCodec,Me=D.defaultInitPts,Ze=D.duration,Fe=D.initSegmentData,je=D.videoCodec,Se=0,rt=V.length;Se<rt;Se++)if(V[Se].demux.probe(L)){Ce=V[Se];break}Ce||(re.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),Ce={demux:fe.default,remux:K.default});var ct=this.demuxer,Lt=this.remuxer,pt=Ce.remux,gt=Ce.demux;(!Lt||!(Lt instanceof pt))&&(this.remuxer=new pt($,F,oe,M)),(!ct||!(ct instanceof gt))&&(this.demuxer=new gt($,F,oe),this.probe=gt.probe),this.resetInitSegment(Fe,be,je,Ze),this.resetInitialTimestamp(Me)},q.needsProbing=function(L,D,F){return!this.demuxer||!this.remuxer||D||F},q.getDecrypter=function(){var L=this.decrypter;return L||(L=this.decrypter=new j.default(this.observer,this.config)),L},B}();var H=function(q){return{remuxResult:{},chunkMeta:q}};function Z(B){return"then"in B&&B.then instanceof Function}var U=function(q,W,L,D,F){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=q,this.videoCodec=W,this.initSegmentData=L,this.duration=D,this.defaultInitPts=F},Y=function(q,W,L,D,F,$){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=q,this.contiguous=W,this.accurateTimeOffset=L,this.trackSwitch=D,this.timeOffset=F,this.initSegmentChange=$}},"./src/demux/tsdemuxer.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"discardEPB",function(){return H});var O=e("./src/demux/adts.ts"),ee=e("./src/demux/mpegaudio.ts"),j=e("./src/demux/exp-golomb.ts"),S=e("./src/demux/id3.ts"),fe=e("./src/demux/sample-aes.ts"),he=e("./src/events.ts"),se=e("./src/utils/mp4-tools.ts"),k=e("./src/utils/logger.ts"),K=e("./src/errors.ts"),ne={video:1,audio:2,id3:3,text:4},ie=function(){function Z(Y,B,q){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this.aacLastPTS=null,this._initPTS=null,this._initDTS=null,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=Y,this.config=B,this.typeSupported=q}Z.probe=function(B){var q=Z.syncOffset(B);return!(q<0||(q&&k.logger.warn("MPEG2-TS detected but first sync word found @ offset "+q+", junk ahead ?"),0))},Z.syncOffset=function(B){for(var q=Math.min(1e3,B.length-564),W=0;W<q;){if(71===B[W]&&71===B[W+188]&&71===B[W+376])return W;W++}return-1},Z.createTrack=function(B,q){return{container:"video"===B||"audio"===B?"video/mp2t":void 0,type:B,id:ne[B],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===B?q:void 0}};var U=Z.prototype;return U.resetInitSegment=function(B,q,W){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=Z.createTrack("video",W),this._audioTrack=Z.createTrack("audio",W),this._id3Track=Z.createTrack("id3",W),this._txtTrack=Z.createTrack("text",W),this._audioTrack.isAAC=!0,this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=B,this.videoCodec=q,this._duration=W},U.resetTimeStamp=function(){},U.resetContiguity=function(){var B=this._audioTrack,q=this._avcTrack,W=this._id3Track;B&&(B.pesData=null),q&&(q.pesData=null),W&&(W.pesData=null),this.aacOverFlow=null,this.aacLastPTS=null},U.demux=function(B,q,W,L){void 0===W&&(W=!1),void 0===L&&(L=!1),W||(this.sampleAes=null);var D,F=this._avcTrack,$=this._audioTrack,oe=this._id3Track,M=F.pid,be=F.pesData,Me=$.pid,Ze=oe.pid,Fe=$.pesData,je=oe.pesData,Ce=!1,Se=this.pmtParsed,rt=this._pmtId,ct=B.length;if(this.remainderData&&(ct=(B=Object(se.appendUint8Array)(this.remainderData,B)).length,this.remainderData=null),ct<188&&!L)return this.remainderData=B,{audioTrack:$,avcTrack:F,id3Track:oe,textTrack:this._txtTrack};var Lt=Math.max(0,Z.syncOffset(B));(ct-=(ct+Lt)%188)<B.byteLength&&!L&&(this.remainderData=new Uint8Array(B.buffer,ct,B.buffer.byteLength-ct));for(var pt=0,gt=Lt;gt<ct;gt+=188)if(71===B[gt]){var st=!!(64&B[gt+1]),zt=((31&B[gt+1])<<8)+B[gt+2],Wt=void 0;if((48&B[gt+3])>>4>1){if((Wt=gt+5+B[gt+4])===gt+188)continue}else Wt=gt+4;switch(zt){case M:st&&(be&&(D=A(be))&&this.parseAVCPES(D,!1),be={data:[],size:0}),be&&(be.data.push(B.subarray(Wt,gt+188)),be.size+=gt+188-Wt);break;case Me:st&&(Fe&&(D=A(Fe))&&($.isAAC?this.parseAACPES(D):this.parseMPEGPES(D)),Fe={data:[],size:0}),Fe&&(Fe.data.push(B.subarray(Wt,gt+188)),Fe.size+=gt+188-Wt);break;case Ze:st&&(je&&(D=A(je))&&this.parseID3PES(D),je={data:[],size:0}),je&&(je.data.push(B.subarray(Wt,gt+188)),je.size+=gt+188-Wt);break;case 0:st&&(Wt+=B[Wt]+1),rt=this._pmtId=R(B,Wt);break;case rt:st&&(Wt+=B[Wt]+1);var sn=V(B,Wt,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,W);(M=sn.avc)>0&&(F.pid=M),(Me=sn.audio)>0&&($.pid=Me,$.isAAC=sn.isAAC),(Ze=sn.id3)>0&&(oe.pid=Ze),Ce&&!Se&&(k.logger.log("reparse from beginning"),Ce=!1,gt=Lt-188),Se=this.pmtParsed=!0;break;case 17:case 8191:break;default:Ce=!0}}else pt++;pt>0&&this.observer.emit(he.Events.ERROR,he.Events.ERROR,{type:K.ErrorTypes.MEDIA_ERROR,details:K.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+pt+" TS packet/s that do not start with 0x47"}),F.pesData=be,$.pesData=Fe,oe.pesData=je;var Vn={audioTrack:$,avcTrack:F,id3Track:oe,textTrack:this._txtTrack};return L&&this.extractRemainingSamples(Vn),Vn},U.flush=function(){var q,B=this.remainderData;return this.remainderData=null,q=B?this.demux(B,-1,!1,!0):{audioTrack:this._audioTrack,avcTrack:this._avcTrack,textTrack:this._txtTrack,id3Track:this._id3Track},this.extractRemainingSamples(q),this.sampleAes?this.decrypt(q,this.sampleAes):q},U.extractRemainingSamples=function(B){var oe,q=B.audioTrack,W=B.avcTrack,L=B.id3Track,D=W.pesData,F=q.pesData,$=L.pesData;D&&(oe=A(D))?(this.parseAVCPES(oe,!0),W.pesData=null):W.pesData=D,F&&(oe=A(F))?(q.isAAC?this.parseAACPES(oe):this.parseMPEGPES(oe),q.pesData=null):(null!=F&&F.size&&k.logger.log("last AAC PES packet truncated,might overlap between fragments"),q.pesData=F),$&&(oe=A($))?(this.parseID3PES(oe),L.pesData=null):L.pesData=$},U.demuxSampleAes=function(B,q,W){var L=this.demux(B,W,!0,!this.config.progressive),D=this.sampleAes=new fe.default(this.observer,this.config,q);return this.decrypt(L,D)},U.decrypt=function(B,q){return new Promise(function(W){var L=B.audioTrack,D=B.avcTrack;L.samples&&L.isAAC?q.decryptAacSamples(L.samples,0,function(){D.samples?q.decryptAvcSamples(D.samples,0,0,function(){W(B)}):W(B)}):D.samples&&q.decryptAvcSamples(D.samples,0,0,function(){W(B)})})},U.destroy=function(){this._initPTS=this._initDTS=null,this._duration=0},U.parseAVCPES=function(B,q){var oe,W=this,L=this._avcTrack,D=this.parseAVCNALu(B.data),$=this.avcSample,M=!1;B.data=null,$&&D.length&&!L.audFound&&(P($,L),$=this.avcSample=re(!1,B.pts,B.dts,"")),D.forEach(function(be){switch(be.type){case 1:oe=!0,$||($=W.avcSample=re(!0,B.pts,B.dts,"")),$.frame=!0;var Me=be.data;if(M&&Me.length>4){var Ze=new j.default(Me).readSliceType();(2===Ze||4===Ze||7===Ze||9===Ze)&&($.key=!0)}break;case 5:oe=!0,$||($=W.avcSample=re(!0,B.pts,B.dts,"")),$.key=!0,$.frame=!0;break;case 6:oe=!0;var Fe=new j.default(H(be.data));Fe.readUByte();for(var je=0,Ce=0,Se=!1,rt=0;!Se&&Fe.bytesAvailable>1;){je=0;do{je+=rt=Fe.readUByte()}while(255===rt);Ce=0;do{Ce+=rt=Fe.readUByte()}while(255===rt);if(4===je&&0!==Fe.bytesAvailable){if(Se=!0,181===Fe.readUByte()&&49===Fe.readUShort()&&1195456820===Fe.readUInt()&&3===Fe.readUByte()){for(var st=Fe.readUByte(),Pt=31&st,Wt=[st,Fe.readUByte()],sn=0;sn<Pt;sn++)Wt.push(Fe.readUByte()),Wt.push(Fe.readUByte()),Wt.push(Fe.readUByte());I(W._txtTrack.samples,{type:3,pts:B.pts,bytes:Wt})}}else if(5===je&&0!==Fe.bytesAvailable){if(Se=!0,Ce>16){for(var Vn=[],wn=0;wn<16;wn++)Vn.push(Fe.readUByte().toString(16)),(3===wn||5===wn||7===wn||9===wn)&&Vn.push("-");for(var qn=Ce-16,fn=new Uint8Array(qn),$n=0;$n<qn;$n++)fn[$n]=Fe.readUByte();I(W._txtTrack.samples,{pts:B.pts,payloadType:je,uuid:Vn.join(""),userData:Object(S.utf8ArrayToStr)(fn),userDataBytes:fn})}}else if(Ce<Fe.bytesAvailable)for(var ur=0;ur<Ce;ur++)Fe.readUByte()}break;case 7:if(oe=!0,M=!0,!L.sps){var Yn=new j.default(be.data).readSPS();L.width=Yn.width,L.height=Yn.height,L.pixelRatio=Yn.pixelRatio,L.sps=[be.data],L.duration=W._duration;for(var hr=be.data.subarray(1,4),vr="avc1.",ir=0;ir<3;ir++){var tn=hr[ir].toString(16);tn.length<2&&(tn="0"+tn),vr+=tn}L.codec=vr}break;case 8:oe=!0,L.pps||(L.pps=[be.data]);break;case 9:oe=!1,L.audFound=!0,$&&P($,L),$=W.avcSample=re(!1,B.pts,B.dts,"");break;case 12:oe=!1;break;default:oe=!1,$&&($.debug+="unknown NAL "+be.type+" ")}$&&oe&&$.units.push(be)}),q&&$&&(P($,L),this.avcSample=null)},U.getLastNalUnit=function(){var B,W,q=this.avcSample;if(!q||0===q.units.length){var L=this._avcTrack.samples;q=L[L.length-1]}if(null!==(B=q)&&void 0!==B&&B.units){var D=q.units;W=D[D.length-1]}return W},U.parseAVCNALu=function(B){var oe,M,q=B.byteLength,W=this._avcTrack,L=W.naluState||0,D=L,F=[],$=0,Me=-1,Ze=0;for(-1===L&&(Me=0,Ze=31&B[0],L=0,$=1);$<q;)if(oe=B[$++],L)if(1!==L)if(oe)if(1===oe){if(Me>=0){var Fe={data:B.subarray(Me,$-L-1),type:Ze};F.push(Fe)}else{var je=this.getLastNalUnit();if(je&&(D&&$<=4-D&&je.state&&(je.data=je.data.subarray(0,je.data.byteLength-D)),(M=$-L-1)>0)){var Ce=new Uint8Array(je.data.byteLength+M);Ce.set(je.data,0),Ce.set(B.subarray(0,M),je.data.byteLength),je.data=Ce,je.state=0}}$<q?(Me=$,Ze=31&B[$],L=0):L=-1}else L=0;else L=3;else L=oe?0:2;else L=oe?0:1;if(Me>=0&&L>=0){var Se={data:B.subarray(Me,q),type:Ze,state:L};F.push(Se)}if(0===F.length){var rt=this.getLastNalUnit();if(rt){var ct=new Uint8Array(rt.data.byteLength+B.byteLength);ct.set(rt.data,0),ct.set(B,rt.data.byteLength),rt.data=ct}}return W.naluState=L,F},U.parseAACPES=function(B){var M,be,Me,Ze,Fe,q=0,W=this._audioTrack,L=this.aacOverFlow,D=B.data;if(L){this.aacOverFlow=null;var F=L.sample.unit.byteLength,$=Math.min(L.missing,F),oe=F-$;L.sample.unit.set(D.subarray(0,$),oe),W.samples.push(L.sample),q=L.missing}for(M=q,be=D.length;M<be-1&&!O.isHeader(D,M);M++);if(M===q||(M<be-1?(Me="AAC PES did not start with ADTS header,offset:"+M,Ze=!1):(Me="no ADTS header found in AAC PES",Ze=!0),k.logger.warn("parsing error:"+Me),this.observer.emit(he.Events.ERROR,he.Events.ERROR,{type:K.ErrorTypes.MEDIA_ERROR,details:K.ErrorDetails.FRAG_PARSING_ERROR,fatal:Ze,reason:Me}),!Ze)){if(O.initTrackConfig(W,this.observer,D,M,this.audioCodec),void 0!==B.pts)Fe=B.pts;else{if(!L)return void k.logger.warn("[tsdemuxer]: AAC PES unknown PTS");var je=O.getFrameDuration(W.samplerate);Fe=L.sample.pts+je}for(var Ce=0;M<be;){if(O.isHeader(D,M)){if(M+5<be){var Se=O.appendFrame(W,D,M,Fe,Ce);if(Se){if(!Se.missing){M+=Se.length,Ce++;continue}this.aacOverFlow=Se}}break}M++}}},U.parseMPEGPES=function(B){var q=B.data,W=q.length,L=0,D=0,F=B.pts;if(void 0!==F)for(;D<W;)if(ee.isHeader(q,D)){var $=ee.appendFrame(this._audioTrack,q,D,F,L);if(!$)break;D+=$.length,L++}else D++;else k.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")},U.parseID3PES=function(B){void 0!==B.pts?this._id3Track.samples.push(B):k.logger.warn("[tsdemuxer]: ID3 PES unknown PTS")},Z}();function re(Z,U,Y,B){return{key:Z,frame:!1,pts:U,dts:Y,units:[],debug:B,length:0}}function R(Z,U){return(31&Z[U+10])<<8|Z[U+11]}function V(Z,U,Y,B){var q={audio:-1,avc:-1,id3:-1,isAAC:!0},L=U+3+((15&Z[U+1])<<8|Z[U+2])-4;for(U+=12+((15&Z[U+10])<<8|Z[U+11]);U<L;){var F=(31&Z[U+1])<<8|Z[U+2];switch(Z[U]){case 207:if(!B){k.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===q.audio&&(q.audio=F);break;case 21:-1===q.id3&&(q.id3=F);break;case 219:if(!B){k.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===q.avc&&(q.avc=F);break;case 3:case 4:Y?-1===q.audio&&(q.audio=F,q.isAAC=!1):k.logger.log("MPEG audio found, not supported in this browser");break;case 36:k.logger.warn("Unsupported HEVC stream type found")}U+=5+((15&Z[U+3])<<8|Z[U+4])}return q}function A(Z){var Y,B,q,W,L,U=0,D=Z.data;if(!Z||0===Z.size)return null;for(;D[0].length<19&&D.length>1;){var F=new Uint8Array(D[0].length+D[1].length);F.set(D[0]),F.set(D[1],D[0].length),D[0]=F,D.splice(1,1)}if(1===((Y=D[0])[0]<<16)+(Y[1]<<8)+Y[2]){if((B=(Y[4]<<8)+Y[5])&&B>Z.size-6)return null;var oe=Y[7];192&oe&&(W=536870912*(14&Y[9])+4194304*(255&Y[10])+16384*(254&Y[11])+128*(255&Y[12])+(254&Y[13])/2,64&oe?W-(L=536870912*(14&Y[14])+4194304*(255&Y[15])+16384*(254&Y[16])+128*(255&Y[17])+(254&Y[18])/2)>54e5&&(k.logger.warn(Math.round((W-L)/9e4)+"s delta between PTS and DTS, align them"),W=L):L=W);var M=(q=Y[8])+9;if(Z.size<=M)return null;Z.size-=M;for(var be=new Uint8Array(Z.size),Me=0,Ze=D.length;Me<Ze;Me++){var Fe=(Y=D[Me]).byteLength;if(M){if(M>Fe){M-=Fe;continue}Y=Y.subarray(M),Fe-=M,M=0}be.set(Y,U),U+=Fe}return B&&(B-=q+3),{data:be,pts:W,dts:L,len:B}}return null}function P(Z,U){if(Z.units.length&&Z.frame){if(void 0===Z.pts){var Y=U.samples,B=Y.length;if(!B)return void U.dropped++;var q=Y[B-1];Z.pts=q.pts,Z.dts=q.dts}U.samples.push(Z)}Z.debug.length&&k.logger.log(Z.pts+"/"+Z.dts+":"+Z.debug)}function I(Z,U){var Y=Z.length;if(Y>0){if(U.pts>=Z[Y-1].pts)Z.push(U);else for(var B=Y-1;B>=0;B--)if(U.pts<Z[B].pts){Z.splice(B,0,U);break}}else Z.push(U)}function H(Z){for(var U=Z.byteLength,Y=[],B=1;B<U-2;)0===Z[B]&&0===Z[B+1]&&3===Z[B+2]?(Y.push(B+2),B+=2):B++;if(0===Y.length)return Z;var q=U-Y.length,W=new Uint8Array(q),L=0;for(B=0;B<q;L++,B++)L===Y[0]&&(L++,Y.shift()),W[B]=Z[L];return W}ie.minProbeByteLength=188,J.default=ie},"./src/errors.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"ErrorTypes",function(){return O}),e.d(J,"ErrorDetails",function(){return ee});var O=(()=>{return(j=O||(O={})).NETWORK_ERROR="networkError",j.MEDIA_ERROR="mediaError",j.KEY_SYSTEM_ERROR="keySystemError",j.MUX_ERROR="muxError",j.OTHER_ERROR="otherError",O;var j})(),ee=(()=>{return(j=ee||(ee={})).KEY_SYSTEM_NO_KEYS="keySystemNoKeys",j.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",j.KEY_SYSTEM_NO_SESSION="keySystemNoSession",j.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",j.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",j.MANIFEST_LOAD_ERROR="manifestLoadError",j.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",j.MANIFEST_PARSING_ERROR="manifestParsingError",j.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",j.LEVEL_EMPTY_ERROR="levelEmptyError",j.LEVEL_LOAD_ERROR="levelLoadError",j.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",j.LEVEL_SWITCH_ERROR="levelSwitchError",j.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",j.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",j.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",j.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",j.FRAG_LOAD_ERROR="fragLoadError",j.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",j.FRAG_DECRYPT_ERROR="fragDecryptError",j.FRAG_PARSING_ERROR="fragParsingError",j.REMUX_ALLOC_ERROR="remuxAllocError",j.KEY_LOAD_ERROR="keyLoadError",j.KEY_LOAD_TIMEOUT="keyLoadTimeOut",j.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",j.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",j.BUFFER_APPEND_ERROR="bufferAppendError",j.BUFFER_APPENDING_ERROR="bufferAppendingError",j.BUFFER_STALLED_ERROR="bufferStalledError",j.BUFFER_FULL_ERROR="bufferFullError",j.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",j.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",j.INTERNAL_EXCEPTION="internalException",j.INTERNAL_ABORTED="aborted",j.UNKNOWN="unknown",ee;var j})()},"./src/events.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"Events",function(){return O});var O=(()=>{return(ee=O||(O={})).MEDIA_ATTACHING="hlsMediaAttaching",ee.MEDIA_ATTACHED="hlsMediaAttached",ee.MEDIA_DETACHING="hlsMediaDetaching",ee.MEDIA_DETACHED="hlsMediaDetached",ee.BUFFER_RESET="hlsBufferReset",ee.BUFFER_CODECS="hlsBufferCodecs",ee.BUFFER_CREATED="hlsBufferCreated",ee.BUFFER_APPENDING="hlsBufferAppending",ee.BUFFER_APPENDED="hlsBufferAppended",ee.BUFFER_EOS="hlsBufferEos",ee.BUFFER_FLUSHING="hlsBufferFlushing",ee.BUFFER_FLUSHED="hlsBufferFlushed",ee.MANIFEST_LOADING="hlsManifestLoading",ee.MANIFEST_LOADED="hlsManifestLoaded",ee.MANIFEST_PARSED="hlsManifestParsed",ee.LEVEL_SWITCHING="hlsLevelSwitching",ee.LEVEL_SWITCHED="hlsLevelSwitched",ee.LEVEL_LOADING="hlsLevelLoading",ee.LEVEL_LOADED="hlsLevelLoaded",ee.LEVEL_UPDATED="hlsLevelUpdated",ee.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",ee.LEVELS_UPDATED="hlsLevelsUpdated",ee.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",ee.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",ee.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",ee.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",ee.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",ee.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",ee.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",ee.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",ee.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",ee.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",ee.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",ee.CUES_PARSED="hlsCuesParsed",ee.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",ee.INIT_PTS_FOUND="hlsInitPtsFound",ee.FRAG_LOADING="hlsFragLoading",ee.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",ee.FRAG_LOADED="hlsFragLoaded",ee.FRAG_DECRYPTED="hlsFragDecrypted",ee.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",ee.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",ee.FRAG_PARSING_METADATA="hlsFragParsingMetadata",ee.FRAG_PARSED="hlsFragParsed",ee.FRAG_BUFFERED="hlsFragBuffered",ee.FRAG_CHANGED="hlsFragChanged",ee.FPS_DROP="hlsFpsDrop",ee.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",ee.ERROR="hlsError",ee.DESTROYING="hlsDestroying",ee.KEY_LOADING="hlsKeyLoading",ee.KEY_LOADED="hlsKeyLoaded",ee.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",ee.BACK_BUFFER_REACHED="hlsBackBufferReached",O;var ee})()},"./src/hls.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"default",function(){return Z});var O=e("./node_modules/url-toolkit/src/url-toolkit.js"),j=e("./src/loader/playlist-loader.ts"),S=e("./src/loader/key-loader.ts"),fe=e("./src/controller/id3-track-controller.ts"),he=e("./src/controller/latency-controller.ts"),se=e("./src/controller/level-controller.ts"),k=e("./src/controller/fragment-tracker.ts"),K=e("./src/controller/stream-controller.ts"),ne=e("./src/is-supported.ts"),ie=e("./src/utils/logger.ts"),re=e("./src/config.ts"),R=e("./node_modules/eventemitter3/index.js"),A=e("./src/events.ts"),P=e("./src/errors.ts");function I(U,Y){for(var B=0;B<Y.length;B++){var q=Y[B];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(U,q.key,q)}}var Z=function(){function U(B){void 0===B&&(B={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new R.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var q=this.config=Object(re.mergeConfig)(U.DefaultConfig,B);this.userConfig=B,Object(ie.enableLogs)(q.debug),this._autoLevelCapping=-1,q.progressive&&Object(re.enableStreamingMode)(q);var L=q.bufferController,D=q.capLevelController,F=q.fpsController,$=this.abrController=new(0,q.abrController)(this),oe=this.bufferController=new L(this),M=this.capLevelController=new D(this),be=new F(this),Me=new j.default(this),Ze=new S.default(this),Fe=new fe.default(this),je=this.levelController=new se.default(this),Ce=new k.FragmentTracker(this),Se=this.streamController=new K.default(this,Ce);M.setStreamController(Se),be.setStreamController(Se);var rt=[je,Se];this.networkControllers=rt;var ct=[Me,Ze,$,oe,M,be,Fe,Ce];this.audioTrackController=this.createController(q.audioTrackController,null,rt),this.createController(q.audioStreamController,Ce,rt),this.subtitleTrackController=this.createController(q.subtitleTrackController,null,rt),this.createController(q.subtitleStreamController,Ce,rt),this.createController(q.timelineController,null,ct),this.emeController=this.createController(q.emeController,null,ct),this.cmcdController=this.createController(q.cmcdController,null,ct),this.latencyController=this.createController(he.default,null,ct),this.coreComponents=ct}U.isSupported=function(){return Object(ne.isSupported)()};var Y=U.prototype;return Y.createController=function(q,W,L){if(q){var D=W?new q(this,W):new q(this);return L&&L.push(D),D}return null},Y.on=function(q,W,L){void 0===L&&(L=this),this._emitter.on(q,W,L)},Y.once=function(q,W,L){void 0===L&&(L=this),this._emitter.once(q,W,L)},Y.removeAllListeners=function(q){this._emitter.removeAllListeners(q)},Y.off=function(q,W,L,D){void 0===L&&(L=this),this._emitter.off(q,W,L,D)},Y.listeners=function(q){return this._emitter.listeners(q)},Y.emit=function(q,W,L){return this._emitter.emit(q,W,L)},Y.trigger=function(q,W){if(this.config.debug)return this.emit(q,q,W);try{return this.emit(q,q,W)}catch(L){ie.logger.error("An internal error happened while handling event "+q+'. Error message: "'+L.message+'". Here is a stacktrace:',L),this.trigger(A.Events.ERROR,{type:P.ErrorTypes.OTHER_ERROR,details:P.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:q,error:L})}return!1},Y.listenerCount=function(q){return this._emitter.listenerCount(q)},Y.destroy=function(){ie.logger.log("destroy"),this.trigger(A.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(q){return q.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(q){return q.destroy()}),this.coreComponents.length=0},Y.attachMedia=function(q){ie.logger.log("attachMedia"),this._media=q,this.trigger(A.Events.MEDIA_ATTACHING,{media:q})},Y.detachMedia=function(){ie.logger.log("detachMedia"),this.trigger(A.Events.MEDIA_DETACHING,void 0),this._media=null},Y.loadSource=function(q){this.stopLoad();var W=this.media,L=this.url,D=this.url=O.buildAbsoluteURL(self.location.href,q,{alwaysNormalize:!0});ie.logger.log("loadSource:"+D),W&&L&&L!==D&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(W)),this.trigger(A.Events.MANIFEST_LOADING,{url:q})},Y.startLoad=function(q){void 0===q&&(q=-1),ie.logger.log("startLoad("+q+")"),this.networkControllers.forEach(function(W){W.startLoad(q)})},Y.stopLoad=function(){ie.logger.log("stopLoad"),this.networkControllers.forEach(function(q){q.stopLoad()})},Y.swapAudioCodec=function(){ie.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},Y.recoverMediaError=function(){ie.logger.log("recoverMediaError");var q=this._media;this.detachMedia(),q&&this.attachMedia(q)},Y.removeLevel=function(q,W){void 0===W&&(W=0),this.levelController.removeLevel(q,W)},function H(U,Y,B){return Y&&I(U.prototype,Y),B&&I(U,B),U}(U,[{key:"levels",get:function(){return this.levelController.levels||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(q){ie.logger.log("set currentLevel:"+q),this.loadLevel=q,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(q){ie.logger.log("set nextLevel:"+q),this.levelController.manualLevel=q,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(q){ie.logger.log("set loadLevel:"+q),this.levelController.manualLevel=q}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(q){this.levelController.nextLoadLevel=q}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(q){ie.logger.log("set firstLevel:"+q),this.levelController.firstLevel=q}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(q){ie.logger.log("set startLevel:"+q),-1!==q&&(q=Math.max(q,this.minAutoLevel)),this.levelController.startLevel=q}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(q){var W=!!q;W!==this.config.capLevelToPlayerSize&&(W?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=W)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(q){this._autoLevelCapping!==q&&(ie.logger.log("set autoLevelCapping:"+q),this._autoLevelCapping=q)}},{key:"bandwidthEstimate",get:function(){var q=this.abrController.bwEstimator;return q?q.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var q=this.levels,W=this.config.minAutoBitrate;if(!q)return 0;for(var L=q.length,D=0;D<L;D++)if(q[D].maxBitrate>W)return D;return 0}},{key:"maxAutoLevel",get:function(){var q=this.levels,W=this.autoLevelCapping;return-1===W&&q&&q.length?q.length-1:W}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(q){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,q)}},{key:"audioTracks",get:function(){var q=this.audioTrackController;return q?q.audioTracks:[]}},{key:"audioTrack",get:function(){var q=this.audioTrackController;return q?q.audioTrack:-1},set:function(q){var W=this.audioTrackController;W&&(W.audioTrack=q)}},{key:"subtitleTracks",get:function(){var q=this.subtitleTrackController;return q?q.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var q=this.subtitleTrackController;return q?q.subtitleTrack:-1},set:function(q){var W=this.subtitleTrackController;W&&(W.subtitleTrack=q)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var q=this.subtitleTrackController;return!!q&&q.subtitleDisplay},set:function(q){var W=this.subtitleTrackController;W&&(W.subtitleDisplay=q)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(q){this.config.lowLatencyMode=q}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){return"1.1.5"}},{key:"Events",get:function(){return A.Events}},{key:"ErrorTypes",get:function(){return P.ErrorTypes}},{key:"ErrorDetails",get:function(){return P.ErrorDetails}},{key:"DefaultConfig",get:function(){return U.defaultConfig?U.defaultConfig:re.hlsDefaultConfig},set:function(q){U.defaultConfig=q}}]),U}();Z.defaultConfig=void 0},"./src/is-supported.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"isSupported",function(){return j}),e.d(J,"changeTypeSupported",function(){return S});var O=e("./src/utils/mediasource-helper.ts");function ee(){return self.SourceBuffer||self.WebKitSourceBuffer}function j(){var fe=Object(O.getMediaSource)();if(!fe)return!1;var he=ee();return!(!fe||"function"!=typeof fe.isTypeSupported||!fe.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')||he&&(!he.prototype||"function"!=typeof he.prototype.appendBuffer||"function"!=typeof he.prototype.remove))}function S(){var fe,he=ee();return"function"==typeof(null==he||null===(fe=he.prototype)||void 0===fe?void 0:fe.changeType)}},"./src/loader/fragment-loader.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"default",function(){return ie}),e.d(J,"LoadError",function(){return R});var O=e("./src/polyfills/number.ts"),ee=e("./src/errors.ts");function S(V){var A="function"==typeof Map?new Map:void 0;return S=function(I){if(null===I||!function se(V){return-1!==Function.toString.call(V).indexOf("[native code]")}(I))return I;if("function"!=typeof I)throw new TypeError("Super expression must either be null or a function");if(void 0!==A){if(A.has(I))return A.get(I);A.set(I,H)}function H(){return fe(I,arguments,K(this).constructor)}return H.prototype=Object.create(I.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),k(H,I)},S(V)}function fe(V,A,P){return(fe=he()?Reflect.construct:function(H,Z,U){var Y=[null];Y.push.apply(Y,Z);var q=new(Function.bind.apply(H,Y));return U&&k(q,U.prototype),q}).apply(null,arguments)}function he(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(V){return!1}}function k(V,A){return(k=Object.setPrototypeOf||function(I,H){return I.__proto__=H,I})(V,A)}function K(V){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)})(V)}var ne=Math.pow(2,17),ie=function(){function V(P){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=P}var A=V.prototype;return A.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},A.abort=function(){this.loader&&this.loader.abort()},A.load=function(I,H){var Z=this,U=I.url;if(!U)return Promise.reject(new R({type:ee.ErrorTypes.NETWORK_ERROR,details:ee.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:I,networkDetails:null},"Fragment does not have a "+(U?"part list":"url")));this.abort();var Y=this.config,B=Y.fLoader,q=Y.loader;return new Promise(function(W,L){Z.loader&&Z.loader.destroy();var D=Z.loader=I.loader=B?new B(Y):new q(Y),F=re(I),$={timeout:Y.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:Y.fragLoadingMaxRetryTimeout,highWaterMark:ne};I.stats=D.stats,D.load(F,$,{onSuccess:function(M,be,Me,Ze){Z.resetLoader(I,D),W({frag:I,part:null,payload:M.data,networkDetails:Ze})},onError:function(M,be,Me){Z.resetLoader(I,D),L(new R({type:ee.ErrorTypes.NETWORK_ERROR,details:ee.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:I,response:M,networkDetails:Me}))},onAbort:function(M,be,Me){Z.resetLoader(I,D),L(new R({type:ee.ErrorTypes.NETWORK_ERROR,details:ee.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:I,networkDetails:Me}))},onTimeout:function(M,be,Me){Z.resetLoader(I,D),L(new R({type:ee.ErrorTypes.NETWORK_ERROR,details:ee.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:I,networkDetails:Me}))},onProgress:function(M,be,Me,Ze){H&&H({frag:I,part:null,payload:Me,networkDetails:Ze})}})})},A.loadPart=function(I,H,Z){var U=this;this.abort();var Y=this.config,B=Y.fLoader,q=Y.loader;return new Promise(function(W,L){U.loader&&U.loader.destroy();var D=U.loader=I.loader=B?new B(Y):new q(Y),F=re(I,H),$={timeout:Y.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:Y.fragLoadingMaxRetryTimeout,highWaterMark:ne};H.stats=D.stats,D.load(F,$,{onSuccess:function(M,be,Me,Ze){U.resetLoader(I,D),U.updateStatsFromPart(I,H);var Fe={frag:I,part:H,payload:M.data,networkDetails:Ze};Z(Fe),W(Fe)},onError:function(M,be,Me){U.resetLoader(I,D),L(new R({type:ee.ErrorTypes.NETWORK_ERROR,details:ee.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:I,part:H,response:M,networkDetails:Me}))},onAbort:function(M,be,Me){I.stats.aborted=H.stats.aborted,U.resetLoader(I,D),L(new R({type:ee.ErrorTypes.NETWORK_ERROR,details:ee.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:I,part:H,networkDetails:Me}))},onTimeout:function(M,be,Me){U.resetLoader(I,D),L(new R({type:ee.ErrorTypes.NETWORK_ERROR,details:ee.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:I,part:H,networkDetails:Me}))}})})},A.updateStatsFromPart=function(I,H){var Z=I.stats,U=H.stats,Y=U.total;if(Z.loaded+=U.loaded,Y){var B=Math.round(I.duration/H.duration),q=Math.min(Math.round(Z.loaded/Y),B),L=(B-q)*Math.round(Z.loaded/q);Z.total=Z.loaded+L}else Z.total=Math.max(Z.loaded,Z.total);var D=Z.loading,F=U.loading;D.start?D.first+=F.first-F.start:(D.start=F.start,D.first=F.first),D.end=F.end},A.resetLoader=function(I,H){I.loader=null,this.loader===H&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),H.destroy()},V}();function re(V,A){void 0===A&&(A=null);var P=A||V,I={frag:V,part:A,responseType:"arraybuffer",url:P.url,headers:{},rangeStart:0,rangeEnd:0},H=P.byteRangeStartOffset,Z=P.byteRangeEndOffset;return Object(O.isFiniteNumber)(H)&&Object(O.isFiniteNumber)(Z)&&(I.rangeStart=H,I.rangeEnd=Z),I}var R=function(V){function A(P){for(var I,H=arguments.length,Z=new Array(H>1?H-1:0),U=1;U<H;U++)Z[U-1]=arguments[U];return(I=V.call.apply(V,[this].concat(Z))||this).data=void 0,I.data=P,I}return function j(V,A){V.prototype=Object.create(A.prototype),V.prototype.constructor=V,k(V,A)}(A,V),A}(S(Error))},"./src/loader/fragment.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"ElementaryStreamTypes",function(){return ie}),e.d(J,"BaseSegment",function(){return re}),e.d(J,"Fragment",function(){return R}),e.d(J,"Part",function(){return V});var O=e("./src/polyfills/number.ts"),ee=e("./node_modules/url-toolkit/src/url-toolkit.js"),S=e("./src/utils/logger.ts"),fe=e("./src/loader/level-key.ts"),he=e("./src/loader/load-stats.ts");function se(A,P){A.prototype=Object.create(P.prototype),A.prototype.constructor=A,k(A,P)}function k(A,P){return(k=Object.setPrototypeOf||function(H,Z){return H.__proto__=Z,H})(A,P)}function K(A,P){for(var I=0;I<P.length;I++){var H=P[I];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(A,H.key,H)}}function ne(A,P,I){return P&&K(A.prototype,P),I&&K(A,I),A}var ie=(()=>{return(A=ie||(ie={})).AUDIO="audio",A.VIDEO="video",A.AUDIOVIDEO="audiovideo",ie;var A})(),re=function(){function A(I){var H;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((H={})[ie.AUDIO]=null,H[ie.VIDEO]=null,H[ie.AUDIOVIDEO]=null,H),this.baseurl=I}return A.prototype.setByteRange=function(H,Z){var U=H.split("@",2),Y=[];Y[0]=1===U.length?Z?Z.byteRangeEndOffset:0:parseInt(U[1]),Y[1]=parseInt(U[0])+Y[0],this._byteRange=Y},ne(A,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Object(ee.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(H){this._url=H}}]),A}(),R=function(A){function P(H,Z){var U;return(U=A.call(this,Z)||this)._decryptdata=null,U.rawProgramDateTime=null,U.programDateTime=null,U.tagList=[],U.duration=0,U.sn=0,U.levelkey=void 0,U.type=void 0,U.loader=null,U.level=-1,U.cc=0,U.startPTS=void 0,U.endPTS=void 0,U.appendedPTS=void 0,U.startDTS=void 0,U.endDTS=void 0,U.start=0,U.deltaPTS=void 0,U.maxStartPTS=void 0,U.minEndPTS=void 0,U.stats=new he.LoadStats,U.urlId=0,U.data=void 0,U.bitrateTest=!1,U.title=null,U.initSegment=null,U.type=H,U}se(P,A);var I=P.prototype;return I.createInitializationVector=function(Z){for(var U=new Uint8Array(16),Y=12;Y<16;Y++)U[Y]=Z>>8*(15-Y)&255;return U},I.setDecryptDataFromLevelKey=function(Z,U){var Y=Z;return"AES-128"===(null==Z?void 0:Z.method)&&Z.uri&&!Z.iv&&((Y=fe.LevelKey.fromURI(Z.uri)).method=Z.method,Y.iv=this.createInitializationVector(U),Y.keyFormat="identity"),Y},I.setElementaryStreamInfo=function(Z,U,Y,B,q,W){void 0===W&&(W=!1);var L=this.elementaryStreams,D=L[Z];D?(D.startPTS=Math.min(D.startPTS,U),D.endPTS=Math.max(D.endPTS,Y),D.startDTS=Math.min(D.startDTS,B),D.endDTS=Math.max(D.endDTS,q)):L[Z]={startPTS:U,endPTS:Y,startDTS:B,endDTS:q,partial:W}},I.clearElementaryStreamInfo=function(){var Z=this.elementaryStreams;Z[ie.AUDIO]=null,Z[ie.VIDEO]=null,Z[ie.AUDIOVIDEO]=null},ne(P,[{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var Z=this.sn;"number"!=typeof Z&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&S.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),Z=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,Z)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime||!Object(O.isFiniteNumber)(this.programDateTime))return null;var Z=Object(O.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*Z}},{key:"encrypted",get:function(){var Z;return!(null===(Z=this.decryptdata)||void 0===Z||!Z.keyFormat||!this.decryptdata.uri)}}]),P}(re),V=function(A){function P(I,H,Z,U,Y){var B;(B=A.call(this,Z)||this).fragOffset=0,B.duration=0,B.gap=!1,B.independent=!1,B.relurl=void 0,B.fragment=void 0,B.index=void 0,B.stats=new he.LoadStats,B.duration=I.decimalFloatingPoint("DURATION"),B.gap=I.bool("GAP"),B.independent=I.bool("INDEPENDENT"),B.relurl=I.enumeratedString("URI"),B.fragment=H,B.index=U;var q=I.enumeratedString("BYTERANGE");return q&&B.setByteRange(q,Y),Y&&(B.fragOffset=Y.fragOffset+Y.duration),B}return se(P,A),ne(P,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var H=this.elementaryStreams;return!!(H.audio||H.video||H.audiovideo)}}]),P}(re)},"./src/loader/key-loader.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"default",function(){return S});var O=e("./src/events.ts"),ee=e("./src/errors.ts"),j=e("./src/utils/logger.ts"),S=function(){function fe(se){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=se,this._registerListeners()}var he=fe.prototype;return he._registerListeners=function(){this.hls.on(O.Events.KEY_LOADING,this.onKeyLoading,this)},he._unregisterListeners=function(){this.hls.off(O.Events.KEY_LOADING,this.onKeyLoading)},he.destroy=function(){for(var k in this._unregisterListeners(),this.loaders){var K=this.loaders[k];K&&K.destroy()}this.loaders={}},he.onKeyLoading=function(k,K){var ne=K.frag,ie=ne.type,re=this.loaders[ie];if(ne.decryptdata){var R=ne.decryptdata.uri;if(R!==this.decrypturl||null===this.decryptkey){var V=this.hls.config;if(re&&(j.logger.warn("abort previous key loader for type:"+ie),re.abort()),!R)return void j.logger.warn("key uri is falsy");var P=ne.loader=this.loaders[ie]=new(0,V.loader)(V);this.decrypturl=R,this.decryptkey=null;var I={url:R,frag:ne,responseType:"arraybuffer"},H={timeout:V.fragLoadingTimeOut,maxRetry:0,retryDelay:V.fragLoadingRetryDelay,maxRetryDelay:V.fragLoadingMaxRetryTimeout,highWaterMark:0},Z={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};P.load(I,H,Z)}else this.decryptkey&&(ne.decryptdata.key=this.decryptkey,this.hls.trigger(O.Events.KEY_LOADED,{frag:ne}))}else j.logger.warn("Missing decryption data on fragment in onKeyLoading")},he.loadsuccess=function(k,K,ne){var ie=ne.frag;ie.decryptdata?(this.decryptkey=ie.decryptdata.key=new Uint8Array(k.data),ie.loader=null,delete this.loaders[ie.type],this.hls.trigger(O.Events.KEY_LOADED,{frag:ie})):j.logger.error("after key load, decryptdata unset")},he.loaderror=function(k,K){var ne=K.frag,ie=ne.loader;ie&&ie.abort(),delete this.loaders[ne.type],this.hls.trigger(O.Events.ERROR,{type:ee.ErrorTypes.NETWORK_ERROR,details:ee.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:ne,response:k})},he.loadtimeout=function(k,K){var ne=K.frag,ie=ne.loader;ie&&ie.abort(),delete this.loaders[ne.type],this.hls.trigger(O.Events.ERROR,{type:ee.ErrorTypes.NETWORK_ERROR,details:ee.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:ne})},fe}()},"./src/loader/level-details.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"LevelDetails",function(){return fe});var O=e("./src/polyfills/number.ts");function ee(he,se){for(var k=0;k<se.length;k++){var K=se[k];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(he,K.key,K)}}var fe=function(){function he(k){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.url=k}return he.prototype.reloaded=function(K){if(!K)return this.advanced=!0,void(this.updated=!0);var ne=this.lastPartSn-K.lastPartSn,ie=this.lastPartIndex-K.lastPartIndex;this.updated=this.endSN!==K.endSN||!!ie||!!ne,this.advanced=this.endSN>K.endSN||ne>0||0===ne&&ie>0,this.misses=this.updated||this.advanced?Math.floor(.6*K.misses):K.misses+1,this.availabilityDelay=K.availabilityDelay},function j(he,se,k){return se&&ee(he.prototype,se),k&&ee(he,k),he}(he,[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&Object(O.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var K=this.driftEndTime-this.driftStartTime;return K>0?1e3*(this.driftEnd-this.driftStart)/K:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var K;return null!==(K=this.partList)&&void 0!==K&&K.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var K;return null!==(K=this.fragments)&&void 0!==K&&K.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var K;return null!==(K=this.partList)&&void 0!==K&&K.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var K;return null!==(K=this.partList)&&void 0!==K&&K.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),he}()},"./src/loader/level-key.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"LevelKey",function(){return fe});var O=e("./node_modules/url-toolkit/src/url-toolkit.js");function j(he,se){for(var k=0;k<se.length;k++){var K=se[k];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(he,K.key,K)}}var fe=function(){function he(se,k){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,this._uri=k?Object(O.buildAbsoluteURL)(se,k,{alwaysNormalize:!0}):se}return he.fromURL=function(k,K){return new he(k,K)},he.fromURI=function(k){return new he(k)},function S(he,se,k){return se&&j(he.prototype,se),k&&j(he,k),he}(he,[{key:"uri",get:function(){return this._uri}}]),he}()},"./src/loader/load-stats.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"LoadStats",function(){return O});var O=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"default",function(){return P});var O=e("./src/polyfills/number.ts"),ee=e("./node_modules/url-toolkit/src/url-toolkit.js"),S=e("./src/loader/fragment.ts"),fe=e("./src/loader/level-details.ts"),he=e("./src/loader/level-key.ts"),se=e("./src/utils/attr-list.ts"),k=e("./src/utils/logger.ts"),K=e("./src/utils/codecs.ts"),ne=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,ie=/#EXT-X-MEDIA:(.*)/g,re=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),R=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(PLAYLIST-TYPE):(.+)/.source,/#EXT-X-(MEDIA-SEQUENCE): *(\d+)/.source,/#EXT-X-(SKIP):(.+)/.source,/#EXT-X-(TARGETDURATION): *(\d+)/.source,/#EXT-X-(KEY):(.+)/.source,/#EXT-X-(START):(.+)/.source,/#EXT-X-(ENDLIST)/.source,/#EXT-X-(DISCONTINUITY-SEQ)UENCE: *(\d+)/.source,/#EXT-X-(DIS)CONTINUITY/.source,/#EXT-X-(VERSION):(\d+)/.source,/#EXT-X-(MAP):(.+)/.source,/#EXT-X-(SERVER-CONTROL):(.+)/.source,/#EXT-X-(PART-INF):(.+)/.source,/#EXT-X-(GAP)/.source,/#EXT-X-(BITRATE):\s*(\d+)/.source,/#EXT-X-(PART):(.+)/.source,/#EXT-X-(PRELOAD-HINT):(.+)/.source,/#EXT-X-(RENDITION-REPORT):(.+)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),V=/\.(mp4|m4s|m4v|m4a)$/i;var P=function(){function Y(){}return Y.findGroup=function(q,W){for(var L=0;L<q.length;L++){var D=q[L];if(D.id===W)return D}},Y.convertAVC1ToAVCOTI=function(q){var W=q.split(".");if(W.length>2){var L=W.shift()+".";return(L+=parseInt(W.shift()).toString(16))+("000"+parseInt(W.shift()).toString(16)).substr(-4)}return q},Y.resolve=function(q,W){return ee.buildAbsoluteURL(W,q,{alwaysNormalize:!0})},Y.parseMasterPlaylist=function(q,W){var $,L=[],D={},F=!1;for(ne.lastIndex=0;null!=($=ne.exec(q));)if($[1]){var oe=new se.AttrList($[1]),M={attrs:oe,bitrate:oe.decimalInteger("AVERAGE-BANDWIDTH")||oe.decimalInteger("BANDWIDTH"),name:oe.NAME,url:Y.resolve($[2],W)},be=oe.decimalResolution("RESOLUTION");be&&(M.width=be.width,M.height=be.height),I((oe.CODECS||"").split(/[ ,]+/).filter(function(Ze){return Ze}),M),M.videoCodec&&-1!==M.videoCodec.indexOf("avc1")&&(M.videoCodec=Y.convertAVC1ToAVCOTI(M.videoCodec)),L.push(M)}else if($[3]){var Me=new se.AttrList($[3]);Me["DATA-ID"]&&(F=!0,D[Me["DATA-ID"]]=Me)}return{levels:L,sessionData:F?D:null}},Y.parseMasterPlaylistMedia=function(q,W,L,D){void 0===D&&(D=[]);var F,$=[],oe=0;for(ie.lastIndex=0;null!==(F=ie.exec(q));){var M=new se.AttrList(F[1]);if(M.TYPE===L){var be={attrs:M,bitrate:0,id:oe++,groupId:M["GROUP-ID"],instreamId:M["INSTREAM-ID"],name:M.NAME||M.LANGUAGE||"",type:L,default:M.bool("DEFAULT"),autoselect:M.bool("AUTOSELECT"),forced:M.bool("FORCED"),lang:M.LANGUAGE,url:M.URI?Y.resolve(M.URI,W):""};if(D.length){var Me=Y.findGroup(D,be.groupId)||D[0];H(be,Me,"audioCodec"),H(be,Me,"textCodec")}$.push(be)}}return $},Y.parseLevelPlaylist=function(q,W,L,D,F){var Se,rt,ct,$=new fe.LevelDetails(W),oe=$.fragments,M=null,be=0,Me=0,Ze=0,Fe=0,je=null,Ce=new S.Fragment(D,W),Lt=-1,pt=!1;for(re.lastIndex=0,$.m3u8=q;null!==(Se=re.exec(q));){pt&&(pt=!1,(Ce=new S.Fragment(D,W)).start=Ze,Ce.sn=be,Ce.cc=Fe,Ce.level=L,M&&(Ce.initSegment=M,Ce.rawProgramDateTime=M.rawProgramDateTime));var gt=Se[1];if(gt){Ce.duration=parseFloat(gt);var st=(" "+Se[2]).slice(1);Ce.title=st||null,Ce.tagList.push(st?["INF",gt,st]:["INF",gt])}else if(Se[3])Object(O.isFiniteNumber)(Ce.duration)&&(Ce.start=Ze,ct&&(Ce.levelkey=ct),Ce.sn=be,Ce.level=L,Ce.cc=Fe,Ce.urlId=F,oe.push(Ce),Ce.relurl=(" "+Se[3]).slice(1),U(Ce,je),je=Ce,Ze+=Ce.duration,be++,Me=0,pt=!0);else if(Se[4]){var zt=(" "+Se[4]).slice(1);je?Ce.setByteRange(zt,je):Ce.setByteRange(zt)}else if(Se[5])Ce.rawProgramDateTime=(" "+Se[5]).slice(1),Ce.tagList.push(["PROGRAM-DATE-TIME",Ce.rawProgramDateTime]),-1===Lt&&(Lt=oe.length);else{if(!(Se=Se[0].match(R))){k.logger.warn("No matches on slow regex match for level playlist!");continue}for(rt=1;rt<Se.length&&void 0===Se[rt];rt++);var Pt=(" "+Se[rt]).slice(1),Wt=(" "+Se[rt+1]).slice(1),sn=Se[rt+2]?(" "+Se[rt+2]).slice(1):"";switch(Pt){case"PLAYLIST-TYPE":$.type=Wt.toUpperCase();break;case"MEDIA-SEQUENCE":be=$.startSN=parseInt(Wt);break;case"SKIP":var Vn=new se.AttrList(Wt),wn=Vn.decimalInteger("SKIPPED-SEGMENTS");if(Object(O.isFiniteNumber)(wn)){$.skippedSegments=wn;for(var qn=wn;qn--;)oe.unshift(null);be+=wn}var fn=Vn.enumeratedString("RECENTLY-REMOVED-DATERANGES");fn&&($.recentlyRemovedDateranges=fn.split("\t"));break;case"TARGETDURATION":$.targetduration=parseFloat(Wt);break;case"VERSION":$.version=parseInt(Wt);break;case"EXTM3U":break;case"ENDLIST":$.live=!1;break;case"#":(Wt||sn)&&Ce.tagList.push(sn?[Wt,sn]:[Wt]);break;case"DIS":Fe++;case"GAP":Ce.tagList.push([Pt]);break;case"BITRATE":Ce.tagList.push([Pt,Wt]);break;case"DISCONTINUITY-SEQ":Fe=parseInt(Wt);break;case"KEY":var $n,ur=new se.AttrList(Wt),Pn=ur.enumeratedString("METHOD"),Yn=ur.URI,hr=ur.hexadecimalInteger("IV"),vr=ur.enumeratedString("KEYFORMATVERSIONS"),ir=ur.enumeratedString("KEYID"),tn=null!=($n=ur.enumeratedString("KEYFORMAT"))?$n:"identity";if(["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"].indexOf(tn)>-1){k.logger.warn("Keyformat "+tn+" is not supported from the manifest");continue}if("identity"!==tn)continue;Pn&&(ct=he.LevelKey.fromURL(W,Yn),Yn&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(Pn)>=0&&(ct.method=Pn,ct.keyFormat=tn,ir&&(ct.keyID=ir),vr&&(ct.keyFormatVersions=vr),ct.iv=hr));break;case"START":var Sn=new se.AttrList(Wt).decimalFloatingPoint("TIME-OFFSET");Object(O.isFiniteNumber)(Sn)&&($.startTimeOffset=Sn);break;case"MAP":var mn=new se.AttrList(Wt);Ce.relurl=mn.URI,mn.BYTERANGE&&Ce.setByteRange(mn.BYTERANGE),Ce.level=L,Ce.sn="initSegment",ct&&(Ce.levelkey=ct),Ce.initSegment=null,M=Ce,pt=!0;break;case"SERVER-CONTROL":var yr=new se.AttrList(Wt);$.canBlockReload=yr.bool("CAN-BLOCK-RELOAD"),$.canSkipUntil=yr.optionalFloat("CAN-SKIP-UNTIL",0),$.canSkipDateRanges=$.canSkipUntil>0&&yr.bool("CAN-SKIP-DATERANGES"),$.partHoldBack=yr.optionalFloat("PART-HOLD-BACK",0),$.holdBack=yr.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var Er=new se.AttrList(Wt);$.partTarget=Er.decimalFloatingPoint("PART-TARGET");break;case"PART":var Dn=$.partList;Dn||(Dn=$.partList=[]);var Nt=Me>0?Dn[Dn.length-1]:void 0,Zt=Me++,dr=new S.Part(new se.AttrList(Wt),Ce,W,Zt,Nt);Dn.push(dr),Ce.duration+=dr.duration;break;case"PRELOAD-HINT":var Ge=new se.AttrList(Wt);$.preloadHint=Ge;break;case"RENDITION-REPORT":var Dt=new se.AttrList(Wt);$.renditionReports=$.renditionReports||[],$.renditionReports.push(Dt);break;default:k.logger.warn("line parsed but not handled: "+Se)}}}je&&!je.relurl?(oe.pop(),Ze-=je.duration,$.partList&&($.fragmentHint=je)):$.partList&&(U(Ce,je),Ce.cc=Fe,$.fragmentHint=Ce);var it=oe.length,Ye=oe[0],Ut=oe[it-1];if((Ze+=$.skippedSegments*$.targetduration)>0&&it&&Ut){$.averagetargetduration=Ze/it;var Qt=Ut.sn;$.endSN="initSegment"!==Qt?Qt:0,Ye&&($.startCC=Ye.cc,Ye.initSegment||$.fragments.every(function(zn){return zn.relurl&&function A(Y){var B,q;return V.test(null!=(B=null===(q=ee.parseURL(Y))||void 0===q?void 0:q.path)?B:"")}(zn.relurl)})&&(k.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(Ce=new S.Fragment(D,W)).relurl=Ut.relurl,Ce.level=L,Ce.sn="initSegment",Ye.initSegment=Ce,$.needSidxRanges=!0))}else $.endSN=0,$.startCC=0;return $.fragmentHint&&(Ze+=$.fragmentHint.duration),$.totalduration=Ze,$.endCC=Fe,Lt>0&&function Z(Y,B){for(var q=Y[B],W=B;W--;){var L=Y[W];if(!L)return;L.programDateTime=q.programDateTime-1e3*L.duration,q=L}}(oe,Lt),$},Y}();function I(Y,B){["video","audio","text"].forEach(function(q){var W=Y.filter(function(D){return Object(K.isCodecType)(D,q)});if(W.length){var L=W.filter(function(D){return 0===D.lastIndexOf("avc1",0)||0===D.lastIndexOf("mp4a",0)});B[q+"Codec"]=L.length>0?L[0]:W[0],Y=Y.filter(function(D){return-1===W.indexOf(D)})}}),B.unknownCodecs=Y}function H(Y,B,q){var W=B[q];W&&(Y[q]=W)}function U(Y,B){Y.rawProgramDateTime?Y.programDateTime=Date.parse(Y.rawProgramDateTime):null!=B&&B.programDateTime&&(Y.programDateTime=B.endProgramDateTime),Object(O.isFiniteNumber)(Y.programDateTime)||(Y.programDateTime=null,Y.rawProgramDateTime=null)}},"./src/loader/playlist-loader.ts":function(ht,J,e){"use strict";e.r(J);var O=e("./src/polyfills/number.ts"),ee=e("./src/events.ts"),j=e("./src/errors.ts"),S=e("./src/utils/logger.ts"),fe=e("./src/utils/mp4-tools.ts"),he=e("./src/loader/m3u8-parser.ts"),se=e("./src/types/loader.ts"),k=e("./src/utils/attr-list.ts");function ne(re,R){var V=re.url;return(void 0===V||0===V.indexOf("data:"))&&(V=R.url),V}J.default=function(){function re(V){this.hls=void 0,this.loaders=Object.create(null),this.hls=V,this.registerListeners()}var R=re.prototype;return R.registerListeners=function(){var A=this.hls;A.on(ee.Events.MANIFEST_LOADING,this.onManifestLoading,this),A.on(ee.Events.LEVEL_LOADING,this.onLevelLoading,this),A.on(ee.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),A.on(ee.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},R.unregisterListeners=function(){var A=this.hls;A.off(ee.Events.MANIFEST_LOADING,this.onManifestLoading,this),A.off(ee.Events.LEVEL_LOADING,this.onLevelLoading,this),A.off(ee.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),A.off(ee.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},R.createInternalLoader=function(A){var P=this.hls.config,U=new(P.pLoader||P.loader)(P);return A.loader=U,this.loaders[A.type]=U,U},R.getInternalLoader=function(A){return this.loaders[A.type]},R.resetInternalLoader=function(A){this.loaders[A]&&delete this.loaders[A]},R.destroyInternalLoaders=function(){for(var A in this.loaders){var P=this.loaders[A];P&&P.destroy(),this.resetInternalLoader(A)}},R.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},R.onManifestLoading=function(A,P){this.load({id:null,groupId:null,level:0,responseType:"text",type:se.PlaylistContextType.MANIFEST,url:P.url,deliveryDirectives:null})},R.onLevelLoading=function(A,P){this.load({id:P.id,groupId:null,level:P.level,responseType:"text",type:se.PlaylistContextType.LEVEL,url:P.url,deliveryDirectives:P.deliveryDirectives})},R.onAudioTrackLoading=function(A,P){this.load({id:P.id,groupId:P.groupId,level:null,responseType:"text",type:se.PlaylistContextType.AUDIO_TRACK,url:P.url,deliveryDirectives:P.deliveryDirectives})},R.onSubtitleTrackLoading=function(A,P){this.load({id:P.id,groupId:P.groupId,level:null,responseType:"text",type:se.PlaylistContextType.SUBTITLE_TRACK,url:P.url,deliveryDirectives:P.deliveryDirectives})},R.load=function(A){var P,U,Y,B,q,W,I=this.hls.config,H=this.getInternalLoader(A);if(H){var Z=H.context;if(Z&&Z.url===A.url)return void S.logger.trace("[playlist-loader]: playlist request ongoing");S.logger.log("[playlist-loader]: aborting previous loader for type: "+A.type),H.abort()}switch(A.type){case se.PlaylistContextType.MANIFEST:U=I.manifestLoadingMaxRetry,Y=I.manifestLoadingTimeOut,B=I.manifestLoadingRetryDelay,q=I.manifestLoadingMaxRetryTimeout;break;case se.PlaylistContextType.LEVEL:case se.PlaylistContextType.AUDIO_TRACK:case se.PlaylistContextType.SUBTITLE_TRACK:U=0,Y=I.levelLoadingTimeOut;break;default:U=I.levelLoadingMaxRetry,Y=I.levelLoadingTimeOut,B=I.levelLoadingRetryDelay,q=I.levelLoadingMaxRetryTimeout}if(H=this.createInternalLoader(A),null!==(P=A.deliveryDirectives)&&void 0!==P&&P.part&&(A.type===se.PlaylistContextType.LEVEL&&null!==A.level?W=this.hls.levels[A.level].details:A.type===se.PlaylistContextType.AUDIO_TRACK&&null!==A.id?W=this.hls.audioTracks[A.id].details:A.type===se.PlaylistContextType.SUBTITLE_TRACK&&null!==A.id&&(W=this.hls.subtitleTracks[A.id].details),W)){var L=W.partTarget,D=W.targetduration;L&&D&&(Y=Math.min(1e3*Math.max(3*L,.8*D),Y))}var F={timeout:Y,maxRetry:U,retryDelay:B,maxRetryDelay:q,highWaterMark:0},$={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};H.load(A,F,$)},R.loadsuccess=function(A,P,I,H){if(void 0===H&&(H=null),I.isSidxRequest)return this.handleSidxRequest(A,I),void this.handlePlaylistLoaded(A,P,I,H);this.resetInternalLoader(I.type);var Z=A.data;0===Z.indexOf("#EXTM3U")?(P.parsing.start=performance.now(),Z.indexOf("#EXTINF:")>0||Z.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(A,P,I,H):this.handleMasterPlaylist(A,P,I,H)):this.handleManifestParsingError(A,I,"no EXTM3U delimiter",H)},R.loaderror=function(A,P,I){void 0===I&&(I=null),this.handleNetworkError(P,I,!1,A)},R.loadtimeout=function(A,P,I){void 0===I&&(I=null),this.handleNetworkError(P,I,!0)},R.handleMasterPlaylist=function(A,P,I,H){var Z=this.hls,U=A.data,Y=ne(A,I),B=he.default.parseMasterPlaylist(U,Y),q=B.levels,W=B.sessionData;if(q.length){var L=q.map(function(be){return{id:be.attrs.AUDIO,audioCodec:be.audioCodec}}),D=q.map(function(be){return{id:be.attrs.SUBTITLES,textCodec:be.textCodec}}),F=he.default.parseMasterPlaylistMedia(U,Y,"AUDIO",L),$=he.default.parseMasterPlaylistMedia(U,Y,"SUBTITLES",D),oe=he.default.parseMasterPlaylistMedia(U,Y,"CLOSED-CAPTIONS");F.length&&!F.some(function(be){return!be.url})&&q[0].audioCodec&&!q[0].attrs.AUDIO&&(S.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),F.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new k.AttrList({}),bitrate:0,url:""})),Z.trigger(ee.Events.MANIFEST_LOADED,{levels:q,audioTracks:F,subtitles:$,captions:oe,url:Y,stats:P,networkDetails:H,sessionData:W})}else this.handleManifestParsingError(A,I,"no level found in manifest",H)},R.handleTrackOrLevelPlaylist=function(A,P,I,H){var Z=this.hls,U=I.id,Y=I.level,B=I.type,q=ne(A,I),W=Object(O.isFiniteNumber)(U)?U:0,L=Object(O.isFiniteNumber)(Y)?Y:W,D=function K(re){switch(re.type){case se.PlaylistContextType.AUDIO_TRACK:return se.PlaylistLevelType.AUDIO;case se.PlaylistContextType.SUBTITLE_TRACK:return se.PlaylistLevelType.SUBTITLE;default:return se.PlaylistLevelType.MAIN}}(I),F=he.default.parseLevelPlaylist(A.data,q,L,D,W);if(F.fragments.length){if(B===se.PlaylistContextType.MANIFEST){var $={attrs:new k.AttrList({}),bitrate:0,details:F,name:"",url:q};Z.trigger(ee.Events.MANIFEST_LOADED,{levels:[$],audioTracks:[],url:q,stats:P,networkDetails:H,sessionData:null})}if(P.parsing.end=performance.now(),F.needSidxRanges){var oe,M=null===(oe=F.fragments[0].initSegment)||void 0===oe?void 0:oe.url;this.load({url:M,isSidxRequest:!0,type:B,level:Y,levelDetails:F,id:U,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null})}else I.levelDetails=F,this.handlePlaylistLoaded(A,P,I,H)}else Z.trigger(ee.Events.ERROR,{type:j.ErrorTypes.NETWORK_ERROR,details:j.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:q,reason:"no fragments found in level",level:"number"==typeof I.level?I.level:void 0})},R.handleSidxRequest=function(A,P){var I=Object(fe.parseSegmentIndex)(new Uint8Array(A.data));if(I){var Z=P.levelDetails;I.references.forEach(function(U,Y){var B=U.info,q=Z.fragments[Y];0===q.byteRange.length&&q.setByteRange(String(1+B.end-B.start)+"@"+String(B.start)),q.initSegment&&q.initSegment.setByteRange(String(I.moovEndOffset)+"@0")})}},R.handleManifestParsingError=function(A,P,I,H){this.hls.trigger(ee.Events.ERROR,{type:j.ErrorTypes.NETWORK_ERROR,details:j.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:P.type===se.PlaylistContextType.MANIFEST,url:A.url,reason:I,response:A,context:P,networkDetails:H})},R.handleNetworkError=function(A,P,I,H){void 0===I&&(I=!1),S.logger.warn("[playlist-loader]: A network "+(I?"timeout":"error")+" occurred while loading "+A.type+" level: "+A.level+" id: "+A.id+' group-id: "'+A.groupId+'"');var Z=j.ErrorDetails.UNKNOWN,U=!1,Y=this.getInternalLoader(A);switch(A.type){case se.PlaylistContextType.MANIFEST:Z=I?j.ErrorDetails.MANIFEST_LOAD_TIMEOUT:j.ErrorDetails.MANIFEST_LOAD_ERROR,U=!0;break;case se.PlaylistContextType.LEVEL:Z=I?j.ErrorDetails.LEVEL_LOAD_TIMEOUT:j.ErrorDetails.LEVEL_LOAD_ERROR,U=!1;break;case se.PlaylistContextType.AUDIO_TRACK:Z=I?j.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:j.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,U=!1;break;case se.PlaylistContextType.SUBTITLE_TRACK:Z=I?j.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:j.ErrorDetails.SUBTITLE_LOAD_ERROR,U=!1}Y&&this.resetInternalLoader(A.type);var B={type:j.ErrorTypes.NETWORK_ERROR,details:Z,fatal:U,url:A.url,loader:Y,context:A,networkDetails:P};H&&(B.response=H),this.hls.trigger(ee.Events.ERROR,B)},R.handlePlaylistLoaded=function(A,P,I,H){var Z=I.type,U=I.level,Y=I.id,B=I.groupId,q=I.loader,W=I.levelDetails,L=I.deliveryDirectives;if(null!=W&&W.targetduration){if(q)switch(W.live&&(q.getCacheAge&&(W.ageHeader=q.getCacheAge()||0),(!q.getCacheAge||isNaN(W.ageHeader))&&(W.ageHeader=0)),Z){case se.PlaylistContextType.MANIFEST:case se.PlaylistContextType.LEVEL:this.hls.trigger(ee.Events.LEVEL_LOADED,{details:W,level:U||0,id:Y||0,stats:P,networkDetails:H,deliveryDirectives:L});break;case se.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(ee.Events.AUDIO_TRACK_LOADED,{details:W,id:Y||0,groupId:B||"",stats:P,networkDetails:H,deliveryDirectives:L});break;case se.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(ee.Events.SUBTITLE_TRACK_LOADED,{details:W,id:Y||0,groupId:B||"",stats:P,networkDetails:H,deliveryDirectives:L})}}else this.handleManifestParsingError(A,I,"invalid target duration",H)},re}()},"./src/polyfills/number.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"isFiniteNumber",function(){return O}),e.d(J,"MAX_SAFE_INTEGER",function(){return ee});var O=Number.isFinite||function(j){return"number"==typeof j&&isFinite(j)},ee=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":function(ht,J,e){"use strict";e.r(J),J.default=function(){function ee(){}return ee.getSilentFrame=function(S,fe){if("mp4a.40.2"===S){if(1===fe)return new Uint8Array([0,200,0,128,35,128]);if(2===fe)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===fe)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===fe)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===fe)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===fe)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===fe)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===fe)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===fe)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},ee}()},"./src/remux/mp4-generator.ts":function(ht,J,e){"use strict";e.r(J);var O=Math.pow(2,32)-1,ee=function(){function j(){}return j.init=function(){var fe;for(fe in j.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})j.types.hasOwnProperty(fe)&&(j.types[fe]=[fe.charCodeAt(0),fe.charCodeAt(1),fe.charCodeAt(2),fe.charCodeAt(3)]);var he=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),se=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);j.HDLR_TYPES={video:he,audio:se};var k=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),K=new Uint8Array([0,0,0,0,0,0,0,0]);j.STTS=j.STSC=j.STCO=K,j.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),j.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),j.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),j.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var ne=new Uint8Array([105,115,111,109]),ie=new Uint8Array([97,118,99,49]),re=new Uint8Array([0,0,0,1]);j.FTYP=j.box(j.types.ftyp,ne,re,ne,ie),j.DINF=j.box(j.types.dinf,j.box(j.types.dref,k))},j.box=function(fe){for(var he=8,se=arguments.length,k=new Array(se>1?se-1:0),K=1;K<se;K++)k[K-1]=arguments[K];for(var ne=k.length,ie=ne;ne--;)he+=k[ne].byteLength;var re=new Uint8Array(he);for(re[0]=he>>24&255,re[1]=he>>16&255,re[2]=he>>8&255,re[3]=255&he,re.set(fe,4),ne=0,he=8;ne<ie;ne++)re.set(k[ne],he),he+=k[ne].byteLength;return re},j.hdlr=function(fe){return j.box(j.types.hdlr,j.HDLR_TYPES[fe])},j.mdat=function(fe){return j.box(j.types.mdat,fe)},j.mdhd=function(fe,he){he*=fe;var se=Math.floor(he/(O+1)),k=Math.floor(he%(O+1));return j.box(j.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,fe>>24&255,fe>>16&255,fe>>8&255,255&fe,se>>24,se>>16&255,se>>8&255,255&se,k>>24,k>>16&255,k>>8&255,255&k,85,196,0,0]))},j.mdia=function(fe){return j.box(j.types.mdia,j.mdhd(fe.timescale,fe.duration),j.hdlr(fe.type),j.minf(fe))},j.mfhd=function(fe){return j.box(j.types.mfhd,new Uint8Array([0,0,0,0,fe>>24,fe>>16&255,fe>>8&255,255&fe]))},j.minf=function(fe){return j.box(j.types.minf,"audio"===fe.type?j.box(j.types.smhd,j.SMHD):j.box(j.types.vmhd,j.VMHD),j.DINF,j.stbl(fe))},j.moof=function(fe,he,se){return j.box(j.types.moof,j.mfhd(fe),j.traf(se,he))},j.moov=function(fe){for(var he=fe.length,se=[];he--;)se[he]=j.trak(fe[he]);return j.box.apply(null,[j.types.moov,j.mvhd(fe[0].timescale,fe[0].duration)].concat(se).concat(j.mvex(fe)))},j.mvex=function(fe){for(var he=fe.length,se=[];he--;)se[he]=j.trex(fe[he]);return j.box.apply(null,[j.types.mvex].concat(se))},j.mvhd=function(fe,he){he*=fe;var se=Math.floor(he/(O+1)),k=Math.floor(he%(O+1)),K=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,fe>>24&255,fe>>16&255,fe>>8&255,255&fe,se>>24,se>>16&255,se>>8&255,255&se,k>>24,k>>16&255,k>>8&255,255&k,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return j.box(j.types.mvhd,K)},j.sdtp=function(fe){var k,K,he=fe.samples||[],se=new Uint8Array(4+he.length);for(k=0;k<he.length;k++)se[k+4]=(K=he[k].flags).dependsOn<<4|K.isDependedOn<<2|K.hasRedundancy;return j.box(j.types.sdtp,se)},j.stbl=function(fe){return j.box(j.types.stbl,j.stsd(fe),j.box(j.types.stts,j.STTS),j.box(j.types.stsc,j.STSC),j.box(j.types.stsz,j.STSZ),j.box(j.types.stco,j.STCO))},j.avc1=function(fe){var k,K,ne,he=[],se=[];for(k=0;k<fe.sps.length;k++)he.push((ne=(K=fe.sps[k]).byteLength)>>>8&255),he.push(255&ne),he=he.concat(Array.prototype.slice.call(K));for(k=0;k<fe.pps.length;k++)se.push((ne=(K=fe.pps[k]).byteLength)>>>8&255),se.push(255&ne),se=se.concat(Array.prototype.slice.call(K));var ie=j.box(j.types.avcC,new Uint8Array([1,he[3],he[4],he[5],255,224|fe.sps.length].concat(he).concat([fe.pps.length]).concat(se))),re=fe.width,R=fe.height,V=fe.pixelRatio[0],A=fe.pixelRatio[1];return j.box(j.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,re>>8&255,255&re,R>>8&255,255&R,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),ie,j.box(j.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),j.box(j.types.pasp,new Uint8Array([V>>24,V>>16&255,V>>8&255,255&V,A>>24,A>>16&255,A>>8&255,255&A])))},j.esds=function(fe){var he=fe.config.length;return new Uint8Array([0,0,0,0,3,23+he,0,1,0,4,15+he,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([he]).concat(fe.config).concat([6,1,2]))},j.mp4a=function(fe){var he=fe.samplerate;return j.box(j.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,fe.channelCount,0,16,0,0,0,0,he>>8&255,255&he,0,0]),j.box(j.types.esds,j.esds(fe)))},j.mp3=function(fe){var he=fe.samplerate;return j.box(j.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,fe.channelCount,0,16,0,0,0,0,he>>8&255,255&he,0,0]))},j.stsd=function(fe){return j.box(j.types.stsd,j.STSD,"audio"===fe.type?fe.isAAC||"mp3"!==fe.codec?j.mp4a(fe):j.mp3(fe):j.avc1(fe))},j.tkhd=function(fe){var he=fe.id,se=fe.duration*fe.timescale,k=fe.width,K=fe.height,ne=Math.floor(se/(O+1)),ie=Math.floor(se%(O+1));return j.box(j.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,he>>24&255,he>>16&255,he>>8&255,255&he,0,0,0,0,ne>>24,ne>>16&255,ne>>8&255,255&ne,ie>>24,ie>>16&255,ie>>8&255,255&ie,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,k>>8&255,255&k,0,0,K>>8&255,255&K,0,0]))},j.traf=function(fe,he){var se=j.sdtp(fe),k=fe.id,K=Math.floor(he/(O+1)),ne=Math.floor(he%(O+1));return j.box(j.types.traf,j.box(j.types.tfhd,new Uint8Array([0,0,0,0,k>>24,k>>16&255,k>>8&255,255&k])),j.box(j.types.tfdt,new Uint8Array([1,0,0,0,K>>24,K>>16&255,K>>8&255,255&K,ne>>24,ne>>16&255,ne>>8&255,255&ne])),j.trun(fe,se.length+16+20+8+16+8+8),se)},j.trak=function(fe){return fe.duration=fe.duration||4294967295,j.box(j.types.trak,j.tkhd(fe),j.mdia(fe))},j.trex=function(fe){var he=fe.id;return j.box(j.types.trex,new Uint8Array([0,0,0,0,he>>24,he>>16&255,he>>8&255,255&he,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},j.trun=function(fe,he){var ie,re,R,V,A,P,se=fe.samples||[],k=se.length,K=12+16*k,ne=new Uint8Array(K);for(ne.set([0,0,15,1,k>>>24&255,k>>>16&255,k>>>8&255,255&k,(he+=8+K)>>>24&255,he>>>16&255,he>>>8&255,255&he],0),ie=0;ie<k;ie++)ne.set([(R=(re=se[ie]).duration)>>>24&255,R>>>16&255,R>>>8&255,255&R,(V=re.size)>>>24&255,V>>>16&255,V>>>8&255,255&V,(A=re.flags).isLeading<<2|A.dependsOn,A.isDependedOn<<6|A.hasRedundancy<<4|A.paddingValue<<1|A.isNonSync,61440&A.degradPrio,15&A.degradPrio,(P=re.cts)>>>24&255,P>>>16&255,P>>>8&255,255&P],12+16*ie);return j.box(j.types.trun,ne)},j.initSegment=function(fe){j.types||j.init();var he=j.moov(fe),se=new Uint8Array(j.FTYP.byteLength+he.byteLength);return se.set(j.FTYP),se.set(he,j.FTYP.byteLength),se},j}();ee.types=void 0,ee.HDLR_TYPES=void 0,ee.STTS=void 0,ee.STSC=void 0,ee.STCO=void 0,ee.STSZ=void 0,ee.VMHD=void 0,ee.SMHD=void 0,ee.STSD=void 0,ee.FTYP=void 0,ee.DINF=void 0,J.default=ee},"./src/remux/mp4-remuxer.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"default",function(){return P}),e.d(J,"normalizePts",function(){return I});var O=e("./src/polyfills/number.ts"),ee=e("./src/remux/aac-helper.ts"),j=e("./src/remux/mp4-generator.ts"),S=e("./src/events.ts"),fe=e("./src/errors.ts"),he=e("./src/utils/logger.ts"),se=e("./src/types/loader.ts"),k=e("./src/utils/timescale-conversion.ts");function K(){return K=Object.assign||function(Y){for(var B=1;B<arguments.length;B++){var q=arguments[B];for(var W in q)Object.prototype.hasOwnProperty.call(q,W)&&(Y[W]=q[W])}return Y},K.apply(this,arguments)}var R=null,V=null,A=!1,P=function(){function Y(q,W,L,D){if(void 0===D&&(D=""),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=q,this.config=W,this.typeSupported=L,this.ISGenerated=!1,null===R){var $=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);R=$?parseInt($[1]):0}if(null===V){var oe=navigator.userAgent.match(/Safari\/(\d+)/i);V=oe?parseInt(oe[1]):0}A=!!R&&R<75||!!V&&V<600}var B=Y.prototype;return B.destroy=function(){},B.resetTimeStamp=function(W){he.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=W},B.resetNextTimestamp=function(){he.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},B.resetInitSegment=function(){he.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},B.getVideoStartPts=function(W){var L=!1,D=W.reduce(function(F,$){var oe=$.pts-F;return oe<-4294967296?(L=!0,I(F,$.pts)):oe>0?F:$.pts},W[0].pts);return L&&he.logger.debug("PTS rollover detected"),D},B.remux=function(W,L,D,F,$,oe,M,be){var Me,Ze,Fe,je,Ce,Se,rt=$,ct=$,pt=L.pid>-1,gt=L.samples.length,st=W.samples.length>0,zt=gt>1;if((!(W.pid>-1)||st)&&(!pt||zt)||this.ISGenerated||M){this.ISGenerated||(Fe=this.generateIS(W,L,$));var Wt=this.isVideoContiguous,sn=-1;if(zt&&(sn=function H(Y){for(var B=0;B<Y.length;B++)if(Y[B].key)return B;return-1}(L.samples),!Wt&&this.config.forceKeyFrameOnDiscontinuity))if(Se=!0,sn>0){he.logger.warn("[mp4-remuxer]: Dropped "+sn+" out of "+gt+" video samples due to a missing keyframe");var Vn=this.getVideoStartPts(L.samples);L.samples=L.samples.slice(sn),L.dropped+=sn,ct+=(L.samples[0].pts-Vn)/(L.timescale||9e4)}else-1===sn&&(he.logger.warn("[mp4-remuxer]: No keyframe found out of "+gt+" video samples"),Se=!1);if(this.ISGenerated){if(st&&zt){var wn=this.getVideoStartPts(L.samples),fn=(I(W.samples[0].pts,wn)-wn)/L.inputTimeScale;rt+=Math.max(0,fn),ct+=Math.max(0,-fn)}if(st){if(W.samplerate||(he.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),Fe=this.generateIS(W,L,$)),Ze=this.remuxAudio(W,rt,this.isAudioContiguous,oe,pt||zt||be===se.PlaylistLevelType.AUDIO?ct:void 0),zt){var $n=Ze?Ze.endPTS-Ze.startPTS:0;L.inputTimeScale||(he.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),Fe=this.generateIS(W,L,$)),Me=this.remuxVideo(L,ct,Wt,$n)}}else zt&&(Me=this.remuxVideo(L,ct,Wt,0));Me&&(Me.firstKeyFrame=sn,Me.independent=-1!==sn)}}return this.ISGenerated&&(D.samples.length&&(Ce=this.remuxID3(D,$)),F.samples.length&&(je=this.remuxText(F,$))),{audio:Ze,video:Me,initSegment:Fe,independent:Se,text:je,id3:Ce}},B.generateIS=function(W,L,D){var Ze,Fe,je,F=W.samples,$=L.samples,oe=this.typeSupported,M={},be=!Object(O.isFiniteNumber)(this._initPTS),Me="audio/mp4";if(be&&(Ze=Fe=1/0),W.config&&F.length&&(W.timescale=W.samplerate,W.isAAC||(oe.mpeg?(Me="audio/mpeg",W.codec=""):oe.mp3&&(W.codec="mp3")),M.audio={id:"audio",container:Me,codec:W.codec,initSegment:!W.isAAC&&oe.mpeg?new Uint8Array(0):j.default.initSegment([W]),metadata:{channelCount:W.channelCount}},be&&(je=W.inputTimeScale,Ze=Fe=F[0].pts-Math.round(je*D))),L.sps&&L.pps&&$.length&&(L.timescale=L.inputTimeScale,M.video={id:"main",container:"video/mp4",codec:L.codec,initSegment:j.default.initSegment([L]),metadata:{width:L.width,height:L.height}},be)){je=L.inputTimeScale;var Ce=this.getVideoStartPts($),Se=Math.round(je*D);Fe=Math.min(Fe,I($[0].dts,Ce)-Se),Ze=Math.min(Ze,Ce-Se)}if(Object.keys(M).length)return this.ISGenerated=!0,be&&(this._initPTS=Ze,this._initDTS=Fe),{tracks:M,initPTS:Ze,timescale:je}},B.remuxVideo=function(W,L,D,F){var je,Ce,Se,$=W.inputTimeScale,oe=W.samples,M=[],be=oe.length,Me=this._initPTS,Ze=this.nextAvcDts,Fe=8,rt=Number.POSITIVE_INFINITY,ct=Number.NEGATIVE_INFINITY,Lt=0,pt=!1;D&&null!==Ze||(Ze=L*$-(oe[0].pts-I(oe[0].dts,oe[0].pts)));for(var zt=0;zt<be;zt++){var Pt=oe[zt];if(Pt.pts=I(Pt.pts-Me,Ze),Pt.dts=I(Pt.dts-Me,Ze),Pt.dts>Pt.pts){Lt=Math.max(Math.min(Lt,Pt.pts-Pt.dts),-18e3)}Pt.dts<oe[zt>0?zt-1:zt].dts&&(pt=!0)}pt&&oe.sort(function(qe,yt){return qe.dts-yt.dts||qe.pts-yt.pts}),Ce=oe[0].dts,Se=oe[oe.length-1].dts;var sn=Math.round((Se-Ce)/(be-1));if(Lt<0){if(Lt<-2*sn){he.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+Object(k.toMsFromMpegTsClock)(-sn,!0)+" ms");for(var Vn=Lt,wn=0;wn<be;wn++)oe[wn].dts=Vn=Math.max(Vn,oe[wn].pts-sn),oe[wn].pts=Math.max(Vn,oe[wn].pts)}else{he.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Object(k.toMsFromMpegTsClock)(Lt,!0)+" ms to overcome this issue");for(var qn=0;qn<be;qn++)oe[qn].dts=oe[qn].dts+Lt}Ce=oe[0].dts}if(D){var fn=Ce-Ze,$n=fn>sn;if($n||fn<-1){he.logger.warn($n?"AVC: "+Object(k.toMsFromMpegTsClock)(fn,!0)+" ms ("+fn+"dts) hole between fragments detected, filling it":"AVC: "+Object(k.toMsFromMpegTsClock)(-fn,!0)+" ms ("+fn+"dts) overlapping between fragments detected");var Pn=oe[0].pts-fn;oe[0].dts=Ce=Ze,oe[0].pts=Pn,he.logger.log("Video: First PTS/DTS adjusted: "+Object(k.toMsFromMpegTsClock)(Pn,!0)+"/"+Object(k.toMsFromMpegTsClock)(Ce,!0)+", delta: "+Object(k.toMsFromMpegTsClock)(fn,!0)+" ms")}}A&&(Ce=Math.max(0,Ce));for(var Yn=0,hr=0,vr=0;vr<be;vr++){for(var ir=oe[vr],tn=ir.units,Sr=tn.length,un=0,Sn=0;Sn<Sr;Sn++)un+=tn[Sn].data.length;hr+=un,Yn+=Sr,ir.length=un,ir.dts=Math.max(ir.dts,Ce),ir.pts=Math.max(ir.pts,ir.dts,0),rt=Math.min(ir.pts,rt),ct=Math.max(ir.pts,ct)}Se=oe[be-1].dts;var yr,mn=hr+4*Yn+8;try{yr=new Uint8Array(mn)}catch(qe){return void this.observer.emit(S.Events.ERROR,S.Events.ERROR,{type:fe.ErrorTypes.MUX_ERROR,details:fe.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:mn,reason:"fail allocating video mdat "+mn})}var Er=new DataView(yr.buffer);Er.setUint32(0,mn),yr.set(j.default.types.mdat,4);for(var Dn=0;Dn<be;Dn++){for(var Nt=oe[Dn],Zt=Nt.units,dr=0,Ge=0,Dt=Zt.length;Ge<Dt;Ge++){var it=Zt[Ge],Ye=it.data,Ut=it.data.byteLength;Er.setUint32(Fe,Ut),yr.set(Ye,Fe+=4),Fe+=Ut,dr+=4+Ut}if(Dn<be-1)je=oe[Dn+1].dts-Nt.dts;else{var Qt=this.config,zn=Nt.dts-oe[Dn>0?Dn-1:Dn].dts;if(Qt.stretchShortVideoTrack&&null!==this.nextAudioPts){var De=Math.floor(Qt.maxBufferHole*$),_t=(F?rt+F*$:this.nextAudioPts)-Nt.pts;_t>De?((je=_t-zn)<0&&(je=zn),he.logger.log("[mp4-remuxer]: It is approximately "+_t/90+" ms to the next segment; using duration "+je/90+" ms for the last video frame.")):je=zn}else je=zn}var cr=Math.round(Nt.pts-Nt.dts);M.push(new Z(Nt.key,je,dr,cr))}if(M.length&&R&&R<70){var _n=M[0].flags;_n.dependsOn=2,_n.isNonSync=0}console.assert(void 0!==je,"mp4SampleDuration must be computed"),this.nextAvcDts=Ze=Se+je,this.isVideoContiguous=!0;var Pr={data1:j.default.moof(W.sequenceNumber++,Ce,K({},W,{samples:M})),data2:yr,startPTS:rt/$,endPTS:(ct+je)/$,startDTS:Ce/$,endDTS:Ze/$,type:"video",hasAudio:!1,hasVideo:!0,nb:M.length,dropped:W.dropped};return W.samples=[],W.dropped=0,console.assert(yr.length,"MDAT length must not be zero"),Pr},B.remuxAudio=function(W,L,D,F,$){var oe=W.inputTimeScale,be=oe/(W.samplerate?W.samplerate:oe),Me=W.isAAC?1024:1152,Ze=Me*be,Fe=this._initPTS,je=!W.isAAC&&this.typeSupported.mpeg,Ce=[],Se=W.samples,rt=je?0:8,ct=this.nextAudioPts||-1,Lt=L*oe;if(this.isAudioContiguous=D=D||Se.length&&ct>0&&(F&&Math.abs(Lt-ct)<9e3||Math.abs(I(Se[0].pts-Fe,Lt)-ct)<20*Ze),Se.forEach(function(Ye){Ye.pts=I(Ye.pts-Fe,Lt)}),!D||ct<0){if(!(Se=Se.filter(function(Ye){return Ye.pts>=0})).length)return;ct=0===$?0:F?Math.max(0,Lt):Se[0].pts}if(W.isAAC)for(var pt=void 0!==$,gt=this.config.maxAudioFramesDrift,st=0,zt=ct;st<Se.length;st++){var Pt=Se[st],Wt=Pt.pts,sn=Wt-zt,Vn=Math.abs(1e3*sn/oe);if(sn<=-gt*Ze&&pt)0===st&&(he.logger.warn("Audio frame @ "+(Wt/oe).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*sn/oe)+" ms."),this.nextAudioPts=ct=zt=Wt);else if(sn>=gt*Ze&&Vn<1e4&&pt){var wn=Math.round(sn/Ze);(zt=Wt-wn*Ze)<0&&(wn--,zt+=Ze),0===st&&(this.nextAudioPts=ct=zt),he.logger.warn("[mp4-remuxer]: Injecting "+wn+" audio frame @ "+(zt/oe).toFixed(3)+"s due to "+Math.round(1e3*sn/oe)+" ms gap.");for(var qn=0;qn<wn;qn++){var fn=Math.max(zt,0),$n=ee.default.getSilentFrame(W.manifestCodec||W.codec,W.channelCount);$n||(he.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),$n=Pt.unit.subarray()),Se.splice(st,0,{unit:$n,pts:fn}),zt+=Ze,st++}}Pt.pts=zt,zt+=Ze}for(var Yn,ur=null,Pn=null,hr=0,vr=Se.length;vr--;)hr+=Se[vr].unit.byteLength;for(var ir=0,tn=Se.length;ir<tn;ir++){var Sr=Se[ir],un=Sr.unit,Sn=Sr.pts;if(null!==Pn)Ce[ir-1].duration=Math.round((Sn-Pn)/be);else{if(D&&W.isAAC&&(Sn=ct),ur=Sn,!(hr>0))return;hr+=rt;try{Yn=new Uint8Array(hr)}catch(Ye){return void this.observer.emit(S.Events.ERROR,S.Events.ERROR,{type:fe.ErrorTypes.MUX_ERROR,details:fe.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:hr,reason:"fail allocating audio mdat "+hr})}je||(new DataView(Yn.buffer).setUint32(0,hr),Yn.set(j.default.types.mdat,4))}Yn.set(un,rt);var Er=un.byteLength;rt+=Er,Ce.push(new Z(!0,Me,Er,0)),Pn=Sn}var Dn=Ce.length;if(Dn){this.nextAudioPts=ct=Pn+be*Ce[Ce.length-1].duration;var Zt=je?new Uint8Array(0):j.default.moof(W.sequenceNumber++,ur/be,K({},W,{samples:Ce}));W.samples=[];var dr=ur/oe,Ge=ct/oe,it={data1:Zt,data2:Yn,startPTS:dr,endPTS:Ge,startDTS:dr,endDTS:Ge,type:"audio",hasAudio:!0,hasVideo:!1,nb:Dn};return this.isAudioContiguous=!0,console.assert(Yn.length,"MDAT length must not be zero"),it}},B.remuxEmptyAudio=function(W,L,D,F){var $=W.inputTimeScale,be=this.nextAudioPts,Me=(null!==be?be:F.startDTS*$)+this._initDTS,Fe=$/(W.samplerate?W.samplerate:$)*1024,je=Math.ceil((F.endDTS*$+this._initDTS-Me)/Fe),Ce=ee.default.getSilentFrame(W.manifestCodec||W.codec,W.channelCount);if(he.logger.warn("[mp4-remuxer]: remux empty Audio"),Ce){for(var Se=[],rt=0;rt<je;rt++){var ct=Me+rt*Fe;Se.push({unit:Ce,pts:ct,dts:ct})}return W.samples=Se,this.remuxAudio(W,L,D,!1)}he.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},B.remuxID3=function(W,L){var D=W.samples.length;if(D){for(var F=W.inputTimeScale,$=this._initPTS,oe=this._initDTS,M=0;M<D;M++){var be=W.samples[M];be.pts=I(be.pts-$,L*F)/F,be.dts=I(be.dts-oe,L*F)/F}var Me=W.samples;return W.samples=[],{samples:Me}}},B.remuxText=function(W,L){var D=W.samples.length;if(D){for(var F=W.inputTimeScale,$=this._initPTS,oe=0;oe<D;oe++){var M=W.samples[oe];M.pts=I(M.pts-$,L*F)/F}W.samples.sort(function(Me,Ze){return Me.pts-Ze.pts});var be=W.samples;return W.samples=[],{samples:be}}},Y}();function I(Y,B){var q;if(null===B)return Y;for(q=B<Y?-8589934592:8589934592;Math.abs(Y-B)>4294967296;)Y+=q;return Y}var Z=function(B,q,W,L){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=q,this.size=W,this.cts=L,this.flags=new U(B)},U=function(B){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=B?2:1,this.isNonSync=B?0:1}},"./src/remux/passthrough-remuxer.ts":function(ht,J,e){"use strict";e.r(J);var O=e("./src/polyfills/number.ts"),ee=e("./src/utils/mp4-tools.ts"),j=e("./src/loader/fragment.ts"),S=e("./src/utils/logger.ts"),fe=function(){function k(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndDTS=null}var K=k.prototype;return K.destroy=function(){},K.resetTimeStamp=function(ie){this.initPTS=ie,this.lastEndDTS=null},K.resetNextTimestamp=function(){this.lastEndDTS=null},K.resetInitSegment=function(ie,re,R){this.audioCodec=re,this.videoCodec=R,this.generateInitSegment(ie),this.emitInitSegment=!0},K.generateInitSegment=function(ie){var re=this.audioCodec,R=this.videoCodec;if(!ie||!ie.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var V=this.initData=Object(ee.parseInitSegment)(ie);re||(re=se(V.audio,j.ElementaryStreamTypes.AUDIO)),R||(R=se(V.video,j.ElementaryStreamTypes.VIDEO));var A={};V.audio&&V.video?A.audiovideo={container:"video/mp4",codec:re+","+R,initSegment:ie,id:"main"}:V.audio?A.audio={container:"audio/mp4",codec:re,initSegment:ie,id:"audio"}:V.video?A.video={container:"video/mp4",codec:R,initSegment:ie,id:"main"}:S.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=A},K.remux=function(ie,re,R,V,A){var P=this.initPTS,I=this.lastEndDTS,H={audio:void 0,video:void 0,text:V,id3:R,initSegment:void 0};Object(O.isFiniteNumber)(I)||(I=this.lastEndDTS=A||0);var Z=re.samples;if(!Z||!Z.length)return H;var U={initPTS:void 0,timescale:1},Y=this.initData;if((!Y||!Y.length)&&(this.generateInitSegment(Z),Y=this.initData),!Y||!Y.length)return S.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),H;this.emitInitSegment&&(U.tracks=this.initTracks,this.emitInitSegment=!1),Object(O.isFiniteNumber)(P)||(this.initPTS=U.initPTS=P=he(Y,Z,I));var B=Object(ee.getDuration)(Z,Y),q=I,W=B+q;Object(ee.offsetStartDTS)(Y,Z,P),B>0?this.lastEndDTS=W:(S.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var L=!!Y.audio,D=!!Y.video,F="";L&&(F+="audio"),D&&(F+="video");var $={data1:Z,startPTS:q,startDTS:q,endPTS:W,endDTS:W,type:F,hasAudio:L,hasVideo:D,nb:1,dropped:0};return H.audio="audio"===$.type?$:void 0,H.video="audio"!==$.type?$:void 0,H.text=V,H.id3=R,H.initSegment=U,H},k}(),he=function(K,ne,ie){return Object(ee.getStartDTS)(K,ne)-ie};function se(k,K){var ne=null==k?void 0:k.codec;return ne&&ne.length>4?ne:"hvc1"===ne?"hvc1.1.c.L120.90":"av01"===ne?"av01.0.04M.08":"avc1"===ne||K===j.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}J.default=fe},"./src/task-loop.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"default",function(){return O});var O=function(){function ee(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var j=ee.prototype;return j.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},j.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},j.onHandlerDestroyed=function(){},j.hasInterval=function(){return!!this._tickInterval},j.hasNextTick=function(){return!!this._tickTimer},j.setInterval=function(fe){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,fe),!0)},j.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},j.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},j.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},j.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},j.doTick=function(){},ee}()},"./src/types/cmcd.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"CMCDVersion",function(){return O}),e.d(J,"CMCDObjectType",function(){return ee}),e.d(J,"CMCDStreamingFormat",function(){return j}),e.d(J,"CMCDStreamType",function(){return S});var O=1,ee=(()=>{return(fe=ee||(ee={})).MANIFEST="m",fe.AUDIO="a",fe.VIDEO="v",fe.MUXED="av",fe.INIT="i",fe.CAPTION="c",fe.TIMED_TEXT="tt",fe.KEY="k",fe.OTHER="o",ee;var fe})(),j=(()=>{return(fe=j||(j={})).DASH="d",fe.HLS="h",fe.SMOOTH="s",fe.OTHER="o",j;var fe})(),S=(()=>{return(fe=S||(S={})).VOD="v",fe.LIVE="l",S;var fe})()},"./src/types/level.ts":function(ht,J,e){"use strict";function O(se,k){for(var K=0;K<k.length;K++){var ne=k[K];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(se,ne.key,ne)}}e.r(J),e.d(J,"HlsSkip",function(){return j}),e.d(J,"getSkipValue",function(){return S}),e.d(J,"HlsUrlParameters",function(){return fe}),e.d(J,"Level",function(){return he});var j=(()=>{return(se=j||(j={})).No="",se.Yes="YES",se.v2="v2",j;var se})();function S(se,k){var K=se.canSkipUntil;return K&&(void 0!==k?k-se.endSN:0)<K?se.canSkipDateRanges?j.v2:j.Yes:j.No}var fe=function(){function se(K,ne,ie){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=K,this.part=ne,this.skip=ie}return se.prototype.addDirectives=function(ne){var ie=new self.URL(ne);return void 0!==this.msn&&ie.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&ie.searchParams.set("_HLS_part",this.part.toString()),this.skip&&ie.searchParams.set("_HLS_skip",this.skip),ie.toString()},se}(),he=function(){function se(k){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[k.url],this.attrs=k.attrs,this.bitrate=k.bitrate,k.details&&(this.details=k.details),this.id=k.id||0,this.name=k.name,this.width=k.width||0,this.height=k.height||0,this.audioCodec=k.audioCodec,this.videoCodec=k.videoCodec,this.unknownCodecs=k.unknownCodecs,this.codecSet=[k.videoCodec,k.audioCodec].filter(function(K){return K}).join(",").replace(/\.[^.,]+/g,"")}return function ee(se,k,K){return k&&O(se.prototype,k),K&&O(se,K),se}(se,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(K){var ne=K%this.url.length;this._urlId!==ne&&(this.details=void 0,this._urlId=ne)}}]),se}()},"./src/types/loader.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"PlaylistContextType",function(){return O}),e.d(J,"PlaylistLevelType",function(){return ee});var O=(()=>{return(j=O||(O={})).MANIFEST="manifest",j.LEVEL="level",j.AUDIO_TRACK="audioTrack",j.SUBTITLE_TRACK="subtitleTrack",O;var j})(),ee=(()=>{return(j=ee||(ee={})).MAIN="main",j.AUDIO="audio",j.SUBTITLE="subtitle",ee;var j})()},"./src/types/transmuxer.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"ChunkMetadata",function(){return O});var O=function(S,fe,he,se,k,K){void 0===se&&(se=0),void 0===k&&(k=-1),void 0===K&&(K=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=S,this.sn=fe,this.id=he,this.size=se,this.part=k,this.partial=K}},"./src/utils/attr-list.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"AttrList",function(){return j});var O=/^(\d+)x(\d+)$/,ee=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,j=function(){function S(he){for(var se in"string"==typeof he&&(he=S.parseAttrList(he)),he)he.hasOwnProperty(se)&&(this[se]=he[se])}var fe=S.prototype;return fe.decimalInteger=function(se){var k=parseInt(this[se],10);return k>Number.MAX_SAFE_INTEGER?1/0:k},fe.hexadecimalInteger=function(se){if(this[se]){var k=(this[se]||"0x").slice(2);k=(1&k.length?"0":"")+k;for(var K=new Uint8Array(k.length/2),ne=0;ne<k.length/2;ne++)K[ne]=parseInt(k.slice(2*ne,2*ne+2),16);return K}return null},fe.hexadecimalIntegerAsNumber=function(se){var k=parseInt(this[se],16);return k>Number.MAX_SAFE_INTEGER?1/0:k},fe.decimalFloatingPoint=function(se){return parseFloat(this[se])},fe.optionalFloat=function(se,k){var K=this[se];return K?parseFloat(K):k},fe.enumeratedString=function(se){return this[se]},fe.bool=function(se){return"YES"===this[se]},fe.decimalResolution=function(se){var k=O.exec(this[se]);if(null!==k)return{width:parseInt(k[1],10),height:parseInt(k[2],10)}},S.parseAttrList=function(se){var k,K={};for(ee.lastIndex=0;null!==(k=ee.exec(se));){var ie=k[2];0===ie.indexOf('"')&&ie.lastIndexOf('"')===ie.length-1&&(ie=ie.slice(1,-1)),K[k[1]]=ie}return K},S}()},"./src/utils/binary-search.ts":function(ht,J,e){"use strict";e.r(J),J.default={search:function(j,S){for(var fe=0,he=j.length-1,se=null,k=null;fe<=he;){var K=S(k=j[se=(fe+he)/2|0]);if(K>0)fe=se+1;else{if(!(K<0))return k;he=se-1}}return null}}},"./src/utils/buffer-helper.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"BufferHelper",function(){return j});var O=e("./src/utils/logger.ts"),ee={length:0,start:function(){return 0},end:function(){return 0}},j=function(){function S(){}return S.isBuffered=function(he,se){try{if(he)for(var k=S.getBuffered(he),K=0;K<k.length;K++)if(se>=k.start(K)&&se<=k.end(K))return!0}catch(ne){}return!1},S.bufferInfo=function(he,se,k){try{if(he){var ie,K=S.getBuffered(he),ne=[];for(ie=0;ie<K.length;ie++)ne.push({start:K.start(ie),end:K.end(ie)});return this.bufferedInfo(ne,se,k)}}catch(re){}return{len:0,start:se,end:se,nextStart:void 0}},S.bufferedInfo=function(he,se,k){se=Math.max(0,se),he.sort(function(U,Y){return U.start-Y.start||Y.end-U.end});var K=[];if(k)for(var ne=0;ne<he.length;ne++){var ie=K.length;if(ie){var re=K[ie-1].end;he[ne].start-re<k?he[ne].end>re&&(K[ie-1].end=he[ne].end):K.push(he[ne])}else K.push(he[ne])}else K=he;for(var V,R=0,A=se,P=se,I=0;I<K.length;I++){var H=K[I].start,Z=K[I].end;if(se+k>=H&&se<Z)A=H,R=(P=Z)-se;else if(se+k<H){V=H;break}}return{len:R,start:A||0,end:P||0,nextStart:V}},S.getBuffered=function(he){try{return he.buffered}catch(se){return O.logger.log("failed to get media.buffered",se),ee}},S}()},"./src/utils/cea-608-parser.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"Row",function(){return P}),e.d(J,"CaptionScreen",function(){return I});var O=e("./src/utils/logger.ts"),ee={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},j=function(W){var L=W;return ee.hasOwnProperty(W)&&(L=ee[W]),String.fromCharCode(L)},S=15,fe=100,he={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},se={17:2,18:4,21:6,22:8,23:10,19:13,20:15},k={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},K={25:2,26:4,29:6,30:8,31:10,27:13,28:15},ne=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],ie=(()=>{return(q=ie||(ie={}))[q.ERROR=0]="ERROR",q[q.TEXT=1]="TEXT",q[q.WARNING=2]="WARNING",q[q.INFO=2]="INFO",q[q.DEBUG=3]="DEBUG",q[q.DATA=3]="DATA",ie;var q})(),re=function(){function q(){this.time=null,this.verboseLevel=ie.ERROR}return q.prototype.log=function(D,F){this.verboseLevel>=D&&O.logger.log(this.time+" ["+D+"] "+F)},q}(),R=function(W){for(var L=[],D=0;D<W.length;D++)L.push(W[D].toString(16));return L},V=function(){function q(L,D,F,$,oe){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=L||"white",this.underline=D||!1,this.italics=F||!1,this.background=$||"black",this.flash=oe||!1}var W=q.prototype;return W.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},W.setStyles=function(D){for(var F=["foreground","underline","italics","background","flash"],$=0;$<F.length;$++){var oe=F[$];D.hasOwnProperty(oe)&&(this[oe]=D[oe])}},W.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},W.equals=function(D){return this.foreground===D.foreground&&this.underline===D.underline&&this.italics===D.italics&&this.background===D.background&&this.flash===D.flash},W.copy=function(D){this.foreground=D.foreground,this.underline=D.underline,this.italics=D.italics,this.background=D.background,this.flash=D.flash},W.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},q}(),A=function(){function q(L,D,F,$,oe,M){this.uchar=void 0,this.penState=void 0,this.uchar=L||" ",this.penState=new V(D,F,$,oe,M)}var W=q.prototype;return W.reset=function(){this.uchar=" ",this.penState.reset()},W.setChar=function(D,F){this.uchar=D,this.penState.copy(F)},W.setPenState=function(D){this.penState.copy(D)},W.equals=function(D){return this.uchar===D.uchar&&this.penState.equals(D.penState)},W.copy=function(D){this.uchar=D.uchar,this.penState.copy(D.penState)},W.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},q}(),P=function(){function q(L){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var D=0;D<fe;D++)this.chars.push(new A);this.logger=L,this.pos=0,this.currPenState=new V}var W=q.prototype;return W.equals=function(D){for(var F=!0,$=0;$<fe;$++)if(!this.chars[$].equals(D.chars[$])){F=!1;break}return F},W.copy=function(D){for(var F=0;F<fe;F++)this.chars[F].copy(D.chars[F])},W.isEmpty=function(){for(var D=!0,F=0;F<fe;F++)if(!this.chars[F].isEmpty()){D=!1;break}return D},W.setCursor=function(D){this.pos!==D&&(this.pos=D),this.pos<0?(this.logger.log(ie.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>fe&&(this.logger.log(ie.DEBUG,"Too large cursor position "+this.pos),this.pos=fe)},W.moveCursor=function(D){var F=this.pos+D;if(D>1)for(var $=this.pos+1;$<F+1;$++)this.chars[$].setPenState(this.currPenState);this.setCursor(F)},W.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},W.insertChar=function(D){D>=144&&this.backSpace();var F=j(D);this.pos>=fe?this.logger.log(ie.ERROR,"Cannot insert "+D.toString(16)+" ("+F+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(F,this.currPenState),this.moveCursor(1))},W.clearFromPos=function(D){var F;for(F=D;F<fe;F++)this.chars[F].reset()},W.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},W.clearToEndOfRow=function(){this.clearFromPos(this.pos)},W.getTextString=function(){for(var D=[],F=!0,$=0;$<fe;$++){var oe=this.chars[$].uchar;" "!==oe&&(F=!1),D.push(oe)}return F?"":D.join("")},W.setPenStyles=function(D){this.currPenState.setStyles(D),this.chars[this.pos].setPenState(this.currPenState)},q}(),I=function(){function q(L){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var D=0;D<S;D++)this.rows.push(new P(L));this.logger=L,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var W=q.prototype;return W.reset=function(){for(var D=0;D<S;D++)this.rows[D].clear();this.currRow=14},W.equals=function(D){for(var F=!0,$=0;$<S;$++)if(!this.rows[$].equals(D.rows[$])){F=!1;break}return F},W.copy=function(D){for(var F=0;F<S;F++)this.rows[F].copy(D.rows[F])},W.isEmpty=function(){for(var D=!0,F=0;F<S;F++)if(!this.rows[F].isEmpty()){D=!1;break}return D},W.backSpace=function(){this.rows[this.currRow].backSpace()},W.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},W.insertChar=function(D){this.rows[this.currRow].insertChar(D)},W.setPen=function(D){this.rows[this.currRow].setPenStyles(D)},W.moveCursor=function(D){this.rows[this.currRow].moveCursor(D)},W.setCursor=function(D){this.logger.log(ie.INFO,"setCursor: "+D),this.rows[this.currRow].setCursor(D)},W.setPAC=function(D){this.logger.log(ie.INFO,"pacData = "+JSON.stringify(D));var F=D.row-1;if(this.nrRollUpRows&&F<this.nrRollUpRows-1&&(F=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==F){for(var $=0;$<S;$++)this.rows[$].clear();var oe=this.currRow+1-this.nrRollUpRows,M=this.lastOutputScreen;if(M){var be=M.rows[oe].cueStartTime,Me=this.logger.time;if(be&&null!==Me&&be<Me)for(var Ze=0;Ze<this.nrRollUpRows;Ze++)this.rows[F-this.nrRollUpRows+Ze+1].copy(M.rows[oe+Ze])}}this.currRow=F;var Fe=this.rows[this.currRow];if(null!==D.indent){var Ce=Math.max(D.indent-1,0);Fe.setCursor(D.indent),D.color=Fe.chars[Ce].penState.foreground}this.setPen({foreground:D.color,underline:D.underline,italics:D.italics,background:"black",flash:!1})},W.setBkgData=function(D){this.logger.log(ie.INFO,"bkgData = "+JSON.stringify(D)),this.backSpace(),this.setPen(D),this.insertChar(32)},W.setRollUpRows=function(D){this.nrRollUpRows=D},W.rollUp=function(){if(null!==this.nrRollUpRows){this.logger.log(ie.TEXT,this.getDisplayText());var F=this.rows.splice(this.currRow+1-this.nrRollUpRows,1)[0];F.clear(),this.rows.splice(this.currRow,0,F),this.logger.log(ie.INFO,"Rolling up")}else this.logger.log(ie.DEBUG,"roll_up but nrRollUpRows not set yet")},W.getDisplayText=function(D){D=D||!1;for(var F=[],$="",M=0;M<S;M++){var be=this.rows[M].getTextString();be&&F.push(D?"Row "+(M+1)+": '"+be+"'":be.trim())}return F.length>0&&($=D?"["+F.join(" | ")+"]":F.join("\n")),$},W.getTextAndFormat=function(){return this.rows},q}(),H=function(){function q(L,D,F){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=L,this.outputFilter=D,this.mode=null,this.verbose=0,this.displayedMemory=new I(F),this.nonDisplayedMemory=new I(F),this.lastOutputScreen=new I(F),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=F}var W=q.prototype;return W.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},W.getHandler=function(){return this.outputFilter},W.setHandler=function(D){this.outputFilter=D},W.setPAC=function(D){this.writeScreen.setPAC(D)},W.setBkgData=function(D){this.writeScreen.setBkgData(D)},W.setMode=function(D){D!==this.mode&&(this.mode=D,this.logger.log(ie.INFO,"MODE="+D),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=D)},W.insertChars=function(D){for(var F=0;F<D.length;F++)this.writeScreen.insertChar(D[F]);this.logger.log(ie.INFO,(this.writeScreen===this.displayedMemory?"DISP":"NON_DISP")+": "+this.writeScreen.getDisplayText(!0)),("MODE_PAINT-ON"===this.mode||"MODE_ROLL-UP"===this.mode)&&(this.logger.log(ie.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},W.ccRCL=function(){this.logger.log(ie.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},W.ccBS=function(){this.logger.log(ie.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},W.ccAOF=function(){},W.ccAON=function(){},W.ccDER=function(){this.logger.log(ie.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},W.ccRU=function(D){this.logger.log(ie.INFO,"RU("+D+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(D)},W.ccFON=function(){this.logger.log(ie.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},W.ccRDC=function(){this.logger.log(ie.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},W.ccTR=function(){this.logger.log(ie.INFO,"TR"),this.setMode("MODE_TEXT")},W.ccRTD=function(){this.logger.log(ie.INFO,"RTD"),this.setMode("MODE_TEXT")},W.ccEDM=function(){this.logger.log(ie.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},W.ccCR=function(){this.logger.log(ie.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},W.ccENM=function(){this.logger.log(ie.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},W.ccEOC=function(){if(this.logger.log(ie.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var D=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=D,this.writeScreen=this.nonDisplayedMemory,this.logger.log(ie.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},W.ccTO=function(D){this.logger.log(ie.INFO,"TO("+D+") - Tab Offset"),this.writeScreen.moveCursor(D)},W.ccMIDROW=function(D){var F={flash:!1};if(F.underline=D%2==1,F.italics=D>=46,F.italics)F.foreground="white";else{var $=Math.floor(D/2)-16;F.foreground=["white","green","blue","cyan","red","yellow","magenta"][$]}this.logger.log(ie.INFO,"MIDROW: "+JSON.stringify(F)),this.writeScreen.setPen(F)},W.outputDataUpdate=function(D){void 0===D&&(D=!1);var F=this.logger.time;null!==F&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,F,this.lastOutputScreen),D&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:F):this.cueStartTime=F,this.lastOutputScreen.copy(this.displayedMemory))},W.cueSplitAtTime=function(D){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,D,this.displayedMemory),this.cueStartTime=D))},q}();function U(q,W,L){L.a=q,L.b=W}function Y(q,W,L){return L.a===q&&L.b===W}J.default=function(){function q(L,D,F){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var $=new re;this.channels=[null,new H(L,D,$),new H(L+1,F,$)],this.cmdHistory={a:null,b:null},this.logger=$}var W=q.prototype;return W.getHandler=function(D){return this.channels[D].getHandler()},W.setHandler=function(D,F){this.channels[D].setHandler(F)},W.addData=function(D,F){var $,oe,M,be=!1;this.logger.time=D;for(var Me=0;Me<F.length;Me+=2)if(M=127&F[Me+1],0!=(oe=127&F[Me])||0!==M){if(this.logger.log(ie.DATA,"["+R([F[Me],F[Me+1]])+"] -> ("+R([oe,M])+")"),($=this.parseCmd(oe,M))||($=this.parseMidrow(oe,M)),$||($=this.parsePAC(oe,M)),$||($=this.parseBackgroundAttributes(oe,M)),!$&&(be=this.parseChars(oe,M))){var Ze=this.currentChannel;Ze&&Ze>0?this.channels[Ze].insertChars(be):this.logger.log(ie.WARNING,"No channel found yet. TEXT-MODE?")}!$&&!be&&this.logger.log(ie.WARNING,"Couldn't parse cleaned data "+R([oe,M])+" orig: "+R([F[Me],F[Me+1]]))}},W.parseCmd=function(D,F){var $=this.cmdHistory;if(!((20===D||28===D||21===D||29===D)&&F>=32&&F<=47||(23===D||31===D)&&F>=33&&F<=35))return!1;if(Y(D,F,$))return U(null,null,$),this.logger.log(ie.DEBUG,"Repeated command ("+R([D,F])+") is dropped"),!0;var be=20===D||21===D||23===D?1:2,Me=this.channels[be];return 20===D||21===D||28===D||29===D?32===F?Me.ccRCL():33===F?Me.ccBS():34===F?Me.ccAOF():35===F?Me.ccAON():36===F?Me.ccDER():37===F?Me.ccRU(2):38===F?Me.ccRU(3):39===F?Me.ccRU(4):40===F?Me.ccFON():41===F?Me.ccRDC():42===F?Me.ccTR():43===F?Me.ccRTD():44===F?Me.ccEDM():45===F?Me.ccCR():46===F?Me.ccENM():47===F&&Me.ccEOC():Me.ccTO(F-32),U(D,F,$),this.currentChannel=be,!0},W.parseMidrow=function(D,F){var $=0;if((17===D||25===D)&&F>=32&&F<=47){if(($=17===D?1:2)!==this.currentChannel)return this.logger.log(ie.ERROR,"Mismatch channel in midrow parsing"),!1;var oe=this.channels[$];return!!oe&&(oe.ccMIDROW(F),this.logger.log(ie.DEBUG,"MIDROW ("+R([D,F])+")"),!0)}return!1},W.parsePAC=function(D,F){var oe=this.cmdHistory;if(!((D>=17&&D<=23||D>=25&&D<=31)&&F>=64&&F<=127||(16===D||24===D)&&F>=64&&F<=95))return!1;if(Y(D,F,oe))return U(null,null,oe),!0;var Me=D<=23?1:2,Ze=this.channels[Me];return!!Ze&&(Ze.setPAC(this.interpretPAC(F>=64&&F<=95?1===Me?he[D]:k[D]:1===Me?se[D]:K[D],F)),U(D,F,oe),this.currentChannel=Me,!0)},W.interpretPAC=function(D,F){var $,oe={color:null,italics:!1,indent:null,underline:!1,row:D};return oe.underline=1==(1&($=F>95?F-96:F-64)),$<=13?oe.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor($/2)]:$<=15?(oe.italics=!0,oe.color="white"):oe.indent=4*Math.floor(($-16)/2),oe},W.parseChars=function(D,F){var $,be,oe=null,M=null;if(D>=25?($=2,M=D-8):($=1,M=D),M>=17&&M<=19?(this.logger.log(ie.INFO,"Special char '"+j(be=17===M?F+80:18===M?F+112:F+144)+"' in channel "+$),oe=[be]):D>=32&&D<=127&&(oe=0===F?[D]:[D,F]),oe){var Me=R(oe);this.logger.log(ie.DEBUG,"Char codes =  "+Me.join(",")),U(D,F,this.cmdHistory)}return oe},W.parseBackgroundAttributes=function(D,F){if(!((16===D||24===D)&&F>=32&&F<=47||(23===D||31===D)&&F>=45&&F<=47))return!1;var M,be={};return 16===D||24===D?(M=Math.floor((F-32)/2),be.background=ne[M],F%2==1&&(be.background=be.background+"_semi")):45===F?be.background="transparent":(be.foreground="black",47===F&&(be.underline=!0)),this.channels[D<=23?1:2].setBkgData(be),U(D,F,this.cmdHistory),!0},W.reset=function(){for(var D=0;D<Object.keys(this.channels).length;D++){var F=this.channels[D];F&&F.reset()}this.cmdHistory={a:null,b:null}},W.cueSplitAtTime=function(D){for(var F=0;F<this.channels.length;F++){var $=this.channels[F];$&&$.cueSplitAtTime(D)}},q}()},"./src/utils/codecs.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"isCodecType",function(){return ee}),e.d(J,"isCodecSupportedInMp4",function(){return j});var O={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function ee(S,fe){var he=O[fe];return!!he&&!0===he[S.slice(0,4)]}function j(S,fe){return MediaSource.isTypeSupported((fe||"video")+'/mp4;codecs="'+S+'"')}},"./src/utils/cues.ts":function(ht,J,e){"use strict";e.r(J);var O=e("./src/utils/vttparser.ts"),ee=e("./src/utils/webvtt-parser.ts"),j=e("./src/utils/texttrack-utils.ts"),S=/\s/;J.default={newCue:function(se,k,K,ne){for(var re,R,V,A,P,ie=[],I=self.VTTCue||self.TextTrackCue,H=0;H<ne.rows.length;H++)if(V=!0,A=0,P="",!(re=ne.rows[H]).isEmpty()){for(var Z=0;Z<re.chars.length;Z++)S.test(re.chars[Z].uchar)&&V?A++:(P+=re.chars[Z].uchar,V=!1);re.cueStartTime=k,k===K&&(K+=1e-4),A>=16?A--:A++;var U=Object(O.fixLineBreaks)(P.trim()),Y=Object(ee.generateCueId)(k,K,U);(!se||!se.cues||!se.cues.getCueById(Y))&&((R=new I(k,K,U)).id=Y,R.line=H+1,R.align="left",R.position=10+Math.min(80,10*Math.floor(8*A/32)),ie.push(R))}return se&&ie.length&&(ie.sort(function(B,q){return"auto"===B.line||"auto"===q.line?0:B.line>8&&q.line>8?q.line-B.line:B.line-q.line}),ie.forEach(function(B){return Object(j.addCueToTrack)(se,B)})),ie}}},"./src/utils/discontinuities.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"findFirstFragWithCC",function(){return S}),e.d(J,"shouldAlignOnDiscontinuities",function(){return fe}),e.d(J,"findDiscontinuousReferenceFrag",function(){return he}),e.d(J,"adjustSlidingStart",function(){return k}),e.d(J,"alignStream",function(){return K}),e.d(J,"alignPDT",function(){return ie}),e.d(J,"alignFragmentByPDTDelta",function(){return re}),e.d(J,"alignMediaPlaylistByPDT",function(){return R});var O=e("./src/polyfills/number.ts"),ee=e("./src/utils/logger.ts"),j=e("./src/controller/level-helper.ts");function S(V,A){for(var P=null,I=0,H=V.length;I<H;I++){var Z=V[I];if(Z&&Z.cc===A){P=Z;break}}return P}function fe(V,A,P){return!(!A.details||!(P.endCC>P.startCC||V&&V.cc<P.startCC))}function he(V,A){var P=V.fragments,I=A.fragments;if(I.length&&P.length){var H=S(P,I[0].cc);if(H&&(!H||H.startPTS))return H;ee.logger.log("No frag in previous level to align on")}else ee.logger.log("No fragments to align")}function se(V,A){if(V){var P=V.start+A;V.start=V.startPTS=P,V.endPTS=P+V.duration}}function k(V,A){for(var P=A.fragments,I=0,H=P.length;I<H;I++)se(P[I],V);A.fragmentHint&&se(A.fragmentHint,V),A.alignedSliding=!0}function K(V,A,P){!A||(function ne(V,A,P){if(fe(V,P,A)){var I=he(P.details,A);I&&Object(O.isFiniteNumber)(I.start)&&(ee.logger.log("Adjusting PTS using last level due to CC increase within current level "+A.url),k(I.start,A))}}(V,P,A),!P.alignedSliding&&A.details&&ie(P,A.details),!P.alignedSliding&&A.details&&!P.skippedSegments&&Object(j.adjustSliding)(A.details,P))}function ie(V,A){if(A.fragments.length&&V.hasProgramDateTime&&A.hasProgramDateTime){var P=A.fragments[0].programDateTime,I=V.fragments[0].programDateTime,H=(I-P)/1e3+A.fragments[0].start;H&&Object(O.isFiniteNumber)(H)&&(ee.logger.log("Adjusting PTS using programDateTime delta "+(I-P)+"ms, sliding:"+H.toFixed(3)+" "+V.url+" "),k(H,V))}}function re(V,A){var P=V.programDateTime;if(P){var I=(P-A)/1e3;V.start=V.startPTS=I,V.endPTS=I+V.duration}}function R(V,A){if(A.fragments.length&&V.hasProgramDateTime&&A.hasProgramDateTime){var H=A.fragments[0].programDateTime-1e3*A.fragments[0].start;V.fragments.forEach(function(Z){re(Z,H)}),V.fragmentHint&&re(V.fragmentHint,H),V.alignedSliding=!0}}},"./src/utils/ewma-bandwidth-estimator.ts":function(ht,J,e){"use strict";e.r(J);var O=e("./src/utils/ewma.ts");J.default=function(){function j(fe,he,se){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=se,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new O.default(fe),this.fast_=new O.default(he)}var S=j.prototype;return S.update=function(he,se){var k=this.slow_,K=this.fast_;this.slow_.halfLife!==he&&(this.slow_=new O.default(he,k.getEstimate(),k.getTotalWeight())),this.fast_.halfLife!==se&&(this.fast_=new O.default(se,K.getEstimate(),K.getTotalWeight()))},S.sample=function(he,se){var K=(he=Math.max(he,this.minDelayMs_))/1e3,ne=8*se/K;this.fast_.sample(K,ne),this.slow_.sample(K,ne)},S.canEstimate=function(){var he=this.fast_;return he&&he.getTotalWeight()>=this.minWeight_},S.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},S.destroy=function(){},j}()},"./src/utils/ewma.ts":function(ht,J,e){"use strict";e.r(J),J.default=function(){function ee(S,fe,he){void 0===fe&&(fe=0),void 0===he&&(he=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=S,this.alpha_=S?Math.exp(Math.log(.5)/S):0,this.estimate_=fe,this.totalWeight_=he}var j=ee.prototype;return j.sample=function(fe,he){var se=Math.pow(this.alpha_,fe);this.estimate_=he*(1-se)+se*this.estimate_,this.totalWeight_+=fe},j.getTotalWeight=function(){return this.totalWeight_},j.getEstimate=function(){if(this.alpha_){var fe=1-Math.pow(this.alpha_,this.totalWeight_);if(fe)return this.estimate_/fe}return this.estimate_},ee}()},"./src/utils/fetch-loader.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"fetchSupported",function(){return re});var O=e("./src/polyfills/number.ts"),ee=e("./src/loader/load-stats.ts"),j=e("./src/demux/chunk-cache.ts");function fe(I){var H="function"==typeof Map?new Map:void 0;return fe=function(U){if(null===U||!function k(I){return-1!==Function.toString.call(I).indexOf("[native code]")}(U))return U;if("function"!=typeof U)throw new TypeError("Super expression must either be null or a function");if(void 0!==H){if(H.has(U))return H.get(U);H.set(U,Y)}function Y(){return he(U,arguments,ne(this).constructor)}return Y.prototype=Object.create(U.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),K(Y,U)},fe(I)}function he(I,H,Z){return(he=se()?Reflect.construct:function(Y,B,q){var W=[null];W.push.apply(W,B);var D=new(Function.bind.apply(Y,W));return q&&K(D,q.prototype),D}).apply(null,arguments)}function se(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}function K(I,H){return(K=Object.setPrototypeOf||function(U,Y){return U.__proto__=Y,U})(I,H)}function ne(I){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(Z){return Z.__proto__||Object.getPrototypeOf(Z)})(I)}function ie(){return ie=Object.assign||function(I){for(var H=1;H<arguments.length;H++){var Z=arguments[H];for(var U in Z)Object.prototype.hasOwnProperty.call(Z,U)&&(I[U]=Z[U])}return I},ie.apply(this,arguments)}function re(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(I){}return!1}var R=function(){function I(Z){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=Z.fetchSetup||A,this.controller=new self.AbortController,this.stats=new ee.LoadStats}var H=I.prototype;return H.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},H.abortInternal=function(){var U=this.response;(!U||!U.ok)&&(this.stats.aborted=!0,this.controller.abort())},H.abort=function(){var U;this.abortInternal(),null!==(U=this.callbacks)&&void 0!==U&&U.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},H.load=function(U,Y,B){var q=this,W=this.stats;if(W.loading.start)throw new Error("Loader can only be used once.");W.loading.start=self.performance.now();var L=function V(I,H){var Z={method:"GET",mode:"cors",credentials:"same-origin",signal:H,headers:new self.Headers(ie({},I.headers))};return I.rangeEnd&&Z.headers.set("Range","bytes="+I.rangeStart+"-"+String(I.rangeEnd-1)),Z}(U,this.controller.signal),D=B.onProgress,F="arraybuffer"===U.responseType,$=F?"byteLength":"length";this.context=U,this.config=Y,this.callbacks=B,this.request=this.fetchSetup(U,L),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(function(){q.abortInternal(),B.onTimeout(W,U,q.response)},Y.timeout),self.fetch(this.request).then(function(oe){if(q.response=q.loader=oe,!oe.ok)throw new P(oe.statusText||"fetch, bad network response",oe.status,oe);return W.loading.first=Math.max(self.performance.now(),W.loading.start),W.total=parseInt(oe.headers.get("Content-Length")||"0"),D&&Object(O.isFiniteNumber)(Y.highWaterMark)?q.loadProgressively(oe,W,U,Y.highWaterMark,D):F?oe.arrayBuffer():oe.text()}).then(function(oe){var M=q.response;self.clearTimeout(q.requestTimeout),W.loading.end=Math.max(self.performance.now(),W.loading.first),W.loaded=W.total=oe[$];var be={url:M.url,data:oe};D&&!Object(O.isFiniteNumber)(Y.highWaterMark)&&D(W,U,oe,M),B.onSuccess(be,W,U,M)}).catch(function(oe){self.clearTimeout(q.requestTimeout),W.aborted||B.onError({code:oe.code||0,text:oe.message},U,oe.details)})},H.getCacheAge=function(){var U=null;if(this.response){var Y=this.response.headers.get("age");U=Y?parseFloat(Y):null}return U},H.loadProgressively=function(U,Y,B,q,W){void 0===q&&(q=0);var L=new j.default,D=U.body.getReader();return function $(){return D.read().then(function(oe){if(oe.done)return L.dataLength&&W(Y,B,L.flush(),U),Promise.resolve(new ArrayBuffer(0));var M=oe.value,be=M.length;return Y.loaded+=be,be<q||L.dataLength?(L.push(M),L.dataLength>=q&&W(Y,B,L.flush(),U)):W(Y,B,M,U),$()}).catch(function(){return Promise.reject()})}()},I}();function A(I,H){return new self.Request(I.url,H)}var P=function(I){function H(Z,U,Y){var B;return(B=I.call(this,Z)||this).code=void 0,B.details=void 0,B.code=U,B.details=Y,B}return function S(I,H){I.prototype=Object.create(H.prototype),I.prototype.constructor=I,K(I,H)}(H,I),H}(fe(Error));J.default=R},"./src/utils/imsc1-ttml-parser.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"IMSC1_CODEC",function(){return k}),e.d(J,"parseIMSC1",function(){return re});var O=e("./src/utils/mp4-tools.ts"),ee=e("./src/utils/vttparser.ts"),j=e("./src/utils/vttcue.ts"),S=e("./src/demux/id3.ts"),fe=e("./src/utils/timescale-conversion.ts"),he=e("./src/utils/webvtt-parser.ts");function se(){return se=Object.assign||function(q){for(var W=1;W<arguments.length;W++){var L=arguments[W];for(var D in L)Object.prototype.hasOwnProperty.call(L,D)&&(q[D]=L[D])}return q},se.apply(this,arguments)}var k="stpp.ttml.im1t",K=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,ne=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,ie={left:"start",center:"center",right:"end",start:"start",end:"end"};function re(q,W,L,D,F){var $=Object(O.findBox)(new Uint8Array(q),["mdat"]);if(0!==$.length){var oe=$[0],M=Object(S.utf8ArrayToStr)(new Uint8Array(q,oe.start,oe.end-oe.start)),be=Object(fe.toTimescaleFromScale)(W,1,L);try{D(function R(q,W){var F=(new DOMParser).parseFromString(q,"text/xml").getElementsByTagName("tt")[0];if(!F)throw new Error("Invalid ttml");var $={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},oe=Object.keys($).reduce(function(Fe,je){return Fe[je]=F.getAttribute("ttp:"+je)||$[je],Fe},{}),M="preserve"!==F.getAttribute("xml:space"),be=A(V(F,"styling","style")),Me=A(V(F,"layout","region")),Ze=V(F,"body","[begin]");return[].map.call(Ze,function(Fe){var je=P(Fe,M);if(!je||!Fe.hasAttribute("begin"))return null;var Ce=U(Fe.getAttribute("begin"),oe),Se=U(Fe.getAttribute("dur"),oe),rt=U(Fe.getAttribute("end"),oe);if(null===Ce)throw Z(Fe);if(null===rt){if(null===Se)throw Z(Fe);rt=Ce+Se}var ct=new j.default(Ce-W,rt-W,je);ct.id=Object(he.generateCueId)(ct.startTime,ct.endTime,ct.text);var Lt=Me[Fe.getAttribute("region")],pt=be[Fe.getAttribute("style")];ct.position=10,ct.size=80;var gt=function I(q,W){var L="http://www.w3.org/ns/ttml#styling";return["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce(function(F,$){var oe=H(W,L,$)||H(q,L,$);return oe&&(F[$]=oe),F},{})}(Lt,pt),st=gt.textAlign;if(st){var zt=ie[st];zt&&(ct.lineAlign=zt),ct.align=st}return se(ct,gt),ct}).filter(function(Fe){return null!==Fe})}(M,be))}catch(Me){F(Me)}}else F(new Error("Could not parse IMSC1 mdat"))}function V(q,W,L){var D=q.getElementsByTagName(W)[0];return D?[].slice.call(D.querySelectorAll(L)):[]}function A(q){return q.reduce(function(W,L){var D=L.getAttribute("xml:id");return D&&(W[D]=L),W},{})}function P(q,W){return[].slice.call(q.childNodes).reduce(function(L,D,F){var $;return"br"===D.nodeName&&F?L+"\n":null!==($=D.childNodes)&&void 0!==$&&$.length?P(D,W):W?L+D.textContent.trim().replace(/\s+/g," "):L+D.textContent},"")}function H(q,W,L){return q.hasAttributeNS(W,L)?q.getAttributeNS(W,L):null}function Z(q){return new Error("Could not parse ttml timestamp "+q)}function U(q,W){if(!q)return null;var L=Object(ee.parseTimeStamp)(q);return null===L&&(K.test(q)?L=function Y(q,W){var L=K.exec(q);return 3600*(0|L[1])+60*(0|L[2])+(0|L[3])+((0|L[4])+(0|L[5])/W.subFrameRate)/W.frameRate}(q,W):ne.test(q)&&(L=function B(q,W){var L=ne.exec(q),D=Number(L[1]);switch(L[2]){case"h":return 3600*D;case"m":return 60*D;case"ms":return 1e3*D;case"f":return D/W.frameRate;case"t":return D/W.tickRate}return D}(q,W))),L}},"./src/utils/logger.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"enableLogs",function(){return he}),e.d(J,"logger",function(){return se});var O=function(){},ee={trace:O,debug:O,log:O,warn:O,info:O,error:O},j=ee;function S(k){var K=self.console[k];return K?K.bind(self.console,"["+k+"] >"):O}function he(k){if(self.console&&!0===k||"object"==typeof k){!function fe(k){for(var K=arguments.length,ne=new Array(K>1?K-1:0),ie=1;ie<K;ie++)ne[ie-1]=arguments[ie];ne.forEach(function(re){j[re]=k[re]?k[re].bind(k):S(re)})}(k,"debug","log","info","warn","error");try{j.log()}catch(K){j=ee}}else j=ee}var se=ee},"./src/utils/mediakeys-helper.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"KeySystems",function(){return O}),e.d(J,"requestMediaKeySystemAccess",function(){return ee});var O=(()=>{return(j=O||(O={})).WIDEVINE="com.widevine.alpha",j.PLAYREADY="com.microsoft.playready",O;var j})(),ee="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null},"./src/utils/mediasource-helper.ts":function(ht,J,e){"use strict";function O(){return self.MediaSource||self.WebKitMediaSource}e.r(J),e.d(J,"getMediaSource",function(){return O})},"./src/utils/mp4-tools.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"bin2str",function(){return fe}),e.d(J,"readUint16",function(){return he}),e.d(J,"readUint32",function(){return se}),e.d(J,"writeUint32",function(){return k}),e.d(J,"findBox",function(){return K}),e.d(J,"parseSegmentIndex",function(){return ne}),e.d(J,"parseInitSegment",function(){return ie}),e.d(J,"getStartDTS",function(){return re}),e.d(J,"getDuration",function(){return R}),e.d(J,"computeRawDurationFromSamples",function(){return V}),e.d(J,"offsetStartDTS",function(){return A}),e.d(J,"segmentValidRange",function(){return P}),e.d(J,"appendUint8Array",function(){return I});var O=e("./src/utils/typed-array.ts"),ee=e("./src/loader/fragment.ts"),j=Math.pow(2,32)-1,S=[].push;function fe(H){return String.fromCharCode.apply(null,H)}function he(H,Z){"data"in H&&(Z+=H.start,H=H.data);var U=H[Z]<<8|H[Z+1];return U<0?65536+U:U}function se(H,Z){"data"in H&&(Z+=H.start,H=H.data);var U=H[Z]<<24|H[Z+1]<<16|H[Z+2]<<8|H[Z+3];return U<0?4294967296+U:U}function k(H,Z,U){"data"in H&&(Z+=H.start,H=H.data),H[Z]=U>>24,H[Z+1]=U>>16&255,H[Z+2]=U>>8&255,H[Z+3]=255&U}function K(H,Z){var Y,B,q,U=[];if(!Z.length)return U;"data"in H?(Y=H.data,B=H.start,q=H.end):(B=0,q=(Y=H).byteLength);for(var W=B;W<q;){var L=se(Y,W),F=L>1?W+L:q;if(fe(Y.subarray(W+4,W+8))===Z[0])if(1===Z.length)U.push({data:Y,start:W+8,end:F});else{var $=K({data:Y,start:W+8,end:F},Z.slice(1));$.length&&S.apply(U,$)}W=F}return U}function ne(H){var U=K(H,["moov"])[0],Y=U?U.end:null,B=K(H,["sidx"]);if(!B||!B[0])return null;var q=[],W=B[0],L=W.data[0],D=0===L?8:16,F=se(W,D);D+=4;D+=0===L?8:16;var M=W.end+0,be=he(W,D+=2);D+=2;for(var Me=0;Me<be;Me++){var Ze=D,Fe=se(W,Ze);Ze+=4;var je=2147483647&Fe;if(1==(2147483648&Fe)>>>31)return console.warn("SIDX has hierarchical references (not supported)"),null;var Se=se(W,Ze);Ze+=4,q.push({referenceSize:je,subsegmentDuration:Se,info:{duration:Se/F,start:M,end:M+je-1}}),M+=je,D=Ze+=4}return{earliestPresentationTime:0,timescale:F,version:L,referencesCount:be,references:q,moovEndOffset:Y}}function ie(H){for(var Z=[],U=K(H,["moov","trak"]),Y=0;Y<U.length;Y++){var B=U[Y],q=K(B,["tkhd"])[0];if(q){var W=q.data[q.start],L=0===W?12:20,D=se(q,L),F=K(B,["mdia","mdhd"])[0];if(F){var $=se(F,L=0===(W=F.data[F.start])?12:20),oe=K(B,["mdia","hdlr"])[0];if(oe){var M=fe(oe.data.subarray(oe.start+8,oe.start+12)),be={soun:ee.ElementaryStreamTypes.AUDIO,vide:ee.ElementaryStreamTypes.VIDEO}[M];if(be){var Me=K(B,["mdia","minf","stbl","stsd"])[0],Ze=void 0;Me&&(Ze=fe(Me.data.subarray(Me.start+12,Me.start+16))),Z[D]={timescale:$,type:be},Z[be]={timescale:$,id:D,codec:Ze}}}}}}return K(H,["moov","mvex","trex"]).forEach(function(je){var Ce=se(je,4),Se=Z[Ce];Se&&(Se.default={duration:se(je,12),flags:se(je,20)})}),Z}function re(H,Z){return K(Z,["moof","traf"]).reduce(function(U,Y){var B=K(Y,["tfdt"])[0],q=B.data[B.start],W=K(Y,["tfhd"]).reduce(function(L,D){var F=se(D,4),$=H[F];if($){var oe=se(B,4);1===q&&(oe*=Math.pow(2,32),oe+=se(B,8));var be=oe/($.timescale||9e4);if(isFinite(be)&&(null===L||be<L))return be}return L},null);return null!==W&&isFinite(W)&&(null===U||W<U)?W:U},null)||0}function R(H,Z){for(var U=0,Y=0,B=0,q=K(H,["moof","traf"]),W=0;W<q.length;W++){var L=q[W],D=K(L,["tfhd"])[0],$=Z[se(D,4)];if($){var oe=$.default,M=se(D,0)|(null==oe?void 0:oe.flags),be=null==oe?void 0:oe.duration;8&M&&(be=se(D,2&M?12:8));for(var Me=$.timescale||9e4,Ze=K(L,["trun"]),Fe=0;Fe<Ze.length;Fe++)!(U=V(Ze[Fe]))&&be&&(U=be*se(Ze[Fe],4)),$.type===ee.ElementaryStreamTypes.VIDEO?Y+=U/Me:$.type===ee.ElementaryStreamTypes.AUDIO&&(B+=U/Me)}}if(0===Y&&0===B){var Ce=ne(H);if(null!=Ce&&Ce.references)return Ce.references.reduce(function(Se,rt){return Se+rt.info.duration||0},0)}return Y||B}function V(H){var Z=se(H,0),U=8;1&Z&&(U+=4),4&Z&&(U+=4);for(var Y=0,B=se(H,4),q=0;q<B;q++)256&Z&&(Y+=se(H,U),U+=4),512&Z&&(U+=4),1024&Z&&(U+=4),2048&Z&&(U+=4);return Y}function A(H,Z,U){K(Z,["moof","traf"]).forEach(function(Y){K(Y,["tfhd"]).forEach(function(B){var q=se(B,4),W=H[q];if(W){var L=W.timescale||9e4;K(Y,["tfdt"]).forEach(function(D){var F=D.data[D.start],$=se(D,4);if(0===F)k(D,4,$-U*L);else{$*=Math.pow(2,32),$+=se(D,8),$-=U*L,$=Math.max($,0);var oe=Math.floor($/(j+1)),M=Math.floor($%(j+1));k(D,4,oe),k(D,8,M)}})}})})}function P(H){var Z={valid:null,remainder:null},U=K(H,["moof"]);if(!U)return Z;if(U.length<2)return Z.remainder=H,Z;var Y=U[U.length-1];return Z.valid=Object(O.sliceUint8)(H,0,Y.start-8),Z.remainder=Object(O.sliceUint8)(H,Y.start-8),Z}function I(H,Z){var U=new Uint8Array(H.length+Z.length);return U.set(H),U.set(Z,H.length),U}},"./src/utils/output-filter.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"default",function(){return O});var O=function(){function ee(S,fe){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=S,this.trackName=fe}var j=ee.prototype;return j.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},j.newCue=function(fe,he,se){(null===this.startTime||this.startTime>fe)&&(this.startTime=fe),this.endTime=he,this.screen=se,this.timelineController.createCaptionsTrack(this.trackName)},j.reset=function(){this.cueRanges=[],this.startTime=null},ee}()},"./src/utils/texttrack-utils.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"sendAddTrackEvent",function(){return ee}),e.d(J,"addCueToTrack",function(){return j}),e.d(J,"clearCurrentCues",function(){return S}),e.d(J,"removeCuesInRange",function(){return fe}),e.d(J,"getCuesInRange",function(){return se});var O=e("./src/utils/logger.ts");function ee(k,K){var ne;try{ne=new Event("addtrack")}catch(ie){(ne=document.createEvent("Event")).initEvent("addtrack",!1,!1)}ne.track=k,K.dispatchEvent(ne)}function j(k,K){var ne=k.mode;if("disabled"===ne&&(k.mode="hidden"),k.cues&&!k.cues.getCueById(K.id))try{if(k.addCue(K),!k.cues.getCueById(K.id))throw new Error("addCue is failed for: "+K)}catch(re){O.logger.debug("[texttrack-utils]: "+re);var ie=new self.TextTrackCue(K.startTime,K.endTime,K.text);ie.id=K.id,k.addCue(ie)}"disabled"===ne&&(k.mode=ne)}function S(k){var K=k.mode;if("disabled"===K&&(k.mode="hidden"),k.cues)for(var ne=k.cues.length;ne--;)k.removeCue(k.cues[ne]);"disabled"===K&&(k.mode=K)}function fe(k,K,ne){var ie=k.mode;if("disabled"===ie&&(k.mode="hidden"),k.cues&&k.cues.length>0)for(var re=se(k.cues,K,ne),R=0;R<re.length;R++)k.removeCue(re[R]);"disabled"===ie&&(k.mode=ie)}function se(k,K,ne){var ie=[],re=function he(k,K){if(K<k[0].startTime)return 0;var ne=k.length-1;if(K>k[ne].endTime)return-1;for(var ie=0,re=ne;ie<=re;){var R=Math.floor((re+ie)/2);if(K<k[R].startTime)re=R-1;else{if(!(K>k[R].startTime&&ie<ne))return R;ie=R+1}}return k[ie].startTime-K<K-k[re].startTime?ie:re}(k,K);if(re>-1)for(var R=re,V=k.length;R<V;R++){var A=k[R];if(A.startTime>=K&&A.endTime<=ne)ie.push(A);else if(A.startTime>ne)return ie}return ie}},"./src/utils/time-ranges.ts":function(ht,J,e){"use strict";e.r(J),J.default={toString:function(j){for(var S="",fe=j.length,he=0;he<fe;he++)S+="["+j.start(he).toFixed(3)+","+j.end(he).toFixed(3)+"]";return S}}},"./src/utils/timescale-conversion.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"toTimescaleFromBase",function(){return ee}),e.d(J,"toTimescaleFromScale",function(){return j}),e.d(J,"toMsFromMpegTsClock",function(){return S}),e.d(J,"toMpegTsClockFromTimescale",function(){return fe});function ee(he,se,k,K){void 0===k&&(k=1),void 0===K&&(K=!1);var ne=he*se*k;return K?Math.round(ne):ne}function j(he,se,k,K){return void 0===k&&(k=1),void 0===K&&(K=!1),ee(he,se,1/k,K)}function S(he,se){return void 0===se&&(se=!1),ee(he,1e3,1/9e4,se)}function fe(he,se){return void 0===se&&(se=1),ee(he,9e4,1/se)}},"./src/utils/typed-array.ts":function(ht,J,e){"use strict";function O(ee,j,S){return Uint8Array.prototype.slice?ee.slice(j,S):new Uint8Array(Array.prototype.slice.call(ee,j,S))}e.r(J),e.d(J,"sliceUint8",function(){return O})},"./src/utils/vttcue.ts":function(ht,J,e){"use strict";e.r(J),J.default=function(){if("undefined"!=typeof self&&self.VTTCue)return self.VTTCue;var O=["","lr","rl"],ee=["start","middle","end","left","right"];function j(k,K){if("string"!=typeof K||!Array.isArray(k))return!1;var ne=K.toLowerCase();return!!~k.indexOf(ne)&&ne}function fe(k){return j(ee,k)}function he(k){for(var K=arguments.length,ne=new Array(K>1?K-1:0),ie=1;ie<K;ie++)ne[ie-1]=arguments[ie];for(var re=1;re<arguments.length;re++){var R=arguments[re];for(var V in R)k[V]=R[V]}return k}function se(k,K,ne){var ie=this,re={enumerable:!0};ie.hasBeenReset=!1;var R="",V=!1,A=k,P=K,I=ne,H=null,Z="",U=!0,Y="auto",B="start",q=50,W="middle",L=50,D="middle";Object.defineProperty(ie,"id",he({},re,{get:function(){return R},set:function($){R=""+$}})),Object.defineProperty(ie,"pauseOnExit",he({},re,{get:function(){return V},set:function($){V=!!$}})),Object.defineProperty(ie,"startTime",he({},re,{get:function(){return A},set:function($){if("number"!=typeof $)throw new TypeError("Start time must be set to a number.");A=$,this.hasBeenReset=!0}})),Object.defineProperty(ie,"endTime",he({},re,{get:function(){return P},set:function($){if("number"!=typeof $)throw new TypeError("End time must be set to a number.");P=$,this.hasBeenReset=!0}})),Object.defineProperty(ie,"text",he({},re,{get:function(){return I},set:function($){I=""+$,this.hasBeenReset=!0}})),Object.defineProperty(ie,"region",he({},re,{get:function(){return H},set:function($){H=$,this.hasBeenReset=!0}})),Object.defineProperty(ie,"vertical",he({},re,{get:function(){return Z},set:function($){var oe=function S(k){return j(O,k)}($);if(!1===oe)throw new SyntaxError("An invalid or illegal string was specified.");Z=oe,this.hasBeenReset=!0}})),Object.defineProperty(ie,"snapToLines",he({},re,{get:function(){return U},set:function($){U=!!$,this.hasBeenReset=!0}})),Object.defineProperty(ie,"line",he({},re,{get:function(){return Y},set:function($){if("number"!=typeof $&&"auto"!==$)throw new SyntaxError("An invalid number or illegal string was specified.");Y=$,this.hasBeenReset=!0}})),Object.defineProperty(ie,"lineAlign",he({},re,{get:function(){return B},set:function($){var oe=fe($);if(!oe)throw new SyntaxError("An invalid or illegal string was specified.");B=oe,this.hasBeenReset=!0}})),Object.defineProperty(ie,"position",he({},re,{get:function(){return q},set:function($){if($<0||$>100)throw new Error("Position must be between 0 and 100.");q=$,this.hasBeenReset=!0}})),Object.defineProperty(ie,"positionAlign",he({},re,{get:function(){return W},set:function($){var oe=fe($);if(!oe)throw new SyntaxError("An invalid or illegal string was specified.");W=oe,this.hasBeenReset=!0}})),Object.defineProperty(ie,"size",he({},re,{get:function(){return L},set:function($){if($<0||$>100)throw new Error("Size must be between 0 and 100.");L=$,this.hasBeenReset=!0}})),Object.defineProperty(ie,"align",he({},re,{get:function(){return D},set:function($){var oe=fe($);if(!oe)throw new SyntaxError("An invalid or illegal string was specified.");D=oe,this.hasBeenReset=!0}})),ie.displayState=void 0}return se.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},se}()},"./src/utils/vttparser.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"parseTimeStamp",function(){return j}),e.d(J,"fixLineBreaks",function(){return K}),e.d(J,"VTTParser",function(){return ne});var O=e("./src/utils/vttcue.ts"),ee=function(){function ie(){}return ie.prototype.decode=function(V,A){if(!V)return"";if("string"!=typeof V)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(V))},ie}();function j(ie){function re(V,A,P,I){return 3600*(0|V)+60*(0|A)+(0|P)+parseFloat(I||0)}var R=ie.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return R?parseFloat(R[2])>59?re(R[2],R[3],0,R[4]):re(R[1],R[2],R[3],R[4]):null}var S=function(){function ie(){this.values=Object.create(null)}var re=ie.prototype;return re.set=function(V,A){!this.get(V)&&""!==A&&(this.values[V]=A)},re.get=function(V,A,P){return P?this.has(V)?this.values[V]:A[P]:this.has(V)?this.values[V]:A},re.has=function(V){return V in this.values},re.alt=function(V,A,P){for(var I=0;I<P.length;++I)if(A===P[I]){this.set(V,A);break}},re.integer=function(V,A){/^-?\d+$/.test(A)&&this.set(V,parseInt(A,10))},re.percent=function(V,A){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(A)){var P=parseFloat(A);if(P>=0&&P<=100)return this.set(V,P),!0}return!1},ie}();function fe(ie,re,R,V){var A=V?ie.split(V):[ie];for(var P in A)if("string"==typeof A[P]){var I=A[P].split(R);2===I.length&&re(I[0],I[1])}}var he=new O.default(0,0,""),se="middle"===he.align?"middle":"center";function k(ie,re,R){var V=ie;function A(){var H=j(ie);if(null===H)throw new Error("Malformed timestamp: "+V);return ie=ie.replace(/^[^\sa-zA-Z-]+/,""),H}function I(){ie=ie.replace(/^\s+/,"")}if(I(),re.startTime=A(),I(),"--\x3e"!==ie.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+V);ie=ie.substr(3),I(),re.endTime=A(),I(),function P(H,Z){var U=new S;fe(H,function(q,W){var L;switch(q){case"region":for(var D=R.length-1;D>=0;D--)if(R[D].id===W){U.set(q,R[D].region);break}break;case"vertical":U.alt(q,W,["rl","lr"]);break;case"line":L=W.split(","),U.integer(q,L[0]),U.percent(q,L[0])&&U.set("snapToLines",!1),U.alt(q,L[0],["auto"]),2===L.length&&U.alt("lineAlign",L[1],["start",se,"end"]);break;case"position":L=W.split(","),U.percent(q,L[0]),2===L.length&&U.alt("positionAlign",L[1],["start",se,"end","line-left","line-right","auto"]);break;case"size":U.percent(q,W);break;case"align":U.alt(q,W,["start",se,"end","left","right"])}},/:/,/\s/),Z.region=U.get("region",null),Z.vertical=U.get("vertical","");var Y=U.get("line","auto");"auto"===Y&&-1===he.line&&(Y=-1),Z.line=Y,Z.lineAlign=U.get("lineAlign","start"),Z.snapToLines=U.get("snapToLines",!0),Z.size=U.get("size",100),Z.align=U.get("align",se);var B=U.get("position","auto");"auto"===B&&50===he.position&&(B="start"===Z.align||"left"===Z.align?0:"end"===Z.align||"right"===Z.align?100:50),Z.position=B}(ie,re)}function K(ie){return ie.replace(/<br(?: \/)?>/gi,"\n")}var ne=function(){function ie(){this.state="INITIAL",this.buffer="",this.decoder=new ee,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var re=ie.prototype;return re.parse=function(V){var A=this;function P(){var B=A.buffer,q=0;for(B=K(B);q<B.length&&"\r"!==B[q]&&"\n"!==B[q];)++q;var W=B.substr(0,q);return"\r"===B[q]&&++q,"\n"===B[q]&&++q,A.buffer=B.substr(q),W}V&&(A.buffer+=A.decoder.decode(V,{stream:!0}));try{var H="";if("INITIAL"===A.state){if(!/\r\n|\n/.test(A.buffer))return this;var Z=(H=P()).match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(!Z||!Z[0])throw new Error("Malformed WebVTT signature.");A.state="HEADER"}for(var U=!1;A.buffer;){if(!/\r\n|\n/.test(A.buffer))return this;switch(U?U=!1:H=P(),A.state){case"HEADER":/:/.test(H)?fe(H,function(q,W){},/:/):H||(A.state="ID");continue;case"NOTE":H||(A.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(H)){A.state="NOTE";break}if(!H)continue;if(A.cue=new O.default(0,0,""),A.state="CUE",-1===H.indexOf("--\x3e")){A.cue.id=H;continue}case"CUE":if(!A.cue){A.state="BADCUE";continue}try{k(H,A.cue,A.regionList)}catch(B){A.cue=null,A.state="BADCUE";continue}A.state="CUETEXT";continue;case"CUETEXT":var Y=-1!==H.indexOf("--\x3e");if(!H||Y&&(U=!0)){A.oncue&&A.cue&&A.oncue(A.cue),A.cue=null,A.state="ID";continue}if(null===A.cue)continue;A.cue.text&&(A.cue.text+="\n"),A.cue.text+=H;continue;case"BADCUE":H||(A.state="ID")}}}catch(B){"CUETEXT"===A.state&&A.cue&&A.oncue&&A.oncue(A.cue),A.cue=null,A.state="INITIAL"===A.state?"BADWEBVTT":"BADCUE"}return this},re.flush=function(){var V=this;try{if((V.cue||"HEADER"===V.state)&&(V.buffer+="\n\n",V.parse()),"INITIAL"===V.state||"BADWEBVTT"===V.state)throw new Error("Malformed WebVTT signature.")}catch(A){V.onparsingerror&&V.onparsingerror(A)}return V.onflush&&V.onflush(),this},ie}()},"./src/utils/webvtt-parser.ts":function(ht,J,e){"use strict";e.r(J),e.d(J,"generateCueId",function(){return ne}),e.d(J,"parseWebVTT",function(){return re});var O=e("./src/polyfills/number.ts"),ee=e("./src/utils/vttparser.ts"),j=e("./src/demux/id3.ts"),S=e("./src/utils/timescale-conversion.ts"),fe=e("./src/remux/mp4-remuxer.ts"),he=/\r\n|\n\r|\n|\r/g,se=function(V,A,P){return void 0===P&&(P=0),V.substr(P,A.length)===A},K=function(V){for(var A=5381,P=V.length;P;)A=33*A^V.charCodeAt(--P);return(A>>>0).toString()};function ne(R,V,A){return K(R.toString())+K(V.toString())+K(A)}function re(R,V,A,P,I,H,Z,U){var $,Y=new ee.VTTParser,B=Object(j.utf8ArrayToStr)(new Uint8Array(R)).trim().replace(he,"\n").split("\n"),q=[],W=Object(S.toMpegTsClockFromTimescale)(V,A),L="00:00.000",D=0,F=0,oe=!0,M=!1;Y.oncue=function(be){var Me=P[I],Ze=P.ccOffset,Fe=(D-W)/9e4;if(null!=Me&&Me.new&&(void 0!==F?Ze=P.ccOffset=Me.start:function(V,A,P){var I=V[A],H=V[I.prevCC];if(!H||!H.new&&I.new)return V.ccOffset=V.presentationOffset=I.start,void(I.new=!1);for(;null!==(Z=H)&&void 0!==Z&&Z.new;){var Z;V.ccOffset+=I.start-H.start,I.new=!1,H=V[(I=H).prevCC]}V.presentationOffset=P}(P,I,Fe)),Fe&&(Ze=Fe-P.presentationOffset),M){var je=be.endTime-be.startTime,Ce=Object(fe.normalizePts)(9e4*(be.startTime+Ze-F),9e4*H)/9e4;be.startTime=Ce,be.endTime=Ce+je}var Se=be.text.trim();be.text=decodeURIComponent(encodeURIComponent(Se)),be.id||(be.id=ne(be.startTime,be.endTime,Se)),be.endTime>0&&q.push(be)},Y.onparsingerror=function(be){$=be},Y.onflush=function(){$?U($):Z(q)},B.forEach(function(be){if(oe){if(se(be,"X-TIMESTAMP-MAP=")){oe=!1,M=!0,be.substr(16).split(",").forEach(function(Me){se(Me,"LOCAL:")?L=Me.substr(6):se(Me,"MPEGTS:")&&(D=parseInt(Me.substr(7)))});try{F=function(V){var A=parseInt(V.substr(-3)),P=parseInt(V.substr(-6,2)),I=parseInt(V.substr(-9,2)),H=V.length>9?parseInt(V.substr(0,V.indexOf(":"))):0;if(!(Object(O.isFiniteNumber)(A)&&Object(O.isFiniteNumber)(P)&&Object(O.isFiniteNumber)(I)&&Object(O.isFiniteNumber)(H)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+V);return A+=1e3*P,(A+=6e4*I)+36e5*H}(L)/1e3}catch(Me){M=!1,$=Me}return}""===be&&(oe=!1)}Y.parse(be+"\n")}),Y.flush()}},"./src/utils/xhr-loader.ts":function(ht,J,e){"use strict";e.r(J);var O=e("./src/utils/logger.ts"),ee=e("./src/loader/load-stats.ts"),j=/^age:\s*[\d.]+\s*$/m;J.default=function(){function fe(se){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=se?se.xhrSetup:null,this.stats=new ee.LoadStats,this.retryDelay=0}var he=fe.prototype;return he.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},he.abortInternal=function(){var k=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),k&&(k.onreadystatechange=null,k.onprogress=null,4!==k.readyState&&(this.stats.aborted=!0,k.abort()))},he.abort=function(){var k;this.abortInternal(),null!==(k=this.callbacks)&&void 0!==k&&k.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},he.load=function(k,K,ne){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=k,this.config=K,this.callbacks=ne,this.retryDelay=K.retryDelay,this.loadInternal()},he.loadInternal=function(){var k=this.config,K=this.context;if(k){var ne=this.loader=new self.XMLHttpRequest,ie=this.stats;ie.loading.first=0,ie.loaded=0;var re=this.xhrSetup;try{if(re)try{re(ne,K.url)}catch(A){ne.open("GET",K.url,!0),re(ne,K.url)}ne.readyState||ne.open("GET",K.url,!0);var R=this.context.headers;if(R)for(var V in R)ne.setRequestHeader(V,R[V])}catch(A){return void this.callbacks.onError({code:ne.status,text:A.message},K,ne)}K.rangeEnd&&ne.setRequestHeader("Range","bytes="+K.rangeStart+"-"+(K.rangeEnd-1)),ne.onreadystatechange=this.readystatechange.bind(this),ne.onprogress=this.loadprogress.bind(this),ne.responseType=K.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),k.timeout),ne.send()}},he.readystatechange=function(){var k=this.context,K=this.loader,ne=this.stats;if(k&&K){var ie=K.readyState,re=this.config;if(!ne.aborted&&ie>=2)if(self.clearTimeout(this.requestTimeout),0===ne.loading.first&&(ne.loading.first=Math.max(self.performance.now(),ne.loading.start)),4===ie){K.onreadystatechange=null,K.onprogress=null;var R=K.status;if(R>=200&&R<300){var V,A;if(ne.loading.end=Math.max(self.performance.now(),ne.loading.first),A="arraybuffer"===k.responseType?(V=K.response).byteLength:(V=K.responseText).length,ne.loaded=ne.total=A,!this.callbacks)return;var P=this.callbacks.onProgress;if(P&&P(ne,k,V,K),!this.callbacks)return;this.callbacks.onSuccess({url:K.responseURL,data:V},ne,k,K)}else ne.retry>=re.maxRetry||R>=400&&R<499?(O.logger.error(R+" while loading "+k.url),this.callbacks.onError({code:R,text:K.statusText},k,K)):(O.logger.warn(R+" while loading "+k.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,re.maxRetryDelay),ne.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),re.timeout)}},he.loadtimeout=function(){O.logger.warn("timeout while loading "+this.context.url);var k=this.callbacks;k&&(this.abortInternal(),k.onTimeout(this.stats,this.context,this.loader))},he.loadprogress=function(k){var K=this.stats;K.loaded=k.loaded,k.lengthComputable&&(K.total=k.total)},he.getCacheAge=function(){var k=null;if(this.loader&&j.test(this.loader.getAllResponseHeaders())){var K=this.loader.getResponseHeader("age");k=K?parseFloat(K):null}return k},fe}()}}).default)},1005:(Gt,ht,J)=>{"use strict";J.d(ht,{g:()=>ie});var e=J(4986),O=J(7272),ee=J(5698),j=J(4482),S=J(5403),fe=J(5032),se=J(9718),k=J(5577);function K(re,R){return R?V=>(0,O.z)(R.pipe((0,ee.q)(1),function he(){return(0,j.e)((re,R)=>{re.subscribe(new S.Q(R,fe.Z))})}()),V.pipe(K(re))):(0,k.z)((V,A)=>re(V,A).pipe((0,ee.q)(1),(0,se.h)(V)))}var ne=J(5963);function ie(re,R=e.z){const V=(0,ne.H)(re,R);return K(()=>V)}},5435:(Gt,ht,J)=>{Gt.exports=J(9822).YAML},8550:(Gt,ht,J)=>{"use strict";J.d(ht,{C:()=>fe,k:()=>he});var e=J(655),O=J(5e3),ee=J(2382);const j=["ref"];function S(se){return se&&se.replace(/\r\n|\r/g,"\n")}let fe=(()=>{class se{constructor(K,ne){this._differs=K,this._ngZone=ne,this.className="",this.name="codemirror",this.autoFocus=!1,this.preserveScrollPosition=!1,this.cursorActivity=new O.vpe,this.focusChange=new O.vpe,this.scroll=new O.vpe,this.drop=new O.vpe,this.value="",this.disabled=!1,this.isFocused=!1,this.onChange=ie=>{},this.onTouched=()=>{}}set options(K){this._options=K,!this._differ&&K&&(this._differ=this._differs.find(K).create())}get codeMirrorGlobal(){return this._codeMirror||(this._codeMirror="undefined"!=typeof CodeMirror?CodeMirror:Promise.resolve().then(J.t.bind(J,8266,19))),this._codeMirror}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>(0,e.mG)(this,void 0,void 0,function*(){const K=yield this.codeMirrorGlobal;this.codeMirror=((null==K?void 0:K.default)?K.default:K).fromTextArea(this.ref.nativeElement,this._options),this.codeMirror.on("cursorActivity",ie=>this._ngZone.run(()=>this.cursorActive(ie))),this.codeMirror.on("scroll",this.scrollChanged.bind(this)),this.codeMirror.on("blur",()=>this._ngZone.run(()=>this.focusChanged(!1))),this.codeMirror.on("focus",()=>this._ngZone.run(()=>this.focusChanged(!0))),this.codeMirror.on("change",(ie,re)=>this._ngZone.run(()=>this.codemirrorValueChanged(ie,re))),this.codeMirror.on("drop",(ie,re)=>{this._ngZone.run(()=>this.dropFiles(ie,re))}),this.codeMirror.setValue(this.value)}))}ngDoCheck(){if(!this._differ)return;const K=this._differ.diff(this._options);K&&(K.forEachChangedItem(ne=>this.setOptionIfChanged(ne.key,ne.currentValue)),K.forEachAddedItem(ne=>this.setOptionIfChanged(ne.key,ne.currentValue)),K.forEachRemovedItem(ne=>this.setOptionIfChanged(ne.key,ne.currentValue)))}ngOnDestroy(){this.codeMirror&&this.codeMirror.toTextArea()}codemirrorValueChanged(K,ne){const ie=K.getValue();this.value!==ie&&(this.value=ie,this.onChange(this.value))}setOptionIfChanged(K,ne){!this.codeMirror||this.codeMirror.setOption(K,ne)}focusChanged(K){this.onTouched(),this.isFocused=K,this.focusChange.emit(K)}scrollChanged(K){this.scroll.emit(K.getScrollInfo())}cursorActive(K){this.cursorActivity.emit(K)}dropFiles(K,ne){this.drop.emit([K,ne])}writeValue(K){if(null==K)return;if(!this.codeMirror)return void(this.value=K);const ne=this.codeMirror.getValue();if(K!==ne&&S(ne)!==S(K))if(this.value=K,this.preserveScrollPosition){const ie=this.codeMirror.getScrollInfo();this.codeMirror.setValue(this.value),this.codeMirror.scrollTo(ie.left,ie.top)}else this.codeMirror.setValue(this.value)}registerOnChange(K){this.onChange=K}registerOnTouched(K){this.onTouched=K}setDisabledState(K){this.disabled=K,this.setOptionIfChanged("readOnly",this.disabled)}}return se.\u0275fac=function(K){return new(K||se)(O.Y36(O.aQg),O.Y36(O.R0b))},se.\u0275cmp=O.Xpm({type:se,selectors:[["ngx-codemirror"]],viewQuery:function(K,ne){if(1&K&&O.Gf(j,5),2&K){let ie;O.iGM(ie=O.CRH())&&(ne.ref=ie.first)}},inputs:{className:"className",name:"name",autoFocus:"autoFocus",options:"options",preserveScrollPosition:"preserveScrollPosition"},outputs:{cursorActivity:"cursorActivity",focusChange:"focusChange",scroll:"scroll",drop:"drop"},features:[O._Bn([{provide:ee.JU,useExisting:(0,O.Gpc)(()=>se),multi:!0}])],decls:3,vars:7,consts:[["autocomplete","off",3,"name","autofocus"],["ref",""]],template:function(K,ne){1&K&&(O.TgZ(0,"textarea",0,1),O._uU(2,"    "),O.qZA()),2&K&&(O.Gre("ngx-codemirror ",ne.className,""),O.ekj("ngx-codemirror--focused",ne.isFocused),O.Q6J("name",ne.name)("autofocus",ne.autoFocus))},encapsulation:2,changeDetection:0}),se})(),he=(()=>{class se{}return se.\u0275fac=function(K){return new(K||se)},se.\u0275mod=O.oAB({type:se}),se.\u0275inj=O.cJS({}),se})()},7484:(Gt,ht,J)=>{"use strict";J.d(ht,{bd:()=>rt,vh:()=>Lt});var e=J(655),O=J(5e3),ee=J(1721),j=J(7579),S=J(2722),fe=J(9439),he=J(226),se=J(9808),k=J(969);function K(pt,gt){1&pt&&O.Hsn(0)}const ne=["*"];function ie(pt,gt){1&pt&&(O.TgZ(0,"div",4),O._UZ(1,"div",5),O.qZA()),2&pt&&O.Q6J("ngClass",gt.$implicit)}function re(pt,gt){if(1&pt&&(O.TgZ(0,"div",2),O.YNc(1,ie,2,1,"div",3),O.qZA()),2&pt){const st=gt.$implicit;O.xp6(1),O.Q6J("ngForOf",st)}}function R(pt,gt){if(1&pt&&(O.ynx(0),O._uU(1),O.BQk()),2&pt){const st=O.oxw(3);O.xp6(1),O.Oqu(st.nzTitle)}}function V(pt,gt){if(1&pt&&(O.TgZ(0,"div",11),O.YNc(1,R,2,1,"ng-container",12),O.qZA()),2&pt){const st=O.oxw(2);O.xp6(1),O.Q6J("nzStringTemplateOutlet",st.nzTitle)}}function A(pt,gt){if(1&pt&&(O.ynx(0),O._uU(1),O.BQk()),2&pt){const st=O.oxw(3);O.xp6(1),O.Oqu(st.nzExtra)}}function P(pt,gt){if(1&pt&&(O.TgZ(0,"div",13),O.YNc(1,A,2,1,"ng-container",12),O.qZA()),2&pt){const st=O.oxw(2);O.xp6(1),O.Q6J("nzStringTemplateOutlet",st.nzExtra)}}function I(pt,gt){}function H(pt,gt){if(1&pt&&(O.ynx(0),O.YNc(1,I,0,0,"ng-template",14),O.BQk()),2&pt){const st=O.oxw(2);O.xp6(1),O.Q6J("ngTemplateOutlet",st.listOfNzCardTabComponent.template)}}function Z(pt,gt){if(1&pt&&(O.TgZ(0,"div",6)(1,"div",7),O.YNc(2,V,2,1,"div",8),O.YNc(3,P,2,1,"div",9),O.qZA(),O.YNc(4,H,2,1,"ng-container",10),O.qZA()),2&pt){const st=O.oxw();O.xp6(2),O.Q6J("ngIf",st.nzTitle),O.xp6(1),O.Q6J("ngIf",st.nzExtra),O.xp6(1),O.Q6J("ngIf",st.listOfNzCardTabComponent)}}function U(pt,gt){}function Y(pt,gt){if(1&pt&&(O.TgZ(0,"div",15),O.YNc(1,U,0,0,"ng-template",14),O.qZA()),2&pt){const st=O.oxw();O.xp6(1),O.Q6J("ngTemplateOutlet",st.nzCover)}}function B(pt,gt){1&pt&&(O.ynx(0),O.Hsn(1),O.BQk())}function q(pt,gt){1&pt&&O._UZ(0,"nz-card-loading")}function W(pt,gt){}function L(pt,gt){if(1&pt&&(O.TgZ(0,"li")(1,"span"),O.YNc(2,W,0,0,"ng-template",14),O.qZA()()),2&pt){const st=gt.$implicit,zt=O.oxw(2);O.Udp("width",100/zt.nzActions.length,"%"),O.xp6(2),O.Q6J("ngTemplateOutlet",st)}}function D(pt,gt){if(1&pt&&(O.TgZ(0,"ul",16),O.YNc(1,L,3,3,"li",17),O.qZA()),2&pt){const st=O.oxw();O.xp6(1),O.Q6J("ngForOf",st.nzActions)}}let Fe=(()=>{class pt{constructor(){this.nzHoverable=!0}}return pt.\u0275fac=function(st){return new(st||pt)},pt.\u0275dir=O.lG2({type:pt,selectors:[["","nz-card-grid",""]],hostAttrs:[1,"ant-card-grid"],hostVars:2,hostBindings:function(st,zt){2&st&&O.ekj("ant-card-hoverable",zt.nzHoverable)},inputs:{nzHoverable:"nzHoverable"},exportAs:["nzCardGrid"]}),(0,e.gn)([(0,ee.yF)()],pt.prototype,"nzHoverable",void 0),pt})(),je=(()=>{class pt{}return pt.\u0275fac=function(st){return new(st||pt)},pt.\u0275cmp=O.Xpm({type:pt,selectors:[["nz-card-tab"]],viewQuery:function(st,zt){if(1&st&&O.Gf(O.Rgc,7),2&st){let Pt;O.iGM(Pt=O.CRH())&&(zt.template=Pt.first)}},exportAs:["nzCardTab"],ngContentSelectors:ne,decls:1,vars:0,template:function(st,zt){1&st&&(O.F$t(),O.YNc(0,K,1,0,"ng-template"))},encapsulation:2,changeDetection:0}),pt})(),Ce=(()=>{class pt{constructor(){this.listOfLoading=[["ant-col-22"],["ant-col-8","ant-col-15"],["ant-col-6","ant-col-18"],["ant-col-13","ant-col-9"],["ant-col-4","ant-col-3","ant-col-16"],["ant-col-8","ant-col-6","ant-col-8"]]}}return pt.\u0275fac=function(st){return new(st||pt)},pt.\u0275cmp=O.Xpm({type:pt,selectors:[["nz-card-loading"]],hostAttrs:[1,"ant-card-loading-content"],exportAs:["nzCardLoading"],decls:2,vars:1,consts:[[1,"ant-card-loading-content"],["class","ant-row","style","margin-left: -4px; margin-right: -4px;",4,"ngFor","ngForOf"],[1,"ant-row",2,"margin-left","-4px","margin-right","-4px"],["style","padding-left: 4px; padding-right: 4px;",3,"ngClass",4,"ngFor","ngForOf"],[2,"padding-left","4px","padding-right","4px",3,"ngClass"],[1,"ant-card-loading-block"]],template:function(st,zt){1&st&&(O.TgZ(0,"div",0),O.YNc(1,re,2,1,"div",1),O.qZA()),2&st&&(O.xp6(1),O.Q6J("ngForOf",zt.listOfLoading))},directives:[se.sg,se.mk],encapsulation:2,changeDetection:0}),pt})(),rt=(()=>{class pt{constructor(st,zt,Pt){this.nzConfigService=st,this.cdr=zt,this.directionality=Pt,this._nzModuleName="card",this.nzBordered=!0,this.nzBorderless=!1,this.nzLoading=!1,this.nzHoverable=!1,this.nzBodyStyle=null,this.nzActions=[],this.nzType=null,this.nzSize="default",this.dir="ltr",this.destroy$=new j.x,this.nzConfigService.getConfigChangeEventForComponent("card").pipe((0,S.R)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){var st;null===(st=this.directionality.change)||void 0===st||st.pipe((0,S.R)(this.destroy$)).subscribe(zt=>{this.dir=zt,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return pt.\u0275fac=function(st){return new(st||pt)(O.Y36(fe.jY),O.Y36(O.sBO),O.Y36(he.Is,8))},pt.\u0275cmp=O.Xpm({type:pt,selectors:[["nz-card"]],contentQueries:function(st,zt,Pt){if(1&st&&(O.Suo(Pt,je,5),O.Suo(Pt,Fe,4)),2&st){let Wt;O.iGM(Wt=O.CRH())&&(zt.listOfNzCardTabComponent=Wt.first),O.iGM(Wt=O.CRH())&&(zt.listOfNzCardGridDirective=Wt)}},hostAttrs:[1,"ant-card"],hostVars:16,hostBindings:function(st,zt){2&st&&O.ekj("ant-card-loading",zt.nzLoading)("ant-card-bordered",!1===zt.nzBorderless&&zt.nzBordered)("ant-card-hoverable",zt.nzHoverable)("ant-card-small","small"===zt.nzSize)("ant-card-contain-grid",zt.listOfNzCardGridDirective&&zt.listOfNzCardGridDirective.length)("ant-card-type-inner","inner"===zt.nzType)("ant-card-contain-tabs",!!zt.listOfNzCardTabComponent)("ant-card-rtl","rtl"===zt.dir)},inputs:{nzBordered:"nzBordered",nzBorderless:"nzBorderless",nzLoading:"nzLoading",nzHoverable:"nzHoverable",nzBodyStyle:"nzBodyStyle",nzCover:"nzCover",nzActions:"nzActions",nzType:"nzType",nzSize:"nzSize",nzTitle:"nzTitle",nzExtra:"nzExtra"},exportAs:["nzCard"],ngContentSelectors:ne,decls:7,vars:6,consts:[["class","ant-card-head",4,"ngIf"],["class","ant-card-cover",4,"ngIf"],[1,"ant-card-body",3,"ngStyle"],[4,"ngIf","ngIfElse"],["loadingTemplate",""],["class","ant-card-actions",4,"ngIf"],[1,"ant-card-head"],[1,"ant-card-head-wrapper"],["class","ant-card-head-title",4,"ngIf"],["class","ant-card-extra",4,"ngIf"],[4,"ngIf"],[1,"ant-card-head-title"],[4,"nzStringTemplateOutlet"],[1,"ant-card-extra"],[3,"ngTemplateOutlet"],[1,"ant-card-cover"],[1,"ant-card-actions"],[3,"width",4,"ngFor","ngForOf"]],template:function(st,zt){if(1&st&&(O.F$t(),O.YNc(0,Z,5,3,"div",0),O.YNc(1,Y,2,1,"div",1),O.TgZ(2,"div",2),O.YNc(3,B,2,0,"ng-container",3),O.YNc(4,q,1,0,"ng-template",null,4,O.W1O),O.qZA(),O.YNc(6,D,2,1,"ul",5)),2&st){const Pt=O.MAs(5);O.Q6J("ngIf",zt.nzTitle||zt.nzExtra||zt.listOfNzCardTabComponent),O.xp6(1),O.Q6J("ngIf",zt.nzCover),O.xp6(1),O.Q6J("ngStyle",zt.nzBodyStyle),O.xp6(1),O.Q6J("ngIf",!zt.nzLoading)("ngIfElse",Pt),O.xp6(3),O.Q6J("ngIf",zt.nzActions.length)}},directives:[Ce,se.O5,k.f,se.tP,se.PC,se.sg],encapsulation:2,changeDetection:0}),(0,e.gn)([(0,fe.oS)(),(0,ee.yF)()],pt.prototype,"nzBordered",void 0),(0,e.gn)([(0,fe.oS)(),(0,ee.yF)()],pt.prototype,"nzBorderless",void 0),(0,e.gn)([(0,ee.yF)()],pt.prototype,"nzLoading",void 0),(0,e.gn)([(0,fe.oS)(),(0,ee.yF)()],pt.prototype,"nzHoverable",void 0),(0,e.gn)([(0,fe.oS)()],pt.prototype,"nzSize",void 0),pt})(),Lt=(()=>{class pt{}return pt.\u0275fac=function(st){return new(st||pt)},pt.\u0275mod=O.oAB({type:pt}),pt.\u0275inj=O.cJS({imports:[[se.ez,k.T],he.vT]}),pt})()},2844:(Gt,ht,J)=>{"use strict";J.d(ht,{D3:()=>fe,y7:()=>se});var e=J(5e3),O=J(3191),ee=J(8306),j=J(7579);let S=(()=>{class k{create(ne){return"undefined"==typeof ResizeObserver?null:new ResizeObserver(ne)}}return k.\u0275fac=function(ne){return new(ne||k)},k.\u0275prov=e.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})(),fe=(()=>{class k{constructor(ne){this.nzResizeObserverFactory=ne,this.observedElements=new Map}ngOnDestroy(){this.observedElements.forEach((ne,ie)=>this.cleanupObserver(ie))}observe(ne){const ie=(0,O.fI)(ne);return new ee.y(re=>{const V=this.observeElement(ie).subscribe(re);return()=>{V.unsubscribe(),this.unobserveElement(ie)}})}observeElement(ne){if(this.observedElements.has(ne))this.observedElements.get(ne).count++;else{const ie=new j.x,re=this.nzResizeObserverFactory.create(R=>ie.next(R));re&&re.observe(ne),this.observedElements.set(ne,{observer:re,stream:ie,count:1})}return this.observedElements.get(ne).stream}unobserveElement(ne){this.observedElements.has(ne)&&(this.observedElements.get(ne).count--,this.observedElements.get(ne).count||this.cleanupObserver(ne))}cleanupObserver(ne){if(this.observedElements.has(ne)){const{observer:ie,stream:re}=this.observedElements.get(ne);ie&&ie.disconnect(),re.complete(),this.observedElements.delete(ne)}}}return k.\u0275fac=function(ne){return new(ne||k)(e.LFG(S))},k.\u0275prov=e.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})(),se=(()=>{class k{}return k.\u0275fac=function(ne){return new(ne||k)},k.\u0275mod=e.oAB({type:k}),k.\u0275inj=e.cJS({providers:[S]}),k})()},5482:(Gt,ht,J)=>{"use strict";J.d(ht,{yH:()=>B,cD:()=>L,Zv:()=>W});var e=J(655),O=J(5e3),ee=J(4968),j=J(2722),S=J(9300),fe=J(8076),he=J(9439),se=J(4090),k=J(1721),K=J(226),ne=J(4832),ie=J(9808),re=J(969),R=J(647);const V=["*"],A=["collapseHeader"];function P(D,F){if(1&D&&(O.ynx(0),O._UZ(1,"i",7),O.BQk()),2&D){const $=F.$implicit,oe=O.oxw(2);O.xp6(1),O.Q6J("nzType",$||"right")("nzRotate",oe.nzActive?90:0)}}function I(D,F){if(1&D&&(O.TgZ(0,"div"),O.YNc(1,P,2,2,"ng-container",3),O.qZA()),2&D){const $=O.oxw();O.xp6(1),O.Q6J("nzStringTemplateOutlet",$.nzExpandedIcon)}}function H(D,F){if(1&D&&(O.ynx(0),O._uU(1),O.BQk()),2&D){const $=O.oxw();O.xp6(1),O.Oqu($.nzHeader)}}function Z(D,F){if(1&D&&(O.ynx(0),O._uU(1),O.BQk()),2&D){const $=O.oxw(2);O.xp6(1),O.Oqu($.nzExtra)}}function U(D,F){if(1&D&&(O.TgZ(0,"div",8),O.YNc(1,Z,2,1,"ng-container",3),O.qZA()),2&D){const $=O.oxw();O.xp6(1),O.Q6J("nzStringTemplateOutlet",$.nzExtra)}}const Y="collapse";let B=(()=>{class D{constructor($,oe,M,be){this.nzConfigService=$,this.cdr=oe,this.directionality=M,this.destroy$=be,this._nzModuleName=Y,this.nzAccordion=!1,this.nzBordered=!0,this.nzGhost=!1,this.nzExpandIconPosition="left",this.dir="ltr",this.listOfNzCollapsePanelComponent=[],this.nzConfigService.getConfigChangeEventForComponent(Y).pipe((0,j.R)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){var $;null===($=this.directionality.change)||void 0===$||$.pipe((0,j.R)(this.destroy$)).subscribe(oe=>{this.dir=oe,this.cdr.detectChanges()}),this.dir=this.directionality.value}addPanel($){this.listOfNzCollapsePanelComponent.push($)}removePanel($){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf($),1)}click($){this.nzAccordion&&!$.nzActive&&this.listOfNzCollapsePanelComponent.filter(oe=>oe!==$).forEach(oe=>{oe.nzActive&&(oe.nzActive=!1,oe.nzActiveChange.emit(oe.nzActive),oe.markForCheck())}),$.nzActive=!$.nzActive,$.nzActiveChange.emit($.nzActive)}}return D.\u0275fac=function($){return new($||D)(O.Y36(he.jY),O.Y36(O.sBO),O.Y36(K.Is,8),O.Y36(se.kn))},D.\u0275cmp=O.Xpm({type:D,selectors:[["nz-collapse"]],hostAttrs:[1,"ant-collapse"],hostVars:10,hostBindings:function($,oe){2&$&&O.ekj("ant-collapse-icon-position-left","left"===oe.nzExpandIconPosition)("ant-collapse-icon-position-right","right"===oe.nzExpandIconPosition)("ant-collapse-ghost",oe.nzGhost)("ant-collapse-borderless",!oe.nzBordered)("ant-collapse-rtl","rtl"===oe.dir)},inputs:{nzAccordion:"nzAccordion",nzBordered:"nzBordered",nzGhost:"nzGhost",nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],features:[O._Bn([se.kn])],ngContentSelectors:V,decls:1,vars:0,template:function($,oe){1&$&&(O.F$t(),O.Hsn(0))},encapsulation:2,changeDetection:0}),(0,e.gn)([(0,he.oS)(),(0,k.yF)()],D.prototype,"nzAccordion",void 0),(0,e.gn)([(0,he.oS)(),(0,k.yF)()],D.prototype,"nzBordered",void 0),(0,e.gn)([(0,he.oS)(),(0,k.yF)()],D.prototype,"nzGhost",void 0),D})();const q="collapsePanel";let W=(()=>{class D{constructor($,oe,M,be,Me,Ze){this.nzConfigService=$,this.ngZone=oe,this.cdr=M,this.destroy$=be,this.nzCollapseComponent=Me,this.noAnimation=Ze,this._nzModuleName=q,this.nzActive=!1,this.nzDisabled=!1,this.nzShowArrow=!0,this.nzActiveChange=new O.vpe,this.nzConfigService.getConfigChangeEventForComponent(q).pipe((0,j.R)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}markForCheck(){this.cdr.markForCheck()}ngOnInit(){this.nzCollapseComponent.addPanel(this),this.ngZone.runOutsideAngular(()=>(0,ee.R)(this.collapseHeader.nativeElement,"click").pipe((0,S.h)(()=>!this.nzDisabled),(0,j.R)(this.destroy$)).subscribe(()=>{this.ngZone.run(()=>{this.nzCollapseComponent.click(this),this.cdr.markForCheck()})}))}ngOnDestroy(){this.nzCollapseComponent.removePanel(this)}}return D.\u0275fac=function($){return new($||D)(O.Y36(he.jY),O.Y36(O.R0b),O.Y36(O.sBO),O.Y36(se.kn),O.Y36(B,1),O.Y36(ne.P,8))},D.\u0275cmp=O.Xpm({type:D,selectors:[["nz-collapse-panel"]],viewQuery:function($,oe){if(1&$&&O.Gf(A,7),2&$){let M;O.iGM(M=O.CRH())&&(oe.collapseHeader=M.first)}},hostAttrs:[1,"ant-collapse-item"],hostVars:6,hostBindings:function($,oe){2&$&&O.ekj("ant-collapse-no-arrow",!oe.nzShowArrow)("ant-collapse-item-active",oe.nzActive)("ant-collapse-item-disabled",oe.nzDisabled)},inputs:{nzActive:"nzActive",nzDisabled:"nzDisabled",nzShowArrow:"nzShowArrow",nzExtra:"nzExtra",nzHeader:"nzHeader",nzExpandedIcon:"nzExpandedIcon"},outputs:{nzActiveChange:"nzActiveChange"},exportAs:["nzCollapsePanel"],features:[O._Bn([se.kn])],ngContentSelectors:V,decls:8,vars:8,consts:[["role","button",1,"ant-collapse-header"],["collapseHeader",""],[4,"ngIf"],[4,"nzStringTemplateOutlet"],["class","ant-collapse-extra",4,"ngIf"],[1,"ant-collapse-content"],[1,"ant-collapse-content-box"],["nz-icon","",1,"ant-collapse-arrow",3,"nzType","nzRotate"],[1,"ant-collapse-extra"]],template:function($,oe){1&$&&(O.F$t(),O.TgZ(0,"div",0,1),O.YNc(2,I,2,1,"div",2),O.YNc(3,H,2,1,"ng-container",3),O.YNc(4,U,2,1,"div",4),O.qZA(),O.TgZ(5,"div",5)(6,"div",6),O.Hsn(7),O.qZA()()),2&$&&(O.uIk("aria-expanded",oe.nzActive),O.xp6(2),O.Q6J("ngIf",oe.nzShowArrow),O.xp6(1),O.Q6J("nzStringTemplateOutlet",oe.nzHeader),O.xp6(1),O.Q6J("ngIf",oe.nzExtra),O.xp6(1),O.ekj("ant-collapse-content-active",oe.nzActive),O.Q6J("@.disabled",null==oe.noAnimation?null:oe.noAnimation.nzNoAnimation)("@collapseMotion",oe.nzActive?"expanded":"hidden"))},directives:[ie.O5,re.f,R.Ls],encapsulation:2,data:{animation:[fe.J_]},changeDetection:0}),(0,e.gn)([(0,k.yF)()],D.prototype,"nzActive",void 0),(0,e.gn)([(0,k.yF)()],D.prototype,"nzDisabled",void 0),(0,e.gn)([(0,he.oS)(),(0,k.yF)()],D.prototype,"nzShowArrow",void 0),D})(),L=(()=>{class D{}return D.\u0275fac=function($){return new($||D)},D.\u0275mod=O.oAB({type:D}),D.\u0275inj=O.cJS({imports:[[K.vT,ie.ez,R.PV,re.T,ne.g]]}),D})()},5737:(Gt,ht,J)=>{"use strict";J.d(ht,{g:()=>k,S:()=>K});var e=J(655),O=J(5e3),ee=J(1721),j=J(9808),S=J(969),fe=J(226);function he(ne,ie){if(1&ne&&(O.ynx(0),O._uU(1),O.BQk()),2&ne){const re=O.oxw(2);O.xp6(1),O.Oqu(re.nzText)}}function se(ne,ie){if(1&ne&&(O.TgZ(0,"span",1),O.YNc(1,he,2,1,"ng-container",2),O.qZA()),2&ne){const re=O.oxw();O.xp6(1),O.Q6J("nzStringTemplateOutlet",re.nzText)}}let k=(()=>{class ne{constructor(){this.nzType="horizontal",this.nzOrientation="center",this.nzDashed=!1,this.nzPlain=!1}}return ne.\u0275fac=function(re){return new(re||ne)},ne.\u0275cmp=O.Xpm({type:ne,selectors:[["nz-divider"]],hostAttrs:[1,"ant-divider"],hostVars:16,hostBindings:function(re,R){2&re&&O.ekj("ant-divider-horizontal","horizontal"===R.nzType)("ant-divider-vertical","vertical"===R.nzType)("ant-divider-with-text",R.nzText)("ant-divider-plain",R.nzPlain)("ant-divider-with-text-left",R.nzText&&"left"===R.nzOrientation)("ant-divider-with-text-right",R.nzText&&"right"===R.nzOrientation)("ant-divider-with-text-center",R.nzText&&"center"===R.nzOrientation)("ant-divider-dashed",R.nzDashed)},inputs:{nzText:"nzText",nzType:"nzType",nzOrientation:"nzOrientation",nzDashed:"nzDashed",nzPlain:"nzPlain"},exportAs:["nzDivider"],decls:1,vars:1,consts:[["class","ant-divider-inner-text",4,"ngIf"],[1,"ant-divider-inner-text"],[4,"nzStringTemplateOutlet"]],template:function(re,R){1&re&&O.YNc(0,se,2,1,"span",0),2&re&&O.Q6J("ngIf",R.nzText)},directives:[j.O5,S.f],encapsulation:2,changeDetection:0}),(0,e.gn)([(0,ee.yF)()],ne.prototype,"nzDashed",void 0),(0,e.gn)([(0,ee.yF)()],ne.prototype,"nzPlain",void 0),ne})(),K=(()=>{class ne{}return ne.\u0275fac=function(re){return new(re||ne)},ne.\u0275mod=O.oAB({type:ne}),ne.\u0275inj=O.cJS({imports:[[fe.vT,j.ez,S.T]]}),ne})()},3677:(Gt,ht,J)=>{"use strict";J.d(ht,{Ws:()=>Se,cm:()=>je,b1:()=>Lt,RR:()=>ct});var e=J(655),O=J(1159),ee=J(7429),j=J(5e3),S=J(7579),fe=J(1135),he=J(6451),se=J(4968),k=J(515),K=J(9841),ne=J(9718),ie=J(4004),re=J(3900),R=J(9300),V=J(3601),A=J(1884),P=J(2722),I=J(9439),H=J(6950),Z=J(1721),U=J(9776),Y=J(925),B=J(226),q=J(9808),W=J(2382),L=J(6042),D=J(4832),F=J(969),$=J(647),oe=J(4219),M=J(8076);function be(st,zt){if(1&st){const Pt=j.EpF();j.TgZ(0,"div",0),j.NdJ("@slideMotion.done",function(sn){return j.CHM(Pt),j.oxw().onAnimationEvent(sn)})("mouseenter",function(){return j.CHM(Pt),j.oxw().setMouseState(!0)})("mouseleave",function(){return j.CHM(Pt),j.oxw().setMouseState(!1)}),j.Hsn(1),j.qZA()}if(2&st){const Pt=j.oxw();j.ekj("ant-dropdown-rtl","rtl"===Pt.dir),j.Q6J("ngClass",Pt.nzOverlayClassName)("ngStyle",Pt.nzOverlayStyle)("@slideMotion",void 0)("@.disabled",null==Pt.noAnimation?null:Pt.noAnimation.nzNoAnimation)("nzNoAnimation",null==Pt.noAnimation?null:Pt.noAnimation.nzNoAnimation)}}const Me=["*"],Fe=[H.yW.bottomLeft,H.yW.bottomRight,H.yW.topRight,H.yW.topLeft];let je=(()=>{class st{constructor(Pt,Wt,sn,Vn,wn,qn){this.nzConfigService=Pt,this.elementRef=Wt,this.overlay=sn,this.renderer=Vn,this.viewContainerRef=wn,this.platform=qn,this._nzModuleName="dropDown",this.overlayRef=null,this.destroy$=new S.x,this.positionStrategy=this.overlay.position().flexibleConnectedTo(this.elementRef.nativeElement).withLockedPosition().withTransformOriginOn(".ant-dropdown"),this.inputVisible$=new fe.X(!1),this.nzTrigger$=new fe.X("hover"),this.overlayClose$=new S.x,this.nzDropdownMenu=null,this.nzTrigger="hover",this.nzMatchWidthElement=null,this.nzBackdrop=!1,this.nzClickHide=!0,this.nzDisabled=!1,this.nzVisible=!1,this.nzOverlayClassName="",this.nzOverlayStyle={},this.nzPlacement="bottomLeft",this.nzVisibleChange=new j.vpe}setDropdownMenuValue(Pt,Wt){this.nzDropdownMenu&&this.nzDropdownMenu.setValue(Pt,Wt)}ngAfterViewInit(){if(this.nzDropdownMenu){const Pt=this.elementRef.nativeElement,Wt=(0,he.T)((0,se.R)(Pt,"mouseenter").pipe((0,ne.h)(!0)),(0,se.R)(Pt,"mouseleave").pipe((0,ne.h)(!1))),Vn=(0,he.T)(this.nzDropdownMenu.mouseState$,Wt),wn=(0,se.R)(Pt,"click").pipe((0,ie.U)(()=>!this.nzVisible)),qn=this.nzTrigger$.pipe((0,re.w)(Pn=>"hover"===Pn?Vn:"click"===Pn?wn:k.E)),fn=this.nzDropdownMenu.descendantMenuItemClick$.pipe((0,R.h)(()=>this.nzClickHide),(0,ne.h)(!1)),$n=(0,he.T)(qn,fn,this.overlayClose$).pipe((0,R.h)(()=>!this.nzDisabled)),ur=(0,he.T)(this.inputVisible$,$n);(0,K.a)([ur,this.nzDropdownMenu.isChildSubMenuOpen$]).pipe((0,ie.U)(([Pn,Yn])=>Pn||Yn),(0,V.e)(150),(0,A.x)(),(0,R.h)(()=>this.platform.isBrowser),(0,P.R)(this.destroy$)).subscribe(Pn=>{const hr=(this.nzMatchWidthElement?this.nzMatchWidthElement.nativeElement:Pt).getBoundingClientRect().width;this.nzVisible!==Pn&&this.nzVisibleChange.emit(Pn),this.nzVisible=Pn,Pn?(this.overlayRef?this.overlayRef.getConfig().minWidth=hr:(this.overlayRef=this.overlay.create({positionStrategy:this.positionStrategy,minWidth:hr,disposeOnNavigation:!0,hasBackdrop:this.nzBackdrop&&"click"===this.nzTrigger,scrollStrategy:this.overlay.scrollStrategies.reposition()}),(0,he.T)(this.overlayRef.backdropClick(),this.overlayRef.detachments(),this.overlayRef.outsidePointerEvents().pipe((0,R.h)(vr=>!this.elementRef.nativeElement.contains(vr.target))),this.overlayRef.keydownEvents().pipe((0,R.h)(vr=>vr.keyCode===O.hY&&!(0,O.Vb)(vr)))).pipe((0,P.R)(this.destroy$)).subscribe(()=>{this.overlayClose$.next(!1)})),this.positionStrategy.withPositions([H.yW[this.nzPlacement],...Fe]),(!this.portal||this.portal.templateRef!==this.nzDropdownMenu.templateRef)&&(this.portal=new ee.UE(this.nzDropdownMenu.templateRef,this.viewContainerRef)),this.overlayRef.attach(this.portal)):this.overlayRef&&this.overlayRef.detach()}),this.nzDropdownMenu.animationStateChange$.pipe((0,P.R)(this.destroy$)).subscribe(Pn=>{"void"===Pn.toState&&(this.overlayRef&&this.overlayRef.dispose(),this.overlayRef=null)})}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null)}ngOnChanges(Pt){const{nzVisible:Wt,nzDisabled:sn,nzOverlayClassName:Vn,nzOverlayStyle:wn,nzTrigger:qn}=Pt;if(qn&&this.nzTrigger$.next(this.nzTrigger),Wt&&this.inputVisible$.next(this.nzVisible),sn){const fn=this.elementRef.nativeElement;this.nzDisabled?(this.renderer.setAttribute(fn,"disabled",""),this.inputVisible$.next(!1)):this.renderer.removeAttribute(fn,"disabled")}Vn&&this.setDropdownMenuValue("nzOverlayClassName",this.nzOverlayClassName),wn&&this.setDropdownMenuValue("nzOverlayStyle",this.nzOverlayStyle)}}return st.\u0275fac=function(Pt){return new(Pt||st)(j.Y36(I.jY),j.Y36(j.SBq),j.Y36(U.aV),j.Y36(j.Qsj),j.Y36(j.s_b),j.Y36(Y.t4))},st.\u0275dir=j.lG2({type:st,selectors:[["","nz-dropdown",""]],hostAttrs:[1,"ant-dropdown-trigger"],inputs:{nzDropdownMenu:"nzDropdownMenu",nzTrigger:"nzTrigger",nzMatchWidthElement:"nzMatchWidthElement",nzBackdrop:"nzBackdrop",nzClickHide:"nzClickHide",nzDisabled:"nzDisabled",nzVisible:"nzVisible",nzOverlayClassName:"nzOverlayClassName",nzOverlayStyle:"nzOverlayStyle",nzPlacement:"nzPlacement"},outputs:{nzVisibleChange:"nzVisibleChange"},exportAs:["nzDropdown"],features:[j.TTD]}),(0,e.gn)([(0,I.oS)(),(0,Z.yF)()],st.prototype,"nzBackdrop",void 0),(0,e.gn)([(0,Z.yF)()],st.prototype,"nzClickHide",void 0),(0,e.gn)([(0,Z.yF)()],st.prototype,"nzDisabled",void 0),(0,e.gn)([(0,Z.yF)()],st.prototype,"nzVisible",void 0),st})(),Ce=(()=>{class st{}return st.\u0275fac=function(Pt){return new(Pt||st)},st.\u0275mod=j.oAB({type:st}),st.\u0275inj=j.cJS({}),st})(),Se=(()=>{class st{constructor(){}}return st.\u0275fac=function(Pt){return new(Pt||st)},st.\u0275dir=j.lG2({type:st,selectors:[["a","nz-dropdown",""]],hostAttrs:[1,"ant-dropdown-link"]}),st})(),ct=(()=>{class st{constructor(Pt,Wt,sn,Vn,wn,qn,fn){this.cdr=Pt,this.elementRef=Wt,this.renderer=sn,this.viewContainerRef=Vn,this.nzMenuService=wn,this.directionality=qn,this.noAnimation=fn,this.mouseState$=new fe.X(!1),this.isChildSubMenuOpen$=this.nzMenuService.isChildSubMenuOpen$,this.descendantMenuItemClick$=this.nzMenuService.descendantMenuItemClick$,this.animationStateChange$=new j.vpe,this.nzOverlayClassName="",this.nzOverlayStyle={},this.dir="ltr",this.destroy$=new S.x}onAnimationEvent(Pt){this.animationStateChange$.emit(Pt)}setMouseState(Pt){this.mouseState$.next(Pt)}setValue(Pt,Wt){this[Pt]=Wt,this.cdr.markForCheck()}ngOnInit(){var Pt;null===(Pt=this.directionality.change)||void 0===Pt||Pt.pipe((0,P.R)(this.destroy$)).subscribe(Wt=>{this.dir=Wt,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngAfterContentInit(){this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),this.elementRef.nativeElement)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return st.\u0275fac=function(Pt){return new(Pt||st)(j.Y36(j.sBO),j.Y36(j.SBq),j.Y36(j.Qsj),j.Y36(j.s_b),j.Y36(oe.hl),j.Y36(B.Is,8),j.Y36(D.P,9))},st.\u0275cmp=j.Xpm({type:st,selectors:[["nz-dropdown-menu"]],viewQuery:function(Pt,Wt){if(1&Pt&&j.Gf(j.Rgc,7),2&Pt){let sn;j.iGM(sn=j.CRH())&&(Wt.templateRef=sn.first)}},exportAs:["nzDropdownMenu"],features:[j._Bn([oe.hl,{provide:oe.Cc,useValue:!0}])],ngContentSelectors:Me,decls:1,vars:0,consts:[[1,"ant-dropdown",3,"ngClass","ngStyle","nzNoAnimation","mouseenter","mouseleave"]],template:function(Pt,Wt){1&Pt&&(j.F$t(),j.YNc(0,be,2,7,"ng-template"))},directives:[q.mk,q.PC,D.P],encapsulation:2,data:{animation:[M.mF]},changeDetection:0}),st})(),Lt=(()=>{class st{}return st.\u0275fac=function(Pt){return new(Pt||st)},st.\u0275mod=j.oAB({type:st}),st.\u0275inj=j.cJS({imports:[[B.vT,q.ez,U.U8,W.u5,L.sL,oe.ip,$.PV,D.g,Y.ud,H.e4,Ce,F.T],oe.ip]}),st})();new U.tR({originX:"start",originY:"top"},{overlayX:"start",overlayY:"top"}),new U.tR({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"}),new U.tR({originX:"start",originY:"top"},{overlayX:"end",overlayY:"bottom"}),new U.tR({originX:"start",originY:"top"},{overlayX:"end",overlayY:"top"})},4219:(Gt,ht,J)=>{"use strict";J.d(ht,{hl:()=>Pn,Cc:()=>$n,wO:()=>Er,r9:()=>hr,ip:()=>dr,rY:()=>Sn});var e=J(655),O=J(5e3),ee=J(7579),j=J(1135),S=J(6451),fe=J(9841),he=J(4004),se=J(5577),k=J(9300),K=J(9718),ne=J(3601),ie=J(1884),re=J(2722),R=J(8675),V=J(3900),A=J(1721),P=J(7152),I=J(226),H=J(9776),Z=J(6950),U=J(925),Y=J(4832),B=J(9808),q=J(647),W=J(969),L=J(8076);const D=["nz-submenu-title",""];function F(Ge,Dt){if(1&Ge&&O._UZ(0,"i",4),2&Ge){const it=O.oxw();O.Q6J("nzType",it.nzIcon)}}function $(Ge,Dt){if(1&Ge&&(O.ynx(0),O.TgZ(1,"span"),O._uU(2),O.qZA(),O.BQk()),2&Ge){const it=O.oxw();O.xp6(2),O.Oqu(it.nzTitle)}}function oe(Ge,Dt){1&Ge&&O._UZ(0,"i",8)}function M(Ge,Dt){1&Ge&&O._UZ(0,"i",9)}function be(Ge,Dt){if(1&Ge&&(O.TgZ(0,"span",5),O.YNc(1,oe,1,0,"i",6),O.YNc(2,M,1,0,"i",7),O.qZA()),2&Ge){const it=O.oxw();O.Q6J("ngSwitch",it.dir),O.xp6(1),O.Q6J("ngSwitchCase","rtl")}}function Me(Ge,Dt){1&Ge&&O._UZ(0,"i",10)}const Ze=["*"],Fe=["nz-submenu-inline-child",""];function je(Ge,Dt){}const Ce=["nz-submenu-none-inline-child",""];function Se(Ge,Dt){}const rt=["nz-submenu",""];function ct(Ge,Dt){1&Ge&&O.Hsn(0,0,["*ngIf","!nzTitle"])}function Lt(Ge,Dt){if(1&Ge&&O._UZ(0,"div",6),2&Ge){const it=O.oxw(),Ye=O.MAs(7);O.Q6J("mode",it.mode)("nzOpen",it.nzOpen)("@.disabled",null==it.noAnimation?null:it.noAnimation.nzNoAnimation)("nzNoAnimation",null==it.noAnimation?null:it.noAnimation.nzNoAnimation)("menuClass",it.nzMenuClassName)("templateOutlet",Ye)}}function pt(Ge,Dt){if(1&Ge){const it=O.EpF();O.TgZ(0,"div",8),O.NdJ("subMenuMouseState",function(Ut){return O.CHM(it),O.oxw(2).setMouseEnterState(Ut)}),O.qZA()}if(2&Ge){const it=O.oxw(2),Ye=O.MAs(7);O.Q6J("theme",it.theme)("mode",it.mode)("nzOpen",it.nzOpen)("position",it.position)("nzDisabled",it.nzDisabled)("isMenuInsideDropDown",it.isMenuInsideDropDown)("templateOutlet",Ye)("menuClass",it.nzMenuClassName)("@.disabled",null==it.noAnimation?null:it.noAnimation.nzNoAnimation)("nzNoAnimation",null==it.noAnimation?null:it.noAnimation.nzNoAnimation)}}function gt(Ge,Dt){if(1&Ge){const it=O.EpF();O.YNc(0,pt,1,10,"ng-template",7),O.NdJ("positionChange",function(Ut){return O.CHM(it),O.oxw().onPositionChange(Ut)})}if(2&Ge){const it=O.oxw(),Ye=O.MAs(1);O.Q6J("cdkConnectedOverlayPositions",it.overlayPositions)("cdkConnectedOverlayOrigin",Ye)("cdkConnectedOverlayWidth",it.triggerWidth)("cdkConnectedOverlayOpen",it.nzOpen)("cdkConnectedOverlayTransformOriginOn",".ant-menu-submenu")}}function st(Ge,Dt){1&Ge&&O.Hsn(0,1)}const zt=[[["","title",""]],"*"],Pt=["[title]","*"],$n=new O.OlP("NzIsInDropDownMenuToken"),ur=new O.OlP("NzMenuServiceLocalToken");let Pn=(()=>{class Ge{constructor(){this.descendantMenuItemClick$=new ee.x,this.childMenuItemClick$=new ee.x,this.theme$=new j.X("light"),this.mode$=new j.X("vertical"),this.inlineIndent$=new j.X(24),this.isChildSubMenuOpen$=new j.X(!1)}onDescendantMenuItemClick(it){this.descendantMenuItemClick$.next(it)}onChildMenuItemClick(it){this.childMenuItemClick$.next(it)}setMode(it){this.mode$.next(it)}setTheme(it){this.theme$.next(it)}setInlineIndent(it){this.inlineIndent$.next(it)}}return Ge.\u0275fac=function(it){return new(it||Ge)},Ge.\u0275prov=O.Yz7({token:Ge,factory:Ge.\u0275fac}),Ge})(),Yn=(()=>{class Ge{constructor(it,Ye,Ut){this.nzHostSubmenuService=it,this.nzMenuService=Ye,this.isMenuInsideDropDown=Ut,this.mode$=this.nzMenuService.mode$.pipe((0,he.U)(_t=>"inline"===_t?"inline":"vertical"===_t||this.nzHostSubmenuService?"vertical":"horizontal")),this.level=1,this.isCurrentSubMenuOpen$=new j.X(!1),this.isChildSubMenuOpen$=new j.X(!1),this.isMouseEnterTitleOrOverlay$=new ee.x,this.childMenuItemClick$=new ee.x,this.destroy$=new ee.x,this.nzHostSubmenuService&&(this.level=this.nzHostSubmenuService.level+1);const Qt=this.childMenuItemClick$.pipe((0,se.z)(()=>this.mode$),(0,k.h)(_t=>"inline"!==_t||this.isMenuInsideDropDown),(0,K.h)(!1)),zn=(0,S.T)(this.isMouseEnterTitleOrOverlay$,Qt);(0,fe.a)([this.isChildSubMenuOpen$,zn]).pipe((0,he.U)(([_t,cr])=>_t||cr),(0,ne.e)(150),(0,ie.x)(),(0,re.R)(this.destroy$)).pipe((0,ie.x)()).subscribe(_t=>{this.setOpenStateWithoutDebounce(_t),this.nzHostSubmenuService?this.nzHostSubmenuService.isChildSubMenuOpen$.next(_t):this.nzMenuService.isChildSubMenuOpen$.next(_t)})}onChildMenuItemClick(it){this.childMenuItemClick$.next(it)}setOpenStateWithoutDebounce(it){this.isCurrentSubMenuOpen$.next(it)}setMouseEnterTitleOrOverlayState(it){this.isMouseEnterTitleOrOverlay$.next(it)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return Ge.\u0275fac=function(it){return new(it||Ge)(O.LFG(Ge,12),O.LFG(Pn),O.LFG($n))},Ge.\u0275prov=O.Yz7({token:Ge,factory:Ge.\u0275fac}),Ge})(),hr=(()=>{class Ge{constructor(it,Ye,Ut,Qt,zn,De,_t,cr){this.nzMenuService=it,this.cdr=Ye,this.nzSubmenuService=Ut,this.isMenuInsideDropDown=Qt,this.directionality=zn,this.routerLink=De,this.routerLinkWithHref=_t,this.router=cr,this.destroy$=new ee.x,this.level=this.nzSubmenuService?this.nzSubmenuService.level+1:1,this.selected$=new ee.x,this.inlinePaddingLeft=null,this.dir="ltr",this.nzDisabled=!1,this.nzSelected=!1,this.nzDanger=!1,this.nzMatchRouterExact=!1,this.nzMatchRouter=!1,cr&&this.router.events.pipe((0,re.R)(this.destroy$),(0,k.h)(_n=>_n instanceof P.m2)).subscribe(()=>{this.updateRouterActive()})}clickMenuItem(it){this.nzDisabled?(it.preventDefault(),it.stopPropagation()):(this.nzMenuService.onDescendantMenuItemClick(this),this.nzSubmenuService?this.nzSubmenuService.onChildMenuItemClick(this):this.nzMenuService.onChildMenuItemClick(this))}setSelectedState(it){this.nzSelected=it,this.selected$.next(it)}updateRouterActive(){!this.listOfRouterLink||!this.listOfRouterLinkWithHref||!this.router||!this.router.navigated||!this.nzMatchRouter||Promise.resolve().then(()=>{const it=this.hasActiveLinks();this.nzSelected!==it&&(this.nzSelected=it,this.setSelectedState(this.nzSelected),this.cdr.markForCheck())})}hasActiveLinks(){const it=this.isLinkActive(this.router);return this.routerLink&&it(this.routerLink)||this.routerLinkWithHref&&it(this.routerLinkWithHref)||this.listOfRouterLink.some(it)||this.listOfRouterLinkWithHref.some(it)}isLinkActive(it){return Ye=>it.isActive(Ye.urlTree||"",{paths:this.nzMatchRouterExact?"exact":"subset",queryParams:this.nzMatchRouterExact?"exact":"subset",fragment:"ignored",matrixParams:"ignored"})}ngOnInit(){var it;(0,fe.a)([this.nzMenuService.mode$,this.nzMenuService.inlineIndent$]).pipe((0,re.R)(this.destroy$)).subscribe(([Ye,Ut])=>{this.inlinePaddingLeft="inline"===Ye?this.level*Ut:null}),this.dir=this.directionality.value,null===(it=this.directionality.change)||void 0===it||it.pipe((0,re.R)(this.destroy$)).subscribe(Ye=>{this.dir=Ye})}ngAfterContentInit(){this.listOfRouterLink.changes.pipe((0,re.R)(this.destroy$)).subscribe(()=>this.updateRouterActive()),this.listOfRouterLinkWithHref.changes.pipe((0,re.R)(this.destroy$)).subscribe(()=>this.updateRouterActive()),this.updateRouterActive()}ngOnChanges(it){it.nzSelected&&this.setSelectedState(this.nzSelected)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return Ge.\u0275fac=function(it){return new(it||Ge)(O.Y36(Pn),O.Y36(O.sBO),O.Y36(Yn,8),O.Y36($n),O.Y36(I.Is,8),O.Y36(P.rH,8),O.Y36(P.yS,8),O.Y36(P.F0,8))},Ge.\u0275dir=O.lG2({type:Ge,selectors:[["","nz-menu-item",""]],contentQueries:function(it,Ye,Ut){if(1&it&&(O.Suo(Ut,P.rH,5),O.Suo(Ut,P.yS,5)),2&it){let Qt;O.iGM(Qt=O.CRH())&&(Ye.listOfRouterLink=Qt),O.iGM(Qt=O.CRH())&&(Ye.listOfRouterLinkWithHref=Qt)}},hostVars:20,hostBindings:function(it,Ye){1&it&&O.NdJ("click",function(Qt){return Ye.clickMenuItem(Qt)}),2&it&&(O.Udp("padding-left","rtl"===Ye.dir?null:Ye.nzPaddingLeft||Ye.inlinePaddingLeft,"px")("padding-right","rtl"===Ye.dir?Ye.nzPaddingLeft||Ye.inlinePaddingLeft:null,"px"),O.ekj("ant-dropdown-menu-item",Ye.isMenuInsideDropDown)("ant-dropdown-menu-item-selected",Ye.isMenuInsideDropDown&&Ye.nzSelected)("ant-dropdown-menu-item-danger",Ye.isMenuInsideDropDown&&Ye.nzDanger)("ant-dropdown-menu-item-disabled",Ye.isMenuInsideDropDown&&Ye.nzDisabled)("ant-menu-item",!Ye.isMenuInsideDropDown)("ant-menu-item-selected",!Ye.isMenuInsideDropDown&&Ye.nzSelected)("ant-menu-item-danger",!Ye.isMenuInsideDropDown&&Ye.nzDanger)("ant-menu-item-disabled",!Ye.isMenuInsideDropDown&&Ye.nzDisabled))},inputs:{nzPaddingLeft:"nzPaddingLeft",nzDisabled:"nzDisabled",nzSelected:"nzSelected",nzDanger:"nzDanger",nzMatchRouterExact:"nzMatchRouterExact",nzMatchRouter:"nzMatchRouter"},exportAs:["nzMenuItem"],features:[O.TTD]}),(0,e.gn)([(0,A.yF)()],Ge.prototype,"nzDisabled",void 0),(0,e.gn)([(0,A.yF)()],Ge.prototype,"nzSelected",void 0),(0,e.gn)([(0,A.yF)()],Ge.prototype,"nzDanger",void 0),(0,e.gn)([(0,A.yF)()],Ge.prototype,"nzMatchRouterExact",void 0),(0,e.gn)([(0,A.yF)()],Ge.prototype,"nzMatchRouter",void 0),Ge})(),vr=(()=>{class Ge{constructor(it,Ye){this.cdr=it,this.directionality=Ye,this.nzIcon=null,this.nzTitle=null,this.isMenuInsideDropDown=!1,this.nzDisabled=!1,this.paddingLeft=null,this.mode="vertical",this.toggleSubMenu=new O.vpe,this.subMenuMouseState=new O.vpe,this.dir="ltr",this.destroy$=new ee.x}ngOnInit(){var it;this.dir=this.directionality.value,null===(it=this.directionality.change)||void 0===it||it.pipe((0,re.R)(this.destroy$)).subscribe(Ye=>{this.dir=Ye,this.cdr.detectChanges()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setMouseState(it){this.nzDisabled||this.subMenuMouseState.next(it)}clickTitle(){"inline"===this.mode&&!this.nzDisabled&&this.toggleSubMenu.emit()}}return Ge.\u0275fac=function(it){return new(it||Ge)(O.Y36(O.sBO),O.Y36(I.Is,8))},Ge.\u0275cmp=O.Xpm({type:Ge,selectors:[["","nz-submenu-title",""]],hostVars:8,hostBindings:function(it,Ye){1&it&&O.NdJ("click",function(){return Ye.clickTitle()})("mouseenter",function(){return Ye.setMouseState(!0)})("mouseleave",function(){return Ye.setMouseState(!1)}),2&it&&(O.Udp("padding-left","rtl"===Ye.dir?null:Ye.paddingLeft,"px")("padding-right","rtl"===Ye.dir?Ye.paddingLeft:null,"px"),O.ekj("ant-dropdown-menu-submenu-title",Ye.isMenuInsideDropDown)("ant-menu-submenu-title",!Ye.isMenuInsideDropDown))},inputs:{nzIcon:"nzIcon",nzTitle:"nzTitle",isMenuInsideDropDown:"isMenuInsideDropDown",nzDisabled:"nzDisabled",paddingLeft:"paddingLeft",mode:"mode"},outputs:{toggleSubMenu:"toggleSubMenu",subMenuMouseState:"subMenuMouseState"},exportAs:["nzSubmenuTitle"],attrs:D,ngContentSelectors:Ze,decls:6,vars:4,consts:[["nz-icon","",3,"nzType",4,"ngIf"],[4,"nzStringTemplateOutlet"],["class","ant-dropdown-menu-submenu-expand-icon",3,"ngSwitch",4,"ngIf","ngIfElse"],["notDropdownTpl",""],["nz-icon","",3,"nzType"],[1,"ant-dropdown-menu-submenu-expand-icon",3,"ngSwitch"],["nz-icon","","nzType","left","class","ant-dropdown-menu-submenu-arrow-icon",4,"ngSwitchCase"],["nz-icon","","nzType","right","class","ant-dropdown-menu-submenu-arrow-icon",4,"ngSwitchDefault"],["nz-icon","","nzType","left",1,"ant-dropdown-menu-submenu-arrow-icon"],["nz-icon","","nzType","right",1,"ant-dropdown-menu-submenu-arrow-icon"],[1,"ant-menu-submenu-arrow"]],template:function(it,Ye){if(1&it&&(O.F$t(),O.YNc(0,F,1,1,"i",0),O.YNc(1,$,3,1,"ng-container",1),O.Hsn(2),O.YNc(3,be,3,2,"span",2),O.YNc(4,Me,1,0,"ng-template",null,3,O.W1O)),2&it){const Ut=O.MAs(5);O.Q6J("ngIf",Ye.nzIcon),O.xp6(1),O.Q6J("nzStringTemplateOutlet",Ye.nzTitle),O.xp6(2),O.Q6J("ngIf",Ye.isMenuInsideDropDown)("ngIfElse",Ut)}},directives:[B.O5,q.Ls,W.f,B.RF,B.n9,B.ED],encapsulation:2,changeDetection:0}),Ge})(),ir=(()=>{class Ge{constructor(it,Ye,Ut){this.elementRef=it,this.renderer=Ye,this.directionality=Ut,this.templateOutlet=null,this.menuClass="",this.mode="vertical",this.nzOpen=!1,this.listOfCacheClassName=[],this.expandState="collapsed",this.dir="ltr",this.destroy$=new ee.x}calcMotionState(){this.expandState=this.nzOpen?"expanded":"collapsed"}ngOnInit(){var it;this.calcMotionState(),this.dir=this.directionality.value,null===(it=this.directionality.change)||void 0===it||it.pipe((0,re.R)(this.destroy$)).subscribe(Ye=>{this.dir=Ye})}ngOnChanges(it){const{mode:Ye,nzOpen:Ut,menuClass:Qt}=it;(Ye||Ut)&&this.calcMotionState(),Qt&&(this.listOfCacheClassName.length&&this.listOfCacheClassName.filter(zn=>!!zn).forEach(zn=>{this.renderer.removeClass(this.elementRef.nativeElement,zn)}),this.menuClass&&(this.listOfCacheClassName=this.menuClass.split(" "),this.listOfCacheClassName.filter(zn=>!!zn).forEach(zn=>{this.renderer.addClass(this.elementRef.nativeElement,zn)})))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return Ge.\u0275fac=function(it){return new(it||Ge)(O.Y36(O.SBq),O.Y36(O.Qsj),O.Y36(I.Is,8))},Ge.\u0275cmp=O.Xpm({type:Ge,selectors:[["","nz-submenu-inline-child",""]],hostAttrs:[1,"ant-menu","ant-menu-inline","ant-menu-sub"],hostVars:3,hostBindings:function(it,Ye){2&it&&(O.d8E("@collapseMotion",Ye.expandState),O.ekj("ant-menu-rtl","rtl"===Ye.dir))},inputs:{templateOutlet:"templateOutlet",menuClass:"menuClass",mode:"mode",nzOpen:"nzOpen"},exportAs:["nzSubmenuInlineChild"],features:[O.TTD],attrs:Fe,decls:1,vars:1,consts:[[3,"ngTemplateOutlet"]],template:function(it,Ye){1&it&&O.YNc(0,je,0,0,"ng-template",0),2&it&&O.Q6J("ngTemplateOutlet",Ye.templateOutlet)},directives:[B.tP],encapsulation:2,data:{animation:[L.J_]},changeDetection:0}),Ge})(),tn=(()=>{class Ge{constructor(it){this.directionality=it,this.menuClass="",this.theme="light",this.templateOutlet=null,this.isMenuInsideDropDown=!1,this.mode="vertical",this.position="right",this.nzDisabled=!1,this.nzOpen=!1,this.subMenuMouseState=new O.vpe,this.expandState="collapsed",this.dir="ltr",this.destroy$=new ee.x}setMouseState(it){this.nzDisabled||this.subMenuMouseState.next(it)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}calcMotionState(){this.nzOpen?"horizontal"===this.mode?this.expandState="bottom":"vertical"===this.mode&&(this.expandState="active"):this.expandState="collapsed"}ngOnInit(){var it;this.calcMotionState(),this.dir=this.directionality.value,null===(it=this.directionality.change)||void 0===it||it.pipe((0,re.R)(this.destroy$)).subscribe(Ye=>{this.dir=Ye})}ngOnChanges(it){const{mode:Ye,nzOpen:Ut}=it;(Ye||Ut)&&this.calcMotionState()}}return Ge.\u0275fac=function(it){return new(it||Ge)(O.Y36(I.Is,8))},Ge.\u0275cmp=O.Xpm({type:Ge,selectors:[["","nz-submenu-none-inline-child",""]],hostAttrs:[1,"ant-menu-submenu","ant-menu-submenu-popup"],hostVars:14,hostBindings:function(it,Ye){1&it&&O.NdJ("mouseenter",function(){return Ye.setMouseState(!0)})("mouseleave",function(){return Ye.setMouseState(!1)}),2&it&&(O.d8E("@slideMotion",Ye.expandState)("@zoomBigMotion",Ye.expandState),O.ekj("ant-menu-light","light"===Ye.theme)("ant-menu-dark","dark"===Ye.theme)("ant-menu-submenu-placement-bottom","horizontal"===Ye.mode)("ant-menu-submenu-placement-right","vertical"===Ye.mode&&"right"===Ye.position)("ant-menu-submenu-placement-left","vertical"===Ye.mode&&"left"===Ye.position)("ant-menu-submenu-rtl","rtl"===Ye.dir))},inputs:{menuClass:"menuClass",theme:"theme",templateOutlet:"templateOutlet",isMenuInsideDropDown:"isMenuInsideDropDown",mode:"mode",position:"position",nzDisabled:"nzDisabled",nzOpen:"nzOpen"},outputs:{subMenuMouseState:"subMenuMouseState"},exportAs:["nzSubmenuNoneInlineChild"],features:[O.TTD],attrs:Ce,decls:2,vars:16,consts:[[3,"ngClass"],[3,"ngTemplateOutlet"]],template:function(it,Ye){1&it&&(O.TgZ(0,"div",0),O.YNc(1,Se,0,0,"ng-template",1),O.qZA()),2&it&&(O.ekj("ant-dropdown-menu",Ye.isMenuInsideDropDown)("ant-menu",!Ye.isMenuInsideDropDown)("ant-dropdown-menu-vertical",Ye.isMenuInsideDropDown)("ant-menu-vertical",!Ye.isMenuInsideDropDown)("ant-dropdown-menu-sub",Ye.isMenuInsideDropDown)("ant-menu-sub",!Ye.isMenuInsideDropDown)("ant-menu-rtl","rtl"===Ye.dir),O.Q6J("ngClass",Ye.menuClass),O.xp6(1),O.Q6J("ngTemplateOutlet",Ye.templateOutlet))},directives:[B.mk,B.tP],encapsulation:2,data:{animation:[L.$C,L.mF]},changeDetection:0}),Ge})();const Sr=[Z.yW.rightTop,Z.yW.right,Z.yW.rightBottom,Z.yW.leftTop,Z.yW.left,Z.yW.leftBottom],un=[Z.yW.bottomLeft];let Sn=(()=>{class Ge{constructor(it,Ye,Ut,Qt,zn,De,_t){this.nzMenuService=it,this.cdr=Ye,this.nzSubmenuService=Ut,this.platform=Qt,this.isMenuInsideDropDown=zn,this.directionality=De,this.noAnimation=_t,this.nzMenuClassName="",this.nzPaddingLeft=null,this.nzTitle=null,this.nzIcon=null,this.nzOpen=!1,this.nzDisabled=!1,this.nzOpenChange=new O.vpe,this.cdkOverlayOrigin=null,this.listOfNzSubMenuComponent=null,this.listOfNzMenuItemDirective=null,this.level=this.nzSubmenuService.level,this.destroy$=new ee.x,this.position="right",this.triggerWidth=null,this.theme="light",this.mode="vertical",this.inlinePaddingLeft=null,this.overlayPositions=Sr,this.isSelected=!1,this.isActive=!1,this.dir="ltr"}setOpenStateWithoutDebounce(it){this.nzSubmenuService.setOpenStateWithoutDebounce(it)}toggleSubMenu(){this.setOpenStateWithoutDebounce(!this.nzOpen)}setMouseEnterState(it){this.isActive=it,"inline"!==this.mode&&this.nzSubmenuService.setMouseEnterTitleOrOverlayState(it)}setTriggerWidth(){"horizontal"===this.mode&&this.platform.isBrowser&&this.cdkOverlayOrigin&&(this.triggerWidth=this.cdkOverlayOrigin.nativeElement.getBoundingClientRect().width)}onPositionChange(it){const Ye=(0,Z.d_)(it);"rightTop"===Ye||"rightBottom"===Ye||"right"===Ye?this.position="right":("leftTop"===Ye||"leftBottom"===Ye||"left"===Ye)&&(this.position="left")}ngOnInit(){var it;this.nzMenuService.theme$.pipe((0,re.R)(this.destroy$)).subscribe(Ye=>{this.theme=Ye,this.cdr.markForCheck()}),this.nzSubmenuService.mode$.pipe((0,re.R)(this.destroy$)).subscribe(Ye=>{this.mode=Ye,"horizontal"===Ye?this.overlayPositions=un:"vertical"===Ye&&(this.overlayPositions=Sr),this.cdr.markForCheck()}),(0,fe.a)([this.nzSubmenuService.mode$,this.nzMenuService.inlineIndent$]).pipe((0,re.R)(this.destroy$)).subscribe(([Ye,Ut])=>{this.inlinePaddingLeft="inline"===Ye?this.level*Ut:null,this.cdr.markForCheck()}),this.nzSubmenuService.isCurrentSubMenuOpen$.pipe((0,re.R)(this.destroy$)).subscribe(Ye=>{this.isActive=Ye,Ye!==this.nzOpen&&(this.setTriggerWidth(),this.nzOpen=Ye,this.nzOpenChange.emit(this.nzOpen),this.cdr.markForCheck())}),this.dir=this.directionality.value,null===(it=this.directionality.change)||void 0===it||it.pipe((0,re.R)(this.destroy$)).subscribe(Ye=>{this.dir=Ye,this.cdr.markForCheck()})}ngAfterContentInit(){this.setTriggerWidth();const it=this.listOfNzMenuItemDirective,Ye=it.changes,Ut=(0,S.T)(Ye,...it.map(Qt=>Qt.selected$));Ye.pipe((0,R.O)(it),(0,V.w)(()=>Ut),(0,R.O)(!0),(0,he.U)(()=>it.some(Qt=>Qt.nzSelected)),(0,re.R)(this.destroy$)).subscribe(Qt=>{this.isSelected=Qt,this.cdr.markForCheck()})}ngOnChanges(it){const{nzOpen:Ye}=it;Ye&&(this.nzSubmenuService.setOpenStateWithoutDebounce(this.nzOpen),this.setTriggerWidth())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return Ge.\u0275fac=function(it){return new(it||Ge)(O.Y36(Pn),O.Y36(O.sBO),O.Y36(Yn),O.Y36(U.t4),O.Y36($n),O.Y36(I.Is,8),O.Y36(Y.P,9))},Ge.\u0275cmp=O.Xpm({type:Ge,selectors:[["","nz-submenu",""]],contentQueries:function(it,Ye,Ut){if(1&it&&(O.Suo(Ut,Ge,5),O.Suo(Ut,hr,5)),2&it){let Qt;O.iGM(Qt=O.CRH())&&(Ye.listOfNzSubMenuComponent=Qt),O.iGM(Qt=O.CRH())&&(Ye.listOfNzMenuItemDirective=Qt)}},viewQuery:function(it,Ye){if(1&it&&O.Gf(H.xu,7,O.SBq),2&it){let Ut;O.iGM(Ut=O.CRH())&&(Ye.cdkOverlayOrigin=Ut.first)}},hostVars:34,hostBindings:function(it,Ye){2&it&&O.ekj("ant-dropdown-menu-submenu",Ye.isMenuInsideDropDown)("ant-dropdown-menu-submenu-disabled",Ye.isMenuInsideDropDown&&Ye.nzDisabled)("ant-dropdown-menu-submenu-open",Ye.isMenuInsideDropDown&&Ye.nzOpen)("ant-dropdown-menu-submenu-selected",Ye.isMenuInsideDropDown&&Ye.isSelected)("ant-dropdown-menu-submenu-vertical",Ye.isMenuInsideDropDown&&"vertical"===Ye.mode)("ant-dropdown-menu-submenu-horizontal",Ye.isMenuInsideDropDown&&"horizontal"===Ye.mode)("ant-dropdown-menu-submenu-inline",Ye.isMenuInsideDropDown&&"inline"===Ye.mode)("ant-dropdown-menu-submenu-active",Ye.isMenuInsideDropDown&&Ye.isActive)("ant-menu-submenu",!Ye.isMenuInsideDropDown)("ant-menu-submenu-disabled",!Ye.isMenuInsideDropDown&&Ye.nzDisabled)("ant-menu-submenu-open",!Ye.isMenuInsideDropDown&&Ye.nzOpen)("ant-menu-submenu-selected",!Ye.isMenuInsideDropDown&&Ye.isSelected)("ant-menu-submenu-vertical",!Ye.isMenuInsideDropDown&&"vertical"===Ye.mode)("ant-menu-submenu-horizontal",!Ye.isMenuInsideDropDown&&"horizontal"===Ye.mode)("ant-menu-submenu-inline",!Ye.isMenuInsideDropDown&&"inline"===Ye.mode)("ant-menu-submenu-active",!Ye.isMenuInsideDropDown&&Ye.isActive)("ant-menu-submenu-rtl","rtl"===Ye.dir)},inputs:{nzMenuClassName:"nzMenuClassName",nzPaddingLeft:"nzPaddingLeft",nzTitle:"nzTitle",nzIcon:"nzIcon",nzOpen:"nzOpen",nzDisabled:"nzDisabled"},outputs:{nzOpenChange:"nzOpenChange"},exportAs:["nzSubmenu"],features:[O._Bn([Yn]),O.TTD],attrs:rt,ngContentSelectors:Pt,decls:8,vars:9,consts:[["nz-submenu-title","","cdkOverlayOrigin","",3,"nzIcon","nzTitle","mode","nzDisabled","isMenuInsideDropDown","paddingLeft","subMenuMouseState","toggleSubMenu"],["origin","cdkOverlayOrigin"],[4,"ngIf"],["nz-submenu-inline-child","",3,"mode","nzOpen","nzNoAnimation","menuClass","templateOutlet",4,"ngIf","ngIfElse"],["nonInlineTemplate",""],["subMenuTemplate",""],["nz-submenu-inline-child","",3,"mode","nzOpen","nzNoAnimation","menuClass","templateOutlet"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayPositions","cdkConnectedOverlayOrigin","cdkConnectedOverlayWidth","cdkConnectedOverlayOpen","cdkConnectedOverlayTransformOriginOn","positionChange"],["nz-submenu-none-inline-child","",3,"theme","mode","nzOpen","position","nzDisabled","isMenuInsideDropDown","templateOutlet","menuClass","nzNoAnimation","subMenuMouseState"]],template:function(it,Ye){if(1&it&&(O.F$t(zt),O.TgZ(0,"div",0,1),O.NdJ("subMenuMouseState",function(Qt){return Ye.setMouseEnterState(Qt)})("toggleSubMenu",function(){return Ye.toggleSubMenu()}),O.YNc(2,ct,1,0,"ng-content",2),O.qZA(),O.YNc(3,Lt,1,6,"div",3),O.YNc(4,gt,1,5,"ng-template",null,4,O.W1O),O.YNc(6,st,1,0,"ng-template",null,5,O.W1O)),2&it){const Ut=O.MAs(5);O.Q6J("nzIcon",Ye.nzIcon)("nzTitle",Ye.nzTitle)("mode",Ye.mode)("nzDisabled",Ye.nzDisabled)("isMenuInsideDropDown",Ye.isMenuInsideDropDown)("paddingLeft",Ye.nzPaddingLeft||Ye.inlinePaddingLeft),O.xp6(2),O.Q6J("ngIf",!Ye.nzTitle),O.xp6(1),O.Q6J("ngIf","inline"===Ye.mode)("ngIfElse",Ut)}},directives:[vr,ir,tn,H.xu,B.O5,Y.P,H.pI],encapsulation:2,changeDetection:0}),(0,e.gn)([(0,A.yF)()],Ge.prototype,"nzOpen",void 0),(0,e.gn)([(0,A.yF)()],Ge.prototype,"nzDisabled",void 0),Ge})();function mn(Ge,Dt){return Ge||Dt}function yr(Ge){return Ge||!1}let Er=(()=>{class Ge{constructor(it,Ye,Ut,Qt){this.nzMenuService=it,this.isMenuInsideDropDown=Ye,this.cdr=Ut,this.directionality=Qt,this.nzInlineIndent=24,this.nzTheme="light",this.nzMode="vertical",this.nzInlineCollapsed=!1,this.nzSelectable=!this.isMenuInsideDropDown,this.nzClick=new O.vpe,this.actualMode="vertical",this.dir="ltr",this.inlineCollapsed$=new j.X(this.nzInlineCollapsed),this.mode$=new j.X(this.nzMode),this.destroy$=new ee.x,this.listOfOpenedNzSubMenuComponent=[]}setInlineCollapsed(it){this.nzInlineCollapsed=it,this.inlineCollapsed$.next(it)}updateInlineCollapse(){this.listOfNzMenuItemDirective&&(this.nzInlineCollapsed?(this.listOfOpenedNzSubMenuComponent=this.listOfNzSubMenuComponent.filter(it=>it.nzOpen),this.listOfNzSubMenuComponent.forEach(it=>it.setOpenStateWithoutDebounce(!1))):(this.listOfOpenedNzSubMenuComponent.forEach(it=>it.setOpenStateWithoutDebounce(!0)),this.listOfOpenedNzSubMenuComponent=[]))}ngOnInit(){var it;(0,fe.a)([this.inlineCollapsed$,this.mode$]).pipe((0,re.R)(this.destroy$)).subscribe(([Ye,Ut])=>{this.actualMode=Ye?"vertical":Ut,this.nzMenuService.setMode(this.actualMode),this.cdr.markForCheck()}),this.nzMenuService.descendantMenuItemClick$.pipe((0,re.R)(this.destroy$)).subscribe(Ye=>{this.nzClick.emit(Ye),this.nzSelectable&&!Ye.nzMatchRouter&&this.listOfNzMenuItemDirective.forEach(Ut=>Ut.setSelectedState(Ut===Ye))}),this.dir=this.directionality.value,null===(it=this.directionality.change)||void 0===it||it.pipe((0,re.R)(this.destroy$)).subscribe(Ye=>{this.dir=Ye,this.nzMenuService.setMode(this.actualMode),this.cdr.markForCheck()})}ngAfterContentInit(){this.inlineCollapsed$.pipe((0,re.R)(this.destroy$)).subscribe(()=>{this.updateInlineCollapse(),this.cdr.markForCheck()})}ngOnChanges(it){const{nzInlineCollapsed:Ye,nzInlineIndent:Ut,nzTheme:Qt,nzMode:zn}=it;Ye&&this.inlineCollapsed$.next(this.nzInlineCollapsed),Ut&&this.nzMenuService.setInlineIndent(this.nzInlineIndent),Qt&&this.nzMenuService.setTheme(this.nzTheme),zn&&(this.mode$.next(this.nzMode),!it.nzMode.isFirstChange()&&this.listOfNzSubMenuComponent&&this.listOfNzSubMenuComponent.forEach(De=>De.setOpenStateWithoutDebounce(!1)))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return Ge.\u0275fac=function(it){return new(it||Ge)(O.Y36(Pn),O.Y36($n),O.Y36(O.sBO),O.Y36(I.Is,8))},Ge.\u0275dir=O.lG2({type:Ge,selectors:[["","nz-menu",""]],contentQueries:function(it,Ye,Ut){if(1&it&&(O.Suo(Ut,hr,5),O.Suo(Ut,Sn,5)),2&it){let Qt;O.iGM(Qt=O.CRH())&&(Ye.listOfNzMenuItemDirective=Qt),O.iGM(Qt=O.CRH())&&(Ye.listOfNzSubMenuComponent=Qt)}},hostVars:34,hostBindings:function(it,Ye){2&it&&O.ekj("ant-dropdown-menu",Ye.isMenuInsideDropDown)("ant-dropdown-menu-root",Ye.isMenuInsideDropDown)("ant-dropdown-menu-light",Ye.isMenuInsideDropDown&&"light"===Ye.nzTheme)("ant-dropdown-menu-dark",Ye.isMenuInsideDropDown&&"dark"===Ye.nzTheme)("ant-dropdown-menu-vertical",Ye.isMenuInsideDropDown&&"vertical"===Ye.actualMode)("ant-dropdown-menu-horizontal",Ye.isMenuInsideDropDown&&"horizontal"===Ye.actualMode)("ant-dropdown-menu-inline",Ye.isMenuInsideDropDown&&"inline"===Ye.actualMode)("ant-dropdown-menu-inline-collapsed",Ye.isMenuInsideDropDown&&Ye.nzInlineCollapsed)("ant-menu",!Ye.isMenuInsideDropDown)("ant-menu-root",!Ye.isMenuInsideDropDown)("ant-menu-light",!Ye.isMenuInsideDropDown&&"light"===Ye.nzTheme)("ant-menu-dark",!Ye.isMenuInsideDropDown&&"dark"===Ye.nzTheme)("ant-menu-vertical",!Ye.isMenuInsideDropDown&&"vertical"===Ye.actualMode)("ant-menu-horizontal",!Ye.isMenuInsideDropDown&&"horizontal"===Ye.actualMode)("ant-menu-inline",!Ye.isMenuInsideDropDown&&"inline"===Ye.actualMode)("ant-menu-inline-collapsed",!Ye.isMenuInsideDropDown&&Ye.nzInlineCollapsed)("ant-menu-rtl","rtl"===Ye.dir)},inputs:{nzInlineIndent:"nzInlineIndent",nzTheme:"nzTheme",nzMode:"nzMode",nzInlineCollapsed:"nzInlineCollapsed",nzSelectable:"nzSelectable"},outputs:{nzClick:"nzClick"},exportAs:["nzMenu"],features:[O._Bn([{provide:ur,useClass:Pn},{provide:Pn,useFactory:mn,deps:[[new O.tp0,new O.FiY,Pn],ur]},{provide:$n,useFactory:yr,deps:[[new O.tp0,new O.FiY,$n]]}]),O.TTD]}),(0,e.gn)([(0,A.yF)()],Ge.prototype,"nzInlineCollapsed",void 0),(0,e.gn)([(0,A.yF)()],Ge.prototype,"nzSelectable",void 0),Ge})(),dr=(()=>{class Ge{}return Ge.\u0275fac=function(it){return new(it||Ge)},Ge.\u0275mod=O.oAB({type:Ge}),Ge.\u0275inj=O.cJS({imports:[[I.vT,B.ez,U.ud,H.U8,q.PV,Y.g,W.T]]}),Ge})()},3868:(Gt,ht,J)=>{"use strict";J.d(ht,{Bq:()=>V,Of:()=>I,Dg:()=>P,aF:()=>H});var e=J(5e3),O=J(655),ee=J(2382),j=J(4707),S=J(7579),fe=J(4968),he=J(2722),se=J(1721),k=J(226),K=J(5664),ne=J(9808);const ie=["*"],re=["inputElement"],R=["nz-radio",""];let V=(()=>{class Z{}return Z.\u0275fac=function(Y){return new(Y||Z)},Z.\u0275dir=e.lG2({type:Z,selectors:[["","nz-radio-button",""]]}),Z})(),A=(()=>{class Z{constructor(){this.selected$=new j.t(1),this.touched$=new S.x,this.disabled$=new j.t(1),this.name$=new j.t(1)}touch(){this.touched$.next()}select(Y){this.selected$.next(Y)}setDisabled(Y){this.disabled$.next(Y)}setName(Y){this.name$.next(Y)}}return Z.\u0275fac=function(Y){return new(Y||Z)},Z.\u0275prov=e.Yz7({token:Z,factory:Z.\u0275fac}),Z})(),P=(()=>{class Z{constructor(Y,B,q){this.cdr=Y,this.nzRadioService=B,this.directionality=q,this.value=null,this.destroy$=new S.x,this.onChange=()=>{},this.onTouched=()=>{},this.nzDisabled=!1,this.nzButtonStyle="outline",this.nzSize="default",this.nzName=null,this.dir="ltr"}ngOnInit(){var Y;this.nzRadioService.selected$.pipe((0,he.R)(this.destroy$)).subscribe(B=>{this.value!==B&&(this.value=B,this.onChange(this.value))}),this.nzRadioService.touched$.pipe((0,he.R)(this.destroy$)).subscribe(()=>{Promise.resolve().then(()=>this.onTouched())}),null===(Y=this.directionality.change)||void 0===Y||Y.pipe((0,he.R)(this.destroy$)).subscribe(B=>{this.dir=B,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnChanges(Y){const{nzDisabled:B,nzName:q}=Y;B&&this.nzRadioService.setDisabled(this.nzDisabled),q&&this.nzRadioService.setName(this.nzName)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}writeValue(Y){this.value=Y,this.nzRadioService.select(Y),this.cdr.markForCheck()}registerOnChange(Y){this.onChange=Y}registerOnTouched(Y){this.onTouched=Y}setDisabledState(Y){this.nzDisabled=Y,this.nzRadioService.setDisabled(Y),this.cdr.markForCheck()}}return Z.\u0275fac=function(Y){return new(Y||Z)(e.Y36(e.sBO),e.Y36(A),e.Y36(k.Is,8))},Z.\u0275cmp=e.Xpm({type:Z,selectors:[["nz-radio-group"]],hostAttrs:[1,"ant-radio-group"],hostVars:8,hostBindings:function(Y,B){2&Y&&e.ekj("ant-radio-group-large","large"===B.nzSize)("ant-radio-group-small","small"===B.nzSize)("ant-radio-group-solid","solid"===B.nzButtonStyle)("ant-radio-group-rtl","rtl"===B.dir)},inputs:{nzDisabled:"nzDisabled",nzButtonStyle:"nzButtonStyle",nzSize:"nzSize",nzName:"nzName"},exportAs:["nzRadioGroup"],features:[e._Bn([A,{provide:ee.JU,useExisting:(0,e.Gpc)(()=>Z),multi:!0}]),e.TTD],ngContentSelectors:ie,decls:1,vars:0,template:function(Y,B){1&Y&&(e.F$t(),e.Hsn(0))},encapsulation:2,changeDetection:0}),(0,O.gn)([(0,se.yF)()],Z.prototype,"nzDisabled",void 0),Z})(),I=(()=>{class Z{constructor(Y,B,q,W,L,D,F){this.ngZone=Y,this.elementRef=B,this.cdr=q,this.focusMonitor=W,this.directionality=L,this.nzRadioService=D,this.nzRadioButtonDirective=F,this.isNgModel=!1,this.destroy$=new S.x,this.isChecked=!1,this.name=null,this.isRadioButton=!!this.nzRadioButtonDirective,this.onChange=()=>{},this.onTouched=()=>{},this.nzValue=null,this.nzDisabled=!1,this.nzAutoFocus=!1,this.dir="ltr"}focus(){this.focusMonitor.focusVia(this.inputElement,"keyboard")}blur(){this.inputElement.nativeElement.blur()}setDisabledState(Y){this.nzDisabled=Y,this.cdr.markForCheck()}writeValue(Y){this.isChecked=Y,this.cdr.markForCheck()}registerOnChange(Y){this.isNgModel=!0,this.onChange=Y}registerOnTouched(Y){this.onTouched=Y}ngOnInit(){this.nzRadioService&&(this.nzRadioService.name$.pipe((0,he.R)(this.destroy$)).subscribe(Y=>{this.name=Y,this.cdr.markForCheck()}),this.nzRadioService.disabled$.pipe((0,he.R)(this.destroy$)).subscribe(Y=>{this.nzDisabled=Y,this.cdr.markForCheck()}),this.nzRadioService.selected$.pipe((0,he.R)(this.destroy$)).subscribe(Y=>{const B=this.isChecked;this.isChecked=this.nzValue===Y,this.isNgModel&&B!==this.isChecked&&!1===this.isChecked&&this.onChange(!1),this.cdr.markForCheck()})),this.focusMonitor.monitor(this.elementRef,!0).pipe((0,he.R)(this.destroy$)).subscribe(Y=>{Y||(Promise.resolve().then(()=>this.onTouched()),this.nzRadioService&&this.nzRadioService.touch())}),this.directionality.change.pipe((0,he.R)(this.destroy$)).subscribe(Y=>{this.dir=Y,this.cdr.detectChanges()}),this.dir=this.directionality.value,this.setupClickListener()}ngAfterViewInit(){this.nzAutoFocus&&this.focus()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.focusMonitor.stopMonitoring(this.elementRef)}setupClickListener(){this.ngZone.runOutsideAngular(()=>{(0,fe.R)(this.elementRef.nativeElement,"click").pipe((0,he.R)(this.destroy$)).subscribe(Y=>{Y.stopPropagation(),Y.preventDefault(),!this.nzDisabled&&!this.isChecked&&this.ngZone.run(()=>{var B;null===(B=this.nzRadioService)||void 0===B||B.select(this.nzValue),this.isNgModel&&(this.isChecked=!0,this.onChange(!0)),this.cdr.markForCheck()})})})}}return Z.\u0275fac=function(Y){return new(Y||Z)(e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(K.tE),e.Y36(k.Is,8),e.Y36(A,8),e.Y36(V,8))},Z.\u0275cmp=e.Xpm({type:Z,selectors:[["","nz-radio",""],["","nz-radio-button",""]],viewQuery:function(Y,B){if(1&Y&&e.Gf(re,7),2&Y){let q;e.iGM(q=e.CRH())&&(B.inputElement=q.first)}},hostVars:16,hostBindings:function(Y,B){2&Y&&e.ekj("ant-radio-wrapper",!B.isRadioButton)("ant-radio-button-wrapper",B.isRadioButton)("ant-radio-wrapper-checked",B.isChecked&&!B.isRadioButton)("ant-radio-button-wrapper-checked",B.isChecked&&B.isRadioButton)("ant-radio-wrapper-disabled",B.nzDisabled&&!B.isRadioButton)("ant-radio-button-wrapper-disabled",B.nzDisabled&&B.isRadioButton)("ant-radio-wrapper-rtl",!B.isRadioButton&&"rtl"===B.dir)("ant-radio-button-wrapper-rtl",B.isRadioButton&&"rtl"===B.dir)},inputs:{nzValue:"nzValue",nzDisabled:"nzDisabled",nzAutoFocus:"nzAutoFocus"},exportAs:["nzRadio"],features:[e._Bn([{provide:ee.JU,useExisting:(0,e.Gpc)(()=>Z),multi:!0}])],attrs:R,ngContentSelectors:ie,decls:6,vars:24,consts:[["type","radio",3,"disabled","checked"],["inputElement",""]],template:function(Y,B){1&Y&&(e.F$t(),e.TgZ(0,"span"),e._UZ(1,"input",0,1)(3,"span"),e.qZA(),e.TgZ(4,"span"),e.Hsn(5),e.qZA()),2&Y&&(e.ekj("ant-radio",!B.isRadioButton)("ant-radio-checked",B.isChecked&&!B.isRadioButton)("ant-radio-disabled",B.nzDisabled&&!B.isRadioButton)("ant-radio-button",B.isRadioButton)("ant-radio-button-checked",B.isChecked&&B.isRadioButton)("ant-radio-button-disabled",B.nzDisabled&&B.isRadioButton),e.xp6(1),e.ekj("ant-radio-input",!B.isRadioButton)("ant-radio-button-input",B.isRadioButton),e.Q6J("disabled",B.nzDisabled)("checked",B.isChecked),e.uIk("autofocus",B.nzAutoFocus?"autofocus":null)("name",B.name),e.xp6(2),e.ekj("ant-radio-inner",!B.isRadioButton)("ant-radio-button-inner",B.isRadioButton))},encapsulation:2,changeDetection:0}),(0,O.gn)([(0,se.yF)()],Z.prototype,"nzDisabled",void 0),(0,O.gn)([(0,se.yF)()],Z.prototype,"nzAutoFocus",void 0),Z})(),H=(()=>{class Z{}return Z.\u0275fac=function(Y){return new(Y||Z)},Z.\u0275mod=e.oAB({type:Z}),Z.\u0275inj=e.cJS({imports:[[k.vT,ne.ez,ee.u5]]}),Z})()},8054:(Gt,ht,J)=>{"use strict";J.d(ht,{Ip:()=>Ye,Vq:()=>gn,LV:()=>Pr});var e=J(5e3),O=J(7579),ee=J(4968),j=J(1135),S=J(9841),fe=J(6451),he=J(3088),se=J(685),k=J(969),K=J(2722),ne=J(8675),ie=J(3900),re=J(4090),R=J(9808),V=J(647),A=J(2683),P=J(655),I=J(1721),H=J(1159),Z=J(9776),U=J(2382),Y=J(8076),B=J(9439),q=J(6987),W=J(5664),L=J(4832),D=J(925),F=J(226),$=J(6950),oe=J(7904);const M=["*"];function be(qe,yt){if(1&qe&&(e.ynx(0),e._uU(1),e.BQk()),2&qe){const we=e.oxw();e.xp6(1),e.Oqu(we.nzLabel)}}function Me(qe,yt){}function Ze(qe,yt){if(1&qe&&e.YNc(0,Me,0,0,"ng-template",4),2&qe){const we=e.oxw();e.Q6J("ngTemplateOutlet",we.template)}}function Fe(qe,yt){if(1&qe&&e._uU(0),2&qe){const we=e.oxw();e.Oqu(we.label)}}function je(qe,yt){1&qe&&e._UZ(0,"i",7)}function Ce(qe,yt){if(1&qe&&(e.TgZ(0,"div",5),e.YNc(1,je,1,0,"i",6),e.qZA()),2&qe){const we=e.oxw();e.xp6(1),e.Q6J("ngIf",!we.icon)("ngIfElse",we.icon)}}function Se(qe,yt){if(1&qe&&(e.TgZ(0,"div",4),e._UZ(1,"nz-embed-empty",5),e.qZA()),2&qe){const we=e.oxw();e.xp6(1),e.Q6J("specificContent",we.notFoundContent)}}function rt(qe,yt){if(1&qe&&e._UZ(0,"nz-option-item-group",9),2&qe){const we=e.oxw().$implicit;e.Q6J("nzLabel",we.groupLabel)}}function ct(qe,yt){if(1&qe){const we=e.EpF();e.TgZ(0,"nz-option-item",10),e.NdJ("itemHover",function(Qe){return e.CHM(we),e.oxw(2).onItemHover(Qe)})("itemClick",function(Qe){return e.CHM(we),e.oxw(2).onItemClick(Qe)}),e.qZA()}if(2&qe){const we=e.oxw().$implicit,Pe=e.oxw();e.Q6J("icon",Pe.menuItemSelectedIcon)("customContent",we.nzCustomContent)("template",we.template)("grouped",!!we.groupLabel)("disabled",we.nzDisabled)("showState","tags"===Pe.mode||"multiple"===Pe.mode)("label",we.nzLabel)("compareWith",Pe.compareWith)("activatedValue",Pe.activatedValue)("listOfSelectedValue",Pe.listOfSelectedValue)("value",we.nzValue)}}function Lt(qe,yt){1&qe&&(e.ynx(0,6),e.YNc(1,rt,1,1,"nz-option-item-group",7),e.YNc(2,ct,1,11,"nz-option-item",8),e.BQk()),2&qe&&(e.Q6J("ngSwitch",yt.$implicit.type),e.xp6(1),e.Q6J("ngSwitchCase","group"),e.xp6(1),e.Q6J("ngSwitchCase","item"))}function pt(qe,yt){}function gt(qe,yt){1&qe&&e.Hsn(0)}const st=["inputElement"],zt=["mirrorElement"];function Pt(qe,yt){1&qe&&e._UZ(0,"span",3,4)}function Wt(qe,yt){if(1&qe&&(e.TgZ(0,"div",4),e._uU(1),e.qZA()),2&qe){const we=e.oxw(2);e.xp6(1),e.Oqu(we.label)}}function sn(qe,yt){if(1&qe&&e._uU(0),2&qe){const we=e.oxw(2);e.Oqu(we.label)}}function Vn(qe,yt){if(1&qe&&(e.ynx(0),e.YNc(1,Wt,2,1,"div",2),e.YNc(2,sn,1,1,"ng-template",null,3,e.W1O),e.BQk()),2&qe){const we=e.MAs(3),Pe=e.oxw();e.xp6(1),e.Q6J("ngIf",Pe.deletable)("ngIfElse",we)}}function wn(qe,yt){1&qe&&e._UZ(0,"i",7)}function qn(qe,yt){if(1&qe){const we=e.EpF();e.TgZ(0,"span",5),e.NdJ("click",function(Qe){return e.CHM(we),e.oxw().onDelete(Qe)}),e.YNc(1,wn,1,0,"i",6),e.qZA()}if(2&qe){const we=e.oxw();e.xp6(1),e.Q6J("ngIf",!we.removeIcon)("ngIfElse",we.removeIcon)}}const fn=function(qe){return{$implicit:qe}};function $n(qe,yt){if(1&qe&&(e.ynx(0),e._uU(1),e.BQk()),2&qe){const we=e.oxw();e.xp6(1),e.hij(" ",we.placeholder," ")}}function ur(qe,yt){if(1&qe&&e._UZ(0,"nz-select-item",6),2&qe){const we=e.oxw(2);e.Q6J("deletable",!1)("disabled",!1)("removeIcon",we.removeIcon)("label",we.listOfTopItem[0].nzLabel)("contentTemplateOutlet",we.customTemplate)("contentTemplateOutletContext",we.listOfTopItem[0])}}function Pn(qe,yt){if(1&qe){const we=e.EpF();e.ynx(0),e.TgZ(1,"nz-select-search",4),e.NdJ("isComposingChange",function(Qe){return e.CHM(we),e.oxw().isComposingChange(Qe)})("valueChange",function(Qe){return e.CHM(we),e.oxw().onInputValueChange(Qe)}),e.qZA(),e.YNc(2,ur,1,6,"nz-select-item",5),e.BQk()}if(2&qe){const we=e.oxw();e.xp6(1),e.Q6J("nzId",we.nzId)("disabled",we.disabled)("value",we.inputValue)("showInput",we.showSearch)("mirrorSync",!1)("autofocus",we.autofocus)("focusTrigger",we.open),e.xp6(1),e.Q6J("ngIf",we.isShowSingleLabel)}}function Yn(qe,yt){if(1&qe){const we=e.EpF();e.TgZ(0,"nz-select-item",9),e.NdJ("delete",function(){const Ie=e.CHM(we).$implicit;return e.oxw(2).onDeleteItem(Ie.contentTemplateOutletContext)}),e.qZA()}if(2&qe){const we=yt.$implicit,Pe=e.oxw(2);e.Q6J("removeIcon",Pe.removeIcon)("label",we.nzLabel)("disabled",we.nzDisabled||Pe.disabled)("contentTemplateOutlet",we.contentTemplateOutlet)("deletable",!0)("contentTemplateOutletContext",we.contentTemplateOutletContext)}}function hr(qe,yt){if(1&qe){const we=e.EpF();e.ynx(0),e.YNc(1,Yn,1,6,"nz-select-item",7),e.TgZ(2,"nz-select-search",8),e.NdJ("isComposingChange",function(Qe){return e.CHM(we),e.oxw().isComposingChange(Qe)})("valueChange",function(Qe){return e.CHM(we),e.oxw().onInputValueChange(Qe)}),e.qZA(),e.BQk()}if(2&qe){const we=e.oxw();e.xp6(1),e.Q6J("ngForOf",we.listOfSlicedItem)("ngForTrackBy",we.trackValue),e.xp6(1),e.Q6J("nzId",we.nzId)("disabled",we.disabled)("value",we.inputValue)("autofocus",we.autofocus)("showInput",!0)("mirrorSync",!0)("focusTrigger",we.open)}}function vr(qe,yt){if(1&qe&&e._UZ(0,"nz-select-placeholder",10),2&qe){const we=e.oxw();e.Q6J("placeholder",we.placeHolder)}}function ir(qe,yt){1&qe&&e._UZ(0,"i",2)}function tn(qe,yt){1&qe&&e._UZ(0,"i",7)}function Sr(qe,yt){1&qe&&e._UZ(0,"i",8)}function un(qe,yt){if(1&qe&&(e.ynx(0),e.YNc(1,tn,1,0,"i",5),e.YNc(2,Sr,1,0,"i",6),e.BQk()),2&qe){const we=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!we.search),e.xp6(1),e.Q6J("ngIf",we.search)}}function Sn(qe,yt){if(1&qe&&(e.ynx(0),e._UZ(1,"i",10),e.BQk()),2&qe){const we=yt.$implicit;e.xp6(1),e.Q6J("nzType",we)}}function mn(qe,yt){if(1&qe&&e.YNc(0,Sn,2,1,"ng-container",9),2&qe){const we=e.oxw(2);e.Q6J("nzStringTemplateOutlet",we.suffixIcon)}}function yr(qe,yt){if(1&qe&&(e.YNc(0,un,3,2,"ng-container",3),e.YNc(1,mn,1,1,"ng-template",null,4,e.W1O)),2&qe){const we=e.MAs(2),Pe=e.oxw();e.Q6J("ngIf",!Pe.suffixIcon)("ngIfElse",we)}}function Er(qe,yt){1&qe&&e._UZ(0,"i",1)}function Dn(qe,yt){if(1&qe&&e._UZ(0,"nz-select-arrow",5),2&qe){const we=e.oxw();e.Q6J("loading",we.nzLoading)("search",we.nzOpen&&we.nzShowSearch)("suffixIcon",we.nzSuffixIcon)}}function Nt(qe,yt){if(1&qe){const we=e.EpF();e.TgZ(0,"nz-select-clear",6),e.NdJ("clear",function(){return e.CHM(we),e.oxw().onClearSelection()}),e.qZA()}if(2&qe){const we=e.oxw();e.Q6J("clearIcon",we.nzClearIcon)}}function Zt(qe,yt){if(1&qe){const we=e.EpF();e.TgZ(0,"nz-option-container",7),e.NdJ("keydown",function(Qe){return e.CHM(we),e.oxw().onKeyDown(Qe)})("itemClick",function(Qe){return e.CHM(we),e.oxw().onItemClick(Qe)})("scrollToBottom",function(){return e.CHM(we),e.oxw().nzScrollToBottom.emit()}),e.qZA()}if(2&qe){const we=e.oxw();e.ekj("ant-select-dropdown-placement-bottomLeft","bottom"===we.dropDownPosition)("ant-select-dropdown-placement-topLeft","top"===we.dropDownPosition),e.Q6J("ngStyle",we.nzDropdownStyle)("itemSize",we.nzOptionHeightPx)("maxItemLength",we.nzOptionOverflowSize)("matchWidth",we.nzDropdownMatchSelectWidth)("@slideMotion","enter")("@.disabled",null==we.noAnimation?null:we.noAnimation.nzNoAnimation)("nzNoAnimation",null==we.noAnimation?null:we.noAnimation.nzNoAnimation)("listOfContainerItem",we.listOfContainerItem)("menuItemSelectedIcon",we.nzMenuItemSelectedIcon)("notFoundContent",we.nzNotFoundContent)("activatedValue",we.activatedValue)("listOfSelectedValue",we.listOfValue)("dropdownRender",we.nzDropdownRender)("compareWith",we.compareWith)("mode",we.nzMode)}}let dr=(()=>{class qe{constructor(){this.nzLabel=null,this.changes=new O.x}ngOnChanges(){this.changes.next()}}return qe.\u0275fac=function(we){return new(we||qe)},qe.\u0275cmp=e.Xpm({type:qe,selectors:[["nz-option-group"]],inputs:{nzLabel:"nzLabel"},exportAs:["nzOptionGroup"],features:[e.TTD],ngContentSelectors:M,decls:1,vars:0,template:function(we,Pe){1&we&&(e.F$t(),e.Hsn(0))},encapsulation:2,changeDetection:0}),qe})(),Ge=(()=>{class qe{constructor(){this.nzLabel=null}}return qe.\u0275fac=function(we){return new(we||qe)},qe.\u0275cmp=e.Xpm({type:qe,selectors:[["nz-option-item-group"]],hostAttrs:[1,"ant-select-item","ant-select-item-group"],inputs:{nzLabel:"nzLabel"},decls:1,vars:1,consts:[[4,"nzStringTemplateOutlet"]],template:function(we,Pe){1&we&&e.YNc(0,be,2,1,"ng-container",0),2&we&&e.Q6J("nzStringTemplateOutlet",Pe.nzLabel)},directives:[k.f],encapsulation:2,changeDetection:0}),qe})(),Dt=(()=>{class qe{constructor(we,Pe,Qe){this.elementRef=we,this.ngZone=Pe,this.destroy$=Qe,this.selected=!1,this.activated=!1,this.grouped=!1,this.customContent=!1,this.template=null,this.disabled=!1,this.showState=!1,this.label=null,this.value=null,this.activatedValue=null,this.listOfSelectedValue=[],this.icon=null,this.itemClick=new e.vpe,this.itemHover=new e.vpe}ngOnChanges(we){const{value:Pe,activatedValue:Qe,listOfSelectedValue:Ie}=we;(Pe||Ie)&&(this.selected=this.listOfSelectedValue.some(Ve=>this.compareWith(Ve,this.value))),(Pe||Qe)&&(this.activated=this.compareWith(this.activatedValue,this.value))}ngOnInit(){this.ngZone.runOutsideAngular(()=>{(0,ee.R)(this.elementRef.nativeElement,"click").pipe((0,K.R)(this.destroy$)).subscribe(()=>{this.disabled||this.ngZone.run(()=>this.itemClick.emit(this.value))}),(0,ee.R)(this.elementRef.nativeElement,"mouseenter").pipe((0,K.R)(this.destroy$)).subscribe(()=>{this.disabled||this.ngZone.run(()=>this.itemHover.emit(this.value))})})}}return qe.\u0275fac=function(we){return new(we||qe)(e.Y36(e.SBq),e.Y36(e.R0b),e.Y36(re.kn))},qe.\u0275cmp=e.Xpm({type:qe,selectors:[["nz-option-item"]],hostAttrs:[1,"ant-select-item","ant-select-item-option"],hostVars:9,hostBindings:function(we,Pe){2&we&&(e.uIk("title",Pe.label),e.ekj("ant-select-item-option-grouped",Pe.grouped)("ant-select-item-option-selected",Pe.selected&&!Pe.disabled)("ant-select-item-option-disabled",Pe.disabled)("ant-select-item-option-active",Pe.activated&&!Pe.disabled))},inputs:{grouped:"grouped",customContent:"customContent",template:"template",disabled:"disabled",showState:"showState",label:"label",value:"value",activatedValue:"activatedValue",listOfSelectedValue:"listOfSelectedValue",icon:"icon",compareWith:"compareWith"},outputs:{itemClick:"itemClick",itemHover:"itemHover"},features:[e._Bn([re.kn]),e.TTD],decls:5,vars:3,consts:[[1,"ant-select-item-option-content"],[3,"ngIf","ngIfElse"],["noCustomContent",""],["class","ant-select-item-option-state","style","user-select: none","unselectable","on",4,"ngIf"],[3,"ngTemplateOutlet"],["unselectable","on",1,"ant-select-item-option-state",2,"user-select","none"],["nz-icon","","nzType","check","class","ant-select-selected-icon",4,"ngIf","ngIfElse"],["nz-icon","","nzType","check",1,"ant-select-selected-icon"]],template:function(we,Pe){if(1&we&&(e.TgZ(0,"div",0),e.YNc(1,Ze,1,1,"ng-template",1),e.YNc(2,Fe,1,1,"ng-template",null,2,e.W1O),e.qZA(),e.YNc(4,Ce,2,2,"div",3)),2&we){const Qe=e.MAs(3);e.xp6(1),e.Q6J("ngIf",Pe.customContent)("ngIfElse",Qe),e.xp6(3),e.Q6J("ngIf",Pe.showState&&Pe.selected)}},directives:[R.O5,R.tP,V.Ls,A.w],encapsulation:2,changeDetection:0}),qe})(),it=(()=>{class qe{constructor(){this.notFoundContent=void 0,this.menuItemSelectedIcon=null,this.dropdownRender=null,this.activatedValue=null,this.listOfSelectedValue=[],this.mode="default",this.matchWidth=!0,this.itemSize=32,this.maxItemLength=8,this.listOfContainerItem=[],this.itemClick=new e.vpe,this.scrollToBottom=new e.vpe,this.scrolledIndex=0}onItemClick(we){this.itemClick.emit(we)}onItemHover(we){this.activatedValue=we}trackValue(we,Pe){return Pe.key}onScrolledIndexChange(we){this.scrolledIndex=we,we===this.listOfContainerItem.length-this.maxItemLength&&this.scrollToBottom.emit()}scrollToActivatedValue(){const we=this.listOfContainerItem.findIndex(Pe=>this.compareWith(Pe.key,this.activatedValue));(we<this.scrolledIndex||we>=this.scrolledIndex+this.maxItemLength)&&this.cdkVirtualScrollViewport.scrollToIndex(we||0)}ngOnChanges(we){const{listOfContainerItem:Pe,activatedValue:Qe}=we;(Pe||Qe)&&this.scrollToActivatedValue()}ngAfterViewInit(){setTimeout(()=>this.scrollToActivatedValue())}}return qe.\u0275fac=function(we){return new(we||qe)},qe.\u0275cmp=e.Xpm({type:qe,selectors:[["nz-option-container"]],viewQuery:function(we,Pe){if(1&we&&e.Gf(he.N7,7),2&we){let Qe;e.iGM(Qe=e.CRH())&&(Pe.cdkVirtualScrollViewport=Qe.first)}},hostAttrs:[1,"ant-select-dropdown"],inputs:{notFoundContent:"notFoundContent",menuItemSelectedIcon:"menuItemSelectedIcon",dropdownRender:"dropdownRender",activatedValue:"activatedValue",listOfSelectedValue:"listOfSelectedValue",compareWith:"compareWith",mode:"mode",matchWidth:"matchWidth",itemSize:"itemSize",maxItemLength:"maxItemLength",listOfContainerItem:"listOfContainerItem"},outputs:{itemClick:"itemClick",scrollToBottom:"scrollToBottom"},exportAs:["nzOptionContainer"],features:[e.TTD],decls:5,vars:14,consts:[["class","ant-select-item-empty",4,"ngIf"],[3,"itemSize","maxBufferPx","minBufferPx","scrolledIndexChange"],["cdkVirtualFor","",3,"cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"],[3,"ngTemplateOutlet"],[1,"ant-select-item-empty"],["nzComponentName","select",3,"specificContent"],[3,"ngSwitch"],[3,"nzLabel",4,"ngSwitchCase"],[3,"icon","customContent","template","grouped","disabled","showState","label","compareWith","activatedValue","listOfSelectedValue","value","itemHover","itemClick",4,"ngSwitchCase"],[3,"nzLabel"],[3,"icon","customContent","template","grouped","disabled","showState","label","compareWith","activatedValue","listOfSelectedValue","value","itemHover","itemClick"]],template:function(we,Pe){1&we&&(e.TgZ(0,"div"),e.YNc(1,Se,2,1,"div",0),e.TgZ(2,"cdk-virtual-scroll-viewport",1),e.NdJ("scrolledIndexChange",function(Ie){return Pe.onScrolledIndexChange(Ie)}),e.YNc(3,Lt,3,3,"ng-template",2),e.qZA(),e.YNc(4,pt,0,0,"ng-template",3),e.qZA()),2&we&&(e.xp6(1),e.Q6J("ngIf",0===Pe.listOfContainerItem.length),e.xp6(1),e.Udp("height",Pe.listOfContainerItem.length*Pe.itemSize,"px")("max-height",Pe.itemSize*Pe.maxItemLength,"px"),e.ekj("full-width",!Pe.matchWidth),e.Q6J("itemSize",Pe.itemSize)("maxBufferPx",Pe.itemSize*Pe.maxItemLength)("minBufferPx",Pe.itemSize*Pe.maxItemLength),e.xp6(1),e.Q6J("cdkVirtualForOf",Pe.listOfContainerItem)("cdkVirtualForTrackBy",Pe.trackValue)("cdkVirtualForTemplateCacheSize",0),e.xp6(1),e.Q6J("ngTemplateOutlet",Pe.dropdownRender))},directives:[se.gB,he.N7,Ge,Dt,R.O5,he.xd,he.x0,R.RF,R.n9,R.tP],encapsulation:2,changeDetection:0}),qe})(),Ye=(()=>{class qe{constructor(we,Pe){this.nzOptionGroupComponent=we,this.destroy$=Pe,this.changes=new O.x,this.groupLabel=null,this.nzLabel=null,this.nzValue=null,this.nzDisabled=!1,this.nzHide=!1,this.nzCustomContent=!1}ngOnInit(){this.nzOptionGroupComponent&&this.nzOptionGroupComponent.changes.pipe((0,ne.O)(!0),(0,K.R)(this.destroy$)).subscribe(()=>{this.groupLabel=this.nzOptionGroupComponent.nzLabel})}ngOnChanges(){this.changes.next()}}return qe.\u0275fac=function(we){return new(we||qe)(e.Y36(dr,8),e.Y36(re.kn))},qe.\u0275cmp=e.Xpm({type:qe,selectors:[["nz-option"]],viewQuery:function(we,Pe){if(1&we&&e.Gf(e.Rgc,7),2&we){let Qe;e.iGM(Qe=e.CRH())&&(Pe.template=Qe.first)}},inputs:{nzLabel:"nzLabel",nzValue:"nzValue",nzDisabled:"nzDisabled",nzHide:"nzHide",nzCustomContent:"nzCustomContent"},exportAs:["nzOption"],features:[e._Bn([re.kn]),e.TTD],ngContentSelectors:M,decls:1,vars:0,template:function(we,Pe){1&we&&(e.F$t(),e.YNc(0,gt,1,0,"ng-template"))},encapsulation:2,changeDetection:0}),(0,P.gn)([(0,I.yF)()],qe.prototype,"nzDisabled",void 0),(0,P.gn)([(0,I.yF)()],qe.prototype,"nzHide",void 0),(0,P.gn)([(0,I.yF)()],qe.prototype,"nzCustomContent",void 0),qe})(),Ut=(()=>{class qe{constructor(we,Pe,Qe){this.elementRef=we,this.renderer=Pe,this.focusMonitor=Qe,this.nzId=null,this.disabled=!1,this.mirrorSync=!1,this.showInput=!0,this.focusTrigger=!1,this.value="",this.autofocus=!1,this.valueChange=new e.vpe,this.isComposingChange=new e.vpe}setCompositionState(we){this.isComposingChange.next(we)}onValueChange(we){this.value=we,this.valueChange.next(we),this.mirrorSync&&this.syncMirrorWidth()}clearInputValue(){this.inputElement.nativeElement.value="",this.onValueChange("")}syncMirrorWidth(){const we=this.mirrorElement.nativeElement,Pe=this.elementRef.nativeElement,Qe=this.inputElement.nativeElement;this.renderer.removeStyle(Pe,"width"),we.innerHTML=this.renderer.createText(`${Qe.value}&nbsp;`),this.renderer.setStyle(Pe,"width",`${we.scrollWidth}px`)}focus(){this.focusMonitor.focusVia(this.inputElement,"keyboard")}blur(){this.inputElement.nativeElement.blur()}ngOnChanges(we){const Pe=this.inputElement.nativeElement,{focusTrigger:Qe,showInput:Ie}=we;Ie&&(this.showInput?this.renderer.removeAttribute(Pe,"readonly"):this.renderer.setAttribute(Pe,"readonly","readonly")),Qe&&!0===Qe.currentValue&&!1===Qe.previousValue&&Pe.focus()}ngAfterViewInit(){this.mirrorSync&&this.syncMirrorWidth(),this.autofocus&&this.focus()}}return qe.\u0275fac=function(we){return new(we||qe)(e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(W.tE))},qe.\u0275cmp=e.Xpm({type:qe,selectors:[["nz-select-search"]],viewQuery:function(we,Pe){if(1&we&&(e.Gf(st,7),e.Gf(zt,5)),2&we){let Qe;e.iGM(Qe=e.CRH())&&(Pe.inputElement=Qe.first),e.iGM(Qe=e.CRH())&&(Pe.mirrorElement=Qe.first)}},hostAttrs:[1,"ant-select-selection-search"],inputs:{nzId:"nzId",disabled:"disabled",mirrorSync:"mirrorSync",showInput:"showInput",focusTrigger:"focusTrigger",value:"value",autofocus:"autofocus"},outputs:{valueChange:"valueChange",isComposingChange:"isComposingChange"},features:[e._Bn([{provide:U.ve,useValue:!1}]),e.TTD],decls:3,vars:7,consts:[["autocomplete","off",1,"ant-select-selection-search-input",3,"ngModel","disabled","ngModelChange","compositionstart","compositionend"],["inputElement",""],["class","ant-select-selection-search-mirror",4,"ngIf"],[1,"ant-select-selection-search-mirror"],["mirrorElement",""]],template:function(we,Pe){1&we&&(e.TgZ(0,"input",0,1),e.NdJ("ngModelChange",function(Ie){return Pe.onValueChange(Ie)})("compositionstart",function(){return Pe.setCompositionState(!0)})("compositionend",function(){return Pe.setCompositionState(!1)}),e.qZA(),e.YNc(2,Pt,2,0,"span",2)),2&we&&(e.Udp("opacity",Pe.showInput?null:0),e.Q6J("ngModel",Pe.value)("disabled",Pe.disabled),e.uIk("id",Pe.nzId)("autofocus",Pe.autofocus?"autofocus":null),e.xp6(2),e.Q6J("ngIf",Pe.mirrorSync))},directives:[U.Fj,U.JJ,U.On,R.O5],encapsulation:2,changeDetection:0}),qe})(),Qt=(()=>{class qe{constructor(){this.disabled=!1,this.label=null,this.deletable=!1,this.removeIcon=null,this.contentTemplateOutletContext=null,this.contentTemplateOutlet=null,this.delete=new e.vpe}onDelete(we){we.preventDefault(),we.stopPropagation(),this.disabled||this.delete.next(we)}}return qe.\u0275fac=function(we){return new(we||qe)},qe.\u0275cmp=e.Xpm({type:qe,selectors:[["nz-select-item"]],hostAttrs:[1,"ant-select-selection-item"],hostVars:3,hostBindings:function(we,Pe){2&we&&(e.uIk("title",Pe.label),e.ekj("ant-select-selection-item-disabled",Pe.disabled))},inputs:{disabled:"disabled",label:"label",deletable:"deletable",removeIcon:"removeIcon",contentTemplateOutletContext:"contentTemplateOutletContext",contentTemplateOutlet:"contentTemplateOutlet"},outputs:{delete:"delete"},decls:2,vars:5,consts:[[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],["class","ant-select-selection-item-remove",3,"click",4,"ngIf"],["class","ant-select-selection-item-content",4,"ngIf","ngIfElse"],["labelTemplate",""],[1,"ant-select-selection-item-content"],[1,"ant-select-selection-item-remove",3,"click"],["nz-icon","","nzType","close",4,"ngIf","ngIfElse"],["nz-icon","","nzType","close"]],template:function(we,Pe){1&we&&(e.YNc(0,Vn,4,2,"ng-container",0),e.YNc(1,qn,2,2,"span",1)),2&we&&(e.Q6J("nzStringTemplateOutlet",Pe.contentTemplateOutlet)("nzStringTemplateOutletContext",e.VKq(3,fn,Pe.contentTemplateOutletContext)),e.xp6(1),e.Q6J("ngIf",Pe.deletable&&!Pe.disabled))},directives:[k.f,R.O5,V.Ls,A.w],encapsulation:2,changeDetection:0}),qe})(),zn=(()=>{class qe{constructor(){this.placeholder=null}}return qe.\u0275fac=function(we){return new(we||qe)},qe.\u0275cmp=e.Xpm({type:qe,selectors:[["nz-select-placeholder"]],hostAttrs:[1,"ant-select-selection-placeholder"],inputs:{placeholder:"placeholder"},decls:1,vars:1,consts:[[4,"nzStringTemplateOutlet"]],template:function(we,Pe){1&we&&e.YNc(0,$n,2,1,"ng-container",0),2&we&&e.Q6J("nzStringTemplateOutlet",Pe.placeholder)},directives:[k.f],encapsulation:2,changeDetection:0}),qe})(),De=(()=>{class qe{constructor(we,Pe,Qe){this.elementRef=we,this.ngZone=Pe,this.noAnimation=Qe,this.nzId=null,this.showSearch=!1,this.placeHolder=null,this.open=!1,this.maxTagCount=1/0,this.autofocus=!1,this.disabled=!1,this.mode="default",this.customTemplate=null,this.maxTagPlaceholder=null,this.removeIcon=null,this.listOfTopItem=[],this.tokenSeparators=[],this.tokenize=new e.vpe,this.inputValueChange=new e.vpe,this.deleteItem=new e.vpe,this.listOfSlicedItem=[],this.isShowPlaceholder=!0,this.isShowSingleLabel=!1,this.isComposing=!1,this.inputValue=null,this.destroy$=new O.x}updateTemplateVariable(){const we=0===this.listOfTopItem.length;this.isShowPlaceholder=we&&!this.isComposing&&!this.inputValue,this.isShowSingleLabel=!we&&!this.isComposing&&!this.inputValue}isComposingChange(we){this.isComposing=we,this.updateTemplateVariable()}onInputValueChange(we){we!==this.inputValue&&(this.inputValue=we,this.updateTemplateVariable(),this.inputValueChange.emit(we),this.tokenSeparate(we,this.tokenSeparators))}tokenSeparate(we,Pe){if(we&&we.length&&Pe.length&&"default"!==this.mode&&((Ve,tt)=>{for(let Mt=0;Mt<tt.length;++Mt)if(Ve.lastIndexOf(tt[Mt])>0)return!0;return!1})(we,Pe)){const Ve=((Ve,tt)=>{const Mt=new RegExp(`[${tt.join()}]`),ln=Ve.split(Mt).filter(Ft=>Ft);return[...new Set(ln)]})(we,Pe);this.tokenize.next(Ve)}}clearInputValue(){this.nzSelectSearchComponent&&this.nzSelectSearchComponent.clearInputValue()}focus(){this.nzSelectSearchComponent&&this.nzSelectSearchComponent.focus()}blur(){this.nzSelectSearchComponent&&this.nzSelectSearchComponent.blur()}trackValue(we,Pe){return Pe.nzValue}onDeleteItem(we){!this.disabled&&!we.nzDisabled&&this.deleteItem.next(we)}ngOnChanges(we){const{listOfTopItem:Pe,maxTagCount:Qe,customTemplate:Ie,maxTagPlaceholder:Ve}=we;if(Pe&&this.updateTemplateVariable(),Pe||Qe||Ie||Ve){const tt=this.listOfTopItem.slice(0,this.maxTagCount).map(Mt=>({nzLabel:Mt.nzLabel,nzValue:Mt.nzValue,nzDisabled:Mt.nzDisabled,contentTemplateOutlet:this.customTemplate,contentTemplateOutletContext:Mt}));if(this.listOfTopItem.length>this.maxTagCount){const Mt=`+ ${this.listOfTopItem.length-this.maxTagCount} ...`,ln=this.listOfTopItem.map(jn=>jn.nzValue),Ft={nzLabel:Mt,nzValue:"$$__nz_exceeded_item",nzDisabled:!0,contentTemplateOutlet:this.maxTagPlaceholder,contentTemplateOutletContext:ln.slice(this.maxTagCount)};tt.push(Ft)}this.listOfSlicedItem=tt}}ngOnInit(){this.ngZone.runOutsideAngular(()=>{(0,ee.R)(this.elementRef.nativeElement,"click").pipe((0,K.R)(this.destroy$)).subscribe(we=>{we.target!==this.nzSelectSearchComponent.inputElement.nativeElement&&this.nzSelectSearchComponent.focus()}),(0,ee.R)(this.elementRef.nativeElement,"keydown").pipe((0,K.R)(this.destroy$)).subscribe(we=>{if(we.target instanceof HTMLInputElement){const Pe=we.target.value;we.keyCode===H.ZH&&"default"!==this.mode&&!Pe&&this.listOfTopItem.length>0&&(we.preventDefault(),this.ngZone.run(()=>this.onDeleteItem(this.listOfTopItem[this.listOfTopItem.length-1])))}})})}ngOnDestroy(){this.destroy$.next()}}return qe.\u0275fac=function(we){return new(we||qe)(e.Y36(e.SBq),e.Y36(e.R0b),e.Y36(L.P,9))},qe.\u0275cmp=e.Xpm({type:qe,selectors:[["nz-select-top-control"]],viewQuery:function(we,Pe){if(1&we&&e.Gf(Ut,5),2&we){let Qe;e.iGM(Qe=e.CRH())&&(Pe.nzSelectSearchComponent=Qe.first)}},hostAttrs:[1,"ant-select-selector"],inputs:{nzId:"nzId",showSearch:"showSearch",placeHolder:"placeHolder",open:"open",maxTagCount:"maxTagCount",autofocus:"autofocus",disabled:"disabled",mode:"mode",customTemplate:"customTemplate",maxTagPlaceholder:"maxTagPlaceholder",removeIcon:"removeIcon",listOfTopItem:"listOfTopItem",tokenSeparators:"tokenSeparators"},outputs:{tokenize:"tokenize",inputValueChange:"inputValueChange",deleteItem:"deleteItem"},exportAs:["nzSelectTopControl"],features:[e.TTD],decls:4,vars:3,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"placeholder",4,"ngIf"],[3,"nzId","disabled","value","showInput","mirrorSync","autofocus","focusTrigger","isComposingChange","valueChange"],[3,"deletable","disabled","removeIcon","label","contentTemplateOutlet","contentTemplateOutletContext",4,"ngIf"],[3,"deletable","disabled","removeIcon","label","contentTemplateOutlet","contentTemplateOutletContext"],[3,"removeIcon","label","disabled","contentTemplateOutlet","deletable","contentTemplateOutletContext","delete",4,"ngFor","ngForOf","ngForTrackBy"],[3,"nzId","disabled","value","autofocus","showInput","mirrorSync","focusTrigger","isComposingChange","valueChange"],[3,"removeIcon","label","disabled","contentTemplateOutlet","deletable","contentTemplateOutletContext","delete"],[3,"placeholder"]],template:function(we,Pe){1&we&&(e.ynx(0,0),e.YNc(1,Pn,3,8,"ng-container",1),e.YNc(2,hr,3,9,"ng-container",2),e.BQk(),e.YNc(3,vr,1,1,"nz-select-placeholder",3)),2&we&&(e.Q6J("ngSwitch",Pe.mode),e.xp6(1),e.Q6J("ngSwitchCase","default"),e.xp6(2),e.Q6J("ngIf",Pe.isShowPlaceholder))},directives:[Ut,Qt,zn,R.RF,R.n9,R.O5,R.ED,R.sg,A.w],encapsulation:2,changeDetection:0}),qe})(),_t=(()=>{class qe{constructor(){this.loading=!1,this.search=!1,this.suffixIcon=null}}return qe.\u0275fac=function(we){return new(we||qe)},qe.\u0275cmp=e.Xpm({type:qe,selectors:[["nz-select-arrow"]],hostAttrs:[1,"ant-select-arrow"],hostVars:2,hostBindings:function(we,Pe){2&we&&e.ekj("ant-select-arrow-loading",Pe.loading)},inputs:{loading:"loading",search:"search",suffixIcon:"suffixIcon"},decls:3,vars:2,consts:[["nz-icon","","nzType","loading",4,"ngIf","ngIfElse"],["defaultArrow",""],["nz-icon","","nzType","loading"],[4,"ngIf","ngIfElse"],["suffixTemplate",""],["nz-icon","","nzType","down",4,"ngIf"],["nz-icon","","nzType","search",4,"ngIf"],["nz-icon","","nzType","down"],["nz-icon","","nzType","search"],[4,"nzStringTemplateOutlet"],["nz-icon","",3,"nzType"]],template:function(we,Pe){if(1&we&&(e.YNc(0,ir,1,0,"i",0),e.YNc(1,yr,3,2,"ng-template",null,1,e.W1O)),2&we){const Qe=e.MAs(2);e.Q6J("ngIf",Pe.loading)("ngIfElse",Qe)}},directives:[R.O5,V.Ls,A.w,k.f],encapsulation:2,changeDetection:0}),qe})(),cr=(()=>{class qe{constructor(){this.clearIcon=null,this.clear=new e.vpe}onClick(we){we.preventDefault(),we.stopPropagation(),this.clear.emit(we)}}return qe.\u0275fac=function(we){return new(we||qe)},qe.\u0275cmp=e.Xpm({type:qe,selectors:[["nz-select-clear"]],hostAttrs:[1,"ant-select-clear"],hostBindings:function(we,Pe){1&we&&e.NdJ("click",function(Ie){return Pe.onClick(Ie)})},inputs:{clearIcon:"clearIcon"},outputs:{clear:"clear"},decls:1,vars:2,consts:[["nz-icon","","nzType","close-circle","nzTheme","fill","class","ant-select-close-icon",4,"ngIf","ngIfElse"],["nz-icon","","nzType","close-circle","nzTheme","fill",1,"ant-select-close-icon"]],template:function(we,Pe){1&we&&e.YNc(0,Er,1,0,"i",0),2&we&&e.Q6J("ngIf",!Pe.clearIcon)("ngIfElse",Pe.clearIcon)},directives:[R.O5,V.Ls,A.w],encapsulation:2,changeDetection:0}),qe})();const _n=(qe,yt)=>!(!yt||!yt.nzLabel)&&yt.nzLabel.toString().toLowerCase().indexOf(qe.toLowerCase())>-1;let gn=(()=>{class qe{constructor(we,Pe,Qe,Ie,Ve,tt,Mt,ln,Ft){this.ngZone=we,this.destroy$=Pe,this.nzConfigService=Qe,this.cdr=Ie,this.host=Ve,this.platform=tt,this.focusMonitor=Mt,this.directionality=ln,this.noAnimation=Ft,this._nzModuleName="select",this.nzId=null,this.nzSize="default",this.nzOptionHeightPx=32,this.nzOptionOverflowSize=8,this.nzDropdownClassName=null,this.nzDropdownMatchSelectWidth=!0,this.nzDropdownStyle=null,this.nzNotFoundContent=void 0,this.nzPlaceHolder=null,this.nzMaxTagCount=1/0,this.nzDropdownRender=null,this.nzCustomTemplate=null,this.nzSuffixIcon=null,this.nzClearIcon=null,this.nzRemoveIcon=null,this.nzMenuItemSelectedIcon=null,this.nzTokenSeparators=[],this.nzMaxTagPlaceholder=null,this.nzMaxMultipleCount=1/0,this.nzMode="default",this.nzFilterOption=_n,this.compareWith=(jn,Nr)=>jn===Nr,this.nzAllowClear=!1,this.nzBorderless=!1,this.nzShowSearch=!1,this.nzLoading=!1,this.nzAutoFocus=!1,this.nzAutoClearSearchValue=!0,this.nzServerSearch=!1,this.nzDisabled=!1,this.nzOpen=!1,this.nzBackdrop=!1,this.nzOptions=[],this.nzOnSearch=new e.vpe,this.nzScrollToBottom=new e.vpe,this.nzOpenChange=new e.vpe,this.nzBlur=new e.vpe,this.nzFocus=new e.vpe,this.listOfValue$=new j.X([]),this.listOfTemplateItem$=new j.X([]),this.listOfTagAndTemplateItem=[],this.searchValue="",this.isReactiveDriven=!1,this.requestId=-1,this.onChange=()=>{},this.onTouched=()=>{},this.dropDownPosition="bottom",this.triggerWidth=null,this.listOfContainerItem=[],this.listOfTopItem=[],this.activatedValue=null,this.listOfValue=[],this.focused=!1,this.dir="ltr"}set nzShowArrow(we){this._nzShowArrow=we}get nzShowArrow(){return void 0===this._nzShowArrow?"default"===this.nzMode:this._nzShowArrow}generateTagItem(we){return{nzValue:we,nzLabel:we,type:"item"}}onItemClick(we){if(this.activatedValue=we,"default"===this.nzMode)(0===this.listOfValue.length||!this.compareWith(this.listOfValue[0],we))&&this.updateListOfValue([we]),this.setOpenState(!1);else{const Pe=this.listOfValue.findIndex(Qe=>this.compareWith(Qe,we));if(-1!==Pe){const Qe=this.listOfValue.filter((Ie,Ve)=>Ve!==Pe);this.updateListOfValue(Qe)}else if(this.listOfValue.length<this.nzMaxMultipleCount){const Qe=[...this.listOfValue,we];this.updateListOfValue(Qe)}this.focus(),this.nzAutoClearSearchValue&&this.clearInput()}}onItemDelete(we){const Pe=this.listOfValue.filter(Qe=>!this.compareWith(Qe,we.nzValue));this.updateListOfValue(Pe),this.clearInput()}updateListOfContainerItem(){let we=this.listOfTagAndTemplateItem.filter(Ie=>!Ie.nzHide).filter(Ie=>!(!this.nzServerSearch&&this.searchValue)||this.nzFilterOption(this.searchValue,Ie));if("tags"===this.nzMode&&this.searchValue){const Ie=this.listOfTagAndTemplateItem.find(Ve=>Ve.nzLabel===this.searchValue);if(Ie)this.activatedValue=Ie.nzValue;else{const Ve=this.generateTagItem(this.searchValue);we=[Ve,...we],this.activatedValue=Ve.nzValue}}const Pe=we.find(Ie=>Ie.nzLabel===this.searchValue)||we.find(Ie=>this.compareWith(Ie.nzValue,this.listOfValue[0]))||we[0];this.activatedValue=Pe&&Pe.nzValue||null;let Qe=[];this.isReactiveDriven?Qe=[...new Set(this.nzOptions.filter(Ie=>Ie.groupLabel).map(Ie=>Ie.groupLabel))]:this.listOfNzOptionGroupComponent&&(Qe=this.listOfNzOptionGroupComponent.map(Ie=>Ie.nzLabel)),Qe.forEach(Ie=>{const Ve=we.findIndex(tt=>Ie===tt.groupLabel);Ve>-1&&we.splice(Ve,0,{groupLabel:Ie,type:"group",key:Ie})}),this.listOfContainerItem=[...we],this.updateCdkConnectedOverlayPositions()}clearInput(){this.nzSelectTopControlComponent.clearInputValue()}updateListOfValue(we){const Qe=((Ie,Ve)=>"default"===this.nzMode?Ie.length>0?Ie[0]:null:Ie)(we);this.value!==Qe&&(this.listOfValue=we,this.listOfValue$.next(we),this.value=Qe,this.onChange(this.value))}onTokenSeparate(we){const Pe=this.listOfTagAndTemplateItem.filter(Qe=>-1!==we.findIndex(Ie=>Ie===Qe.nzLabel)).map(Qe=>Qe.nzValue).filter(Qe=>-1===this.listOfValue.findIndex(Ie=>this.compareWith(Ie,Qe)));if("multiple"===this.nzMode)this.updateListOfValue([...this.listOfValue,...Pe]);else if("tags"===this.nzMode){const Qe=we.filter(Ie=>-1===this.listOfTagAndTemplateItem.findIndex(Ve=>Ve.nzLabel===Ie));this.updateListOfValue([...this.listOfValue,...Pe,...Qe])}this.clearInput()}onKeyDown(we){if(this.nzDisabled)return;const Pe=this.listOfContainerItem.filter(Ie=>"item"===Ie.type).filter(Ie=>!Ie.nzDisabled),Qe=Pe.findIndex(Ie=>this.compareWith(Ie.nzValue,this.activatedValue));switch(we.keyCode){case H.LH:we.preventDefault(),this.nzOpen&&Pe.length>0&&(this.activatedValue=Pe[Qe>0?Qe-1:Pe.length-1].nzValue);break;case H.JH:we.preventDefault(),this.nzOpen&&Pe.length>0?this.activatedValue=Pe[Qe<Pe.length-1?Qe+1:0].nzValue:this.setOpenState(!0);break;case H.K5:we.preventDefault(),this.nzOpen?(0,I.DX)(this.activatedValue)&&this.onItemClick(this.activatedValue):this.setOpenState(!0);break;case H.L_:this.nzOpen||(this.setOpenState(!0),we.preventDefault());break;case H.Mf:this.setOpenState(!1);break;case H.hY:break;default:this.nzOpen||this.setOpenState(!0)}}setOpenState(we){this.nzOpen!==we&&(this.nzOpen=we,this.nzOpenChange.emit(we),this.onOpenChange(),this.cdr.markForCheck())}onOpenChange(){this.updateCdkConnectedOverlayStatus(),this.clearInput()}onInputValueChange(we){this.searchValue=we,this.updateListOfContainerItem(),this.nzOnSearch.emit(we),this.updateCdkConnectedOverlayPositions()}onClearSelection(){this.updateListOfValue([])}onClickOutside(we){this.host.nativeElement.contains(we.target)||this.setOpenState(!1)}focus(){this.nzSelectTopControlComponent.focus()}blur(){this.nzSelectTopControlComponent.blur()}onPositionChange(we){this.dropDownPosition=we.connectionPair.originY}updateCdkConnectedOverlayStatus(){if(this.platform.isBrowser&&this.originElement.nativeElement){const we=this.triggerWidth;(0,q.h)(this.requestId),this.requestId=(0,q.e)(()=>{this.triggerWidth=this.originElement.nativeElement.getBoundingClientRect().width,we!==this.triggerWidth&&this.cdr.detectChanges()})}}updateCdkConnectedOverlayPositions(){(0,q.e)(()=>{var we,Pe;null===(Pe=null===(we=this.cdkConnectedOverlay)||void 0===we?void 0:we.overlayRef)||void 0===Pe||Pe.updatePosition()})}writeValue(we){if(this.value!==we){this.value=we;const Qe=((Ie,Ve)=>null==Ie?[]:"default"===this.nzMode?[Ie]:Ie)(we);this.listOfValue=Qe,this.listOfValue$.next(Qe),this.cdr.markForCheck()}}registerOnChange(we){this.onChange=we}registerOnTouched(we){this.onTouched=we}setDisabledState(we){this.nzDisabled=we,we&&this.setOpenState(!1),this.cdr.markForCheck()}ngOnChanges(we){const{nzOpen:Pe,nzDisabled:Qe,nzOptions:Ie}=we;if(Pe&&this.onOpenChange(),Qe&&this.nzDisabled&&this.setOpenState(!1),Ie){this.isReactiveDriven=!0;const tt=(this.nzOptions||[]).map(Mt=>({template:Mt.label instanceof e.Rgc?Mt.label:null,nzLabel:"string"==typeof Mt.label||"number"==typeof Mt.label?Mt.label:null,nzValue:Mt.value,nzDisabled:Mt.disabled||!1,nzHide:Mt.hide||!1,nzCustomContent:Mt.label instanceof e.Rgc,groupLabel:Mt.groupLabel||null,type:"item",key:Mt.value}));this.listOfTemplateItem$.next(tt)}}ngOnInit(){var we;this.focusMonitor.monitor(this.host,!0).pipe((0,K.R)(this.destroy$)).subscribe(Pe=>{Pe?(this.focused=!0,this.cdr.markForCheck(),this.nzFocus.emit()):(this.focused=!1,this.cdr.markForCheck(),this.nzBlur.emit(),Promise.resolve().then(()=>{this.onTouched()}))}),(0,S.a)([this.listOfValue$,this.listOfTemplateItem$]).pipe((0,K.R)(this.destroy$)).subscribe(([Pe,Qe])=>{const Ie=Pe.filter(()=>"tags"===this.nzMode).filter(Ve=>-1===Qe.findIndex(tt=>this.compareWith(tt.nzValue,Ve))).map(Ve=>this.listOfTopItem.find(tt=>this.compareWith(tt.nzValue,Ve))||this.generateTagItem(Ve));this.listOfTagAndTemplateItem=[...Qe,...Ie],this.listOfTopItem=this.listOfValue.map(Ve=>[...this.listOfTagAndTemplateItem,...this.listOfTopItem].find(tt=>this.compareWith(Ve,tt.nzValue))).filter(Ve=>!!Ve),this.updateListOfContainerItem()}),null===(we=this.directionality.change)||void 0===we||we.pipe((0,K.R)(this.destroy$)).subscribe(Pe=>{this.dir=Pe,this.cdr.detectChanges()}),this.nzConfigService.getConfigChangeEventForComponent("select").pipe((0,K.R)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()}),this.dir=this.directionality.value,this.ngZone.runOutsideAngular(()=>(0,ee.R)(this.host.nativeElement,"click").pipe((0,K.R)(this.destroy$)).subscribe(()=>{this.nzOpen&&this.nzShowSearch||this.nzDisabled||this.ngZone.run(()=>this.setOpenState(!this.nzOpen))})),this.cdkConnectedOverlay.overlayKeydown.pipe((0,K.R)(this.destroy$)).subscribe(Pe=>{Pe.keyCode===H.hY&&this.setOpenState(!1)})}ngAfterContentInit(){this.isReactiveDriven||(0,fe.T)(this.listOfNzOptionGroupComponent.changes,this.listOfNzOptionComponent.changes).pipe((0,ne.O)(!0),(0,ie.w)(()=>(0,fe.T)(this.listOfNzOptionComponent.changes,this.listOfNzOptionGroupComponent.changes,...this.listOfNzOptionComponent.map(we=>we.changes),...this.listOfNzOptionGroupComponent.map(we=>we.changes)).pipe((0,ne.O)(!0))),(0,K.R)(this.destroy$)).subscribe(()=>{const we=this.listOfNzOptionComponent.toArray().map(Pe=>{const{template:Qe,nzLabel:Ie,nzValue:Ve,nzDisabled:tt,nzHide:Mt,nzCustomContent:ln,groupLabel:Ft}=Pe;return{template:Qe,nzLabel:Ie,nzValue:Ve,nzDisabled:tt,nzHide:Mt,nzCustomContent:ln,groupLabel:Ft,type:"item",key:Ve}});this.listOfTemplateItem$.next(we),this.cdr.markForCheck()})}ngOnDestroy(){(0,q.h)(this.requestId),this.focusMonitor.stopMonitoring(this.host)}}return qe.\u0275fac=function(we){return new(we||qe)(e.Y36(e.R0b),e.Y36(re.kn),e.Y36(B.jY),e.Y36(e.sBO),e.Y36(e.SBq),e.Y36(D.t4),e.Y36(W.tE),e.Y36(F.Is,8),e.Y36(L.P,9))},qe.\u0275cmp=e.Xpm({type:qe,selectors:[["nz-select"]],contentQueries:function(we,Pe,Qe){if(1&we&&(e.Suo(Qe,Ye,5),e.Suo(Qe,dr,5)),2&we){let Ie;e.iGM(Ie=e.CRH())&&(Pe.listOfNzOptionComponent=Ie),e.iGM(Ie=e.CRH())&&(Pe.listOfNzOptionGroupComponent=Ie)}},viewQuery:function(we,Pe){if(1&we&&(e.Gf(Z.xu,7,e.SBq),e.Gf(Z.pI,7),e.Gf(De,7),e.Gf(dr,7,e.SBq),e.Gf(De,7,e.SBq)),2&we){let Qe;e.iGM(Qe=e.CRH())&&(Pe.originElement=Qe.first),e.iGM(Qe=e.CRH())&&(Pe.cdkConnectedOverlay=Qe.first),e.iGM(Qe=e.CRH())&&(Pe.nzSelectTopControlComponent=Qe.first),e.iGM(Qe=e.CRH())&&(Pe.nzOptionGroupComponentElement=Qe.first),e.iGM(Qe=e.CRH())&&(Pe.nzSelectTopControlComponentElement=Qe.first)}},hostAttrs:[1,"ant-select"],hostVars:24,hostBindings:function(we,Pe){2&we&&e.ekj("ant-select-lg","large"===Pe.nzSize)("ant-select-sm","small"===Pe.nzSize)("ant-select-show-arrow",Pe.nzShowArrow)("ant-select-disabled",Pe.nzDisabled)("ant-select-show-search",(Pe.nzShowSearch||"default"!==Pe.nzMode)&&!Pe.nzDisabled)("ant-select-allow-clear",Pe.nzAllowClear)("ant-select-borderless",Pe.nzBorderless)("ant-select-open",Pe.nzOpen)("ant-select-focused",Pe.nzOpen||Pe.focused)("ant-select-single","default"===Pe.nzMode)("ant-select-multiple","default"!==Pe.nzMode)("ant-select-rtl","rtl"===Pe.dir)},inputs:{nzId:"nzId",nzSize:"nzSize",nzOptionHeightPx:"nzOptionHeightPx",nzOptionOverflowSize:"nzOptionOverflowSize",nzDropdownClassName:"nzDropdownClassName",nzDropdownMatchSelectWidth:"nzDropdownMatchSelectWidth",nzDropdownStyle:"nzDropdownStyle",nzNotFoundContent:"nzNotFoundContent",nzPlaceHolder:"nzPlaceHolder",nzMaxTagCount:"nzMaxTagCount",nzDropdownRender:"nzDropdownRender",nzCustomTemplate:"nzCustomTemplate",nzSuffixIcon:"nzSuffixIcon",nzClearIcon:"nzClearIcon",nzRemoveIcon:"nzRemoveIcon",nzMenuItemSelectedIcon:"nzMenuItemSelectedIcon",nzTokenSeparators:"nzTokenSeparators",nzMaxTagPlaceholder:"nzMaxTagPlaceholder",nzMaxMultipleCount:"nzMaxMultipleCount",nzMode:"nzMode",nzFilterOption:"nzFilterOption",compareWith:"compareWith",nzAllowClear:"nzAllowClear",nzBorderless:"nzBorderless",nzShowSearch:"nzShowSearch",nzLoading:"nzLoading",nzAutoFocus:"nzAutoFocus",nzAutoClearSearchValue:"nzAutoClearSearchValue",nzServerSearch:"nzServerSearch",nzDisabled:"nzDisabled",nzOpen:"nzOpen",nzBackdrop:"nzBackdrop",nzOptions:"nzOptions",nzShowArrow:"nzShowArrow"},outputs:{nzOnSearch:"nzOnSearch",nzScrollToBottom:"nzScrollToBottom",nzOpenChange:"nzOpenChange",nzBlur:"nzBlur",nzFocus:"nzFocus"},exportAs:["nzSelect"],features:[e._Bn([re.kn,{provide:U.JU,useExisting:(0,e.Gpc)(()=>qe),multi:!0}]),e.TTD],decls:5,vars:24,consts:[["cdkOverlayOrigin","",3,"nzId","open","disabled","mode","nzNoAnimation","maxTagPlaceholder","removeIcon","placeHolder","maxTagCount","customTemplate","tokenSeparators","showSearch","autofocus","listOfTopItem","inputValueChange","tokenize","deleteItem","keydown"],["origin","cdkOverlayOrigin"],[3,"loading","search","suffixIcon",4,"ngIf"],[3,"clearIcon","clear",4,"ngIf"],["cdkConnectedOverlay","","nzConnectedOverlay","",3,"cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayMinWidth","cdkConnectedOverlayWidth","cdkConnectedOverlayOrigin","cdkConnectedOverlayTransformOriginOn","cdkConnectedOverlayPanelClass","cdkConnectedOverlayOpen","overlayOutsideClick","detach","positionChange"],[3,"loading","search","suffixIcon"],[3,"clearIcon","clear"],[3,"ngStyle","itemSize","maxItemLength","matchWidth","nzNoAnimation","listOfContainerItem","menuItemSelectedIcon","notFoundContent","activatedValue","listOfSelectedValue","dropdownRender","compareWith","mode","keydown","itemClick","scrollToBottom"]],template:function(we,Pe){if(1&we&&(e.TgZ(0,"nz-select-top-control",0,1),e.NdJ("inputValueChange",function(Ie){return Pe.onInputValueChange(Ie)})("tokenize",function(Ie){return Pe.onTokenSeparate(Ie)})("deleteItem",function(Ie){return Pe.onItemDelete(Ie)})("keydown",function(Ie){return Pe.onKeyDown(Ie)}),e.qZA(),e.YNc(2,Dn,1,3,"nz-select-arrow",2),e.YNc(3,Nt,1,1,"nz-select-clear",3),e.YNc(4,Zt,1,19,"ng-template",4),e.NdJ("overlayOutsideClick",function(Ie){return Pe.onClickOutside(Ie)})("detach",function(){return Pe.setOpenState(!1)})("positionChange",function(Ie){return Pe.onPositionChange(Ie)})),2&we){const Qe=e.MAs(1);e.Q6J("nzId",Pe.nzId)("open",Pe.nzOpen)("disabled",Pe.nzDisabled)("mode",Pe.nzMode)("@.disabled",null==Pe.noAnimation?null:Pe.noAnimation.nzNoAnimation)("nzNoAnimation",null==Pe.noAnimation?null:Pe.noAnimation.nzNoAnimation)("maxTagPlaceholder",Pe.nzMaxTagPlaceholder)("removeIcon",Pe.nzRemoveIcon)("placeHolder",Pe.nzPlaceHolder)("maxTagCount",Pe.nzMaxTagCount)("customTemplate",Pe.nzCustomTemplate)("tokenSeparators",Pe.nzTokenSeparators)("showSearch",Pe.nzShowSearch)("autofocus",Pe.nzAutoFocus)("listOfTopItem",Pe.listOfTopItem),e.xp6(2),e.Q6J("ngIf",Pe.nzShowArrow),e.xp6(1),e.Q6J("ngIf",Pe.nzAllowClear&&!Pe.nzDisabled&&Pe.listOfValue.length),e.xp6(1),e.Q6J("cdkConnectedOverlayHasBackdrop",Pe.nzBackdrop)("cdkConnectedOverlayMinWidth",Pe.nzDropdownMatchSelectWidth?null:Pe.triggerWidth)("cdkConnectedOverlayWidth",Pe.nzDropdownMatchSelectWidth?Pe.triggerWidth:null)("cdkConnectedOverlayOrigin",Qe)("cdkConnectedOverlayTransformOriginOn",".ant-select-dropdown")("cdkConnectedOverlayPanelClass",Pe.nzDropdownClassName)("cdkConnectedOverlayOpen",Pe.nzOpen)}},directives:[De,_t,cr,it,A.w,Z.xu,L.P,R.O5,Z.pI,$.hQ,R.PC],encapsulation:2,data:{animation:[Y.mF]},changeDetection:0}),(0,P.gn)([(0,B.oS)()],qe.prototype,"nzSuffixIcon",void 0),(0,P.gn)([(0,I.yF)()],qe.prototype,"nzAllowClear",void 0),(0,P.gn)([(0,B.oS)(),(0,I.yF)()],qe.prototype,"nzBorderless",void 0),(0,P.gn)([(0,I.yF)()],qe.prototype,"nzShowSearch",void 0),(0,P.gn)([(0,I.yF)()],qe.prototype,"nzLoading",void 0),(0,P.gn)([(0,I.yF)()],qe.prototype,"nzAutoFocus",void 0),(0,P.gn)([(0,I.yF)()],qe.prototype,"nzAutoClearSearchValue",void 0),(0,P.gn)([(0,I.yF)()],qe.prototype,"nzServerSearch",void 0),(0,P.gn)([(0,I.yF)()],qe.prototype,"nzDisabled",void 0),(0,P.gn)([(0,I.yF)()],qe.prototype,"nzOpen",void 0),(0,P.gn)([(0,B.oS)(),(0,I.yF)()],qe.prototype,"nzBackdrop",void 0),qe})(),Pr=(()=>{class qe{}return qe.\u0275fac=function(we){return new(we||qe)},qe.\u0275mod=e.oAB({type:qe}),qe.\u0275inj=e.cJS({imports:[[F.vT,R.ez,oe.YI,U.u5,D.ud,Z.U8,V.PV,k.T,se.Xo,$.e4,L.g,A.a,he.Cl,W.rt]]}),qe})()},8144:(Gt,ht,J)=>{"use strict";J.d(ht,{NU:()=>P,$1:()=>R,zf:()=>I});var e=J(226),O=J(9808),ee=J(5e3),j=J(655),S=J(7579),fe=J(2722),he=J(9439),se=J(1721);function k(H,Z){}const K=function(H){return{$implicit:H}};function ne(H,Z){if(1&H&&(ee.TgZ(0,"span",4),ee.YNc(1,k,0,0,"ng-template",5),ee.qZA()),2&H){const U=ee.oxw(),Y=U.last,B=U.index,q=ee.oxw();ee.Udp("margin-bottom","vertical"===q.nzDirection?Y?null:q.spaceSize:null,"px")("margin-right","horizontal"===q.nzDirection?Y?null:q.spaceSize:null,"px"),ee.xp6(1),ee.Q6J("ngTemplateOutlet",q.nzSplit)("ngTemplateOutletContext",ee.VKq(6,K,B))}}function ie(H,Z){if(1&H&&(ee.TgZ(0,"div",1),ee.GkF(1,2),ee.qZA(),ee.YNc(2,ne,2,8,"span",3)),2&H){const U=Z.$implicit,Y=Z.last,B=ee.oxw();ee.Udp("margin-bottom","vertical"===B.nzDirection?Y?null:B.spaceSize:null,"px")("margin-right","horizontal"===B.nzDirection?Y?null:B.spaceSize:null,"px"),ee.xp6(1),ee.Q6J("ngTemplateOutlet",U),ee.xp6(1),ee.Q6J("ngIf",B.nzSplit&&!Y)}}const re=["*"];let R=(()=>{class H{constructor(){}}return H.\u0275fac=function(U){return new(U||H)},H.\u0275dir=ee.lG2({type:H,selectors:[["","nzSpaceItem",""]]}),H})();const A={small:8,middle:16,large:24};let P=(()=>{class H{constructor(U,Y){this.nzConfigService=U,this.cdr=Y,this._nzModuleName="space",this.nzDirection="horizontal",this.nzSplit=null,this.nzWrap=!1,this.nzSize="small",this.spaceSize=A.small,this.destroy$=new S.x}updateSpaceItems(){this.spaceSize=("string"==typeof this.nzSize?A[this.nzSize]:this.nzSize)/(this.nzSplit?2:1),this.cdr.markForCheck()}ngOnChanges(){this.updateSpaceItems(),this.mergedAlign=void 0===this.nzAlign&&"horizontal"===this.nzDirection?"center":this.nzAlign}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngAfterContentInit(){this.updateSpaceItems(),this.items.changes.pipe((0,fe.R)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}}return H.\u0275fac=function(U){return new(U||H)(ee.Y36(he.jY),ee.Y36(ee.sBO))},H.\u0275cmp=ee.Xpm({type:H,selectors:[["nz-space"],["","nz-space",""]],contentQueries:function(U,Y,B){if(1&U&&ee.Suo(B,R,4,ee.Rgc),2&U){let q;ee.iGM(q=ee.CRH())&&(Y.items=q)}},hostAttrs:[1,"ant-space"],hostVars:14,hostBindings:function(U,Y){2&U&&(ee.Udp("flex-wrap",Y.nzWrap?"wrap":null),ee.ekj("ant-space-horizontal","horizontal"===Y.nzDirection)("ant-space-vertical","vertical"===Y.nzDirection)("ant-space-align-start","start"===Y.mergedAlign)("ant-space-align-end","end"===Y.mergedAlign)("ant-space-align-center","center"===Y.mergedAlign)("ant-space-align-baseline","baseline"===Y.mergedAlign))},inputs:{nzDirection:"nzDirection",nzAlign:"nzAlign",nzSplit:"nzSplit",nzWrap:"nzWrap",nzSize:"nzSize"},exportAs:["NzSpace"],features:[ee.TTD],ngContentSelectors:re,decls:2,vars:1,consts:[["ngFor","",3,"ngForOf"],[1,"ant-space-item"],[3,"ngTemplateOutlet"],["class","ant-space-split",3,"margin-bottom","margin-right",4,"ngIf"],[1,"ant-space-split"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(U,Y){1&U&&(ee.F$t(),ee.Hsn(0),ee.YNc(1,ie,3,6,"ng-template",0)),2&U&&(ee.xp6(1),ee.Q6J("ngForOf",Y.items))},directives:[O.sg,O.tP,O.O5],encapsulation:2,changeDetection:0}),(0,j.gn)([(0,se.yF)()],H.prototype,"nzWrap",void 0),(0,j.gn)([(0,he.oS)()],H.prototype,"nzSize",void 0),H})(),I=(()=>{class H{}return H.\u0275fac=function(U){return new(U||H)},H.\u0275mod=ee.oAB({type:H}),H.\u0275inj=ee.cJS({imports:[[e.vT,O.ez]]}),H})()},6462:(Gt,ht,J)=>{"use strict";J.d(ht,{i:()=>B,m:()=>q});var e=J(655),O=J(1159),ee=J(5e3),j=J(2382),S=J(7579),fe=J(4968),he=J(2722),se=J(9439),k=J(1721),K=J(5664),ne=J(226),ie=J(2643),re=J(9808),R=J(647),V=J(969);const A=["switchElement"];function P(W,L){1&W&&ee._UZ(0,"i",8)}function I(W,L){if(1&W&&(ee.ynx(0),ee._uU(1),ee.BQk()),2&W){const D=ee.oxw(2);ee.xp6(1),ee.Oqu(D.nzCheckedChildren)}}function H(W,L){if(1&W&&(ee.ynx(0),ee.YNc(1,I,2,1,"ng-container",9),ee.BQk()),2&W){const D=ee.oxw();ee.xp6(1),ee.Q6J("nzStringTemplateOutlet",D.nzCheckedChildren)}}function Z(W,L){if(1&W&&(ee.ynx(0),ee._uU(1),ee.BQk()),2&W){const D=ee.oxw(2);ee.xp6(1),ee.Oqu(D.nzUnCheckedChildren)}}function U(W,L){if(1&W&&ee.YNc(0,Z,2,1,"ng-container",9),2&W){const D=ee.oxw();ee.Q6J("nzStringTemplateOutlet",D.nzUnCheckedChildren)}}let B=(()=>{class W{constructor(D,F,$,oe,M,be){this.nzConfigService=D,this.host=F,this.ngZone=$,this.cdr=oe,this.focusMonitor=M,this.directionality=be,this._nzModuleName="switch",this.isChecked=!1,this.onChange=()=>{},this.onTouched=()=>{},this.nzLoading=!1,this.nzDisabled=!1,this.nzControl=!1,this.nzCheckedChildren=null,this.nzUnCheckedChildren=null,this.nzSize="default",this.dir="ltr",this.destroy$=new S.x}updateValue(D){this.isChecked!==D&&(this.isChecked=D,this.onChange(this.isChecked))}focus(){this.focusMonitor.focusVia(this.switchElement.nativeElement,"keyboard")}blur(){this.switchElement.nativeElement.blur()}ngOnInit(){this.directionality.change.pipe((0,he.R)(this.destroy$)).subscribe(D=>{this.dir=D,this.cdr.detectChanges()}),this.dir=this.directionality.value,this.ngZone.runOutsideAngular(()=>{(0,fe.R)(this.host.nativeElement,"click").pipe((0,he.R)(this.destroy$)).subscribe(D=>{D.preventDefault(),!(this.nzControl||this.nzDisabled||this.nzLoading)&&this.ngZone.run(()=>{this.updateValue(!this.isChecked),this.cdr.markForCheck()})}),(0,fe.R)(this.switchElement.nativeElement,"keydown").pipe((0,he.R)(this.destroy$)).subscribe(D=>{if(this.nzControl||this.nzDisabled||this.nzLoading)return;const{keyCode:F}=D;F!==O.oh&&F!==O.SV&&F!==O.L_&&F!==O.K5||(D.preventDefault(),this.ngZone.run(()=>{F===O.oh?this.updateValue(!1):F===O.SV?this.updateValue(!0):(F===O.L_||F===O.K5)&&this.updateValue(!this.isChecked),this.cdr.markForCheck()}))})})}ngAfterViewInit(){this.focusMonitor.monitor(this.switchElement.nativeElement,!0).pipe((0,he.R)(this.destroy$)).subscribe(D=>{D||Promise.resolve().then(()=>this.onTouched())})}ngOnDestroy(){this.focusMonitor.stopMonitoring(this.switchElement.nativeElement),this.destroy$.next(),this.destroy$.complete()}writeValue(D){this.isChecked=D,this.cdr.markForCheck()}registerOnChange(D){this.onChange=D}registerOnTouched(D){this.onTouched=D}setDisabledState(D){this.nzDisabled=D,this.cdr.markForCheck()}}return W.\u0275fac=function(D){return new(D||W)(ee.Y36(se.jY),ee.Y36(ee.SBq),ee.Y36(ee.R0b),ee.Y36(ee.sBO),ee.Y36(K.tE),ee.Y36(ne.Is,8))},W.\u0275cmp=ee.Xpm({type:W,selectors:[["nz-switch"]],viewQuery:function(D,F){if(1&D&&ee.Gf(A,7),2&D){let $;ee.iGM($=ee.CRH())&&(F.switchElement=$.first)}},inputs:{nzLoading:"nzLoading",nzDisabled:"nzDisabled",nzControl:"nzControl",nzCheckedChildren:"nzCheckedChildren",nzUnCheckedChildren:"nzUnCheckedChildren",nzSize:"nzSize"},exportAs:["nzSwitch"],features:[ee._Bn([{provide:j.JU,useExisting:(0,ee.Gpc)(()=>W),multi:!0}])],decls:9,vars:15,consts:[["nz-wave","","type","button",1,"ant-switch",3,"disabled","nzWaveExtraNode"],["switchElement",""],[1,"ant-switch-handle"],["nz-icon","","nzType","loading","class","ant-switch-loading-icon",4,"ngIf"],[1,"ant-switch-inner"],[4,"ngIf","ngIfElse"],["uncheckTemplate",""],[1,"ant-click-animating-node"],["nz-icon","","nzType","loading",1,"ant-switch-loading-icon"],[4,"nzStringTemplateOutlet"]],template:function(D,F){if(1&D&&(ee.TgZ(0,"button",0,1)(2,"span",2),ee.YNc(3,P,1,0,"i",3),ee.qZA(),ee.TgZ(4,"span",4),ee.YNc(5,H,2,1,"ng-container",5),ee.YNc(6,U,1,1,"ng-template",null,6,ee.W1O),ee.qZA(),ee._UZ(8,"div",7),ee.qZA()),2&D){const $=ee.MAs(7);ee.ekj("ant-switch-checked",F.isChecked)("ant-switch-loading",F.nzLoading)("ant-switch-disabled",F.nzDisabled)("ant-switch-small","small"===F.nzSize)("ant-switch-rtl","rtl"===F.dir),ee.Q6J("disabled",F.nzDisabled)("nzWaveExtraNode",!0),ee.xp6(3),ee.Q6J("ngIf",F.nzLoading),ee.xp6(2),ee.Q6J("ngIf",F.isChecked)("ngIfElse",$)}},directives:[ie.dQ,re.O5,R.Ls,V.f],encapsulation:2,changeDetection:0}),(0,e.gn)([(0,k.yF)()],W.prototype,"nzLoading",void 0),(0,e.gn)([(0,k.yF)()],W.prototype,"nzDisabled",void 0),(0,e.gn)([(0,k.yF)()],W.prototype,"nzControl",void 0),(0,e.gn)([(0,se.oS)()],W.prototype,"nzSize",void 0),W})(),q=(()=>{class W{}return W.\u0275fac=function(D){return new(D||W)},W.\u0275mod=ee.oAB({type:W}),W.\u0275inj=ee.cJS({imports:[[ne.vT,re.ez,ie.vG,R.PV,V.T]]}),W})()},592:(Gt,ht,J)=>{"use strict";J.d(ht,{Uo:()=>er,N8:()=>po,HQ:()=>Fi,p0:()=>ho,h7:()=>co,qD:()=>xi,_C:()=>fr,g6:()=>xr,Om:()=>os,$Z:()=>go});var e=J(226),O=J(925),ee=J(3088),j=J(9808),S=J(5e3),fe=J(2382),he=J(6042),se=J(2844),k=J(6114),K=J(969),ne=J(3677),ie=J(685),re=J(7904),R=J(647),V=J(4219),A=J(655),P=J(7579),I=J(4707),H=J(2722),Z=J(9439),U=J(4090),Y=J(1721),B=J(8054);const q=["nz-pagination-item",""];function W(Ne,ot){if(1&Ne&&(S.TgZ(0,"a"),S._uU(1),S.qZA()),2&Ne){const le=S.oxw().page;S.xp6(1),S.Oqu(le)}}function L(Ne,ot){1&Ne&&S._UZ(0,"i",9)}function D(Ne,ot){1&Ne&&S._UZ(0,"i",10)}function F(Ne,ot){if(1&Ne&&(S.TgZ(0,"button",6),S.ynx(1,2),S.YNc(2,L,1,0,"i",7),S.YNc(3,D,1,0,"i",8),S.BQk(),S.qZA()),2&Ne){const le=S.oxw(2);S.Q6J("disabled",le.disabled),S.xp6(1),S.Q6J("ngSwitch",le.direction),S.xp6(1),S.Q6J("ngSwitchCase","rtl")}}function $(Ne,ot){1&Ne&&S._UZ(0,"i",10)}function oe(Ne,ot){1&Ne&&S._UZ(0,"i",9)}function M(Ne,ot){if(1&Ne&&(S.TgZ(0,"button",6),S.ynx(1,2),S.YNc(2,$,1,0,"i",11),S.YNc(3,oe,1,0,"i",12),S.BQk(),S.qZA()),2&Ne){const le=S.oxw(2);S.Q6J("disabled",le.disabled),S.xp6(1),S.Q6J("ngSwitch",le.direction),S.xp6(1),S.Q6J("ngSwitchCase","rtl")}}function be(Ne,ot){1&Ne&&S._UZ(0,"i",20)}function Me(Ne,ot){1&Ne&&S._UZ(0,"i",21)}function Ze(Ne,ot){if(1&Ne&&(S.ynx(0,2),S.YNc(1,be,1,0,"i",18),S.YNc(2,Me,1,0,"i",19),S.BQk()),2&Ne){const le=S.oxw(4);S.Q6J("ngSwitch",le.direction),S.xp6(1),S.Q6J("ngSwitchCase","rtl")}}function Fe(Ne,ot){1&Ne&&S._UZ(0,"i",21)}function je(Ne,ot){1&Ne&&S._UZ(0,"i",20)}function Ce(Ne,ot){if(1&Ne&&(S.ynx(0,2),S.YNc(1,Fe,1,0,"i",22),S.YNc(2,je,1,0,"i",23),S.BQk()),2&Ne){const le=S.oxw(4);S.Q6J("ngSwitch",le.direction),S.xp6(1),S.Q6J("ngSwitchCase","rtl")}}function Se(Ne,ot){if(1&Ne&&(S.TgZ(0,"div",15),S.ynx(1,2),S.YNc(2,Ze,3,2,"ng-container",16),S.YNc(3,Ce,3,2,"ng-container",16),S.BQk(),S.TgZ(4,"span",17),S._uU(5,"\u2022\u2022\u2022"),S.qZA()()),2&Ne){const le=S.oxw(2).$implicit;S.xp6(1),S.Q6J("ngSwitch",le),S.xp6(1),S.Q6J("ngSwitchCase","prev_5"),S.xp6(1),S.Q6J("ngSwitchCase","next_5")}}function rt(Ne,ot){if(1&Ne&&(S.ynx(0),S.TgZ(1,"a",13),S.YNc(2,Se,6,3,"div",14),S.qZA(),S.BQk()),2&Ne){const le=S.oxw().$implicit;S.xp6(1),S.Q6J("ngSwitch",le)}}function ct(Ne,ot){1&Ne&&(S.ynx(0,2),S.YNc(1,W,2,1,"a",3),S.YNc(2,F,4,3,"button",4),S.YNc(3,M,4,3,"button",4),S.YNc(4,rt,3,1,"ng-container",5),S.BQk()),2&Ne&&(S.Q6J("ngSwitch",ot.$implicit),S.xp6(1),S.Q6J("ngSwitchCase","page"),S.xp6(1),S.Q6J("ngSwitchCase","prev"),S.xp6(1),S.Q6J("ngSwitchCase","next"))}function Lt(Ne,ot){}const pt=function(Ne,ot){return{$implicit:Ne,page:ot}},gt=["containerTemplate"];function st(Ne,ot){if(1&Ne){const le=S.EpF();S.TgZ(0,"li",1),S.NdJ("click",function(){return S.CHM(le),S.oxw().prePage()}),S.qZA(),S.TgZ(1,"li",2)(2,"input",3),S.NdJ("keydown.enter",function(ut){return S.CHM(le),S.oxw().jumpToPageViaInput(ut)}),S.qZA(),S.TgZ(3,"span",4),S._uU(4,"/"),S.qZA(),S._uU(5),S.qZA(),S.TgZ(6,"li",5),S.NdJ("click",function(){return S.CHM(le),S.oxw().nextPage()}),S.qZA()}if(2&Ne){const le=S.oxw();S.Q6J("disabled",le.isFirstIndex)("direction",le.dir)("itemRender",le.itemRender),S.uIk("title",le.locale.prev_page),S.xp6(1),S.uIk("title",le.pageIndex+"/"+le.lastIndex),S.xp6(1),S.Q6J("disabled",le.disabled)("value",le.pageIndex),S.xp6(3),S.hij(" ",le.lastIndex," "),S.xp6(1),S.Q6J("disabled",le.isLastIndex)("direction",le.dir)("itemRender",le.itemRender),S.uIk("title",null==le.locale?null:le.locale.next_page)}}const zt=["nz-pagination-options",""];function Pt(Ne,ot){if(1&Ne&&S._UZ(0,"nz-option",4),2&Ne){const le=ot.$implicit;S.Q6J("nzLabel",le.label)("nzValue",le.value)}}function Wt(Ne,ot){if(1&Ne){const le=S.EpF();S.TgZ(0,"nz-select",2),S.NdJ("ngModelChange",function(ut){return S.CHM(le),S.oxw().onPageSizeChange(ut)}),S.YNc(1,Pt,1,2,"nz-option",3),S.qZA()}if(2&Ne){const le=S.oxw();S.Q6J("nzDisabled",le.disabled)("nzSize",le.nzSize)("ngModel",le.pageSize),S.xp6(1),S.Q6J("ngForOf",le.listOfPageSizeOption)("ngForTrackBy",le.trackByOption)}}function sn(Ne,ot){if(1&Ne){const le=S.EpF();S.TgZ(0,"div",5),S._uU(1),S.TgZ(2,"input",6),S.NdJ("keydown.enter",function(ut){return S.CHM(le),S.oxw().jumpToPageViaInput(ut)}),S.qZA(),S._uU(3),S.qZA()}if(2&Ne){const le=S.oxw();S.xp6(1),S.hij(" ",le.locale.jump_to," "),S.xp6(1),S.Q6J("disabled",le.disabled),S.xp6(1),S.hij(" ",le.locale.page," ")}}function Vn(Ne,ot){}const wn=function(Ne,ot){return{$implicit:Ne,range:ot}};function qn(Ne,ot){if(1&Ne&&(S.TgZ(0,"li",4),S.YNc(1,Vn,0,0,"ng-template",5),S.qZA()),2&Ne){const le=S.oxw(2);S.xp6(1),S.Q6J("ngTemplateOutlet",le.showTotal)("ngTemplateOutletContext",S.WLB(2,wn,le.total,le.ranges))}}function fn(Ne,ot){if(1&Ne){const le=S.EpF();S.TgZ(0,"li",6),S.NdJ("gotoIndex",function(ut){return S.CHM(le),S.oxw(2).jumpPage(ut)})("diffIndex",function(ut){return S.CHM(le),S.oxw(2).jumpDiff(ut)}),S.qZA()}if(2&Ne){const le=ot.$implicit,Ae=S.oxw(2);S.Q6J("locale",Ae.locale)("type",le.type)("index",le.index)("disabled",!!le.disabled)("itemRender",Ae.itemRender)("active",Ae.pageIndex===le.index)("direction",Ae.dir)}}function $n(Ne,ot){if(1&Ne){const le=S.EpF();S.TgZ(0,"div",7),S.NdJ("pageIndexChange",function(ut){return S.CHM(le),S.oxw(2).onPageIndexChange(ut)})("pageSizeChange",function(ut){return S.CHM(le),S.oxw(2).onPageSizeChange(ut)}),S.qZA()}if(2&Ne){const le=S.oxw(2);S.Q6J("total",le.total)("locale",le.locale)("disabled",le.disabled)("nzSize",le.nzSize)("showSizeChanger",le.showSizeChanger)("showQuickJumper",le.showQuickJumper)("pageIndex",le.pageIndex)("pageSize",le.pageSize)("pageSizeOptions",le.pageSizeOptions)}}function ur(Ne,ot){if(1&Ne&&(S.YNc(0,qn,2,5,"li",1),S.YNc(1,fn,1,7,"li",2),S.YNc(2,$n,1,9,"div",3)),2&Ne){const le=S.oxw();S.Q6J("ngIf",le.showTotal),S.xp6(1),S.Q6J("ngForOf",le.listOfPageItem)("ngForTrackBy",le.trackByPageItem),S.xp6(1),S.Q6J("ngIf",le.showQuickJumper||le.showSizeChanger)}}function Pn(Ne,ot){}function Yn(Ne,ot){if(1&Ne&&(S.ynx(0),S.YNc(1,Pn,0,0,"ng-template",6),S.BQk()),2&Ne){S.oxw(2);const le=S.MAs(2);S.xp6(1),S.Q6J("ngTemplateOutlet",le.template)}}function hr(Ne,ot){if(1&Ne&&(S.ynx(0),S.YNc(1,Yn,2,1,"ng-container",5),S.BQk()),2&Ne){const le=S.oxw(),Ae=S.MAs(4);S.xp6(1),S.Q6J("ngIf",le.nzSimple)("ngIfElse",Ae.template)}}let vr=(()=>{class Ne{constructor(){this.active=!1,this.index=null,this.disabled=!1,this.direction="ltr",this.type=null,this.itemRender=null,this.diffIndex=new S.vpe,this.gotoIndex=new S.vpe,this.title=null}clickItem(){this.disabled||("page"===this.type?this.gotoIndex.emit(this.index):this.diffIndex.emit({next:1,prev:-1,prev_5:-5,next_5:5}[this.type]))}ngOnChanges(le){var Ae,ut,Tt,Jt;const{locale:on,index:nn,type:tr}=le;(on||nn||tr)&&(this.title={page:`${this.index}`,next:null===(Ae=this.locale)||void 0===Ae?void 0:Ae.next_page,prev:null===(ut=this.locale)||void 0===ut?void 0:ut.prev_page,prev_5:null===(Tt=this.locale)||void 0===Tt?void 0:Tt.prev_5,next_5:null===(Jt=this.locale)||void 0===Jt?void 0:Jt.next_5}[this.type])}}return Ne.\u0275fac=function(le){return new(le||Ne)},Ne.\u0275cmp=S.Xpm({type:Ne,selectors:[["li","nz-pagination-item",""]],hostVars:19,hostBindings:function(le,Ae){1&le&&S.NdJ("click",function(){return Ae.clickItem()}),2&le&&(S.uIk("title",Ae.title),S.ekj("ant-pagination-prev","prev"===Ae.type)("ant-pagination-next","next"===Ae.type)("ant-pagination-item","page"===Ae.type)("ant-pagination-jump-prev","prev_5"===Ae.type)("ant-pagination-jump-prev-custom-icon","prev_5"===Ae.type)("ant-pagination-jump-next","next_5"===Ae.type)("ant-pagination-jump-next-custom-icon","next_5"===Ae.type)("ant-pagination-disabled",Ae.disabled)("ant-pagination-item-active",Ae.active))},inputs:{active:"active",locale:"locale",index:"index",disabled:"disabled",direction:"direction",type:"type",itemRender:"itemRender"},outputs:{diffIndex:"diffIndex",gotoIndex:"gotoIndex"},features:[S.TTD],attrs:q,decls:3,vars:5,consts:[["renderItemTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngSwitch"],[4,"ngSwitchCase"],["type","button","class","ant-pagination-item-link",3,"disabled",4,"ngSwitchCase"],[4,"ngSwitchDefault"],["type","button",1,"ant-pagination-item-link",3,"disabled"],["nz-icon","","nzType","right",4,"ngSwitchCase"],["nz-icon","","nzType","left",4,"ngSwitchDefault"],["nz-icon","","nzType","right"],["nz-icon","","nzType","left"],["nz-icon","","nzType","left",4,"ngSwitchCase"],["nz-icon","","nzType","right",4,"ngSwitchDefault"],[1,"ant-pagination-item-link",3,"ngSwitch"],["class","ant-pagination-item-container",4,"ngSwitchDefault"],[1,"ant-pagination-item-container"],[3,"ngSwitch",4,"ngSwitchCase"],[1,"ant-pagination-item-ellipsis"],["nz-icon","","nzType","double-right","class","ant-pagination-item-link-icon",4,"ngSwitchCase"],["nz-icon","","nzType","double-left","class","ant-pagination-item-link-icon",4,"ngSwitchDefault"],["nz-icon","","nzType","double-right",1,"ant-pagination-item-link-icon"],["nz-icon","","nzType","double-left",1,"ant-pagination-item-link-icon"],["nz-icon","","nzType","double-left","class","ant-pagination-item-link-icon",4,"ngSwitchCase"],["nz-icon","","nzType","double-right","class","ant-pagination-item-link-icon",4,"ngSwitchDefault"]],template:function(le,Ae){if(1&le&&(S.YNc(0,ct,5,4,"ng-template",null,0,S.W1O),S.YNc(2,Lt,0,0,"ng-template",1)),2&le){const ut=S.MAs(1);S.xp6(2),S.Q6J("ngTemplateOutlet",Ae.itemRender||ut)("ngTemplateOutletContext",S.WLB(2,pt,Ae.type,Ae.index))}},directives:[j.RF,j.n9,R.Ls,j.ED,j.tP],encapsulation:2,changeDetection:0}),Ne})(),ir=(()=>{class Ne{constructor(le,Ae,ut,Tt){this.cdr=le,this.renderer=Ae,this.elementRef=ut,this.directionality=Tt,this.itemRender=null,this.disabled=!1,this.total=0,this.pageIndex=1,this.pageSize=10,this.pageIndexChange=new S.vpe,this.lastIndex=0,this.isFirstIndex=!1,this.isLastIndex=!1,this.dir="ltr",this.destroy$=new P.x,Ae.removeChild(Ae.parentNode(ut.nativeElement),ut.nativeElement)}ngOnInit(){var le;null===(le=this.directionality.change)||void 0===le||le.pipe((0,H.R)(this.destroy$)).subscribe(Ae=>{this.dir=Ae,this.updateRtlStyle(),this.cdr.detectChanges()}),this.dir=this.directionality.value,this.updateRtlStyle()}updateRtlStyle(){"rtl"===this.dir?this.renderer.addClass(this.elementRef.nativeElement,"ant-pagination-rtl"):this.renderer.removeClass(this.elementRef.nativeElement,"ant-pagination-rtl")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}jumpToPageViaInput(le){const Ae=le.target,ut=(0,Y.He)(Ae.value,this.pageIndex);this.onPageIndexChange(ut),Ae.value=`${this.pageIndex}`}prePage(){this.onPageIndexChange(this.pageIndex-1)}nextPage(){this.onPageIndexChange(this.pageIndex+1)}onPageIndexChange(le){this.pageIndexChange.next(le)}updateBindingValue(){this.lastIndex=Math.ceil(this.total/this.pageSize),this.isFirstIndex=1===this.pageIndex,this.isLastIndex=this.pageIndex===this.lastIndex}ngOnChanges(le){const{pageIndex:Ae,total:ut,pageSize:Tt}=le;(Ae||ut||Tt)&&this.updateBindingValue()}}return Ne.\u0275fac=function(le){return new(le||Ne)(S.Y36(S.sBO),S.Y36(S.Qsj),S.Y36(S.SBq),S.Y36(e.Is,8))},Ne.\u0275cmp=S.Xpm({type:Ne,selectors:[["nz-pagination-simple"]],viewQuery:function(le,Ae){if(1&le&&S.Gf(gt,7),2&le){let ut;S.iGM(ut=S.CRH())&&(Ae.template=ut.first)}},inputs:{itemRender:"itemRender",disabled:"disabled",locale:"locale",total:"total",pageIndex:"pageIndex",pageSize:"pageSize"},outputs:{pageIndexChange:"pageIndexChange"},features:[S.TTD],decls:2,vars:0,consts:[["containerTemplate",""],["nz-pagination-item","","type","prev",3,"disabled","direction","itemRender","click"],[1,"ant-pagination-simple-pager"],["size","3",3,"disabled","value","keydown.enter"],[1,"ant-pagination-slash"],["nz-pagination-item","","type","next",3,"disabled","direction","itemRender","click"]],template:function(le,Ae){1&le&&S.YNc(0,st,7,12,"ng-template",null,0,S.W1O)},directives:[vr],encapsulation:2,changeDetection:0}),Ne})(),tn=(()=>{class Ne{constructor(){this.nzSize="default",this.disabled=!1,this.showSizeChanger=!1,this.showQuickJumper=!1,this.total=0,this.pageIndex=1,this.pageSize=10,this.pageSizeOptions=[],this.pageIndexChange=new S.vpe,this.pageSizeChange=new S.vpe,this.listOfPageSizeOption=[]}onPageSizeChange(le){this.pageSize!==le&&this.pageSizeChange.next(le)}jumpToPageViaInput(le){const Ae=le.target,ut=Math.floor((0,Y.He)(Ae.value,this.pageIndex));this.pageIndexChange.next(ut),Ae.value=""}trackByOption(le,Ae){return Ae.value}ngOnChanges(le){const{pageSize:Ae,pageSizeOptions:ut,locale:Tt}=le;(Ae||ut||Tt)&&(this.listOfPageSizeOption=[...new Set([...this.pageSizeOptions,this.pageSize])].map(Jt=>({value:Jt,label:`${Jt} ${this.locale.items_per_page}`})))}}return Ne.\u0275fac=function(le){return new(le||Ne)},Ne.\u0275cmp=S.Xpm({type:Ne,selectors:[["div","nz-pagination-options",""]],hostAttrs:[1,"ant-pagination-options"],inputs:{nzSize:"nzSize",disabled:"disabled",showSizeChanger:"showSizeChanger",showQuickJumper:"showQuickJumper",locale:"locale",total:"total",pageIndex:"pageIndex",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions"},outputs:{pageIndexChange:"pageIndexChange",pageSizeChange:"pageSizeChange"},features:[S.TTD],attrs:zt,decls:2,vars:2,consts:[["class","ant-pagination-options-size-changer",3,"nzDisabled","nzSize","ngModel","ngModelChange",4,"ngIf"],["class","ant-pagination-options-quick-jumper",4,"ngIf"],[1,"ant-pagination-options-size-changer",3,"nzDisabled","nzSize","ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf","ngForTrackBy"],[3,"nzLabel","nzValue"],[1,"ant-pagination-options-quick-jumper"],[3,"disabled","keydown.enter"]],template:function(le,Ae){1&le&&(S.YNc(0,Wt,2,5,"nz-select",0),S.YNc(1,sn,4,3,"div",1)),2&le&&(S.Q6J("ngIf",Ae.showSizeChanger),S.xp6(1),S.Q6J("ngIf",Ae.showQuickJumper))},directives:[B.Vq,B.Ip,j.O5,fe.JJ,fe.On,j.sg],encapsulation:2,changeDetection:0}),Ne})(),Sr=(()=>{class Ne{constructor(le,Ae,ut,Tt){this.cdr=le,this.renderer=Ae,this.elementRef=ut,this.directionality=Tt,this.nzSize="default",this.itemRender=null,this.showTotal=null,this.disabled=!1,this.showSizeChanger=!1,this.showQuickJumper=!1,this.total=0,this.pageIndex=1,this.pageSize=10,this.pageSizeOptions=[10,20,30,40],this.pageIndexChange=new S.vpe,this.pageSizeChange=new S.vpe,this.ranges=[0,0],this.listOfPageItem=[],this.dir="ltr",this.destroy$=new P.x,Ae.removeChild(Ae.parentNode(ut.nativeElement),ut.nativeElement)}ngOnInit(){var le;null===(le=this.directionality.change)||void 0===le||le.pipe((0,H.R)(this.destroy$)).subscribe(Ae=>{this.dir=Ae,this.updateRtlStyle(),this.cdr.detectChanges()}),this.dir=this.directionality.value,this.updateRtlStyle()}updateRtlStyle(){"rtl"===this.dir?this.renderer.addClass(this.elementRef.nativeElement,"ant-pagination-rtl"):this.renderer.removeClass(this.elementRef.nativeElement,"ant-pagination-rtl")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}jumpPage(le){this.onPageIndexChange(le)}jumpDiff(le){this.jumpPage(this.pageIndex+le)}trackByPageItem(le,Ae){return`${Ae.type}-${Ae.index}`}onPageIndexChange(le){this.pageIndexChange.next(le)}onPageSizeChange(le){this.pageSizeChange.next(le)}getLastIndex(le,Ae){return Math.ceil(le/Ae)}buildIndexes(){const le=this.getLastIndex(this.total,this.pageSize);this.listOfPageItem=this.getListOfPageItem(this.pageIndex,le)}getListOfPageItem(le,Ae){const Tt=(Jt,on)=>{const nn=[];for(let tr=Jt;tr<=on;tr++)nn.push({index:tr,type:"page"});return nn};return Jt=Ae<=9?Tt(1,Ae):((on,nn)=>{let tr=[];const pr={type:"prev_5"},Tn={type:"next_5"},Zr=Tt(1,1),na=Tt(Ae,Ae);return tr=on<5?[...Tt(2,4===on?6:5),Tn]:on<nn-3?[pr,...Tt(on-2,on+2),Tn]:[pr,...Tt(on===nn-3?nn-5:nn-4,nn-1)],[...Zr,...tr,...na]})(le,Ae),[{type:"prev",disabled:1===le},...Jt,{type:"next",disabled:le===Ae}];var Jt}ngOnChanges(le){const{pageIndex:Ae,pageSize:ut,total:Tt}=le;(Ae||ut||Tt)&&(this.ranges=[(this.pageIndex-1)*this.pageSize+1,Math.min(this.pageIndex*this.pageSize,this.total)],this.buildIndexes())}}return Ne.\u0275fac=function(le){return new(le||Ne)(S.Y36(S.sBO),S.Y36(S.Qsj),S.Y36(S.SBq),S.Y36(e.Is,8))},Ne.\u0275cmp=S.Xpm({type:Ne,selectors:[["nz-pagination-default"]],viewQuery:function(le,Ae){if(1&le&&S.Gf(gt,7),2&le){let ut;S.iGM(ut=S.CRH())&&(Ae.template=ut.first)}},inputs:{nzSize:"nzSize",itemRender:"itemRender",showTotal:"showTotal",disabled:"disabled",locale:"locale",showSizeChanger:"showSizeChanger",showQuickJumper:"showQuickJumper",total:"total",pageIndex:"pageIndex",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions"},outputs:{pageIndexChange:"pageIndexChange",pageSizeChange:"pageSizeChange"},features:[S.TTD],decls:2,vars:0,consts:[["containerTemplate",""],["class","ant-pagination-total-text",4,"ngIf"],["nz-pagination-item","",3,"locale","type","index","disabled","itemRender","active","direction","gotoIndex","diffIndex",4,"ngFor","ngForOf","ngForTrackBy"],["nz-pagination-options","",3,"total","locale","disabled","nzSize","showSizeChanger","showQuickJumper","pageIndex","pageSize","pageSizeOptions","pageIndexChange","pageSizeChange",4,"ngIf"],[1,"ant-pagination-total-text"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["nz-pagination-item","",3,"locale","type","index","disabled","itemRender","active","direction","gotoIndex","diffIndex"],["nz-pagination-options","",3,"total","locale","disabled","nzSize","showSizeChanger","showQuickJumper","pageIndex","pageSize","pageSizeOptions","pageIndexChange","pageSizeChange"]],template:function(le,Ae){1&le&&S.YNc(0,ur,3,4,"ng-template",null,0,S.W1O)},directives:[vr,tn,j.O5,j.tP,j.sg],encapsulation:2,changeDetection:0}),Ne})(),Sn=(()=>{class Ne{constructor(le,Ae,ut,Tt,Jt){this.i18n=le,this.cdr=Ae,this.breakpointService=ut,this.nzConfigService=Tt,this.directionality=Jt,this._nzModuleName="pagination",this.nzPageSizeChange=new S.vpe,this.nzPageIndexChange=new S.vpe,this.nzShowTotal=null,this.nzItemRender=null,this.nzSize="default",this.nzPageSizeOptions=[10,20,30,40],this.nzShowSizeChanger=!1,this.nzShowQuickJumper=!1,this.nzSimple=!1,this.nzDisabled=!1,this.nzResponsive=!1,this.nzHideOnSinglePage=!1,this.nzTotal=0,this.nzPageIndex=1,this.nzPageSize=10,this.showPagination=!0,this.size="default",this.dir="ltr",this.destroy$=new P.x,this.total$=new I.t(1)}validatePageIndex(le,Ae){return le>Ae?Ae:le<1?1:le}onPageIndexChange(le){const Ae=this.getLastIndex(this.nzTotal,this.nzPageSize),ut=this.validatePageIndex(le,Ae);ut!==this.nzPageIndex&&!this.nzDisabled&&(this.nzPageIndex=ut,this.nzPageIndexChange.emit(this.nzPageIndex))}onPageSizeChange(le){this.nzPageSize=le,this.nzPageSizeChange.emit(le);const Ae=this.getLastIndex(this.nzTotal,this.nzPageSize);this.nzPageIndex>Ae&&this.onPageIndexChange(Ae)}onTotalChange(le){const Ae=this.getLastIndex(le,this.nzPageSize);this.nzPageIndex>Ae&&Promise.resolve().then(()=>{this.onPageIndexChange(Ae),this.cdr.markForCheck()})}getLastIndex(le,Ae){return Math.ceil(le/Ae)}ngOnInit(){var le;this.i18n.localeChange.pipe((0,H.R)(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Pagination"),this.cdr.markForCheck()}),this.total$.pipe((0,H.R)(this.destroy$)).subscribe(Ae=>{this.onTotalChange(Ae)}),this.breakpointService.subscribe(U.WV).pipe((0,H.R)(this.destroy$)).subscribe(Ae=>{this.nzResponsive&&(this.size=Ae===U.G_.xs?"small":"default",this.cdr.markForCheck())}),null===(le=this.directionality.change)||void 0===le||le.pipe((0,H.R)(this.destroy$)).subscribe(Ae=>{this.dir=Ae,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnChanges(le){const{nzHideOnSinglePage:Ae,nzTotal:ut,nzPageSize:Tt,nzSize:Jt}=le;ut&&this.total$.next(this.nzTotal),(Ae||ut||Tt)&&(this.showPagination=this.nzHideOnSinglePage&&this.nzTotal>this.nzPageSize||this.nzTotal>0&&!this.nzHideOnSinglePage),Jt&&(this.size=Jt.currentValue)}}return Ne.\u0275fac=function(le){return new(le||Ne)(S.Y36(re.wi),S.Y36(S.sBO),S.Y36(U.r3),S.Y36(Z.jY),S.Y36(e.Is,8))},Ne.\u0275cmp=S.Xpm({type:Ne,selectors:[["nz-pagination"]],hostAttrs:[1,"ant-pagination"],hostVars:8,hostBindings:function(le,Ae){2&le&&S.ekj("ant-pagination-simple",Ae.nzSimple)("ant-pagination-disabled",Ae.nzDisabled)("mini",!Ae.nzSimple&&"small"===Ae.size)("ant-pagination-rtl","rtl"===Ae.dir)},inputs:{nzShowTotal:"nzShowTotal",nzItemRender:"nzItemRender",nzSize:"nzSize",nzPageSizeOptions:"nzPageSizeOptions",nzShowSizeChanger:"nzShowSizeChanger",nzShowQuickJumper:"nzShowQuickJumper",nzSimple:"nzSimple",nzDisabled:"nzDisabled",nzResponsive:"nzResponsive",nzHideOnSinglePage:"nzHideOnSinglePage",nzTotal:"nzTotal",nzPageIndex:"nzPageIndex",nzPageSize:"nzPageSize"},outputs:{nzPageSizeChange:"nzPageSizeChange",nzPageIndexChange:"nzPageIndexChange"},exportAs:["nzPagination"],features:[S.TTD],decls:5,vars:18,consts:[[4,"ngIf"],[3,"disabled","itemRender","locale","pageSize","total","pageIndex","pageIndexChange"],["simplePagination",""],[3,"nzSize","itemRender","showTotal","disabled","locale","showSizeChanger","showQuickJumper","total","pageIndex","pageSize","pageSizeOptions","pageIndexChange","pageSizeChange"],["defaultPagination",""],[4,"ngIf","ngIfElse"],[3,"ngTemplateOutlet"]],template:function(le,Ae){1&le&&(S.YNc(0,hr,2,2,"ng-container",0),S.TgZ(1,"nz-pagination-simple",1,2),S.NdJ("pageIndexChange",function(Tt){return Ae.onPageIndexChange(Tt)}),S.qZA(),S.TgZ(3,"nz-pagination-default",3,4),S.NdJ("pageIndexChange",function(Tt){return Ae.onPageIndexChange(Tt)})("pageSizeChange",function(Tt){return Ae.onPageSizeChange(Tt)}),S.qZA()),2&le&&(S.Q6J("ngIf",Ae.showPagination),S.xp6(1),S.Q6J("disabled",Ae.nzDisabled)("itemRender",Ae.nzItemRender)("locale",Ae.locale)("pageSize",Ae.nzPageSize)("total",Ae.nzTotal)("pageIndex",Ae.nzPageIndex),S.xp6(2),S.Q6J("nzSize",Ae.size)("itemRender",Ae.nzItemRender)("showTotal",Ae.nzShowTotal)("disabled",Ae.nzDisabled)("locale",Ae.locale)("showSizeChanger",Ae.nzShowSizeChanger)("showQuickJumper",Ae.nzShowQuickJumper)("total",Ae.nzTotal)("pageIndex",Ae.nzPageIndex)("pageSize",Ae.nzPageSize)("pageSizeOptions",Ae.nzPageSizeOptions))},directives:[ir,Sr,j.O5,j.tP],encapsulation:2,changeDetection:0}),(0,A.gn)([(0,Z.oS)()],Ne.prototype,"nzSize",void 0),(0,A.gn)([(0,Z.oS)()],Ne.prototype,"nzPageSizeOptions",void 0),(0,A.gn)([(0,Z.oS)(),(0,Y.yF)()],Ne.prototype,"nzShowSizeChanger",void 0),(0,A.gn)([(0,Z.oS)(),(0,Y.yF)()],Ne.prototype,"nzShowQuickJumper",void 0),(0,A.gn)([(0,Z.oS)(),(0,Y.yF)()],Ne.prototype,"nzSimple",void 0),(0,A.gn)([(0,Y.yF)()],Ne.prototype,"nzDisabled",void 0),(0,A.gn)([(0,Y.yF)()],Ne.prototype,"nzResponsive",void 0),(0,A.gn)([(0,Y.yF)()],Ne.prototype,"nzHideOnSinglePage",void 0),(0,A.gn)([(0,Y.Rn)()],Ne.prototype,"nzTotal",void 0),(0,A.gn)([(0,Y.Rn)()],Ne.prototype,"nzPageIndex",void 0),(0,A.gn)([(0,Y.Rn)()],Ne.prototype,"nzPageSize",void 0),Ne})(),mn=(()=>{class Ne{}return Ne.\u0275fac=function(le){return new(le||Ne)},Ne.\u0275mod=S.oAB({type:Ne}),Ne.\u0275inj=S.cJS({imports:[[e.vT,j.ez,fe.u5,B.LV,re.YI,R.PV]]}),Ne})();var yr=J(3868),Er=J(9590),Dn=J(4968),Nt=J(1135),Zt=J(9841),dr=J(6451),Ge=J(515),Dt=J(9646),it=J(4004),Ye=J(9300),Ut=J(8675),Qt=J(3900),zn=J(8372),De=J(1005),_t=J(1884),cr=J(5684),_n=J(5577),yn=J(2683),gn=J(2643);const Pr=["*"];function qe(Ne,ot){}function yt(Ne,ot){if(1&Ne){const le=S.EpF();S.TgZ(0,"label",15),S.NdJ("ngModelChange",function(){S.CHM(le);const ut=S.oxw().$implicit;return S.oxw(2).check(ut)}),S.qZA()}if(2&Ne){const le=S.oxw().$implicit;S.Q6J("ngModel",le.checked)}}function we(Ne,ot){if(1&Ne){const le=S.EpF();S.TgZ(0,"label",16),S.NdJ("ngModelChange",function(){S.CHM(le);const ut=S.oxw().$implicit;return S.oxw(2).check(ut)}),S.qZA()}if(2&Ne){const le=S.oxw().$implicit;S.Q6J("ngModel",le.checked)}}function Pe(Ne,ot){if(1&Ne){const le=S.EpF();S.TgZ(0,"li",12),S.NdJ("click",function(){const Tt=S.CHM(le).$implicit;return S.oxw(2).check(Tt)}),S.YNc(1,yt,1,1,"label",13),S.YNc(2,we,1,1,"label",14),S.TgZ(3,"span"),S._uU(4),S.qZA()()}if(2&Ne){const le=ot.$implicit,Ae=S.oxw(2);S.Q6J("nzSelected",le.checked),S.xp6(1),S.Q6J("ngIf",!Ae.filterMultiple),S.xp6(1),S.Q6J("ngIf",Ae.filterMultiple),S.xp6(2),S.Oqu(le.text)}}function Qe(Ne,ot){if(1&Ne){const le=S.EpF();S.ynx(0),S.TgZ(1,"nz-filter-trigger",3),S.NdJ("nzVisibleChange",function(ut){return S.CHM(le),S.oxw().onVisibleChange(ut)}),S._UZ(2,"i",4),S.qZA(),S.TgZ(3,"nz-dropdown-menu",null,5)(5,"div",6)(6,"ul",7),S.YNc(7,Pe,5,4,"li",8),S.qZA(),S.TgZ(8,"div",9)(9,"button",10),S.NdJ("click",function(){return S.CHM(le),S.oxw().reset()}),S._uU(10),S.qZA(),S.TgZ(11,"button",11),S.NdJ("click",function(){return S.CHM(le),S.oxw().confirm()}),S._uU(12),S.qZA()()()(),S.BQk()}if(2&Ne){const le=S.MAs(4),Ae=S.oxw();S.xp6(1),S.Q6J("nzVisible",Ae.isVisible)("nzActive",Ae.isChecked)("nzDropdownMenu",le),S.xp6(6),S.Q6J("ngForOf",Ae.listOfParsedFilter)("ngForTrackBy",Ae.trackByValue),S.xp6(2),S.Q6J("disabled",!Ae.isChecked),S.xp6(1),S.hij(" ",Ae.locale.filterReset," "),S.xp6(2),S.Oqu(Ae.locale.filterConfirm)}}function Ie(Ne,ot){if(1&Ne){const le=S.EpF();S.TgZ(0,"label",2),S.NdJ("ngModelChange",function(ut){return S.CHM(le),S.oxw().onCheckedChange(ut)}),S.qZA()}if(2&Ne){const le=S.oxw();S.ekj("ant-table-selection-select-all-custom",le.showRowSelection),S.Q6J("ngModel",le.checked)("nzDisabled",le.disabled)("nzIndeterminate",le.indeterminate)}}function Ve(Ne,ot){if(1&Ne){const le=S.EpF();S.TgZ(0,"li",9),S.NdJ("click",function(){return S.CHM(le).$implicit.onSelect()}),S._uU(1),S.qZA()}if(2&Ne){const le=ot.$implicit;S.xp6(1),S.hij(" ",le.text," ")}}function tt(Ne,ot){if(1&Ne&&(S.TgZ(0,"div",3)(1,"span",4),S._UZ(2,"i",5),S.qZA(),S.TgZ(3,"nz-dropdown-menu",null,6)(5,"ul",7),S.YNc(6,Ve,2,1,"li",8),S.qZA()()()),2&Ne){const le=S.MAs(4),Ae=S.oxw();S.xp6(1),S.Q6J("nzDropdownMenu",le),S.xp6(5),S.Q6J("ngForOf",Ae.listOfSelections)}}function Mt(Ne,ot){}function ln(Ne,ot){if(1&Ne&&S._UZ(0,"i",6),2&Ne){const le=S.oxw();S.ekj("active","ascend"===le.sortOrder)}}function Ft(Ne,ot){if(1&Ne&&S._UZ(0,"i",7),2&Ne){const le=S.oxw();S.ekj("active","descend"===le.sortOrder)}}const jn=["nzChecked",""];function Nr(Ne,ot){if(1&Ne){const le=S.EpF();S.ynx(0),S._UZ(1,"nz-row-indent",2),S.TgZ(2,"button",3),S.NdJ("expandChange",function(ut){return S.CHM(le),S.oxw().onExpandChange(ut)}),S.qZA(),S.BQk()}if(2&Ne){const le=S.oxw();S.xp6(1),S.Q6J("indentSize",le.nzIndentSize),S.xp6(1),S.Q6J("expand",le.nzExpand)("spaceMode",!le.nzShowExpand)}}function ti(Ne,ot){if(1&Ne){const le=S.EpF();S.TgZ(0,"label",4),S.NdJ("ngModelChange",function(ut){return S.CHM(le),S.oxw().onCheckedChange(ut)}),S.qZA()}if(2&Ne){const le=S.oxw();S.Q6J("nzDisabled",le.nzDisabled)("ngModel",le.nzChecked)("nzIndeterminate",le.nzIndeterminate)}}const ni=["nzColumnKey",""];function Cr(Ne,ot){if(1&Ne){const le=S.EpF();S.TgZ(0,"nz-table-filter",5),S.NdJ("filterChange",function(ut){return S.CHM(le),S.oxw().onFilterValueChange(ut)}),S.qZA()}if(2&Ne){const le=S.oxw(),Ae=S.MAs(2),ut=S.MAs(4);S.Q6J("contentTemplate",Ae)("extraTemplate",ut)("customFilter",le.nzCustomFilter)("filterMultiple",le.nzFilterMultiple)("listOfFilter",le.nzFilters)}}function $t(Ne,ot){}function ri(Ne,ot){if(1&Ne&&S.YNc(0,$t,0,0,"ng-template",6),2&Ne){const le=S.oxw(),Ae=S.MAs(6),ut=S.MAs(8);S.Q6J("ngTemplateOutlet",le.nzShowSort?Ae:ut)}}function Ra(Ne,ot){1&Ne&&(S.Hsn(0),S.Hsn(1,1))}function Na(Ne,ot){if(1&Ne&&S._UZ(0,"nz-table-sorters",7),2&Ne){const le=S.oxw(),Ae=S.MAs(8);S.Q6J("sortOrder",le.sortOrder)("sortDirections",le.sortDirections)("contentTemplate",Ae)}}function ar(Ne,ot){1&Ne&&S.Hsn(0,2)}const Ir=[[["","nz-th-extra",""]],[["nz-filter-trigger"]],"*"],Fa=["[nz-th-extra]","nz-filter-trigger","*"],Yi=["nzSelections",""],Ba=["nz-table-content",""];function Ds(Ne,ot){if(1&Ne&&S._UZ(0,"col"),2&Ne){const le=ot.$implicit;S.Udp("width",le)("min-width",le)}}function Kt(Ne,ot){}function Za(Ne,ot){if(1&Ne&&(S.TgZ(0,"thead",3),S.YNc(1,Kt,0,0,"ng-template",2),S.qZA()),2&Ne){const le=S.oxw();S.xp6(1),S.Q6J("ngTemplateOutlet",le.theadTemplate)}}function Ua(Ne,ot){}const Va=["tdElement"],qt=["nz-table-fixed-row",""];function kr(Ne,ot){}function Ei(Ne,ot){if(1&Ne&&(S.TgZ(0,"div",4),S.ALo(1,"async"),S.YNc(2,kr,0,0,"ng-template",5),S.qZA()),2&Ne){const le=S.oxw(),Ae=S.MAs(5);S.Udp("width",S.lcZ(1,3,le.hostWidth$),"px"),S.xp6(2),S.Q6J("ngTemplateOutlet",Ae)}}function es(Ne,ot){1&Ne&&S.Hsn(0)}const or=["nz-table-measure-row",""];function oo(Ne,ot){1&Ne&&S._UZ(0,"td",1,2)}function Ha(Ne,ot){if(1&Ne){const le=S.EpF();S.TgZ(0,"tr",3),S.NdJ("listOfAutoWidth",function(ut){return S.CHM(le),S.oxw(2).onListOfAutoWidthChange(ut)}),S.qZA()}if(2&Ne){const le=S.oxw().ngIf;S.Q6J("listOfMeasureColumn",le)}}function As(Ne,ot){if(1&Ne&&(S.ynx(0),S.YNc(1,Ha,1,1,"tr",2),S.BQk()),2&Ne){const le=ot.ngIf,Ae=S.oxw();S.xp6(1),S.Q6J("ngIf",Ae.isInsideTable&&le.length)}}function uu(Ne,ot){if(1&Ne&&(S.TgZ(0,"tr",4),S._UZ(1,"nz-embed-empty",5),S.ALo(2,"async"),S.qZA()),2&Ne){const le=S.oxw();S.xp6(1),S.Q6J("specificContent",S.lcZ(2,1,le.noResult$))}}const ua=["tableHeaderElement"],In=["tableBodyElement"];function pl(Ne,ot){if(1&Ne&&(S.TgZ(0,"div",7,8),S._UZ(2,"table",9),S.qZA()),2&Ne){const le=S.oxw(2);S.Q6J("ngStyle",le.bodyStyleMap),S.xp6(2),S.Q6J("scrollX",le.scrollX)("listOfColWidth",le.listOfColWidth)("contentTemplate",le.contentTemplate)}}function ts(Ne,ot){}const ns=function(Ne,ot){return{$implicit:Ne,index:ot}};function Qi(Ne,ot){if(1&Ne&&(S.ynx(0),S.YNc(1,ts,0,0,"ng-template",13),S.BQk()),2&Ne){const le=ot.$implicit,Ae=ot.index,ut=S.oxw(3);S.xp6(1),S.Q6J("ngTemplateOutlet",ut.virtualTemplate)("ngTemplateOutletContext",S.WLB(2,ns,le,Ae))}}function Ri(Ne,ot){if(1&Ne&&(S.TgZ(0,"cdk-virtual-scroll-viewport",10,8)(2,"table",11)(3,"tbody"),S.YNc(4,Qi,2,5,"ng-container",12),S.qZA()()()),2&Ne){const le=S.oxw(2);S.Udp("height",le.data.length?le.scrollY:le.noDateVirtualHeight),S.Q6J("itemSize",le.virtualItemSize)("maxBufferPx",le.virtualMaxBufferPx)("minBufferPx",le.virtualMinBufferPx),S.xp6(2),S.Q6J("scrollX",le.scrollX)("listOfColWidth",le.listOfColWidth),S.xp6(2),S.Q6J("cdkVirtualForOf",le.data)("cdkVirtualForTrackBy",le.virtualForTrackBy)}}function so(Ne,ot){if(1&Ne&&(S.ynx(0),S.TgZ(1,"div",2,3),S._UZ(3,"table",4),S.qZA(),S.YNc(4,pl,3,4,"div",5),S.YNc(5,Ri,5,9,"cdk-virtual-scroll-viewport",6),S.BQk()),2&Ne){const le=S.oxw();S.xp6(1),S.Q6J("ngStyle",le.headerStyleMap),S.xp6(2),S.Q6J("scrollX",le.scrollX)("listOfColWidth",le.listOfColWidth)("theadTemplate",le.theadTemplate),S.xp6(1),S.Q6J("ngIf",!le.virtualTemplate),S.xp6(1),S.Q6J("ngIf",le.virtualTemplate)}}function Es(Ne,ot){if(1&Ne&&(S.TgZ(0,"div",14,8),S._UZ(2,"table",15),S.qZA()),2&Ne){const le=S.oxw();S.Q6J("ngStyle",le.bodyStyleMap),S.xp6(2),S.Q6J("scrollX",le.scrollX)("listOfColWidth",le.listOfColWidth)("theadTemplate",le.theadTemplate)("contentTemplate",le.contentTemplate)}}function Ms(Ne,ot){if(1&Ne&&(S.ynx(0),S._uU(1),S.BQk()),2&Ne){const le=S.oxw();S.xp6(1),S.Oqu(le.title)}}function Ca(Ne,ot){if(1&Ne&&(S.ynx(0),S._uU(1),S.BQk()),2&Ne){const le=S.oxw();S.xp6(1),S.Oqu(le.footer)}}function gl(Ne,ot){}function vl(Ne,ot){if(1&Ne&&(S.ynx(0),S.YNc(1,gl,0,0,"ng-template",10),S.BQk()),2&Ne){S.oxw();const le=S.MAs(11);S.xp6(1),S.Q6J("ngTemplateOutlet",le)}}function Os(Ne,ot){if(1&Ne&&S._UZ(0,"nz-table-title-footer",11),2&Ne){const le=S.oxw();S.Q6J("title",le.nzTitle)}}function fi(Ne,ot){if(1&Ne&&S._UZ(0,"nz-table-inner-scroll",12),2&Ne){const le=S.oxw(),Ae=S.MAs(13),ut=S.MAs(3);S.Q6J("data",le.data)("scrollX",le.scrollX)("scrollY",le.scrollY)("contentTemplate",Ae)("listOfColWidth",le.listOfAutoColWidth)("theadTemplate",le.theadTemplate)("verticalScrollBarWidth",le.verticalScrollBarWidth)("virtualTemplate",le.nzVirtualScrollDirective?le.nzVirtualScrollDirective.templateRef:null)("virtualItemSize",le.nzVirtualItemSize)("virtualMaxBufferPx",le.nzVirtualMaxBufferPx)("virtualMinBufferPx",le.nzVirtualMinBufferPx)("tableMainElement",ut)("virtualForTrackBy",le.nzVirtualForTrackBy)}}function Ps(Ne,ot){if(1&Ne&&S._UZ(0,"nz-table-inner-default",13),2&Ne){const le=S.oxw(),Ae=S.MAs(13);S.Q6J("tableLayout",le.nzTableLayout)("listOfColWidth",le.listOfManualColWidth)("theadTemplate",le.theadTemplate)("contentTemplate",Ae)}}function sr(Ne,ot){if(1&Ne&&S._UZ(0,"nz-table-title-footer",14),2&Ne){const le=S.oxw();S.Q6J("footer",le.nzFooter)}}function Ln(Ne,ot){}function Gr(Ne,ot){if(1&Ne&&(S.ynx(0),S.YNc(1,Ln,0,0,"ng-template",10),S.BQk()),2&Ne){S.oxw();const le=S.MAs(11);S.xp6(1),S.Q6J("ngTemplateOutlet",le)}}function et(Ne,ot){if(1&Ne){const le=S.EpF();S.TgZ(0,"nz-pagination",16),S.NdJ("nzPageSizeChange",function(ut){return S.CHM(le),S.oxw(2).onPageSizeChange(ut)})("nzPageIndexChange",function(ut){return S.CHM(le),S.oxw(2).onPageIndexChange(ut)}),S.qZA()}if(2&Ne){const le=S.oxw(2);S.Q6J("hidden",!le.showPagination)("nzShowSizeChanger",le.nzShowSizeChanger)("nzPageSizeOptions",le.nzPageSizeOptions)("nzItemRender",le.nzItemRender)("nzShowQuickJumper",le.nzShowQuickJumper)("nzHideOnSinglePage",le.nzHideOnSinglePage)("nzShowTotal",le.nzShowTotal)("nzSize","small"===le.nzPaginationType?"small":"default"===le.nzSize?"default":"small")("nzPageSize",le.nzPageSize)("nzTotal",le.nzTotal)("nzSimple",le.nzSimple)("nzPageIndex",le.nzPageIndex)}}function xn(Ne,ot){if(1&Ne&&S.YNc(0,et,1,12,"nz-pagination",15),2&Ne){const le=S.oxw();S.Q6J("ngIf",le.nzShowPagination&&le.data.length)}}function Fr(Ne,ot){1&Ne&&S.Hsn(0)}const Rn=["contentTemplate"];function Br(Ne,ot){1&Ne&&S.Hsn(0)}function xa(Ne,ot){}function Wa(Ne,ot){if(1&Ne&&(S.ynx(0),S.YNc(1,xa,0,0,"ng-template",2),S.BQk()),2&Ne){S.oxw();const le=S.MAs(1);S.xp6(1),S.Q6J("ngTemplateOutlet",le)}}let Ta=(()=>{class Ne{constructor(le,Ae,ut,Tt){this.nzConfigService=le,this.ngZone=Ae,this.cdr=ut,this.destroy$=Tt,this._nzModuleName="filterTrigger",this.nzActive=!1,this.nzVisible=!1,this.nzBackdrop=!1,this.nzVisibleChange=new S.vpe}onVisibleChange(le){this.nzVisible=le,this.nzVisibleChange.next(le)}hide(){this.nzVisible=!1,this.cdr.markForCheck()}show(){this.nzVisible=!0,this.cdr.markForCheck()}ngOnInit(){this.ngZone.runOutsideAngular(()=>{(0,Dn.R)(this.nzDropdown.nativeElement,"click").pipe((0,H.R)(this.destroy$)).subscribe(le=>{le.stopPropagation()})})}}return Ne.\u0275fac=function(le){return new(le||Ne)(S.Y36(Z.jY),S.Y36(S.R0b),S.Y36(S.sBO),S.Y36(U.kn))},Ne.\u0275cmp=S.Xpm({type:Ne,selectors:[["nz-filter-trigger"]],viewQuery:function(le,Ae){if(1&le&&S.Gf(ne.cm,7,S.SBq),2&le){let ut;S.iGM(ut=S.CRH())&&(Ae.nzDropdown=ut.first)}},inputs:{nzActive:"nzActive",nzDropdownMenu:"nzDropdownMenu",nzVisible:"nzVisible",nzBackdrop:"nzBackdrop"},outputs:{nzVisibleChange:"nzVisibleChange"},exportAs:["nzFilterTrigger"],features:[S._Bn([U.kn])],ngContentSelectors:Pr,decls:2,vars:8,consts:[["nz-dropdown","","nzTrigger","click","nzPlacement","bottomRight",1,"ant-table-filter-trigger",3,"nzBackdrop","nzClickHide","nzDropdownMenu","nzVisible","nzVisibleChange"]],template:function(le,Ae){1&le&&(S.F$t(),S.TgZ(0,"span",0),S.NdJ("nzVisibleChange",function(Tt){return Ae.onVisibleChange(Tt)}),S.Hsn(1),S.qZA()),2&le&&(S.ekj("active",Ae.nzActive)("ant-table-filter-open",Ae.nzVisible),S.Q6J("nzBackdrop",Ae.nzBackdrop)("nzClickHide",!1)("nzDropdownMenu",Ae.nzDropdownMenu)("nzVisible",Ae.nzVisible))},directives:[ne.cm],encapsulation:2,changeDetection:0}),(0,A.gn)([(0,Z.oS)(),(0,Y.yF)()],Ne.prototype,"nzBackdrop",void 0),Ne})(),rs=(()=>{class Ne{constructor(le,Ae){this.cdr=le,this.i18n=Ae,this.contentTemplate=null,this.customFilter=!1,this.extraTemplate=null,this.filterMultiple=!0,this.listOfFilter=[],this.filterChange=new S.vpe,this.destroy$=new P.x,this.isChecked=!1,this.isVisible=!1,this.listOfParsedFilter=[],this.listOfChecked=[]}trackByValue(le,Ae){return Ae.value}check(le){this.filterMultiple?(this.listOfParsedFilter=this.listOfParsedFilter.map(Ae=>Ae===le?Object.assign(Object.assign({},Ae),{checked:!le.checked}):Ae),le.checked=!le.checked):this.listOfParsedFilter=this.listOfParsedFilter.map(Ae=>Object.assign(Object.assign({},Ae),{checked:Ae===le})),this.isChecked=this.getCheckedStatus(this.listOfParsedFilter)}confirm(){this.isVisible=!1,this.emitFilterData()}reset(){this.isVisible=!1,this.listOfParsedFilter=this.parseListOfFilter(this.listOfFilter,!0),this.isChecked=this.getCheckedStatus(this.listOfParsedFilter),this.emitFilterData()}onVisibleChange(le){this.isVisible=le,le?this.listOfChecked=this.listOfParsedFilter.filter(Ae=>Ae.checked).map(Ae=>Ae.value):this.emitFilterData()}emitFilterData(){const le=this.listOfParsedFilter.filter(Ae=>Ae.checked).map(Ae=>Ae.value);(0,Y.cO)(this.listOfChecked,le)||this.filterChange.emit(this.filterMultiple?le:le.length>0?le[0]:null)}parseListOfFilter(le,Ae){return le.map(ut=>({text:ut.text,value:ut.value,checked:!Ae&&!!ut.byDefault}))}getCheckedStatus(le){return le.some(Ae=>Ae.checked)}ngOnInit(){this.i18n.localeChange.pipe((0,H.R)(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Table"),this.cdr.markForCheck()})}ngOnChanges(le){const{listOfFilter:Ae}=le;Ae&&this.listOfFilter&&this.listOfFilter.length&&(this.listOfParsedFilter=this.parseListOfFilter(this.listOfFilter),this.isChecked=this.getCheckedStatus(this.listOfParsedFilter))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return Ne.\u0275fac=function(le){return new(le||Ne)(S.Y36(S.sBO),S.Y36(re.wi))},Ne.\u0275cmp=S.Xpm({type:Ne,selectors:[["nz-table-filter"]],hostAttrs:[1,"ant-table-filter-column"],inputs:{contentTemplate:"contentTemplate",customFilter:"customFilter",extraTemplate:"extraTemplate",filterMultiple:"filterMultiple",listOfFilter:"listOfFilter"},outputs:{filterChange:"filterChange"},features:[S.TTD],decls:3,vars:3,consts:[[1,"ant-table-column-title"],[3,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],[3,"nzVisible","nzActive","nzDropdownMenu","nzVisibleChange"],["nz-icon","","nzType","filter","nzTheme","fill"],["filterMenu","nzDropdownMenu"],[1,"ant-table-filter-dropdown"],["nz-menu",""],["nz-menu-item","",3,"nzSelected","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ant-table-filter-dropdown-btns"],["nz-button","","nzType","link","nzSize","small",3,"disabled","click"],["nz-button","","nzType","primary","nzSize","small",3,"click"],["nz-menu-item","",3,"nzSelected","click"],["nz-radio","",3,"ngModel","ngModelChange",4,"ngIf"],["nz-checkbox","",3,"ngModel","ngModelChange",4,"ngIf"],["nz-radio","",3,"ngModel","ngModelChange"],["nz-checkbox","",3,"ngModel","ngModelChange"]],template:function(le,Ae){1&le&&(S.TgZ(0,"span",0),S.YNc(1,qe,0,0,"ng-template",1),S.qZA(),S.YNc(2,Qe,13,8,"ng-container",2)),2&le&&(S.xp6(1),S.Q6J("ngTemplateOutlet",Ae.contentTemplate),S.xp6(1),S.Q6J("ngIf",!Ae.customFilter)("ngIfElse",Ae.extraTemplate))},directives:[Ta,ne.RR,yr.Of,k.Ie,he.ix,j.tP,j.O5,yn.w,R.Ls,V.wO,j.sg,V.r9,fe.JJ,fe.On,gn.dQ],encapsulation:2,changeDetection:0}),Ne})(),lo=(()=>{class Ne{constructor(){this.expand=!1,this.spaceMode=!1,this.expandChange=new S.vpe}onHostClick(){this.spaceMode||(this.expand=!this.expand,this.expandChange.next(this.expand))}}return Ne.\u0275fac=function(le){return new(le||Ne)},Ne.\u0275dir=S.lG2({type:Ne,selectors:[["button","nz-row-expand-button",""]],hostAttrs:[1,"ant-table-row-expand-icon"],hostVars:7,hostBindings:function(le,Ae){1&le&&S.NdJ("click",function(){return Ae.onHostClick()}),2&le&&(S.Ikx("type","button"),S.ekj("ant-table-row-expand-icon-expanded",!Ae.spaceMode&&!0===Ae.expand)("ant-table-row-expand-icon-collapsed",!Ae.spaceMode&&!1===Ae.expand)("ant-table-row-expand-icon-spaced",Ae.spaceMode))},inputs:{expand:"expand",spaceMode:"spaceMode"},outputs:{expandChange:"expandChange"}}),Ne})(),Is=(()=>{class Ne{constructor(){this.indentSize=0}}return Ne.\u0275fac=function(le){return new(le||Ne)},Ne.\u0275dir=S.lG2({type:Ne,selectors:[["nz-row-indent"]],hostAttrs:[1,"ant-table-row-indent"],hostVars:2,hostBindings:function(le,Ae){2&le&&S.Udp("padding-left",Ae.indentSize,"px")},inputs:{indentSize:"indentSize"}}),Ne})(),Ga=(()=>{class Ne{constructor(){this.listOfSelections=[],this.checked=!1,this.disabled=!1,this.indeterminate=!1,this.showCheckbox=!1,this.showRowSelection=!1,this.checkedChange=new S.vpe}onCheckedChange(le){this.checked=le,this.checkedChange.emit(le)}}return Ne.\u0275fac=function(le){return new(le||Ne)},Ne.\u0275cmp=S.Xpm({type:Ne,selectors:[["nz-table-selection"]],hostAttrs:[1,"ant-table-selection"],inputs:{listOfSelections:"listOfSelections",checked:"checked",disabled:"disabled",indeterminate:"indeterminate",showCheckbox:"showCheckbox",showRowSelection:"showRowSelection"},outputs:{checkedChange:"checkedChange"},decls:2,vars:2,consts:[["nz-checkbox","",3,"ant-table-selection-select-all-custom","ngModel","nzDisabled","nzIndeterminate","ngModelChange",4,"ngIf"],["class","ant-table-selection-extra",4,"ngIf"],["nz-checkbox","",3,"ngModel","nzDisabled","nzIndeterminate","ngModelChange"],[1,"ant-table-selection-extra"],["nz-dropdown","","nzPlacement","bottomLeft",1,"ant-table-selection-down",3,"nzDropdownMenu"],["nz-icon","","nzType","down"],["selectionMenu","nzDropdownMenu"],["nz-menu","",1,"ant-table-selection-menu"],["nz-menu-item","",3,"click",4,"ngFor","ngForOf"],["nz-menu-item","",3,"click"]],template:function(le,Ae){1&le&&(S.YNc(0,Ie,1,5,"label",0),S.YNc(1,tt,7,2,"div",1)),2&le&&(S.Q6J("ngIf",Ae.showCheckbox),S.xp6(1),S.Q6J("ngIf",Ae.showRowSelection))},directives:[k.Ie,ne.RR,j.O5,fe.JJ,fe.On,ne.cm,yn.w,R.Ls,V.wO,j.sg,V.r9],encapsulation:2,changeDetection:0}),Ne})(),Ja=(()=>{class Ne{constructor(){this.sortDirections=["ascend","descend",null],this.sortOrder=null,this.contentTemplate=null,this.isUp=!1,this.isDown=!1}ngOnChanges(le){const{sortDirections:Ae}=le;Ae&&(this.isUp=-1!==this.sortDirections.indexOf("ascend"),this.isDown=-1!==this.sortDirections.indexOf("descend"))}}return Ne.\u0275fac=function(le){return new(le||Ne)},Ne.\u0275cmp=S.Xpm({type:Ne,selectors:[["nz-table-sorters"]],hostAttrs:[1,"ant-table-column-sorters"],inputs:{sortDirections:"sortDirections",sortOrder:"sortOrder",contentTemplate:"contentTemplate"},features:[S.TTD],decls:6,vars:5,consts:[[1,"ant-table-column-title"],[3,"ngTemplateOutlet"],[1,"ant-table-column-sorter"],[1,"ant-table-column-sorter-inner"],["nz-icon","","nzType","caret-up","class","ant-table-column-sorter-up",3,"active",4,"ngIf"],["nz-icon","","nzType","caret-down","class","ant-table-column-sorter-down",3,"active",4,"ngIf"],["nz-icon","","nzType","caret-up",1,"ant-table-column-sorter-up"],["nz-icon","","nzType","caret-down",1,"ant-table-column-sorter-down"]],template:function(le,Ae){1&le&&(S.TgZ(0,"span",0),S.YNc(1,Mt,0,0,"ng-template",1),S.qZA(),S.TgZ(2,"span",2)(3,"span",3),S.YNc(4,ln,1,2,"i",4),S.YNc(5,Ft,1,2,"i",5),S.qZA()()),2&le&&(S.xp6(1),S.Q6J("ngTemplateOutlet",Ae.contentTemplate),S.xp6(1),S.ekj("ant-table-column-sorter-full",Ae.isDown&&Ae.isUp),S.xp6(2),S.Q6J("ngIf",Ae.isUp),S.xp6(1),S.Q6J("ngIf",Ae.isDown))},directives:[j.tP,j.O5,yn.w,R.Ls],encapsulation:2,changeDetection:0}),Ne})(),uo=(()=>{class Ne{constructor(le,Ae){this.renderer=le,this.elementRef=Ae,this.nzRight=!1,this.nzLeft=!1,this.colspan=null,this.colSpan=null,this.changes$=new P.x,this.isAutoLeft=!1,this.isAutoRight=!1,this.isFixedLeft=!1,this.isFixedRight=!1,this.isFixed=!1}setAutoLeftWidth(le){this.renderer.setStyle(this.elementRef.nativeElement,"left",le)}setAutoRightWidth(le){this.renderer.setStyle(this.elementRef.nativeElement,"right",le)}setIsFirstRight(le){this.setFixClass(le,"ant-table-cell-fix-right-first")}setIsLastLeft(le){this.setFixClass(le,"ant-table-cell-fix-left-last")}setFixClass(le,Ae){this.renderer.removeClass(this.elementRef.nativeElement,Ae),le&&this.renderer.addClass(this.elementRef.nativeElement,Ae)}ngOnChanges(){this.setIsFirstRight(!1),this.setIsLastLeft(!1),this.isAutoLeft=""===this.nzLeft||!0===this.nzLeft,this.isAutoRight=""===this.nzRight||!0===this.nzRight,this.isFixedLeft=!1!==this.nzLeft,this.isFixedRight=!1!==this.nzRight,this.isFixed=this.isFixedLeft||this.isFixedRight;const le=Ae=>"string"==typeof Ae&&""!==Ae?Ae:null;this.setAutoLeftWidth(le(this.nzLeft)),this.setAutoRightWidth(le(this.nzRight)),this.changes$.next()}}return Ne.\u0275fac=function(le){return new(le||Ne)(S.Y36(S.Qsj),S.Y36(S.SBq))},Ne.\u0275dir=S.lG2({type:Ne,selectors:[["td","nzRight",""],["th","nzRight",""],["td","nzLeft",""],["th","nzLeft",""]],hostVars:6,hostBindings:function(le,Ae){2&le&&(S.Udp("position",Ae.isFixed?"sticky":null),S.ekj("ant-table-cell-fix-right",Ae.isFixedRight)("ant-table-cell-fix-left",Ae.isFixedLeft))},inputs:{nzRight:"nzRight",nzLeft:"nzLeft",colspan:"colspan",colSpan:"colSpan"},features:[S.TTD]}),Ne})(),si=(()=>{class Ne{constructor(){this.theadTemplate$=new I.t(1),this.hasFixLeft$=new I.t(1),this.hasFixRight$=new I.t(1),this.hostWidth$=new I.t(1),this.columnCount$=new I.t(1),this.showEmpty$=new I.t(1),this.noResult$=new I.t(1),this.listOfThWidthConfigPx$=new Nt.X([]),this.tableWidthConfigPx$=new Nt.X([]),this.manualWidthConfigPx$=(0,Zt.a)([this.tableWidthConfigPx$,this.listOfThWidthConfigPx$]).pipe((0,it.U)(([le,Ae])=>le.length?le:Ae)),this.listOfAutoWidthPx$=new I.t(1),this.listOfListOfThWidthPx$=(0,dr.T)(this.manualWidthConfigPx$,(0,Zt.a)([this.listOfAutoWidthPx$,this.manualWidthConfigPx$]).pipe((0,it.U)(([le,Ae])=>le.length===Ae.length?le.map((ut,Tt)=>"0px"===ut?Ae[Tt]||null:Ae[Tt]||ut):Ae))),this.listOfMeasureColumn$=new I.t(1),this.listOfListOfThWidth$=this.listOfAutoWidthPx$.pipe((0,it.U)(le=>le.map(Ae=>parseInt(Ae,10)))),this.enableAutoMeasure$=new I.t(1)}setTheadTemplate(le){this.theadTemplate$.next(le)}setHasFixLeft(le){this.hasFixLeft$.next(le)}setHasFixRight(le){this.hasFixRight$.next(le)}setTableWidthConfig(le){this.tableWidthConfigPx$.next(le)}setListOfTh(le){let Ae=0;le.forEach(Tt=>{Ae+=Tt.colspan&&+Tt.colspan||Tt.colSpan&&+Tt.colSpan||1});const ut=le.map(Tt=>Tt.nzWidth);this.columnCount$.next(Ae),this.listOfThWidthConfigPx$.next(ut)}setListOfMeasureColumn(le){const Ae=[];le.forEach(ut=>{const Tt=ut.colspan&&+ut.colspan||ut.colSpan&&+ut.colSpan||1;for(let Jt=0;Jt<Tt;Jt++)Ae.push(`measure_key_${Jt}`)}),this.listOfMeasureColumn$.next(Ae)}setListOfAutoWidth(le){this.listOfAutoWidthPx$.next(le.map(Ae=>`${Ae}px`))}setShowEmpty(le){this.showEmpty$.next(le)}setNoResult(le){this.noResult$.next(le)}setScroll(le,Ae){const ut=!(!le&&!Ae);ut||this.setListOfAutoWidth([]),this.enableAutoMeasure$.next(ut)}}return Ne.\u0275fac=function(le){return new(le||Ne)},Ne.\u0275prov=S.Yz7({token:Ne,factory:Ne.\u0275fac}),Ne})(),er=(()=>{class Ne{constructor(le){this.isInsideTable=!1,this.isInsideTable=!!le}}return Ne.\u0275fac=function(le){return new(le||Ne)(S.Y36(si,8))},Ne.\u0275dir=S.lG2({type:Ne,selectors:[["th",9,"nz-disable-th",3,"mat-cell",""],["td",9,"nz-disable-td",3,"mat-cell",""]],hostVars:2,hostBindings:function(le,Ae){2&le&&S.ekj("ant-table-cell",Ae.isInsideTable)}}),Ne})(),co=(()=>{class Ne{constructor(){this.nzChecked=!1,this.nzDisabled=!1,this.nzIndeterminate=!1,this.nzIndentSize=0,this.nzShowExpand=!1,this.nzShowCheckbox=!1,this.nzExpand=!1,this.nzCheckedChange=new S.vpe,this.nzExpandChange=new S.vpe,this.isNzShowExpandChanged=!1,this.isNzShowCheckboxChanged=!1}onCheckedChange(le){this.nzChecked=le,this.nzCheckedChange.emit(le)}onExpandChange(le){this.nzExpand=le,this.nzExpandChange.emit(le)}ngOnChanges(le){const Ae=nn=>nn&&nn.firstChange&&void 0!==nn.currentValue,{nzExpand:ut,nzChecked:Tt,nzShowExpand:Jt,nzShowCheckbox:on}=le;Jt&&(this.isNzShowExpandChanged=!0),on&&(this.isNzShowCheckboxChanged=!0),Ae(ut)&&!this.isNzShowExpandChanged&&(this.nzShowExpand=!0),Ae(Tt)&&!this.isNzShowCheckboxChanged&&(this.nzShowCheckbox=!0)}}return Ne.\u0275fac=function(le){return new(le||Ne)},Ne.\u0275cmp=S.Xpm({type:Ne,selectors:[["td","nzChecked",""],["td","nzDisabled",""],["td","nzIndeterminate",""],["td","nzIndentSize",""],["td","nzExpand",""],["td","nzShowExpand",""],["td","nzShowCheckbox",""]],hostVars:4,hostBindings:function(le,Ae){2&le&&S.ekj("ant-table-cell-with-append",Ae.nzShowExpand||Ae.nzIndentSize>0)("ant-table-selection-column",Ae.nzShowCheckbox)},inputs:{nzChecked:"nzChecked",nzDisabled:"nzDisabled",nzIndeterminate:"nzIndeterminate",nzIndentSize:"nzIndentSize",nzShowExpand:"nzShowExpand",nzShowCheckbox:"nzShowCheckbox",nzExpand:"nzExpand"},outputs:{nzCheckedChange:"nzCheckedChange",nzExpandChange:"nzExpandChange"},features:[S.TTD],attrs:jn,ngContentSelectors:Pr,decls:3,vars:2,consts:[[4,"ngIf"],["nz-checkbox","",3,"nzDisabled","ngModel","nzIndeterminate","ngModelChange",4,"ngIf"],[3,"indentSize"],["nz-row-expand-button","",3,"expand","spaceMode","expandChange"],["nz-checkbox","",3,"nzDisabled","ngModel","nzIndeterminate","ngModelChange"]],template:function(le,Ae){1&le&&(S.F$t(),S.YNc(0,Nr,3,3,"ng-container",0),S.YNc(1,ti,1,3,"label",1),S.Hsn(2)),2&le&&(S.Q6J("ngIf",Ae.nzShowExpand||Ae.nzIndentSize>0),S.xp6(1),S.Q6J("ngIf",Ae.nzShowCheckbox))},directives:[k.Ie,j.O5,Is,lo,fe.JJ,fe.On],encapsulation:2,changeDetection:0}),(0,A.gn)([(0,Y.yF)()],Ne.prototype,"nzShowExpand",void 0),(0,A.gn)([(0,Y.yF)()],Ne.prototype,"nzShowCheckbox",void 0),(0,A.gn)([(0,Y.yF)()],Ne.prototype,"nzExpand",void 0),Ne})(),xi=(()=>{class Ne{constructor(le,Ae,ut,Tt){this.host=le,this.cdr=Ae,this.ngZone=ut,this.destroy$=Tt,this.manualClickOrder$=new P.x,this.calcOperatorChange$=new P.x,this.nzFilterValue=null,this.sortOrder=null,this.sortDirections=["ascend","descend",null],this.sortOrderChange$=new P.x,this.isNzShowSortChanged=!1,this.isNzShowFilterChanged=!1,this.nzFilterMultiple=!0,this.nzSortOrder=null,this.nzSortPriority=!1,this.nzSortDirections=["ascend","descend",null],this.nzFilters=[],this.nzSortFn=null,this.nzFilterFn=null,this.nzShowSort=!1,this.nzShowFilter=!1,this.nzCustomFilter=!1,this.nzCheckedChange=new S.vpe,this.nzSortOrderChange=new S.vpe,this.nzFilterChange=new S.vpe}getNextSortDirection(le,Ae){const ut=le.indexOf(Ae);return ut===le.length-1?le[0]:le[ut+1]}setSortOrder(le){this.sortOrderChange$.next(le)}clearSortOrder(){null!==this.sortOrder&&this.setSortOrder(null)}onFilterValueChange(le){this.nzFilterChange.emit(le),this.nzFilterValue=le,this.updateCalcOperator()}updateCalcOperator(){this.calcOperatorChange$.next()}ngOnInit(){this.ngZone.runOutsideAngular(()=>(0,Dn.R)(this.host.nativeElement,"click").pipe((0,Ye.h)(()=>this.nzShowSort),(0,H.R)(this.destroy$)).subscribe(()=>{const le=this.getNextSortDirection(this.sortDirections,this.sortOrder);this.ngZone.run(()=>{this.setSortOrder(le),this.manualClickOrder$.next(this)})})),this.sortOrderChange$.pipe((0,H.R)(this.destroy$)).subscribe(le=>{this.sortOrder!==le&&(this.sortOrder=le,this.nzSortOrderChange.emit(le)),this.updateCalcOperator(),this.cdr.markForCheck()})}ngOnChanges(le){const{nzSortDirections:Ae,nzFilters:ut,nzSortOrder:Tt,nzSortFn:Jt,nzFilterFn:on,nzSortPriority:nn,nzFilterMultiple:tr,nzShowSort:pr,nzShowFilter:Tn}=le;Ae&&this.nzSortDirections&&this.nzSortDirections.length&&(this.sortDirections=this.nzSortDirections),Tt&&(this.sortOrder=this.nzSortOrder,this.setSortOrder(this.nzSortOrder)),pr&&(this.isNzShowSortChanged=!0),Tn&&(this.isNzShowFilterChanged=!0);const Zr=na=>na&&na.firstChange&&void 0!==na.currentValue;if((Zr(Tt)||Zr(Jt))&&!this.isNzShowSortChanged&&(this.nzShowSort=!0),Zr(ut)&&!this.isNzShowFilterChanged&&(this.nzShowFilter=!0),(ut||tr)&&this.nzShowFilter){const na=this.nzFilters.filter(Wn=>Wn.byDefault).map(Wn=>Wn.value);this.nzFilterValue=this.nzFilterMultiple?na:na[0]||null}(Jt||on||nn||ut)&&this.updateCalcOperator()}}return Ne.\u0275fac=function(le){return new(le||Ne)(S.Y36(S.SBq),S.Y36(S.sBO),S.Y36(S.R0b),S.Y36(U.kn))},Ne.\u0275cmp=S.Xpm({type:Ne,selectors:[["th","nzColumnKey",""],["th","nzSortFn",""],["th","nzSortOrder",""],["th","nzFilters",""],["th","nzShowSort",""],["th","nzShowFilter",""],["th","nzCustomFilter",""]],hostVars:4,hostBindings:function(le,Ae){2&le&&S.ekj("ant-table-column-has-sorters",Ae.nzShowSort)("ant-table-column-sort","descend"===Ae.sortOrder||"ascend"===Ae.sortOrder)},inputs:{nzColumnKey:"nzColumnKey",nzFilterMultiple:"nzFilterMultiple",nzSortOrder:"nzSortOrder",nzSortPriority:"nzSortPriority",nzSortDirections:"nzSortDirections",nzFilters:"nzFilters",nzSortFn:"nzSortFn",nzFilterFn:"nzFilterFn",nzShowSort:"nzShowSort",nzShowFilter:"nzShowFilter",nzCustomFilter:"nzCustomFilter"},outputs:{nzCheckedChange:"nzCheckedChange",nzSortOrderChange:"nzSortOrderChange",nzFilterChange:"nzFilterChange"},features:[S._Bn([U.kn]),S.TTD],attrs:ni,ngContentSelectors:Fa,decls:9,vars:2,consts:[[3,"contentTemplate","extraTemplate","customFilter","filterMultiple","listOfFilter","filterChange",4,"ngIf","ngIfElse"],["notFilterTemplate",""],["extraTemplate",""],["sortTemplate",""],["contentTemplate",""],[3,"contentTemplate","extraTemplate","customFilter","filterMultiple","listOfFilter","filterChange"],[3,"ngTemplateOutlet"],[3,"sortOrder","sortDirections","contentTemplate"]],template:function(le,Ae){if(1&le&&(S.F$t(Ir),S.YNc(0,Cr,1,5,"nz-table-filter",0),S.YNc(1,ri,1,1,"ng-template",null,1,S.W1O),S.YNc(3,Ra,2,0,"ng-template",null,2,S.W1O),S.YNc(5,Na,1,3,"ng-template",null,3,S.W1O),S.YNc(7,ar,1,0,"ng-template",null,4,S.W1O)),2&le){const ut=S.MAs(2);S.Q6J("ngIf",Ae.nzShowFilter||Ae.nzCustomFilter)("ngIfElse",ut)}},directives:[rs,Ja,j.O5,j.tP],encapsulation:2,changeDetection:0}),(0,A.gn)([(0,Y.yF)()],Ne.prototype,"nzShowSort",void 0),(0,A.gn)([(0,Y.yF)()],Ne.prototype,"nzShowFilter",void 0),(0,A.gn)([(0,Y.yF)()],Ne.prototype,"nzCustomFilter",void 0),Ne})(),fr=(()=>{class Ne{constructor(le,Ae){this.renderer=le,this.elementRef=Ae,this.changes$=new P.x,this.nzWidth=null,this.colspan=null,this.colSpan=null,this.rowspan=null,this.rowSpan=null}ngOnChanges(le){const{nzWidth:Ae,colspan:ut,rowspan:Tt,colSpan:Jt,rowSpan:on}=le;if(ut||Jt){const nn=this.colspan||this.colSpan;(0,Y.kK)(nn)?this.renderer.removeAttribute(this.elementRef.nativeElement,"colspan"):this.renderer.setAttribute(this.elementRef.nativeElement,"colspan",`${nn}`)}if(Tt||on){const nn=this.rowspan||this.rowSpan;(0,Y.kK)(nn)?this.renderer.removeAttribute(this.elementRef.nativeElement,"rowspan"):this.renderer.setAttribute(this.elementRef.nativeElement,"rowspan",`${nn}`)}(Ae||ut)&&this.changes$.next()}}return Ne.\u0275fac=function(le){return new(le||Ne)(S.Y36(S.Qsj),S.Y36(S.SBq))},Ne.\u0275dir=S.lG2({type:Ne,selectors:[["th"]],inputs:{nzWidth:"nzWidth",colspan:"colspan",colSpan:"colSpan",rowspan:"rowspan",rowSpan:"rowSpan"},features:[S.TTD]}),Ne})(),xr=(()=>{class Ne{constructor(){this.nzSelections=[],this.nzChecked=!1,this.nzDisabled=!1,this.nzIndeterminate=!1,this.nzShowCheckbox=!1,this.nzShowRowSelection=!1,this.nzCheckedChange=new S.vpe,this.isNzShowExpandChanged=!1,this.isNzShowCheckboxChanged=!1}onCheckedChange(le){this.nzChecked=le,this.nzCheckedChange.emit(le)}ngOnChanges(le){const Ae=nn=>nn&&nn.firstChange&&void 0!==nn.currentValue,{nzChecked:ut,nzSelections:Tt,nzShowExpand:Jt,nzShowCheckbox:on}=le;Jt&&(this.isNzShowExpandChanged=!0),on&&(this.isNzShowCheckboxChanged=!0),Ae(Tt)&&!this.isNzShowExpandChanged&&(this.nzShowRowSelection=!0),Ae(ut)&&!this.isNzShowCheckboxChanged&&(this.nzShowCheckbox=!0)}}return Ne.\u0275fac=function(le){return new(le||Ne)},Ne.\u0275cmp=S.Xpm({type:Ne,selectors:[["th","nzSelections",""],["th","nzChecked",""],["th","nzShowCheckbox",""],["th","nzShowRowSelection",""]],hostAttrs:[1,"ant-table-selection-column"],inputs:{nzSelections:"nzSelections",nzChecked:"nzChecked",nzDisabled:"nzDisabled",nzIndeterminate:"nzIndeterminate",nzShowCheckbox:"nzShowCheckbox",nzShowRowSelection:"nzShowRowSelection"},outputs:{nzCheckedChange:"nzCheckedChange"},features:[S.TTD],attrs:Yi,ngContentSelectors:Pr,decls:2,vars:6,consts:[[3,"checked","disabled","indeterminate","listOfSelections","showCheckbox","showRowSelection","checkedChange"]],template:function(le,Ae){1&le&&(S.F$t(),S.TgZ(0,"nz-table-selection",0),S.NdJ("checkedChange",function(Tt){return Ae.onCheckedChange(Tt)}),S.qZA(),S.Hsn(1)),2&le&&S.Q6J("checked",Ae.nzChecked)("disabled",Ae.nzDisabled)("indeterminate",Ae.nzIndeterminate)("listOfSelections",Ae.nzSelections)("showCheckbox",Ae.nzShowCheckbox)("showRowSelection",Ae.nzShowRowSelection)},directives:[Ga],encapsulation:2,changeDetection:0}),(0,A.gn)([(0,Y.yF)()],Ne.prototype,"nzShowCheckbox",void 0),(0,A.gn)([(0,Y.yF)()],Ne.prototype,"nzShowRowSelection",void 0),Ne})(),vi=(()=>{class Ne{constructor(){this.tableLayout="auto",this.theadTemplate=null,this.contentTemplate=null,this.listOfColWidth=[],this.scrollX=null}}return Ne.\u0275fac=function(le){return new(le||Ne)},Ne.\u0275cmp=S.Xpm({type:Ne,selectors:[["table","nz-table-content",""]],hostVars:8,hostBindings:function(le,Ae){2&le&&(S.Udp("table-layout",Ae.tableLayout)("width",Ae.scrollX)("min-width",Ae.scrollX?"100%":null),S.ekj("ant-table-fixed",Ae.scrollX))},inputs:{tableLayout:"tableLayout",theadTemplate:"theadTemplate",contentTemplate:"contentTemplate",listOfColWidth:"listOfColWidth",scrollX:"scrollX"},attrs:Ba,ngContentSelectors:Pr,decls:4,vars:3,consts:[[3,"width","minWidth",4,"ngFor","ngForOf"],["class","ant-table-thead",4,"ngIf"],[3,"ngTemplateOutlet"],[1,"ant-table-thead"]],template:function(le,Ae){1&le&&(S.F$t(),S.YNc(0,Ds,1,4,"col",0),S.YNc(1,Za,2,1,"thead",1),S.YNc(2,Ua,0,0,"ng-template",2),S.Hsn(3)),2&le&&(S.Q6J("ngForOf",Ae.listOfColWidth),S.xp6(1),S.Q6J("ngIf",Ae.theadTemplate),S.xp6(1),S.Q6J("ngTemplateOutlet",Ae.contentTemplate))},directives:[j.sg,j.O5,j.tP],encapsulation:2,changeDetection:0}),Ne})(),ta=(()=>{class Ne{constructor(le,Ae){this.nzTableStyleService=le,this.renderer=Ae,this.hostWidth$=new Nt.X(null),this.enableAutoMeasure$=new Nt.X(!1),this.destroy$=new P.x}ngOnInit(){if(this.nzTableStyleService){const{enableAutoMeasure$:le,hostWidth$:Ae}=this.nzTableStyleService;le.pipe((0,H.R)(this.destroy$)).subscribe(this.enableAutoMeasure$),Ae.pipe((0,H.R)(this.destroy$)).subscribe(this.hostWidth$)}}ngAfterViewInit(){this.nzTableStyleService.columnCount$.pipe((0,H.R)(this.destroy$)).subscribe(le=>{this.renderer.setAttribute(this.tdElement.nativeElement,"colspan",`${le}`)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return Ne.\u0275fac=function(le){return new(le||Ne)(S.Y36(si),S.Y36(S.Qsj))},Ne.\u0275cmp=S.Xpm({type:Ne,selectors:[["tr","nz-table-fixed-row",""],["tr","nzExpand",""]],viewQuery:function(le,Ae){if(1&le&&S.Gf(Va,7),2&le){let ut;S.iGM(ut=S.CRH())&&(Ae.tdElement=ut.first)}},attrs:qt,ngContentSelectors:Pr,decls:6,vars:4,consts:[[1,"nz-disable-td","ant-table-cell"],["tdElement",""],["class","ant-table-expanded-row-fixed","style","position: sticky; left: 0px; overflow: hidden;",3,"width",4,"ngIf","ngIfElse"],["contentTemplate",""],[1,"ant-table-expanded-row-fixed",2,"position","sticky","left","0px","overflow","hidden"],[3,"ngTemplateOutlet"]],template:function(le,Ae){if(1&le&&(S.F$t(),S.TgZ(0,"td",0,1),S.YNc(2,Ei,3,5,"div",2),S.ALo(3,"async"),S.qZA(),S.YNc(4,es,1,0,"ng-template",null,3,S.W1O)),2&le){const ut=S.MAs(5);S.xp6(2),S.Q6J("ngIf",S.lcZ(3,2,Ae.enableAutoMeasure$))("ngIfElse",ut)}},directives:[j.O5,j.tP],pipes:[j.Ov],encapsulation:2,changeDetection:0}),Ne})(),ca=(()=>{class Ne{constructor(){this.tableLayout="auto",this.listOfColWidth=[],this.theadTemplate=null,this.contentTemplate=null}}return Ne.\u0275fac=function(le){return new(le||Ne)},Ne.\u0275cmp=S.Xpm({type:Ne,selectors:[["nz-table-inner-default"]],hostAttrs:[1,"ant-table-container"],inputs:{tableLayout:"tableLayout",listOfColWidth:"listOfColWidth",theadTemplate:"theadTemplate",contentTemplate:"contentTemplate"},decls:2,vars:4,consts:[[1,"ant-table-content"],["nz-table-content","",3,"contentTemplate","tableLayout","listOfColWidth","theadTemplate"]],template:function(le,Ae){1&le&&(S.TgZ(0,"div",0),S._UZ(1,"table",1),S.qZA()),2&le&&(S.xp6(1),S.Q6J("contentTemplate",Ae.contentTemplate)("tableLayout",Ae.tableLayout)("listOfColWidth",Ae.listOfColWidth)("theadTemplate",Ae.theadTemplate))},directives:[vi],encapsulation:2,changeDetection:0}),Ne})(),is=(()=>{class Ne{constructor(le,Ae){this.nzResizeObserver=le,this.ngZone=Ae,this.listOfMeasureColumn=[],this.listOfAutoWidth=new S.vpe,this.destroy$=new P.x}trackByFunc(le,Ae){return Ae}ngAfterViewInit(){this.listOfTdElement.changes.pipe((0,Ut.O)(this.listOfTdElement)).pipe((0,Qt.w)(le=>(0,Zt.a)(le.toArray().map(Ae=>this.nzResizeObserver.observe(Ae).pipe((0,it.U)(([ut])=>{const{width:Tt}=ut.target.getBoundingClientRect();return Math.floor(Tt)}))))),(0,zn.b)(16),(0,H.R)(this.destroy$)).subscribe(le=>{this.ngZone instanceof S.R0b&&S.R0b.isInAngularZone()?this.listOfAutoWidth.next(le):this.ngZone.run(()=>this.listOfAutoWidth.next(le))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return Ne.\u0275fac=function(le){return new(le||Ne)(S.Y36(se.D3),S.Y36(S.R0b))},Ne.\u0275cmp=S.Xpm({type:Ne,selectors:[["tr","nz-table-measure-row",""]],viewQuery:function(le,Ae){if(1&le&&S.Gf(Va,5),2&le){let ut;S.iGM(ut=S.CRH())&&(Ae.listOfTdElement=ut)}},hostAttrs:[1,"ant-table-measure-now"],inputs:{listOfMeasureColumn:"listOfMeasureColumn"},outputs:{listOfAutoWidth:"listOfAutoWidth"},attrs:or,decls:1,vars:2,consts:[["class","nz-disable-td","style","padding: 0px; border: 0px; height: 0px;",4,"ngFor","ngForOf","ngForTrackBy"],[1,"nz-disable-td",2,"padding","0px","border","0px","height","0px"],["tdElement",""]],template:function(le,Ae){1&le&&S.YNc(0,oo,2,0,"td",0),2&le&&S.Q6J("ngForOf",Ae.listOfMeasureColumn)("ngForTrackBy",Ae.trackByFunc)},directives:[j.sg],encapsulation:2,changeDetection:0}),Ne})(),ho=(()=>{class Ne{constructor(le){if(this.nzTableStyleService=le,this.isInsideTable=!1,this.showEmpty$=new Nt.X(!1),this.noResult$=new Nt.X(void 0),this.listOfMeasureColumn$=new Nt.X([]),this.destroy$=new P.x,this.isInsideTable=!!this.nzTableStyleService,this.nzTableStyleService){const{showEmpty$:Ae,noResult$:ut,listOfMeasureColumn$:Tt}=this.nzTableStyleService;ut.pipe((0,H.R)(this.destroy$)).subscribe(this.noResult$),Tt.pipe((0,H.R)(this.destroy$)).subscribe(this.listOfMeasureColumn$),Ae.pipe((0,H.R)(this.destroy$)).subscribe(this.showEmpty$)}}onListOfAutoWidthChange(le){this.nzTableStyleService.setListOfAutoWidth(le)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return Ne.\u0275fac=function(le){return new(le||Ne)(S.Y36(si,8))},Ne.\u0275cmp=S.Xpm({type:Ne,selectors:[["tbody"]],hostVars:2,hostBindings:function(le,Ae){2&le&&S.ekj("ant-table-tbody",Ae.isInsideTable)},ngContentSelectors:Pr,decls:5,vars:6,consts:[[4,"ngIf"],["class","ant-table-placeholder","nz-table-fixed-row","",4,"ngIf"],["nz-table-measure-row","",3,"listOfMeasureColumn","listOfAutoWidth",4,"ngIf"],["nz-table-measure-row","",3,"listOfMeasureColumn","listOfAutoWidth"],["nz-table-fixed-row","",1,"ant-table-placeholder"],["nzComponentName","table",3,"specificContent"]],template:function(le,Ae){1&le&&(S.F$t(),S.YNc(0,As,2,1,"ng-container",0),S.ALo(1,"async"),S.Hsn(2),S.YNc(3,uu,3,3,"tr",1),S.ALo(4,"async")),2&le&&(S.Q6J("ngIf",S.lcZ(1,2,Ae.listOfMeasureColumn$)),S.xp6(3),S.Q6J("ngIf",S.lcZ(4,4,Ae.showEmpty$)))},directives:[is,ta,ie.gB,j.O5],pipes:[j.Ov],encapsulation:2,changeDetection:0}),Ne})(),as=(()=>{class Ne{constructor(le,Ae,ut,Tt){this.renderer=le,this.ngZone=Ae,this.platform=ut,this.resizeService=Tt,this.data=[],this.scrollX=null,this.scrollY=null,this.contentTemplate=null,this.widthConfig=[],this.listOfColWidth=[],this.theadTemplate=null,this.virtualTemplate=null,this.virtualItemSize=0,this.virtualMaxBufferPx=200,this.virtualMinBufferPx=100,this.virtualForTrackBy=Jt=>Jt,this.headerStyleMap={},this.bodyStyleMap={},this.verticalScrollBarWidth=0,this.noDateVirtualHeight="182px",this.data$=new P.x,this.scroll$=new P.x,this.destroy$=new P.x}setScrollPositionClassName(le=!1){const{scrollWidth:Ae,scrollLeft:ut,clientWidth:Tt}=this.tableBodyElement.nativeElement,Jt="ant-table-ping-left",on="ant-table-ping-right";Ae===Tt&&0!==Ae||le?(this.renderer.removeClass(this.tableMainElement,Jt),this.renderer.removeClass(this.tableMainElement,on)):0===ut?(this.renderer.removeClass(this.tableMainElement,Jt),this.renderer.addClass(this.tableMainElement,on)):Ae===ut+Tt?(this.renderer.removeClass(this.tableMainElement,on),this.renderer.addClass(this.tableMainElement,Jt)):(this.renderer.addClass(this.tableMainElement,Jt),this.renderer.addClass(this.tableMainElement,on))}ngOnChanges(le){const{scrollX:Ae,scrollY:ut,data:Tt}=le;if(Ae||ut){const Jt=0!==this.verticalScrollBarWidth;this.headerStyleMap={overflowX:"hidden",overflowY:this.scrollY&&Jt?"scroll":"hidden"},this.bodyStyleMap={overflowY:this.scrollY?"scroll":"hidden",overflowX:this.scrollX?"auto":null,maxHeight:this.scrollY},this.ngZone.runOutsideAngular(()=>this.scroll$.next())}Tt&&this.ngZone.runOutsideAngular(()=>this.data$.next())}ngAfterViewInit(){this.platform.isBrowser&&this.ngZone.runOutsideAngular(()=>{const le=this.scroll$.pipe((0,Ut.O)(null),(0,De.g)(0),(0,Qt.w)(()=>(0,Dn.R)(this.tableBodyElement.nativeElement,"scroll").pipe((0,Ut.O)(!0))),(0,H.R)(this.destroy$)),Ae=this.resizeService.subscribe().pipe((0,H.R)(this.destroy$)),ut=this.data$.pipe((0,H.R)(this.destroy$));(0,dr.T)(le,Ae,ut,this.scroll$).pipe((0,Ut.O)(!0),(0,De.g)(0),(0,H.R)(this.destroy$)).subscribe(()=>this.setScrollPositionClassName()),le.pipe((0,Ye.h)(()=>!!this.scrollY)).subscribe(()=>this.tableHeaderElement.nativeElement.scrollLeft=this.tableBodyElement.nativeElement.scrollLeft)})}ngOnDestroy(){this.setScrollPositionClassName(!0),this.destroy$.next(),this.destroy$.complete()}}return Ne.\u0275fac=function(le){return new(le||Ne)(S.Y36(S.Qsj),S.Y36(S.R0b),S.Y36(O.t4),S.Y36(U.rI))},Ne.\u0275cmp=S.Xpm({type:Ne,selectors:[["nz-table-inner-scroll"]],viewQuery:function(le,Ae){if(1&le&&(S.Gf(ua,5,S.SBq),S.Gf(In,5,S.SBq),S.Gf(ee.N7,5,ee.N7)),2&le){let ut;S.iGM(ut=S.CRH())&&(Ae.tableHeaderElement=ut.first),S.iGM(ut=S.CRH())&&(Ae.tableBodyElement=ut.first),S.iGM(ut=S.CRH())&&(Ae.cdkVirtualScrollViewport=ut.first)}},hostAttrs:[1,"ant-table-container"],inputs:{data:"data",scrollX:"scrollX",scrollY:"scrollY",contentTemplate:"contentTemplate",widthConfig:"widthConfig",listOfColWidth:"listOfColWidth",theadTemplate:"theadTemplate",virtualTemplate:"virtualTemplate",virtualItemSize:"virtualItemSize",virtualMaxBufferPx:"virtualMaxBufferPx",virtualMinBufferPx:"virtualMinBufferPx",tableMainElement:"tableMainElement",virtualForTrackBy:"virtualForTrackBy",verticalScrollBarWidth:"verticalScrollBarWidth"},features:[S.TTD],decls:2,vars:2,consts:[[4,"ngIf"],["class","ant-table-content",3,"ngStyle",4,"ngIf"],[1,"ant-table-header","nz-table-hide-scrollbar",3,"ngStyle"],["tableHeaderElement",""],["nz-table-content","","tableLayout","fixed",3,"scrollX","listOfColWidth","theadTemplate"],["class","ant-table-body",3,"ngStyle",4,"ngIf"],[3,"itemSize","maxBufferPx","minBufferPx","height",4,"ngIf"],[1,"ant-table-body",3,"ngStyle"],["tableBodyElement",""],["nz-table-content","","tableLayout","fixed",3,"scrollX","listOfColWidth","contentTemplate"],[3,"itemSize","maxBufferPx","minBufferPx"],["nz-table-content","","tableLayout","fixed",3,"scrollX","listOfColWidth"],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-table-content",3,"ngStyle"],["nz-table-content","","tableLayout","fixed",3,"scrollX","listOfColWidth","theadTemplate","contentTemplate"]],template:function(le,Ae){1&le&&(S.YNc(0,so,6,6,"ng-container",0),S.YNc(1,Es,3,5,"div",1)),2&le&&(S.Q6J("ngIf",Ae.scrollY),S.xp6(1),S.Q6J("ngIf",!Ae.scrollY))},directives:[vi,ee.N7,ho,j.O5,j.PC,ee.xd,ee.x0,j.tP],encapsulation:2,changeDetection:0}),Ne})(),Oi=(()=>{class Ne{constructor(le){this.templateRef=le}static ngTemplateContextGuard(le,Ae){return!0}}return Ne.\u0275fac=function(le){return new(le||Ne)(S.Y36(S.Rgc))},Ne.\u0275dir=S.lG2({type:Ne,selectors:[["","nz-virtual-scroll",""]],exportAs:["nzVirtualScroll"]}),Ne})(),ba=(()=>{class Ne{constructor(){this.destroy$=new P.x,this.pageIndex$=new Nt.X(1),this.frontPagination$=new Nt.X(!0),this.pageSize$=new Nt.X(10),this.listOfData$=new Nt.X([]),this.pageIndexDistinct$=this.pageIndex$.pipe((0,_t.x)()),this.pageSizeDistinct$=this.pageSize$.pipe((0,_t.x)()),this.listOfCalcOperator$=new Nt.X([]),this.queryParams$=(0,Zt.a)([this.pageIndexDistinct$,this.pageSizeDistinct$,this.listOfCalcOperator$]).pipe((0,zn.b)(0),(0,cr.T)(1),(0,it.U)(([le,Ae,ut])=>({pageIndex:le,pageSize:Ae,sort:ut.filter(Tt=>Tt.sortFn).map(Tt=>({key:Tt.key,value:Tt.sortOrder})),filter:ut.filter(Tt=>Tt.filterFn).map(Tt=>({key:Tt.key,value:Tt.filterValue}))}))),this.listOfDataAfterCalc$=(0,Zt.a)([this.listOfData$,this.listOfCalcOperator$]).pipe((0,it.U)(([le,Ae])=>{let ut=[...le];const Tt=Ae.filter(on=>{const{filterValue:nn,filterFn:tr}=on;return!(null==nn||Array.isArray(nn)&&0===nn.length)&&"function"==typeof tr});for(const on of Tt){const{filterFn:nn,filterValue:tr}=on;ut=ut.filter(pr=>nn(tr,pr))}const Jt=Ae.filter(on=>null!==on.sortOrder&&"function"==typeof on.sortFn).sort((on,nn)=>+nn.sortPriority-+on.sortPriority);return Ae.length&&ut.sort((on,nn)=>{for(const tr of Jt){const{sortFn:pr,sortOrder:Tn}=tr;if(pr&&Tn){const Zr=pr(on,nn,Tn);if(0!==Zr)return"ascend"===Tn?Zr:-Zr}}return 0}),ut})),this.listOfFrontEndCurrentPageData$=(0,Zt.a)([this.pageIndexDistinct$,this.pageSizeDistinct$,this.listOfDataAfterCalc$]).pipe((0,H.R)(this.destroy$),(0,Ye.h)(le=>{const[Ae,ut,Tt]=le;return Ae<=(Math.ceil(Tt.length/ut)||1)}),(0,it.U)(([le,Ae,ut])=>ut.slice((le-1)*Ae,le*Ae))),this.listOfCurrentPageData$=this.frontPagination$.pipe((0,Qt.w)(le=>le?this.listOfFrontEndCurrentPageData$:this.listOfDataAfterCalc$)),this.total$=this.frontPagination$.pipe((0,Qt.w)(le=>le?this.listOfDataAfterCalc$:this.listOfData$),(0,it.U)(le=>le.length),(0,_t.x)())}updatePageSize(le){this.pageSize$.next(le)}updateFrontPagination(le){this.frontPagination$.next(le)}updatePageIndex(le){this.pageIndex$.next(le)}updateListOfData(le){this.listOfData$.next(le)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return Ne.\u0275fac=function(le){return new(le||Ne)},Ne.\u0275prov=S.Yz7({token:Ne,factory:Ne.\u0275fac}),Ne})(),Qa=(()=>{class Ne{constructor(){this.title=null,this.footer=null}}return Ne.\u0275fac=function(le){return new(le||Ne)},Ne.\u0275cmp=S.Xpm({type:Ne,selectors:[["nz-table-title-footer"]],hostVars:4,hostBindings:function(le,Ae){2&le&&S.ekj("ant-table-title",null!==Ae.title)("ant-table-footer",null!==Ae.footer)},inputs:{title:"title",footer:"footer"},decls:2,vars:2,consts:[[4,"nzStringTemplateOutlet"]],template:function(le,Ae){1&le&&(S.YNc(0,Ms,2,1,"ng-container",0),S.YNc(1,Ca,2,1,"ng-container",0)),2&le&&(S.Q6J("nzStringTemplateOutlet",Ae.title),S.xp6(1),S.Q6J("nzStringTemplateOutlet",Ae.footer))},directives:[K.f],encapsulation:2,changeDetection:0}),Ne})(),po=(()=>{class Ne{constructor(le,Ae,ut,Tt,Jt,on,nn){this.elementRef=le,this.nzResizeObserver=Ae,this.nzConfigService=ut,this.cdr=Tt,this.nzTableStyleService=Jt,this.nzTableDataService=on,this.directionality=nn,this._nzModuleName="table",this.nzTableLayout="auto",this.nzShowTotal=null,this.nzItemRender=null,this.nzTitle=null,this.nzFooter=null,this.nzNoResult=void 0,this.nzPageSizeOptions=[10,20,30,40,50],this.nzVirtualItemSize=0,this.nzVirtualMaxBufferPx=200,this.nzVirtualMinBufferPx=100,this.nzVirtualForTrackBy=tr=>tr,this.nzLoadingDelay=0,this.nzPageIndex=1,this.nzPageSize=10,this.nzTotal=0,this.nzWidthConfig=[],this.nzData=[],this.nzPaginationPosition="bottom",this.nzScroll={x:null,y:null},this.nzPaginationType="default",this.nzFrontPagination=!0,this.nzTemplateMode=!1,this.nzShowPagination=!0,this.nzLoading=!1,this.nzOuterBordered=!1,this.nzLoadingIndicator=null,this.nzBordered=!1,this.nzSize="default",this.nzShowSizeChanger=!1,this.nzHideOnSinglePage=!1,this.nzShowQuickJumper=!1,this.nzSimple=!1,this.nzPageSizeChange=new S.vpe,this.nzPageIndexChange=new S.vpe,this.nzQueryParams=new S.vpe,this.nzCurrentPageDataChange=new S.vpe,this.data=[],this.scrollX=null,this.scrollY=null,this.theadTemplate=null,this.listOfAutoColWidth=[],this.listOfManualColWidth=[],this.hasFixLeft=!1,this.hasFixRight=!1,this.showPagination=!0,this.destroy$=new P.x,this.templateMode$=new Nt.X(!1),this.dir="ltr",this.verticalScrollBarWidth=0,this.nzConfigService.getConfigChangeEventForComponent("table").pipe((0,H.R)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}onPageSizeChange(le){this.nzTableDataService.updatePageSize(le)}onPageIndexChange(le){this.nzTableDataService.updatePageIndex(le)}ngOnInit(){var le;const{pageIndexDistinct$:Ae,pageSizeDistinct$:ut,listOfCurrentPageData$:Tt,total$:Jt,queryParams$:on}=this.nzTableDataService,{theadTemplate$:nn,hasFixLeft$:tr,hasFixRight$:pr}=this.nzTableStyleService;this.dir=this.directionality.value,null===(le=this.directionality.change)||void 0===le||le.pipe((0,H.R)(this.destroy$)).subscribe(Tn=>{this.dir=Tn,this.cdr.detectChanges()}),on.pipe((0,H.R)(this.destroy$)).subscribe(this.nzQueryParams),Ae.pipe((0,H.R)(this.destroy$)).subscribe(Tn=>{Tn!==this.nzPageIndex&&(this.nzPageIndex=Tn,this.nzPageIndexChange.next(Tn))}),ut.pipe((0,H.R)(this.destroy$)).subscribe(Tn=>{Tn!==this.nzPageSize&&(this.nzPageSize=Tn,this.nzPageSizeChange.next(Tn))}),Jt.pipe((0,H.R)(this.destroy$),(0,Ye.h)(()=>this.nzFrontPagination)).subscribe(Tn=>{Tn!==this.nzTotal&&(this.nzTotal=Tn,this.cdr.markForCheck())}),Tt.pipe((0,H.R)(this.destroy$)).subscribe(Tn=>{this.data=Tn,this.nzCurrentPageDataChange.next(Tn),this.cdr.markForCheck()}),nn.pipe((0,H.R)(this.destroy$)).subscribe(Tn=>{this.theadTemplate=Tn,this.cdr.markForCheck()}),tr.pipe((0,H.R)(this.destroy$)).subscribe(Tn=>{this.hasFixLeft=Tn,this.cdr.markForCheck()}),pr.pipe((0,H.R)(this.destroy$)).subscribe(Tn=>{this.hasFixRight=Tn,this.cdr.markForCheck()}),(0,Zt.a)([Jt,this.templateMode$]).pipe((0,it.U)(([Tn,Zr])=>0===Tn&&!Zr),(0,H.R)(this.destroy$)).subscribe(Tn=>{this.nzTableStyleService.setShowEmpty(Tn)}),this.verticalScrollBarWidth=(0,Y.D8)("vertical"),this.nzTableStyleService.listOfListOfThWidthPx$.pipe((0,H.R)(this.destroy$)).subscribe(Tn=>{this.listOfAutoColWidth=Tn,this.cdr.markForCheck()}),this.nzTableStyleService.manualWidthConfigPx$.pipe((0,H.R)(this.destroy$)).subscribe(Tn=>{this.listOfManualColWidth=Tn,this.cdr.markForCheck()})}ngOnChanges(le){const{nzScroll:Ae,nzPageIndex:ut,nzPageSize:Tt,nzFrontPagination:Jt,nzData:on,nzWidthConfig:nn,nzNoResult:tr,nzTemplateMode:pr}=le;ut&&this.nzTableDataService.updatePageIndex(this.nzPageIndex),Tt&&this.nzTableDataService.updatePageSize(this.nzPageSize),on&&(this.nzData=this.nzData||[],this.nzTableDataService.updateListOfData(this.nzData)),Jt&&this.nzTableDataService.updateFrontPagination(this.nzFrontPagination),Ae&&this.setScrollOnChanges(),nn&&this.nzTableStyleService.setTableWidthConfig(this.nzWidthConfig),pr&&this.templateMode$.next(this.nzTemplateMode),tr&&this.nzTableStyleService.setNoResult(this.nzNoResult),this.updateShowPagination()}ngAfterViewInit(){this.nzResizeObserver.observe(this.elementRef).pipe((0,it.U)(([le])=>{const{width:Ae}=le.target.getBoundingClientRect();return Math.floor(Ae-(this.scrollY?this.verticalScrollBarWidth:0))}),(0,H.R)(this.destroy$)).subscribe(this.nzTableStyleService.hostWidth$),this.nzTableInnerScrollComponent&&this.nzTableInnerScrollComponent.cdkVirtualScrollViewport&&(this.cdkVirtualScrollViewport=this.nzTableInnerScrollComponent.cdkVirtualScrollViewport)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setScrollOnChanges(){this.scrollX=this.nzScroll&&this.nzScroll.x||null,this.scrollY=this.nzScroll&&this.nzScroll.y||null,this.nzTableStyleService.setScroll(this.scrollX,this.scrollY)}updateShowPagination(){this.showPagination=this.nzHideOnSinglePage&&this.nzData.length>this.nzPageSize||this.nzData.length>0&&!this.nzHideOnSinglePage||!this.nzFrontPagination&&this.nzTotal>this.nzPageSize}}return Ne.\u0275fac=function(le){return new(le||Ne)(S.Y36(S.SBq),S.Y36(se.D3),S.Y36(Z.jY),S.Y36(S.sBO),S.Y36(si),S.Y36(ba),S.Y36(e.Is,8))},Ne.\u0275cmp=S.Xpm({type:Ne,selectors:[["nz-table"]],contentQueries:function(le,Ae,ut){if(1&le&&S.Suo(ut,Oi,5),2&le){let Tt;S.iGM(Tt=S.CRH())&&(Ae.nzVirtualScrollDirective=Tt.first)}},viewQuery:function(le,Ae){if(1&le&&S.Gf(as,5),2&le){let ut;S.iGM(ut=S.CRH())&&(Ae.nzTableInnerScrollComponent=ut.first)}},hostAttrs:[1,"ant-table-wrapper"],hostVars:2,hostBindings:function(le,Ae){2&le&&S.ekj("ant-table-wrapper-rtl","rtl"===Ae.dir)},inputs:{nzTableLayout:"nzTableLayout",nzShowTotal:"nzShowTotal",nzItemRender:"nzItemRender",nzTitle:"nzTitle",nzFooter:"nzFooter",nzNoResult:"nzNoResult",nzPageSizeOptions:"nzPageSizeOptions",nzVirtualItemSize:"nzVirtualItemSize",nzVirtualMaxBufferPx:"nzVirtualMaxBufferPx",nzVirtualMinBufferPx:"nzVirtualMinBufferPx",nzVirtualForTrackBy:"nzVirtualForTrackBy",nzLoadingDelay:"nzLoadingDelay",nzPageIndex:"nzPageIndex",nzPageSize:"nzPageSize",nzTotal:"nzTotal",nzWidthConfig:"nzWidthConfig",nzData:"nzData",nzPaginationPosition:"nzPaginationPosition",nzScroll:"nzScroll",nzPaginationType:"nzPaginationType",nzFrontPagination:"nzFrontPagination",nzTemplateMode:"nzTemplateMode",nzShowPagination:"nzShowPagination",nzLoading:"nzLoading",nzOuterBordered:"nzOuterBordered",nzLoadingIndicator:"nzLoadingIndicator",nzBordered:"nzBordered",nzSize:"nzSize",nzShowSizeChanger:"nzShowSizeChanger",nzHideOnSinglePage:"nzHideOnSinglePage",nzShowQuickJumper:"nzShowQuickJumper",nzSimple:"nzSimple"},outputs:{nzPageSizeChange:"nzPageSizeChange",nzPageIndexChange:"nzPageIndexChange",nzQueryParams:"nzQueryParams",nzCurrentPageDataChange:"nzCurrentPageDataChange"},exportAs:["nzTable"],features:[S._Bn([si,ba]),S.TTD],ngContentSelectors:Pr,decls:14,vars:27,consts:[[3,"nzDelay","nzSpinning","nzIndicator"],[4,"ngIf"],[1,"ant-table"],["tableMainElement",""],[3,"title",4,"ngIf"],[3,"data","scrollX","scrollY","contentTemplate","listOfColWidth","theadTemplate","verticalScrollBarWidth","virtualTemplate","virtualItemSize","virtualMaxBufferPx","virtualMinBufferPx","tableMainElement","virtualForTrackBy",4,"ngIf","ngIfElse"],["defaultTemplate",""],[3,"footer",4,"ngIf"],["paginationTemplate",""],["contentTemplate",""],[3,"ngTemplateOutlet"],[3,"title"],[3,"data","scrollX","scrollY","contentTemplate","listOfColWidth","theadTemplate","verticalScrollBarWidth","virtualTemplate","virtualItemSize","virtualMaxBufferPx","virtualMinBufferPx","tableMainElement","virtualForTrackBy"],[3,"tableLayout","listOfColWidth","theadTemplate","contentTemplate"],[3,"footer"],["class","ant-table-pagination ant-table-pagination-right",3,"hidden","nzShowSizeChanger","nzPageSizeOptions","nzItemRender","nzShowQuickJumper","nzHideOnSinglePage","nzShowTotal","nzSize","nzPageSize","nzTotal","nzSimple","nzPageIndex","nzPageSizeChange","nzPageIndexChange",4,"ngIf"],[1,"ant-table-pagination","ant-table-pagination-right",3,"hidden","nzShowSizeChanger","nzPageSizeOptions","nzItemRender","nzShowQuickJumper","nzHideOnSinglePage","nzShowTotal","nzSize","nzPageSize","nzTotal","nzSimple","nzPageIndex","nzPageSizeChange","nzPageIndexChange"]],template:function(le,Ae){if(1&le&&(S.F$t(),S.TgZ(0,"nz-spin",0),S.YNc(1,vl,2,1,"ng-container",1),S.TgZ(2,"div",2,3),S.YNc(4,Os,1,1,"nz-table-title-footer",4),S.YNc(5,fi,1,13,"nz-table-inner-scroll",5),S.YNc(6,Ps,1,4,"ng-template",null,6,S.W1O),S.YNc(8,sr,1,1,"nz-table-title-footer",7),S.qZA(),S.YNc(9,Gr,2,1,"ng-container",1),S.qZA(),S.YNc(10,xn,1,1,"ng-template",null,8,S.W1O),S.YNc(12,Fr,1,0,"ng-template",null,9,S.W1O)),2&le){const ut=S.MAs(7);S.Q6J("nzDelay",Ae.nzLoadingDelay)("nzSpinning",Ae.nzLoading)("nzIndicator",Ae.nzLoadingIndicator),S.xp6(1),S.Q6J("ngIf","both"===Ae.nzPaginationPosition||"top"===Ae.nzPaginationPosition),S.xp6(1),S.ekj("ant-table-rtl","rtl"===Ae.dir)("ant-table-fixed-header",Ae.nzData.length&&Ae.scrollY)("ant-table-fixed-column",Ae.scrollX)("ant-table-has-fix-left",Ae.hasFixLeft)("ant-table-has-fix-right",Ae.hasFixRight)("ant-table-bordered",Ae.nzBordered)("nz-table-out-bordered",Ae.nzOuterBordered&&!Ae.nzBordered)("ant-table-middle","middle"===Ae.nzSize)("ant-table-small","small"===Ae.nzSize),S.xp6(2),S.Q6J("ngIf",Ae.nzTitle),S.xp6(1),S.Q6J("ngIf",Ae.scrollY||Ae.scrollX)("ngIfElse",ut),S.xp6(3),S.Q6J("ngIf",Ae.nzFooter),S.xp6(1),S.Q6J("ngIf","both"===Ae.nzPaginationPosition||"bottom"===Ae.nzPaginationPosition)}},directives:[Er.W,Qa,as,ca,Sn,j.O5,j.tP],encapsulation:2,changeDetection:0}),(0,A.gn)([(0,Y.yF)()],Ne.prototype,"nzFrontPagination",void 0),(0,A.gn)([(0,Y.yF)()],Ne.prototype,"nzTemplateMode",void 0),(0,A.gn)([(0,Y.yF)()],Ne.prototype,"nzShowPagination",void 0),(0,A.gn)([(0,Y.yF)()],Ne.prototype,"nzLoading",void 0),(0,A.gn)([(0,Y.yF)()],Ne.prototype,"nzOuterBordered",void 0),(0,A.gn)([(0,Z.oS)()],Ne.prototype,"nzLoadingIndicator",void 0),(0,A.gn)([(0,Z.oS)(),(0,Y.yF)()],Ne.prototype,"nzBordered",void 0),(0,A.gn)([(0,Z.oS)()],Ne.prototype,"nzSize",void 0),(0,A.gn)([(0,Z.oS)(),(0,Y.yF)()],Ne.prototype,"nzShowSizeChanger",void 0),(0,A.gn)([(0,Z.oS)(),(0,Y.yF)()],Ne.prototype,"nzHideOnSinglePage",void 0),(0,A.gn)([(0,Z.oS)(),(0,Y.yF)()],Ne.prototype,"nzShowQuickJumper",void 0),(0,A.gn)([(0,Z.oS)(),(0,Y.yF)()],Ne.prototype,"nzSimple",void 0),Ne})(),go=(()=>{class Ne{constructor(le){this.nzTableStyleService=le,this.destroy$=new P.x,this.listOfFixedColumns$=new I.t(1),this.listOfColumns$=new I.t(1),this.listOfFixedColumnsChanges$=this.listOfFixedColumns$.pipe((0,Qt.w)(Ae=>(0,dr.T)(this.listOfFixedColumns$,...Ae.map(ut=>ut.changes$)).pipe((0,_n.z)(()=>this.listOfFixedColumns$))),(0,H.R)(this.destroy$)),this.listOfFixedLeftColumnChanges$=this.listOfFixedColumnsChanges$.pipe((0,it.U)(Ae=>Ae.filter(ut=>!1!==ut.nzLeft))),this.listOfFixedRightColumnChanges$=this.listOfFixedColumnsChanges$.pipe((0,it.U)(Ae=>Ae.filter(ut=>!1!==ut.nzRight))),this.listOfColumnsChanges$=this.listOfColumns$.pipe((0,Qt.w)(Ae=>(0,dr.T)(this.listOfColumns$,...Ae.map(ut=>ut.changes$)).pipe((0,_n.z)(()=>this.listOfColumns$))),(0,H.R)(this.destroy$)),this.isInsideTable=!1,this.isInsideTable=!!le}ngAfterContentInit(){this.nzTableStyleService&&(this.listOfCellFixedDirective.changes.pipe((0,Ut.O)(this.listOfCellFixedDirective),(0,H.R)(this.destroy$)).subscribe(this.listOfFixedColumns$),this.listOfNzThDirective.changes.pipe((0,Ut.O)(this.listOfNzThDirective),(0,H.R)(this.destroy$)).subscribe(this.listOfColumns$),this.listOfFixedLeftColumnChanges$.subscribe(le=>{le.forEach(Ae=>Ae.setIsLastLeft(Ae===le[le.length-1]))}),this.listOfFixedRightColumnChanges$.subscribe(le=>{le.forEach(Ae=>Ae.setIsFirstRight(Ae===le[0]))}),(0,Zt.a)([this.nzTableStyleService.listOfListOfThWidth$,this.listOfFixedLeftColumnChanges$]).pipe((0,H.R)(this.destroy$)).subscribe(([le,Ae])=>{Ae.forEach((ut,Tt)=>{if(ut.isAutoLeft){const on=Ae.slice(0,Tt).reduce((tr,pr)=>tr+(pr.colspan||pr.colSpan||1),0),nn=le.slice(0,on).reduce((tr,pr)=>tr+pr,0);ut.setAutoLeftWidth(`${nn}px`)}})}),(0,Zt.a)([this.nzTableStyleService.listOfListOfThWidth$,this.listOfFixedRightColumnChanges$]).pipe((0,H.R)(this.destroy$)).subscribe(([le,Ae])=>{Ae.forEach((ut,Tt)=>{const Jt=Ae[Ae.length-Tt-1];if(Jt.isAutoRight){const nn=Ae.slice(Ae.length-Tt,Ae.length).reduce((pr,Tn)=>pr+(Tn.colspan||Tn.colSpan||1),0),tr=le.slice(le.length-nn,le.length).reduce((pr,Tn)=>pr+Tn,0);Jt.setAutoRightWidth(`${tr}px`)}})}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return Ne.\u0275fac=function(le){return new(le||Ne)(S.Y36(si,8))},Ne.\u0275dir=S.lG2({type:Ne,selectors:[["tr",3,"mat-row","",3,"mat-header-row","",3,"nz-table-measure-row","",3,"nzExpand","",3,"nz-table-fixed-row",""]],contentQueries:function(le,Ae,ut){if(1&le&&(S.Suo(ut,fr,4),S.Suo(ut,uo,4)),2&le){let Tt;S.iGM(Tt=S.CRH())&&(Ae.listOfNzThDirective=Tt),S.iGM(Tt=S.CRH())&&(Ae.listOfCellFixedDirective=Tt)}},hostVars:2,hostBindings:function(le,Ae){2&le&&S.ekj("ant-table-row",Ae.isInsideTable)}}),Ne})(),os=(()=>{class Ne{constructor(le,Ae,ut,Tt){this.elementRef=le,this.renderer=Ae,this.nzTableStyleService=ut,this.nzTableDataService=Tt,this.destroy$=new P.x,this.isInsideTable=!1,this.nzSortOrderChange=new S.vpe,this.isInsideTable=!!this.nzTableStyleService}ngOnInit(){this.nzTableStyleService&&this.nzTableStyleService.setTheadTemplate(this.templateRef)}ngAfterContentInit(){if(this.nzTableStyleService){const le=this.listOfNzTrDirective.changes.pipe((0,Ut.O)(this.listOfNzTrDirective),(0,it.U)(Jt=>Jt&&Jt.first)),Ae=le.pipe((0,Qt.w)(Jt=>Jt?Jt.listOfColumnsChanges$:Ge.E),(0,H.R)(this.destroy$));Ae.subscribe(Jt=>this.nzTableStyleService.setListOfTh(Jt)),this.nzTableStyleService.enableAutoMeasure$.pipe((0,Qt.w)(Jt=>Jt?Ae:(0,Dt.of)([]))).pipe((0,H.R)(this.destroy$)).subscribe(Jt=>this.nzTableStyleService.setListOfMeasureColumn(Jt));const ut=le.pipe((0,Qt.w)(Jt=>Jt?Jt.listOfFixedLeftColumnChanges$:Ge.E),(0,H.R)(this.destroy$)),Tt=le.pipe((0,Qt.w)(Jt=>Jt?Jt.listOfFixedRightColumnChanges$:Ge.E),(0,H.R)(this.destroy$));ut.subscribe(Jt=>{this.nzTableStyleService.setHasFixLeft(0!==Jt.length)}),Tt.subscribe(Jt=>{this.nzTableStyleService.setHasFixRight(0!==Jt.length)})}if(this.nzTableDataService){const le=this.listOfNzThAddOnComponent.changes.pipe((0,Ut.O)(this.listOfNzThAddOnComponent));le.pipe((0,Qt.w)(()=>(0,dr.T)(...this.listOfNzThAddOnComponent.map(Tt=>Tt.manualClickOrder$))),(0,H.R)(this.destroy$)).subscribe(Tt=>{this.nzSortOrderChange.emit({key:Tt.nzColumnKey,value:Tt.sortOrder}),Tt.nzSortFn&&!1===Tt.nzSortPriority&&this.listOfNzThAddOnComponent.filter(on=>on!==Tt).forEach(on=>on.clearSortOrder())}),le.pipe((0,Qt.w)(Tt=>(0,dr.T)(le,...Tt.map(Jt=>Jt.calcOperatorChange$)).pipe((0,_n.z)(()=>le))),(0,it.U)(Tt=>Tt.filter(Jt=>!!Jt.nzSortFn||!!Jt.nzFilterFn).map(Jt=>{const{nzSortFn:on,sortOrder:nn,nzFilterFn:tr,nzFilterValue:pr,nzSortPriority:Tn,nzColumnKey:Zr}=Jt;return{key:Zr,sortFn:on,sortPriority:Tn,sortOrder:nn,filterFn:tr,filterValue:pr}})),(0,De.g)(0),(0,H.R)(this.destroy$)).subscribe(Tt=>{this.nzTableDataService.listOfCalcOperator$.next(Tt)})}}ngAfterViewInit(){this.nzTableStyleService&&this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),this.elementRef.nativeElement)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return Ne.\u0275fac=function(le){return new(le||Ne)(S.Y36(S.SBq),S.Y36(S.Qsj),S.Y36(si,8),S.Y36(ba,8))},Ne.\u0275cmp=S.Xpm({type:Ne,selectors:[["thead",9,"ant-table-thead"]],contentQueries:function(le,Ae,ut){if(1&le&&(S.Suo(ut,go,5),S.Suo(ut,xi,5)),2&le){let Tt;S.iGM(Tt=S.CRH())&&(Ae.listOfNzTrDirective=Tt),S.iGM(Tt=S.CRH())&&(Ae.listOfNzThAddOnComponent=Tt)}},viewQuery:function(le,Ae){if(1&le&&S.Gf(Rn,7),2&le){let ut;S.iGM(ut=S.CRH())&&(Ae.templateRef=ut.first)}},outputs:{nzSortOrderChange:"nzSortOrderChange"},ngContentSelectors:Pr,decls:3,vars:1,consts:[["contentTemplate",""],[4,"ngIf"],[3,"ngTemplateOutlet"]],template:function(le,Ae){1&le&&(S.F$t(),S.YNc(0,Br,1,0,"ng-template",null,0,S.W1O),S.YNc(2,Wa,2,1,"ng-container",1)),2&le&&(S.xp6(2),S.Q6J("ngIf",!Ae.isInsideTable))},directives:[j.O5,j.tP],encapsulation:2,changeDetection:0}),Ne})(),Fi=(()=>{class Ne{}return Ne.\u0275fac=function(le){return new(le||Ne)},Ne.\u0275mod=S.oAB({type:Ne}),Ne.\u0275inj=S.cJS({imports:[[e.vT,V.ip,fe.u5,K.T,yr.aF,k.Wr,ne.b1,he.sL,j.ez,O.ud,mn,se.y7,Er.j,re.YI,R.PV,ie.Xo,ee.Cl]]}),Ne})()},868:(Gt,ht,J)=>{"use strict";J.d(ht,{xw:()=>_n,cj:()=>_t,xH:()=>qe,we:()=>we});var e=J(5e3),O=J(969),ee=J(647),j=J(6360),S=J(6987),fe=J(5664),he=J(3191),se=J(1159),k=J(4968),K=J(727),ne=J(6406),ie=J(3101),re=J(7579),R=J(9646),V=J(6451),A=J(2722),P=J(3601),I=J(8675),H=J(590),Z=J(9300),U=J(1005),Y=J(3677),B=J(9808),q=J(4219),W=J(3088),L=J(2844),D=J(226),F=J(655),$=J(1721),oe=J(7152),M=J(7144),be=J(925),Me=J(9439),Ze=J(6947);function Fe(Pe,Qe){if(1&Pe&&(e.ynx(0),e._UZ(1,"i",1),e.BQk()),2&Pe){const Ie=Qe.$implicit;e.xp6(1),e.Q6J("nzType",Ie)}}function je(Pe,Qe){if(1&Pe&&(e.ynx(0),e._uU(1),e.BQk()),2&Pe){const Ie=e.oxw().$implicit;e.xp6(1),e.hij(" ",Ie.tab.label," ")}}const Ce=function(){return{visible:!1}};function Se(Pe,Qe){if(1&Pe){const Ie=e.EpF();e.TgZ(0,"li",8),e.NdJ("click",function(){const Mt=e.CHM(Ie).$implicit;return e.oxw(2).onSelect(Mt)})("contextmenu",function(tt){const ln=e.CHM(Ie).$implicit;return e.oxw(2).onContextmenu(ln,tt)}),e.YNc(1,je,2,1,"ng-container",9),e.qZA()}if(2&Pe){const Ie=Qe.$implicit;e.ekj("ant-tabs-dropdown-menu-item-disabled",Ie.disabled),e.Q6J("nzSelected",Ie.active)("nzDisabled",Ie.disabled),e.xp6(1),e.Q6J("nzStringTemplateOutlet",Ie.tab.label)("nzStringTemplateOutletContext",e.DdM(6,Ce))}}function rt(Pe,Qe){if(1&Pe&&(e.TgZ(0,"ul",6),e.YNc(1,Se,2,7,"li",7),e.qZA()),2&Pe){const Ie=e.oxw();e.xp6(1),e.Q6J("ngForOf",Ie.items)}}function ct(Pe,Qe){if(1&Pe){const Ie=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){return e.CHM(Ie),e.oxw().addClicked.emit()}),e.qZA()}if(2&Pe){const Ie=e.oxw();e.Q6J("addIcon",Ie.addIcon)}}const Lt=function(){return{minWidth:"46px"}},pt=["navWarp"],gt=["navList"];function st(Pe,Qe){if(1&Pe){const Ie=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){return e.CHM(Ie),e.oxw().addClicked.emit()}),e.qZA()}if(2&Pe){const Ie=e.oxw();e.Q6J("addIcon",Ie.addIcon)}}function zt(Pe,Qe){}function Pt(Pe,Qe){if(1&Pe&&(e.TgZ(0,"div",9),e.YNc(1,zt,0,0,"ng-template",10),e.qZA()),2&Pe){const Ie=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",Ie.extraTemplate)}}const Wt=["*"],sn=["nz-tab-body",""];function Vn(Pe,Qe){}function wn(Pe,Qe){if(1&Pe&&(e.ynx(0),e.YNc(1,Vn,0,0,"ng-template",1),e.BQk()),2&Pe){const Ie=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",Ie.content)}}function qn(Pe,Qe){if(1&Pe&&(e.ynx(0),e._UZ(1,"i",1),e.BQk()),2&Pe){const Ie=Qe.$implicit;e.xp6(1),e.Q6J("nzType",Ie)}}const fn=["contentTemplate"];function $n(Pe,Qe){1&Pe&&e.Hsn(0)}function ur(Pe,Qe){1&Pe&&e.Hsn(0,1)}const Pn=[[["","nz-tab-link",""]],"*"],Yn=["[nz-tab-link]","*"];function hr(Pe,Qe){if(1&Pe&&(e.ynx(0),e._uU(1),e.BQk()),2&Pe){const Ie=e.oxw().$implicit;e.xp6(1),e.Oqu(Ie.label)}}function vr(Pe,Qe){if(1&Pe){const Ie=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(tt){e.CHM(Ie);const Mt=e.oxw().index;return e.oxw(2).onClose(Mt,tt)}),e.qZA()}if(2&Pe){const Ie=e.oxw().$implicit;e.Q6J("closeIcon",Ie.nzCloseIcon)}}const ir=function(){return{visible:!0}};function tn(Pe,Qe){if(1&Pe){const Ie=e.EpF();e.TgZ(0,"div",6),e.NdJ("click",function(tt){const Mt=e.CHM(Ie),ln=Mt.$implicit,Ft=Mt.index;return e.oxw(2).clickNavItem(ln,Ft,tt)})("contextmenu",function(tt){const ln=e.CHM(Ie).$implicit;return e.oxw(2).contextmenuNavItem(ln,tt)}),e.TgZ(1,"div",7),e.YNc(2,hr,2,1,"ng-container",8),e.YNc(3,vr,1,1,"button",9),e.qZA()()}if(2&Pe){const Ie=Qe.$implicit,Ve=Qe.index,tt=e.oxw(2);e.Udp("margin-right","horizontal"===tt.position?tt.nzTabBarGutter:null,"px")("margin-bottom","vertical"===tt.position?tt.nzTabBarGutter:null,"px"),e.ekj("ant-tabs-tab-active",tt.nzSelectedIndex===Ve)("ant-tabs-tab-disabled",Ie.nzDisabled),e.xp6(1),e.Q6J("disabled",Ie.nzDisabled)("tab",Ie)("active",tt.nzSelectedIndex===Ve),e.uIk("tabIndex",tt.getTabIndex(Ie,Ve))("aria-disabled",Ie.nzDisabled)("aria-selected",tt.nzSelectedIndex===Ve&&!tt.nzHideAll)("aria-controls",tt.getTabContentId(Ve)),e.xp6(1),e.Q6J("nzStringTemplateOutlet",Ie.label)("nzStringTemplateOutletContext",e.DdM(18,ir)),e.xp6(1),e.Q6J("ngIf",Ie.nzClosable&&tt.closable&&!Ie.nzDisabled)}}function Sr(Pe,Qe){if(1&Pe){const Ie=e.EpF();e.TgZ(0,"nz-tabs-nav",4),e.NdJ("tabScroll",function(tt){return e.CHM(Ie),e.oxw().nzTabListScroll.emit(tt)})("selectFocusedIndex",function(tt){return e.CHM(Ie),e.oxw().setSelectedIndex(tt)})("addClicked",function(){return e.CHM(Ie),e.oxw().onAdd()}),e.YNc(1,tn,4,19,"div",5),e.qZA()}if(2&Pe){const Ie=e.oxw();e.Q6J("ngStyle",Ie.nzTabBarStyle)("selectedIndex",Ie.nzSelectedIndex||0)("inkBarAnimated",Ie.inkBarAnimated)("addable",Ie.addable)("addIcon",Ie.nzAddIcon)("hideBar",Ie.nzHideAll)("position",Ie.position)("extraTemplate",Ie.nzTabBarExtraContent),e.xp6(1),e.Q6J("ngForOf",Ie.tabs)}}function un(Pe,Qe){if(1&Pe&&e._UZ(0,"div",11),2&Pe){const Ie=Qe.$implicit,Ve=Qe.index,tt=e.oxw();e.Q6J("active",tt.nzSelectedIndex===Ve&&!tt.nzHideAll)("content",Ie.content)("forceRender",Ie.nzForceRender)("tabPaneAnimated",tt.tabPaneAnimated)}}let Sn=(()=>{class Pe{constructor(Ie){this.elementRef=Ie,this.addIcon="plus",this.element=this.elementRef.nativeElement}getElementWidth(){var Ie;return(null===(Ie=this.element)||void 0===Ie?void 0:Ie.offsetWidth)||0}getElementHeight(){var Ie;return(null===(Ie=this.element)||void 0===Ie?void 0:Ie.offsetHeight)||0}}return Pe.\u0275fac=function(Ie){return new(Ie||Pe)(e.Y36(e.SBq))},Pe.\u0275cmp=e.Xpm({type:Pe,selectors:[["nz-tab-add-button"],["button","nz-tab-add-button",""]],hostAttrs:["aria-label","Add tab","type","button",1,"ant-tabs-nav-add"],inputs:{addIcon:"addIcon"},decls:1,vars:1,consts:[[4,"nzStringTemplateOutlet"],["nz-icon","","nzTheme","outline",3,"nzType"]],template:function(Ie,Ve){1&Ie&&e.YNc(0,Fe,2,1,"ng-container",0),2&Ie&&e.Q6J("nzStringTemplateOutlet",Ve.addIcon)},directives:[O.f,ee.Ls],encapsulation:2}),Pe})(),mn=(()=>{class Pe{constructor(Ie,Ve,tt){this.elementRef=Ie,this.ngZone=Ve,this.animationMode=tt,this.position="horizontal",this.animated=!0}get _animated(){return"NoopAnimations"!==this.animationMode&&this.animated}alignToElement(Ie){this.ngZone.runOutsideAngular(()=>{(0,S.e)(()=>this.setStyles(Ie))})}setStyles(Ie){const Ve=this.elementRef.nativeElement;"horizontal"===this.position?(Ve.style.top="",Ve.style.height="",Ve.style.left=this.getLeftPosition(Ie),Ve.style.width=this.getElementWidth(Ie)):(Ve.style.left="",Ve.style.width="",Ve.style.top=this.getTopPosition(Ie),Ve.style.height=this.getElementHeight(Ie))}getLeftPosition(Ie){return Ie?`${Ie.offsetLeft||0}px`:"0"}getElementWidth(Ie){return Ie?`${Ie.offsetWidth||0}px`:"0"}getTopPosition(Ie){return Ie?`${Ie.offsetTop||0}px`:"0"}getElementHeight(Ie){return Ie?`${Ie.offsetHeight||0}px`:"0"}}return Pe.\u0275fac=function(Ie){return new(Ie||Pe)(e.Y36(e.SBq),e.Y36(e.R0b),e.Y36(j.Qb,8))},Pe.\u0275dir=e.lG2({type:Pe,selectors:[["nz-tabs-ink-bar"],["","nz-tabs-ink-bar",""]],hostAttrs:[1,"ant-tabs-ink-bar"],hostVars:2,hostBindings:function(Ie,Ve){2&Ie&&e.ekj("ant-tabs-ink-bar-animated",Ve._animated)},inputs:{position:"position",animated:"animated"}}),Pe})(),yr=(()=>{class Pe{constructor(Ie){this.elementRef=Ie,this.disabled=!1,this.active=!1,this.el=Ie.nativeElement,this.parentElement=this.el.parentElement}focus(){this.el.focus()}get width(){return this.parentElement.offsetWidth}get height(){return this.parentElement.offsetHeight}get left(){return this.parentElement.offsetLeft}get top(){return this.parentElement.offsetTop}}return Pe.\u0275fac=function(Ie){return new(Ie||Pe)(e.Y36(e.SBq))},Pe.\u0275dir=e.lG2({type:Pe,selectors:[["","nzTabNavItem",""]],inputs:{disabled:"disabled",tab:"tab",active:"active"}}),Pe})(),Er=(()=>{class Pe{constructor(Ie,Ve){this.cdr=Ie,this.elementRef=Ve,this.items=[],this.addable=!1,this.addIcon="plus",this.addClicked=new e.vpe,this.selected=new e.vpe,this.closeAnimationWaitTimeoutId=-1,this.menuOpened=!1,this.element=this.elementRef.nativeElement}onSelect(Ie){Ie.disabled||(Ie.tab.nzClick.emit(),this.selected.emit(Ie))}onContextmenu(Ie,Ve){Ie.disabled||Ie.tab.nzContextmenu.emit(Ve)}showItems(){clearTimeout(this.closeAnimationWaitTimeoutId),this.menuOpened=!0,this.cdr.markForCheck()}menuVisChange(Ie){Ie||(this.closeAnimationWaitTimeoutId=setTimeout(()=>{this.menuOpened=!1,this.cdr.markForCheck()},150))}getElementWidth(){var Ie;return(null===(Ie=this.element)||void 0===Ie?void 0:Ie.offsetWidth)||0}getElementHeight(){var Ie;return(null===(Ie=this.element)||void 0===Ie?void 0:Ie.offsetHeight)||0}ngOnDestroy(){clearTimeout(this.closeAnimationWaitTimeoutId)}}return Pe.\u0275fac=function(Ie){return new(Ie||Pe)(e.Y36(e.sBO),e.Y36(e.SBq))},Pe.\u0275cmp=e.Xpm({type:Pe,selectors:[["nz-tab-nav-operation"]],hostAttrs:[1,"ant-tabs-nav-operations"],hostVars:2,hostBindings:function(Ie,Ve){2&Ie&&e.ekj("ant-tabs-nav-operations-hidden",0===Ve.items.length)},inputs:{items:"items",addable:"addable",addIcon:"addIcon"},outputs:{addClicked:"addClicked",selected:"selected"},exportAs:["nzTabNavOperation"],decls:7,vars:6,consts:[["nz-dropdown","","type","button","tabindex","-1","aria-hidden","true","nzOverlayClassName","nz-tabs-dropdown",1,"ant-tabs-nav-more",3,"nzDropdownMenu","nzOverlayStyle","nzMatchWidthElement","nzVisibleChange","mouseenter"],["dropdownTrigger","nzDropdown"],["nz-icon","","nzType","ellipsis"],["menu","nzDropdownMenu"],["nz-menu","",4,"ngIf"],["nz-tab-add-button","",3,"addIcon","click",4,"ngIf"],["nz-menu",""],["nz-menu-item","","class","ant-tabs-dropdown-menu-item",3,"ant-tabs-dropdown-menu-item-disabled","nzSelected","nzDisabled","click","contextmenu",4,"ngFor","ngForOf"],["nz-menu-item","",1,"ant-tabs-dropdown-menu-item",3,"nzSelected","nzDisabled","click","contextmenu"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],["nz-tab-add-button","",3,"addIcon","click"]],template:function(Ie,Ve){if(1&Ie&&(e.TgZ(0,"button",0,1),e.NdJ("nzVisibleChange",function(Mt){return Ve.menuVisChange(Mt)})("mouseenter",function(){return Ve.showItems()}),e._UZ(2,"i",2),e.qZA(),e.TgZ(3,"nz-dropdown-menu",null,3),e.YNc(5,rt,2,1,"ul",4),e.qZA(),e.YNc(6,ct,1,1,"button",5)),2&Ie){const tt=e.MAs(4);e.Q6J("nzDropdownMenu",tt)("nzOverlayStyle",e.DdM(5,Lt))("nzMatchWidthElement",null),e.xp6(5),e.Q6J("ngIf",Ve.menuOpened),e.xp6(1),e.Q6J("ngIf",Ve.addable)}},directives:[Y.RR,Sn,Y.cm,ee.Ls,B.O5,q.wO,B.sg,q.r9,O.f],encapsulation:2,changeDetection:0}),Pe})();const dr=Math.pow(.995,20);let Ge=(()=>{class Pe{constructor(Ie,Ve){this.ngZone=Ie,this.elementRef=Ve,this.lastWheelDirection=null,this.lastWheelTimestamp=0,this.lastTimestamp=0,this.lastTimeDiff=0,this.lastMixedWheel=0,this.lastWheelPrevent=!1,this.touchPosition=null,this.lastOffset=null,this.motion=-1,this.unsubscribe=()=>{},this.offsetChange=new e.vpe,this.tabScroll=new e.vpe,this.onTouchEnd=tt=>{if(!this.touchPosition)return;const Mt=this.lastOffset,ln=this.lastTimeDiff;if(this.lastOffset=this.touchPosition=null,Mt){const Ft=Mt.x/ln,jn=Mt.y/ln,Nr=Math.abs(Ft),ti=Math.abs(jn);if(Math.max(Nr,ti)<.1)return;let ni=Ft,Cr=jn;this.motion=window.setInterval(()=>{Math.abs(ni)<.01&&Math.abs(Cr)<.01?window.clearInterval(this.motion):(ni*=dr,Cr*=dr,this.onOffset(20*ni,20*Cr,tt))},20)}},this.onTouchMove=tt=>{if(!this.touchPosition)return;tt.preventDefault();const{screenX:Mt,screenY:ln}=tt.touches[0],Ft=Mt-this.touchPosition.x,jn=ln-this.touchPosition.y;this.onOffset(Ft,jn,tt);const Nr=Date.now();this.lastTimeDiff=Nr-this.lastTimestamp,this.lastTimestamp=Nr,this.lastOffset={x:Ft,y:jn},this.touchPosition={x:Mt,y:ln}},this.onTouchStart=tt=>{const{screenX:Mt,screenY:ln}=tt.touches[0];this.touchPosition={x:Mt,y:ln},window.clearInterval(this.motion)},this.onWheel=tt=>{const{deltaX:Mt,deltaY:ln}=tt;let Ft;const jn=Math.abs(Mt),Nr=Math.abs(ln);jn===Nr?Ft="x"===this.lastWheelDirection?Mt:ln:jn>Nr?(Ft=Mt,this.lastWheelDirection="x"):(Ft=ln,this.lastWheelDirection="y");const ti=Date.now(),ni=Math.abs(Ft);(ti-this.lastWheelTimestamp>100||ni-this.lastMixedWheel>10)&&(this.lastWheelPrevent=!1),this.onOffset(-Ft,-Ft,tt),(tt.defaultPrevented||this.lastWheelPrevent)&&(this.lastWheelPrevent=!0),this.lastWheelTimestamp=ti,this.lastMixedWheel=ni}}ngOnInit(){this.unsubscribe=this.ngZone.runOutsideAngular(()=>{const Ie=this.elementRef.nativeElement,Ve=(0,k.R)(Ie,"wheel"),tt=(0,k.R)(Ie,"touchstart"),Mt=(0,k.R)(Ie,"touchmove"),ln=(0,k.R)(Ie,"touchend"),Ft=new K.w0;return Ft.add(this.subscribeWrap("wheel",Ve,this.onWheel)),Ft.add(this.subscribeWrap("touchstart",tt,this.onTouchStart)),Ft.add(this.subscribeWrap("touchmove",Mt,this.onTouchMove)),Ft.add(this.subscribeWrap("touchend",ln,this.onTouchEnd)),()=>{Ft.unsubscribe()}})}subscribeWrap(Ie,Ve,tt){return Ve.subscribe(Mt=>{this.tabScroll.emit({type:Ie,event:Mt}),Mt.defaultPrevented||tt(Mt)})}onOffset(Ie,Ve,tt){this.ngZone.run(()=>{this.offsetChange.emit({x:Ie,y:Ve,event:tt})})}ngOnDestroy(){this.unsubscribe()}}return Pe.\u0275fac=function(Ie){return new(Ie||Pe)(e.Y36(e.R0b),e.Y36(e.SBq))},Pe.\u0275dir=e.lG2({type:Pe,selectors:[["","nzTabScrollList",""]],outputs:{offsetChange:"offsetChange",tabScroll:"tabScroll"}}),Pe})();const Dt="undefined"!=typeof requestAnimationFrame?ne.Z:ie.E;let Ye=(()=>{class Pe{constructor(Ie,Ve,tt,Mt,ln){this.cdr=Ie,this.ngZone=Ve,this.viewportRuler=tt,this.nzResizeObserver=Mt,this.dir=ln,this.indexFocused=new e.vpe,this.selectFocusedIndex=new e.vpe,this.addClicked=new e.vpe,this.tabScroll=new e.vpe,this.position="horizontal",this.addable=!1,this.hideBar=!1,this.addIcon="plus",this.inkBarAnimated=!0,this.translate=null,this.transformX=0,this.transformY=0,this.pingLeft=!1,this.pingRight=!1,this.pingTop=!1,this.pingBottom=!1,this.hiddenItems=[],this.destroy$=new re.x,this._selectedIndex=0,this.wrapperWidth=0,this.wrapperHeight=0,this.scrollListWidth=0,this.scrollListHeight=0,this.operationWidth=0,this.operationHeight=0,this.addButtonWidth=0,this.addButtonHeight=0,this.selectedIndexChanged=!1,this.lockAnimationTimeoutId=-1,this.cssTransformTimeWaitingId=-1}get selectedIndex(){return this._selectedIndex}set selectedIndex(Ie){const Ve=(0,he.su)(Ie);this._selectedIndex!==Ve&&(this._selectedIndex=Ie,this.selectedIndexChanged=!0,this.keyManager&&this.keyManager.updateActiveItem(Ie))}get focusIndex(){return this.keyManager?this.keyManager.activeItemIndex:0}set focusIndex(Ie){!this.isValidIndex(Ie)||this.focusIndex===Ie||!this.keyManager||this.keyManager.setActiveItem(Ie)}get showAddButton(){return 0===this.hiddenItems.length&&this.addable}ngAfterViewInit(){const Ie=this.dir?this.dir.change:(0,R.of)(null),Ve=this.viewportRuler.change(150),tt=()=>{this.updateScrollListPosition(),this.alignInkBarToSelectedTab()};this.keyManager=new fe.Em(this.items).withHorizontalOrientation(this.getLayoutDirection()).withWrap(),this.keyManager.updateActiveItem(this.selectedIndex),(0,S.e)(tt),(0,V.T)(this.nzResizeObserver.observe(this.navWarpRef),this.nzResizeObserver.observe(this.navListRef)).pipe((0,A.R)(this.destroy$),(0,P.e)(16,Dt)).subscribe(()=>{tt()}),(0,V.T)(Ie,Ve,this.items.changes).pipe((0,A.R)(this.destroy$)).subscribe(()=>{Promise.resolve().then(tt),this.keyManager.withHorizontalOrientation(this.getLayoutDirection())}),this.keyManager.change.pipe((0,A.R)(this.destroy$)).subscribe(Mt=>{this.indexFocused.emit(Mt),this.setTabFocus(Mt),this.scrollToTab(this.keyManager.activeItem)})}ngAfterContentChecked(){this.selectedIndexChanged&&(this.updateScrollListPosition(),this.alignInkBarToSelectedTab(),this.selectedIndexChanged=!1,this.cdr.markForCheck())}ngOnDestroy(){clearTimeout(this.lockAnimationTimeoutId),clearTimeout(this.cssTransformTimeWaitingId),this.destroy$.next(),this.destroy$.complete()}onSelectedFromMenu(Ie){const Ve=this.items.toArray().findIndex(tt=>tt===Ie);-1!==Ve&&(this.keyManager.updateActiveItem(Ve),this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this.scrollToTab(Ie)))}onOffsetChange(Ie){if("horizontal"===this.position){if(-1===this.lockAnimationTimeoutId&&(this.transformX>=0&&Ie.x>0||this.transformX<=this.wrapperWidth-this.scrollListWidth&&Ie.x<0))return;Ie.event.preventDefault(),this.transformX=this.clampTransformX(this.transformX+Ie.x),this.setTransform(this.transformX,0)}else{if(-1===this.lockAnimationTimeoutId&&(this.transformY>=0&&Ie.y>0||this.transformY<=this.wrapperHeight-this.scrollListHeight&&Ie.y<0))return;Ie.event.preventDefault(),this.transformY=this.clampTransformY(this.transformY+Ie.y),this.setTransform(0,this.transformY)}this.lockAnimation(),this.setVisibleRange(),this.setPingStatus()}handleKeydown(Ie){const Ve=this.navWarpRef.nativeElement.contains(Ie.target);if(!(0,se.Vb)(Ie)&&Ve)switch(Ie.keyCode){case se.oh:case se.LH:case se.SV:case se.JH:this.lockAnimation(),this.keyManager.onKeydown(Ie);break;case se.K5:case se.L_:this.focusIndex!==this.selectedIndex&&this.selectFocusedIndex.emit(this.focusIndex);break;default:this.keyManager.onKeydown(Ie)}}isValidIndex(Ie){if(!this.items)return!0;const Ve=this.items?this.items.toArray()[Ie]:null;return!!Ve&&!Ve.disabled}scrollToTab(Ie){if(!this.items.find(tt=>tt===Ie))return;const Ve=this.items.toArray();if("horizontal"===this.position){let tt=this.transformX;if("rtl"===this.getLayoutDirection()){const Mt=Ve[0].left+Ve[0].width-Ie.left-Ie.width;Mt<this.transformX?tt=Mt:Mt+Ie.width>this.transformX+this.wrapperWidth&&(tt=Mt+Ie.width-this.wrapperWidth)}else Ie.left<-this.transformX?tt=-Ie.left:Ie.left+Ie.width>-this.transformX+this.wrapperWidth&&(tt=-(Ie.left+Ie.width-this.wrapperWidth));this.transformX=tt,this.transformY=0,this.setTransform(tt,0)}else{let tt=this.transformY;Ie.top<-this.transformY?tt=-Ie.top:Ie.top+Ie.height>-this.transformY+this.wrapperHeight&&(tt=-(Ie.top+Ie.height-this.wrapperHeight)),this.transformY=tt,this.transformX=0,this.setTransform(0,tt)}clearTimeout(this.cssTransformTimeWaitingId),this.cssTransformTimeWaitingId=setTimeout(()=>{this.setVisibleRange()},150)}lockAnimation(){-1===this.lockAnimationTimeoutId&&this.ngZone.runOutsideAngular(()=>{this.navListRef.nativeElement.style.transition="none",this.lockAnimationTimeoutId=setTimeout(()=>{this.navListRef.nativeElement.style.transition="",this.lockAnimationTimeoutId=-1},150)})}setTransform(Ie,Ve){this.navListRef.nativeElement.style.transform=`translate(${Ie}px, ${Ve}px)`}clampTransformX(Ie){const Ve=this.wrapperWidth-this.scrollListWidth;return"rtl"===this.getLayoutDirection()?Math.max(Math.min(Ve,Ie),0):Math.min(Math.max(Ve,Ie),0)}clampTransformY(Ie){return Math.min(Math.max(this.wrapperHeight-this.scrollListHeight,Ie),0)}updateScrollListPosition(){this.resetSizes(),this.transformX=this.clampTransformX(this.transformX),this.transformY=this.clampTransformY(this.transformY),this.setVisibleRange(),this.setPingStatus(),this.keyManager&&(this.keyManager.updateActiveItem(this.keyManager.activeItemIndex),this.keyManager.activeItem&&this.scrollToTab(this.keyManager.activeItem))}resetSizes(){this.addButtonWidth=this.addBtnRef?this.addBtnRef.getElementWidth():0,this.addButtonHeight=this.addBtnRef?this.addBtnRef.getElementHeight():0,this.operationWidth=this.operationRef.getElementWidth(),this.operationHeight=this.operationRef.getElementHeight(),this.wrapperWidth=this.navWarpRef.nativeElement.offsetWidth||0,this.wrapperHeight=this.navWarpRef.nativeElement.offsetHeight||0,this.scrollListHeight=this.navListRef.nativeElement.offsetHeight||0,this.scrollListWidth=this.navListRef.nativeElement.offsetWidth||0}alignInkBarToSelectedTab(){const Ie=this.items&&this.items.length?this.items.toArray()[this.selectedIndex]:null,Ve=Ie?Ie.elementRef.nativeElement:null;Ve&&this.inkBar.alignToElement(Ve.parentElement)}setPingStatus(){const Ie={top:!1,right:!1,bottom:!1,left:!1},Ve=this.navWarpRef.nativeElement;"horizontal"===this.position?"rtl"===this.getLayoutDirection()?(Ie.right=this.transformX>0,Ie.left=this.transformX+this.wrapperWidth<this.scrollListWidth):(Ie.left=this.transformX<0,Ie.right=-this.transformX+this.wrapperWidth<this.scrollListWidth):(Ie.top=this.transformY<0,Ie.bottom=-this.transformY+this.wrapperHeight<this.scrollListHeight),Object.keys(Ie).forEach(tt=>{const Mt=`ant-tabs-nav-wrap-ping-${tt}`;Ie[tt]?Ve.classList.add(Mt):Ve.classList.remove(Mt)})}setVisibleRange(){let Ie,Ve,tt,Mt,ln,Ft;const jn=this.items.toArray(),Nr={width:0,height:0,left:0,top:0,right:0},ti=ar=>{let Ir;return Ir="right"===Ve?jn[0].left+jn[0].width-jn[ar].left-jn[ar].width:(jn[ar]||Nr)[Ve],Ir};"horizontal"===this.position?(Ie="width",Mt=this.wrapperWidth,ln=this.scrollListWidth-(this.hiddenItems.length?this.operationWidth:0),Ft=this.addButtonWidth,tt=Math.abs(this.transformX),"rtl"===this.getLayoutDirection()?(Ve="right",this.pingRight=this.transformX>0,this.pingLeft=this.transformX+this.wrapperWidth<this.scrollListWidth):(this.pingLeft=this.transformX<0,this.pingRight=-this.transformX+this.wrapperWidth<this.scrollListWidth,Ve="left")):(Ie="height",Mt=this.wrapperHeight,ln=this.scrollListHeight-(this.hiddenItems.length?this.operationHeight:0),Ft=this.addButtonHeight,Ve="top",tt=-this.transformY,this.pingTop=this.transformY<0,this.pingBottom=-this.transformY+this.wrapperHeight<this.scrollListHeight);let ni=Mt;if(ln+Ft>Mt&&(ni=Mt-Ft),!jn.length)return this.hiddenItems=[],void this.cdr.markForCheck();const Cr=jn.length;let $t=Cr;for(let ar=0;ar<Cr;ar+=1)if(ti(ar)+(jn[ar]||Nr)[Ie]>tt+ni){$t=ar-1;break}let ri=0;for(let ar=Cr-1;ar>=0;ar-=1)if(ti(ar)<tt){ri=ar+1;break}const Ra=jn.slice(0,ri),Na=jn.slice($t+1);this.hiddenItems=[...Ra,...Na],this.cdr.markForCheck()}getLayoutDirection(){return this.dir&&"rtl"===this.dir.value?"rtl":"ltr"}setTabFocus(Ie){}ngOnChanges(Ie){const{position:Ve}=Ie;Ve&&!Ve.isFirstChange()&&(this.alignInkBarToSelectedTab(),this.lockAnimation(),this.updateScrollListPosition())}}return Pe.\u0275fac=function(Ie){return new(Ie||Pe)(e.Y36(e.sBO),e.Y36(e.R0b),e.Y36(W.rL),e.Y36(L.D3),e.Y36(D.Is,8))},Pe.\u0275cmp=e.Xpm({type:Pe,selectors:[["nz-tabs-nav"]],contentQueries:function(Ie,Ve,tt){if(1&Ie&&e.Suo(tt,yr,5),2&Ie){let Mt;e.iGM(Mt=e.CRH())&&(Ve.items=Mt)}},viewQuery:function(Ie,Ve){if(1&Ie&&(e.Gf(pt,7),e.Gf(gt,7),e.Gf(Er,7),e.Gf(Sn,5),e.Gf(mn,7)),2&Ie){let tt;e.iGM(tt=e.CRH())&&(Ve.navWarpRef=tt.first),e.iGM(tt=e.CRH())&&(Ve.navListRef=tt.first),e.iGM(tt=e.CRH())&&(Ve.operationRef=tt.first),e.iGM(tt=e.CRH())&&(Ve.addBtnRef=tt.first),e.iGM(tt=e.CRH())&&(Ve.inkBar=tt.first)}},hostAttrs:["role","tablist",1,"ant-tabs-nav"],hostBindings:function(Ie,Ve){1&Ie&&e.NdJ("keydown",function(Mt){return Ve.handleKeydown(Mt)})},inputs:{position:"position",addable:"addable",hideBar:"hideBar",addIcon:"addIcon",inkBarAnimated:"inkBarAnimated",extraTemplate:"extraTemplate",selectedIndex:"selectedIndex"},outputs:{indexFocused:"indexFocused",selectFocusedIndex:"selectFocusedIndex",addClicked:"addClicked",tabScroll:"tabScroll"},exportAs:["nzTabsNav"],features:[e.TTD],ngContentSelectors:Wt,decls:9,vars:16,consts:[[1,"ant-tabs-nav-wrap"],["navWarp",""],["nzTabScrollList","",1,"ant-tabs-nav-list",3,"offsetChange","tabScroll"],["navList",""],["nz-tab-add-button","",3,"addIcon","click",4,"ngIf"],["nz-tabs-ink-bar","",3,"hidden","position","animated"],[3,"addIcon","addable","items","addClicked","selected"],["class","ant-tabs-extra-content",4,"ngIf"],["nz-tab-add-button","",3,"addIcon","click"],[1,"ant-tabs-extra-content"],[3,"ngTemplateOutlet"]],template:function(Ie,Ve){1&Ie&&(e.F$t(),e.TgZ(0,"div",0,1)(2,"div",2,3),e.NdJ("offsetChange",function(Mt){return Ve.onOffsetChange(Mt)})("tabScroll",function(Mt){return Ve.tabScroll.emit(Mt)}),e.Hsn(4),e.YNc(5,st,1,1,"button",4),e._UZ(6,"div",5),e.qZA()(),e.TgZ(7,"nz-tab-nav-operation",6),e.NdJ("addClicked",function(){return Ve.addClicked.emit()})("selected",function(Mt){return Ve.onSelectedFromMenu(Mt)}),e.qZA(),e.YNc(8,Pt,2,1,"div",7)),2&Ie&&(e.ekj("ant-tabs-nav-wrap-ping-left",Ve.pingLeft)("ant-tabs-nav-wrap-ping-right",Ve.pingRight)("ant-tabs-nav-wrap-ping-top",Ve.pingTop)("ant-tabs-nav-wrap-ping-bottom",Ve.pingBottom),e.xp6(5),e.Q6J("ngIf",Ve.showAddButton),e.xp6(1),e.Q6J("hidden",Ve.hideBar)("position",Ve.position)("animated",Ve.inkBarAnimated),e.xp6(1),e.Q6J("addIcon",Ve.addIcon)("addable",Ve.addable)("items",Ve.hiddenItems),e.xp6(1),e.Q6J("ngIf",Ve.extraTemplate))},directives:[Sn,Er,Ge,B.O5,mn,B.tP],encapsulation:2,changeDetection:0}),Pe})(),Ut=(()=>{class Pe{constructor(){this.content=null,this.active=!1,this.tabPaneAnimated=!0,this.forceRender=!1}}return Pe.\u0275fac=function(Ie){return new(Ie||Pe)},Pe.\u0275cmp=e.Xpm({type:Pe,selectors:[["","nz-tab-body",""]],hostAttrs:[1,"ant-tabs-tabpane"],hostVars:12,hostBindings:function(Ie,Ve){2&Ie&&(e.uIk("tabindex",Ve.active?0:-1)("aria-hidden",!Ve.active),e.Udp("visibility",Ve.tabPaneAnimated?Ve.active?null:"hidden":null)("height",Ve.tabPaneAnimated?Ve.active?null:0:null)("overflow-y",Ve.tabPaneAnimated?Ve.active?null:"none":null)("display",Ve.tabPaneAnimated||Ve.active?null:"none"),e.ekj("ant-tabs-tabpane-active",Ve.active))},inputs:{content:"content",active:"active",tabPaneAnimated:"tabPaneAnimated",forceRender:"forceRender"},exportAs:["nzTabBody"],attrs:sn,decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngTemplateOutlet"]],template:function(Ie,Ve){1&Ie&&e.YNc(0,wn,2,1,"ng-container",0),2&Ie&&e.Q6J("ngIf",Ve.active||Ve.forceRender)},directives:[B.O5,B.tP],encapsulation:2,changeDetection:0}),Pe})(),Qt=(()=>{class Pe{constructor(){this.closeIcon="close"}}return Pe.\u0275fac=function(Ie){return new(Ie||Pe)},Pe.\u0275cmp=e.Xpm({type:Pe,selectors:[["nz-tab-close-button"],["button","nz-tab-close-button",""]],hostAttrs:["aria-label","Close tab","type","button",1,"ant-tabs-tab-remove"],inputs:{closeIcon:"closeIcon"},decls:1,vars:1,consts:[[4,"nzStringTemplateOutlet"],["nz-icon","","nzTheme","outline",3,"nzType"]],template:function(Ie,Ve){1&Ie&&e.YNc(0,qn,2,1,"ng-container",0),2&Ie&&e.Q6J("nzStringTemplateOutlet",Ve.closeIcon)},directives:[O.f,ee.Ls],encapsulation:2}),Pe})(),zn=(()=>{class Pe{constructor(Ie){this.templateRef=Ie}}return Pe.\u0275fac=function(Ie){return new(Ie||Pe)(e.Y36(e.Rgc,1))},Pe.\u0275dir=e.lG2({type:Pe,selectors:[["ng-template","nzTabLink",""]],exportAs:["nzTabLinkTemplate"]}),Pe})(),De=(()=>{class Pe{constructor(Ie,Ve,tt){this.elementRef=Ie,this.routerLink=Ve,this.routerLinkWithHref=tt}}return Pe.\u0275fac=function(Ie){return new(Ie||Pe)(e.Y36(e.SBq),e.Y36(oe.rH,10),e.Y36(oe.yS,10))},Pe.\u0275dir=e.lG2({type:Pe,selectors:[["a","nz-tab-link",""]],exportAs:["nzTabLink"]}),Pe})(),_t=(()=>{class Pe{}return Pe.\u0275fac=function(Ie){return new(Ie||Pe)},Pe.\u0275dir=e.lG2({type:Pe,selectors:[["","nz-tab",""]],exportAs:["nzTab"]}),Pe})();const cr=new e.OlP("NZ_TAB_SET");let _n=(()=>{class Pe{constructor(Ie){this.closestTabSet=Ie,this.nzTitle="",this.nzClosable=!1,this.nzCloseIcon="close",this.nzDisabled=!1,this.nzForceRender=!1,this.nzSelect=new e.vpe,this.nzDeselect=new e.vpe,this.nzClick=new e.vpe,this.nzContextmenu=new e.vpe,this.template=null,this.isActive=!1,this.position=null,this.origin=null,this.stateChanges=new re.x}get content(){return this.template||this.contentTemplate}get label(){var Ie;return this.nzTitle||(null===(Ie=this.nzTabLinkTemplateDirective)||void 0===Ie?void 0:Ie.templateRef)}ngOnChanges(Ie){const{nzTitle:Ve,nzDisabled:tt,nzForceRender:Mt}=Ie;(Ve||tt||Mt)&&this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete()}}return Pe.\u0275fac=function(Ie){return new(Ie||Pe)(e.Y36(cr))},Pe.\u0275cmp=e.Xpm({type:Pe,selectors:[["nz-tab"]],contentQueries:function(Ie,Ve,tt){if(1&Ie&&(e.Suo(tt,zn,5),e.Suo(tt,_t,5,e.Rgc),e.Suo(tt,De,5)),2&Ie){let Mt;e.iGM(Mt=e.CRH())&&(Ve.nzTabLinkTemplateDirective=Mt.first),e.iGM(Mt=e.CRH())&&(Ve.template=Mt.first),e.iGM(Mt=e.CRH())&&(Ve.linkDirective=Mt.first)}},viewQuery:function(Ie,Ve){if(1&Ie&&e.Gf(fn,7),2&Ie){let tt;e.iGM(tt=e.CRH())&&(Ve.contentTemplate=tt.first)}},inputs:{nzTitle:"nzTitle",nzClosable:"nzClosable",nzCloseIcon:"nzCloseIcon",nzDisabled:"nzDisabled",nzForceRender:"nzForceRender"},outputs:{nzSelect:"nzSelect",nzDeselect:"nzDeselect",nzClick:"nzClick",nzContextmenu:"nzContextmenu"},exportAs:["nzTab"],features:[e.TTD],ngContentSelectors:Yn,decls:4,vars:0,consts:[["tabLinkTemplate",""],["contentTemplate",""]],template:function(Ie,Ve){1&Ie&&(e.F$t(Pn),e.YNc(0,$n,1,0,"ng-template",null,0,e.W1O),e.YNc(2,ur,1,0,"ng-template",null,1,e.W1O))},encapsulation:2,changeDetection:0}),(0,F.gn)([(0,$.yF)()],Pe.prototype,"nzClosable",void 0),(0,F.gn)([(0,$.yF)()],Pe.prototype,"nzDisabled",void 0),(0,F.gn)([(0,$.yF)()],Pe.prototype,"nzForceRender",void 0),Pe})();class yn{}let Pr=0,qe=(()=>{class Pe{constructor(Ie,Ve,tt,Mt,ln){this.nzConfigService=Ie,this.ngZone=Ve,this.cdr=tt,this.directionality=Mt,this.router=ln,this._nzModuleName="tabs",this.nzTabPosition="top",this.nzCanDeactivate=null,this.nzAddIcon="plus",this.nzTabBarStyle=null,this.nzType="line",this.nzSize="default",this.nzAnimated=!0,this.nzTabBarGutter=void 0,this.nzHideAdd=!1,this.nzCentered=!1,this.nzHideAll=!1,this.nzLinkRouter=!1,this.nzLinkExact=!0,this.nzSelectChange=new e.vpe(!0),this.nzSelectedIndexChange=new e.vpe,this.nzTabListScroll=new e.vpe,this.nzClose=new e.vpe,this.nzAdd=new e.vpe,this.allTabs=new e.n_E,this.tabs=new e.n_E,this.dir="ltr",this.destroy$=new re.x,this.indexToSelect=0,this.selectedIndex=null,this.tabLabelSubscription=K.w0.EMPTY,this.tabsSubscription=K.w0.EMPTY,this.canDeactivateSubscription=K.w0.EMPTY,this.tabSetId=Pr++}get nzSelectedIndex(){return this.selectedIndex}set nzSelectedIndex(Ie){this.indexToSelect=(0,he.su)(Ie,null)}get position(){return-1===["top","bottom"].indexOf(this.nzTabPosition)?"vertical":"horizontal"}get addable(){return"editable-card"===this.nzType&&!this.nzHideAdd}get closable(){return"editable-card"===this.nzType}get line(){return"line"===this.nzType}get inkBarAnimated(){return this.line&&("boolean"==typeof this.nzAnimated?this.nzAnimated:this.nzAnimated.inkBar)}get tabPaneAnimated(){return"horizontal"===this.position&&this.line&&("boolean"==typeof this.nzAnimated?this.nzAnimated:this.nzAnimated.tabPane)}ngOnInit(){var Ie;this.dir=this.directionality.value,null===(Ie=this.directionality.change)||void 0===Ie||Ie.pipe((0,A.R)(this.destroy$)).subscribe(Ve=>{this.dir=Ve,this.cdr.detectChanges()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.tabs.destroy(),this.tabLabelSubscription.unsubscribe(),this.tabsSubscription.unsubscribe(),this.canDeactivateSubscription.unsubscribe()}ngAfterContentInit(){this.ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>this.setUpRouter())}),this.subscribeToTabLabels(),this.subscribeToAllTabChanges(),this.tabsSubscription=this.tabs.changes.subscribe(()=>{if(this.clampTabIndex(this.indexToSelect)===this.selectedIndex){const Ve=this.tabs.toArray();for(let tt=0;tt<Ve.length;tt++)if(Ve[tt].isActive){this.indexToSelect=this.selectedIndex=tt;break}}this.subscribeToTabLabels(),this.cdr.markForCheck()})}ngAfterContentChecked(){const Ie=this.indexToSelect=this.clampTabIndex(this.indexToSelect);if(this.selectedIndex!==Ie){const Ve=null==this.selectedIndex;Ve||this.nzSelectChange.emit(this.createChangeEvent(Ie)),Promise.resolve().then(()=>{this.tabs.forEach((tt,Mt)=>tt.isActive=Mt===Ie),Ve||this.nzSelectedIndexChange.emit(Ie)})}this.tabs.forEach((Ve,tt)=>{Ve.position=tt-Ie,null!=this.selectedIndex&&0===Ve.position&&!Ve.origin&&(Ve.origin=Ie-this.selectedIndex)}),this.selectedIndex!==Ie&&(this.selectedIndex=Ie,this.cdr.markForCheck())}onClose(Ie,Ve){Ve.preventDefault(),Ve.stopPropagation(),this.nzClose.emit({index:Ie})}onAdd(){this.nzAdd.emit()}clampTabIndex(Ie){return Math.min(this.tabs.length-1,Math.max(Ie||0,0))}createChangeEvent(Ie){const Ve=new yn;return Ve.index=Ie,this.tabs&&this.tabs.length&&(Ve.tab=this.tabs.toArray()[Ie],this.tabs.forEach((tt,Mt)=>{Mt!==Ie&&tt.nzDeselect.emit()}),Ve.tab.nzSelect.emit()),Ve}subscribeToTabLabels(){this.tabLabelSubscription&&this.tabLabelSubscription.unsubscribe(),this.tabLabelSubscription=(0,V.T)(...this.tabs.map(Ie=>Ie.stateChanges)).subscribe(()=>this.cdr.markForCheck())}subscribeToAllTabChanges(){this.allTabs.changes.pipe((0,I.O)(this.allTabs)).subscribe(Ie=>{this.tabs.reset(Ie.filter(Ve=>Ve.closestTabSet===this)),this.tabs.notifyOnChanges()})}canDeactivateFun(Ie,Ve){return"function"==typeof this.nzCanDeactivate?(0,$.lN)(this.nzCanDeactivate(Ie,Ve)).pipe((0,H.P)(),(0,A.R)(this.destroy$)):(0,R.of)(!0)}clickNavItem(Ie,Ve,tt){Ie.nzDisabled||(Ie.nzClick.emit(),this.isRouterLinkClickEvent(Ve,tt)||this.setSelectedIndex(Ve))}isRouterLinkClickEvent(Ie,Ve){var tt,Mt;const ln=Ve.target;return!!this.nzLinkRouter&&!!(null===(Mt=null===(tt=this.tabs.toArray()[Ie])||void 0===tt?void 0:tt.linkDirective)||void 0===Mt?void 0:Mt.elementRef.nativeElement.contains(ln))}contextmenuNavItem(Ie,Ve){Ie.nzDisabled||Ie.nzContextmenu.emit(Ve)}setSelectedIndex(Ie){this.canDeactivateSubscription.unsubscribe(),this.canDeactivateSubscription=this.canDeactivateFun(this.selectedIndex,Ie).subscribe(Ve=>{Ve&&(this.nzSelectedIndex=Ie,this.tabNavBarRef.focusIndex=Ie,this.cdr.markForCheck())})}getTabIndex(Ie,Ve){return Ie.nzDisabled?null:this.selectedIndex===Ve?0:-1}getTabContentId(Ie){return`nz-tabs-${this.tabSetId}-tab-${Ie}`}setUpRouter(){if(this.nzLinkRouter){if(!this.router)throw new Error(`${Ze.Bq} you should import 'RouterModule' if you want to use 'nzLinkRouter'!`);this.router.events.pipe((0,A.R)(this.destroy$),(0,Z.h)(Ie=>Ie instanceof oe.m2),(0,I.O)(!0),(0,U.g)(0)).subscribe(()=>{this.updateRouterActive(),this.cdr.markForCheck()})}}updateRouterActive(){if(this.router.navigated){const Ie=this.findShouldActiveTabIndex();Ie!==this.selectedIndex&&this.setSelectedIndex(Ie),this.nzHideAll=-1===Ie}}findShouldActiveTabIndex(){const Ie=this.tabs.toArray(),Ve=this.isLinkActive(this.router);return Ie.findIndex(tt=>{const Mt=tt.linkDirective;return!!Mt&&(Ve(Mt.routerLink)||Ve(Mt.routerLinkWithHref))})}isLinkActive(Ie){return Ve=>!!Ve&&Ie.isActive(Ve.urlTree||"",{paths:this.nzLinkExact?"exact":"subset",queryParams:this.nzLinkExact?"exact":"subset",fragment:"ignored",matrixParams:"ignored"})}getTabContentMarginValue(){return 100*-(this.nzSelectedIndex||0)}getTabContentMarginLeft(){return this.tabPaneAnimated&&"rtl"!==this.dir?`${this.getTabContentMarginValue()}%`:""}getTabContentMarginRight(){return this.tabPaneAnimated&&"rtl"===this.dir?`${this.getTabContentMarginValue()}%`:""}}return Pe.\u0275fac=function(Ie){return new(Ie||Pe)(e.Y36(Me.jY),e.Y36(e.R0b),e.Y36(e.sBO),e.Y36(D.Is,8),e.Y36(oe.F0,8))},Pe.\u0275cmp=e.Xpm({type:Pe,selectors:[["nz-tabset"]],contentQueries:function(Ie,Ve,tt){if(1&Ie&&e.Suo(tt,_n,5),2&Ie){let Mt;e.iGM(Mt=e.CRH())&&(Ve.allTabs=Mt)}},viewQuery:function(Ie,Ve){if(1&Ie&&e.Gf(Ye,5),2&Ie){let tt;e.iGM(tt=e.CRH())&&(Ve.tabNavBarRef=tt.first)}},hostAttrs:[1,"ant-tabs"],hostVars:24,hostBindings:function(Ie,Ve){2&Ie&&e.ekj("ant-tabs-card","card"===Ve.nzType||"editable-card"===Ve.nzType)("ant-tabs-editable","editable-card"===Ve.nzType)("ant-tabs-editable-card","editable-card"===Ve.nzType)("ant-tabs-centered",Ve.nzCentered)("ant-tabs-rtl","rtl"===Ve.dir)("ant-tabs-top","top"===Ve.nzTabPosition)("ant-tabs-bottom","bottom"===Ve.nzTabPosition)("ant-tabs-left","left"===Ve.nzTabPosition)("ant-tabs-right","right"===Ve.nzTabPosition)("ant-tabs-default","default"===Ve.nzSize)("ant-tabs-small","small"===Ve.nzSize)("ant-tabs-large","large"===Ve.nzSize)},inputs:{nzSelectedIndex:"nzSelectedIndex",nzTabPosition:"nzTabPosition",nzTabBarExtraContent:"nzTabBarExtraContent",nzCanDeactivate:"nzCanDeactivate",nzAddIcon:"nzAddIcon",nzTabBarStyle:"nzTabBarStyle",nzType:"nzType",nzSize:"nzSize",nzAnimated:"nzAnimated",nzTabBarGutter:"nzTabBarGutter",nzHideAdd:"nzHideAdd",nzCentered:"nzCentered",nzHideAll:"nzHideAll",nzLinkRouter:"nzLinkRouter",nzLinkExact:"nzLinkExact"},outputs:{nzSelectChange:"nzSelectChange",nzSelectedIndexChange:"nzSelectedIndexChange",nzTabListScroll:"nzTabListScroll",nzClose:"nzClose",nzAdd:"nzAdd"},exportAs:["nzTabset"],features:[e._Bn([{provide:cr,useExisting:Pe}])],decls:4,vars:16,consts:[[3,"ngStyle","selectedIndex","inkBarAnimated","addable","addIcon","hideBar","position","extraTemplate","tabScroll","selectFocusedIndex","addClicked",4,"ngIf"],[1,"ant-tabs-content-holder"],[1,"ant-tabs-content"],["nz-tab-body","",3,"active","content","forceRender","tabPaneAnimated",4,"ngFor","ngForOf"],[3,"ngStyle","selectedIndex","inkBarAnimated","addable","addIcon","hideBar","position","extraTemplate","tabScroll","selectFocusedIndex","addClicked"],["class","ant-tabs-tab",3,"margin-right","margin-bottom","ant-tabs-tab-active","ant-tabs-tab-disabled","click","contextmenu",4,"ngFor","ngForOf"],[1,"ant-tabs-tab",3,"click","contextmenu"],["role","tab","nzTabNavItem","","cdkMonitorElementFocus","",1,"ant-tabs-tab-btn",3,"disabled","tab","active"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],["nz-tab-close-button","",3,"closeIcon","click",4,"ngIf"],["nz-tab-close-button","",3,"closeIcon","click"],["nz-tab-body","",3,"active","content","forceRender","tabPaneAnimated"]],template:function(Ie,Ve){1&Ie&&(e.YNc(0,Sr,2,9,"nz-tabs-nav",0),e.TgZ(1,"div",1)(2,"div",2),e.YNc(3,un,1,4,"div",3),e.qZA()()),2&Ie&&(e.Q6J("ngIf",Ve.tabs.length||Ve.addable),e.xp6(2),e.Udp("margin-left",Ve.getTabContentMarginLeft())("margin-right",Ve.getTabContentMarginRight()),e.ekj("ant-tabs-content-top","top"===Ve.nzTabPosition)("ant-tabs-content-bottom","bottom"===Ve.nzTabPosition)("ant-tabs-content-left","left"===Ve.nzTabPosition)("ant-tabs-content-right","right"===Ve.nzTabPosition)("ant-tabs-content-animated",Ve.tabPaneAnimated),e.xp6(1),e.Q6J("ngForOf",Ve.tabs))},directives:[Ye,Qt,Ut,B.O5,B.PC,B.sg,yr,fe.kH,O.f],encapsulation:2}),(0,F.gn)([(0,Me.oS)()],Pe.prototype,"nzType",void 0),(0,F.gn)([(0,Me.oS)()],Pe.prototype,"nzSize",void 0),(0,F.gn)([(0,Me.oS)()],Pe.prototype,"nzAnimated",void 0),(0,F.gn)([(0,Me.oS)()],Pe.prototype,"nzTabBarGutter",void 0),(0,F.gn)([(0,$.yF)()],Pe.prototype,"nzHideAdd",void 0),(0,F.gn)([(0,$.yF)()],Pe.prototype,"nzCentered",void 0),(0,F.gn)([(0,$.yF)()],Pe.prototype,"nzHideAll",void 0),(0,F.gn)([(0,$.yF)()],Pe.prototype,"nzLinkRouter",void 0),(0,F.gn)([(0,$.yF)()],Pe.prototype,"nzLinkExact",void 0),Pe})(),we=(()=>{class Pe{}return Pe.\u0275fac=function(Ie){return new(Ie||Pe)},Pe.\u0275mod=e.oAB({type:Pe}),Pe.\u0275inj=e.cJS({imports:[[D.vT,B.ez,M.Q8,ee.PV,O.T,be.ud,fe.rt,W.ZD,Y.b1]]}),Pe})()},9822:(Gt,ht,J)=>{"use strict";function e(ge){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ue){return typeof ue}:function(ue){return ue&&"function"==typeof Symbol&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue})(ge)}function O(ge,ue){if(!(ge instanceof ue))throw new TypeError("Cannot call a class as a function")}function ee(ge,ue){for(var te=0;te<ue.length;te++){var pe=ue[te];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(ge,pe.key,pe)}}function j(ge,ue,te){return ue&&ee(ge.prototype,ue),te&&ee(ge,te),ge}function S(ge,ue,te){return ue in ge?Object.defineProperty(ge,ue,{value:te,enumerable:!0,configurable:!0,writable:!0}):ge[ue]=te,ge}function fe(ge,ue){if("function"!=typeof ue&&null!==ue)throw new TypeError("Super expression must either be null or a function");ge.prototype=Object.create(ue&&ue.prototype,{constructor:{value:ge,writable:!0,configurable:!0}}),ue&&se(ge,ue)}function he(ge){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(te){return te.__proto__||Object.getPrototypeOf(te)})(ge)}function se(ge,ue){return(se=Object.setPrototypeOf||function(pe,ae){return pe.__proto__=ae,pe})(ge,ue)}function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ge){return!1}}function K(ge,ue,te){return(K=k()?Reflect.construct:function(ae,de,xe){var Te=[null];Te.push.apply(Te,de);var We=new(Function.bind.apply(ae,Te));return xe&&se(We,xe.prototype),We}).apply(null,arguments)}function ie(ge){var ue="function"==typeof Map?new Map:void 0;return ie=function(pe){if(null===pe||!function ne(ge){return-1!==Function.toString.call(ge).indexOf("[native code]")}(pe))return pe;if("function"!=typeof pe)throw new TypeError("Super expression must either be null or a function");if(void 0!==ue){if(ue.has(pe))return ue.get(pe);ue.set(pe,ae)}function ae(){return K(pe,arguments,he(this).constructor)}return ae.prototype=Object.create(pe.prototype,{constructor:{value:ae,enumerable:!1,writable:!0,configurable:!0}}),se(ae,pe)},ie(ge)}function re(ge){if(void 0===ge)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ge}function R(ge,ue){return!ue||"object"!=typeof ue&&"function"!=typeof ue?re(ge):ue}function V(ge){var ue=k();return function(){var ae,pe=he(ge);if(ue){var de=he(this).constructor;ae=Reflect.construct(pe,arguments,de)}else ae=pe.apply(this,arguments);return R(this,ae)}}function P(ge,ue,te){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(ae,de,xe){var Te=function A(ge,ue){for(;!Object.prototype.hasOwnProperty.call(ge,ue)&&null!==(ge=he(ge)););return ge}(ae,de);if(Te){var Be=Object.getOwnPropertyDescriptor(Te,de);return Be.get?Be.get.call(xe):Be.value}},P(ge,ue,te||ge)}function I(ge,ue){return Z(ge)||function Y(ge,ue){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(ge)){var te=[],pe=!0,ae=!1,de=void 0;try{for(var Te,xe=ge[Symbol.iterator]();!(pe=(Te=xe.next()).done)&&(te.push(Te.value),!ue||te.length!==ue);pe=!0);}catch(Be){ae=!0,de=Be}finally{try{!pe&&null!=xe.return&&xe.return()}finally{if(ae)throw de}}return te}}(ge,ue)||B(ge,ue)||W()}function H(ge){return Z(ge)||function U(ge){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(ge))return Array.from(ge)}(ge)||B(ge)||W()}function Z(ge){if(Array.isArray(ge))return ge}function B(ge,ue){if(ge){if("string"==typeof ge)return q(ge,ue);var te=Object.prototype.toString.call(ge).slice(8,-1);if("Object"===te&&ge.constructor&&(te=ge.constructor.name),"Map"===te||"Set"===te)return Array.from(ge);if("Arguments"===te||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(te))return q(ge,ue)}}function q(ge,ue){(null==ue||ue>ge.length)&&(ue=ge.length);for(var te=0,pe=new Array(ue);te<ue;te++)pe[te]=ge[te];return pe}function W(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function L(ge,ue){var te;if("undefined"==typeof Symbol||null==ge[Symbol.iterator]){if(Array.isArray(ge)||(te=B(ge))||ue&&ge&&"number"==typeof ge.length){te&&(ge=te);var pe=0,ae=function(){};return{s:ae,n:function(){return pe>=ge.length?{done:!0}:{done:!1,value:ge[pe++]}},e:function(Be){throw Be},f:ae}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Te,de=!0,xe=!1;return{s:function(){te=ge[Symbol.iterator]()},n:function(){var Be=te.next();return de=Be.done,Be},e:function(Be){xe=!0,Te=Be},f:function(){try{!de&&null!=te.return&&te.return()}finally{if(xe)throw Te}}}}J.d(ht,{YAML:()=>Jr});var F_FLOW_MAP="FLOW_MAP",F_FLOW_SEQ="FLOW_SEQ",F_QUOTE_DOUBLE="QUOTE_DOUBLE",F_QUOTE_SINGLE="QUOTE_SINGLE",$="tag:yaml.org,2002:",oe={MAP:"tag:yaml.org,2002:map",SEQ:"tag:yaml.org,2002:seq",STR:"tag:yaml.org,2002:str"};function M(ge){for(var ue=[0],te=ge.indexOf("\n");-1!==te;)ue.push(te+=1),te=ge.indexOf("\n",te);return ue}function be(ge){var ue,te;return"string"==typeof ge?(ue=M(ge),te=ge):(Array.isArray(ge)&&(ge=ge[0]),ge&&ge.context&&(ge.lineStarts||(ge.lineStarts=M(ge.context.src)),ue=ge.lineStarts,te=ge.context.src)),{lineStarts:ue,src:te}}function Me(ge,ue){if("number"!=typeof ge||ge<0)return null;var te=be(ue),pe=te.lineStarts,ae=te.src;if(!pe||!ae||ge>ae.length)return null;for(var de=0;de<pe.length;++de){var xe=pe[de];if(ge<xe)return{line:de,col:ge-pe[de-1]+1};if(ge===xe)return{line:de+1,col:1}}var Te=pe.length;return{line:Te,col:ge-pe[Te-1]+1}}function Ze(ge,ue){var te=be(ue),pe=te.lineStarts,ae=te.src;if(!pe||!(ge>=1)||ge>pe.length)return null;for(var de=pe[ge-1],xe=pe[ge];xe&&xe>de&&"\n"===ae[xe-1];)--xe;return ae.slice(de,xe)}var je=function(){function ge(ue,te){O(this,ge),this.start=ue,this.end=te||ue}return j(ge,[{key:"isEmpty",value:function(){return"number"!=typeof this.start||!this.end||this.end<=this.start}},{key:"setOrigRange",value:function(te,pe){var ae=this.start,de=this.end;if(0===te.length||de<=te[0])return this.origStart=ae,this.origEnd=de,pe;for(var xe=pe;xe<te.length&&!(te[xe]>ae);)++xe;this.origStart=ae+xe;for(var Te=xe;xe<te.length&&!(te[xe]>=de);)++xe;return this.origEnd=de+xe,Te}}],[{key:"copy",value:function(te){return new ge(te.start,te.end)}}]),ge}(),Ce=function(){function ge(ue,te,pe){O(this,ge),Object.defineProperty(this,"context",{value:pe||null,writable:!0}),this.error=null,this.range=null,this.valueRange=null,this.props=te||[],this.type=ue,this.value=null}return j(ge,[{key:"getPropValue",value:function(te,pe,ae){if(!this.context)return null;var de=this.context.src,xe=this.props[te];return xe&&de[xe.start]===pe?de.slice(xe.start+(ae?1:0),xe.end):null}},{key:"anchor",get:function(){for(var te=0;te<this.props.length;++te){var pe=this.getPropValue(te,"&",!0);if(null!=pe)return pe}return null}},{key:"comment",get:function(){for(var te=[],pe=0;pe<this.props.length;++pe){var ae=this.getPropValue(pe,"#",!0);null!=ae&&te.push(ae)}return te.length>0?te.join("\n"):null}},{key:"commentHasRequiredWhitespace",value:function(te){if(this.header&&te===this.header.end||!this.valueRange)return!1;var ae=this.valueRange.end;return te!==ae||ge.atBlank(this.context.src,ae-1)}},{key:"hasComment",get:function(){if(this.context)for(var te=this.context.src,pe=0;pe<this.props.length;++pe)if("#"===te[this.props[pe].start])return!0;return!1}},{key:"hasProps",get:function(){if(this.context)for(var te=this.context.src,pe=0;pe<this.props.length;++pe)if("#"!==te[this.props[pe].start])return!0;return!1}},{key:"includesTrailingLines",get:function(){return!1}},{key:"jsonLike",get:function(){return-1!==[F_FLOW_MAP,F_FLOW_SEQ,F_QUOTE_DOUBLE,F_QUOTE_SINGLE].indexOf(this.type)}},{key:"rangeAsLinePos",get:function(){if(this.range&&this.context){var te=Me(this.range.start,this.context.root);if(te)return{start:te,end:Me(this.range.end,this.context.root)}}}},{key:"rawValue",get:function(){if(!this.valueRange||!this.context)return null;var te=this.valueRange;return this.context.src.slice(te.start,te.end)}},{key:"tag",get:function(){for(var te=0;te<this.props.length;++te){var pe=this.getPropValue(te,"!",!1);if(null!=pe){if("<"===pe[1])return{verbatim:pe.slice(2,-1)};var de=I(pe.match(/^(.*!)([^!]*)$/),3);return{handle:de[1],suffix:de[2]}}}return null}},{key:"valueRangeContainsNewline",get:function(){if(!this.valueRange||!this.context)return!1;for(var te=this.valueRange,ae=te.end,de=this.context.src,xe=te.start;xe<ae;++xe)if("\n"===de[xe])return!0;return!1}},{key:"parseComment",value:function(te){var pe=this.context.src;if("#"===pe[te]){var ae=ge.endOfLine(pe,te+1),de=new je(te,ae);return this.props.push(de),ae}return te}},{key:"setOrigRanges",value:function(te,pe){return this.range&&(pe=this.range.setOrigRange(te,pe)),this.valueRange&&this.valueRange.setOrigRange(te,pe),this.props.forEach(function(ae){return ae.setOrigRange(te,pe)}),pe}},{key:"toString",value:function(){var te=this.context.src,pe=this.range,ae=this.value;if(null!=ae)return ae;var de=te.slice(pe.start,pe.end);return ge.addStringTerminator(te,pe.end,de)}}],[{key:"addStringTerminator",value:function(te,pe,ae){if("\n"===ae[ae.length-1])return ae;var de=ge.endOfWhiteSpace(te,pe);return de>=te.length||"\n"===te[de]?ae+"\n":ae}},{key:"atDocumentBoundary",value:function(te,pe,ae){var de=te[pe];if(!de)return!0;var xe=te[pe-1];if(xe&&"\n"!==xe)return!1;if(ae){if(de!==ae)return!1}else if("-"!==de&&"."!==de)return!1;if(te[pe+1]!==de||te[pe+2]!==de)return!1;var We=te[pe+3];return!We||"\n"===We||"\t"===We||" "===We}},{key:"endOfIdentifier",value:function(te,pe){for(var ae=te[pe],de="<"===ae,xe=de?["\n","\t"," ",">"]:["\n","\t"," ","[","]","{","}",","];ae&&-1===xe.indexOf(ae);)ae=te[pe+=1];return de&&">"===ae&&(pe+=1),pe}},{key:"endOfIndent",value:function(te,pe){for(var ae=te[pe];" "===ae;)ae=te[pe+=1];return pe}},{key:"endOfLine",value:function(te,pe){for(var ae=te[pe];ae&&"\n"!==ae;)ae=te[pe+=1];return pe}},{key:"endOfWhiteSpace",value:function(te,pe){for(var ae=te[pe];"\t"===ae||" "===ae;)ae=te[pe+=1];return pe}},{key:"startOfLine",value:function(te,pe){var ae=te[pe-1];if("\n"===ae)return pe;for(;ae&&"\n"!==ae;)ae=te[pe-=1];return pe+1}},{key:"endOfBlockIndent",value:function(te,pe,ae){var de=ge.endOfIndent(te,ae);if(de>ae+pe)return de;var xe=ge.endOfWhiteSpace(te,de),Te=te[xe];return Te&&"\n"!==Te?null:xe}},{key:"atBlank",value:function(te,pe,ae){var de=te[pe];return"\n"===de||"\t"===de||" "===de||ae&&!de}},{key:"nextNodeIsIndented",value:function(te,pe,ae){return!(!te||pe<0)&&(pe>0||ae&&"-"===te)}},{key:"normalizeOffset",value:function(te,pe){var ae=te[pe];return ae?"\n"!==ae&&"\n"===te[pe-1]?pe-1:ge.endOfWhiteSpace(te,pe):pe}},{key:"foldNewline",value:function(te,pe,ae){for(var de=0,xe=!1,Te="",Be=te[pe+1];" "===Be||"\t"===Be||"\n"===Be;){switch(Be){case"\n":de=0,pe+=1,Te+="\n";break;case"\t":de<=ae&&(xe=!0),pe=ge.endOfWhiteSpace(te,pe+2)-1;break;case" ":de+=1,pe+=1}Be=te[pe+1]}return Te||(Te=" "),Be&&de<=ae&&(xe=!0),{fold:Te,offset:pe,error:xe}}}]),ge}(),Se=function(ge){fe(te,ge);var ue=V(te);function te(pe,ae,de){var xe;if(O(this,te),!(de&&ae instanceof Ce))throw new Error("Invalid arguments for new ".concat(pe));return(xe=ue.call(this)).name=pe,xe.message=de,xe.source=ae,xe}return j(te,[{key:"makePretty",value:function(){if(this.source){this.nodeType=this.source.type;var ae=this.source.context&&this.source.context.root;if("number"==typeof this.offset){this.range=new je(this.offset,this.offset+1);var de=ae&&Me(this.offset,ae);de&&(this.linePos={start:de,end:{line:de.line,col:de.col+1}}),delete this.offset}else this.range=this.source.range,this.linePos=this.source.rangeAsLinePos;if(this.linePos){var Te=this.linePos.start,We=Te.col;this.message+=" at line ".concat(Te.line,", column ").concat(We);var Je=ae&&function Fe(ge,ue){var te=ge.start,pe=ge.end,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:80,de=Ze(te.line,ue);if(!de)return null;var xe=te.col;if(de.length>ae)if(xe<=ae-10)de=de.substr(0,ae-1)+"\u2026";else{var Te=Math.round(ae/2);de.length>xe+Te&&(de=de.substr(0,xe+Te-1)+"\u2026"),xe-=de.length-ae,de="\u2026"+de.substr(1-ae)}var Be=1,We="";pe&&(pe.line===te.line&&xe+(pe.col-te.col)<=ae+1?Be=pe.col-te.col:(Be=Math.min(de.length+1,ae)-xe,We="\u2026"));var Je=xe>1?" ".repeat(xe-1):"",$e="^".repeat(Be);return"".concat(de,"\n").concat(Je).concat($e).concat(We)}(this.linePos,ae);Je&&(this.message+=":\n\n".concat(Je,"\n"))}delete this.source}}}]),te}(ie(Error)),rt=function(ge){fe(te,ge);var ue=V(te);function te(pe,ae){return O(this,te),ue.call(this,"YAMLReferenceError",pe,ae)}return te}(Se),ct=function(ge){fe(te,ge);var ue=V(te);function te(pe,ae){return O(this,te),ue.call(this,"YAMLSemanticError",pe,ae)}return te}(Se),Lt=function(ge){fe(te,ge);var ue=V(te);function te(pe,ae){return O(this,te),ue.call(this,"YAMLSyntaxError",pe,ae)}return te}(Se),pt=function(ge){fe(te,ge);var ue=V(te);function te(pe,ae){return O(this,te),ue.call(this,"YAMLWarning",pe,ae)}return te}(Se),gt=function(ge){fe(te,ge);var ue=V(te);function te(){return O(this,te),ue.apply(this,arguments)}return j(te,[{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;for(var ae=this.valueRange,de=ae.start,xe=ae.end,Te=this.context.src,Be=Te[xe-1];de<xe&&("\n"===Be||"\t"===Be||" "===Be);)Be=Te[--xe-1];for(var We="",Je=de;Je<xe;++Je){var $e=Te[Je];if("\n"===$e){var dt=Ce.foldNewline(Te,Je,-1);We+=dt.fold,Je=dt.offset}else if(" "===$e||"\t"===$e){for(var Vt=Je,en=Te[Je+1];Je<xe&&(" "===en||"\t"===en);)en=Te[(Je+=1)+1];"\n"!==en&&(We+=Je>Vt?Te.slice(Vt,Je+1):$e)}else We+=$e}var Rt=Te[de];switch(Rt){case"\t":return{errors:[new ct(this,"Plain value cannot start with a tab character")],str:We};case"@":case"`":var Lr="Plain value cannot start with reserved character ".concat(Rt);return{errors:[new ct(this,Lr)],str:We};default:return We}}},{key:"parseBlockValue",value:function(ae){for(var de=this.context,xe=de.indent,Te=de.inFlow,Be=de.src,We=ae,Je=ae,$e=Be[We];"\n"===$e&&!Ce.atDocumentBoundary(Be,We+1);$e=Be[We]){var dt=Ce.endOfBlockIndent(Be,xe,We+1);if(null===dt||"#"===Be[dt])break;We="\n"===Be[dt]?dt:Je=te.endOfLine(Be,dt,Te)}return this.valueRange.isEmpty()&&(this.valueRange.start=ae),this.valueRange.end=Je,Je}},{key:"parse",value:function(ae,de){this.context=ae;var Te=ae.src,Be=de,We=Te[Be];return We&&"#"!==We&&"\n"!==We&&(Be=te.endOfLine(Te,de,ae.inFlow)),this.valueRange=new je(de,Be),Be=Ce.endOfWhiteSpace(Te,Be),Be=this.parseComment(Be),(!this.hasComment||this.valueRange.isEmpty())&&(Be=this.parseBlockValue(Be)),Be}}],[{key:"endOfLine",value:function(ae,de,xe){for(var Te=ae[de],Be=de;Te&&"\n"!==Te&&(!xe||"["!==Te&&"]"!==Te&&"{"!==Te&&"}"!==Te&&","!==Te);){var We=ae[Be+1];if(":"===Te&&(!We||"\n"===We||"\t"===We||" "===We||xe&&","===We)||(" "===Te||"\t"===Te)&&"#"===We)break;Be+=1,Te=We}return Be}}]),te}(Ce),st=function(ge){fe(te,ge);var ue=V(te);function te(){return O(this,te),ue.call(this,"BLANK_LINE")}return j(te,[{key:"includesTrailingLines",get:function(){return!0}},{key:"parse",value:function(ae,de){return this.context=ae,this.range=new je(de,de+1),de+1}}]),te}(Ce),zt=function(ge){fe(te,ge);var ue=V(te);function te(pe,ae){var de;return O(this,te),(de=ue.call(this,pe,ae)).node=null,de}return j(te,[{key:"includesTrailingLines",get:function(){return!!this.node&&this.node.includesTrailingLines}},{key:"parse",value:function(ae,de){this.context=ae;var xe=ae.parseNode,Te=ae.src,Be=ae.atLineStart,We=ae.lineStart;!Be&&"SEQ_ITEM"===this.type&&(this.error=new ct(this,"Sequence items must not have preceding content on the same line"));for(var Je=Be?de-We:ae.indent,$e=Ce.endOfWhiteSpace(Te,de+1),dt=Te[$e],At="#"===dt,It=[],Vt=null;"\n"===dt||"#"===dt;){if("#"===dt){var en=Ce.endOfLine(Te,$e+1);It.push(new je($e,en)),$e=en}else Be=!0,"\n"===Te[Ce.endOfWhiteSpace(Te,We=$e+1)]&&0===It.length&&(We=(Vt=new st).parse({src:Te},We)),$e=Ce.endOfIndent(Te,We);dt=Te[$e]}if(Ce.nextNodeIsIndented(dt,$e-(We+Je),"SEQ_ITEM"!==this.type)?this.node=xe({atLineStart:Be,inCollection:!1,indent:Je,lineStart:We,parent:this},$e):dt&&We>de+1&&($e=We-1),this.node){if(Vt){var cn=ae.parent.items||ae.parent.contents;cn&&cn.push(Vt)}It.length&&Array.prototype.push.apply(this.props,It),$e=this.node.range.end}else if(At){var En=It[0];this.props.push(En),$e=En.end}else $e=Ce.endOfLine(Te,de+1);return this.valueRange=new je(de,this.node?this.node.valueRange.end:$e),$e}},{key:"setOrigRanges",value:function(ae,de){return de=P(he(te.prototype),"setOrigRanges",this).call(this,ae,de),this.node?this.node.setOrigRanges(ae,de):de}},{key:"toString",value:function(){var ae=this.context.src,de=this.node,xe=this.range,Te=this.value;if(null!=Te)return Te;var Be=de?ae.slice(xe.start,de.range.start)+String(de):ae.slice(xe.start,xe.end);return Ce.addStringTerminator(ae,xe.end,Be)}}]),te}(Ce),Pt=function(ge){fe(te,ge);var ue=V(te);function te(){return O(this,te),ue.call(this,"COMMENT")}return j(te,[{key:"parse",value:function(ae,de){this.context=ae;var xe=this.parseComment(de);return this.range=new je(de,xe),xe}}]),te}(Ce);function Wt(ge){for(var ue=ge;ue instanceof zt;)ue=ue.node;if(!(ue instanceof sn))return null;for(var te=ue.items.length,pe=-1,ae=te-1;ae>=0;--ae){var de=ue.items[ae];if("COMMENT"===de.type){var xe=de.context,Te=xe.indent;if(Te>0&&de.range.start>=xe.lineStart+Te)break;pe=ae}else{if("BLANK_LINE"!==de.type)break;pe=ae}}if(-1===pe)return null;for(var We=ue.items.splice(pe,te-pe),Je=We[0].range.start;ue.range.end=Je,ue.valueRange&&ue.valueRange.end>Je&&(ue.valueRange.end=Je),ue!==ge;)ue=ue.context.parent;return We}var sn=function(ge){fe(te,ge);var ue=V(te);function te(pe){var ae;O(this,te),ae=ue.call(this,"SEQ_ITEM"===pe.type?"SEQ":"MAP");for(var de=pe.props.length-1;de>=0;--de)if(pe.props[de].start<pe.context.lineStart){ae.props=pe.props.slice(0,de+1),pe.props=pe.props.slice(de+1),pe.range.start=(pe.props[0]||pe.valueRange).start;break}ae.items=[pe];var Te=Wt(pe);return Te&&Array.prototype.push.apply(ae.items,Te),ae}return j(te,[{key:"includesTrailingLines",get:function(){return this.items.length>0}},{key:"parse",value:function(ae,de){this.context=ae;var xe=ae.parseNode,Te=ae.src,Be=Ce.startOfLine(Te,de),We=this.items[0];We.context.parent=this,this.valueRange=je.copy(We.valueRange);for(var Je=We.range.start-We.context.lineStart,$e=de,dt=Te[$e=Ce.normalizeOffset(Te,$e)],At=Ce.endOfWhiteSpace(Te,Be)===$e,It=!1;dt;){for(;"\n"===dt||"#"===dt;){if(At&&"\n"===dt&&!It){var Vt=new st;if($e=Vt.parse({src:Te},$e),this.valueRange.end=$e,$e>=Te.length){dt=null;break}this.items.push(Vt),$e-=1}else if("#"===dt){if($e<Be+Je&&!te.nextContentHasIndent(Te,$e,Je))return $e;var en=new Pt;if($e=en.parse({indent:Je,lineStart:Be,src:Te},$e),this.items.push(en),this.valueRange.end=$e,$e>=Te.length){dt=null;break}}if($e=Ce.endOfIndent(Te,Be=$e+1),Ce.atBlank(Te,$e)){var Rt=Ce.endOfWhiteSpace(Te,$e),cn=Te[Rt];(!cn||"\n"===cn||"#"===cn)&&($e=Rt)}dt=Te[$e],At=!0}if(!dt)break;if($e!==Be+Je&&(At||":"!==dt)){if($e<Be+Je){Be>de&&($e=Be);break}this.error||(this.error=new Lt(this,"All collection items must start at the same column"))}if("SEQ_ITEM"===We.type){if("-"!==dt){Be>de&&($e=Be);break}}else if("-"===dt&&!this.error){var Lr=Te[$e+1];Lr&&"\n"!==Lr&&"\t"!==Lr&&" "!==Lr||(this.error=new Lt(this,"A collection cannot be both a mapping and a sequence"))}var An=xe({atLineStart:At,inCollection:!0,indent:Je,lineStart:Be,parent:this},$e);if(!An)return $e;if(this.items.push(An),this.valueRange.end=An.valueRange.end,$e=Ce.normalizeOffset(Te,An.range.end),At=!1,It=An.includesTrailingLines,dt=Te[$e]){for(var gr=$e-1,Mr=Te[gr];" "===Mr||"\t"===Mr;)Mr=Te[--gr];"\n"===Mr&&(Be=gr+1,At=!0)}var Zn=Wt(An);Zn&&Array.prototype.push.apply(this.items,Zn)}return $e}},{key:"setOrigRanges",value:function(ae,de){return de=P(he(te.prototype),"setOrigRanges",this).call(this,ae,de),this.items.forEach(function(xe){de=xe.setOrigRanges(ae,de)}),de}},{key:"toString",value:function(){var ae=this.context.src,de=this.items,xe=this.range,Te=this.value;if(null!=Te)return Te;for(var Be=ae.slice(xe.start,de[0].range.start)+String(de[0]),We=1;We<de.length;++We){var Je=de[We],$e=Je.context,At=$e.indent;if($e.atLineStart)for(var It=0;It<At;++It)Be+=" ";Be+=String(Je)}return Ce.addStringTerminator(ae,xe.end,Be)}}],[{key:"nextContentHasIndent",value:function(ae,de,xe){var Te=Ce.endOfLine(ae,de)+1,Be=ae[de=Ce.endOfWhiteSpace(ae,Te)];return!!Be&&(de>=Te+xe||("#"===Be||"\n"===Be)&&te.nextContentHasIndent(ae,de,xe))}}]),te}(Ce),Vn=function(ge){fe(te,ge);var ue=V(te);function te(){var pe;return O(this,te),(pe=ue.call(this,"DIRECTIVE")).name=null,pe}return j(te,[{key:"parameters",get:function(){var ae=this.rawValue;return ae?ae.trim().split(/[ \t]+/):[]}},{key:"parseName",value:function(ae){for(var de=this.context.src,xe=ae,Te=de[xe];Te&&"\n"!==Te&&"\t"!==Te&&" "!==Te;)Te=de[xe+=1];return this.name=de.slice(ae,xe),xe}},{key:"parseParameters",value:function(ae){for(var de=this.context.src,xe=ae,Te=de[xe];Te&&"\n"!==Te&&"#"!==Te;)Te=de[xe+=1];return this.valueRange=new je(ae,xe),xe}},{key:"parse",value:function(ae,de){this.context=ae;var xe=this.parseName(de+1);return xe=this.parseParameters(xe),xe=this.parseComment(xe),this.range=new je(de,xe),xe}}]),te}(Ce),wn=function(ge){fe(te,ge);var ue=V(te);function te(){var pe;return O(this,te),(pe=ue.call(this,"DOCUMENT")).directives=null,pe.contents=null,pe.directivesEndMarker=null,pe.documentEndMarker=null,pe}return j(te,[{key:"parseDirectives",value:function(ae){var de=this.context.src;this.directives=[];for(var xe=!0,Te=!1,Be=ae;!Ce.atDocumentBoundary(de,Be,"-");)switch(Be=te.startCommentOrEndBlankLine(de,Be),de[Be]){case"\n":if(xe){var We=new st;(Be=We.parse({src:de},Be))<de.length&&this.directives.push(We)}else Be+=1,xe=!0;break;case"#":var Je=new Pt;Be=Je.parse({src:de},Be),this.directives.push(Je),xe=!1;break;case"%":var $e=new Vn;Be=$e.parse({parent:this,src:de},Be),this.directives.push($e),Te=!0,xe=!1;break;default:return Te?this.error=new ct(this,"Missing directives-end indicator line"):this.directives.length>0&&(this.contents=this.directives,this.directives=[]),Be}return de[Be]?(this.directivesEndMarker=new je(Be,Be+3),Be+3):(Te?this.error=new ct(this,"Missing directives-end indicator line"):this.directives.length>0&&(this.contents=this.directives,this.directives=[]),Be)}},{key:"parseContents",value:function(ae){var de=this.context,xe=de.parseNode,Te=de.src;this.contents||(this.contents=[]);for(var Be=ae;"-"===Te[Be-1];)Be-=1;var We=Ce.endOfWhiteSpace(Te,ae),Je=Be===ae;for(this.valueRange=new je(We);!Ce.atDocumentBoundary(Te,We,".");){switch(Te[We]){case"\n":if(Je){var $e=new st;(We=$e.parse({src:Te},We))<Te.length&&this.contents.push($e)}else We+=1,Je=!0;Be=We;break;case"#":var dt=new Pt;We=dt.parse({src:Te},We),this.contents.push(dt),Je=!1;break;default:var At=Ce.endOfIndent(Te,We),Vt=xe({atLineStart:Je,indent:-1,inFlow:!1,inCollection:!1,lineStart:Be,parent:this},At);if(!Vt)return this.valueRange.end=At;this.contents.push(Vt),We=Vt.range.end,Je=!1;var en=Wt(Vt);en&&Array.prototype.push.apply(this.contents,en)}We=te.startCommentOrEndBlankLine(Te,We)}if(this.valueRange.end=We,Te[We]&&(this.documentEndMarker=new je(We,We+3),Te[We+=3])){if("#"===Te[We=Ce.endOfWhiteSpace(Te,We)]){var Rt=new Pt;We=Rt.parse({src:Te},We),this.contents.push(Rt)}switch(Te[We]){case"\n":We+=1;break;case void 0:break;default:this.error=new Lt(this,"Document end marker line cannot have a non-comment suffix")}}return We}},{key:"parse",value:function(ae,de){ae.root=this,this.context=ae;var Te=65279===ae.src.charCodeAt(de)?de+1:de;return Te=this.parseDirectives(Te),this.parseContents(Te)}},{key:"setOrigRanges",value:function(ae,de){return de=P(he(te.prototype),"setOrigRanges",this).call(this,ae,de),this.directives.forEach(function(xe){de=xe.setOrigRanges(ae,de)}),this.directivesEndMarker&&(de=this.directivesEndMarker.setOrigRange(ae,de)),this.contents.forEach(function(xe){de=xe.setOrigRanges(ae,de)}),this.documentEndMarker&&(de=this.documentEndMarker.setOrigRange(ae,de)),de}},{key:"toString",value:function(){var ae=this.contents,de=this.directives,xe=this.value;if(null!=xe)return xe;var Te=de.join("");return ae.length>0&&((de.length>0||"COMMENT"===ae[0].type)&&(Te+="---\n"),Te+=ae.join("")),"\n"!==Te[Te.length-1]&&(Te+="\n"),Te}}],[{key:"startCommentOrEndBlankLine",value:function(ae,de){var xe=Ce.endOfWhiteSpace(ae,de),Te=ae[xe];return"#"===Te||"\n"===Te?xe:de}}]),te}(Ce),qn=function(ge){fe(te,ge);var ue=V(te);function te(){return O(this,te),ue.apply(this,arguments)}return j(te,[{key:"parse",value:function(ae,de){this.context=ae;var xe=ae.src,Te=Ce.endOfIdentifier(xe,de+1);return this.valueRange=new je(de+1,Te),Te=Ce.endOfWhiteSpace(xe,Te),this.parseComment(Te)}}]),te}(Ce),$n=function(ge){fe(te,ge);var ue=V(te);function te(pe,ae){var de;return O(this,te),(de=ue.call(this,pe,ae)).blockIndent=null,de.chomping="CLIP",de.header=null,de}return j(te,[{key:"includesTrailingLines",get:function(){return"KEEP"===this.chomping}},{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;var ae=this.valueRange,de=ae.start,xe=ae.end,Te=this.context,Be=Te.indent,We=Te.src;if(this.valueRange.isEmpty())return"";for(var Je=null,$e=We[xe-1];"\n"===$e||"\t"===$e||" "===$e;){if((xe-=1)<=de){if("KEEP"===this.chomping)break;return""}"\n"===$e&&(Je=xe),$e=We[xe-1]}var dt=xe+1;Je&&("KEEP"===this.chomping?(dt=Je,xe=this.valueRange.end):xe=Je);for(var At=Be+this.blockIndent,It="BLOCK_FOLDED"===this.type,Vt=!0,en="",Rt="",cn=!1,En=de;En<xe;++En){for(var Lr=0;Lr<At&&" "===We[En];++Lr)En+=1;var zr=We[En];if("\n"===zr)"\n"===Rt?en+="\n":Rt="\n";else{var An=Ce.endOfLine(We,En),gr=We.slice(En,An);En=An,It&&(" "===zr||"\t"===zr)&&En<dt?(" "===Rt?Rt="\n":!cn&&!Vt&&"\n"===Rt&&(Rt="\n\n"),en+=Rt+gr,Rt=An<xe&&We[An]||"",cn=!0):(en+=Rt+gr,Rt=It&&En<dt?" ":"\n",cn=!1),Vt&&""!==gr&&(Vt=!1)}}return"STRIP"===this.chomping?en:en+"\n"}},{key:"parseBlockHeader",value:function(ae){for(var de=this.context.src,xe=ae+1,Te="";;){var Be=de[xe];switch(Be){case"-":this.chomping="STRIP";break;case"+":this.chomping="KEEP";break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":Te+=Be;break;default:return this.blockIndent=Number(Te)||null,this.header=new je(ae,xe),xe}xe+=1}}},{key:"parseBlockValue",value:function(ae){for(var de=this.context,xe=de.indent,Te=de.src,Be=!!this.blockIndent,We=ae,Je=ae,$e=1,dt=Te[We];"\n"===dt&&!Ce.atDocumentBoundary(Te,We+=1);dt=Te[We]){var At=Ce.endOfBlockIndent(Te,xe,We);if(null===At)break;var It=Te[At],Vt=At-(We+xe);if(this.blockIndent){if(It&&"\n"!==It&&Vt<this.blockIndent){if("#"===Te[At])break;if(!this.error){var cn="Block scalars must not be less indented than their ".concat(Be?"explicit indentation indicator":"first line");this.error=new ct(this,cn)}}}else"\n"!==Te[At]?(Vt<$e&&(this.error=new ct(this,"Block scalars with more-indented leading empty lines must use an explicit indentation indicator")),this.blockIndent=Vt):Vt>$e&&($e=Vt);We="\n"===Te[At]?At:Je=Ce.endOfLine(Te,At)}return"KEEP"!==this.chomping&&(We=Te[Je]?Je+1:Je),this.valueRange=new je(ae+1,We),We}},{key:"parse",value:function(ae,de){this.context=ae;var xe=ae.src,Te=this.parseBlockHeader(de);return Te=Ce.endOfWhiteSpace(xe,Te),Te=this.parseComment(Te),this.parseBlockValue(Te)}},{key:"setOrigRanges",value:function(ae,de){return de=P(he(te.prototype),"setOrigRanges",this).call(this,ae,de),this.header?this.header.setOrigRange(ae,de):de}}]),te}(Ce),ur=function(ge){fe(te,ge);var ue=V(te);function te(pe,ae){var de;return O(this,te),(de=ue.call(this,pe,ae)).items=null,de}return j(te,[{key:"prevNodeIsJsonLike",value:function(){var ae=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.items.length,de=this.items[ae-1];return!!de&&(de.jsonLike||"COMMENT"===de.type&&this.prevNodeIsJsonLike(ae-1))}},{key:"parse",value:function(ae,de){this.context=ae;var xe=ae.parseNode,Te=ae.src,Be=ae.indent,We=ae.lineStart,Je=Te[de];this.items=[{char:Je,offset:de}];var $e=Ce.endOfWhiteSpace(Te,de+1);for(Je=Te[$e];Je&&"]"!==Je&&"}"!==Je;){switch(Je){case"\n":if("\n"===Te[Ce.endOfWhiteSpace(Te,We=$e+1)]){var At=new st;We=At.parse({src:Te},We),this.items.push(At)}($e=Ce.endOfIndent(Te,We))<=We+Be&&(Je=Te[$e],$e<We+Be||"]"!==Je&&"}"!==Je)&&(this.error=new ct(this,"Insufficient indentation in flow collection"));break;case",":this.items.push({char:Je,offset:$e}),$e+=1;break;case"#":var Vt=new Pt;$e=Vt.parse({src:Te},$e),this.items.push(Vt);break;case"?":case":":var en=Te[$e+1];if("\n"===en||"\t"===en||" "===en||","===en||":"===Je&&this.prevNodeIsJsonLike()){this.items.push({char:Je,offset:$e}),$e+=1;break}default:var Rt=xe({atLineStart:!1,inCollection:!1,inFlow:!0,indent:-1,lineStart:We,parent:this},$e);if(!Rt)return this.valueRange=new je(de,$e),$e;this.items.push(Rt),$e=Ce.normalizeOffset(Te,Rt.range.end)}Je=Te[$e=Ce.endOfWhiteSpace(Te,$e)]}return this.valueRange=new je(de,$e+1),Je&&(this.items.push({char:Je,offset:$e}),$e=Ce.endOfWhiteSpace(Te,$e+1),$e=this.parseComment($e)),$e}},{key:"setOrigRanges",value:function(ae,de){return de=P(he(te.prototype),"setOrigRanges",this).call(this,ae,de),this.items.forEach(function(xe){if(xe instanceof Ce)de=xe.setOrigRanges(ae,de);else if(0===ae.length)xe.origOffset=xe.offset;else{for(var Te=de;Te<ae.length&&!(ae[Te]>xe.offset);)++Te;xe.origOffset=xe.offset+Te,de=Te}}),de}},{key:"toString",value:function(){var ae=this.context.src,xe=this.range,Te=this.value;if(null!=Te)return Te;var Be=this.items.filter(function($e){return $e instanceof Ce}),We="",Je=xe.start;return Be.forEach(function($e){var dt=ae.slice(Je,$e.range.start);Je=$e.range.end,"\n"===(We+=dt+String($e))[We.length-1]&&"\n"!==ae[Je-1]&&"\n"===ae[Je]&&(Je+=1)}),We+=ae.slice(Je,xe.end),Ce.addStringTerminator(ae,xe.end,We)}}]),te}(Ce),Pn=function(ge){fe(te,ge);var ue=V(te);function te(){return O(this,te),ue.apply(this,arguments)}return j(te,[{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;var ae=[],de=this.valueRange,xe=de.start,Te=de.end,Be=this.context,We=Be.indent,Je=Be.src;'"'!==Je[Te-1]&&ae.push(new Lt(this,'Missing closing "quote'));for(var $e="",dt=xe+1;dt<Te-1;++dt){var At=Je[dt];if("\n"===At){Ce.atDocumentBoundary(Je,dt+1)&&ae.push(new ct(this,"Document boundary indicators are not allowed within string values"));var It=Ce.foldNewline(Je,dt,We);$e+=It.fold,dt=It.offset,It.error&&ae.push(new ct(this,"Multi-line double-quoted string needs to be sufficiently indented"))}else if("\\"===At)switch(dt+=1,Je[dt]){case"0":$e+="\0";break;case"a":$e+="\x07";break;case"b":$e+="\b";break;case"e":$e+="\x1b";break;case"f":$e+="\f";break;case"n":$e+="\n";break;case"r":$e+="\r";break;case"t":case"\t":$e+="\t";break;case"v":$e+="\v";break;case"N":$e+="\x85";break;case"_":$e+="\xa0";break;case"L":$e+="\u2028";break;case"P":$e+="\u2029";break;case" ":$e+=" ";break;case'"':$e+='"';break;case"/":$e+="/";break;case"\\":$e+="\\";break;case"x":$e+=this.parseCharCode(dt+1,2,ae),dt+=2;break;case"u":$e+=this.parseCharCode(dt+1,4,ae),dt+=4;break;case"U":$e+=this.parseCharCode(dt+1,8,ae),dt+=8;break;case"\n":for(;" "===Je[dt+1]||"\t"===Je[dt+1];)dt+=1;break;default:ae.push(new Lt(this,"Invalid escape sequence ".concat(Je.substr(dt-1,2)))),$e+="\\"+Je[dt]}else if(" "===At||"\t"===At){for(var cn=dt,En=Je[dt+1];" "===En||"\t"===En;)En=Je[(dt+=1)+1];"\n"!==En&&($e+=dt>cn?Je.slice(cn,dt+1):At)}else $e+=At}return ae.length>0?{errors:ae,str:$e}:$e}},{key:"parseCharCode",value:function(ae,de,xe){var Te=this.context.src,Be=Te.substr(ae,de),Je=Be.length===de&&/^[0-9a-fA-F]+$/.test(Be)?parseInt(Be,16):NaN;return isNaN(Je)?(xe.push(new Lt(this,"Invalid escape sequence ".concat(Te.substr(ae-2,de+2)))),Te.substr(ae-2,de+2)):String.fromCodePoint(Je)}},{key:"parse",value:function(ae,de){this.context=ae;var xe=ae.src,Te=te.endOfQuote(xe,de+1);return this.valueRange=new je(de,Te),Te=Ce.endOfWhiteSpace(xe,Te),this.parseComment(Te)}}],[{key:"endOfQuote",value:function(ae,de){for(var xe=ae[de];xe&&'"'!==xe;)xe=ae[de+="\\"===xe?2:1];return de+1}}]),te}(Ce),Yn=function(ge){fe(te,ge);var ue=V(te);function te(){return O(this,te),ue.apply(this,arguments)}return j(te,[{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;var ae=[],de=this.valueRange,xe=de.start,Te=de.end,Be=this.context,We=Be.indent,Je=Be.src;"'"!==Je[Te-1]&&ae.push(new Lt(this,"Missing closing 'quote"));for(var $e="",dt=xe+1;dt<Te-1;++dt){var At=Je[dt];if("\n"===At){Ce.atDocumentBoundary(Je,dt+1)&&ae.push(new ct(this,"Document boundary indicators are not allowed within string values"));var It=Ce.foldNewline(Je,dt,We);$e+=It.fold,dt=It.offset,It.error&&ae.push(new ct(this,"Multi-line single-quoted string needs to be sufficiently indented"))}else if("'"===At)$e+=At,"'"!==Je[dt+=1]&&ae.push(new Lt(this,"Unescaped single quote? This should not happen."));else if(" "===At||"\t"===At){for(var cn=dt,En=Je[dt+1];" "===En||"\t"===En;)En=Je[(dt+=1)+1];"\n"!==En&&($e+=dt>cn?Je.slice(cn,dt+1):At)}else $e+=At}return ae.length>0?{errors:ae,str:$e}:$e}},{key:"parse",value:function(ae,de){this.context=ae;var xe=ae.src,Te=te.endOfQuote(xe,de+1);return this.valueRange=new je(de,Te),Te=Ce.endOfWhiteSpace(xe,Te),this.parseComment(Te)}}],[{key:"endOfQuote",value:function(ae,de){for(var xe=ae[de];xe;)if("'"===xe){if("'"!==ae[de+1])break;xe=ae[de+=2]}else xe=ae[de+=1];return de+1}}]),te}(Ce);function hr(ge,ue){switch(ge){case"ALIAS":return new qn(ge,ue);case"BLOCK_FOLDED":case"BLOCK_LITERAL":return new $n(ge,ue);case F_FLOW_MAP:case F_FLOW_SEQ:return new ur(ge,ue);case"MAP_KEY":case"MAP_VALUE":case"SEQ_ITEM":return new zt(ge,ue);case"COMMENT":case"PLAIN":return new gt(ge,ue);case F_QUOTE_DOUBLE:return new Pn(ge,ue);case F_QUOTE_SINGLE:return new Yn(ge,ue);default:return null}}var vr=function(){function ge(){var ue=this,te=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},pe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},ae=pe.atLineStart,de=pe.inCollection,xe=pe.inFlow,Te=pe.indent,Be=pe.lineStart,We=pe.parent;O(this,ge),S(this,"parseNode",function(Je,$e){if(Ce.atDocumentBoundary(ue.src,$e))return null;var dt=new ge(ue,Je),At=dt.parseProps($e),en=At.valueStart,Rt=hr(At.type,At.props),cn=Rt.parse(dt,en);if(Rt.range=new je($e,cn),cn<=$e&&(Rt.error=new Error("Node#parse consumed no characters"),Rt.error.parseEnd=cn,Rt.error.source=Rt,Rt.range.end=$e+1),dt.nodeStartsCollection(Rt)){!Rt.error&&!dt.atLineStart&&"DOCUMENT"===dt.parent.type&&(Rt.error=new Lt(Rt,"Block collection must not have preceding content here (e.g. directives-end indicator)"));var En=new sn(Rt);return cn=En.parse(new ge(dt),cn),En.range=new je($e,cn),En}return Rt}),this.atLineStart=null!=ae?ae:te.atLineStart||!1,this.inCollection=null!=de?de:te.inCollection||!1,this.inFlow=null!=xe?xe:te.inFlow||!1,this.indent=null!=Te?Te:te.indent,this.lineStart=null!=Be?Be:te.lineStart,this.parent=null!=We?We:te.parent||{},this.root=te.root,this.src=te.src}return j(ge,[{key:"nodeStartsCollection",value:function(te){var de=this.src;if(this.inCollection||this.inFlow)return!1;if(te instanceof zt)return!0;var xe=te.range.end;return"\n"!==de[xe]&&"\n"!==de[xe-1]&&":"===de[xe=Ce.endOfWhiteSpace(de,xe)]}},{key:"parseProps",value:function(te){for(var pe=this.inFlow,ae=this.parent,de=this.src,xe=[],Te=!1,Be=de[te=this.atLineStart?Ce.endOfIndent(de,te):Ce.endOfWhiteSpace(de,te)];"&"===Be||"#"===Be||"!"===Be||"\n"===Be;){if("\n"===Be){var We=te,Je=void 0;do{We=Ce.endOfIndent(de,Je=We+1)}while("\n"===de[We]);if("#"!==de[We]&&!Ce.nextNodeIsIndented(de[We],We-(Je+this.indent),!("SEQ_ITEM"===ae.type&&ae.context.atLineStart)))break;this.atLineStart=!0,this.lineStart=Je,Te=!1,te=We}else if("#"===Be){var At=Ce.endOfLine(de,te+1);xe.push(new je(te,At)),te=At}else{var It=Ce.endOfIdentifier(de,te+1);"!"===Be&&","===de[It]&&/^[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+,\d\d\d\d(-\d\d){0,2}\/\S/.test(de.slice(te+1,It+13))&&(It=Ce.endOfIdentifier(de,It+5)),xe.push(new je(te,It)),Te=!0,te=Ce.endOfWhiteSpace(de,It)}Be=de[te]}return Te&&":"===Be&&Ce.atBlank(de,te+1,!0)&&(te-=1),{props:xe,type:ge.parseType(de,te,pe),valueStart:te}}}],[{key:"parseType",value:function(te,pe,ae){switch(te[pe]){case"*":return"ALIAS";case">":return"BLOCK_FOLDED";case"|":return"BLOCK_LITERAL";case"{":return F_FLOW_MAP;case"[":return F_FLOW_SEQ;case"?":return!ae&&Ce.atBlank(te,pe+1,!0)?"MAP_KEY":"PLAIN";case":":return!ae&&Ce.atBlank(te,pe+1,!0)?"MAP_VALUE":"PLAIN";case"-":return!ae&&Ce.atBlank(te,pe+1,!0)?"SEQ_ITEM":"PLAIN";case'"':return F_QUOTE_DOUBLE;case"'":return F_QUOTE_SINGLE;default:return"PLAIN"}}}]),ge}();function ir(ge){var ue=[];-1!==ge.indexOf("\r")&&(ge=ge.replace(/\r\n?/g,function(xe,Te){return xe.length>1&&ue.push(Te),"\n"}));var te=[],pe=0;do{var ae=new wn,de=new vr({src:ge});pe=ae.parse(de,pe),te.push(ae)}while(pe<ge.length);return te.setOrigRanges=function(){if(0===ue.length)return!1;for(var xe=1;xe<ue.length;++xe)ue[xe]-=xe;for(var Te=0,Be=0;Be<te.length;++Be)Te=te[Be].setOrigRanges(ue,Te);return ue.splice(0,ue.length),!0},te.toString=function(){return te.join("...\n")},te}function Sr(ge,ue,te){return te?-1===te.indexOf("\n")?"".concat(ge," #").concat(te):"".concat(ge,"\n")+te.replace(/^/gm,"".concat(ue||"","#")):ge}var un=function ge(){O(this,ge)};function Sn(ge,ue,te){if(Array.isArray(ge))return ge.map(function(de,xe){return Sn(de,String(xe),te)});if(ge&&"function"==typeof ge.toJSON){var pe=te&&te.anchors&&te.anchors.get(ge);pe&&(te.onCreate=function(de){pe.res=de,delete te.onCreate});var ae=ge.toJSON(ue,te);return pe&&te.onCreate&&te.onCreate(ae),ae}return te&&te.keep||"bigint"!=typeof ge?ge:Number(ge)}var mn=function(ge){fe(te,ge);var ue=V(te);function te(pe){var ae;return O(this,te),(ae=ue.call(this)).value=pe,ae}return j(te,[{key:"toJSON",value:function(ae,de){return de&&de.keep?this.value:Sn(this.value,ae,de)}},{key:"toString",value:function(){return String(this.value)}}]),te}(un);function yr(ge,ue,te){for(var pe=te,ae=ue.length-1;ae>=0;--ae){var de=ue[ae];if(Number.isInteger(de)&&de>=0){var xe=[];xe[de]=pe,pe=xe}else{var Te={};Object.defineProperty(Te,de,{value:pe,writable:!0,enumerable:!0,configurable:!0}),pe=Te}}return ge.createNode(pe,!1)}var Er=function(ue){return null==ue||"object"===e(ue)&&ue[Symbol.iterator]().next().done},Dn=function(ge){fe(te,ge);var ue=V(te);function te(pe){var ae;return O(this,te),S(re(ae=ue.call(this)),"items",[]),ae.schema=pe,ae}return j(te,[{key:"addIn",value:function(ae,de){if(Er(ae))this.add(de);else{var xe=H(ae),Te=xe[0],Be=xe.slice(1),We=this.get(Te,!0);if(We instanceof te)We.addIn(Be,de);else{if(void 0!==We||!this.schema)throw new Error("Expected YAML collection at ".concat(Te,". Remaining path: ").concat(Be));this.set(Te,yr(this.schema,Be,de))}}}},{key:"deleteIn",value:function(ae){var de=H(ae),xe=de[0],Te=de.slice(1);if(0===Te.length)return this.delete(xe);var Be=this.get(xe,!0);if(Be instanceof te)return Be.deleteIn(Te);throw new Error("Expected YAML collection at ".concat(xe,". Remaining path: ").concat(Te))}},{key:"getIn",value:function(ae,de){var xe=H(ae),Te=xe[0],Be=xe.slice(1),We=this.get(Te,!0);return 0===Be.length?!de&&We instanceof mn?We.value:We:We instanceof te?We.getIn(Be,de):void 0}},{key:"hasAllNullValues",value:function(){return this.items.every(function(ae){if(!ae||"PAIR"!==ae.type)return!1;var de=ae.value;return null==de||de instanceof mn&&null==de.value&&!de.commentBefore&&!de.comment&&!de.tag})}},{key:"hasIn",value:function(ae){var de=H(ae),xe=de[0],Te=de.slice(1);if(0===Te.length)return this.has(xe);var Be=this.get(xe,!0);return Be instanceof te&&Be.hasIn(Te)}},{key:"setIn",value:function(ae,de){var xe=H(ae),Te=xe[0],Be=xe.slice(1);if(0===Be.length)this.set(Te,de);else{var We=this.get(Te,!0);if(We instanceof te)We.setIn(Be,de);else{if(void 0!==We||!this.schema)throw new Error("Expected YAML collection at ".concat(Te,". Remaining path: ").concat(Be));this.set(Te,yr(this.schema,Be,de))}}}},{key:"toJSON",value:function(){return null}},{key:"toString",value:function(ae,de,xe,Te){var Be=this,We=de.blockItem,Je=de.flowChars,dt=de.itemIndent,It=ae.indent,Vt=ae.indentStep,en=ae.stringify,Rt=this.type===F_FLOW_MAP||this.type===F_FLOW_SEQ||ae.inFlow;Rt&&(dt+=Vt);var cn=de.isMap&&this.hasAllNullValues();ae=Object.assign({},ae,{allNullValues:cn,indent:dt,inFlow:Rt,type:null});var An,En=!1,Lr=!1,zr=this.items.reduce(function(Ai,hi,ls){var ii;hi&&(!En&&hi.spaceBefore&&Ai.push({type:"comment",str:""}),hi.commentBefore&&hi.commentBefore.match(/^.*$/gm).forEach(function(Ns){Ai.push({type:"comment",str:"#".concat(Ns)})}),hi.comment&&(ii=hi.comment),Rt&&(!En&&hi.spaceBefore||hi.commentBefore||hi.comment||hi.key&&(hi.key.commentBefore||hi.key.comment)||hi.value&&(hi.value.commentBefore||hi.value.comment))&&(Lr=!0)),En=!1;var ra=en(hi,ae,function(){return ii=null},function(){return En=!0});return Rt&&!Lr&&ra.includes("\n")&&(Lr=!0),Rt&&ls<Be.items.length-1&&(ra+=","),ra=Sr(ra,dt,ii),En&&(ii||Rt)&&(En=!1),Ai.push({type:"item",str:ra}),Ai},[]);if(0===zr.length)An=Je.start+Je.end;else if(Rt){var gr=Je.start,Mr=Je.end,Zn=zr.map(function(Ai){return Ai.str});if(Lr||Zn.reduce(function(Ai,hi){return Ai+hi.length+2},2)>te.maxFlowStringSingleLineLength){An=gr;var qi,Ti=L(Zn);try{for(Ti.s();!(qi=Ti.n()).done;){var ss=qi.value;An+=ss?"\n".concat(Vt).concat(It).concat(ss):"\n"}}catch(Ai){Ti.e(Ai)}finally{Ti.f()}An+="\n".concat(It).concat(Mr)}else An="".concat(gr," ").concat(Zn.join(" ")," ").concat(Mr)}else{var cu=zr.map(We);An=cu.shift();var ml,Ls=L(cu);try{for(Ls.s();!(ml=Ls.n()).done;){var Rs=ml.value;An+=Rs?"\n".concat(It).concat(Rs):"\n"}}catch(Ai){Ls.e(Ai)}finally{Ls.f()}}return this.comment?(An+="\n"+this.comment.replace(/^/gm,"".concat(It,"#")),xe&&xe()):En&&Te&&Te(),An}}]),te}(un);function Nt(ge){var ue=ge instanceof mn?ge.value:ge;return ue&&"string"==typeof ue&&(ue=Number(ue)),Number.isInteger(ue)&&ue>=0?ue:null}S(Dn,"maxFlowStringSingleLineLength",60);var Zt=function(ge){fe(te,ge);var ue=V(te);function te(){return O(this,te),ue.apply(this,arguments)}return j(te,[{key:"add",value:function(ae){this.items.push(ae)}},{key:"delete",value:function(ae){var de=Nt(ae);return"number"==typeof de&&this.items.splice(de,1).length>0}},{key:"get",value:function(ae,de){var xe=Nt(ae);if("number"==typeof xe){var Te=this.items[xe];return!de&&Te instanceof mn?Te.value:Te}}},{key:"has",value:function(ae){var de=Nt(ae);return"number"==typeof de&&de<this.items.length}},{key:"set",value:function(ae,de){var xe=Nt(ae);if("number"!=typeof xe)throw new Error("Expected a valid index, not ".concat(ae,"."));this.items[xe]=de}},{key:"toJSON",value:function(ae,de){var xe=[];de&&de.onCreate&&de.onCreate(xe);var We,Te=0,Be=L(this.items);try{for(Be.s();!(We=Be.n()).done;)xe.push(Sn(We.value,String(Te++),de))}catch($e){Be.e($e)}finally{Be.f()}return xe}},{key:"toString",value:function(ae,de,xe){return ae?P(he(te.prototype),"toString",this).call(this,ae,{blockItem:function(Be){return"comment"===Be.type?Be.str:"- ".concat(Be.str)},flowChars:{start:"[",end:"]"},isMap:!1,itemIndent:(ae.indent||"")+"  "},de,xe):JSON.stringify(this)}}]),te}(Dn),Ge=function(ge){fe(te,ge);var ue=V(te);function te(pe){var ae,de=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return O(this,te),(ae=ue.call(this)).key=pe,ae.value=de,ae.type=te.Type.PAIR,ae}return j(te,[{key:"commentBefore",get:function(){return this.key instanceof un?this.key.commentBefore:void 0},set:function(ae){if(null==this.key&&(this.key=new mn(null)),!(this.key instanceof un))throw new Error("Pair.commentBefore is an alias for Pair.key.commentBefore. To set it, the key must be a Node.");this.key.commentBefore=ae}},{key:"addToJSMap",value:function(ae,de){var xe=Sn(this.key,"",ae);if(de instanceof Map){var Te=Sn(this.value,xe,ae);de.set(xe,Te)}else if(de instanceof Set)de.add(xe);else{var Be=function(ue,te,pe){return null===te?"":"object"!==e(te)?String(te):ue instanceof un&&pe&&pe.doc?ue.toString({anchors:Object.create(null),doc:pe.doc,indent:"",indentStep:pe.indentStep,inFlow:!0,inStringifyKey:!0,stringify:pe.stringify}):JSON.stringify(te)}(this.key,xe,ae),We=Sn(this.value,Be,ae);Be in de?Object.defineProperty(de,Be,{value:We,writable:!0,enumerable:!0,configurable:!0}):de[Be]=We}return de}},{key:"toJSON",value:function(ae,de){return this.addToJSMap(de,de&&de.mapAsMap?new Map:{})}},{key:"toString",value:function(ae,de,xe){if(!ae||!ae.doc)return JSON.stringify(this);var Te=ae.doc.options,Be=Te.indent,We=Te.indentSeq,Je=Te.simpleKeys,$e=this.key,dt=this.value,At=$e instanceof un&&$e.comment;if(Je){if(At)throw new Error("With simple keys, key nodes cannot have comments");if($e instanceof Dn)throw new Error("With simple keys, collection cannot be used as a key value")}var Vt=!Je&&(!$e||At||($e instanceof un?$e instanceof Dn||"BLOCK_FOLDED"===$e.type||"BLOCK_LITERAL"===$e.type:"object"===e($e))),Rt=ae.doc,cn=ae.indent,Lr=ae.stringify;ae=Object.assign({},ae,{implicitKey:!Vt,indent:cn+ae.indentStep});var zr=!1,An=Lr($e,ae,function(){return At=null},function(){return zr=!0});if(An=Sr(An,ae.indent,At),!Vt&&An.length>1024){if(Je)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");Vt=!0}if(ae.allNullValues&&!Je)return this.comment?(An=Sr(An,ae.indent,this.comment),de&&de()):zr&&!At&&xe&&xe(),ae.inFlow&&!Vt?An:"? ".concat(An);An=Vt?"? ".concat(An,"\n").concat(cn,":"):"".concat(An,":"),this.comment&&(An=Sr(An,ae.indent,this.comment),de&&de());var gr="",Mr=null;if(dt instanceof un){if(dt.spaceBefore&&(gr="\n"),dt.commentBefore){var Zn=dt.commentBefore.replace(/^/gm,"".concat(ae.indent,"#"));gr+="\n".concat(Zn)}Mr=dt.comment}else dt&&"object"===e(dt)&&(dt=Rt.schema.createNode(dt,!0));ae.implicitKey=!1,!Vt&&!this.comment&&dt instanceof mn&&(ae.indentAtStart=An.length+1),zr=!1,!We&&Be>=2&&!ae.inFlow&&!Vt&&dt instanceof Zt&&dt.type!==F_FLOW_SEQ&&!dt.tag&&!Rt.anchors.getName(dt)&&(ae.indent=ae.indent.substr(2));var Ti=Lr(dt,ae,function(){return Mr=null},function(){return zr=!0}),qi=" ";return gr||this.comment?qi="".concat(gr,"\n").concat(ae.indent):!Vt&&dt instanceof Dn?("["!==Ti[0]&&"{"!==Ti[0]||Ti.includes("\n"))&&(qi="\n".concat(ae.indent)):"\n"===Ti[0]&&(qi=""),zr&&!Mr&&xe&&xe(),Sr(An+qi+Ti,ae.indent,Mr)}}]),te}(un);S(Ge,"Type",{PAIR:"PAIR",MERGE_PAIR:"MERGE_PAIR"});var Dt=function ge(ue,te){if(ue instanceof it){var pe=te.get(ue.source);return pe.count*pe.aliasCount}if(ue instanceof Dn){var xe,ae=0,de=L(ue.items);try{for(de.s();!(xe=de.n()).done;){var Be=ge(xe.value,te);Be>ae&&(ae=Be)}}catch($e){de.e($e)}finally{de.f()}return ae}if(ue instanceof Ge){var We=ge(ue.key,te),Je=ge(ue.value,te);return Math.max(We,Je)}return 1},it=function(ge){fe(te,ge);var ue=V(te);function te(pe){var ae;return O(this,te),(ae=ue.call(this)).source=pe,ae.type="ALIAS",ae}return j(te,[{key:"tag",set:function(ae){throw new Error("Alias nodes cannot have tags")}},{key:"toJSON",value:function(ae,de){if(!de)return Sn(this.source,ae,de);var xe=de.anchors,Te=de.maxAliasCount,Be=xe.get(this.source);if(!Be||void 0===Be.res){var We="This should not happen: Alias anchor was not resolved?";throw this.cstNode?new rt(this.cstNode,We):new ReferenceError(We)}if(Te>=0&&(Be.count+=1,0===Be.aliasCount&&(Be.aliasCount=Dt(this.source,xe)),Be.count*Be.aliasCount>Te)){var Je="Excessive alias count indicates a resource exhaustion attack";throw this.cstNode?new rt(this.cstNode,Je):new ReferenceError(Je)}return Be.res}},{key:"toString",value:function(ae){return te.stringify(this,ae)}}],[{key:"stringify",value:function(ae,de){var xe=ae.range,Te=ae.source,Be=de.anchors,We=de.doc,Je=de.implicitKey,$e=de.inStringifyKey,dt=Object.keys(Be).find(function(It){return Be[It]===Te});if(!dt&&$e&&(dt=We.anchors.getName(Te)||We.anchors.newName()),dt)return"*".concat(dt).concat(Je?" ":"");var At=We.anchors.getName(Te)?"Alias node must be after source node":"Source node not found for alias node";throw new Error("".concat(At," [").concat(xe,"]"))}}]),te}(un);function Ye(ge,ue){var ae,te=ue instanceof mn?ue.value:ue,pe=L(ge);try{for(pe.s();!(ae=pe.n()).done;){var de=ae.value;if(de instanceof Ge&&(de.key===ue||de.key===te||de.key&&de.key.value===te))return de}}catch(xe){pe.e(xe)}finally{pe.f()}}S(it,"default",!0);var Ut=function(ge){fe(te,ge);var ue=V(te);function te(){return O(this,te),ue.apply(this,arguments)}return j(te,[{key:"add",value:function(ae,de){ae?ae instanceof Ge||(ae=new Ge(ae.key||ae,ae.value)):ae=new Ge(ae);var xe=Ye(this.items,ae.key),Te=this.schema&&this.schema.sortMapEntries;if(xe){if(!de)throw new Error("Key ".concat(ae.key," already set"));xe.value=ae.value}else if(Te){var Be=this.items.findIndex(function(We){return Te(ae,We)<0});-1===Be?this.items.push(ae):this.items.splice(Be,0,ae)}else this.items.push(ae)}},{key:"delete",value:function(ae){var de=Ye(this.items,ae);return!!de&&this.items.splice(this.items.indexOf(de),1).length>0}},{key:"get",value:function(ae,de){var xe=Ye(this.items,ae),Te=xe&&xe.value;return!de&&Te instanceof mn?Te.value:Te}},{key:"has",value:function(ae){return!!Ye(this.items,ae)}},{key:"set",value:function(ae,de){this.add(new Ge(ae,de),!0)}},{key:"toJSON",value:function(ae,de,xe){var Te=xe?new xe:de&&de.mapAsMap?new Map:{};de&&de.onCreate&&de.onCreate(Te);var We,Be=L(this.items);try{for(Be.s();!(We=Be.n()).done;)We.value.addToJSMap(de,Te)}catch($e){Be.e($e)}finally{Be.f()}return Te}},{key:"toString",value:function(ae,de,xe){if(!ae)return JSON.stringify(this);var Be,Te=L(this.items);try{for(Te.s();!(Be=Te.n()).done;){var We=Be.value;if(!(We instanceof Ge))throw new Error("Map items must all be pairs; found ".concat(JSON.stringify(We)," instead"))}}catch(Je){Te.e(Je)}finally{Te.f()}return P(he(te.prototype),"toString",this).call(this,ae,{blockItem:function($e){return $e.str},flowChars:{start:"{",end:"}"},isMap:!0,itemIndent:ae.indent||""},de,xe)}}]),te}(Dn),zn=function(ge){fe(te,ge);var ue=V(te);function te(pe){var ae;if(O(this,te),pe instanceof Ge){var de=pe.value;de instanceof Zt||((de=new Zt).items.push(pe.value),de.range=pe.value.range),(ae=ue.call(this,pe.key,de)).range=pe.range}else ae=ue.call(this,new mn("<<"),new Zt);return ae.type=Ge.Type.MERGE_PAIR,R(ae)}return j(te,[{key:"addToJSMap",value:function(ae,de){var Te,xe=L(this.value.items);try{for(xe.s();!(Te=xe.n()).done;){var Be=Te.value.source;if(!(Be instanceof Ut))throw new Error("Merge sources must be maps");var $e,Je=L(Be.toJSON(null,ae,Map));try{for(Je.s();!($e=Je.n()).done;){var dt=I($e.value,2),At=dt[0],It=dt[1];de instanceof Map?de.has(At)||de.set(At,It):de instanceof Set?de.add(At):Object.prototype.hasOwnProperty.call(de,At)||Object.defineProperty(de,At,{value:It,writable:!0,enumerable:!0,configurable:!0})}}catch(Vt){Je.e(Vt)}finally{Je.f()}}}catch(Vt){xe.e(Vt)}finally{xe.f()}return de}},{key:"toString",value:function(ae,de){var xe=this.value;if(xe.items.length>1)return P(he(te.prototype),"toString",this).call(this,ae,de);this.value=xe.items[0];var Te=P(he(te.prototype),"toString",this).call(this,ae,de);return this.value=xe,Te}}]),te}(Ge),De={defaultType:"BLOCK_LITERAL",lineWidth:76},_t={trueStr:"true",falseStr:"false"},cr={asBigInt:!1},_n={nullStr:"null"},yn={defaultType:"PLAIN",doubleQuoted:{jsonEncoding:!1,minMultiLineLength:40},fold:{lineWidth:80,minContentWidth:20}};function gn(ge,ue,te){var ae,pe=L(ue);try{for(pe.s();!(ae=pe.n()).done;){var de=ae.value,xe=de.format,Te=de.test,Be=de.resolve;if(Te){var We=ge.match(Te);if(We){var Je=Be.apply(null,We);return Je instanceof mn||(Je=new mn(Je)),xe&&(Je.format=xe),Je}}}}catch($e){pe.e($e)}finally{pe.f()}return te&&(ge=te(ge)),new mn(ge)}var qe="block",yt="quoted",we=function(ue,te){for(var pe=ue[te+1];" "===pe||"\t"===pe;){do{pe=ue[te+=1]}while(pe&&"\n"!==pe);pe=ue[te+1]}return te};function Pe(ge,ue,te,pe){var ae=pe.indentAtStart,de=pe.lineWidth,xe=void 0===de?80:de,Te=pe.minContentWidth,Be=void 0===Te?20:Te,We=pe.onFold,Je=pe.onOverflow;if(!xe||xe<0)return ge;var $e=Math.max(1+Be,1+xe-ue.length);if(ge.length<=$e)return ge;var dt=[],At={},It=xe-ue.length;"number"==typeof ae&&(ae>xe-Math.max(2,Be)?dt.push(0):It=xe-ae);var zr,Vt=void 0,en=void 0,Rt=!1,cn=-1,En=-1,Lr=-1;for(te===qe&&-1!==(cn=we(ge,cn))&&(It=cn+$e);zr=ge[cn+=1];){if(te===yt&&"\\"===zr){switch(En=cn,ge[cn+1]){case"x":cn+=3;break;case"u":cn+=5;break;case"U":cn+=9;break;default:cn+=1}Lr=cn}if("\n"===zr)te===qe&&(cn=we(ge,cn)),It=cn+$e,Vt=void 0;else{if(" "===zr&&en&&" "!==en&&"\n"!==en&&"\t"!==en){var An=ge[cn+1];An&&" "!==An&&"\n"!==An&&"\t"!==An&&(Vt=cn)}if(cn>=It)if(Vt)dt.push(Vt),It=Vt+$e,Vt=void 0;else if(te===yt){for(;" "===en||"\t"===en;)en=zr,zr=ge[cn+=1],Rt=!0;var gr=cn>Lr+1?cn-2:En-1;if(At[gr])return ge;dt.push(gr),At[gr]=!0,It=gr+$e,Vt=void 0}else Rt=!0}en=zr}if(Rt&&Je&&Je(),0===dt.length)return ge;We&&We();for(var Mr=ge.slice(0,dt[0]),Zn=0;Zn<dt.length;++Zn){var Ti=dt[Zn],qi=dt[Zn+1]||ge.length;0===Ti?Mr="\n".concat(ue).concat(ge.slice(0,qi)):(te===yt&&At[Ti]&&(Mr+="".concat(ge[Ti],"\\")),Mr+="\n".concat(ue).concat(ge.slice(Ti+1,qi)))}return Mr}var Qe=function(ue){var te=ue.indentAtStart;return te?Object.assign({indentAtStart:te},yn.fold):yn.fold},Ie=function(ue){return/^(%|---|\.\.\.)/m.test(ue)};function tt(ge,ue){var te=ue.implicitKey,pe=yn.doubleQuoted,ae=pe.jsonEncoding,de=pe.minMultiLineLength,xe=JSON.stringify(ge);if(ae)return xe;for(var Te=ue.indent||(Ie(ge)?"  ":""),Be="",We=0,Je=0,$e=xe[Je];$e;$e=xe[++Je])if(" "===$e&&"\\"===xe[Je+1]&&"n"===xe[Je+2]&&(Be+=xe.slice(We,Je)+"\\ ",We=Je+=1,$e="\\"),"\\"===$e)switch(xe[Je+1]){case"u":Be+=xe.slice(We,Je);var dt=xe.substr(Je+2,4);switch(dt){case"0000":Be+="\\0";break;case"0007":Be+="\\a";break;case"000b":Be+="\\v";break;case"001b":Be+="\\e";break;case"0085":Be+="\\N";break;case"00a0":Be+="\\_";break;case"2028":Be+="\\L";break;case"2029":Be+="\\P";break;default:"00"===dt.substr(0,2)?Be+="\\x"+dt.substr(2):Be+=xe.substr(Je,6)}We=(Je+=5)+1;break;case"n":if(te||'"'===xe[Je+2]||xe.length<de)Je+=1;else{for(Be+=xe.slice(We,Je)+"\n\n";"\\"===xe[Je+2]&&"n"===xe[Je+3]&&'"'!==xe[Je+4];)Be+="\n",Je+=2;Be+=Te," "===xe[Je+2]&&(Be+="\\"),We=(Je+=1)+1}break;default:Je+=1}return Be=We?Be+xe.slice(We):xe,te?Be:Pe(Be,Te,yt,Qe(ue))}function Mt(ge,ue){if(ue.implicitKey){if(/\n/.test(ge))return tt(ge,ue)}else if(/[ \t]\n|\n[ \t]/.test(ge))return tt(ge,ue);var te=ue.indent||(Ie(ge)?"  ":""),pe="'"+ge.replace(/'/g,"''").replace(/\n+/g,"$&\n".concat(te))+"'";return ue.implicitKey?pe:Pe(pe,te,"flow",Qe(ue))}function ln(ge,ue,te,pe){var ae=ge.comment,de=ge.type,xe=ge.value;if(/\n[\t ]+$/.test(xe)||/^\s*$/.test(xe))return tt(xe,ue);var Te=ue.indent||(ue.forceBlockIndent||Ie(xe)?"  ":""),Be=Te?"2":"1",We="BLOCK_FOLDED"!==de&&("BLOCK_LITERAL"===de||!function Ve(ge,ue,te){if(!ue||ue<0)return!1;var pe=ue-te,ae=ge.length;if(ae<=pe)return!1;for(var de=0,xe=0;de<ae;++de)if("\n"===ge[de]){if(de-xe>pe)return!0;if(ae-(xe=de+1)<=pe)return!1}return!0}(xe,yn.fold.lineWidth,Te.length)),Je=We?"|":">";if(!xe)return Je+"\n";var $e="",dt="";if(xe=xe.replace(/[\n\t ]*$/,function(It){var Vt=It.indexOf("\n");return-1===Vt?Je+="-":(xe===It||Vt!==It.length-1)&&(Je+="+",pe&&pe()),dt=It.replace(/\n$/,""),""}).replace(/^[\n ]*/,function(It){-1!==It.indexOf(" ")&&(Je+=Be);var Vt=It.match(/ +$/);return Vt?($e=It.slice(0,-Vt[0].length),Vt[0]):($e=It,"")}),dt&&(dt=dt.replace(/\n+(?!\n|$)/g,"$&".concat(Te))),$e&&($e=$e.replace(/\n+/g,"$&".concat(Te))),ae&&(Je+=" #"+ae.replace(/ ?[\r\n]+/g," "),te&&te()),!xe)return"".concat(Je).concat(Be,"\n").concat(Te).concat(dt);if(We)return xe=xe.replace(/\n+/g,"$&".concat(Te)),"".concat(Je,"\n").concat(Te).concat($e).concat(xe).concat(dt);xe=xe.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,"$&".concat(Te));var At=Pe("".concat($e).concat(xe).concat(dt),Te,qe,yn.fold);return"".concat(Je,"\n").concat(Te).concat(At)}function jn(ge,ue,te,pe){var ae=yn.defaultType,de=ue.implicitKey,xe=ue.inFlow,Be=ge.type,We=ge.value;"string"!=typeof We&&(We=String(We),ge=Object.assign({},ge,{value:We}));var Je=function(At){switch(At){case"BLOCK_FOLDED":case"BLOCK_LITERAL":return ln(ge,ue,te,pe);case F_QUOTE_DOUBLE:return tt(We,ue);case F_QUOTE_SINGLE:return Mt(We,ue);case"PLAIN":return function Ft(ge,ue,te,pe){var ae=ge.comment,de=ge.type,xe=ge.value,Te=ue.actualString,Be=ue.implicitKey,We=ue.indent,Je=ue.inFlow;if(Be&&/[\n[\]{},]/.test(xe)||Je&&/[[\]{},]/.test(xe))return tt(xe,ue);if(!xe||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(xe))return Be||Je||-1===xe.indexOf("\n")?-1!==xe.indexOf('"')&&-1===xe.indexOf("'")?Mt(xe,ue):tt(xe,ue):ln(ge,ue,te,pe);if(!Be&&!Je&&"PLAIN"!==de&&-1!==xe.indexOf("\n"))return ln(ge,ue,te,pe);if(""===We&&Ie(xe))return ue.forceBlockIndent=!0,ln(ge,ue,te,pe);var $e=xe.replace(/\n+/g,"$&\n".concat(We));if(Te){var dt=ue.doc.schema.tags;if("string"!=typeof gn($e,dt,dt.scalarFallback).value)return tt(xe,ue)}var It=Be?$e:Pe($e,We,"flow",Qe(ue));return!ae||Je||-1===It.indexOf("\n")&&-1===ae.indexOf("\n")?It:(te&&te(),function tn(ge,ue,te){if(!te)return ge;var pe=te.replace(/[\s\S]^/gm,"$&".concat(ue,"#"));return"#".concat(pe,"\n").concat(ue).concat(ge)}(It,We,ae))}(ge,ue,te,pe);default:return null}};(Be!==F_QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f]/.test(We)||(de||xe)&&("BLOCK_FOLDED"===Be||"BLOCK_LITERAL"===Be))&&(Be=F_QUOTE_DOUBLE);var $e=Je(Be);if(null===$e&&null===($e=Je(ae)))throw new Error("Unsupported default string type ".concat(ae));return $e}function Nr(ge){var ue=ge.format,te=ge.minFractionDigits,pe=ge.tag,ae=ge.value;if("bigint"==typeof ae)return String(ae);if(!isFinite(ae))return isNaN(ae)?".nan":ae<0?"-.inf":".inf";var de=JSON.stringify(ae);if(!ue&&te&&(!pe||"tag:yaml.org,2002:float"===pe)&&/^\d/.test(de)){var xe=de.indexOf(".");xe<0&&(xe=de.length,de+=".");for(var Te=te-(de.length-xe-1);Te-- >0;)de+="0"}return de}function ti(ge,ue){var te,pe;switch(ue.type){case F_FLOW_MAP:te="}",pe="flow map";break;case F_FLOW_SEQ:te="]",pe="flow sequence";break;default:return void ge.push(new ct(ue,"Not a flow collection!?"))}for(var ae,de=ue.items.length-1;de>=0;--de){var xe=ue.items[de];if(!xe||"COMMENT"!==xe.type){ae=xe;break}}if(ae&&ae.char!==te){var Be,Te="Expected ".concat(pe," to end with ").concat(te);"number"==typeof ae.offset?(Be=new ct(ue,Te)).offset=ae.offset+1:(Be=new ct(ae,Te),ae.range&&ae.range.end&&(Be.offset=ae.range.end-ae.range.start)),ge.push(Be)}}function ni(ge,ue){var te=ue.context.src[ue.range.start-1];"\n"!==te&&"\t"!==te&&" "!==te&&ge.push(new ct(ue,"Comments must be separated from other tokens by white space characters"))}function Cr(ge,ue){var te=String(ue),pe=te.substr(0,8)+"..."+te.substr(-8);return new ct(ge,'The "'.concat(pe,'" key is too long'))}function $t(ge,ue){var pe,te=L(ue);try{for(te.s();!(pe=te.n()).done;){var ae=pe.value,de=ae.afterKey,Te=ae.comment,Be=ge.items[ae.before];Be?(de&&Be.value&&(Be=Be.value),void 0===Te?(de||!Be.commentBefore)&&(Be.spaceBefore=!0):Be.commentBefore?Be.commentBefore+="\n"+Te:Be.commentBefore=Te):void 0!==Te&&(ge.comment?ge.comment+="\n"+Te:ge.comment=Te)}}catch(We){te.e(We)}finally{te.f()}}function ri(ge,ue){var te=ue.strValue;return te?"string"==typeof te?te:(te.errors.forEach(function(pe){pe.source||(pe.source=ue),ge.errors.push(pe)}),te.str):""}function ar(ge,ue,te){var xe,pe=ge.schema.tags,ae=[],de=L(pe);try{for(de.s();!(xe=de.n()).done;){var Te=xe.value;if(Te.tag===te){if(!Te.test){var Be=Te.resolve(ge,ue);return Be instanceof Dn?Be:new mn(Be)}ae.push(Te)}}}catch(Je){de.e(Je)}finally{de.f()}var We=ri(ge,ue);return"string"==typeof We&&ae.length>0?gn(We,ae,pe.scalarFallback):null}function Kt(ge,ue){if(!ue)return null;ue.error&&ge.errors.push(ue.error);var te=function Ba(ge,ue){var Te,te={before:[],after:[]},pe=!1,ae=!1,de=function(ue){if(!ue)return!1;var te=ue.type;return"MAP_KEY"===te||"MAP_VALUE"===te||"SEQ_ITEM"===te}(ue.context.parent)?ue.context.parent.props.concat(ue.props):ue.props,xe=L(de);try{for(xe.s();!(Te=xe.n()).done;){var Be=Te.value,We=Be.start,Je=Be.end;switch(ue.context.src[We]){case"#":ue.commentHasRequiredWhitespace(We)||ge.push(new ct(ue,"Comments must be separated from other tokens by white space characters"));var dt=ue.header,At=ue.valueRange;(At&&(We>At.start||dt&&We>dt.start)?te.after:te.before).push(ue.context.src.slice(We+1,Je));break;case"&":pe&&ge.push(new ct(ue,"A node can have at most one anchor")),pe=!0;break;case"!":ae&&ge.push(new ct(ue,"A node can have at most one tag")),ae=!0}}}catch(Rt){xe.e(Rt)}finally{xe.f()}return{comments:te,hasAnchor:pe,hasTag:ae}}(ge.errors,ue),pe=te.comments,ae=te.hasAnchor,de=te.hasTag;if(ae){var xe=ge.anchors,Te=ue.anchor,Be=xe.getNode(Te);Be&&(xe.map[xe.newName(Te)]=Be),xe.map[Te]=ue}"ALIAS"===ue.type&&(ae||de)&&ge.errors.push(new ct(ue,"An alias node must not specify any properties"));var Je=function Ds(ge,ue){var te=ge.anchors,pe=ge.errors,ae=ge.schema;if("ALIAS"===ue.type){var de=ue.rawValue,xe=te.getNode(de);if(!xe){var Te="Aliased anchor not found: ".concat(de);return pe.push(new rt(ue,Te)),null}var Be=new it(xe);return te._cstAliases.push(Be),Be}var We=function Na(ge,ue){var te=ue.tag,pe=ue.type,ae=!1;if(te){var de=te.handle,xe=te.suffix,Te=te.verbatim;if(Te){if("!"!==Te&&"!!"!==Te)return Te;var Be="Verbatim tags aren't resolved, so ".concat(Te," is invalid.");ge.errors.push(new ct(ue,Be))}else if("!"!==de||xe)try{return function Ra(ge,ue){var te=ue.tag,pe=te.handle,ae=te.suffix,de=ge.tagPrefixes.find(function(Be){return Be.handle===pe});if(!de){var xe=ge.getDefaults().tagPrefixes;if(xe&&(de=xe.find(function(Be){return Be.handle===pe})),!de)throw new ct(ue,"The ".concat(pe," tag handle is non-default and was not declared."))}if(!ae)throw new ct(ue,"The ".concat(pe," tag has no suffix."));if("!"===pe&&"1.0"===(ge.version||ge.options.version)){if("^"===ae[0])return ge.warnings.push(new pt(ue,"YAML 1.0 ^ tag expansion is not supported")),ae;if(/[:/]/.test(ae)){var Te=ae.match(/^([a-z0-9-]+)\/(.*)/i);return Te?"tag:".concat(Te[1],".yaml.org,2002:").concat(Te[2]):"tag:".concat(ae)}}return de.prefix+decodeURIComponent(ae)}(ge,ue)}catch(We){ge.errors.push(We)}else ae=!0}switch(pe){case"BLOCK_FOLDED":case"BLOCK_LITERAL":case F_QUOTE_DOUBLE:case F_QUOTE_SINGLE:return oe.STR;case F_FLOW_MAP:case"MAP":return oe.MAP;case F_FLOW_SEQ:case"SEQ":return oe.SEQ;case"PLAIN":return ae?oe.STR:null;default:return null}}(ge,ue);if(We)return function Fa(ge,ue,te){try{var pe=ar(ge,ue,te);if(pe)return te&&ue.tag&&(pe.tag=te),pe}catch(Be){return Be.source||(Be.source=ue),ge.errors.push(Be),null}try{var ae=function Ir(ge){switch(ge.type){case F_FLOW_MAP:case"MAP":return oe.MAP;case F_FLOW_SEQ:case"SEQ":return oe.SEQ;default:return oe.STR}}(ue);if(!ae)throw new Error("The tag ".concat(te," is unavailable"));var de="The tag ".concat(te," is unavailable, falling back to ").concat(ae);ge.warnings.push(new pt(ue,de));var xe=ar(ge,ue,ae);return xe.tag=te,xe}catch(Be){var Te=new rt(ue,Be.message);return Te.stack=Be.stack,ge.errors.push(Te),null}}(ge,ue,We);if("PLAIN"!==ue.type){var Je="Failed to resolve ".concat(ue.type," node here");return pe.push(new Lt(ue,Je)),null}try{return gn(ri(ge,ue),ae.tags,ae.tags.scalarFallback)}catch(dt){return dt.source||(dt.source=ue),pe.push(dt),null}}(ge,ue);if(Je){Je.range=[ue.range.start,ue.range.end],ge.options.keepCstNodes&&(Je.cstNode=ue),ge.options.keepNodeTypes&&(Je.type=ue.type);var $e=pe.before.join("\n");$e&&(Je.commentBefore=Je.commentBefore?"".concat(Je.commentBefore,"\n").concat($e):$e);var dt=pe.after.join("\n");dt&&(Je.comment=Je.comment?"".concat(Je.comment,"\n").concat(dt):dt)}return ue.resolved=Je}function Za(ge,ue){if("MAP"!==ue.type&&ue.type!==F_FLOW_MAP){var te="A ".concat(ue.type," node cannot be resolved as a mapping");return ge.errors.push(new Lt(ue,te)),null}var pe=ue.type===F_FLOW_MAP?function kr(ge,ue){for(var te=[],pe=[],ae=void 0,de=!1,xe="{",Te=0;Te<ue.items.length;++Te){var Be=ue.items[Te];if("string"==typeof Be.char){var We=Be.char,Je=Be.offset;if("?"===We&&void 0===ae&&!de){de=!0,xe=":";continue}if(":"===We){if(void 0===ae&&(ae=null),":"===xe){xe=",";continue}}else if(de&&(void 0===ae&&","!==We&&(ae=null),de=!1),void 0!==ae&&(pe.push(new Ge(ae)),ae=void 0,","===We)){xe=":";continue}if("}"===We){if(Te===ue.items.length-1)continue}else if(We===xe){xe=":";continue}var $e="Flow map contains an unexpected ".concat(We),dt=new Lt(ue,$e);dt.offset=Je,ge.errors.push(dt)}else"BLANK_LINE"===Be.type?te.push({afterKey:!!ae,before:pe.length}):"COMMENT"===Be.type?(ni(ge.errors,Be),te.push({afterKey:!!ae,before:pe.length,comment:Be.comment})):void 0===ae?(","===xe&&ge.errors.push(new ct(Be,"Separator , missing in flow map")),ae=Kt(ge,Be)):(","!==xe&&ge.errors.push(new ct(Be,"Indicator : missing in flow map entry")),pe.push(new Ge(ae,Kt(ge,Be))),ae=void 0,de=!1)}return ti(ge.errors,ue),void 0!==ae&&pe.push(new Ge(ae)),{comments:te,items:pe}}(ge,ue):function qt(ge,ue){for(var te=[],pe=[],ae=void 0,de=null,xe=0;xe<ue.items.length;++xe){var Te=ue.items[xe];switch(Te.type){case"BLANK_LINE":te.push({afterKey:!!ae,before:pe.length});break;case"COMMENT":te.push({afterKey:!!ae,before:pe.length,comment:Te.comment});break;case"MAP_KEY":void 0!==ae&&pe.push(new Ge(ae)),Te.error&&ge.errors.push(Te.error),ae=Kt(ge,Te.node),de=null;break;case"MAP_VALUE":void 0===ae&&(ae=null),Te.error&&ge.errors.push(Te.error),Te.context.atLineStart||!Te.node||"MAP"!==Te.node.type||Te.node.context.atLineStart||ge.errors.push(new ct(Te.node,"Nested mappings are not allowed in compact mappings"));var We=Te.node;if(!We&&Te.props.length>0){(We=new gt("PLAIN",[])).context={parent:Te,src:Te.context.src};var Je=Te.range.start+1;if(We.range={start:Je,end:Je},We.valueRange={start:Je,end:Je},"number"==typeof Te.range.origStart){var $e=Te.range.origStart+1;We.range.origStart=We.range.origEnd=$e,We.valueRange.origStart=We.valueRange.origEnd=$e}}var dt=new Ge(ae,Kt(ge,We));Va(Te,dt),pe.push(dt),ae&&"number"==typeof de&&Te.range.start>de+1024&&ge.errors.push(Cr(ue,ae)),ae=void 0,de=null;break;default:void 0!==ae&&pe.push(new Ge(ae)),ae=Kt(ge,Te),de=Te.range.start,Te.error&&ge.errors.push(Te.error);e:for(var At=xe+1;;++At){var It=ue.items[At];switch(It&&It.type){case"BLANK_LINE":case"COMMENT":continue e;case"MAP_VALUE":break e;default:ge.errors.push(new ct(Te,"Implicit map keys need to be followed by map values"));break e}}Te.valueRangeContainsNewline&&ge.errors.push(new ct(Te,"Implicit map keys need to be on a single line"))}}return void 0!==ae&&pe.push(new Ge(ae)),{comments:te,items:pe}}(ge,ue),ae=pe.comments,de=pe.items,xe=new Ut;xe.items=de,$t(xe,ae);for(var Te=!1,Be=0;Be<de.length;++Be){var We=de[Be].key;if(We instanceof Dn&&(Te=!0),ge.schema.merge&&We&&"<<"===We.value){de[Be]=new zn(de[Be]);var $e=null;de[Be].value.items.some(function(en){if(en instanceof it){var Rt=en.source.type;return"MAP"!==Rt&&Rt!==F_FLOW_MAP&&($e="Merge nodes aliases can only point to maps")}return $e="Merge nodes can only have Alias nodes as values"}),$e&&ge.errors.push(new ct(ue,$e))}else for(var dt=Be+1;dt<de.length;++dt){var At=de[dt].key;if(We===At||We&&At&&Object.prototype.hasOwnProperty.call(We,"value")&&We.value===At.value){var It='Map keys must be unique; "'.concat(We,'" is repeated');ge.errors.push(new ct(ue,It));break}}}return Te&&!ge.options.mapAsMap&&ge.warnings.push(new pt(ue,"Keys with collection values will be stringified as YAML due to JS Object restrictions. Use mapAsMap: true to avoid this.")),ue.resolved=xe,xe}function Va(ge,ue){if(function(ue){var te=ue.context,ae=te.node,de=te.src,xe=ue.props;if(0===xe.length)return!1;var Te=xe[0].start;if(ae&&Te>ae.valueRange.start||"#"!==de[Te])return!1;for(var Be=te.lineStart;Be<Te;++Be)if("\n"===de[Be])return!1;return!0}(ge)){var te=ge.getPropValue(0,"#",!0),pe=!1,ae=ue.value.commentBefore;if(ae&&ae.startsWith(te))ue.value.commentBefore=ae.substr(te.length+1),pe=!0;else{var de=ue.value.comment;!ge.node&&de&&de.startsWith(te)&&(ue.value.comment=de.substr(te.length+1),pe=!0)}pe&&(ue.comment=te)}}function Ei(ge,ue){if("SEQ"!==ue.type&&ue.type!==F_FLOW_SEQ){var te="A ".concat(ue.type," node cannot be resolved as a sequence");return ge.errors.push(new Lt(ue,te)),null}var pe=ue.type===F_FLOW_SEQ?function or(ge,ue){for(var te=[],pe=[],ae=!1,de=void 0,xe=null,Te="[",Be=null,We=0;We<ue.items.length;++We){var Je=ue.items[We];if("string"==typeof Je.char){var $e=Je.char,dt=Je.offset;if(":"!==$e&&(ae||void 0!==de)&&(ae&&void 0===de&&(de=Te?pe.pop():null),pe.push(new Ge(de)),ae=!1,de=void 0,xe=null),$e===Te)Te=null;else if(Te||"?"!==$e){if("["!==Te&&":"===$e&&void 0===de){if(","===Te){if((de=pe.pop())instanceof Ge){var It=new ct(ue,"Chaining flow sequence pairs is invalid");It.offset=dt,ge.errors.push(It)}if(!ae&&"number"==typeof xe){var Vt=Je.range?Je.range.start:Je.offset;Vt>xe+1024&&ge.errors.push(Cr(ue,de));for(var en=Be.context.src,Rt=xe;Rt<Vt;++Rt)if("\n"===en[Rt]){ge.errors.push(new ct(Be,"Implicit keys of flow sequence pairs need to be on a single line"));break}}}else de=null;xe=null,ae=!1,Te=null}else if("["===Te||"]"!==$e||We<ue.items.length-1){var En="Flow sequence contains an unexpected ".concat($e),Lr=new Lt(ue,En);Lr.offset=dt,ge.errors.push(Lr)}}else ae=!0}else if("BLANK_LINE"===Je.type)te.push({before:pe.length});else if("COMMENT"===Je.type)ni(ge.errors,Je),te.push({comment:Je.comment,before:pe.length});else{if(Te){var zr="Expected a ".concat(Te," in flow sequence");ge.errors.push(new ct(Je,zr))}var An=Kt(ge,Je);void 0===de?(pe.push(An),Be=Je):(pe.push(new Ge(de,An)),de=void 0),xe=Je.range.start,Te=","}}return ti(ge.errors,ue),void 0!==de&&pe.push(new Ge(de)),{comments:te,items:pe}}(ge,ue):function es(ge,ue){for(var te=[],pe=[],ae=0;ae<ue.items.length;++ae){var de=ue.items[ae];switch(de.type){case"BLANK_LINE":te.push({before:pe.length});break;case"COMMENT":te.push({comment:de.comment,before:pe.length});break;case"SEQ_ITEM":de.error&&ge.errors.push(de.error),pe.push(Kt(ge,de.node)),de.hasProps&&ge.errors.push(new ct(de,"Sequence items cannot have tags or anchors before the - indicator"));break;default:de.error&&ge.errors.push(de.error),ge.errors.push(new Lt(de,"Unexpected ".concat(de.type," node in sequence")))}}return{comments:te,items:pe}}(ge,ue),ae=pe.comments,de=pe.items,xe=new Zt;return xe.items=de,$t(xe,ae),!ge.options.mapAsMap&&de.some(function(Be){return Be instanceof Ge&&Be.key instanceof Dn})&&ge.warnings.push(new pt(ue,"Keys with collection values will be stringified as YAML due to JS Object restrictions. Use mapAsMap: true to avoid this.")),ue.resolved=xe,xe}var oo={identify:function(ue){return ue instanceof Uint8Array},default:!1,tag:"tag:yaml.org,2002:binary",resolve:function(ue,te){var pe=ri(ue,te);if("function"==typeof Buffer)return Buffer.from(pe,"base64");if("function"==typeof atob){for(var ae=atob(pe.replace(/[\n\r]/g,"")),de=new Uint8Array(ae.length),xe=0;xe<ae.length;++xe)de[xe]=ae.charCodeAt(xe);return de}return ue.errors.push(new rt(te,"This environment does not support reading binary tags; either Buffer or atob is required")),null},options:De,stringify:function(ue,te,pe,ae){var Be,de=ue.comment,xe=ue.type,Te=ue.value;if("function"==typeof Buffer)Be=Te instanceof Buffer?Te.toString("base64"):Buffer.from(Te.buffer).toString("base64");else{if("function"!=typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");for(var We="",Je=0;Je<Te.length;++Je)We+=String.fromCharCode(Te[Je]);Be=btoa(We)}if(xe||(xe=De.defaultType),xe===F_QUOTE_DOUBLE)Te=Be;else{for(var $e=De.lineWidth,dt=Math.ceil(Be.length/$e),At=new Array(dt),It=0,Vt=0;It<dt;++It,Vt+=$e)At[It]=Be.substr(Vt,$e);Te=At.join("BLOCK_LITERAL"===xe?"\n":" ")}return jn({comment:de,type:xe,value:Te},te,pe,ae)}};function Ha(ge,ue){for(var te=Ei(ge,ue),pe=0;pe<te.items.length;++pe){var ae=te.items[pe];if(!(ae instanceof Ge)){if(ae instanceof Ut){if(ae.items.length>1)throw new ct(ue,"Each pair must have its own sequence indicator");var xe=ae.items[0]||new Ge;ae.commentBefore&&(xe.commentBefore=xe.commentBefore?"".concat(ae.commentBefore,"\n").concat(xe.commentBefore):ae.commentBefore),ae.comment&&(xe.comment=xe.comment?"".concat(ae.comment,"\n").concat(xe.comment):ae.comment),ae=xe}te.items[pe]=ae instanceof Ge?ae:new Ge(ae)}}return te}function As(ge,ue,te){var pe=new Zt(ge);pe.tag="tag:yaml.org,2002:pairs";var de,ae=L(ue);try{for(ae.s();!(de=ae.n()).done;){var xe=de.value,Te=void 0,Be=void 0;if(Array.isArray(xe)){if(2!==xe.length)throw new TypeError("Expected [key, value] tuple: ".concat(xe));Te=xe[0],Be=xe[1]}else if(xe&&xe instanceof Object){var We=Object.keys(xe);if(1!==We.length)throw new TypeError("Expected { key: value } tuple: ".concat(xe));Be=xe[Te=We[0]]}else Te=xe;var Je=ge.createPair(Te,Be,te);pe.items.push(Je)}}catch($e){ae.e($e)}finally{ae.f()}return pe}var uu={default:!1,tag:"tag:yaml.org,2002:pairs",resolve:Ha,createNode:As},ua=function(ge){fe(te,ge);var ue=V(te);function te(){var pe;return O(this,te),S(re(pe=ue.call(this)),"add",Ut.prototype.add.bind(re(pe))),S(re(pe),"delete",Ut.prototype.delete.bind(re(pe))),S(re(pe),"get",Ut.prototype.get.bind(re(pe))),S(re(pe),"has",Ut.prototype.has.bind(re(pe))),S(re(pe),"set",Ut.prototype.set.bind(re(pe))),pe.tag=te.tag,pe}return j(te,[{key:"toJSON",value:function(ae,de){var xe=new Map;de&&de.onCreate&&de.onCreate(xe);var Be,Te=L(this.items);try{for(Te.s();!(Be=Te.n()).done;){var We=Be.value,Je=void 0,$e=void 0;if(We instanceof Ge?(Je=Sn(We.key,"",de),$e=Sn(We.value,Je,de)):Je=Sn(We,"",de),xe.has(Je))throw new Error("Ordered maps must not include duplicate keys");xe.set(Je,$e)}}catch(dt){Te.e(dt)}finally{Te.f()}return xe}}]),te}(Zt);S(ua,"tag","tag:yaml.org,2002:omap");var ts={identify:function(ue){return ue instanceof Map},nodeClass:ua,default:!1,tag:"tag:yaml.org,2002:omap",resolve:function In(ge,ue){var de,te=Ha(ge,ue),pe=[],ae=L(te.items);try{for(ae.s();!(de=ae.n()).done;){var xe=de.value.key;if(xe instanceof mn){if(pe.includes(xe.value))throw new ct(ue,"Ordered maps must not include duplicate keys");pe.push(xe.value)}}}catch(Be){ae.e(Be)}finally{ae.f()}return Object.assign(new ua,te)},createNode:function pl(ge,ue,te){var pe=As(ge,ue,te),ae=new ua;return ae.items=pe.items,ae}},ns=function(ge){fe(te,ge);var ue=V(te);function te(){var pe;return O(this,te),(pe=ue.call(this)).tag=te.tag,pe}return j(te,[{key:"add",value:function(ae){var de=ae instanceof Ge?ae:new Ge(ae);Ye(this.items,de.key)||this.items.push(de)}},{key:"get",value:function(ae,de){var xe=Ye(this.items,ae);return!de&&xe instanceof Ge?xe.key instanceof mn?xe.key.value:xe.key:xe}},{key:"set",value:function(ae,de){if("boolean"!=typeof de)throw new Error("Expected boolean value for set(key, value) in a YAML set, not ".concat(e(de)));var xe=Ye(this.items,ae);xe&&!de?this.items.splice(this.items.indexOf(xe),1):!xe&&de&&this.items.push(new Ge(ae))}},{key:"toJSON",value:function(ae,de){return P(he(te.prototype),"toJSON",this).call(this,ae,de,Set)}},{key:"toString",value:function(ae,de,xe){if(!ae)return JSON.stringify(this);if(this.hasAllNullValues())return P(he(te.prototype),"toString",this).call(this,ae,de,xe);throw new Error("Set items must all have null values")}}]),te}(Ut);S(ns,"tag","tag:yaml.org,2002:set");var so={identify:function(ue){return ue instanceof Set},nodeClass:ns,default:!1,tag:"tag:yaml.org,2002:set",resolve:function Qi(ge,ue){var te=Za(ge,ue);if(!te.hasAllNullValues())throw new ct(ue,"Set items must all have null values");return Object.assign(new ns,te)},createNode:function Ri(ge,ue,te){var de,pe=new ns,ae=L(ue);try{for(ae.s();!(de=ae.n()).done;)pe.items.push(ge.createPair(de.value,null,te))}catch(Te){ae.e(Te)}finally{ae.f()}return pe}},Es=function(ue,te){var pe=te.split(":").reduce(function(ae,de){return 60*ae+Number(de)},0);return"-"===ue?-pe:pe},Ms=function(ue){var te=ue.value;if(isNaN(te)||!isFinite(te))return Nr(te);var pe="";te<0&&(pe="-",te=Math.abs(te));var ae=[te%60];return te<60?ae.unshift(0):(te=Math.round((te-ae[0])/60),ae.unshift(te%60),te>=60&&(te=Math.round((te-ae[0])/60),ae.unshift(te))),pe+ae.map(function(de){return de<10?"0"+String(de):String(de)}).join(":").replace(/000000\d*$/,"")},Ca={identify:function(ue){return"number"==typeof ue},default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^([-+]?)([0-9][0-9_]*(?::[0-5]?[0-9])+)$/,resolve:function(ue,te,pe){return Es(te,pe.replace(/_/g,""))},stringify:Ms},gl={identify:function(ue){return"number"==typeof ue},default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^([-+]?)([0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*)$/,resolve:function(ue,te,pe){return Es(te,pe.replace(/_/g,""))},stringify:Ms},vl={identify:function(ue){return ue instanceof Date},default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^(?:([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?)$"),resolve:function(ue,te,pe,ae,de,xe,Te,Be,We){Be&&(Be=(Be+"00").substr(1,3));var Je=Date.UTC(te,pe-1,ae,de||0,xe||0,Te||0,Be||0);if(We&&"Z"!==We){var $e=Es(We[0],We.slice(1));Math.abs($e)<30&&($e*=60),Je-=6e4*$e}return new Date(Je)},stringify:function(ue){return ue.value.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")}};function Os(ge){var ue="undefined"!=typeof process&&process.env||{};return ge?"undefined"!=typeof YAML_SILENCE_DEPRECATION_WARNINGS?!YAML_SILENCE_DEPRECATION_WARNINGS:!ue.YAML_SILENCE_DEPRECATION_WARNINGS:"undefined"!=typeof YAML_SILENCE_WARNINGS?!YAML_SILENCE_WARNINGS:!ue.YAML_SILENCE_WARNINGS}function fi(ge,ue){if(Os(!1)){var te="undefined"!=typeof process&&process.emitWarning;te?te(ge,ue):console.warn(ue?"".concat(ue,": ").concat(ge):ge)}}var sr={},et={createNode:function Gr(ge,ue,te){var pe=new Ut(ge);if(ue instanceof Map){var de,ae=L(ue);try{for(ae.s();!(de=ae.n()).done;){var xe=I(de.value,2);pe.items.push(ge.createPair(xe[0],xe[1],te))}}catch(dt){ae.e(dt)}finally{ae.f()}}else if(ue&&"object"===e(ue))for(var We=0,Je=Object.keys(ue);We<Je.length;We++){var $e=Je[We];pe.items.push(ge.createPair($e,ue[$e],te))}return"function"==typeof ge.sortMapEntries&&pe.items.sort(ge.sortMapEntries),pe},default:!0,nodeClass:Ut,tag:"tag:yaml.org,2002:map",resolve:Za},Fr={createNode:function xn(ge,ue,te){var pe=new Zt(ge);if(ue&&ue[Symbol.iterator]){var de,ae=L(ue);try{for(ae.s();!(de=ae.n()).done;){var Te=ge.createNode(de.value,te.wrapScalars,null,te);pe.items.push(Te)}}catch(Be){ae.e(Be)}finally{ae.f()}}return pe},default:!0,nodeClass:Zt,tag:"tag:yaml.org,2002:seq",resolve:Ei},Br=[et,Fr,{identify:function(ue){return"string"==typeof ue},default:!0,tag:"tag:yaml.org,2002:str",resolve:ri,stringify:function(ue,te,pe,ae){return jn(ue,te=Object.assign({actualString:!0},te),pe,ae)},options:yn}],xa=function(ue){return"bigint"==typeof ue||Number.isInteger(ue)},Wa=function(ue,te,pe){return cr.asBigInt?BigInt(ue):parseInt(te,pe)};function Mi(ge,ue,te){var pe=ge.value;return xa(pe)&&pe>=0?te+pe.toString(ue):Nr(ge)}var Ta={identify:function(ue){return null==ue},createNode:function(ue,te,pe){return pe.wrapScalars?new mn(null):null},default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:function(){return null},options:_n,stringify:function(){return _n.nullStr}},rs={identify:function(ue){return"boolean"==typeof ue},default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:function(ue){return"t"===ue[0]||"T"===ue[0]},options:_t,stringify:function(ue){return ue.value?_t.trueStr:_t.falseStr}},lo={identify:function(ue){return xa(ue)&&ue>=0},default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o([0-7]+)$/,resolve:function(ue,te){return Wa(ue,te,8)},options:cr,stringify:function(ue){return Mi(ue,8,"0o")}},Is={identify:xa,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:function(ue){return Wa(ue,ue,10)},options:cr,stringify:Nr},Ga={identify:function(ue){return xa(ue)&&ue>=0},default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x([0-9a-fA-F]+)$/,resolve:function(ue,te){return Wa(ue,te,16)},options:cr,stringify:function(ue){return Mi(ue,16,"0x")}},Ja={identify:function(ue){return"number"==typeof ue},default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.inf|(\.nan))$/i,resolve:function(ue,te){return te?NaN:"-"===ue[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY},stringify:Nr},uo={identify:function(ue){return"number"==typeof ue},default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:function(ue){return parseFloat(ue)},stringify:function(ue){return Number(ue.value).toExponential()}},si={identify:function(ue){return"number"==typeof ue},default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.([0-9]+)|[0-9]+\.([0-9]*))$/,resolve:function(ue,te,pe){var ae=te||pe,de=new mn(parseFloat(ue));return ae&&"0"===ae[ae.length-1]&&(de.minFractionDigits=ae.length),de},stringify:Nr},er=Br.concat([Ta,rs,lo,Is,Ga,Ja,uo,si]),co=function(ue){return"bigint"==typeof ue||Number.isInteger(ue)},xi=function(ue){return JSON.stringify(ue.value)},fr=[et,Fr,{identify:function(ue){return"string"==typeof ue},default:!0,tag:"tag:yaml.org,2002:str",resolve:ri,stringify:xi},{identify:function(ue){return null==ue},createNode:function(ue,te,pe){return pe.wrapScalars?new mn(null):null},default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:function(){return null},stringify:xi},{identify:function(ue){return"boolean"==typeof ue},default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:function(ue){return"true"===ue},stringify:xi},{identify:co,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:function(ue){return cr.asBigInt?BigInt(ue):parseInt(ue,10)},stringify:function(ue){var te=ue.value;return co(te)?te.toString():JSON.stringify(te)}},{identify:function(ue){return"number"==typeof ue},default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:function(ue){return parseFloat(ue)},stringify:xi}];fr.scalarFallback=function(ge){throw new SyntaxError("Unresolved plain scalar ".concat(JSON.stringify(ge)))};var xr=function(ue){return ue.value?_t.trueStr:_t.falseStr},Ya=function(ue){return"bigint"==typeof ue||Number.isInteger(ue)};function Ni(ge,ue,te){var pe=ue.replace(/_/g,"");if(cr.asBigInt){switch(te){case 2:pe="0b".concat(pe);break;case 8:pe="0o".concat(pe);break;case 16:pe="0x".concat(pe)}var ae=BigInt(pe);return"-"===ge?BigInt(-1)*ae:ae}var de=parseInt(pe,te);return"-"===ge?-1*de:de}function Hr(ge,ue,te){var pe=ge.value;if(Ya(pe)){var ae=pe.toString(ue);return pe<0?"-"+te+ae.substr(1):te+ae}return Nr(ge)}var vi=Br.concat([{identify:function(ue){return null==ue},createNode:function(ue,te,pe){return pe.wrapScalars?new mn(null):null},default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:function(){return null},options:_n,stringify:function(){return _n.nullStr}},{identify:function(ue){return"boolean"==typeof ue},default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:function(){return!0},options:_t,stringify:xr},{identify:function(ue){return"boolean"==typeof ue},default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:function(){return!1},options:_t,stringify:xr},{identify:Ya,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^([-+]?)0b([0-1_]+)$/,resolve:function(ue,te,pe){return Ni(te,pe,2)},stringify:function(ue){return Hr(ue,2,"0b")}},{identify:Ya,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^([-+]?)0([0-7_]+)$/,resolve:function(ue,te,pe){return Ni(te,pe,8)},stringify:function(ue){return Hr(ue,8,"0")}},{identify:Ya,default:!0,tag:"tag:yaml.org,2002:int",test:/^([-+]?)([0-9][0-9_]*)$/,resolve:function(ue,te,pe){return Ni(te,pe,10)},stringify:Nr},{identify:Ya,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^([-+]?)0x([0-9a-fA-F_]+)$/,resolve:function(ue,te,pe){return Ni(te,pe,16)},stringify:function(ue){return Hr(ue,16,"0x")}},{identify:function(ue){return"number"==typeof ue},default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.inf|(\.nan))$/i,resolve:function(ue,te){return te?NaN:"-"===ue[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY},stringify:Nr},{identify:function(ue){return"number"==typeof ue},default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?([0-9][0-9_]*)?(\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:function(ue){return parseFloat(ue.replace(/_/g,""))},stringify:function(ue){return Number(ue.value).toExponential()}},{identify:function(ue){return"number"==typeof ue},default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.([0-9_]*)$/,resolve:function(ue,te){var pe=new mn(parseFloat(ue.replace(/_/g,"")));if(te){var ae=te.replace(/_/g,"");"0"===ae[ae.length-1]&&(pe.minFractionDigits=ae.length)}return pe},stringify:Nr}],oo,ts,uu,so,Ca,gl,vl),ta={core:er,failsafe:Br,json:fr,yaml11:vi},ca={binary:oo,bool:rs,float:si,floatExp:uo,floatNaN:Ja,floatTime:gl,int:Is,intHex:Ga,intOct:lo,intTime:Ca,map:et,null:Ta,omap:ts,pairs:uu,seq:Fr,set:so,timestamp:vl};var Oi=function(ue,te){return ue.key<te.key?-1:ue.key>te.key?1:0},ba=function(){function ge(ue){var te=ue.customTags,pe=ue.merge,ae=ue.schema,de=ue.sortMapEntries,xe=ue.tags;O(this,ge),this.merge=!!pe,this.name=ae,this.sortMapEntries=!0===de?Oi:de||null,!te&&xe&&function Ln(ge,ue){if(!sr[ge]&&Os(!0)){sr[ge]=!0;var te="The option '".concat(ge,"' will be removed in a future release");fi(te+=ue?", use '".concat(ue,"' instead."):".","DeprecationWarning")}}("tags","customTags"),this.tags=function as(ge,ue,te,pe){var ae=ge[pe.replace(/\W/g,"")];if(!ae){var de=Object.keys(ge).map(function(At){return JSON.stringify(At)}).join(", ");throw new Error('Unknown schema "'.concat(pe,'"; use one of ').concat(de))}if(Array.isArray(te)){var Te,xe=L(te);try{for(xe.s();!(Te=xe.n()).done;)ae=ae.concat(Te.value)}catch(At){xe.e(At)}finally{xe.f()}}else"function"==typeof te&&(ae=te(ae.slice()));for(var We=0;We<ae.length;++We){var Je=ae[We];if("string"==typeof Je){var $e=ue[Je];if(!$e){var dt=Object.keys(ue).map(function(At){return JSON.stringify(At)}).join(", ");throw new Error('Unknown custom tag "'.concat(Je,'"; use one of ').concat(dt))}ae[We]=$e}}return ae}(ta,ca,te||xe,ae)}return j(ge,[{key:"createNode",value:function(te,pe,ae,de){var xe={defaultPrefix:ge.defaultPrefix,schema:this,wrapScalars:pe};return function ho(ge,ue,te){if(ge instanceof un)return ge;var pe=te.defaultPrefix,ae=te.onTagObj,de=te.prevObjects,xe=te.schema,Te=te.wrapScalars;ue&&ue.startsWith("!!")&&(ue=pe+ue.slice(2));var Be=function is(ge,ue,te){if(ue){var pe=te.filter(function(de){return de.tag===ue}),ae=pe.find(function(de){return!de.format})||pe[0];if(!ae)throw new Error("Tag ".concat(ue," not found"));return ae}return te.find(function(de){return(de.identify&&de.identify(ge)||de.class&&ge instanceof de.class)&&!de.format})}(ge,ue,xe.tags);if(!Be){if("function"==typeof ge.toJSON&&(ge=ge.toJSON()),!ge||"object"!==e(ge))return Te?new mn(ge):ge;Be=ge instanceof Map?et:ge[Symbol.iterator]?Fr:et}ae&&(ae(Be),delete te.onTagObj);var We={value:void 0,node:void 0};if(ge&&"object"===e(ge)&&de){var Je=de.get(ge);if(Je){var $e=new it(Je);return te.aliasNodes.push($e),$e}We.value=ge,de.set(ge,We)}return We.node=Be.createNode?Be.createNode(te.schema,ge,te):Te?new mn(ge):ge,ue&&We.node instanceof un&&(We.node.tag=ue),We.node}(te,ae,de?Object.assign(de,xe):xe)}},{key:"createPair",value:function(te,pe,ae){ae||(ae={wrapScalars:!0});var de=this.createNode(te,ae.wrapScalars,null,ae),xe=this.createNode(pe,ae.wrapScalars,null,ae);return new Ge(de,xe)}}]),ge}();S(ba,"defaultPrefix",$),S(ba,"defaultTags",oe);var Qa={anchorPrefix:"a",customTags:null,indent:2,indentSeq:!0,keepCstNodes:!1,keepNodeTypes:!0,keepBlobsInJSON:!0,mapAsMap:!1,maxAliasCount:100,prettyErrors:!1,simpleKeys:!1,version:"1.2"},fo={get binary(){return De},set binary(ge){Object.assign(De,ge)},get bool(){return _t},set bool(ge){Object.assign(_t,ge)},get int(){return cr},set int(ge){Object.assign(cr,ge)},get null(){return _n},set null(ge){Object.assign(_n,ge)},get str(){return yn},set str(ge){Object.assign(yn,ge)}},po={"1.0":{schema:"yaml-1.1",merge:!0,tagPrefixes:[{handle:"!",prefix:$},{handle:"!!",prefix:"tag:private.yaml.org,2002:"}]},1.1:{schema:"yaml-1.1",merge:!0,tagPrefixes:[{handle:"!",prefix:"!"},{handle:"!!",prefix:$}]},1.2:{schema:"core",merge:!1,tagPrefixes:[{handle:"!",prefix:"!"},{handle:"!!",prefix:$}]}};function go(ge,ue){if("1.0"===(ge.version||ge.options.version)){var te=ue.match(/^tag:private\.yaml\.org,2002:([^:/]+)$/);if(te)return"!"+te[1];var pe=ue.match(/^tag:([a-zA-Z0-9-]+)\.yaml\.org,2002:(.*)/);return pe?"!".concat(pe[1],"/").concat(pe[2]):"!".concat(ue.replace(/^tag:/,""))}var ae=ge.tagPrefixes.find(function(Te){return 0===ue.indexOf(Te.prefix)});if(!ae){var de=ge.getDefaults().tagPrefixes;ae=de&&de.find(function(Te){return 0===ue.indexOf(Te.prefix)})}if(!ae)return"!"===ue[0]?ue:"!<".concat(ue,">");var xe=ue.substr(ae.prefix.length).replace(/[!,[\]{}]/g,function(Te){return{"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"}[Te]});return ae.handle+xe}function Fi(ge,ue,te,pe){var Te,ae=ue.doc,de=ae.anchors,xe=ae.schema;if(!(ge instanceof un)){var Be={aliasNodes:[],onTagObj:function(en){return Te=en},prevObjects:new Map};ge=xe.createNode(ge,!0,null,Be);var Je,We=L(Be.aliasNodes);try{for(We.s();!(Je=We.n()).done;){var $e=Je.value;$e.source=$e.source.node;var dt=de.getName($e.source);dt||(dt=de.newName(),de.map[dt]=$e.source)}}catch(Vt){We.e(Vt)}finally{We.f()}}if(ge instanceof Ge)return ge.toString(ue,te,pe);Te||(Te=function os(ge,ue){if(ue instanceof it)return it;if(ue.tag){var te=ge.filter(function(Te){return Te.tag===ue.tag});if(te.length>0)return te.find(function(Te){return Te.format===ue.format})||te[0]}var pe,ae;if(ue instanceof mn){ae=ue.value;var de=ge.filter(function(Te){return Te.identify&&Te.identify(ae)||Te.class&&ae instanceof Te.class});pe=de.find(function(Te){return Te.format===ue.format})||de.find(function(Te){return!Te.format})}else ae=ue,pe=ge.find(function(Te){return Te.nodeClass&&ae instanceof Te.nodeClass});if(!pe){var xe=ae&&ae.constructor?ae.constructor.name:e(ae);throw new Error("Tag not resolved for ".concat(xe," value"))}return pe}(xe.tags,ge));var At=function ks(ge,ue,te){var pe=te.anchors,ae=te.doc,de=[],xe=ae.anchors.getName(ge);return xe&&(pe[xe]=ge,de.push("&".concat(xe))),ge.tag?de.push(go(ae,ge.tag)):ue.default||de.push(go(ae,ue.tag)),de.join(" ")}(ge,Te,ue);At.length>0&&(ue.indentAtStart=(ue.indentAtStart||0)+At.length+1);var It="function"==typeof Te.stringify?Te.stringify(ge,ue,te,pe):ge instanceof mn?jn(ge,ue,te,pe):ge.toString(ue,te,pe);return At?ge instanceof mn||"{"===It[0]||"["===It[0]?"".concat(At," ").concat(It):"".concat(At,"\n").concat(ue.indent).concat(It):It}var Ne=function(){function ge(ue){O(this,ge),S(this,"map",Object.create(null)),this.prefix=ue}return j(ge,[{key:"createAlias",value:function(te,pe){return this.setAnchor(te,pe),new it(te)}},{key:"createMergePair",value:function(){for(var te=this,pe=new zn,ae=arguments.length,de=new Array(ae),xe=0;xe<ae;xe++)de[xe]=arguments[xe];return pe.value.items=de.map(function(Te){if(Te instanceof it){if(Te.source instanceof Ut)return Te}else if(Te instanceof Ut)return te.createAlias(Te);throw new Error("Merge sources must be Map nodes or their Aliases")}),pe}},{key:"getName",value:function(te){var pe=this.map;return Object.keys(pe).find(function(ae){return pe[ae]===te})}},{key:"getNames",value:function(){return Object.keys(this.map)}},{key:"getNode",value:function(te){return this.map[te]}},{key:"newName",value:function(te){te||(te=this.prefix);for(var pe=Object.keys(this.map),ae=1;;++ae){var de="".concat(te).concat(ae);if(!pe.includes(de))return de}}},{key:"resolveNodes",value:function(){var te=this.map,pe=this._cstAliases;Object.keys(te).forEach(function(ae){te[ae]=te[ae].resolved}),pe.forEach(function(ae){ae.source=ae.source.resolved}),delete this._cstAliases}},{key:"setAnchor",value:function(te,pe){if(null!=te&&!ge.validAnchorNode(te))throw new Error("Anchors may only be set for Scalar, Seq and Map nodes");if(pe&&/[\x00-\x19\s,[\]{}]/.test(pe))throw new Error("Anchor names must not contain whitespace or control characters");var ae=this.map,de=te&&Object.keys(ae).find(function(xe){return ae[xe]===te});if(de){if(!pe)return de;de!==pe&&(delete ae[de],ae[pe]=te)}else{if(!pe){if(!te)return null;pe=this.newName()}ae[pe]=te}return pe}}],[{key:"validAnchorNode",value:function(te){return te instanceof mn||te instanceof Zt||te instanceof Ut}}]),ge}(),ot=function ge(ue,te){if(ue&&"object"===e(ue)){var pe=ue.tag;ue instanceof Dn?(pe&&(te[pe]=!0),ue.items.forEach(function(ae){return ge(ae,te)})):ue instanceof Ge?(ge(ue.key,te),ge(ue.value,te)):ue instanceof mn&&pe&&(te[pe]=!0)}return te},le=function(ue){return Object.keys(ot(ue,{}))};function ut(ge,ue){var te=ge.tagPrefixes,pe=I(ue.parameters,2),ae=pe[0],de=pe[1];if(!ae||!de)throw new ct(ue,"Insufficient parameters given for %TAG directive");if(te.some(function(Be){return Be.handle===ae}))throw new ct(ue,"The %TAG directive must only be given at most once per handle in the same document.");return{handle:ae,prefix:de}}function Tt(ge,ue){var pe=I(ue.parameters,1)[0];if("YAML:1.0"===ue.name&&(pe="1.0"),!pe)throw new ct(ue,"Insufficient parameters given for %YAML directive");if(!po[pe]){var xe="Document will be parsed as YAML ".concat(ge.version||ge.options.version," rather than YAML ").concat(pe);ge.warnings.push(new pt(ue,xe))}return pe}function on(ge){if(ge instanceof Dn)return!0;throw new Error("Expected a YAML collection as document contents")}var nn=function(){function ge(ue){O(this,ge),this.anchors=new Ne(ue.anchorPrefix),this.commentBefore=null,this.comment=null,this.contents=null,this.directivesEndMarker=null,this.errors=[],this.options=ue,this.schema=null,this.tagPrefixes=[],this.version=null,this.warnings=[]}return j(ge,[{key:"add",value:function(te){return on(this.contents),this.contents.add(te)}},{key:"addIn",value:function(te,pe){on(this.contents),this.contents.addIn(te,pe)}},{key:"delete",value:function(te){return on(this.contents),this.contents.delete(te)}},{key:"deleteIn",value:function(te){return Er(te)?null!=this.contents&&(this.contents=null,!0):(on(this.contents),this.contents.deleteIn(te))}},{key:"getDefaults",value:function(){return ge.defaults[this.version]||ge.defaults[this.options.version]||{}}},{key:"get",value:function(te,pe){return this.contents instanceof Dn?this.contents.get(te,pe):void 0}},{key:"getIn",value:function(te,pe){return Er(te)?!pe&&this.contents instanceof mn?this.contents.value:this.contents:this.contents instanceof Dn?this.contents.getIn(te,pe):void 0}},{key:"has",value:function(te){return this.contents instanceof Dn&&this.contents.has(te)}},{key:"hasIn",value:function(te){return Er(te)?void 0!==this.contents:this.contents instanceof Dn&&this.contents.hasIn(te)}},{key:"set",value:function(te,pe){on(this.contents),this.contents.set(te,pe)}},{key:"setIn",value:function(te,pe){Er(te)?this.contents=pe:(on(this.contents),this.contents.setIn(te,pe))}},{key:"setSchema",value:function(te,pe){if(te||pe||!this.schema){"number"==typeof te&&(te=te.toFixed(1)),"1.0"===te||"1.1"===te||"1.2"===te?(this.version?this.version=te:this.options.version=te,delete this.options.schema):te&&"string"==typeof te&&(this.options.schema=te),Array.isArray(pe)&&(this.options.customTags=pe);var ae=Object.assign({},this.getDefaults(),this.options);this.schema=new ba(ae)}}},{key:"parse",value:function(te,pe){this.options.keepCstNodes&&(this.cstNode=te),this.options.keepNodeTypes&&(this.type="DOCUMENT");var ae=te.directives,de=void 0===ae?[]:ae,xe=te.contents,Te=void 0===xe?[]:xe,Be=te.directivesEndMarker,We=te.error,Je=te.valueRange;if(We&&(We.source||(We.source=this),this.errors.push(We)),function Jt(ge,ue,te){var xe,pe=[],ae=!1,de=L(ue);try{for(de.s();!(xe=de.n()).done;){var Te=xe.value,Be=Te.comment,We=Te.name;switch(We){case"TAG":try{ge.tagPrefixes.push(ut(ge,Te))}catch(At){ge.errors.push(At)}ae=!0;break;case"YAML":case"YAML:1.0":ge.version&&ge.errors.push(new ct(Te,"The %YAML directive must only be given at most once per document."));try{ge.version=Tt(ge,Te)}catch(At){ge.errors.push(At)}ae=!0;break;default:if(We){var $e="YAML only supports %TAG and %YAML directives, and not %".concat(We);ge.warnings.push(new pt(Te,$e))}}Be&&pe.push(Be)}}catch(At){de.e(At)}finally{de.f()}te&&!ae&&"1.1"===(ge.version||te.version||ge.options.version)&&(ge.tagPrefixes=te.tagPrefixes.map(function(It){return{handle:It.handle,prefix:It.prefix}}),ge.version=te.version),ge.commentBefore=pe.join("\n")||null}(this,de,pe),Be&&(this.directivesEndMarker=!0),this.range=Je?[Je.start,Je.end]:null,this.setSchema(),this.anchors._cstAliases=[],function Ae(ge,ue){var xe,te={before:[],after:[]},pe=void 0,ae=!1,de=L(ue);try{for(de.s();!(xe=de.n()).done;){var Te=xe.value;if(Te.valueRange){if(void 0!==pe){ge.errors.push(new Lt(Te,"Document contains trailing content not separated by a ... or --- line"));break}var We=Kt(ge,Te);ae&&(We.spaceBefore=!0,ae=!1),pe=We}else null!==Te.comment?(void 0===pe?te.before:te.after).push(Te.comment):"BLANK_LINE"===Te.type&&(ae=!0,void 0===pe&&te.before.length>0&&!ge.commentBefore&&(ge.commentBefore=te.before.join("\n"),te.before=[]))}}catch(At){de.e(At)}finally{de.f()}if(ge.contents=pe||null,pe){var $e=te.before.join("\n");if($e){var dt=pe instanceof Dn&&pe.items[0]?pe.items[0]:pe;dt.commentBefore=dt.commentBefore?"".concat($e,"\n").concat(dt.commentBefore):$e}ge.comment=te.after.join("\n")||null}else ge.comment=te.before.concat(te.after).join("\n")||null}(this,Te),this.anchors.resolveNodes(),this.options.prettyErrors){var dt,$e=L(this.errors);try{for($e.s();!(dt=$e.n()).done;){var At=dt.value;At instanceof Se&&At.makePretty()}}catch(Rt){$e.e(Rt)}finally{$e.f()}var Vt,It=L(this.warnings);try{for(It.s();!(Vt=It.n()).done;){var en=Vt.value;en instanceof Se&&en.makePretty()}}catch(Rt){It.e(Rt)}finally{It.f()}}return this}},{key:"listNonDefaultTags",value:function(){return le(this.contents).filter(function(te){return 0!==te.indexOf(ba.defaultPrefix)})}},{key:"setTagPrefix",value:function(te,pe){if("!"!==te[0]||"!"!==te[te.length-1])throw new Error("Handle must start and end with !");if(pe){var ae=this.tagPrefixes.find(function(de){return de.handle===te});ae?ae.prefix=pe:this.tagPrefixes.push({handle:te,prefix:pe})}else this.tagPrefixes=this.tagPrefixes.filter(function(de){return de.handle!==te})}},{key:"toJSON",value:function(te,pe){var ae=this,de=this.options,We=de.keepBlobsInJSON&&("string"!=typeof te||!(this.contents instanceof mn)),Je={doc:this,indentStep:"  ",keep:We,mapAsMap:We&&!!de.mapAsMap,maxAliasCount:de.maxAliasCount,stringify:Fi},$e=Object.keys(this.anchors.map);$e.length>0&&(Je.anchors=new Map($e.map(function(cn){return[ae.anchors.map[cn],{alias:[],aliasCount:0,count:1}]})));var dt=Sn(this.contents,te,Je);if("function"==typeof pe&&Je.anchors){var It,At=L(Je.anchors.values());try{for(At.s();!(It=At.n()).done;){var Vt=It.value;pe(Vt.res,Vt.count)}}catch(cn){At.e(cn)}finally{At.f()}}return dt}},{key:"toString",value:function(){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");var te=this.options.indent;if(!Number.isInteger(te)||te<=0){var pe=JSON.stringify(te);throw new Error('"indent" option must be a positive integer, not '.concat(pe))}this.setSchema();var ae=[],de=!1;if(this.version){var xe="%YAML 1.2";"yaml-1.1"===this.schema.name&&("1.0"===this.version?xe="%YAML:1.0":"1.1"===this.version&&(xe="%YAML 1.1")),ae.push(xe),de=!0}var Te=this.listNonDefaultTags();this.tagPrefixes.forEach(function(At){var It=At.handle,Vt=At.prefix;Te.some(function(en){return 0===en.indexOf(Vt)})&&(ae.push("%TAG ".concat(It," ").concat(Vt)),de=!0)}),(de||this.directivesEndMarker)&&ae.push("---"),this.commentBefore&&((de||!this.directivesEndMarker)&&ae.unshift(""),ae.unshift(this.commentBefore.replace(/^/gm,"#")));var Be={anchors:Object.create(null),doc:this,indent:"",indentStep:" ".repeat(te),stringify:Fi},We=!1,Je=null;if(this.contents){this.contents instanceof un&&(this.contents.spaceBefore&&(de||this.directivesEndMarker)&&ae.push(""),this.contents.commentBefore&&ae.push(this.contents.commentBefore.replace(/^/gm,"#")),Be.forceBlockIndent=!!this.comment,Je=this.contents.comment);var dt=Fi(this.contents,Be,function(){return Je=null},Je?null:function(){return We=!0});ae.push(Sr(dt,"",Je))}else void 0!==this.contents&&ae.push(Fi(this.contents,Be));return this.comment&&((!We||Je)&&""!==ae[ae.length-1]&&ae.push(""),ae.push(this.comment.replace(/^/gm,"#"))),ae.join("\n")+"\n"}}]),ge}();S(nn,"defaults",po);var pr=function(ge){fe(te,ge);var ue=V(te);function te(pe){return O(this,te),ue.call(this,Object.assign({},Qa,pe))}return te}(nn);function Zr(ge,ue){var te=ir(ge),pe=new pr(ue).parse(te[0]);return te.length>1&&pe.errors.unshift(new ct(te[1],"Source contains multiple documents; please use YAML.parseAllDocuments()")),pe}var Jr={createNode:function tr(ge){var ue=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],te=arguments.length>2?arguments[2]:void 0;void 0===te&&"string"==typeof ue&&(te=ue,ue=!0);var pe=Object.assign({},nn.defaults[Qa.version],Qa),ae=new ba(pe);return ae.createNode(ge,ue,te)},defaultOptions:Qa,Document:pr,parse:function na(ge,ue){var te=Zr(ge,ue);if(te.warnings.forEach(function(pe){return fi(pe)}),te.errors.length>0)throw te.errors[0];return te.toJSON()},parseAllDocuments:function Tn(ge,ue){var pe,de,te=[],ae=L(ir(ge));try{for(ae.s();!(de=ae.n()).done;){var xe=de.value,Te=new pr(ue);Te.parse(xe,pe),te.push(Te),pe=Te}}catch(Be){ae.e(Be)}finally{ae.f()}return te},parseCST:ir,parseDocument:Zr,scalarOptions:fo,stringify:function Wn(ge,ue){var te=new pr(ue);return te.contents=ge,String(te)}}}}]);