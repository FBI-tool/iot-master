import{q as e,o as a,c as i,w as t,a as s,j as d,u as n,F as l,b as o,r as u,e as c,f as r,d as m,t as p}from"./index.8d4a8305.js";import{b as f,_ as h,a as v}from"./uni-forms.3c0cbf84.js";import{_,a as g}from"./uni-grid.ef650232.js";import{_ as j}from"./uni-icons.51822eb1.js";import{_ as b}from"./uni-section.96f3ba19.js";import{r as k}from"./const.9e5d4232.js";import{_ as C}from"./plugin-vue_export-helper.21dcd24c.js";var y=C({data:()=>({id:"",data:{name:"",interface_id:"",devices:[]}}),onLoad(e){this.id=e.id,this.id&&this.load()},methods:{load(){k({url:"project/"+this.id,success:e=>{this.data=e}})},save(){e("log","at pages/project/edit.vue:60",this.id),uni.showLoading({}),k({url:"project/"+(this.id||"create"),method:"POST",data:this.data,success(){uni.navigateBack()},complete(){uni.hideLoading()}})},addDevice(){let e={id:"",name:""};this.data.devices||(this.data.devices=[]),this.data.devices.push(e),this.editDevice(e)},editDevice(a){uni.navigateTo({url:"./device",success:e=>{e.eventChannel.emit("data",a)},events:{result:i=>{e("log","at pages/project/edit.vue:92","result",i),Object.assign(a,i)}}})}}},[["render",function(e,k,C,y,V,D){const x=u(c("uni-easyinput"),f),L=u(c("uni-forms-item"),h),w=u(c("uni-forms"),v),O=u(c("uni-grid-item"),_),T=u(c("uni-icons"),j),U=u(c("uni-grid"),g),q=u(c("uni-section"),b),z=r,B=m;return a(),i(B,{class:"p20"},{default:t((()=>[s(w,null,{default:t((()=>[s(L,{label:"名称",name:"name"},{default:t((()=>[s(x,{modelValue:V.data.name,"onUpdate:modelValue":k[0]||(k[0]=e=>V.data.name=e),placeholder:""},null,8,["modelValue"])])),_:1}),s(L,{label:"组态",name:"interface_id"},{default:t((()=>[s(x,{modelValue:V.data.interface_id,"onUpdate:modelValue":k[1]||(k[1]=e=>V.data.interface_id=e),placeholder:"选择"},null,8,["modelValue"])])),_:1})])),_:1}),s(q,{title:"绑定设备",type:"line"},{default:t((()=>[s(U,{column:3},{default:t((()=>[(a(!0),d(l,null,n(V.data.devices,((e,s)=>(a(),i(O,{onClick:a=>D.editDevice(e),key:s},{default:t((()=>[o(p(e.id)+" "+p(e.name),1)])),_:2},1032,["onClick"])))),128)),s(O,{onClick:D.addDevice},{default:t((()=>[s(T,{type:"plus",size:"50"}),o(" 添加 ")])),_:1},8,["onClick"])])),_:1})])),_:1}),s(z,{type:"primary",onClick:D.save},{default:t((()=>[o("保存")])),_:1},8,["onClick"])])),_:1})}]]);export{y as default};
