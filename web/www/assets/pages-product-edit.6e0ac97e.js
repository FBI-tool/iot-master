import{q as e,o as a,c as t,w as l,a as i,j as s,u as d,F as n,b as o,r as u,e as r,f as p,d as c,t as m}from"./index.8d4a8305.js";import{b as f,_ as h,a as _}from"./uni-forms.3c0cbf84.js";import{_ as g,a as v}from"./uni-grid.ef650232.js";import{_ as k}from"./uni-icons.51822eb1.js";import{_ as y}from"./uni-section.96f3ba19.js";import{r as b}from"./const.9e5d4232.js";import{_ as C}from"./plugin-vue_export-helper.21dcd24c.js";var P=C({data:()=>({id:"",data:{id:"",name:"",type:"",version:"",points:[],pollers:[]}}),onLoad(e){this.id=e.id,this.id&&this.load()},methods:{load(){b({url:"product/"+this.id,success:e=>{this.data=e}})},save(){e("log","at pages/product/edit.vue:78",this.id),uni.showLoading({}),b({url:"product/"+(this.id||"create"),method:"POST",data:this.data,success(){uni.navigateBack()},complete(){uni.hideLoading()}})},addPoint(){let e={name:"",label:"",unit:"",type:"int",le:!1,dot:0,area:"",address:""};this.data.points.push(e),this.editPoint(e)},addPoller(){let e={length:0,area:"",address:""};this.data.pollers.push(e),this.editPoller(e)},editPoint(a){uni.navigateTo({url:"./point",success:e=>{e.eventChannel.emit("data",a)},events:{result:t=>{e("log","at pages/product/edit.vue:123","result",t),Object.assign(a,t)}}})},editPoller(e){uni.navigateTo({url:"./poller",success:e=>{e.eventChannel.emit("data",pt)},events:{result:a=>{Object.assign(e,a)}}})}}},[["render",function(e,b,C,P,j,V){const x=u(r("uni-easyinput"),f),L=u(r("uni-forms-item"),h),O=u(r("uni-forms"),_),T=u(r("uni-grid-item"),g),U=u(r("uni-icons"),k),w=u(r("uni-grid"),v),z=u(r("uni-section"),y),q=p,B=c;return a(),t(B,{class:"p20"},{default:l((()=>[i(O,null,{default:l((()=>[i(L,{label:"名称",name:"name"},{default:l((()=>[i(x,{modelValue:j.data.name,"onUpdate:modelValue":b[0]||(b[0]=e=>j.data.name=e),placeholder:""},null,8,["modelValue"])])),_:1}),i(L,{label:"厂商",name:"type"},{default:l((()=>[i(x,{modelValue:j.data.manufacturer,"onUpdate:modelValue":b[1]||(b[1]=e=>j.data.manufacturer=e),placeholder:""},null,8,["modelValue"])])),_:1}),i(L,{label:"版本",name:"version"},{default:l((()=>[i(x,{modelValue:j.data.version,"onUpdate:modelValue":b[2]||(b[2]=e=>j.data.version=e),placeholder:""},null,8,["modelValue"])])),_:1})])),_:1}),i(z,{title:"数据点位",type:"line"},{default:l((()=>[i(w,{column:3},{default:l((()=>[(a(!0),s(n,null,d(j.data.points,((e,i)=>(a(),t(T,{onClick:a=>V.editPoint(e),key:i},{default:l((()=>[o(m(e.name)+" "+m(e.lable)+" "+m(e.type)+" "+m(e.area)+" "+m(e.address),1)])),_:2},1032,["onClick"])))),128)),i(T,{onClick:V.addPoint},{default:l((()=>[i(U,{type:"plus",size:"50"}),o(" 添加 ")])),_:1},8,["onClick"])])),_:1})])),_:1}),i(z,{title:"数据轮询",type:"line"},{default:l((()=>[i(w,{column:3},{default:l((()=>[(a(!0),s(n,null,d(j.data.pollers,((e,i)=>(a(),t(T,{onClick:a=>V.editPoller(e),key:i},{default:l((()=>[o(m(e.area)+" "+m(e.address)+" "+m(e.length),1)])),_:2},1032,["onClick"])))),128)),i(T,{onClick:V.addPoller},{default:l((()=>[i(U,{type:"plus",size:"50"}),o(" 添加 ")])),_:1},8,["onClick"])])),_:1})])),_:1}),i(q,{type:"primary",onClick:V.save},{default:l((()=>[o("保存")])),_:1},8,["onClick"])])),_:1})}]]);export{P as default};
