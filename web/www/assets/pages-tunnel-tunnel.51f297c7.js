import{_ as e,a as t}from"./uni-fab.c776ca19.js";import{o as a,c as i,w as s,a as o,j as n,u as l,F as r,r as d,e as u,d as c,i as h}from"./index.8d4a8305.js";import{_ as m,a as p}from"./uni-list.723f536b.js";import{r as f}from"./const.9e5d4232.js";import{_ as k}from"./plugin-vue_export-helper.21dcd24c.js";import"./uni-icons.51822eb1.js";var g=k({data:()=>({server:"",gateway:"",keyword:"",limit:20,datum:[]}),onPullDownRefresh(){this.datum=[],this.skip=0},onReachBottom(){this.load()},onLoad(e){this.selecting=!!e.select,this.server=e.server,this.gateway=e.gateway,this.load()},methods:{load(){uni.showLoading({}),f({url:"tunnel/search",method:"POST",data:{skip:this.datum.length,limit:this.limit,keyword:this.keyword?{id:this.keyword,name:this.keyword}:{},filter:this.server?{server_id:this.server}:this.gateway?{gateway_id:this.gateway}:{}},success:e=>{this.datum=this.datum.concat(e)},complete(){uni.hideLoading(),uni.stopPullDownRefresh()}})},onSearch(){this.datum=[],this.load()},create(){uni.navigateTo({url:"./edit"})},open(e){if(this.selecting)return this.getOpenerEventChannel().emit("select",e.id),void uni.navigateBack();uni.navigateTo({url:"./detail?id="+e.id})}}},[["render",function(f,k,g,w,v,y){const _=d(u("uni-search-bar"),e),b=d(u("uni-fab"),t),j=h,C=d(u("uni-list-item"),m),F=d(u("uni-list"),p),x=c;return a(),i(x,null,{default:s((()=>[o(_,{onConfirm:y.onSearch,onInput:k[0]||(k[0]=()=>{}),placeholder:"ID 名称",modelValue:v.keyword,"onUpdate:modelValue":k[1]||(k[1]=e=>v.keyword=e)},null,8,["onConfirm","modelValue"]),o(b,{onFabClick:y.create},null,8,["onFabClick"]),o(F,null,{default:s((()=>[(a(!0),n(r,null,l(v.datum,((e,t)=>(a(),i(C,{key:t,title:e.name,note:e.id,link:"",onClick:t=>y.open(e),clickable:!0},{header:s((()=>[o(j,{class:"icon",src:"/assets/link.5c09857d.svg",mode:"aspectFit"})])),_:2},1032,["title","note","onClick"])))),128))])),_:1})])),_:1})}],["__scopeId","data-v-422e6dea"]]);export{g as default};
