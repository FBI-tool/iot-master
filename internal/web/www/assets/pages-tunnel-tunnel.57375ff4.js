import{K as e,L as a,M as t,B as s,N as i,o,c as r,w as l,a as n,j as d,C as c,F as u,r as h,e as m,d as p,i as f}from"./index.9b1e08a7.js";import{_ as k,a as w}from"./uni-fab.3c991723.js";import{_ as y,a as g}from"./uni-list.23a0ebb9.js";import{r as v}from"./const.19faadc4.js";import{_}from"./plugin-vue_export-helper.21dcd24c.js";import"./uni-icons.cae5d20c.js";var b=_({data:()=>({server:"",gateway:"",keyword:"",limit:20,datum:[]}),onPullDownRefresh(){this.datum=[],this.skip=0},onReachBottom(){this.load()},onLoad(e){this.selecting=!!e.select,this.server=e.server,this.gateway=e.gateway,this.load()},methods:{load(){e({}),v({url:"tunnel/search",method:"POST",data:{skip:this.datum.length,limit:this.limit,keyword:this.keyword?{id:this.keyword,name:this.keyword}:{},filter:this.server?{server_id:this.server}:this.gateway?{gateway_id:this.gateway}:{}},success:e=>{this.datum=this.datum.concat(e)},complete(){a(),t()}})},onSearch(){this.datum=[],this.load()},create(){s({url:"./edit"})},open(e){if(this.selecting)return this.getOpenerEventChannel().emit("select",e.id),void i();s({url:"./detail?id="+e.id})}}},[["render",function(e,a,t,s,i,v){const _=h(m("uni-search-bar"),k),b=h(m("uni-fab"),w),C=f,j=h(m("uni-list-item"),y),F=h(m("uni-list"),g),x=p;return o(),r(x,null,{default:l((()=>[n(_,{onConfirm:v.onSearch,onInput:a[0]||(a[0]=()=>{}),placeholder:"ID 名称",modelValue:i.keyword,"onUpdate:modelValue":a[1]||(a[1]=e=>i.keyword=e)},null,8,["onConfirm","modelValue"]),n(b,{onFabClick:v.create},null,8,["onFabClick"]),n(F,null,{default:l((()=>[(o(!0),d(u,null,c(i.datum,((e,a)=>(o(),r(j,{key:a,title:e.name,note:e.id,link:"",onClick:a=>v.open(e),clickable:!0},{header:l((()=>[n(C,{class:"icon",src:"/assets/link.5c09857d.svg",mode:"aspectFit"})])),_:2},1032,["title","note","onClick"])))),128))])),_:1})])),_:1})}],["__scopeId","data-v-422e6dea"]]);export{b as default};
