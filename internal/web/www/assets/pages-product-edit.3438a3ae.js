import{v as e,K as a,N as t,L as l,B as s,o as d,c as i,w as o,a as n,j as u,C as r,F as p,b as c,r as m,e as f,f as h,d as _,t as v}from"./index.9b1e08a7.js";import{b,_ as y,a as C}from"./uni-forms.18af1bf1.js";import{_ as g,a as k}from"./uni-grid.d949ebd7.js";import{_ as P}from"./uni-icons.cae5d20c.js";import{_ as j}from"./uni-section.fa539b76.js";import{r as V}from"./const.19faadc4.js";import{_ as x}from"./plugin-vue_export-helper.21dcd24c.js";var O=x({data:()=>({id:"",data:{id:"",name:"",type:"",version:"",points:[],pollers:[]}}),onLoad(e){this.id=e.id,this.id&&this.load()},methods:{load(){V({url:"product/"+this.id,success:e=>{this.data=e}})},save(){e("log","at pages/product/edit.vue:78",this.id),a({}),V({url:"product/"+(this.id||"create"),method:"POST",data:this.data,success(){t()},complete(){l()}})},addPoint(){let e={name:"",label:"",unit:"",type:"int",le:!1,dot:0,area:"",address:""};this.data.points.push(e),this.editPoint(e)},addPoller(){let e={length:0,area:"",address:""};this.data.pollers.push(e),this.editPoller(e)},editPoint(a){s({url:"./point",success:e=>{e.eventChannel.emit("data",a)},events:{result:t=>{e("log","at pages/product/edit.vue:123","result",t),Object.assign(a,t)}}})},editPoller(e){s({url:"./poller",success:e=>{e.eventChannel.emit("data",pt)},events:{result:a=>{Object.assign(e,a)}}})}}},[["render",function(e,a,t,l,s,V){const x=m(f("uni-easyinput"),b),O=m(f("uni-forms-item"),y),U=m(f("uni-forms"),C),z=m(f("uni-grid-item"),g),L=m(f("uni-icons"),P),w=m(f("uni-grid"),k),B=m(f("uni-section"),j),F=h,K=_;return d(),i(K,{class:"p20"},{default:o((()=>[n(U,null,{default:o((()=>[n(O,{label:"名称",name:"name"},{default:o((()=>[n(x,{modelValue:s.data.name,"onUpdate:modelValue":a[0]||(a[0]=e=>s.data.name=e),placeholder:""},null,8,["modelValue"])])),_:1}),n(O,{label:"厂商",name:"type"},{default:o((()=>[n(x,{modelValue:s.data.manufacturer,"onUpdate:modelValue":a[1]||(a[1]=e=>s.data.manufacturer=e),placeholder:""},null,8,["modelValue"])])),_:1}),n(O,{label:"版本",name:"version"},{default:o((()=>[n(x,{modelValue:s.data.version,"onUpdate:modelValue":a[2]||(a[2]=e=>s.data.version=e),placeholder:""},null,8,["modelValue"])])),_:1})])),_:1}),n(B,{title:"数据点位",type:"line"},{default:o((()=>[n(w,{column:3},{default:o((()=>[(d(!0),u(p,null,r(s.data.points,((e,a)=>(d(),i(z,{onClick:a=>V.editPoint(e),key:a},{default:o((()=>[c(v(e.name)+" "+v(e.lable)+" "+v(e.type)+" "+v(e.area)+" "+v(e.address),1)])),_:2},1032,["onClick"])))),128)),n(z,{onClick:V.addPoint},{default:o((()=>[n(L,{type:"plus",size:"50"}),c(" 添加 ")])),_:1},8,["onClick"])])),_:1})])),_:1}),n(B,{title:"数据轮询",type:"line"},{default:o((()=>[n(w,{column:3},{default:o((()=>[(d(!0),u(p,null,r(s.data.pollers,((e,a)=>(d(),i(z,{onClick:a=>V.editPoller(e),key:a},{default:o((()=>[c(v(e.area)+" "+v(e.address)+" "+v(e.length),1)])),_:2},1032,["onClick"])))),128)),n(z,{onClick:V.addPoller},{default:o((()=>[n(L,{type:"plus",size:"50"}),c(" 添加 ")])),_:1},8,["onClick"])])),_:1})])),_:1}),n(F,{type:"primary",onClick:V.save},{default:o((()=>[c("保存")])),_:1},8,["onClick"])])),_:1})}]]);export{O as default};
