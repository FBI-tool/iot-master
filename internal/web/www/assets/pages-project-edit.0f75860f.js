import{v as e,K as a,N as i,L as t,B as s,o as d,c as l,w as o,a as n,j as c,C as u,F as r,b as m,r as p,e as f,f as v,d as h,t as _}from"./index.f9d0ec48.js";import{b as j,_ as g,a as C}from"./uni-forms.91cc1c70.js";import{_ as k,a as y}from"./uni-grid.80a12a34.js";import{_ as V}from"./uni-icons.f8e12434.js";import{_ as b}from"./uni-section.1de099dc.js";import{r as D}from"./const.9d79c950.js";import{_ as x}from"./plugin-vue_export-helper.21dcd24c.js";var L=x({data:()=>({id:"",data:{name:"",interface_id:"",devices:[]}}),onLoad(e){this.id=e.id,this.id&&this.load()},methods:{load(){D({url:"project/"+this.id,success:e=>{this.data=e}})},save(){e("log","at pages/project/edit.vue:60",this.id),a({}),D({url:"project/"+(this.id||"create"),method:"POST",data:this.data,success(){i()},complete(){t()}})},addDevice(){let e={id:"",name:""};this.data.devices||(this.data.devices=[]),this.data.devices.push(e),this.editDevice(e)},editDevice(a){s({url:"./device",success:e=>{e.eventChannel.emit("data",a)},events:{result:i=>{e("log","at pages/project/edit.vue:92","result",i),Object.assign(a,i)}}})}}},[["render",function(e,a,i,t,s,D){const x=p(f("uni-easyinput"),j),L=p(f("uni-forms-item"),g),O=p(f("uni-forms"),C),U=p(f("uni-grid-item"),k),w=p(f("uni-icons"),V),z=p(f("uni-grid"),y),B=p(f("uni-section"),b),F=v,K=h;return d(),l(K,{class:"p20"},{default:o((()=>[n(O,null,{default:o((()=>[n(L,{label:"名称",name:"name"},{default:o((()=>[n(x,{modelValue:s.data.name,"onUpdate:modelValue":a[0]||(a[0]=e=>s.data.name=e),placeholder:""},null,8,["modelValue"])])),_:1}),n(L,{label:"组态",name:"interface_id"},{default:o((()=>[n(x,{modelValue:s.data.interface_id,"onUpdate:modelValue":a[1]||(a[1]=e=>s.data.interface_id=e),placeholder:"选择"},null,8,["modelValue"])])),_:1})])),_:1}),n(B,{title:"绑定设备",type:"line"},{default:o((()=>[n(z,{column:3},{default:o((()=>[(d(!0),c(r,null,u(s.data.devices,((e,a)=>(d(),l(U,{onClick:a=>D.editDevice(e),key:a},{default:o((()=>[m(_(e.id)+" "+_(e.name),1)])),_:2},1032,["onClick"])))),128)),n(U,{onClick:D.addDevice},{default:o((()=>[n(w,{type:"plus",size:"50"}),m(" 添加 ")])),_:1},8,["onClick"])])),_:1})])),_:1}),n(F,{type:"primary",onClick:D.save},{default:o((()=>[m("保存")])),_:1},8,["onClick"])])),_:1})}]]);export{L as default};
